<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">

<html>

<head>

<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">

<title>Debian Reference - Tuning a Debian system</title>

</head>

<body>

<p><a name="ch-tune"></a></p>
<hr>

<p>
[ <a href="ch-tips.en.html">previous</a> ]
[ <a href="index.en.html#contents">Contents</a> ]
[ <a href="ch-preface.en.html">1</a> ]
[ <a href="ch-system.en.html">2</a> ]
[ <a href="ch-install.en.html">3</a> ]
[ <a href="ch-tutorial.en.html">4</a> ]
[ <a href="ch-woody.en.html">5</a> ]
[ <a href="ch-package.en.html">6</a> ]
[ <a href="ch-kernel.en.html">7</a> ]
[ <a href="ch-tips.en.html">8</a> ]
[ 9 ]
[ <a href="ch-gateway.en.html">10</a> ]
[ <a href="ch-edit.en.html">11</a> ]
[ <a href="ch-vcs.en.html">12</a> ]
[ <a href="ch-program.en.html">13</a> ]
[ <a href="ch-gnupg.en.html">14</a> ]
[ <a href="ch-support.en.html">15</a> ]
[ <a href="ap-appendix.en.html">A</a> ]
[ <a href="ch-gateway.en.html">next</a> ]
</p>

<hr>

<h1>
Debian Reference
<br>Chapter 9 - Tuning a Debian system
</h1>

<hr>

<p>
This chapter describes only the basics of system configuration through a
command-line interface.  Before reading this chapter you should read <a
href="ch-install.en.html">Debian System installation hints, Chapter 3</a>.
</p>

<p>
If you are concerned about security then you should read the <code><a
href="http://www.debian.org/doc/manuals/securing-debian-howto/">Securing Debian
Manual</a></code> which comes in the <code>harden-doc</code> package.
</p>

<hr>

<h2><a name="s-init-hints"></a>9.1 System initialization</h2>

<p>
Debian uses the System V init script system.  See <a
href="ch-system.en.html#s-init">The <code>init</code> program, Section
2.4.1</a> for an introduction.
</p>

<hr>

<h3><a name="s-init-defaults"></a>9.1.1 Customizing init scripts</h3>

<p>
The easiest way to control the behavior of an init script is by changing
environment variable assignments in the file named like the init script in the
<code>/etc/default</code> directory.  [<a href="footnotes.en.html#f39"
name="fr39">39</a>] For example, <code>/etc/default/hotplug</code> can be used
to control how <code>/etc/init.d/hotplug</code> works.  The
<code>/etc/default/rcS</code> file can be used to customize boot-time defaults
for <code>motd</code>, <code>sulogin</code>, etc.
</p>

<p>
If you cannot get the behavior you want by changing such variables then you can
modify the init scripts themselves: they are all configuration files.
</p>

<hr>

<h3><a name="s-syslogd"></a>9.1.2 Customizing system logging</h3>

<p>
System log mode can be configured using <code>/etc/syslog.conf</code>.  Check
the <code>colorize</code> package for a program to colorize system logfiles.
See also <code>syslogd(8)</code> and <code>syslog.conf(5)</code>.
</p>

<hr>

<h3><a name="s-hdtune"></a>9.1.3 Optimizing hardware</h3>

<p>
There are a few hardware optimization configurations that Debian leaves to the
sysadmin to take care of.
</p>
<ul>
<li>
<p>
<code>hdparm</code>
</p>
<ul>
<li>
<p>
Hard disk access optimization.  Very effective.
</p>
</li>
<li>
<p>
Dangerous.  You must read <code>hdparm(8)</code> first.
</p>
</li>
<li>
<p>
<samp>hdparm -tT <var>/dev/hda</var></samp> to test disk access speed.
</p>
</li>
<li>
<p>
<samp>hdparm -q -c3 -d1 -u1 -m16 <var>/dev/hda</var></samp> to speed up a
modern IDE system.  (It may be dangerous.)
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
<code>setcd</code>
</p>
<ul>
<li>
<p>
Compact disc drive access optimization.
</p>
</li>
<li>
<p>
<samp>setcd -x <var>2</var></samp> to slow down to <var>2</var>x speed.
</p>
</li>
<li>
<p>
See <code>setcd(1)</code>.
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
<code>setserial</code>
</p>
<ul>
<li>
<p>
Collection of tools for serial port management.
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
<code>scsitools</code>
</p>
<ul>
<li>
<p>
Collection of tools for SCSI hardware management.
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
<code>memtest86</code>
</p>
<ul>
<li>
<p>
Collection of tools for memory hardware management.
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
<code>hwtools</code>
</p>
<ul>
<li>
<p>
Collection of tools for low-level hardware management.
</p>
<ul>
<li>
<p>
<code>irqtune</code>: changes the IRQ priority of devices to allow devices that
require high priority and fast service (e.g.  serial ports, modems) to have it.
3x speedup of serial/modem throughput is possible.
</p>
</li>
<li>
<p>
<code>scanport</code>: scans I/O space from 0x100 to 0x3ff looking for
installed ISA devices.
</p>
</li>
<li>
<p>
<code>inb</code>: a quick little hack that reads an I/O port and dumps the
value in hex and binary.
</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
<code>schedutils</code>
</p>
<ul>
<li>
<p>
Linux scheduler utilities.
</p>
</li>
<li>
<p>
<code>taskset</code>, <code>irqset</code>, <code>lsrt</code>, and
<code>rt</code> are included.
</p>
</li>
<li>
<p>
Together with <code>nice</code> and <code>renice</code> (not included), they
allow full control of process scheduling parameters.
</p>
</li>
</ul>
</li>
</ul>

<p>
Mounting a filesystem with the <samp>noatime</samp> option is also very
effective in speeding up read access to the file.  See <code>fstab(5)</code>
and <code>mount(8)</code>.
</p>

<p>
Some hardware can be tuned directly by the Linux kernel itself through the proc
filesystem.  See <a href="ch-kernel.en.html#s-proc-sys">Tuning the kernel
through the proc filesystem, Section 7.2</a>.
</p>

<p>
There are many hardware-specific configuration utilities in Debian.  Many of
them address needs specific to the laptop PC.  Here are some interesting
packages available in Debian:
</p>
<ul>
<li>
<p>
<code>tpconfig</code> - A program to configure touchpad devices
</p>
</li>
<li>
<p>
<code>apmd</code> - Utilities for Advanced Power Management (APM)
</p>
</li>
<li>
<p>
<code>acpi</code> - displays information on ACPI devices
</p>
</li>
<li>
<p>
<code>acpid</code> - Utilities for using ACPI
</p>
</li>
<li>
<p>
<code>lphdisk</code> - prepares hibernation partition for Phoenix NoteBIOS
</p>
</li>
<li>
<p>
<code>sleepd</code> - puts a laptop to sleep during inactivity
</p>
</li>
<li>
<p>
<code>noflushd</code> - allow idle hard disks to spin down
</p>
</li>
<li>
<p>
<code>big-cursor</code> - larger mouse cursors for X
</p>
</li>
<li>
<p>
<code>acme</code> - Enables the &quot;multimedia buttons&quot; found on laptops
</p>
</li>
<li>
<p>
<code>tpctl</code> - IBM ThinkPad hardware configuration tools
</p>
</li>
<li>
<p>
<code>mwavem</code> - Mwave/ACP modem support
</p>
</li>
<li>
<p>
<code>toshset</code> - Access much of the Toshiba laptop hardware interface
</p>
</li>
<li>
<p>
<code>toshutils</code> - Toshiba laptop utilities
</p>
</li>
<li>
<p>
<code>sjog</code> - A program to use the &quot;Jog Dial&quot; on Sony Vaio
Laptops
</p>
</li>
<li>
<p>
<code>spicctrl</code> - Sony Vaio controller program to set LCD backlight
brightness
</p>
</li>
</ul>

<p>
Here, ACPI is a newer framework for the power management system than APM.
</p>

<p>
Some of these packages require special kernel modules.  They are already
included in the latest kernel source in many cases.  In case of trouble, you
may need to apply the latest patch to the kernel yourself.
</p>

<hr>

<h2><a name="s9.2"></a>9.2 Restricting access</h2>

<hr>

<h3><a name="s-loginctrl"></a>9.2.1 Restricting logins with PAM</h3>

<p>
PAM (Pluggable Authentication Modules) allow you to control how users log in.
</p>

<pre>
     /etc/pam.d/*             # PAM control files
     /etc/pam.d/login         # PAM control file for login
     /etc/security/*          # PAM module parameters
     /etc/securetty           # this controls root login by console (login)
     /etc/login.defs          # this controls login behaviors (login)
</pre>

<p>
Change the contents of <code>/etc/pam.d/login</code> as follows, if you want
insecure but passwordless console terminals at your own risk.
</p>

<pre>
     #auth       required   pam_unix.so nullok
     auth       required   pam_permit.so
</pre>

<p>
Similar tricks can be applied for <code>xdm</code>, <code>gdm</code>, ..., for
passwordless console X.
</p>

<p>
On the other hand, install <code>cracklib2</code> and set
<code>/etc/pam.d/passwd</code> as follows, if you want to enforce a good
password policy.
</p>

<pre>
     password required       pam_cracklib.so retry=3 minlen=6 difok=3
</pre>

<p>
A one-time login password for account activation may also help.  For this, use
the <code>passwd</code> command with the <samp>-e</samp> option.  See
<code>passwd(1)</code>.
</p>

<p>
The maximum number of processes can be set with <samp>ulimit -u 1000</samp> in
a Bash shell or with settings in <code>/etc/security/limits.conf</code> from
PAM.  Other parameters such as <samp>core</samp> can be set similarly.  The
initial value of <code>PATH</code> can be set by <code>/etc/login.defs</code>
before the shell startup script.
</p>

<p>
The documentation for PAM is packaged in the <code>libpam-doc</code> package.
The <em>Linux-PAM System Administrator's Guide</em> covers configuring PAM,
what modules are available, etc.  The documentation also includes <em>The
Linux-PAM Application Developers' Guide</em> and <em>The Linux-PAM Module
Writers' Guide</em>.
</p>

<hr>

<h3><a name="s-wheel"></a>9.2.2 &quot;Why GNU <code>su</code> does not support the <samp>wheel</samp> group&quot;</h3>

<p>
This is the famous phrase at the bottom of the old <samp>info su</samp> page by
Richard M.  Stallman.  Not to worry: the current <code>su</code> in Debian uses
PAM, so that one can restrict the ability to use <code>su</code> to any group
using <code>pam_wheel.so</code> in <code>/etc/pam.d/su</code>.  The following
will set the <samp>adm</samp> group in a Debian system as an equivalent of the
BSD <samp>wheel</samp> group and allow <code>su</code> without a password for
its members.
</p>

<pre>
     # anti-RMS configuration in /etc/pam.d/su
     auth       required   pam_wheel.so group=adm
     
     # Wheel members to be able to su without a password
     auth       sufficient pam_wheel.so trust group=adm
</pre>

<hr>

<h3><a name="s9.2.3"></a>9.2.3 Purposes of standard groups</h3>

<p>
A few interesting groups:
</p>
<ul>
<li>
<p>
<samp>root</samp> group is the default wheel group for <code>su</code> if
<code>pam_wheel.so</code> is used without the <samp>group=</samp> argument.
</p>
</li>
<li>
<p>
<samp>adm</samp> group can read logfiles.
</p>
</li>
<li>
<p>
<samp>cdrom</samp> group can be used locally to give a set of users access to a
CD-ROM drive.
</p>
</li>
<li>
<p>
<samp>floppy</samp> group can be used locally to give a set of users access to
a floppy drive.
</p>
</li>
<li>
<p>
<samp>audio</samp> group can be used locally to give a set of users access to
an audio device.
</p>
</li>
<li>
<p>
<samp>src</samp> group owns source code, including files in
<code>/usr/src</code>.  It can be used locally to give a user the ability to
manage system source code.
</p>
</li>
<li>
<p>
<samp>staff</samp> membership is useful for helpdesk types or junior sysadmins,
giving them the ability to do things in <code>/usr/local</code> and to create
directories in <code>/home</code>.
</p>
</li>
</ul>

<p>
For a complete list, see the &quot;FAQ&quot; section in the <code><a
href="http://www.debian.org/doc/manuals/securing-debian-howto/">Securing Debian
Manual</a></code>, which can also be found as the <code>harden-doc</code>
package in Woody.  Also the new <code>base-passwd</code> (&gt;3.4.6) contains
an authoritative list:
<code>file:///usr/share/doc/base-passwd/users-and-groups.html</code>.
</p>

<hr>

<h3><a name="s-sudo"></a>9.2.4 Working more safely &ndash; <code>sudo</code></h3>

<p>
My usage of <code>sudo</code> is mostly a protection from my own stupidity.
Personally, I consider using <code>sudo</code> a better alternative to always
using the system as root.
</p>

<p>
Install <code>sudo</code> and activate it by setting options in <code><code><a
href="examples/">/etc/sudoers</a></code></code>.  Also check out the
<samp>sudo</samp> group feature in
<code>file:///usr/share/doc/sudo/OPTIONS</code>.
</p>

<p>
The sample configuration provides &quot;staff&quot; group members access to any
commands run as root under <code>sudo</code> and also gives &quot;src&quot;
members access to selected commands run as root under <code>sudo</code>.
</p>

<p>
The advantage of <code>sudo</code> is that it only requires an ordinary user's
password to log in, and activity is monitored.  This is a nice way to give some
authority to a junior administrator.  For example:
</p>

<pre>
     $ sudo chown -R <var>myself</var>:<var>mygrp</var> .
</pre>

<p>
Of course if you know the root password (as most home users do), any command
can be run under root from a user account:
</p>

<pre>
     $ su -c &quot;shutdown -h now&quot;
     Password:
</pre>

<p>
(I know I should tighten the admin account's <code>sudo</code> privileges.  But
since this is my home server, I have not bothered yet.)
</p>

<p>
For a different program that allows ordinary users to run commands with root
privileges, see the <code>super</code> package.
</p>

<hr>

<h3><a name="s-tcpd"></a>9.2.5 Restricting access to services</h3>

<p>
The Internet <em>super-server</em>, <code>inetd</code>, is started at boot time
by <code>/etc/rc2.d/S20inetd</code> (for RUNLEVEL=2), which is a symlink to
<code>/etc/init.d/inetd</code>.  Essentially, <code>inetd</code> allows one
running daemon to invoke several others, reducing load on the system.
</p>

<p>
Whenever a request for service arrives, its protocol and service are identified
by looking them up in the databases in <code>/etc/protocols</code> and
<code>/etc/services</code>.  <code>inetd</code> then looks up a normal Internet
service in the <code>/etc/inetd.conf</code> database, or a Sun-RPC based
service in <code>/etc/rpc.conf</code>.
</p>

<p>
For system security, make sure to disable unused services in
<code>/etc/inetd.conf</code>.  Sun-RPC services need to be active for NFS and
other RPC-based programs.
</p>

<p>
Sometimes, <code>inetd</code> does not start the intended server directly but
starts the <code>tcpd</code> TCP/IP daemon wrapper program with the intended
server name as its argument in <code>/etc/inetd.conf</code>.  In this case,
<code>tcpd</code> runs the appropriate server program after logging the request
and doing some additional checks using <code>/etc/hosts.deny</code> and
<code>/etc/hosts.allow</code>.
</p>

<p>
If you have problems with remote access in a recent Debian system, comment out
&quot;ALL: PARANOID&quot; in <code>/etc/hosts.deny</code> if it exists.
</p>

<p>
For details, see <code>inetd(8)</code>, <code>inetd.conf(5)</code>,
<code>protocols(5)</code>, <code>services(5)</code>, <code>tcpd(8)</code>,
<code>hosts_access(5)</code>, and <code>hosts_options(5)</code>.
</p>

<p>
For more information on Sun-RPC, see <code>rpcinfo(8)</code>,
<code>portmap(8)</code>, and
<code>file:///usr/share/doc/portmap/portmapper.txt.gz</code>.
</p>

<hr>

<h3><a name="s-ldap"></a>9.2.6 Centralizing authentication &ndash; LDAP</h3>

<p>
Use Lightweight Directory Access Protocol (LDAP).  References:
</p>
<ul>
<li>
<p>
<code><a href="http://www.openldap.org/">OpenLDAP</a></code>
</p>
</li>
<li>
<p>
OpenLDAP Admin Guide in the <code>openldap-guide</code> package
</p>
</li>
<li>
<p>
LDP: <code><a href="http://www.tldp.org/HOWTO/LDAP-HOWTO/index.html">LDAP Linux
HOWTO</a></code>
</p>
</li>
<li>
<p>
LDP: <code><a
href="http://www.tldp.org/HOWTO/LDAP-Implementation-HOWTO/index.html">LDAP
Implementation HOWTO</a></code>
</p>
</li>
<li>
<p>
<code><a
href="http://portal.aphroland.org/~aphro/ldap-docs/ldap.html">OpenLDAP,
extensive use reports</a></code>
</p>
</li>
<li>
<p>
<code><a
href="http://alinux.washcoll.edu/docs/plc/postfix-courier-howto.html">Open LDAP
with Courier IMAP and Postfix</a></code>
</p>
</li>
</ul>

<hr>

<h2><a name="s-cdrw"></a>9.3 CD writers</h2>

<p>
CD-writers with ATAPI/IDE interfaces have recently become a very popular
option.  It is a nice medium for system backup and archiving for the home user
needing &lt; 640MB capacity.  For the most authoritative information, see the
LDP <code><a
href="http://www.tldp.org/HOWTO/CD-Writing-HOWTO.html">CD-Writing-HOWTO</a></code>.
</p>

<hr>

<h3><a name="s9.3.1"></a>9.3.1 Introduction</h3>

<p>
First, any disruption of data sent to the CD-writer may cause irrecoverable
damage to the CD.  Though most newer devices support a Buffer Underrun
protection, which is used by default.  Get a CD-writer with as large a buffer
as possible.  If money is no object, do not bother with ATAPI/IDE, just get a
SCSI version.  If you have a choice of IDE interface to be connected, use the
one on the PCI-bus (i.e., on the motherboard) rather than one on the ISA-bus
(an SB16 card, etc.).
</p>

<p>
When a CD-writer is connected to IDE, it has to be driven by the IDE-SCSI
driver instead of an ordinary IDE CD driver for Linux 2.2 and 2.4 kernels.
Also, the SCSI generic driver needs to be activated.  There are two possible
approaches to doing this, assuming a kernel distributed with modern
distributions (as of March 2001).
</p>

<p>
For Linux 2.6 kernel, you should use ordinary IDE driver and access CD-RW
device directly with device name such as <code>/dev/hd<var>x</var></code>
instead.  You can use DMA this way.
</p>

<hr>

<h3><a name="s9.3.2"></a>9.3.2 Approach 1: modules + <code>lilo</code></h3>

<p>
Add the following line to <code>/etc/lilo.conf</code> if you are using a stock
Debian kernel.  If multiple options are used, list them separated by spaces:
</p>

<pre>
     append=&quot;hd<var>x</var>=ide-scsi ignore=hd<var>x</var>&quot;
</pre>

<p>
Here the location of the CD-writer, which is accessed through the ide-scsi
driver, is indicated by <samp>hd<var>x</var></samp>, where <var>x</var>
represents one of the following:
</p>

<pre>
     hda          for a master on the first IDE port
     hdb          for a slave on the first IDE port
     hdc          for a master on the second IDE port
     hdd          for a slave on the second IDE port
     hde ... hdh  for a drive on an external IDE port or ATA66/100 IDE port
</pre>

<p>
Type the following commands as root to activate after finishing all the
configuration:
</p>

<pre>
     # lilo
     # shutdown -h now
</pre>

<hr>

<h3><a name="s9.3.3"></a>9.3.3 Approach 2: recompile the kernel</h3>

<p>
Debian uses <code>make-kpkg</code> to create a kernel.  Use the new
<samp>--append_to_version</samp> with <code>make-kpkg</code> to build multiple
kernel images.  See <a href="ch-kernel.en.html">The Linux kernel under Debian,
Chapter 7</a>.
</p>

<p>
Use the following setup through <samp>make menuconfig</samp>:
</p>
<ul>
<li>
<p>
bzImage
</p>
</li>
</ul>
<ul>
<li>
<p>
Exclude the IDE CD driver (not a must, but simpler to do this)
</p>
</li>
</ul>
<ul>
<li>
<p>
Compile in ide-scsi and sg, or make them modules
</p>
</li>
</ul>

<hr>

<h3><a name="s9.3.4"></a>9.3.4 Post-configuration steps</h3>

<p>
Kernel support for the CD-writer can be activated during booting by the
following:
</p>

<pre>
     # echo ide-scsi &gt;&gt;/etc/modules
     # echo sg       &gt;&gt;/etc/modules
     # cd /dev; ln -sf scd0 cdrom
</pre>

<p>
Manual activation can be done by:
</p>

<pre>
     # modprobe ide-scsi
     # modprobe sg
</pre>

<p>
After reboot, you can check installation by:
</p>

<pre>
     $ dmesg|less
     # apt-get install wodim
     # wodim -scanbus
</pre>

<p>
<code>wodim</code> is a fork of the well known <code>cdrecord</code> program
shipped with Sarge and older distributions.  Replace <code>wodim</code> with
<code>cdrecord</code> if you use such a system.
</p>

<p>
[Per Warren Dodge] Sometimes there may be conflicts between
<samp>ide-scsi</samp> and <samp>ide-cd</samp> if there are both CD-ROM and
CD-R/RW on the system.  Try adding the following line to your
<code>/etc/modutils/aliases</code>, running <code>update-modules</code>, and
rebooting.
</p>

<pre>
     pre-install      ide-scsi      modprobe ide-cd
</pre>

<p>
This causes the IDE driver to load before <samp>ide-scsi</samp>.  The IDE
driver <samp>ide-cd</samp> takes control of the ATAPI CD-ROM&mdash;anything
that it hasn't been told to <strong>ignore</strong>.  That leaves just the
ignored devices for <samp>ide-scsi</samp> to control.
</p>

<hr>

<h3><a name="s9.3.5"></a>9.3.5 CD-image file (bootable)</h3>

<p>
To create a CD-image of files under <code>target-directory/</code> as
<code>cd-image.raw</code> (bootable, Joliet TRANS.TBL-enabled format; if not
bootable, take out <samp>-b</samp> and <samp>-c</samp> options), insert a boot
floppy in the first floppy drive and
</p>

<pre>
     # dd if=<var>/dev/fd0</var> <var>target-directory/boot.img</var> 
     # mkisofs -r -V <var>volume_id</var> -b <var>boot.img</var> -c <var>bootcatalog</var> -J -T \
             -o <var>cd-image.raw</var> <var>target_directory/</var>
</pre>

<p>
One funny hack is to make a bootable DOS CD-ROM.  If an ordinary DOS boot
floppy disk image is in the above <code><var>boot.img</var></code>, the CD-ROM
will boot as if a DOS floppy were in the first floppy drive (A:).  Doing this
with freeDOS may be more interesting.
</p>

<p>
This CD-image file can be inspected by mounting it on the loop device.
</p>

<pre>
     # mount -t iso9660 -o ro,loop <var>cd-image.raw</var> /cdrom
     # cd /cdrom
     # mc
     # umount /cdrom
</pre>

<hr>

<h3><a name="s9.3.6"></a>9.3.6 Write to the CD-writer (R, RW):</h3>

<p>
First test with (assuming double speed)
</p>

<pre>
     # nice --10 wodim -dummy speed=2 dev=0,0 <var>disk.img</var>
</pre>

<p>
Then if OK, write to CD-R with
</p>

<pre>
     # nice --10 wodim -v -eject speed=2 dev=0,0 <var>disk.img</var>
</pre>

<p>
Or write to a CD-RW disk with
</p>

<pre>
     # nice --10 wodim -v -eject blank=fast speed=2 dev=0,0 <var>disk.img</var>
</pre>

<p>
Some CD-RW drives work better with
</p>

<pre>
     # nice --10 wodim -v blank=all speed=2 dev=0,0 <var>disk.img</var>
</pre>

<p>
followed by
</p>

<pre>
     # nice --10 wodim -v -eject speed=2 dev=0,0 <var>disk.img</var>
</pre>

<p>
Two steps are needed to prevent SCSI timeouts during blanking from interfering
with the burning step.  The argument value to <code>nice</code> may require
some adjustments.
</p>

<hr>

<h3><a name="s9.3.7"></a>9.3.7 Make an image file of a CD</h3>

<p>
Some CD-Rs and commercial CDs have junk sectors at the end that make copying by
<code>dd</code> impossible (the Windows 98 CD is one of them).  The
<code>wodim</code> package comes with the <code>readom</code> command
(<code>cdrecord</code> contained <code>readcd</code> instead).  Use this to
copy any CD contents to an image file.  If it is a data disk, mount it and run
<code>df</code> to see its actual size.  Divide the number shown in blocks (1
block = 1024 bytes) by 2 to get the number of actual CD sectors (1 sector =
2048 bytes).  Run <code>readom</code> with options and use this disk image to
burn the CD-R/RW.
</p>

<pre>
     # readom dev=<var>target</var>,<var>lun</var>,<var>scsibusno</var> # select function 11
</pre>

<p>
Here, set all three parameters to 0 for most cases.  Usually the number of
sectors given by <code>readom</code> is excessive!  Use the above number from
an actual mount for better results.
</p>

<p>
It should be noted that the use of <code>dd</code> has a few problems if used
on CD-ROM.  The first run of the <code>dd</code> command may cause an error
message and may yield a shorter disk image with a lost tail-end.  The second
run of <code>dd</code> command may yield a larger disk image with garbage data
attached at the end on some systems if the data size is not specified.  Only
the second run of the <code>dd</code> command with the correct data size
specified, and without ejecting the CD after an error message, seems to avoid
these problems.  If for example the image size displayed by <code>df</code> is
<samp>46301184</samp> blocks, use the following command twice to get the right
image (this is my empirical information):
</p>

<pre>
     # dd if=/dev/cdrom of=cd.img bs=2048 count=$((46301184/2))
</pre>

<hr>

<h3><a name="s9.3.8"></a>9.3.8 Debian CD images</h3>

<p>
To obtain the latest information on Debian CDs, visit the <code><a
href="http://www.debian.org/CD/">Debian CD site</a></code>.
</p>

<p>
If you have a fast Internet connection, think about installing over the network
using:
</p>
<ul>
<li>
<p>
a few <code><a href="http://www.debian.org/distrib/floppyinst">floppy
images</a></code>.
</p>
</li>
<li>
<p>
a <code><a href="http://www.debian.org/CD/netinst/">minimal bootable CD
image</a></code>.
</p>
</li>
</ul>

<p>
If you do not have a fast Internet connection, think about purchasing CDs from
a <code><a href="http://www.debian.org/CD/vendors/">CD vendor</a></code>.
</p>

<p>
Please do not waste bandwidth by downloading standard CD images unless you are
a CD image tester (even with the new jigdo method).
</p>

<p>
One noteworthy CD image is <code><a
href="http://www.knopper.net/knoppix/index-en.html">KNOPPIX - Live Linux
Filesystem On CD</a></code>.  This CD will boot a functioning Debian system
without installing itself to the hard disk.
</p>

<hr>

<h3><a name="s9.3.9"></a>9.3.9 Back up the system to CD-R</h3>

<p>
To copy key configuration files and data files to CD-R, use the example backup
script <code><code><a href="examples/">backup</a></code></code>.  Also see <a
href="ch-tips.en.html#s-archiving">Copy and archive a whole subdirectory,
Section 8.3</a> and <a href="ch-tips.en.html#s-diff-backup">Differential backup
and data synchronization, Section 8.4</a>.
</p>

<hr>

<h3><a name="s9.3.10"></a>9.3.10 Copy a music CD to CD-R</h3>

<p>
Not tested by me:
</p>

<pre>
     # apt-get install wodim cdparanoia
     # cdparanoia -s -B
     # wodim dev=0,0,0 speed=2 -v -dao -eject defpregap=1 -audio *.wav
</pre>

<p>
or,
</p>

<pre>
     # apt-get install cdrdao #disk at once
     # cdrdao read-cd --device /dev/cdrom --paranoia-mode 3 my_cd # read cd
     # cdrdao write --device /dev/cdrom --speed 8 my_cd    # write a new CD
</pre>

<p>
<code>cdrdao</code> does a real copy (no gaps, etc...).
</p>

<hr>

<h3><a name="s-dvd"></a>9.3.11 Writing DVD-R, DVD-RW, and DVD+RW</h3>

<p>
For DVD writing, you have 2 approaches:
</p>
<ul>
<li>
<p>
Use <code>growisofs</code>.
</p>
</li>
<li>
<p>
Use <code>wodim</code>.
</p>
</li>
</ul>

<hr>

<h2><a name="s-x"></a>9.4 X</h2>

<p>
The X Window System is provided by <code><a
href="http://www.xfree86.org/">XFree86</a></code>.  There are two major
versions of X server available on the Debian system: XFree86 Version 3.3 (XF3)
and XFree86 Version 4.x series (XF4) both based on X11R6 specifications by
<code><a href="http://www.x.org/">X.Org</a></code>.
</p>

<p>
For the basics of X, refer to <code>X(7)</code>, the LDP <code><a
href="http://www.tldp.org/HOWTO/XWindow-User-HOWTO.html">XWindow-User-HOWTO</a></code>,
and the <code><a
href="http://www.tldp.org/HOWTO/mini/Remote-X-Apps.html">Remote X Apps
mini-HOWTO</a></code>.  For a Debian-specific user guide, read
<code>file:///usr/share/doc/xfree86-common/FAQ.gz</code> provided in the
<code>xfree86-common</code> package.  This contains an interesting and
authoritative review of the key binding issues by Branden Robinson.
</p>
<dl>
<dt><a href="#s-xsrvr">The X server, Section 9.4.3</a></dt>
<dd>
<p>
a program on a local host that displays an X window and/or desktop on a user's
monitor (CRT, LCD) and accepts keyboard and mouse input.
</p>
</dd>
</dl>
<dl>
<dt><a href="#s-xclnt">X clients, Section 9.4.4</a></dt>
<dd>
<p>
a program on a (local or remote) host that runs X-compatible application
software.
</p>
</dd>
</dl>

<p>
This reverses the ordinary use of &quot;server&quot; and &quot;client&quot; in
other contexts.
</p>

<p>
There are several ways of getting the &quot;X server&quot; (display side) to
accept remote connections from an &quot;X client&quot; (application side):
</p>
<ul>
<li>
<p>
<code>xhost</code> method
</p>
<ul>
<li>
<p>
the host list mechanism (very insecure).
</p>
</li>
<li>
<p>
non-encrypted protocol (prone to eavesdropping attack).
</p>
</li>
<li>
<p>
Do not use this, if possible.
</p>
</li>
<li>
<p>
See <a href="#s-xhost">Connecting to a remote X server &ndash;
<code>xhost</code>, Section 9.4.7</a> and <code>xhost(1x)</code>.
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
<strong><code>xauth</code></strong> method
</p>
<ul>
<li>
<p>
the MIT magic cookie mechanism (insecure but better than <code>xhost</code>).
</p>
</li>
<li>
<p>
non-encrypted protocol (prone to eavesdropping attack).
</p>
</li>
<li>
<p>
use this only for local connection since it is less CPU-intensive than
<code>ssh -X</code>.
</p>
</li>
<li>
<p>
See <a href="#s-ss-xsu">Getting root in X, Section 9.4.12</a> and
<code>xauth(1x)</code>.
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
<code>xdm</code>, <code>wdm</code>, <code>gdm</code>, <code>kdm</code>, ...
methods
</p>
<ul>
<li>
<p>
the MIT magic cookie mechanism (insecure as <code>xauth</code>).
</p>
</li>
<li>
<p>
See <code>xdm(1x)</code> and <code>Xsecurity(7)</code> for the basics of X
display access control.
</p>
</li>
<li>
<p>
See <code>wdm(1x)</code>, <code>gdm(8)</code>, and <code>kdm.options(5)</code>
for more information, if these are installed.
</p>
</li>
<li>
<p>
See <a href="ch-system.en.html#s-custombootscripts">Customizing runlevels,
Section 2.4.3</a> for how to disable <code>xdm</code> to gain a Linux console
upon boot without purging the <code>xdm</code> package.
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
<strong><code>ssh -X</code></strong> method
</p>
<ul>
<li>
<p>
port forwarding mechanism through secure shell (<strong>secure</strong>).
</p>
</li>
<li>
<p>
encrypted protocol (a waste of resources if used locally).
</p>
</li>
<li>
<p>
use this for remote connections.
</p>
</li>
<li>
<p>
See <a href="#s-xssh">Connecting to a remote X server &ndash; <code>ssh</code>,
Section 9.4.8</a>.
</p>
</li>
</ul>
</li>
</ul>

<p>
All remote connection methods, except <code>ssh</code>, require TCP/IP
connection enabled on the X server.  See <a href="#s-xtcp">Using X over TCP/IP,
Section 9.4.6</a>.
</p>

<hr>

<h3><a name="s-x-system"></a>9.4.1 X packages</h3>

<p>
There are a few (meta)packages provided to ease installation of the X system in
Woody.
</p>
<dl>
<dt><code>x-window-system-core</code></dt>
<dd>
<p>
This metapackage provides the essential components for a stand-alone
workstation running the X Window System.  It provides the X libraries, an X
server (<code>xserver-xfree86</code>), a set of fonts, and a group of basic X
clients and utilities.
</p>
</dd>
</dl>
<dl>
<dt><code>x-window-system</code></dt>
<dd>
<p>
This metapackage provides substantially all the components of the X Window
System as developed by the XFree86 Project, as well as a set of historically
popular accessory programs.  (Notably, it depends on
<code>x-window-system-core</code>, <code>twm</code>, and <code>xdm</code>,
i.e., no need to install <code>x-window-system-core</code> if you install
this.)
</p>
</dd>
</dl>
<dl>
<dt><code>xserver-common-v3</code></dt>
<dd>
<p>
Files and utilities common to XFree86 3.x X servers (XF3)
</p>
</dd>
</dl>
<dl>
<dt><code>xserver-*</code></dt>
<dd>
<p>
Supplemental XF3 server packages to support hardware not supported by the new
XF4 server (<code>xserver-xfree86</code>) for whatever reason.  Some old ATI
mach64 cards are not supported in XF4, other cards hang badly in the Woody
version of XF4, etc.  (For available packages, use <samp>apt-cache search
xserver-|less</samp>.  All of these XF3 servers depend on
<code>xserver-common-v3</code>.)
</p>
</dd>
</dl>

<p>
For most cases, <code>x-window-system</code> is the package to install.  (If
you want console login, be sure to disable <code>xdm</code> as described in <a
href="ch-tips.en.html#s-no-x-start">&quot;Let me disable X on boot!&quot;,
Section 8.1.4</a>.)
</p>

<hr>

<h3><a name="s-hdetect-x"></a>9.4.2 Hardware detection for X</h3>

<p>
To enable hardware detection during the X configuration stage, install the
following packages prior to installing the X system:
</p>
<ul>
<li>
<p>
<code>discover</code> &ndash; hardware identification system.
</p>
</li>
</ul>
<ul>
<li>
<p>
<code>mdetect</code> &ndash; mouse device autodetection tool.
</p>
</li>
</ul>
<ul>
<li>
<p>
<code>read-edid</code> &ndash; hardware information-gathering tool for VESA PnP
monitors.
</p>
</li>
</ul>

<hr>

<h3><a name="s-xsrvr"></a>9.4.3 The X server</h3>

<p>
See <code>XFree86(1x)</code> for X server information.
</p>

<p>
Invoke X server from a local console:
</p>

<pre>
     $ startx -- :&lt;display&gt; <var>vtXX</var>
     e.g.:
     $ startx -- :1 vt8 -bpp 16
     ... start on vt8 connected to localhost:1 with 16 bpp mode
</pre>

<p>
Arguments given after <samp>--</samp> are for the X server.
</p>

<p>
Note, when using a <code>~/.xserverrc</code> script to customize the X server
startup process, be sure to <samp>exec</samp> the real X server.  Failing to do
this can make the X server slow to start and exit.  For example:
</p>

<pre>
     #!/bin/sh
     exec /usr/bin/X11/X -dpi 100 -nolisten tcp
</pre>

<hr>

<h4><a name="s-config-x4"></a>9.4.3.1 Configuring the X server (version 4)</h4>

<p>
To (re-)configure an XF4 server,
</p>

<pre>
     # dpkg-reconfigure --priority=low xserver-common
     # dpkg-reconfigure --priority=low xserver-xfree86
</pre>

<p>
will generate <code>/etc/X11/XF86Config-4</code> file and configure X using the
script <code>dexconf</code>.
</p>

<hr>

<h4><a name="s-config-x3"></a>9.4.3.2 Configuring the X server (version 3)</h4>

<p>
To (re-)configure an XF3 server, for example, for ATI mach64,
</p>

<pre>
     # dpkg-reconfigure --priority=low xserver-common-v3
     # dpkg-reconfigure --priority=low xserver-mach64
</pre>

<p>
will generate <code>/etc/X11/XF86Config</code> file and configure X using the
script <code>xf86config-v3</code>.
</p>

<hr>

<h4><a name="s-manual-config-x"></a>9.4.3.3 Configuring the X server manually</h4>

<p>
For Woody, to add user customizations to <code>/etc/X11/XF86Config-4</code>
file, <strong>do not edit the configuration file between the text</strong>:
</p>

<pre>
     ### BEGIN DEBCONF SECTION
     [snip]
     ### END DEBCONF SECTION
</pre>

<p>
Instead, <strong>add the customizations before the text</strong>.  For example,
to use a custom video device, add something resembling the following text to
the <em>top</em> of the file:
</p>

<pre>
     Section &quot;Device&quot;
       Identifier        &quot;Custom Device&quot;
       Driver            &quot;ati&quot;
       Option            &quot;NoAccel&quot;
     EndSection
     
     Section &quot;Screen&quot;
       Identifier  &quot;Custom Screen&quot;
       Device      &quot;Custom Device&quot;
       Monitor     &quot;Generic Monitor&quot;
       DefaultDepth 24
       Subsection &quot;Display&quot;
         Depth       8
         Modes       &quot;1280x960&quot; &quot;1152x864&quot; &quot;1024x768&quot; &quot;800x600&quot; &quot;640x480&quot;
       EndSubsection
       Subsection &quot;Display&quot;
         Depth       16
         Modes       &quot;1280x960&quot; &quot;1152x864&quot; &quot;1024x768&quot; &quot;800x600&quot; &quot;640x480&quot;
       EndSubsection
       Subsection &quot;Display&quot;
         Depth       24
         Modes       &quot;1280x960&quot; &quot;1152x864&quot; &quot;1024x768&quot; &quot;800x600&quot; &quot;640x480&quot;
       EndSubsection
     EndSection
     
     Section &quot;ServerLayout&quot;
         Identifier        &quot;Custom&quot;
         Screen            &quot;Custom Screen&quot;
         InputDevice       &quot;Generic Keyboard&quot; &quot;CoreKeyboard&quot;
         InputDevice       &quot;Configured Mouse&quot; &quot;CorePointer&quot;
     EndSection
</pre>

<p>
For Sarge (<samp>testing</samp> at the time of writing), if you wish to retain
user customizations to <code>/etc/X11/XF86Config</code> file through upgrade,
run the following commands as root:
</p>

<pre>
     # cp /etc/X11/XF86Config-4 /etc/X11/XF86Config-4.custom
     # md5sum /etc/X11/XF86Config-4 &gt; /var/lib/xfree86/XF86Config-4.md5sum
     # dpkg-reconfigure xserver-xfree86
</pre>

<p>
In order to achieve <strong>font de-uglification</strong>, you need to edit
<code>/etc/X11/XF86Config-4</code> as described in <a href="#s-xfs-tt">TrueType
fonts in X, Section 9.4.13</a>.
</p>

<p>
Please also check the other parts of your X configuration.  Bad monitor
settings can be even more of a headache than bad fonts, so make sure your
refresh rate is as high as your monitor can handle (85 Hz is great, 75 Hz is
OK, 60 Hz is painful).
</p>

<hr>

<h3><a name="s-xclnt"></a>9.4.4 X clients</h3>

<p>
Most X client programs can be started with a command like this:
</p>

<pre>
     client $ xterm -geometry 80x24+30+200 -fn 6x10 -display <var>hostname</var>:0 &amp;
</pre>

<p>
Here, the optional command-line arguments mean:
</p>
<ul>
<li>
<p>
<samp>-geometry
<var>WIDTH</var>x<var>HEIGHT</var>+<var>XOFF</var>+<var>YOFF</var></samp>: the
initial size and location of the window.
</p>
</li>
</ul>
<ul>
<li>
<p>
<samp>-fn <var>FONTNAME</var></samp>: the font to use for displaying text.
<samp><var>FONTNAME</var></samp> can be:
</p>
<ul>
<li>
<p>
a14: Normal size font
</p>
</li>
<li>
<p>
a24: Large size font
</p>
</li>
<li>
<p>
...  (check available fonts with <samp>xlsfont</samp>.)
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
<samp>-display <var>displayname</var></samp>: the name of the X server to use.
<samp><var>displayname</var></samp> can be:
</p>
<ul>
<li>
<p>
<samp><var>hostname</var>:<var>D.S</var></samp> means screen
<samp><var>S</var></samp> on display <samp><var>D</var></samp> of host
<samp><var>hostname</var></samp>; the X server for this display is listening to
TCP port 6000+D.
</p>
</li>
<li>
<p>
<samp><var>host</var>/unix:<var>D.S</var></samp> means screen
<samp><var>S</var></samp> on display <var>D</var> of host
<samp><var>host</var></samp>; the X server for this display is listening to
UNIX domain socket <code>/tmp/.X11-unix/XD</code> (so it's only reachable from
<samp><var>host</var></samp>).
</p>
</li>
<li>
<p>
<samp><var>:D.S</var></samp> is equivalent to
<samp><var>host</var>/unix:<var>D.S</var></samp>, where
<samp><var>host</var></samp> is the local hostname.
</p>
</li>
</ul>
</li>
</ul>

<p>
The default <samp><var>displayname</var></samp> for the X client program
(application side) can be set by the DISPLAY environment variable.  For
example, prior to running an X client program, executing one of the following
commands achieves this:
</p>

<pre>
     $ export DISPLAY=:0 
             # The default, local machine using the first X screen
     $ export DISPLAY=<var>hostname.fulldomain.name</var>:0.2
     $ export DISPLAY=localhost:0
</pre>

<p>
Its startup can be customized by <code>~/.xinitrc</code>.  For example:
</p>

<pre>
     xrdb -load $HOME/.Xresources
     xsetroot -solid gray &amp;
     xclock -g 50x50-0+0 -bw 0 &amp;
     xload -g 50x50-50+0 -bw 0 &amp;
     xterm -g 80x24+0+0 &amp;
     xterm -g 80x24+0-0 &amp;
     twm
</pre>

<p>
As described in <a href="#s-custom-x">Custom X sessions, Section 9.4.5.1</a>,
this overrides everything normal execution of <code>Xsession</code> does when
started from <code>startx</code>.  Use <code>~/.xsession</code> instead and use
this approach only as the last resort.  See <code>xsetroot(1x)</code>,
<code>xset(1x)</code>, and <a href="#s-xresources">X resources, Section
9.4.10</a>.
</p>

<hr>

<h3><a name="s-x-session"></a>9.4.5 X sessions</h3>

<p>
An X session (X server + X client) can be started by:
</p>
<ul>
<li>
<p>
<code>startx</code>: wrapper script command for <code>xinit</code> to start an
X server and client from a Linux character console.  If <code>~/.xinitrc</code>
does not exist, <code>/etc/X11/Xsession</code> is executed through
<code>/etc/X11/xinit/xinitrc</code>.
</p>
</li>
<li>
<p>
<code>xdm</code>, <code>gdm</code>, <code>kdm</code>, or <code>wdm</code>: X
display manager daemons to start the X server and client, and to control login
via a GUI screen.  <code>/etc/X11/Xsession</code> is directly executed.
</p>
</li>
</ul>

<p>
The console can be made available as in <a
href="ch-tips.en.html#s-no-x-start">&quot;Let me disable X on boot!&quot;,
Section 8.1.4</a>.
</p>

<hr>

<h4><a name="s-custom-x"></a>9.4.5.1 Custom X sessions</h4>

<p>
The default startup script <code>/etc/X11/Xsession</code> is effectively a
combination of
<code>/etc/X11/Xsession.d/50xfree86-common_determine-startup</code> and
<code>/etc/X11/Xsession.d/99xfree86-common_start</code>.
</p>

<p>
Execution of <code>/etc/X11/Xsession</code> is somewhat affected by
<code>/etc/X11/Xsession.options</code> and is essentially an execution of a
program which was first found in the following order with the <code>exec</code>
command:
</p>
<!-- ol type="1" start="1"  -->
<li>
<p>
<code>~/.xsession</code> or <code>~/.Xsession</code>, if it is defined.
</p>
</li>
<li>
<p>
<code>/usr/bin/x-session-manager</code>, if it is defined.
</p>
</li>
<li>
<p>
<code>/usr/bin/x-window-manager</code>, if it is defined.
</p>
</li>
<li>
<p>
<code>/usr/bin/x-terminal-emulator</code>, if it is defined.
</p>
</li>
</ol>

<p>
The exact meaning of these commands is determined by the Debian alternative
system described in <a href="ch-package.en.html#s-alternatives">Alternative
commands, Section 6.5.3</a>.  For example:
</p>

<pre>
     # update-alternatives --config x-session-manager
     ... or
     # update-alternatives --config x-window-manager
</pre>

<p>
In order to make any X window manager a default while keeping GNOME and KDE
session managers installed, replace
<code>/etc/X11/Xsession.d/50xfree86-common_determine-startup</code> with the
one attached in the second bug report at <code><a
href="http://bugs.debian.org/168347">http://bugs.debian.org/168347</a></code>
(I hope this will be included soon) and edit
<code>/etc/X11/Xsession.options</code> as follows to disallow the X session
manager:
</p>

<pre>
     # /etc/X11/Xsession.options
     #
     # configuration options for /etc/X11/Xsession
     # See Xsession.options(5) for an explanation of the available options.
     # Default enabled
     allow-failsafe
     allow-user-resources
     allow-user-xsession
     use-ssh-agent
     # Default disabled (enable them by uncommenting)
     do-not-use-x-session-manager
     #do-not-use-x-window-manager
</pre>

<p>
Without the above mentioned modification to the system,
<code>gnome-session</code> and <code>kdebase</code> are the packages containing
these X session managers.  Removing them allows X window manager to be a
default.  (Yack, any better idea?)
</p>

<p>
On a system where <code>/etc/X11/Xsession.options</code> contains a line
<samp>allow-user-xsession</samp> without preceding characters, any user who
defines <code>~/.xsession</code> or <code>~/.Xsession</code> will be able to
customize the action of <code>/etc/X11/Xsession</code>.
</p>

<p>
The last command in the <code>~/.xsession</code> file should use form of
<samp>exec <var>some-window/session-manager</var></samp> to start your favorite
X window/session manager.
</p>

<p>
A good example of an <code>~/.xsession</code> script is given at
<code>file:///usr/share/doc/xfree86-common/examples/xsession.gz</code>.
</p>

<p>
I use this to set the window manager, screen access, and language support for
each user account.  See <a href="#s-s-w-manager">Starting an X session for a
user, Section 9.4.5.2</a>, <a href="#s-ss-xsu">Getting root in X, Section
9.4.12</a>, and <a href="#s-x-cjk">Example for a multilingual X window system,
Section 9.7.9</a>.
</p>

<p>
If you wish to have several X client programs started automatically, see <a
href="#s-xclnt">X clients, Section 9.4.4</a> examples and invoke them from
<code>~/.xsession</code> instead of <code>~/.xinitrc</code>.
</p>

<p>
User-specific additional X resources can be stored in
<code>~/.Xresources</code>.  See <a href="#s-xresources">X resources, Section
9.4.10</a>.
</p>

<p>
User-customized keymaps and pointer button mappings in X can also be specified
in the user's start up script.  See <a href="#s-xmodmap">Keymaps and pointer
button mappings in X, Section 9.4.11</a>.
</p>

<hr>

<h4><a name="s-s-w-manager"></a>9.4.5.2 Starting an X session for a user</h4>

<p>
Following the principle described at <a href="#s-custom-x">Custom X sessions,
Section 9.4.5.1</a>, a user-specific X session/window manager can be activated
by installing the package indicated and setting the contents at the end of
<code>~/.xsession</code> file as follows.  (I like
<code>blackbox</code>/<code>fluxbox</code> for its simple style and fast
speed.):
</p>
<ul>
<li>
<p>
default X session manager
</p>
<ul>
<li>
<p>
See <a href="ch-package.en.html#s-alternatives">Alternative commands, Section
6.5.3</a>
</p>
</li>
<li>
<p>
<samp>exec /usr/bin/x-session-manager</samp>
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
default X window manager
</p>
<ul>
<li>
<p>
See <a href="ch-package.en.html#s-alternatives">Alternative commands, Section
6.5.3</a>
</p>
</li>
<li>
<p>
<samp>exec /usr/bin/x-window-manager</samp>
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
GNOME session manager (loaded)
</p>
<ul>
<li>
<p>
Install package: <code>gnome-session</code>
</p>
</li>
<li>
<p>
<samp>exec /usr/bin/gnome-session</samp>
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
KDE session manager (loaded)
</p>
<ul>
<li>
<p>
Install package: <code>kdebase</code> (or <code>kdebase3</code> for KDE3)
</p>
</li>
<li>
<p>
<samp>exec /usr/bin/kde2</samp>
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
Blackbox window manager (lightweight, slick)
</p>
<ul>
<li>
<p>
Install package: <code>blackbox</code>
</p>
</li>
<li>
<p>
<samp>exec /usr/bin/blackbox</samp>
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
Fluxbox window manager (lightweight, new blackbox)
</p>
<ul>
<li>
<p>
Install package: <code>fluxbox</code>
</p>
</li>
<li>
<p>
<samp>exec /usr/bin/fluxbox</samp>
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
Xfce window manager (Mac OS-X, SUN CDE&ndash;like)
</p>
<ul>
<li>
<p>
Install package: <code>xfce</code>
</p>
</li>
<li>
<p>
<samp>exec /usr/bin/xfwm</samp>
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
IceWM window manager (lightweight, GNOME alternative)
</p>
<ul>
<li>
<p>
Install package: <code>icewm</code>
</p>
</li>
<li>
<p>
<samp>exec /usr/bin/X11/icewm</samp>
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
FVWM2 virtual window manager (lightweight, Win95-like)
</p>
<ul>
<li>
<p>
Install package: <code>fvwm</code>
</p>
</li>
<li>
<p>
<samp>exec /usr/bin/fvwm2</samp>
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
Windowmaker window manager (somewhat NexT-like)
</p>
<ul>
<li>
<p>
Install package: <code>wmaker</code>
</p>
</li>
<li>
<p>
<samp>exec /usr/bin/wmaker</samp>
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
Enlightenment window manager (loaded)
</p>
<ul>
<li>
<p>
Install package: <code>enlightenment</code>
</p>
</li>
<li>
<p>
<samp>exec /usr/bin/enlightenment</samp>
</p>
</li>
</ul>
</li>
</ul>

<p>
See <code><a href="http://www.xwinman.org">Window Managers for X</a></code>.
</p>

<hr>

<h4><a name="s-kde-gnome"></a>9.4.5.3 Setting up KDE and GNOME</h4>

<p>
In order to setup full KDE or GNOME environment, the following metapackages are
useful:
</p>
<ul>
<li>
<p>
KDE: install the <code>kde</code> package
</p>
</li>
<li>
<p>
GNOME: install the <code>gnome</code> package
</p>
</li>
</ul>

<p>
Installing these packages with tools which handle <samp>Recommends</samp>, such
as <code>dselect</code> and <code>aptitude</code>, provides you with richer
choices of software than just installing these with <code>apt-get</code>.
</p>

<p>
If you want console login, be sure to disable X display managers, such as
<code>kdm</code>, <code>gdm</code>, and <code>wdm</code>, which may be pulled
in by the dependencies, as described in <a
href="ch-tips.en.html#s-no-x-start">&quot;Let me disable X on boot!&quot;,
Section 8.1.4</a>.
</p>

<p>
If you want to have GNOME as the system default over KDE, make sure to
configure <code>x-session-manager</code> as in <a
href="ch-package.en.html#s-alternatives">Alternative commands, Section
6.5.3</a>.
</p>

<hr>

<h3><a name="s-xtcp"></a>9.4.6 Using X over TCP/IP</h3>

<p>
Because a remote TCP/IP socket connection without encryption is prone to an
eavesdropping attack, the default setting for X in recent Debian versions
disables the TCP/IP socket.  Consider using <code>ssh</code> for a remote X
connection (see <a href="#s-xssh">Connecting to a remote X server &ndash;
<code>ssh</code>, Section 9.4.8</a>).
</p>

<p>
The method described here is not encouraged unless one is in a very secure
environment behind a good firewall system with only trusted users present.  Use
the following command to verify your current X server setting for the TCP/IP
socket:
</p>

<pre>
     # find /etc/X11 -type f -print0 | xargs -0 grep nolisten
     /etc/X11/xinit/xserverrc:exec /usr/bin/X11/X -dpi 100 -nolisten tcp
</pre>

<p>
Remove <samp>-nolisten</samp> to restore TCP/IP listening on the X server.
</p>

<hr>

<h3><a name="s-xhost"></a>9.4.7 Connecting to a remote X server &ndash; <code>xhost</code></h3>

<p>
<code>xhost</code> allows access based on hostnames.  This is very insecure.
The following will disable host checking and allow connections from anywhere if
a TCP/IP socket connection is allowed (see <a href="#s-xtcp">Using X over
TCP/IP, Section 9.4.6</a>):
</p>

<pre>
     $ xhost +
</pre>

<p>
You can re-enable host checking with:
</p>

<pre>
     $ xhost -
</pre>

<p>
<code>xhost</code> does not distinguish between different users on the remote
host.  Also, hostnames (addresses actually) can be spoofed.
</p>

<p>
This method must be avoided even with more restrictive host criteria if you're
on an untrusted network (for instance with dial-up PPP access to the Internet).
See <code>xhost(1x)</code>.
</p>

<hr>

<h3><a name="s-xssh"></a>9.4.8 Connecting to a remote X server &ndash; <code>ssh</code></h3>

<p>
The use of <code>ssh</code> enables a secure connection from a local X server
to a remote application server.
</p>
<ul>
<li>
<p>
Set <samp>X11Forwarding</samp> and <samp>AllowTcpForwarding</samp> entries to
<samp>yes</samp> in <code>/etc/ssh/sshd_config</code> of the remote host, if
you want to avoid corresponding command-line options.
</p>
</li>
</ul>
<ul>
<li>
<p>
Start the X server on the local host.
</p>
</li>
</ul>
<ul>
<li>
<p>
Open an <code>xterm</code> in the local host.
</p>
</li>
</ul>
<ul>
<li>
<p>
Run <code>ssh</code> to establish a connection with the remote site.
</p>

<pre>
     localname @ localhost $ ssh -q -X -l loginname remotehost.domain
     Password:
     .....
</pre>
</li>
</ul>
<ul>
<li>
<p>
Run X application commands on the remote site.
</p>

<pre>
     loginname @ remotehost $ gimp &amp;
</pre>
</li>
</ul>

<p>
This method allows the display of the remote X client output as if it were
locally connected through a local UNIX domain socket.
</p>

<hr>

<h3><a name="s-xtermfaq"></a>9.4.9 The X terminal emulator &ndash; <code>xterm</code></h3>

<p>
Learn everything about <code>xterm</code> at <code><a
href="http://dickey.his.com/xterm/xterm.faq.html">http://dickey.his.com/xterm/xterm.faq.html</a></code>.
</p>

<hr>

<h3><a name="s-xresources"></a>9.4.10 X resources</h3>

<p>
Many older X programs, such as <code>xterm</code>, use the X resource database
to configure their appearance.  The file <code>~/.Xresources</code> is used to
store user resource specifications.  This file is automatically merged into the
default X resources upon login.  The system-wide defaults of X resources are
stored in <code>/etc/X11/Xresources/*</code> and application defaults of them
are stored in <code>/etc/X11/app-defaults/*</code>.  Use these settings as the
starting points.
</p>

<p>
Here are some helpful settings to add to your <code>~/.Xresources</code> file:
</p>

<pre>
     ! Set the font to a more readable 9x15
     XTerm*font: 9x15
     
     ! Display a scrollbar
     XTerm*scrollBar: true
     
     ! Set the size of the buffer to 1000 lines
     XTerm*saveLines: 1000
     
     ! Large kterm screen
     KTerm*VT100*fontList: -*-fixed-medium-r-normal--24-*,\
      -*-gothic-medium-r-normal--24-*,\
      -*-mincho-medium-r-normal--24-*
</pre>

<p>
To make these settings take effect immediately, merge them into the database
using the command:
</p>

<pre>
     xrdb -merge ~/.Xresources
</pre>

<p>
See <code>xrdb(1x)</code>.
</p>

<hr>

<h3><a name="s-xmodmap"></a>9.4.11 Keymaps and pointer button mappings in X</h3>

<p>
The <code>xmodmap</code> program is used to edit and display the keyboard
modifier map and keymap table that are used by client applications to convert
event keycodes into keysyms in X.
</p>

<pre>
     $ xmodmap -pm 
      ... display the current modifier map
     $ xmodmap -pk | pager
      ... display the current keymap table
     $ xmodmap -e &quot;pointer = 3 2 1&quot; # set mouse for the left hand.
     $ xmodmap ~/.xmodmaprc # set keyboard as in ~/.xmodmaprc
</pre>

<p>
It is usually run from the user's session startup script,
<code>~/.xsession</code>.
</p>

<p>
To get the <samp>keycode</samp>, run <code>xev</code> in X and press keys.  To
get the meaning of <samp>keysym</samp>, look into the MACRO definition in
<code>/usr/include/X11/keysymdef.h</code> file.  All the <samp>#define</samp>
statements in this file are named as <samp>XK_</samp> prepended to the
<samp>keysym</samp> names.
</p>

<p>
See <code>xmodmap(1x)</code>.
</p>

<hr>

<h3><a name="s-ss-xsu"></a>9.4.12 Getting root in X</h3>

<p>
If a GUI program needs to be run with root privilege, use the following
procedures to display program output on a user's X server.  <strong>Never
attempt to start an X server directly from the root account</strong> in order
to avoid possible security risks.
</p>

<p>
Start the X server as a normal user and open an <code>xterm</code> console.
Then:
</p>

<pre>
     $ XAUTHORITY=$HOME/.Xauthority
     $ export XAUTHORITY
     $ su root
     Password:*****
     # printtool &amp;
</pre>

<p>
When using this trick to <code>su</code> to a non-root user, make sure
<code>~/.Xauthority</code> is group readable by this non-root user.
</p>

<p>
To automate this command sequence, create a file <code>~/.xsession</code> from
the user's account, containing the following lines:
</p>

<pre>
     # This makes X work when I su to the root account.
     if [ -z &quot;$XAUTHORITY&quot; ]; then
             XAUTHORITY=$HOME/.Xauthority
             export XAUTHORITY
     fi
     unset XSTARTUP
     # If a particular window/session manager is desired, uncomment
     # the following and edit it to fit your needs.
     #XSTARTUP=/usr/bin/blackbox
     # This starts x-window/session-manager program
     if [ -z &quot;$XSTARTUP&quot; ]; then
       if [ -x /usr/bin/x-session-manager ]; then
         XSTARTUP=x-session-manager
       elif [ -x /usr/bin/x-window-manager ]; then
         XSTARTUP=x-window-manager
       elif [ -x /usr/bin/x-terminal-emulator ]; then
         XSTARTUP=x-terminal-emulator
       fi
     fi
     # execute auto selected X window/session manager
     exec $XSTARTUP
</pre>

<p>
Then run <code>su</code> (not <samp>su -</samp>) in an <code>xterm</code>
window of the user.  Now GUI programs started from this <code>xterm</code> can
display output on this user's X window while running with root privilege.  This
trick works as long as the default <code>/etc/X11/Xsession</code> is executed.
If a user set up his customization using <code>~/.xinitrc</code> or
<code>~/.xsession</code>, the above mentioned environment variable
<samp>XAUTHORITY</samp> needs to be set similarly in those scripts.
</p>

<p>
Alternatively, <code>sudo</code> can be used to automate the command sequence:
</p>

<pre>
     $ sudo xterm
     ... or
     $ sudo -H -s
</pre>

<p>
Here <code>/root/.bashrc</code> should contain:
</p>

<pre>
     if [ $SUDO_USER ]; then
         sudo -H -u $SUDO_USER xauth extract - $DISPLAY | xauth merge -
     fi
</pre>

<p>
This works fine even with the home directory of the user on an NFS mount,
because root does not read the <code>.Xauthority</code> file.
</p>

<p>
There are also several specialized packages for this purpose:
<code>kdesu</code>, <code>gksu</code>, <code>gksudo</code>,
<code>gnome-sudo</code>, and <code>xsu</code>.  Some other methods can be used
to achieve similar results: creating a symlink from
<code>/root/.Xauthority</code> to the user's corresponding one; use of the
script <code><a
href="http://fgouget.free.fr/sux/sux-readme.shtml">sux</a></code>; or putting
&quot;<samp>xauth merge ~<var>USER_RUNNING_X</var>/.Xauthority</samp>&quot; in
the root initialization script.
</p>

<p>
See more on the <code><a
href="http://lists.debian.org/debian-devel/2002/debian-devel-200207/msg00259.html">debian-devel
mailing list</a></code>.
</p>

<hr>

<h3><a name="s-xfs-tt"></a>9.4.13 TrueType fonts in X</h3>

<p>
The standard <code>xfs</code> in XFree86-4 works fine with TrueType fonts.  You
have to install a third-party font server such as <code>xfs-xtt</code>, if you
are using XFree86-3.
</p>

<p>
You just need to make sure that whatever applications you want to use the
TrueType fonts are linked against libXft or libfreetype (you probably don't
even have to worry about this if you're using pre-compiled .debs).
</p>

<p>
First set up font support infrastructure:
</p>
<ul>
<li>
<p>
Install <code>x-ttcidfont-conf</code> and <code>defoma</code> packages.  This
automates generation of the <code>fonts.scale</code> and <code>fonts.dir</code>
files.
</p>
<pre>
     # apt-get install x-ttcidfont-conf
</pre>
</li>
<li>
<p>
Edit <code>/etc/X11/XF86Config-4</code> in the <samp>Section
&quot;Files&quot;</samp> as:
</p>
<pre>
     Section &quot;Files&quot;
         FontPath  &quot;/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType&quot;
         FontPath  &quot;/usr/share/fonts/truetype&quot;
         FontPath  &quot;/usr/lib/X11/fonts/CID&quot;
         FontPath  &quot;/usr/lib/X11/fonts/Speedo&quot;
         FontPath  &quot;/usr/lib/X11/fonts/misc&quot;
         FontPath  &quot;/usr/lib/X11/fonts/cyrillic&quot;
         FontPath  &quot;/usr/lib/X11/fonts/100dpi:unscaled&quot;
         FontPath  &quot;/usr/lib/X11/fonts/75dpi:unscaled&quot;
         FontPath  &quot;/usr/lib/X11/fonts/Type1&quot;
     EndSection
</pre>
<p>
The first line will setup XFree86 to use any TrueType fonts you install from
Debian packages.  Type1 font entry is moved down since XFree86 does a rather
poor job of rendering Type1 fonts.  The <samp>:unscaled</samp> trick for bitmap
fonts should not be needed for new XF4 anymore but I included it here just be
sure.
</p>
<p>
In order to preserve manual changes of <code>/etc/X11/XF86Config-4</code>
follow instructions in <a href="#s-manual-config-x">Configuring the X server
manually, Section 9.4.3.3</a>.
</p>
</li>
</ul>

<p>
Then install DFSG font packages:
</p>
<ul>
<li>
<p>
Western TrueType fonts:
</p>
<ul>
<li>
<p>
<code>ttf-bitstream-vera</code>: A set of high-quality TrueType fonts created
by Bitstream, Inc.  [<a href="footnotes.en.html#f40" name="fr40">40</a>]
</p>
</li>
<li>
<p>
<code>ttf-freefont</code>: A set of free high-quality TrueType fonts covering
the UCS character set.
</p>
</li>
<li>
<p>
<code>ttf-thryomanes</code>: A TrueType Unicode font covering Latin, Greek,
Cyrillic, and IPA.
</p>
</li>
</ul>
</li>
<li>
<p>
Asian fonts:
</p>
<ul>
<li>
<p>
<code>tfm-arphic-bsmi00lp</code>: Chinese Arphic &quot;AR PL Mingti2L
Big5&quot; TrueType font TeX font metric data
</p>
</li>
<li>
<p>
<code>tfm-arphic-bkai00mp</code>: Chinese Arphic &quot;AR PL KaitiM Big5&quot;
TrueType font TeX font metric data
</p>
</li>
<li>
<p>
<code>tfm-arphic-gbsn00lp</code>: Chinese Arphic &quot;AR PL SungtiL GB&quot;
TrueType font TeX font metric data
</p>
</li>
<li>
<p>
<code>tfm-arphic-gkai00mp</code>: Chinese Arphic &quot;AR PL KaitiM GB&quot;
TrueType font TeX font metric data
</p>
</li>
<li>
<p>
<code>ttf-baekmuk</code>: Korean Baekmuk series TrueType fonts
</p>
</li>
<li>
<p>
<code>hbf-jfs56</code>: Chinese Jianti Fangsong 56x56 bitmap font (GB2312) for
CJK
</p>
</li>
<li>
<p>
<code>hbf-cns40-b5</code>: Chinese Fanti Song 40x40 bitmap font (Big5) for CJK
</p>
</li>
<li>
<p>
<code>hbf-kanji48</code>: Japanese Kanji 48x48 bitmap font (JIS X-0208) for CJK
</p>
</li>
</ul>
</li>
</ul>

<p>
Since <strong>Free</strong> fonts are sometimes limited, installing or sharing
some commercial TrueType fonts is an option for a Debian users.  In order to
make this process easy for the user, some convenience packages have been
created:
</p>
<ul>
<li>
<p>
<code>ttf-commercial</code>
</p>
</li>
<li>
<p>
<code>msttcorefonts (&gt;1.1.0)</code> [<a href="footnotes.en.html#f41"
name="fr41">41</a>]
</p>
</li>
</ul>

<p>
You'll have a really good selection of TrueType fonts at the expense of
contaminating your <strong>Free</strong> system with non-Free fonts.
</p>

<p>
All these font packages in Debian should work without any efforts and appear
available to all X programs that use the regular &quot;core&quot; font system.
This includes things like Xterm, Emacs, and most other non-KDE and non-GNOME
applications.
</p>

<p>
Now, run <code>xfontsel</code> and select any TrueType fonts in the fndry menu,
you should be able to see many ungrayed out entries in the &quot;fmly&quot;
menu.
</p>

<p>
For KDE2.2 and GNOME1.4 (with libgdkxft0, which is a hack to get GTK 1.2 to do
anti-aliased font rendering), you need to setup Xft1, as well.  Xft1 is highly
deprecated, and is basically only used by GNOME1.4 and KDE2.2.  Edit
<code>/etc/X11/XftConfig</code> and add a line like
</p>

<pre>
         dir &quot;/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType&quot;
</pre>

<p>
before the other dir lines.  [<a href="footnotes.en.html#f42"
name="fr42">42</a>]
</p>

<p>
For GNOME2 and KDE3 (post Sarge release), you need to setup
<code>fontconfig</code> which Xft2 uses to find fonts.  [<a
href="footnotes.en.html#f43" name="fr43">43</a>] You shouldn't need to install
anything extra for this because every package using <code>fontconfig</code>
Depends on it (indirectly) already.
</p>

<p>
First, look in <code>/etc/fonts/fonts.conf</code>.  There should be a line like
the one below.  If not, open up <code>/etc/fonts/local.conf</code> and add this
</p>

<pre>
         &lt;dir&gt;/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType&lt;/dir&gt;
</pre>

<p>
just after the &lt;fontconfig&gt; line.
</p>

<p>
<code>Fontconfig</code> should pick these up immediately, and
&quot;fc-list&quot; should list your new fonts.  Another neat feature of
<code>fontconfig</code> is that you can just drop fonts in
<code>~/.fonts/</code> and all your fontconfigified programs will have access
to them immediately.
</p>

<p>
If you manually install a new set of TrueType fonts while in X without using
Debian package, run
</p>

<pre>
     # xset fp rehash
</pre>

<p>
to get XFree86 to look at the contents of that directory again and to pickup
new ones.
</p>

<hr>

<h3><a name="s-ss-browser"></a>9.4.14 Web browsers in X</h3>

<p>
There are many web browser packages with graphical display capabilities as of
the Sarge release:
</p>
<ul>
<li>
<p>
<code>mozilla</code> The Mozilla browser
</p>
</li>
<li>
<p>
<code>mozilla-firefox</code> Mozilla browser variant (stand-alone)
</p>
</li>
<li>
<p>
<code>epiphany-browser</code> Mozilla browser variant (Gnome)
</p>
</li>
<li>
<p>
<code>konqueror</code> KDE browser
</p>
</li>
<li>
<p>
<code>amaya</code> W3C reference browser
</p>
</li>
<li>
<p>
...
</p>
</li>
</ul>

<p>
In <samp>testing</samp> or <samp>unstable</samp>, you may face version mismatch
problems among <code>mozilla</code> variant browsers since they may require
matched versions of shared libraries.
</p>

<p>
Plug-ins for browsers such as <code>mozilla</code> can be enabled by installing
&quot;<samp>*.so</samp>&quot; manually in the plug-in directory and restarting
the browsers.
</p>

<p>
Plug-in resources:
</p>
<ul>
<li>
<p>
Java plug-in: install binary &quot;J2SE&quot; from <code><a
href="http://java.sun.com">http://java.sun.com</a></code>.
</p>
</li>
<li>
<p>
Flash plug-in: install binary &quot;Macromedia Flash Player 5&quot; from
<code><a
href="http://www.macromedia.com/software/flashplayer/">http://www.macromedia.com/software/flashplayer/</a></code>.
</p>
</li>
<li>
<p>
<code>freewrl</code>: VRML browser and Netscape plug-in
</p>
</li>
<li>
<p>
...
</p>
</li>
</ul>

<hr>

<h3><a name="s-ss-mail"></a>9.4.15 Mail Clients (MUAs) in X</h3>

<p>
There are sevral client packages with graphical display capabilities as of the
Sarge release:
</p>
<ul>
<li>
<p>
<code>mozilla-thunderbird</code> stand-alone mail client
</p>
</li>
<li>
<p>
<code>kmail</code> KDE mail client
</p>
</li>
<li>
<p>
<code>evolution</code> groupware suite from Novell
</p>
</li>
<li>
<p>
...
</p>
</li>
</ul>

<hr>

<h2><a name="s-ssh"></a>9.5 SSH</h2>

<p>
SSH (Secure SHell) is the secure way to connect over the Internet.  A free
version of SSH called OpenSSH is available as the <code>ssh</code> package in
Debian.
</p>

<hr>

<h3><a name="s-ssh-basics"></a>9.5.1 Basics of SSH</h3>

<p>
First install the OpenSSH server and client.
</p>

<pre>
     # apt-get update &amp;&amp; apt-get install ssh
</pre>

<p>
<code>/etc/ssh/sshd_not_to_be_run</code> must not be present if one wishes to
run the OpenSSH server.
</p>

<p>
SSH has two authentication protocols:
</p>
<ul>
<li>
<p>
SSH protocol version 1:
</p>
<ul>
<li>
<p>
Potato version only supports this protocol.
</p>
</li>
<li>
<p>
available authentication methods:
</p>
<ul>
<li>
<p>
RSAAuthentication: RSA identity key based user authentication
</p>
</li>
<li>
<p>
RhostsAuthentication: .rhosts based host authentication (insecure, disabled)
</p>
</li>
<li>
<p>
RhostsRSAAuthentication: .rhosts authentication combined with RSA host key
(disabled)
</p>
</li>
<li>
<p>
ChallengeResponseAuthentication: RSA challenge-response authentication
</p>
</li>
<li>
<p>
PasswordAuthentication: password based authentication
</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
SSH protocol version 2:
</p>
<ul>
<li>
<p>
post-Woody versions use this as the primary protocol.
</p>
</li>
<li>
<p>
available authentication methods:
</p>
<ul>
<li>
<p>
PubkeyAuthentication: public key based user authentication
</p>
</li>
<li>
<p>
HostbasedAuthentication: <code>.rhosts</code> or <code>/etc/hosts.equiv</code>
authentication combined with public key client host authentication (disabled)
</p>
</li>
<li>
<p>
ChallengeResponseAuthentication: challenge-response authentication
</p>
</li>
<li>
<p>
PasswordAuthentication: password based authentication
</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>

<p>
Be careful about these differences if you are migrating to Woody or using a
non-Debian system.
</p>

<p>
See <code>/usr/share/doc/ssh/README.Debian.gz</code>, <code>ssh(1)</code>,
<code>sshd(8)</code>, <code>ssh-agent(1)</code>, and <code>ssh-keygen(1)</code>
for details.
</p>

<p>
Following are the key configuration files:
</p>
<ul>
<li>
<p>
<code>/etc/ssh/ssh_config</code>: SSH client defaults.  See
<code>ssh(1)</code>.  Notable entries are:
</p>
<ul>
<li>
<p>
<samp>Host</samp>: Restricts the following declarations (up to the next Host
keyword) to be only for those hosts that match one of the patterns given after
the keyword.
</p>
</li>
<li>
<p>
<samp>Protocol</samp>: Specifies the SSH protocol versions.  The default is
&quot;2,1&quot;.
</p>
</li>
<li>
<p>
<samp>PreferredAuthentications</samp>: Specifies the SSH2 client authentication
method.  The default is
&quot;hostbased,publickey,keyboard-interactive,password&quot;.
</p>
</li>
<li>
<p>
<samp>PasswordAuthentication</samp>: If you want to log in with a password, you
have to make sure this is not set <samp>no</samp>.
</p>
</li>
<li>
<p>
<samp>ForwardX11</samp>: The default is disabled.  This can be overridden by
the command-line option &quot;<samp>-X</samp>&quot;.
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
<code>/etc/ssh/sshd_config</code>: SSH server defaults.  See
<code>sshd(8)</code>.  Notable entries are:
</p>
<ul>
<li>
<p>
<samp>ListenAddress</samp>: Specifies the local addresses <code>sshd</code>
should listen on.  Multiple options are permitted.
</p>
</li>
<li>
<p>
<samp>AllowTcpForwarding</samp>: The default is disabled.
</p>
</li>
<li>
<p>
<samp>X11Forwarding</samp>: The default is disabled.
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
<code>$HOME/.ssh/authorized_keys</code>: the lists of the default public keys
that clients use to connect to this account on this host.  See
<code>ssh-keygen(1)</code>.
</p>
</li>
</ul>
<ul>
<li>
<p>
<code>$HOME/.ssh/identity</code>: See <code>ssh-add(1)</code> and
<code>ssh-agent(1)</code>.
</p>
</li>
</ul>

<p>
The following will start an <code>ssh</code> connection from a client.
</p>

<pre>
     $ ssh username@hostname.domain.ext
     $ ssh -1 username@hostname.domain.ext # Force SSH version 1
     $ ssh -1 -o RSAAuthentication=no -l username foo.host
         # force password on SSH1
     $ ssh -o PreferredAuthentications=password -l username foo.host
         # force password on SSH2
</pre>

<p>
For the user, <code>ssh</code> functions as a smarter and more secure
<code>telnet</code> (will not bomb with ^]).
</p>

<hr>

<h3><a name="s-ssh-forward"></a>9.5.2 Port forwarding for SMTP/POP3 tunneling</h3>

<p>
To establish a pipe to connect to port 25 of <var>remote-server</var> from port
4025 of localhost, and to port 110 of <var>remote-server</var> from port 4110
of localhost through <code>ssh</code>, execute on the local machine:
</p>

<pre>
     # ssh -q -L 4025:remote-server:25 4110:remote-server:110 \
                username@remote-server
</pre>

<p>
This is a secure way to make connections to SMTP/POP3 servers over the
Internet.  Set the <samp>AllowTcpForwarding</samp> entry to <samp>yes</samp> in
<code>/etc/ssh/sshd_config</code> of the remote host.
</p>

<hr>

<h3><a name="s-ssh-rsa"></a>9.5.3 Connecting with fewer passwords &ndash; RSA</h3>

<p>
One can avoid having to remember a password for each remote system by using
RSAAuthentication (SSH1 protocol) or PubkeyAuthentication (SSH2 protocol).
</p>

<p>
On the remote system, set the respective entries, &quot;RSAAuthentication
yes&quot; or &quot;PubkeyAuthentication yes&quot;, in
<code>/etc/ssh/sshd_config</code>.
</p>

<p>
Then generate authentication keys locally and install the public key on the
remote system:
</p>

<pre>
     $ ssh-keygen          # RSAAuthentication: RSA1 key for SSH1
     $ cat .ssh/identity.pub | ssh user1@remote \
             &quot;cat - &gt;&gt;.ssh/authorized_keys&quot;
     ...
     $ ssh-keygen -t rsa   # PubkeyAuthentication: RSA key for SSH2
     $ cat .ssh/id_rsa.pub | ssh user1@remote \
             &quot;cat - &gt;&gt;.ssh/authorized_keys&quot;
     ...
     $ ssh-keygen -t dsa   # PubkeyAuthentication: DSA key for SSH2
     $ cat .ssh/id_dsa.pub | ssh user1@remote \
             &quot;cat - &gt;&gt;.ssh/authorized_keys&quot;
</pre>

<p>
One can change the passphrase later with &quot;<samp>ssh-keygen
-p</samp>&quot;.  Make sure to verify settings by testing the connection.  In
case of any problem, use &quot;<samp>ssh -v</samp>&quot;.
</p>

<p>
You can add options to the entries in <code>authorized_keys</code> to limit
hosts and to run specific commands.  See <code>sshd(8)</code> for details.
</p>

<p>
Note that SSH2 has <samp>HostbasedAuthentication</samp>.  For this to work, you
must adjust the settings of <samp>HostbasedAuthentication</samp> to
<samp>yes</samp> in both <code>/etc/ssh/sshd_config</code> on the server
machine and <code>/etc/ssh/ssh_config</code> or <code>$HOME/.ssh/config</code>
on the client machine.
</p>

<hr>

<h3><a name="s-ssh-client"></a>9.5.4 Dealing with alien SSH clients</h3>

<p>
There are a few free SSH clients available for non-Unix-like platforms.
</p>
<dl>
<dt>Windows</dt>
<dd>
<p>
<code><a
href="http://www.chiark.greenend.org.uk/~sgtatham/putty/">puTTY</a></code>
(GPL)
</p>
</dd>
</dl>
<dl>
<dt>Windows (cygwin)</dt>
<dd>
<p>
SSH in <code><a href="http://www.cygwin.com/">cygwin</a></code> (GPL)
</p>
</dd>
</dl>
<dl>
<dt>Macintosh Classic</dt>
<dd>
<p>
<code><a href="http://www.macssh.com/">macSSH</a></code> (GPL) [Note that Mac
OS X includes OpenSSH; use <samp>ssh</samp> in the Terminal application]
</p>
</dd>
</dl>

<p>
See also <code><a
href="http://www.sourceforge.net/docman/?group_id=1">SourceForge.net, site
documentation</a></code>, &quot;6.  CVS Instructions&quot;.
</p>

<hr>

<h3><a name="s-ssh-agent"></a>9.5.5 Setting up <code>ssh-agent</code></h3>

<p>
It is safer to protect your SSH authentication key with a passphrase.  If it
was not set, use <samp>ssh-keygen -p</samp> to set it.
</p>

<p>
Place your public key (e.g.  <code>~/.ssh/id_rsa.pub</code>) into
<code>~/.ssh/authorized_keys</code> on a remote host using a password-based
connection to the remote host as described in <a href="#s-ssh-rsa">Connecting
with fewer passwords &ndash; RSA, Section 9.5.3</a>.
</p>

<pre>
     $ ssh-agent bash # or run zsh/tcsh/pdksh program instead.
     $ ssh-add ~/.ssh/id_rsa
     Enter passphrase for /home/osamu/.ssh/id_rsa:
     Identity added: /home/osamu/.ssh/id_rsa (/home/osamu/.ssh/id_rsa)
     $ scp <var>foo</var> <var>user@remote.host:foo</var>
      ... no passphrase needed from here on :-)
     $^D
      ... terminating ssh-agent session
</pre>

<p>
For the X server, normal Debian startup scripts execute <code>ssh-agent</code>
as parent process.  So you only need to execute <code>ssh-add</code> once.
</p>

<p>
For more, read <code>ssh-agent(1)</code>and <code>ssh-add(1)</code>.
</p>

<hr>

<h3><a name="s-ssh-trouble"></a>9.5.6 Troubleshooting SSH</h3>

<p>
If you have problems, check the permissions of configuration files and run
<code>ssh</code> with the &quot;<samp>-v</samp>&quot; option.
</p>

<p>
Use the &quot;<samp>-P</samp>&quot; option if you are root and have trouble
with a firewall; this avoids the use of server ports 1&ndash;1023.
</p>

<p>
If <code>ssh</code> connections to a remote site suddenly stop working, it may
be the result of tinkering by the sysadmin, most likely a change in
<code>host_key</code> during system maintenance.  After making sure this is the
case and nobody is trying to fake the remote host by some clever hack, one can
regain a connection by removing the <code>host_key</code> entry from
<code>$HOME/.ssh/known_hosts</code> on the local machine.
</p>

<hr>

<h2><a name="s-mail"></a>9.6 Mail</h2>

<p>
Mail configuration divides into three categories:
</p>
<ul>
<li>
<p>
mail transfer agent (MTA): <code>exim4</code>, <code>exim</code>,
<code>postfix</code>, <code>sendmail</code>, <code>qmail</code>,
<code>ssmtp</code>, <code>nullmailer</code>, ...
</p>
</li>
</ul>
<ul>
<li>
<p>
mail utilities: <code>procmail</code>, <code>fetchmail</code>,
<code>mailx</code>, <code>crm114</code>, ...
</p>
</li>
</ul>
<ul>
<li>
<p>
mail user agent (MUA): <code>mutt</code>, <code>emacs</code>+<code>gnus</code>,
...
</p>
</li>
</ul>

<hr>

<h3><a name="s-mta"></a>9.6.1 Mail transport agents (MTAs)</h3>

<p>
For a full-featured MTA, use <code>exim</code> in Woody and use
<code>exim4</code> in Sarge.  [<a href="footnotes.en.html#f44"
name="fr44">44</a>] References:
</p>
<ul>
<li>
<p>
<code>exim-doc</code> and <code>exim-doc-html</code> packages for
<code>exim</code>
</p>
</li>
<li>
<p>
<code>exim4-doc-info</code> and <code>exim4-doc-html</code> packages for
<code>exim4</code>
</p>
</li>
<li>
<p>
<code><a href="http://www.exim.org/">http://www.exim.org/</a></code>
</p>
</li>
</ul>

<p>
The only reasonable alternative MTA is <code>postfix</code> if you care about
security.  <code>sendmail</code> and <code>qmail</code> are available as Debian
packages but are not recommended.
</p>

<p>
If you do not need the relay capability of an MTA as in the case of a satellite
system such as a laptop PC, you may consider using one of these lightweight
packages:
</p>
<ul>
<li>
<p>
<code>ssmtp</code>: needs an SMTP connection and is alias-capable, or
</p>
</li>
<li>
<p>
<code>nullmailer</code>: can spool but is not alias-capable.
</p>
</li>
</ul>

<p>
At this moment, I find <code>exim</code> to be more suitable even for my
personal workstation machine, which is a laptop PC.
</p>

<p>
You may need to remove <code>exim</code> for the installation of these
conflicting packages:
</p>

<pre>
     # dpkg -P --force-depends exim
     # apt-get install nullmailer         # or ssmtp
</pre>

<hr>

<h4><a name="s-exim-smart"></a>9.6.1.1 Smarthost</h4>

<p>
If you are running <code>exim4</code> or <code>exim</code> on a host which is
connected through the consumer grade services, please make sure to send
outgoing mail through a smarthost offered by your ISP or some others.  [<a
href="footnotes.en.html#f45" name="fr45">45</a>] There are few good reasons:
</p>
<ul>
<li>
<p>
to ensure SMTP retries since your ISP's smarthost usually have more reliably
connection.
</p>
</li>
<li>
<p>
to avoid sending mail directly from a <strong>dynamic IP address</strong> which
will likely be blocked by dial-up spam lists.
</p>
</li>
<li>
<p>
to save your local bandwidth to send mails with multiple recipients.
</p>
</li>
</ul>

<p>
The only conceivable exceptions are:
</p>
<ul>
<li>
<p>
the emergency cure for your ISP's SMTP service trouble.
</p>
</li>
<li>
<p>
an experiment for the educational purpose.
</p>
</li>
<li>
<p>
your host being a professionally hosted server.
</p>
</li>
</ul>

<hr>

<h4><a name="s-exim-base"></a>9.6.1.2 Basic configuration of Exim</h4>

<p>
In order to use <code>exim4</code> or <code>exim</code> as your MTA, configure
the following:
</p>

<pre>
     /etc/exim/exim.conf     &quot;eximconfig&quot; to create and edit (exim)
     /etc/exim4/*            &quot;dpkg-reconfigure exim4-config&quot; to create and edit (exim4)
     /etc/inetd.conf         comment out smtp to run exim as daemon
     /etc/email-addresses    Add spoofed source address lists
</pre>

<p>
check filters using <code>exim4</code> or <code>exim</code> with <samp>-brw,
-bf, -bF, -bV, ...</samp> etc.
</p>

<hr>

<h4><a name="s-addr-catchall"></a>9.6.1.3 Setting up a catchall for nonexistent email addresses under Exim</h4>

<p>
In <code>/etc/exim/exim.conf</code> (Woody or later), in the DIRECTORS part, at
the end (after the localuser: director) add a catch-all director that matches
all addresses that the previous directors couldn't resolve (per Miquel van
Smoorenburg):
</p>

<pre>
     catchall:
       driver = smartuser
         new_address = <var>webmaster@mydomain.com</var>
</pre>

<p>
If one wants to have more a detailed recipe for each virtual domain, etc., add
the following at the end of <code>/etc/exim/exim.conf</code> (per me, not well
tested):
</p>

<pre>
     *@yourdomain.com ${lookup{$1}lsearch*{/etc/email-addresses} \
             {$value}fail} T
</pre>

<p>
Then have an &quot;*&quot; entry in <code>/etc/email-addresses</code>.
</p>

<hr>

<h4><a name="s-addr-rewrite"></a>9.6.1.4 Configuring selective address rewriting for outgoing mail under Exim</h4>

<p>
Selective address rewrite for outgoing mail to produce proper &quot;From:&quot;
headers can be done using <code>exim</code> by configuring near the end of
<code>/etc/exim/exim.conf</code>:
</p>

<pre>
     *@host1.something.dyndns.org \
       &quot;${if eq {${lookup{$1}lsearch{/etc/passwd}{1}{0}}} {1}  \
        {$0}{$1@something.dyndns.org}}&quot;  frFs
</pre>

<p>
This rewrites all addresses matching <samp>*@host1.something.dyndns.org</samp>.
</p>
<ol type="1" start="1" >
<li>
<p>
It searches through <code>/etc/password</code> to see if the local part ($1) is
a local user or not.
</p>
</li>
</ol>
<ol type="1" start="2" >
<li>
<p>
If it is a local user, it rewrites the address to the same thing it was in the
first place ($0).
</p>
</li>
</ol>
<ol type="1" start="3" >
<li>
<p>
If it is not a local user, it rewrites the domain part.
</p>
</li>
</ol>

<hr>

<h4><a name="s-smtp-aauth"></a>9.6.1.5 Configuring SMTP authentication under Exim</h4>

<p>
Some SMTP services such as yahoo.com require SMTP auth.  Configure
<code>/etc/exim/exim.conf</code> as follows:
</p>

<pre>
     remote_smtp:
       driver = smtp
       authenticate_hosts = smtp.mail.yahoo.com
     ...
     
     smarthost:
       driver = domainlist
       transport = remote_smtp
       route_list = &quot;* smtp.mail.yahoo.com bydns_a&quot;
     ...
     
     plain:
       driver = plaintext
       public_name = PLAIN
       client_send = &quot;^cmatheson3^this_is_my_password&quot;
</pre>

<p>
Do not forget double quotes in the last line.
</p>

<hr>

<h3><a name="s-fetchmail"></a>9.6.2 Fetching mail &ndash; Fetchmail</h3>

<p>
<code>fetchmail</code> is run in daemon mode to fetch mail from a POP3 account
with an ISP into the local mail system.  Configure:
</p>

<pre>
     /etc/init.d/fetchmail   
     /etc/rc?.d/???fetchmail run update-rc.d fetchmail default priority 30
     /etc/fetchmailrc        configuration file (chown 600, owned by fetchmail)
</pre>

<p>
Information on how to start <code>fetchmail</code> as a daemon from the
<code>init.d</code> script for Potato is confusing (Woody fixed this).  See the
sample <code>/etc/init.d/fetchmail</code> and <code>/etc/fetchmailrc</code>
files in the <code><a href="examples/">example scripts</a></code>.
</p>

<p>
If your email headers are contaminated by ^M due to your ISP's mailer, add
&quot;stripcr&quot; to your options in <code>$HOME/.fetchmailrc</code>:
</p>

<pre>
     options fetchall no keep stripcr
</pre>

<hr>

<h3><a name="s-procmail"></a>9.6.3 Processing mail &ndash; Procmail</h3>

<p>
<code>procmail</code> is a local mail delivery and filter program.  One needs
to create <code>$HOME/.procmailrc</code> for each account that uses it.
Example: <code><a href="examples/">_procmailrc</a></code>
</p>

<hr>

<h3><a name="s-crm114"></a>9.6.4 Processing spam with <code>crm114</code></h3>

<p>
<code>crm114</code> package provides
<code>/usr/share/crm114/mailfilter.crm</code> script which is written in
CRM114.  This script provides a very effective spam filter which can be trained
by feeding the spam and the ham.
</p>

<p>
CRM114 is a small language designed to write filters in; consider it to be a
version of grep with super powers.  See <code>crm(1)</code>.
</p>

<hr>

<h3><a name="s-mutt"></a>9.6.5 Reading mail &ndash; Mutt</h3>

<p>
Use <code>mutt</code> as the mail user agent (MUA) in combination with
<code>vim</code>.  Customize with <code>~/.muttrc</code>; for example:
</p>

<pre>
     # use visual mode and &quot;gq&quot; to reformat quotes
     set editor=&quot;vim -c 'set tw=72 et ft=mail'&quot;
     #
     # header weeding taken from the manual (Sven's Draconian header weeding)
     #
     ignore *
     unignore from: date subject to cc
     unignore user-agent x-mailer
     hdr_order from subject to cc date user-agent x-mailer
     auto_view application/msword
     ....
</pre>

<p>
Add the following to <code>/etc/mailcap</code> or <code>$HOME/.mailcap</code>
to display HTML mail and MS Word attachments inline:
</p>

<pre>
     text/html; lynx -force_html %s; needsterminal;
     application/msword; /usr/bin/antiword '%s'; copiousoutput;
     description=&quot;Microsoft Word Text&quot;; nametemplate=%s.doc
</pre>

<hr>

<h2><a name="s-l10n"></a>9.7 Localization (l10n)</h2>

<p>
Debian is internationalized, offering support for a growing number of languages
and local usage conventions.  The next subsection lists some of the forms of
diversity that Debian currently supports, and the following subsections discuss
<strong>localization</strong>, the process of customizing your working
environment to allow current input and output of your chosen language(s) and
conventions for dates, numeric and monetary formats, and other aspects of a
system that differ according to your region.
</p>

<hr>

<h3><a name="s-languages"></a>9.7.1 Basics of localization</h3>

<p>
There are several aspects to customizing for localization and national language
support.
</p>

<hr>

<h4><a name="s-keyboard"></a>9.7.1.1 Localizing the keyboard</h4>

<p>
Debian is distributed with keymaps for nearly two dozen keyboards.  In Woody,
reconfigure the keyboard by:
</p>
<ul>
<li>
<p>
<samp>dpkg-reconfigure --priority=low console-data # console</samp>
</p>
</li>
<li>
<p>
<samp>dpkg-reconfigure --priority=low xserver-xfree86 # XF4</samp>
</p>
</li>
<li>
<p>
<samp>dpkg-reconfigure --priority=low xserver-common-v3 # XF3</samp>
</p>
</li>
</ul>

<hr>

<h4><a name="s-data-stream"></a>9.7.1.2 Localizing data files</h4>

<p>
The vast majority of Debian software packages support data handling of
non-US-ASCII characters through the LC_CTYPE environment variable offered by
the <strong>locale</strong> technology in glibc.
</p>
<ul>
<li>
<p>
8-bit clean: practically all programs
</p>
</li>
<li>
<p>
other Latin character sets (e.g.  ISO-8859-1 or ISO-8859-2): the majority of
programs
</p>
</li>
<li>
<p>
multibyte languages such as Chinese, Japanese, or Korean: many new applications
</p>
</li>
</ul>

<hr>

<h4><a name="s-display"></a>9.7.1.3 Localizing the display</h4>

<p>
X can display any coding, including UTF-8, and supports all fonts.  The list
includes not only all the 8-bit fonts but also 16-bit fonts such as Chinese,
Japanese, or Korean.  Multibyte character input method is supported by the <a
href="#s-x-input">Alternative X input methods, Section 9.7.10</a> mechanism.
See <a href="#s-x-cjk">Example for a multilingual X window system, Section
9.7.9</a> and <a href="#s-x-utf-8">UTF-8 support for the X terminal emulator,
Section 9.7.12</a>.
</p>

<p>
Japanese EUC code display is also available in a (S)VGA graphics console
through the <code>kon2</code> package.  There is an alternative new Japanese
display, <code>jfbterm</code>, which uses a frame-buffer console, too.  In
these console environments, the Japanese input method must be supplied by the
application.  Use <code>egg</code> package for Emacs and use japanized
<code>jvim</code> package for a Vim environment.
</p>

<p>
Installation of non Unicode fonts to X will help in displaying documents with
any encoding in X.  So do not worry too much about encoding of fonts.
</p>

<hr>

<h4><a name="s-translation"></a>9.7.1.4 Localizing messages and documentation</h4>

<p>
Translations exist for many of the text messages and documents that are
displayed in the Debian system, such as error messages, standard program
output, menus, and manual pages.  Currently, support for manual pages in
German, Spanish, Finnish, French, Hungarian, Italian, Japanese, Korean, Polish,
Portuguese, Chinese, and Russian is provided through the
<samp>manpages-<var>LANG</var></samp> packages (where <var>LANG</var> is a
comma-separated list of two-letter ISO country codes.  Use <samp>apt-cache
search manpages-|less</samp> to get a list of available Unix manual pages.)
</p>

<p>
To access an NLS manual page, the user must set the environment variable
LC_MESSAGES to the appropriate string.  For example, in the case of the
Italian-language manual pages, LC_MESSAGES needs to be set to <samp>it</samp>.
The <code>man</code> program will then search for Italian manual pages under
<code>/usr/share/man/it/</code>.
</p>

<hr>

<h3><a name="s-locales"></a>9.7.2 Locales</h3>

<p>
Debian supports <strong>locale</strong> technology.  Locale is a mechanism that
allows programs to provide suitable output and functionality according to local
conventions such as character set, format for date and time, currency symbol,
and so on.  It uses environment variables to determine the appropriate
behavior.  For example, assuming you have both the American English and German
locales installed on your system, the error messages of many programs can be
multilingual:
</p>

<pre>
     $ LANG=&quot;en_US&quot; cat foo
     cat: foo: No such file or directory
     $ LANG=&quot;de_DE&quot; cat foo
     cat: foo: Datei oder Verzeichnis nicht gefunden
</pre>

<p>
Glibc offers support for this functionality to programs as a library.  See
<code>locale(7)</code>.
</p>

<hr>

<h3><a name="s-base-locale"></a>9.7.3 Introduction to locales</h3>

<p>
Full locale description consists of 3 parts: <samp>xx_YY.ZZZZ</samp>.
</p>
<ul>
<li>
<p>
<strong><samp>xx</samp></strong>: ISO 639 language codes (lower case)
</p>
</li>
<li>
<p>
<strong><samp>YY</samp></strong>: ISO 3166 country codes (upper case)
</p>
</li>
<li>
<p>
<strong><samp>ZZZZ</samp></strong>: codeset, i.e., character set or encoding
identifier.
</p>
</li>
</ul>

<p>
For language codes and country codes, see pertinent description in the
<samp>info gettext</samp>.
</p>

<p>
Please note this codeset part may be normalized internally to achieve cross
platform compatibility by removing all <samp>-</samp> and by converting all
characters into lower case.  Typical codesets are:
</p>
<ul>
<li>
<p>
<strong>UTF-8</strong>: Unicode for all regions, mostly in 1-3 Octets (new de
facto standard)
</p>
</li>
<li>
<p>
<strong>ISO-8859-1</strong>: western Europe (de facto old standard)
</p>
</li>
<li>
<p>
<strong>ISO-8859-2</strong>: eastern Europe (Bosnian, Croatian, Czech,
Hungarian, Polish, Romanian, Serbian, Slovak, Slovenian)
</p>
</li>
<li>
<p>
<strong>ISO-8859-3</strong>: Maltese
</p>
</li>
<li>
<p>
<strong>ISO-8859-5</strong>: Macedonian, Serbian
</p>
</li>
<li>
<p>
<strong>ISO-8859-6</strong>: Arabic
</p>
</li>
<li>
<p>
<strong>ISO-8859-7</strong>: Greek
</p>
</li>
<li>
<p>
<strong>ISO-8859-8</strong>: Hebrew
</p>
</li>
<li>
<p>
<strong>ISO-8859-9</strong>: Turkish
</p>
</li>
<li>
<p>
<strong>ISO-8859-11</strong>: Thai (=TIS-620)
</p>
</li>
<li>
<p>
<strong>ISO-8859-13</strong>: Latvian, Lithuanian, Maori
</p>
</li>
<li>
<p>
<strong>ISO-8859-14</strong>: Welsh
</p>
</li>
<li>
<p>
<strong>ISO-8859-15</strong>: western Europe with euro
</p>
</li>
<li>
<p>
<strong>KOI8-R</strong>: Russian
</p>
</li>
<li>
<p>
<strong>KOI8-U</strong>: Ukrainian
</p>
</li>
<li>
<p>
<strong>CP1250</strong>: Czech, Hungarian, Polish (MS Windows origin)
</p>
</li>
<li>
<p>
<strong>CP1251</strong>: Bulgarian, Byelorussian (MS Windows origin)
</p>
</li>
<li>
<p>
<strong>eucJP</strong>: Unix style Japanese (=ujis)
</p>
</li>
<li>
<p>
<strong>eucKR</strong>: Unix style Korean
</p>
</li>
<li>
<p>
<strong>GB2312</strong>: Unix style Simplified Chinese (=GB, =eucCN) for zh_CN
</p>
</li>
<li>
<p>
<strong>Big5</strong>: Traditional Chinese for zh_TW
</p>
</li>
<li>
<p>
<strong>sjis</strong>: Microsoft style Japanese (Shift-JIS)
</p>
</li>
</ul>

<p>
As for the meaning of basic encoding system jargons:
</p>
<ul>
<li>
<p>
<strong>ASCII</strong>: 7 bits (0-0x7f)
</p>
</li>
<li>
<p>
<strong>ISO-8859-?</strong>: 8 bits (0-0xff)
</p>
</li>
<li>
<p>
<strong>ISO-10646-1</strong>: Universal Character Set (UCS) (31 bits,
0-0x7fffffff)
</p>
</li>
<li>
<p>
<strong>UCS-2</strong>: First 16 bit of UCS as straight 2 Octets (Unicode:
0-0xffff)
</p>
</li>
<li>
<p>
<strong>UCS-4</strong>: UCS as straight 4 Octets (UCS: 0-0x7fffffff)
</p>
</li>
<li>
<p>
<strong>UTF-8</strong>: UCS encoded in 1-6 Octets (mostly in 3 Octets)
</p>
</li>
<li>
<p>
<strong>ISO-2022</strong>: 7 bits (0-0xff) with the escape sequence.
ISO-2022-JP is the most popular encoding for the Japanese e-mail.
</p>
</li>
<li>
<p>
<strong>EUC</strong>: 8 bits + 16 bits combination (0-0xff), Unix style
</p>
</li>
<li>
<p>
<strong>Shift-JIS</strong>: 8 bits + 16 bits combination (0-0xff), Microsoft
style.
</p>
</li>
</ul>

<p>
ISO-8859-?, EUC, ISO-10646-1, UCS-2, UCS-4, and UTF-8 share the same code with
ASCII for the 7 bit characters.  EUC or Shift-JIS uses high-bit characters
(0x80-0xff) to indicate that part of encoding is 16 bit.  UTF-8 also uses
high-bit characters (0x80-0xff) to indicate non 7 bit character sequence bytes
and this is the most sane encoding system to handle non-ASCII characters.
</p>

<p>
Please note the byte order difference of Unicode implementation:
</p>
<ul>
<li>
<p>
<strong>Standard UCS-2, UCS-4</strong>: big endian
</p>
</li>
<li>
<p>
<strong>Microsoft UCS-2, UCS-4</strong>: little endian for ix86
(machine-dependent)
</p>
</li>
</ul>

<p>
See <a href="ch-tips.en.html#s-recode">Convert a text file with
<code>recode</code>, Section 8.6.12</a> for conversion between various
character sets.  For more see <code><a
href="http://www.debian.org/doc/manuals/intro-i18n/">Introduction to
i18n</a></code>.
</p>

<hr>

<h3><a name="s-activate-locales"></a>9.7.4 Activating locale support</h3>

<p>
Debian does <strong>not</strong> come with all available locales pre-compiled.
Check <code>/usr/lib/locale</code> to see which locales (besides the default
&quot;C&quot;) are compiled for your system.  If the one you need is not
present, you have two options:
</p>
<ul>
<li>
<p>
Edit <code>/etc/locale.gen</code> to add the desired locale, then run
<code>locale-gen</code> as root to compile it.  See <code>locale-gen(8)</code>
and the manpages listed in its &quot;SEE ALSO&quot; section.
</p>
</li>
<li>
<p>
Run <samp>dpkg-reconfigure locales</samp> to reconfigure the
<code>locales</code> package.  Or if it is not already installed, installing
<code>locales</code> will invoke the debconf interface to let you choose needed
locales and compile the database.
</p>
</li>
</ul>

<hr>

<h3><a name="s-env-locale"></a>9.7.5 Activating a particular locale</h3>

<p>
The following environment variables are evaluated in this order to provide
particular locale values to programs:
</p>
<ol type="1" start="1" >
<li>
<p>
LANGUAGE: This environment variable consists of a colon-separated list of
locale names in order of priority.  Used only if the POSIX locale is set to a
value other than &quot;C&quot; [in Woody; the Potato version always has
priority over the POSIX locale].  (GNU extension)
</p>
</li>
</ol>
<ol type="1" start="2" >
<li>
<p>
LC_ALL: If this is non-null, the value is used for all locale categories.
(POSIX.1) Usually &quot;&quot; (null).
</p>
</li>
</ol>
<ol type="1" start="3" >
<li>
<p>
LC_*: If this is non-null, the value is used for the corresponding category
(POSIX.1).  Usually &quot;C&quot;.
</p>

<p>
LC_* variables are:
</p>
<ul>
<li>
<p>
LC_CTYPE: Character classification and case conversion.
</p>
</li>
<li>
<p>
LC_COLLATE: Collation order.
</p>
</li>
<li>
<p>
LC_TIME: Date and time formats.
</p>
</li>
<li>
<p>
LC_NUMERIC: Non-monetary numeric formats.
</p>
</li>
<li>
<p>
LC_MONETARY: Monetary formats.
</p>
</li>
<li>
<p>
LC_MESSAGES: Formats of informative and diagnostic messages and interactive
responses.
</p>
</li>
<li>
<p>
LC_PAPER: Paper size.
</p>
</li>
<li>
<p>
LC_NAME: Name formats.
</p>
</li>
<li>
<p>
LC_ADDRESS: Address formats and location information.
</p>
</li>
<li>
<p>
LC_TELEPHONE: Telephone number formats.
</p>
</li>
<li>
<p>
LC_MEASUREMENT: Measurement units (Metric or Other).
</p>
</li>
<li>
<p>
LC_IDENTIFICATION: Metadata about the locale information.
</p>
</li>
</ul>
</li>
</ol>
<ol type="1" start="4" >
<li>
<p>
LANG: If this is non-null and LC_ALL is undefined, the value is used for all
LC_* locale categories with undefined values.  (POSIX.1) Usually &quot;C&quot;.
</p>
</li>
</ol>

<p>
Note that some applications (e.g., Netscape 4) ignore LC_* settings.
</p>

<p>
The <code>locale</code> program can display active locale settings and
available locales; see <code>locale(1)</code>.  (NOTE: <samp>locale -a</samp>
lists all the locales that your system knows about; this does <em>not</em> mean
that all of them are compiled!  See <a href="#s-activate-locales">Activating
locale support, Section 9.7.4</a>.)
</p>

<hr>

<h3><a name="s-ISO-locale"></a>9.7.6 ISO 8601 date format locale</h3>

<p>
The locale support for the international date standard of
<samp>yyyy-mm-dd</samp> (ISO 8601 date format) is provided by the locale called
<samp>en_DK</samp>, &quot;English in Denmark&quot;, which is a bit of joke :-)
This seems to work only in a console screen for <code>ls</code>.
</p>

<hr>

<h3><a name="s-iso-8859-1"></a>9.7.7 Example for the US (ISO-8859-1)</h3>

<p>
Add the following lines to <code>~/.bash_profile</code>:
</p>

<pre>
     LC_CTYPE=en_US.ISO-8859-1
     export LC_CTYPE
</pre>

<hr>

<h3><a name="s-france"></a>9.7.8 Example for France with Euro sign (ISO-8859-15)</h3>

<p>
Add the following lines to <code>~/.bash_profile</code>:
</p>

<pre>
     LANG=fr_FR@euro
     export LANG
     LC_CTYPE=fr_FR@euro
     export LC_CTYPE
</pre>

<p>
Configure the keyboard for French &quot;AZERTY&quot; as described in <a
href="#s-keyboard">Localizing the keyboard, Section 9.7.1.1</a>; add French
manual pages by installing <code>manpages-fr</code>.  The Right-Alt key in the
US is called Alt-Gr in Europe.  Pressing this together with other keys creates
numerous accented and special characters.  For example, Alt-Gr+E creates a Euro
sign.
</p>

<p>
Most western European languages can be configured similarly.
</p>

<p>
See <code><a
href="http://www.debian.org/doc/manuals/debian-euro-support/">Debian Euro
HOWTO</a></code> for adding support for the new Euro currency and <code><a
href="http://www.debian.org/doc/manuals/fr/debian-fr-howto/">Utiliser et
configurer Debian pour le franais</a></code> for more details in French.
</p>

<hr>

<h3><a name="s-x-cjk"></a>9.7.9 Example for a multilingual X window system</h3>

<p>
Let us set up a multilingual X window system which simultaneously supports
Japanese, English, German, and French with EUC, UTF-8, and ISO-8859-1 encodings
in different consoles.
</p>

<p>
I will show you a customization using the Debian menu system.  See the details
of Debian menu system in <code><a
href="file:///usr/share/doc/menu/html/index.html">file:///usr/share/doc/menu/html/index.html</a></code>.
I also create a shortcut to the <code>mozilla</code> web browser in this
example.  [<a href="footnotes.en.html#f46" name="fr46">46</a>]
</p>
<ul>
<li>
<p>
add locale support for the Japanese ja_JP.eucJP locale and other required
locales using the method described at <a href="#s-l10n">Localization (l10n),
Section 9.7</a>.  (for all)
</p>
</li>
</ul>
<ul>
<li>
<p>
install Kana-to-Kanji conversion system and dictionary (for Japanese):
</p>
<ul>
<li>
<p>
<code>canna</code> &ndash; Local server (&quot;free-beer&quot; license), or
</p>
</li>
<li>
<p>
<code>freewnn-jserver</code> &ndash; Network-extensible server (Public Domain)
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
install Japanese input method system (for Japanese):
</p>
<ul>
<li>
<p>
<code>kinput2-canna</code> &ndash; for X, or
</p>
</li>
<li>
<p>
<code>kinput2-canna-wnn</code> &ndash; for X, and
</p>
</li>
<li>
<p>
<code>egg</code> &ndash; directly works with Emacsen even in console (optional)
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
Install compatible terminals (for all):
</p>
<ul>
<li>
<p>
<code>xterm</code> &ndash; X (for ISO-8859-1 and UTF-8),
</p>
</li>
<li>
<p>
<code>kterm</code> &ndash; X (for Japanese EUC), and
</p>
</li>
<li>
<p>
<code>mlterm</code> &ndash; X (multilingual).
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
add all the required font packages.  (for all)
</p>
</li>
</ul>
<ul>
<li>
<p>
create the <code>~/.xsession</code> that sets the user-specific X environment
as described in <a href="#s-custom-x">Custom X sessions, Section 9.4.5.1</a>
(for all):
</p>

<pre>
     #!/bin/sh
     # This makes X work when I su to root.
     if [ -z &quot;$XAUTHORITY&quot; ]; then
             XAUTHORITY=$HOME/.Xauthority
             export XAUTHORITY
     fi
     
     # Set specific environment through debian menu system.
     # Reset locale
     unset LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES 
     unset LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT 
     unset LC_IDENTIFICATION LC_ALL LANG LANGUAGE PAGER
     # set locale default in X
     LANG=C
     # export locale
     export LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES 
     export LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT 
     export LC_IDENTIFICATION LC_ALL LANG LANGUAGE PAGER
     ###
     # activate input method for Japanese with kinput2
     kinput2 &amp;
     XMODIFIERS=&quot;@im=kinput2&quot;
     export XMODIFIERS
     # How about blackbox window manager (lightweight)
     exec blackbox
     #exec xfwm
     #exec wmaker
</pre>
</li>
</ul>
<ul>
<li>
<p>
set locale in <code>~/.bash_profile</code> for Linux consoles (for all).
</p>
</li>
</ul>
<ul>
<li>
<p>
remove locale settings from <code>~/.bashrc</code>, if existed (for all).
</p>
</li>
</ul>
<ul>
<li>
<p>
create few files in <code>/etc/menu/</code> (for all).
</p>
<ul>
<li>
<p>
<code>/etc/menu/xterm-local</code>: (add new entries to menu) [<a
href="footnotes.en.html#f47" name="fr47">47</a>]
</p>
<pre>
     ?package(xterm):\
      needs=x11\
      section=XShells\
      longtitle=&quot;XTerm: terminal emulator (en_US.ISO-8859-1)&quot;\
      title=&quot;XTerm (en_US.ISO-8859-1)&quot;\
      command=&quot;sh -c 'LC_ALL=en_US.ISO-8859-1 xterm'&quot;
     ?package(xterm):\
      needs=x11\
      section=XShells\
      longtitle=&quot;XTerm: terminal emulator (de_DE.ISO-8859-1)&quot;\
      title=&quot;XTerm (de_DE.ISO-8859-1)&quot;\
      command=&quot;sh -c 'LC_ALL=de_DE.ISO-8859-1 xterm -T xterm-de'&quot;
     ?package(xterm):\
      needs=x11\
      section=XShells\
      longtitle=&quot;XTerm: terminal emulator for X with Unicode support (Japanese)&quot;\
      title=&quot;UXTerm (ja_JP.UTF-8)&quot;\
      command=&quot;sh -c 'LC_ALL=ja_JP.UTF-8 uxterm'&quot;
</pre>
</li>
<li>
<p>
<code>/etc/menu/kterm</code>: (override the system default) [<a
href="footnotes.en.html#f48" name="fr48">48</a>]
</p>
<pre>
     ?package(kterm):\
      needs=&quot;x11&quot;\
      section=&quot;XShells&quot;\
      command=&quot;sh -c 'LC_ALL=ja_JP.eucJP PAGER=w3m /usr/X11R6/bin/kterm -xim'&quot; \
      title=&quot;Kanji Terminal&quot;
     ?package(kterm):\
      needs=&quot;x11&quot;\
      section=&quot;XShells&quot;\
      command=&quot;sh -c 'LANG=ja_JP.eucJP \
               LC_MESSAGES=en_US.ISO-8859-1 PAGER=w3m /usr/X11R6/bin/kterm -xim'&quot; \
      title=&quot;Kanji Terminal (bilingal)&quot;
</pre>
</li>
<li>
<p>
<code>/etc/menu/mozilla-local</code>: (add a new shortcut) [<a
href="footnotes.en.html#f49" name="fr49">49</a>]
</p>
<pre>
     ?package(mozilla-browser):needs=&quot;x11&quot; section=&quot;/&quot; \
             title=&quot; Mozilla Navigator&quot; command=&quot;mozilla-1.5&quot; hints=&quot;Web browsers&quot; \
             icon=/usr/share/pixmaps/mozilla.xpm
</pre>
</li>
<li>
<p>
run <code>update-menus</code> from the root account.
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
add the following lines to <code>~/.muttrc</code> (for Japanese):
</p>

<pre>
     # UTF-8 support is not popular in popular Japanese EMACS environment
     # 7-bit encoding of iso-2022-jp is easier for everyone.
     # default encoding order = us-ascii --&gt; iso-8859-1 --&gt; iso-2022-jp
     set send_charset=&quot;us-ascii:iso-8859-1:iso-2022-jp&quot;
     set allow_8bit=no
</pre>
</li>
</ul>
<ul>
<li>
<p>
activate XIM <code>kinput2</code> for X applications (for Japanese):
</p>
<ul>
<li>
<p>
add <samp>*inputMethod: kinput2</samp> and <samp>KTerm*VT100*OpenIm:
true</samp> to your X resources file, <code>~/.Xresources</code> (it looks like
Debian takes care of this automatically somehow).
</p>
</li>
<li>
<p>
Some applications (such as <code>mlterm</code>) also allow you to set up
<samp>*inputMethod:</samp> and other information dynamically at runtime (press
<strong>Ctrl-MouseButton-3</strong> in <code>mlterm</code>).
</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>
start X by typing <samp>startx</samp> or from one of the display managers
(<code>xdm</code>, <code>gdm</code>, <code>kdm</code>, <code>wdm</code>, ...)
(for all).
</p>
</li>
</ul>
<ul>
<li>
<p>
start a Japanese-compatible application such as Vim 6, (x)emacs21, mc-4.5,
mutt-1.4, ...  in <code>kterm</code> (for Japanese).  (Emacs seems to be the
most popular platform, though I do not use it.)
</p>
</li>
</ul>
<ul>
<li>
<p>
press <strong>Shift+Space</strong> to toggle Japanese character input mode on
and off (for Japanese).
</p>
</li>
</ul>
<ul>
<li>
<p>
read the localized manual page by starting command in localized console (for
all).
</p>
</li>
</ul>

<p>
For other CJK language supports, see the following sections and <code><a
href="http://www.suse.de/~mfabian/suse-cjk/suse-cjk.html">SuSE pages for
CJK</a></code>.
</p>

<hr>

<h3><a name="s-x-input"></a>9.7.10 Alternative X input methods</h3>

<p>
There are many alternative X input methods support packages available:
</p>

<pre>
     Language   LC_CTYPE     XIM server XMODIFIERS              Start key
     Japanese   ja_JP*       kinput2    &quot;@im=kinput2&quot;           Shift-Space
     Korean     ko_KR*       ami        &quot;@im=Ami&quot;               Shift-Space
     Chinese(T) zh_TW.Big5   xcin       &quot;@im=xcin-zh_TW.big5&quot;   Ctrl-Space
     Chinese(S) zh_CN.GB2312 xcin       &quot;@im=xcin-zh_CN.GB2312&quot; Ctrl-Space
</pre>

<p>
Japanese input method <code>kinput2</code> is offered by the packages such as
<code>kinput2-canna-wnn</code>, <code>kinput2-canna</code>, and
<code>kinput2-wnn</code>.  Japanese needs dictionary server such as
<code>canna</code> and <code>freewnn-jserver</code> to be practical.
</p>

<hr>

<h3><a name="s-x-term"></a>9.7.11 X terminal emulators</h3>

<p>
There are many X consoles which support simple 8 bit encodings when pertinent
font packages are installed:
</p>
<ul>
<li>
<p>
<code>xterm</code> &ndash; The X terminal emulator
</p>
</li>
<li>
<p>
<code>gnome-terminal</code> &ndash; <code>xterm</code> for Gnome
</p>
</li>
<li>
<p>
<code>konsole</code> &ndash; <code>xterm</code> for KDE
</p>
</li>
<li>
<p>
<code>rxvt</code> &ndash; VT102 terminal (lighter)
</p>
</li>
<li>
<p>
<code>aterm</code> &ndash; VT102 for Afterstep WM
</p>
</li>
<li>
<p>
<code>eterm</code> &ndash; VT102 for Enlightment WM
</p>
</li>
<li>
<p>
<code>wterm</code> &ndash; VT102 for WindowMaker WM
</p>
</li>
</ul>

<p>
Multi-byte encoding supports of X console are provided by <code>xterm</code>
through UTF-8 encoding (<a href="#s-x-utf-8">UTF-8 support for the X terminal
emulator, Section 9.7.12</a>).  Other traditional encoding supports are in
progress (as of 2003).  Following packages offer traditional encoding supports:
</p>
<ul>
<li>
<p>
<code>aterm-ml</code> &ndash; Multi-lingual
</p>
</li>
<li>
<p>
<code>kterm</code> &ndash; Multi-lingual (Japanese, ...)
</p>
</li>
<li>
<p>
<code>rxvt-ml</code> &ndash; Multi-lingual
</p>
</li>
<li>
<p>
<code>wterm-ml</code> &ndash; Multi-lingual
</p>
</li>
<li>
<p>
<code>cxterm-big5</code> &ndash; Chinese (Trad., Big5)
</p>
</li>
<li>
<p>
<code>cxterm-gb</code> &ndash; Chinese (Simp., GB)
</p>
</li>
<li>
<p>
<code>cxterm-ks</code> &ndash; Chinese (KS)
</p>
</li>
<li>
<p>
<code>cxterm-jis</code> &ndash; Japanese
</p>
</li>
<li>
<p>
<code>hanterm-classic</code> &ndash; Korean (Hangul)
</p>
</li>
<li>
<p>
<code>hanterm-xf</code> &ndash; Korean (Hangul)
</p>
</li>
<li>
<p>
<code>hztty</code> &ndash; Chinese (GB, Big5, zW/HZ)
</p>
</li>
</ul>

<p>
For <code>kterm</code> (and possibly others), you may want to activate XIM
through menu after Ctrl-middle-click mouse action.
</p>

<hr>

<h3><a name="s-x-utf-8"></a>9.7.12 UTF-8 support for the X terminal emulator</h3>

<p>
UTF-8 support for X terminal emulator is provided by the <code>uxterm</code>
program in the <code>xterm</code> package for XFree86 4.x.  It enables support
for all languages.  It is a wrapper around the <code>xterm(1)</code> program
that invokes the latter program with the &quot;UXTerm&quot; X resource class
set.
</p>

<p>
For example, to enable nice large display of English, Russian, Japanese,
Chinese, and Korean characters, add following to your
<code>~/.Xresources</code> after installing all the pertinent fonts:
</p>

<pre>
     ! set large font
     UXTerm*font: -misc-fixed-medium-r-normal-*-18-120-100-100-c-90-iso10646-1
     ! Use XIM for Japanese
     *inputMethod: kinput2
</pre>

<p>
Then run <samp>xrdb -merge ~/.Xresources</samp> to update X resources as
described in <a href="#s-xresources">X resources, Section 9.4.10</a>.
</p>

<p>
Although most of the popular console program packages such as <code>vim</code>,
<code>mutt</code>, and <code>emacs</code> have been made compatible with UTF-8
recently (Woody-Sarge).  Program such as <code>mc</code> still is not UTF-8
compatible but simply 8-bit clean.  If you are editing 7 bit ASCII part of
unknown or mixed encoding file, it is safer to use the locale unaware 8-bit
clean editor.
</p>

<p>
See <code><a href="http://www.tldp.org/HOWTO/Unicode-HOWTO.html">The Unicode
HOWTO</a></code>.
</p>

<hr>

<h3><a name="s-fb-utf-8"></a>9.7.13 Example for UTF-8 in a framebuffer console</h3>

<p>
UTF-8 support on a FB console is provided by <code>bterm</code> used in the
<code>debian-installer</code>.
</p>

<hr>

<h3><a name="s-beyond-locale"></a>9.7.14 Beyond locales</h3>

<p>
When you are first setting the system up for a <strong>national language
environment</strong>, please consider using <code>tasksel</code> or
<code>aptitude</code> to find out what packages are selected by choosing the
corresponding language environment task.  The package choice made is useful
even for a multilingual setup.  If you encounter any package dependency
conflicts during the install to your carefully configured system, avoid
installing any software that conflicts with the existing system.  You may have
to use <code>update-alternative</code> to regain the original state for some
commands since a newly installed one may have higher priority than existing
ones.
</p>

<p>
Newer major programs are using glibc 2.2 and are mostly internationalized.  So
a specially localized version such as <code>jvim</code> for Vim may not be
needed as its functionality is offered by <code>vim</code> version 6.0 in X.
In reality, it is still somewhat rough-edged.  Since <code>jvim</code> has a
version compiled with direct Japanese input method (<code>canna</code>) support
even in the console and addresses many other Japanese-specific issues maturely,
you may still want it :-)
</p>

<p>
Programs may need to be configured beyond <samp>locale</samp> configuration to
enable a comfortable working environment.  The <code>language-env</code>
package and its command <code>set-language-env</code> greatly eases this
process.
</p>

<p>
Also see the internationalization document, <code><a
href="http://www.debian.org/doc/manuals/intro-i18n/">Introduction to
i18n</a></code>.  It is aimed at developers but is also useful for system
administrators.
</p>

<hr>

<h2><a name="s-m17n"></a>9.8 Multilingualization (m17n)</h2>

<p>
<a href="#s-l10n">Localization (l10n), Section 9.7</a> enabled by
<code>language-env</code> package and alike are aimed to achieve monolingual
localization.  These packages also use traditional encodings as the choice for
the text encoding.  You cannot mix French and Japanese text in such environment
since they use incompatible ISO-8859-1 and EUC-JP encodings respectively.
</p>

<p>
You can obtain multilingualized UTF-8 Desktop using Gnome and KDE programs
started under one of the available UTF-8 locales.  (Sarge) In such environment,
you can mix English, Chinese, Russian, and Japanese characters under UTF-8
compliant softwares.
</p>

<p>
Under such environment, new multilingualized input method (IM) using
<code>scim</code> is preferred.  IM offered by the <code>scim</code> is turned
on and off by typing Ctrl-Space together.  The input conversion engine can be
switched by clicking small SCIM panel.
</p>

<p>
<code>vim</code> offers the multilingualized environment and can handle both
UTF-8 and conventionally encoded files (EUC-JP, ISO-8859-1, ...) when it is run
under the UTF-8 console such as <code>gnome-teminal</code>.  See vim help
message with pressing [Esc] and typing <samp>:help mbyte.txt</samp>.
</p>

<hr>

<p>
[ <a href="ch-tips.en.html">previous</a> ]
[ <a href="index.en.html#contents">Contents</a> ]
[ <a href="ch-preface.en.html">1</a> ]
[ <a href="ch-system.en.html">2</a> ]
[ <a href="ch-install.en.html">3</a> ]
[ <a href="ch-tutorial.en.html">4</a> ]
[ <a href="ch-woody.en.html">5</a> ]
[ <a href="ch-package.en.html">6</a> ]
[ <a href="ch-kernel.en.html">7</a> ]
[ <a href="ch-tips.en.html">8</a> ]
[ 9 ]
[ <a href="ch-gateway.en.html">10</a> ]
[ <a href="ch-edit.en.html">11</a> ]
[ <a href="ch-vcs.en.html">12</a> ]
[ <a href="ch-program.en.html">13</a> ]
[ <a href="ch-gnupg.en.html">14</a> ]
[ <a href="ch-support.en.html">15</a> ]
[ <a href="ap-appendix.en.html">A</a> ]
[ <a href="ch-gateway.en.html">next</a> ]
</p>

<hr>

<p>
Debian Reference
</p>

<address>
CVS, Mon Jun 16 21:20:26 UTC 2008<br>
<br>
Osamu Aoki <code><a href="mailto:osamu#at#debian.org">osamu#at#debian.org</a></code><br>
<a href="ap-appendix.en.html#s-authors">Authors, Section A.1</a><br>
<br>
</address>
<hr>

</body>

</html>

