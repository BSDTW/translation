<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Appendix C. MySQL Change History</title><link rel="stylesheet" href="mysql-html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="up" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="prev" href="error-handling.html" title="Appendix B. Errors, Error Codes, and Common Problems"><link rel="next" href="restrictions.html" title="Appendix D. Restrictions and Limits"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Appendix C. MySQL Change History</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="error-handling.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="restrictions.html">Next</a></td></tr></table><hr></div><div class="appendix" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="news"></a>Appendix C. MySQL Change History</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="news.html#news-5-1-x">C.1. Changes in release 5.1.x (Development)</a></span></dt><dd><dl><dt><span class="section"><a href="news.html#news-5-1-28">C.1.1. Changes in  MySQL 5.1.28 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-27">C.1.2. Changes in  MySQL 5.1.27 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-26">C.1.3. Changes in  MySQL 5.1.26 (30 June 2008)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-25">C.1.4. Changes in  MySQL 5.1.25 (28 May 2008)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-24-maria">C.1.5. Changes in  MySQL 5.1.24-maria (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-24">C.1.6. Changes in  MySQL 5.1.24 (08 April 2008)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-23">C.1.7. Changes in  MySQL 5.1.23 (29 January 2008)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-22">C.1.8. Changes in  MySQL 5.1.22 (24 September 2007: Release Candidate)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-21">C.1.9. Changes in  MySQL 5.1.21 (16 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-20">C.1.10. Changes in  MySQL 5.1.20 (25 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-19">C.1.11. Changes in  MySQL 5.1.19 (25 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-18">C.1.12. Changes in  MySQL 5.1.18 (08 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-17">C.1.13. Changes in  MySQL 5.1.17 (04 April 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-16">C.1.14. Changes in  MySQL 5.1.16 (26 February 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-15">C.1.15. Changes in  MySQL 5.1.15 (25 January 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-14">C.1.16. Changes in  MySQL 5.1.14 (05 December 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-13">C.1.17. Changes in  MySQL 5.1.13 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-12">C.1.18. Changes in  MySQL 5.1.12 (24 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-11">C.1.19. Changes in  MySQL 5.1.11 (26 May 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-10">C.1.20. Changes in  MySQL 5.1.10 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-9">C.1.21. Changes in  MySQL 5.1.9 (12 April 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-8">C.1.22. Changes in  MySQL 5.1.8 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-7">C.1.23. Changes in  MySQL 5.1.7 (27 February 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-6">C.1.24. Changes in  MySQL 5.1.6 (01 February 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-5">C.1.25. Changes in  MySQL 5.1.5 (10 January 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-4">C.1.26. Changes in  MySQL 5.1.4 (21 December 2005)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-3">C.1.27. Changes in  MySQL 5.1.3 (29 November 2005)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-2">C.1.28. Changes in  MySQL 5.1.2 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-1">C.1.29. Changes in  MySQL 5.1.1 (Not released)</a></span></dt></dl></dd><dt><span class="section"><a href="news.html#myodbc-news">C.2. MySQL Connector/ODBC (MyODBC) Change History</a></span></dt><dd><dl><dt><span class="section"><a href="news.html#myodbc-news-5-1-5">C.2.1. Changes in  MySQL Connector/ODBC 5.1.5 (18 August 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-1-4">C.2.2. Changes in  MySQL Connector/ODBC 5.1.4 (15 April 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-1-3">C.2.3. Changes in  MySQL Connector/ODBC 5.1.3 (26 March 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-1-2">C.2.4. Changes in  MySQL Connector/ODBC 5.1.2 (13 February 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-1-1">C.2.5. Changes in  MySQL Connector/ODBC 5.1.1 (13 December 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-1-0">C.2.6. Changes in  MySQL Connector/ODBC 5.1.0 (10 September 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-12">C.2.7. Changes in  MySQL Connector/ODBC 5.0.12 (Never released)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-11">C.2.8. Changes in  MySQL Connector/ODBC 5.0.11 (31 January 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-10">C.2.9. Changes in  MySQL Connector/ODBC 5.0.10 (14 December 2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-9">C.2.10. Changes in  MySQL Connector/ODBC 5.0.9 (22 November 2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-8">C.2.11. Changes in  MySQL Connector/ODBC 5.0.8 (17 November 2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-7">C.2.12. Changes in  MySQL Connector/ODBC 5.0.7 (08 November 2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-6">C.2.13. Changes in  MySQL Connector/ODBC 5.0.6 (03 November 2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-5">C.2.14. Changes in  MySQL Connector/ODBC 5.0.5 (17 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-3">C.2.15. Changes in Connector/ODBC 5.0.3 (Connector/ODBC 5.0 Alpha 3) (20 June
      2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-2">C.2.16. Changes in Connector/ODBC 5.0.2 (Never released)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-1">C.2.17. Changes in Connector/ODBC 5.0.1 (Connector/ODBC 5.0 Alpha 2) (05 June
      2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-26">C.2.18. Changes in  MySQL Connector/ODBC 3.51.26 (07 July 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-25">C.2.19. Changes in  MySQL Connector/ODBC 3.51.25 (11 April 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-24">C.2.20. Changes in  MySQL Connector/ODBC 3.51.24 (14 March 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-23">C.2.21. Changes in  MySQL Connector/ODBC 3.51.23 (09 January 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-22">C.2.22. Changes in  MySQL Connector/ODBC 3.51.22 (13 November 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-21">C.2.23. Changes in  MySQL Connector/ODBC 3.51.21 (08 October 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-20">C.2.24. Changes in  MySQL Connector/ODBC 3.51.20 (10 September 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-19">C.2.25. Changes in  MySQL Connector/ODBC 3.51.19 (10 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-18">C.2.26. Changes in  MySQL Connector/ODBC 3.51.18 (08 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-17">C.2.27. Changes in  MySQL Connector/ODBC 3.51.17 (14 July 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-16">C.2.28. Changes in  MySQL Connector/ODBC 3.51.16 (14 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-15">C.2.29. Changes in  MySQL Connector/ODBC 3.51.15 (07 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-14">C.2.30. Changes in  MySQL Connector/ODBC 3.51.14 (08 March 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-13">C.2.31. Changes in  MySQL Connector/ODBC 3.51.13 (Never released)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-12">C.2.32. Changes in  MySQL Connector/ODBC 3.51.12 (11 Febrauary 2005)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-11">C.2.33. Changes in  MySQL Connector/ODBC 3.51.11 (28 January 2005)</a></span></dt></dl></dd><dt><span class="section"><a href="news.html#connector-net-news">C.3. MySQL Connector/NET Change History</a></span></dt><dd><dl><dt><span class="section"><a href="news.html#connector-net-news-5-3-0">C.3.1. Changes in  MySQL Connector/NET 5.3.0 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-3">C.3.2. Changes in  MySQL Connector/NET 5.2.3 (19 August 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-2">C.3.3. Changes in  MySQL Connector/NET 5.2.2 (12 May 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-1">C.3.4. Changes in  MySQL Connector/NET 5.2.1 (27 February 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-0">C.3.5. Changes in  MySQL Connector/NET 5.2.0 (11 February 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-7">C.3.6. Changes in  MySQL Connector/NET 5.1.7 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-6">C.3.7. Changes in  MySQL Connector/NET 5.1.6 (12 May 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-5">C.3.8. Changes in  MySQL Connector/NET 5.1.5 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-4">C.3.9. Changes in  MySQL Connector/NET 5.1.4 (20 November 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-3">C.3.10. Changes in  MySQL Connector/NET 5.1.3 (21 September 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-2">C.3.11. Changes in  MySQL Connector/NET 5.1.2 (18 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-1">C.3.12. Changes in  MySQL Connector/NET 5.1.1 (23 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-0">C.3.13. Changes in  MySQL Connector/NET 5.1.0 (01 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-10">C.3.14. Changes in  MySQL Connector/NET 5.0.10 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-9">C.3.15. Changes in  MySQL Connector/NET 5.0.9 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-8">C.3.16. Changes in  MySQL Connector/NET 5.0.8 (21 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-7">C.3.17. Changes in  MySQL Connector/NET 5.0.7 (18 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-6">C.3.18. Changes in  MySQL Connector/NET 5.0.6 (22 March 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-5">C.3.19. Changes in  MySQL Connector/NET 5.0.5 (07 March 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-4">C.3.20. Changes in  MySQL Connector/NET 5.0.4 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-3">C.3.21. Changes in  MySQL Connector/NET 5.0.3 (05 January 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-2">C.3.22. Changes in  MySQL Connector/NET 5.0.2 (06 November 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-1">C.3.23. Changes in  MySQL Connector/NET 5.0.1 (01 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-0">C.3.24. Changes in  MySQL Connector/NET 5.0.0 (08 August 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-11">C.3.25. Changes in  MySQL Connector/NET 1.0.11 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-10">C.3.26. Changes in  MySQL Connector/NET 1.0.10 (24 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-9">C.3.27. Changes in  MySQL Connector/NET 1.0.9 (02 February 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-8">C.3.28. Changes in  MySQL Connector/NET 1.0.8 (20 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-7">C.3.29. Changes in  MySQL Connector/NET 1.0.7 (21 November 2005)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-6">C.3.30. Changes in  MySQL Connector/NET 1.0.6 (03 October 2005)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-5">C.3.31. Changes in  MySQL Connector/NET 1.0.5 (29 August 2005)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-4">C.3.32. Changes in  MySQL Connector/NET 1.0.4 (20 January 2005)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-3">C.3.33. Changes in  MySQL Connector/NET 1.0.3 (12 October 2004)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-2">C.3.34. Changes in  MySQL Connector/NET 1.0.2 (15 November 2004)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-1">C.3.35. Changes in  MySQL Connector/NET 1.0.1 (27 October 2004)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-0">C.3.36. Changes in  MySQL Connector/NET 1.0.0 (01 September 2004)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-0-9-0">C.3.37. Changes in MySQL Connector/NET Version 0.9.0 (30 August 2004)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-76">C.3.38. Changes in MySQL Connector/NET Version 0.76</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-75">C.3.39. Changes in MySQL Connector/NET Version 0.75</a></span></dt><dt><span class="section"><a href="news.html#connector-net-0-74">C.3.40. Changes in MySQL Connector/NET Version 0.74</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-71">C.3.41. Changes in MySQL Connector/NET Version 0.71</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-70">C.3.42. Changes in MySQL Connector/NET Version 0.70</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-68">C.3.43. Changes in MySQL Connector/NET Version 0.68</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-65">C.3.44. Changes in MySQL Connector/NET Version 0.65</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-60">C.3.45. Changes in MySQL Connector/NET Version 0.60</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-50">C.3.46. Changes in MySQL Connector/NET Version 0.50</a></span></dt></dl></dd><dt><span class="section"><a href="news.html#vstudio-plugin-news">C.4. MySQL Visual Studio Plugin Change History</a></span></dt><dd><dl><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-3">C.4.1. Changes in  MySQL Visual Studio Plugin 1.0.3 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-2">C.4.2. Changes in  MySQL Visual Studio Plugin 1.0.2 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-1">C.4.3. Changes in  MySQL Visual Studio Plugin 1.0.1 (4 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-0">C.4.4. Changes in  MySQL Visual Studio Plugin 1.0.0 (4 October 2006)</a></span></dt></dl></dd><dt><span class="section"><a href="news.html#cj-news">C.5. MySQL Connector/J Change History</a></span></dt><dd><dl><dt><span class="section"><a href="news.html#cj-news-5-1">C.5.1. Changes in MySQL Connector/J 5.1.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0">C.5.2. Changes in MySQL Connector/J 5.0.x</a></span></dt><dt><span class="section"><a href="news.html#cg-news-3-1">C.5.3. Changes in MySQL Connector/J 3.1.x</a></span></dt><dt><span class="section"><a href="news.html#cg-news-3-0">C.5.4. Changes in MySQL Connector/J 3.0.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0">C.5.5. Changes in MySQL Connector/J 2.0.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-2b">C.5.6. Changes in MySQL Connector/J 1.2b (04 July 1999)</a></span></dt><dt><span class="section"><a href="news.html#cg-news-1-0">C.5.7. Changes in MySQL Connector/J 1.2.x and lower</a></span></dt></dl></dd><dt><span class="section"><a href="news.html#news-connector-mxj">C.6. MySQL Connector/MXJ Change History</a></span></dt><dd><dl><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-6">C.6.1. Changes in  MySQL Connector/MXJ 5.0.6 (04 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-5">C.6.2. Changes in  MySQL Connector/MXJ 5.0.5 (14 March 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-4">C.6.3. Changes in  MySQL Connector/MXJ 5.0.4 (28 January 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-3">C.6.4. Changes in  MySQL Connector/MXJ 5.0.3 (24 June 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-2">C.6.5. Changes in  MySQL Connector/MXJ 5.0.2 (15 June 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-1">C.6.6. Changes in  MySQL Connector/MXJ 5.0.1 (Never released)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-0">C.6.7. Changes in  MySQL Connector/MXJ 5.0.0 (09 December 2005)</a></span></dt></dl></dd><dt><span class="section"><a href="news.html#mysql-proxy-news">C.7. MySQL Proxy Change History</a></span></dt><dd><dl><dt><span class="section"><a href="news.html#mysql-proxy-news-0-6-0">C.7.1. Changes in  MySQL Proxy 0.6.0 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-5-1">C.7.2. Changes in  MySQL Proxy 0.5.1 (30 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-5-0">C.7.3. Changes in  MySQL Proxy 0.5.0 (19 June 2007)</a></span></dt></dl></dd></dl></div><a class="indexterm" name="id2688061"></a><a class="indexterm" name="id2688070"></a><a class="indexterm" name="id2688082"></a><p>
    This appendix lists the changes from version to version in the MySQL
    source code through the latest version of MySQL 5.1,
    which is currently MySQL 5.1.28. Starting with MySQL 5.0,
    we began offering a new version of the Manual for each new series of
    MySQL releases (5.0, 5.1, and so on). For information about changes
    in previous release series of the MySQL database software, see the
    corresponding version of this Manual. For information about legacy
    versions of the MySQL software through the 4.1 series, see
    <em class="citetitle">MySQL 3.23, 4.0, 4.1 Reference Manual</em>.
  </p><p>
    We update this section as we add new features in the
    5.1 series, so that everybody can follow the
    development process.
  </p><p>
    Note that we tend to update the manual at the same time we make
    changes to MySQL. If you find a recent version of MySQL listed here
    that you can't find on our download page
    (<a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a>), it means that the version has
    not yet been released.
  </p><p>
    The date mentioned with a release version is the date of the last
    Bazaar ChangeSet on which the release was based, not the date when
    the packages were made available. The binaries are usually made
    available a few days after the date of the tagged ChangeSet, because
    building and testing all packages takes some time.
  </p><p>
    The manual included in the source and binary distributions may not
    be fully accurate when it comes to the release changelog entries,
    because the integration of the manual happens at build time. For the
    most up-to-date release changelog, please refer to the online
    version instead.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="news-5-1-x"></a>C.1. Changes in release 5.1.x (Development)</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#news-5-1-28">C.1.1. Changes in  MySQL 5.1.28 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-27">C.1.2. Changes in  MySQL 5.1.27 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-26">C.1.3. Changes in  MySQL 5.1.26 (30 June 2008)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-25">C.1.4. Changes in  MySQL 5.1.25 (28 May 2008)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-24-maria">C.1.5. Changes in  MySQL 5.1.24-maria (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-24">C.1.6. Changes in  MySQL 5.1.24 (08 April 2008)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-23">C.1.7. Changes in  MySQL 5.1.23 (29 January 2008)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-22">C.1.8. Changes in  MySQL 5.1.22 (24 September 2007: Release Candidate)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-21">C.1.9. Changes in  MySQL 5.1.21 (16 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-20">C.1.10. Changes in  MySQL 5.1.20 (25 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-19">C.1.11. Changes in  MySQL 5.1.19 (25 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-18">C.1.12. Changes in  MySQL 5.1.18 (08 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-17">C.1.13. Changes in  MySQL 5.1.17 (04 April 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-16">C.1.14. Changes in  MySQL 5.1.16 (26 February 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-15">C.1.15. Changes in  MySQL 5.1.15 (25 January 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-14">C.1.16. Changes in  MySQL 5.1.14 (05 December 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-13">C.1.17. Changes in  MySQL 5.1.13 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-12">C.1.18. Changes in  MySQL 5.1.12 (24 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-11">C.1.19. Changes in  MySQL 5.1.11 (26 May 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-10">C.1.20. Changes in  MySQL 5.1.10 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-9">C.1.21. Changes in  MySQL 5.1.9 (12 April 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-8">C.1.22. Changes in  MySQL 5.1.8 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-7">C.1.23. Changes in  MySQL 5.1.7 (27 February 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-6">C.1.24. Changes in  MySQL 5.1.6 (01 February 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-5">C.1.25. Changes in  MySQL 5.1.5 (10 January 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-4">C.1.26. Changes in  MySQL 5.1.4 (21 December 2005)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-3">C.1.27. Changes in  MySQL 5.1.3 (29 November 2005)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-2">C.1.28. Changes in  MySQL 5.1.2 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#news-5-1-1">C.1.29. Changes in  MySQL 5.1.1 (Not released)</a></span></dt></dl></div><a class="indexterm" name="id2688168"></a><p>
    An overview of which features were added in MySQL 5.1 can be found
    here: <a href="introduction.html#mysql-nutshell" title="1.5.1. What's New in MySQL 5.1">Section 1.5.1, “What's New in MySQL 5.1”</a>.
  </p><p>
    For a full list of changes, please refer to the changelog sections
    for each individual 5.1.x release.
  </p><p>
    For changes relating to MySQL Cluster NDB 6.x, see
    <a href="mysql-cluster.html#mysql-cluster-news" title="20.17. Changes in MySQL Cluster 6.x">Section 20.17, “Changes in MySQL Cluster 6.x”</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-28"></a>C.1.1. Changes in  MySQL 5.1.28 (Not yet released)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Enhancement</strong></span>: 
        The server consumed excess memory while parsing statements with
        hundreds or thousands of nested boolean conditions (such as
        <code class="literal">OR (OR ... (OR ... ))</code>). This could lead to a
        server crash or incorrect statement execution, or cause other
        client statements to fail due to lack of memory. The latter
        result constitutes a denial of service.
       (<a href="http://bugs.mysql.com/38296" target="_top">Bug#38296</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        An additional correction to the original MySQL 5.1.23 fix was
        made to normalize directory names before adding them to the list
        of directories. This prevents <code class="filename">/etc/</code> and
        <code class="filename">/etc</code> from being considered different, for
        example.
       (<a href="http://bugs.mysql.com/20748" target="_top">Bug#20748</a>)</p><p>See also <a href="http://bugs.mysql.com/38180" target="_top">Bug#38180</a></p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        When a partitioned table had a <code class="literal">TIMESTAMP</code>
        column defined with <code class="literal">CURRENT_TIMESTAMP</code> as the
        default but with no <code class="literal">ON UPDATE</code> clause, the
        column's value was incorrectly set to
        <code class="literal">CURRENT_TIMESTAMP</code> when updating across
        partitions.
       (<a href="http://bugs.mysql.com/38272" target="_top">Bug#38272</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        A <code class="literal">LIST</code> partitioned <code class="literal">MyISAM</code>
        table returned erroneous results when an index was present on a
        column in the <code class="literal">WHERE</code> clause and <code class="literal">NOT
        IN</code> was used on that column.
      </p><p>
        Searches using the index were also much slower then if the index
        were not present.
       (<a href="http://bugs.mysql.com/35931" target="_top">Bug#35931</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <code class="literal">SELECT COUNT(*)</code> was not correct for some
        partitioned tables using a storage engine that did not support
        <code class="literal">HA_STATS_RECORDS_IS_EXACT</code>. Tables using the
        <code class="literal">ARCHIVE</code> storage engine were known to be
        affected.
      </p><p>
        This was because <code class="literal">ha_partition::records()</code> was
        not implemented, and so the default
        <code class="literal">handler::records()</code> was used in its place.
        However, this is not correct behavior if the storage engine does
        not support <code class="literal">HA_STATS_RECORDS_IS_EXACT</code>.
      </p><p>
        The solution was to implement
        <code class="literal">ha_partition::records()</code> as a wrapper around
        the underlying partition records.
      </p><p>
        As a result of this fix, the rows column in the output of
        <code class="literal">EXPLAIN PARTITIONS</code> now includes the total
        number of records in the partitioned table.
       (<a href="http://bugs.mysql.com/35745" target="_top">Bug#35745</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        When one user was in the midst of a transaction on a partitioned
        table, a second user performing an <code class="literal">ALTER
        TABLE</code> on this table caused the server to hang.
       (<a href="http://bugs.mysql.com/34604" target="_top">Bug#34604</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Some kinds of internal errors (such as <span class="errortext">Out of
        stack</span>) cuased the server to crash.
       (<a href="http://bugs.mysql.com/37150" target="_top">Bug#37150</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Row-based replication did not correctly copy
        <code class="literal">TIMESTAMP</code> values from a big-endian storage
        engine to a little-endian storage engine.
       (<a href="http://bugs.mysql.com/37076" target="_top">Bug#37076</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <code class="literal">INSTALL PLUGIN</code> and <code class="literal">UNINSTALL
        PLUGIN</code> caused row-based replication to fail.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          These statements are not replicated; howver, when using
          row-based logging, the changes they introduce in mysql system
          tables are written to the binary log.
        </p></div><p>(<a href="http://bugs.mysql.com/35807" target="_top">Bug#35807</a>)</p></li><li><p>
        Server-side cursors were not initialized properly, which could
        cause a server crash.
       (<a href="http://bugs.mysql.com/38486" target="_top">Bug#38486</a>)</p></li><li><p>
        The fix for <a href="http://bugs.mysql.com/20748" target="_top">Bug#20748</a> caused a problem such that on Unix, MySQL
        programs looked for options in <code class="filename">~/my.cnf</code>
        rather than the standard location of
        <code class="filename">~/.my.cnf</code>.
       (<a href="http://bugs.mysql.com/38180" target="_top">Bug#38180</a>)</p></li><li><p>
        If the table definition cache contained tables with many
        <code class="literal">BLOB</code> columns, much memory could be allocated
        to caching <code class="literal">BLOB</code> values. Now a size limit on
        the cached <code class="literal">BLOB</code> values is enforced.
       (<a href="http://bugs.mysql.com/38002" target="_top">Bug#38002</a>)</p></li><li><p>
        For <code class="literal">InnoDB</code> tables, <code class="literal">ORDER BY ...
        DESC</code> sometimes returned results in ascending order.
       (<a href="http://bugs.mysql.com/37830" target="_top">Bug#37830</a>)</p></li><li><p>
        The server returned unexpected results if a right side of the
        <code class="literal">NOT IN</code> clause consisted of the
        <code class="literal">NULL</code> value and some constants of the same
        type. For example, this query might return 3, 4, 5, and so forth
        if a table contained those values:
      </p><pre class="programlisting">SELECT * FROM t WHERE NOT t.id IN (NULL, 1, 2);
</pre><p>(<a href="http://bugs.mysql.com/37761" target="_top">Bug#37761</a>)</p></li><li><p>
        Setting the session value of the
        <code class="literal">innodb_table_locks</code> system variable caused a
        server crash.
       (<a href="http://bugs.mysql.com/37669" target="_top">Bug#37669</a>)</p></li><li><p>
        Nesting of <a href="functions.html#function_if"><code class="literal">IF()</code></a> inside of
        <a href="functions.html#function_sum"><code class="literal">SUM()</code></a> could cause an extreme
        server slowdown.
       (<a href="http://bugs.mysql.com/37662" target="_top">Bug#37662</a>)</p></li><li><p>
        Killing a query that used an <code class="literal">EXISTS</code> subquery
        as the argument to <a href="functions.html#function_sum"><code class="literal">SUM()</code></a> or
        <a href="functions.html#function_avg"><code class="literal">AVG()</code></a> caused a server crash.
       (<a href="http://bugs.mysql.com/37627" target="_top">Bug#37627</a>)</p></li><li><p>
        <span><strong class="command">myisamchk</strong></span> failed with an assertion error when
        analyzing a partitioned <code class="literal">MyISAM</code> table.
       (<a href="http://bugs.mysql.com/37537" target="_top">Bug#37537</a>)</p></li><li><p>
        Within stored programs or prepared statements,
        <a href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a> could return incorrect
        results due to improper initialization.
       (<a href="http://bugs.mysql.com/37337" target="_top">Bug#37337</a>)</p></li><li><p>
        The <code class="literal">max_length</code> result set metadata value was
        calculated incorrectly under some circumstances.
       (<a href="http://bugs.mysql.com/37301" target="_top">Bug#37301</a>)</p></li><li><p>
        If the length of a field was 3, internal
        <code class="literal">InnoDB</code> to integer type conversion didn't work
        on big-endian machines in the
        <code class="literal">row_search_autoinc_column()</code> function.
       (<a href="http://bugs.mysql.com/36793" target="_top">Bug#36793</a>)</p></li><li><p>
        <code class="literal">SELECT DISTINCT</code> from a simple view on an
        <code class="literal">InnoDB</code> table, where all selected columns
        belong to the same unique index key, returned incorrect results.
       (<a href="http://bugs.mysql.com/36632" target="_top">Bug#36632</a>)</p></li><li><p>
        <code class="literal">SHOW STATUS</code> took a lot of CPU time for
        calculating the value of the
        <code class="literal">Innodb_buffer_pool_pages_latched</code> status
        variable. Now this variable is calculated and included in the
        output of <code class="literal">SHOW STATUS</code> only when the
        <code class="literal">UNIV_DEBUG</code> symbol is defined at server build
        time.
       (<a href="http://bugs.mysql.com/36600" target="_top">Bug#36600</a>)</p></li><li><p>
        For <code class="literal">InnoDB</code> tables, the
        <code class="literal">DATA_FREE</code> column of the
        <code class="literal">INFORMATION_SCHEMA.TABLES</code> displayed free
        space in kilobytes rather than bytes. Now it displays bytes.
       (<a href="http://bugs.mysql.com/36278" target="_top">Bug#36278</a>)</p></li><li><p>
        The <span><strong class="command">mysql</strong></span> client failed to recognize comment
        lines consisting of <code class="literal">--</code> followed by a newline.
       (<a href="http://bugs.mysql.com/36244" target="_top">Bug#36244</a>)</p></li><li><p>
        The <a href="functions.html#function_uuid"><code class="literal">UUID()</code></a> function returned
        UUIDs with the wrong time; this was because the offset for the
        time part in UUIDs was miscalculated.
       (<a href="http://bugs.mysql.com/35848" target="_top">Bug#35848</a>)</p></li><li><p>
        The <span><strong class="command">configure</strong></span> script did not allow
        <code class="literal">utf8_hungarian_ci</code> to be specified as the
        default collation.
       (<a href="http://bugs.mysql.com/35808" target="_top">Bug#35808</a>)</p></li><li><p>
        On 64-bit systems, assigning values of 2
        <sup>63</sup> – 1 or larger to
        <code class="literal">key_buffer_size</code> caused memory overruns.
       (<a href="http://bugs.mysql.com/35616" target="_top">Bug#35616</a>)</p></li><li><p>
        For <code class="literal">InnoDB</code> tables, <code class="literal">REPLACE</code>
        statements used “<span class="quote">traditional</span>” style locking,
        regardless of the setting of
        <code class="literal">innodb_autoinc_lock_mode</code>. Now
        <code class="literal">REPLACE</code> works the same way as “<span class="quote">simple
        inserts</span>” instead of using the old locking algorithm.
        (<code class="literal">REPLACE</code> statements are treated in the same
        way as as <code class="literal">INSERT</code> statements.)
       (<a href="http://bugs.mysql.com/35602" target="_top">Bug#35602</a>)</p></li><li><p>
        Freeing of an internal parser stack during parsing of complex
        stored programs caused a server crash.
       (<a href="http://bugs.mysql.com/35577" target="_top">Bug#35577</a>, <a href="http://bugs.mysql.com/37269" target="_top">Bug#37269</a>, <a href="http://bugs.mysql.com/37728" target="_top">Bug#37728</a>)</p></li><li><p>
        <span><strong class="command">mysqlbinlog</strong></span> left temporary files on the disk
        after shutdown, leading to the pollution of the temporary
        directory, which eventually caused
        <span><strong class="command">mysqlbinlog</strong></span> to fail. This caused problems in
        testing and other situations where
        <span><strong class="command">mysqlbinlog</strong></span> might be invoked many times in a
        relatively short period of time.
       (<a href="http://bugs.mysql.com/35543" target="_top">Bug#35543</a>)</p></li><li><p>
        Index scans performed with the <code class="literal">sort_union()</code>
        access method returned bad data when the
        <code class="literal">sort_buffer_size</code> limit was reached.
       (<a href="http://bugs.mysql.com/35478" target="_top">Bug#35478</a>)</p></li><li><p>
        <code class="literal">MyISAM</code> recovery enabled with the
        <code class="option">--myisam-recover</code> option did not work for
        partitioned <code class="literal">MyISAM</code> tables.
       (<a href="http://bugs.mysql.com/35161" target="_top">Bug#35161</a>)</p></li><li><p>
        A significant slowdown occurred when many
        <code class="literal">SELECT</code> statements that return many rows from
        <code class="literal">InnoDB</code> tables were running concurrently.
       (<a href="http://bugs.mysql.com/34409" target="_top">Bug#34409</a>)</p></li><li><p>
        <span><strong class="command">mysql_install_db</strong></span> failed if the server was
        running with an SQL mode of <code class="literal">TRADITIONAL</code>. This
        program now resets the SQL mode internally to avoid this
        problem.
       (<a href="http://bugs.mysql.com/34159" target="_top">Bug#34159</a>)</p></li><li><p>
        Fast <code class="literal">ALTER TABLE</code> operations were not fast for
        columns that used multibyte character sets.
       (<a href="http://bugs.mysql.com/33873" target="_top">Bug#33873</a>)</p></li><li><p>
        The internal functions <code class="literal">my_getsystime()</code>,
        <code class="literal">my_micro_time()</code>, and
        <code class="literal">my_micro_time_and_time()</code> did not work
        correctly on Windows. One symptom was that uniqueness of
        <a href="functions.html#function_uuid"><code class="literal">UUID()</code></a> values could be
        compromised.
       (<a href="http://bugs.mysql.com/33748" target="_top">Bug#33748</a>)</p></li><li><p>
        Cached queries that used 256 or more tables were not properly
        cached, so that later query invalidation due to a
        <code class="literal">TRUNCATE TABLE</code> for one of the tables caused
        the server to hang.
       (<a href="http://bugs.mysql.com/33362" target="_top">Bug#33362</a>)</p></li><li><p>
        <span><strong class="command">mysql_upgrade</strong></span> attempted to use the
        <code class="filename">/proc</code> filesystem even on systems that do
        not have it.
       (<a href="http://bugs.mysql.com/31605" target="_top">Bug#31605</a>)</p></li><li><p>
        Several MySQL programs could fail if the <code class="literal">HOME</code>
        environment variable had an empty value.
       (<a href="http://bugs.mysql.com/30394" target="_top">Bug#30394</a>)</p></li><li><p>
        The Serbian translation for the
        <code class="literal">ER_INCORRECT_GLOBAL_LOCAL_VAR</code> error was
        corrected.
       (<a href="http://bugs.mysql.com/29738" target="_top">Bug#29738</a>)</p></li><li><p>
        The <span><strong class="command">BUILD/check-cpu</strong></span> build script failed if
        <span><strong class="command">gcc</strong></span> had a different name (such as
        <span><strong class="command">gcc.real</strong></span> on Debian).
       (<a href="http://bugs.mysql.com/27526" target="_top">Bug#27526</a>)</p></li><li><p>
        In some cases, the parser interpreted the <code class="literal">;</code>
        character as the end of input and misinterpreted stored program
        definitions.
       (<a href="http://bugs.mysql.com/26030" target="_top">Bug#26030</a>)</p></li><li><p>
        The <code class="literal">FLUSH PRIVILEGES</code> statement did not
        produce an error when it failed.
       (<a href="http://bugs.mysql.com/21226" target="_top">Bug#21226</a>)</p></li><li><p>
        After executing a prepared statement that accesses a stored
        function, the next execution would fail to find the function if
        the stored function cache was flushed in the meantime.
       (<a href="http://bugs.mysql.com/12093" target="_top">Bug#12093</a>, <a href="http://bugs.mysql.com/21294" target="_top">Bug#21294</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-27"></a>C.1.2. Changes in  MySQL 5.1.27 (Not released)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <span><strong class="command">mysqltest</strong></span> now installs signal handlers and
        generates a stack trace if it crashes.
       (<a href="http://bugs.mysql.com/37003" target="_top">Bug#37003</a>)</p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The fix for <a href="http://bugs.mysql.com/33812" target="_top">Bug#33812</a> had the side effect of causing the
        <span><strong class="command">mysql</strong></span> client not to be able to read some dump
        files produced with <span><strong class="command">mysqldump</strong></span>. To address
        this, that fix was reverted.
       (<a href="http://bugs.mysql.com/38158" target="_top">Bug#38158</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-26"></a>C.1.3. Changes in  MySQL 5.1.26 (30 June 2008)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Incompatible Change</strong></span>: 
        The <code class="literal">FEDERATED</code> storage engine is now disabled
        by default in binary distributions. The engine is still
        available and can be enabled by starting the server with the
        <code class="option">--federated</code> option.
       (<a href="http://bugs.mysql.com/37069" target="_top">Bug#37069</a>)</p></li><li><p>
        <span><strong class="command">mysqltest</strong></span> was changed to be more robust in
        the case of a race condition that can occur for rapid
        disconnect/connect sequences with the server. The account used
        by <span><strong class="command">mysqltest</strong></span> could reach its allowed
        simultaneous-sessions user limit if the connect attempt occurred
        before the server had fully processed the preceding disconnect.
        <span><strong class="command">mysqltest</strong></span> now checks specificaly for a
        user-limits error when it connects; if that error occurs, it
        delays briefly before retrying.
       (<a href="http://bugs.mysql.com/23921" target="_top">Bug#23921</a>)</p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Replication</strong></span>: 
        Performing an insert on a table having an
        <code class="literal">AUTO_INCREMENT</code> column and an
        <code class="literal">INSERT</code> trigger that was being replicated from
        a master running MySQL 5.0 or any version of MySQL 5.1 up to and
        including MySQL 5.1.11 to a slave running MySQL 5.1.12 or later
        caused the replication slave to crash.
       (<a href="http://bugs.mysql.com/36443" target="_top">Bug#36443</a>)</p><p>See also <a href="http://bugs.mysql.com/33029" target="_top">Bug#33029</a></p></li><li><p>
        Some binary distributions had a duplicate “<span class="quote">-64bit</span>”
        suffix in the filename.
       (<a href="http://bugs.mysql.com/37623" target="_top">Bug#37623</a>)</p></li><li><p>
        Row-based replication broke for <code class="literal">utf8</code>
        <code class="literal">CHAR</code> columns longer than 85 characters.
       (<a href="http://bugs.mysql.com/37426" target="_top">Bug#37426</a>)</p></li><li><p>
        <code class="literal">NOT IN</code> subqueries that selected
        <a href="functions.html#function_min"><code class="literal">MIN()</code></a> or
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a> values but produced an
        empty result could cause a server crash.
       (<a href="http://bugs.mysql.com/37004" target="_top">Bug#37004</a>)</p></li><li><p>
        <code class="filename">ha_innodb.so</code> was incorrectly installed in
        the <code class="filename">lib/mysql</code> directory rather than in
        <code class="filename">lib/mysql/plugin</code>.
       (<a href="http://bugs.mysql.com/36434" target="_top">Bug#36434</a>)</p></li><li><p>
        An empty bit-string literal (<code class="literal">b''</code>) caused a
        server crash. Now the value is parsed as an empty bit value
        (which is treated as an empty string in string context or 0 in
        numeric context).
       (<a href="http://bugs.mysql.com/35658" target="_top">Bug#35658</a>)</p></li><li><p>
        The code for detecting a byte order mark (BOM) caused
        <span><strong class="command">mysql</strong></span> to crash for empty input.
       (<a href="http://bugs.mysql.com/35480" target="_top">Bug#35480</a>)</p></li><li><p>
        The <span><strong class="command">mysql</strong></span> client incorrectly parsed
        statements containing the word “<span class="quote">delimiter</span>” in
        mid-statement.
      </p><p>
        The fix for this bug had the side effect of causing the problem
        reported in <a href="http://bugs.mysql.com/38158" target="_top">Bug#38158</a>, so it was reverted in MySQL 5.1.27.
       (<a href="http://bugs.mysql.com/33812" target="_top">Bug#33812</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-25"></a>C.1.4. Changes in  MySQL 5.1.25 (28 May 2008)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        A change has been made to the way that the server handles
        prepared statements. This affects prepared statements processed
        at the SQL level (using the <code class="literal">PREPARE</code>
        statement) and those processed using the binary client-server
        protocol (using the
        <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> C API
        function).
      </p><p>
        Previously, changes to metadata of tables or views referred to
        in a prepared statement could cause a server crash when the
        statement was next executed, or perhaps an error at execute time
        with a crash occurring later. For example, this could happen
        after dropping a table and recreating it with a different
        definition.
      </p><p>
        Now metadata changes to tables or views referred to by prepared
        statements are detected and cause automatic repreparation of the
        statement when it is next executed. Metadata changes occur for
        DDL statements such as those that create, drop, alter, rename,
        or truncate tables, or that analyze, optimize, or repair tables.
        Repreparation also occurs after referenced tables or views are
        flushed from the table definition cache, either implicitly to
        make room for new entries in the cache, or explicitly due to
        <code class="literal">FLUSH TABLES</code>.
      </p><p>
        Repreparation is automatic, but to the extent that it occurs,
        performance of prepared statements is diminished.
      </p><p>
        Table content changes (for example, with
        <code class="literal">INSERT</code> or <code class="literal">UPDATE</code>) do not
        cause repreparation, nor do <code class="literal">SELECT</code>
        statements.
      </p><p>
        An incompatibility with previous versions of MySQL is that a
        prepared statement may now return a different set of columns or
        different column types from one execution to the next. For
        example, if the prepared statement is <code class="literal">SELECT * FROM
        t1</code>, altering <code class="literal">t1</code> to contain a
        different number of columns causes the next execution to return
        a number of columns different from the previous execution.
      </p><p>
        Older versions of the client library cannot handle this change
        in behavior. For applications that use prepared statements with
        the new server, an upgrade to the new client library is strongly
        recommended.
      </p><p>
        Along with this change to statement repreparation, the default
        value of the <code class="literal">table_definition_cache</code> system
        variable has been increased from 128 to 256. The purpose of this
        increase is to lessen the chance that prepared statements will
        need repreparation due to referred-to tables/views having been
        flushed from the cache to make room for new entries.
      </p><p>
        A new status variable, <code class="literal">Com_stmt_reprepare</code>,
        has been introduced to track the number of repreparations.
       (<a href="http://bugs.mysql.com/27420" target="_top">Bug#27420</a>, <a href="http://bugs.mysql.com/27430" target="_top">Bug#27430</a>, <a href="http://bugs.mysql.com/27690" target="_top">Bug#27690</a>)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        Some changes were made to <code class="literal">CHECK TABLE ... FOR
        UPGRADE</code> and <code class="literal">REPAIR TABLE</code> with
        respect to detection and handling of tables with incompatible
        <code class="filename">.frm</code> files (files created with a different
        version of the MySQL server). These changes also affect
        <span><strong class="command">mysqlcheck</strong></span> because that program uses
        <code class="literal">CHECK TABLE</code> and <code class="literal">REPAIR</code>
        table, and thus also <span><strong class="command">mysql_upgrade</strong></span> because
        that program invokes <span><strong class="command">mysqlcheck</strong></span>.
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            If your table was created by a different version of the
            MySQL server than the one you are currently running,
            <code class="literal">CHECK TABLE ... FOR UPGRADE</code> indicates
            that the table has an <code class="filename">.frm</code> file with an
            incompatible version. In this case, the result set returned
            by <code class="literal">CHECK TABLE</code> contains a line with a
            <code class="literal">Msg_type</code> value of
            <code class="literal">error</code> and a <code class="literal">Msg_text</code>
            value of <code class="literal">Table upgrade required. Please do "REPAIR
            TABLE `<em class="replaceable"><code>tbl_name</code></em>`" to fix
            it!</code>
          </p></li><li><p>
            <code class="literal">REPAIR TABLE</code> without
            <code class="literal">USE_FRM</code> upgrades the
            <code class="filename">.frm</code> file to the current version.
          </p></li><li><p>
            If you use <code class="literal">REPAIR TABLE ...USE_FRM</code> and
            your table was created by a different version of the MySQL
            server than the one you are currently running,
            <code class="literal">REPAIR TABLE</code> will not attempt to repair
            the table. In this case, the result set returned by
            <code class="literal">REPAIR TABLE</code> contains a line with a
            <code class="literal">Msg_type</code> value of
            <code class="literal">error</code> and a <code class="literal">Msg_text</code>
            value of <code class="literal">Failed repairing incompatible .FRM
            file</code>.
          </p><p>
            Previously, use of <code class="literal">REPAIR TABLE
            ...USE_FRM</code> with a table created by a different
            version of the MySQL server risked the loss of all rows in
            the table.
          </p></li></ul></div><p>(<a href="http://bugs.mysql.com/36055" target="_top">Bug#36055</a>)</p></li><li><p>
        <span><strong class="command">mysql_upgrade</strong></span> now has a
        <code class="option">--tmpdir</code> option to enable the location of
        temporary files to be specified.
       (<a href="http://bugs.mysql.com/36469" target="_top">Bug#36469</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> now adds the
        <code class="literal">LOCAL</code> qualifier to the <code class="literal">FLUSH
        TABLES</code> statement that is sent to the server when the
        <code class="option">--master-data</code> option is enabled. This prevents
        the <code class="literal">FLUSH TABLES</code> statement from replicating
        to slaves, which is disadvantageous because it would cause
        slaves to block while the statement executes.
       (<a href="http://bugs.mysql.com/35157" target="_top">Bug#35157</a>)</p><p>See also <a href="http://bugs.mysql.com/38303" target="_top">Bug#38303</a></p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Important Change</strong></span>: 
        The server no longer issues warnings for truncation of excess
        spaces for values inserted into <code class="literal">CHAR</code> columns.
        This reverts a change in the previous release that caused
        warnings to be issued.
       (<a href="http://bugs.mysql.com/30059" target="_top">Bug#30059</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <code class="literal">CREATE PROCEDURE</code> and <code class="literal">CREATE
        FUNCTION</code> statements containing extended comments were
        not written to the binary log correctly, causing parse errors on
        the slave.
       (<a href="http://bugs.mysql.com/36570" target="_top">Bug#36570</a>)</p><p>See also <a href="http://bugs.mysql.com/32575" target="_top">Bug#32575</a></p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When flushing tables, there was a slight chance that the flush
        occurred between the processing of one table map event and the
        next. Since the tables were opened one by one, subsequent
        locking of tables would cause the slave to crash. This problem
        was observed when replicating <code class="literal">NDBCLUSTER</code> or
        <code class="literal">InnoDB</code> tables, when executing multi-table
        updates, and when a trigger or a stored routine performed an
        (additional) insert on a table so that two tables were
        effectively being inserted into in the same statement.
       (<a href="http://bugs.mysql.com/36197" target="_top">Bug#36197</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <code class="literal">CREATE VIEW</code> statements containing extended
        comments were not written to the binary log correctly, causing
        parse errors on the slave. Now, all comments are stripped from
        such statements before being written to the binary log.
       (<a href="http://bugs.mysql.com/32575" target="_top">Bug#32575</a>)</p><p>See also <a href="http://bugs.mysql.com/36570" target="_top">Bug#36570</a></p></li><li><p>
        On Windows 64-bit systems, temporary variables of
        <code class="literal">long</code> types were used to store
        <code class="literal">ulong</code> values, causing key cache
        initialization to receive distorted parameters. The effect was
        that setting <code class="literal">key_buffer_size</code> to values of 2GB
        or more caused memory exhaustion to due allocation of too much
        memory.
       (<a href="http://bugs.mysql.com/36705" target="_top">Bug#36705</a>)</p></li><li><p>
        Multiple-table <code class="literal">UPDATE</code> statements that used a
        temporary table could fail to update all qualifying rows or fail
        with a spurious duplicate-key error.
       (<a href="http://bugs.mysql.com/36676" target="_top">Bug#36676</a>)</p></li><li><p>
        A <a href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a> match could return
        incorrect rows when the previous row matched the expression and
        used <a href="functions.html#function_concat"><code class="literal">CONCAT()</code></a> with an empty
        string.
       (<a href="http://bugs.mysql.com/36488" target="_top">Bug#36488</a>)</p></li><li><p>
        <span><strong class="command">mysqltest</strong></span> ignored the value of
        <code class="option">--tmpdir</code> in one place.
       (<a href="http://bugs.mysql.com/36465" target="_top">Bug#36465</a>)</p></li><li><p>
        When updating an existing instance (for example, from MySQL 5.0
        to 5.1, or 5.1 to 6.0), the Instance Configuration Wizard
        unnecessarily prompted for a <code class="literal">root</code> password
        when there was an existing <code class="literal">root</code> password.
       (<a href="http://bugs.mysql.com/36305" target="_top">Bug#36305</a>)</p></li><li><p>
        Conversion of a <code class="literal">FLOAT ZEROFILL</code> value to
        string could cause a server crash if the value was
        <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/36139" target="_top">Bug#36139</a>)</p></li><li><p>
        On Windows, the installer attempted to use JScript to determine
        whether the target data directory already existed. On Windows
        Vista x64, this resulted in an error because the installer was
        attempting to run the JScript in a 32-bit engine, which wasn't
        registered on Vista. The installer no longer uses JScript but
        instead relies on a native WiX command.
       (<a href="http://bugs.mysql.com/36103" target="_top">Bug#36103</a>)</p></li><li><p>
        <span><strong class="command">mysqltest</strong></span> was performing escape processing
        for the <code class="option">--replace_result</code> command, which it
        should not have been.
       (<a href="http://bugs.mysql.com/36041" target="_top">Bug#36041</a>)</p></li><li><p>
        An error in calculation of the precision of zero-length items
        (such as <code class="literal">NULL</code>) caused a server crash for
        queries that employed temporary tables.
       (<a href="http://bugs.mysql.com/36023" target="_top">Bug#36023</a>)</p></li><li><p>
        For <code class="literal">EXPLAIN EXTENDED</code>, execution of an
        uncorrelated <code class="literal">IN</code> subquery caused a crash if
        the subquery required a temporary table for its execution.
       (<a href="http://bugs.mysql.com/36011" target="_top">Bug#36011</a>)</p></li><li><p>
        The <code class="literal">MERGE</code> storage engine did a table scan for
        <code class="literal">SELECT COUNT(*)</code> statements when it could
        calculate the number of records from the underlying tables.
       (<a href="http://bugs.mysql.com/36006" target="_top">Bug#36006</a>)</p></li><li><p>
        The server crashed inside <code class="literal">NOT IN</code> subqueries
        with an impossible <code class="literal">WHERE</code> or
        <code class="literal">HAVING</code> clause, such as <code class="literal">NOT IN
        (SELECT ... FROM t1, t2, ... WHERE 0)</code>.
       (<a href="http://bugs.mysql.com/36005" target="_top">Bug#36005</a>)</p></li><li><p>
        The Event Scheduler was not designed to work under the embedded
        server. It is now disabled for the embedded server, and the
        <code class="literal">event_scheduler</code> system variable is not
        displayed.
       (<a href="http://bugs.mysql.com/35997" target="_top">Bug#35997</a>)</p></li><li><p>
        Grouping or ordering of long values in unindexed
        <code class="literal">BLOB</code> or <code class="literal">TEXT</code> columns with
        the <code class="literal">gbk</code> or <code class="literal">big5</code> character
        set crashed the server.
       (<a href="http://bugs.mysql.com/35993" target="_top">Bug#35993</a>)</p></li><li><p>
        <code class="literal">SET GLOBAL debug=''</code> resulted in a Valgrind
        warning in <code class="literal">DbugParse()</code>, which was reading
        beyond the end of the control string.
       (<a href="http://bugs.mysql.com/35986" target="_top">Bug#35986</a>)</p></li><li><p>
        The “<span class="quote">prefer full scan on clustered primary key over full
        scan of any secondary key</span>” optimizer rule introduced by
        <a href="http://bugs.mysql.com/26447" target="_top">Bug#26447</a> caused a performance regression for some queries, so
        it has been disabled.
       (<a href="http://bugs.mysql.com/35850" target="_top">Bug#35850</a>)</p></li><li><p>
        The server ignored any covering index used for
        <code class="literal">ref</code> access of a table in a query with
        <code class="literal">ORDER BY</code> if this index was incompatible with
        the <code class="literal">ORDER BY</code> list and there was another
        covering index compatible with this list. As a result,
        suboptimal execution plans were chosen for some queries that
        used an <code class="literal">ORDER BY</code> clause.
       (<a href="http://bugs.mysql.com/35844" target="_top">Bug#35844</a>)</p></li><li><p>
        <span><strong class="command">mysql_upgrade</strong></span> did not properly update the
        <code class="literal">mysql.event</code> table.
       (<a href="http://bugs.mysql.com/35824" target="_top">Bug#35824</a>)</p></li><li><p>
        An incorrect error and message was produced for attempts to
        create a <code class="literal">MyISAM</code> table with an index
        (<code class="filename">.MYI</code>) filename that was already in use by
        some other <code class="literal">MyISAM</code> table that was open at the
        same time. For example, this might happen if you use the same
        value of the <code class="literal">INDEX DIRECTORY</code> table option for
        tables belonging to different databases.
       (<a href="http://bugs.mysql.com/35733" target="_top">Bug#35733</a>)</p></li><li><p>
        Enabling the <code class="literal">read_only</code> system variable while
        autocommit mode was enabled caused <code class="literal">SELECT</code>
        statements for transactional storage engines to fail.
       (<a href="http://bugs.mysql.com/35732" target="_top">Bug#35732</a>)</p></li><li><p>
        The combination of
        <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a>,
        <code class="literal">DISTINCT</code>, and <code class="literal">LEFT JOIN</code>
        could crash the server when the right table is empty.
       (<a href="http://bugs.mysql.com/35298" target="_top">Bug#35298</a>)</p></li><li><p>
        Some binaries produced stack corruption messages due to being
        built with versions of <span><strong class="command">bison</strong></span> older than 2.1.
        Builds are now created using <span><strong class="command">bison</strong></span> 2.3.
       (<a href="http://bugs.mysql.com/34926" target="_top">Bug#34926</a>)</p></li><li><p>
        On Windows 64-bit builds, an apparent compiler bug caused memory
        overruns for code in <code class="filename">innobase/mem/*</code>.
        Removed optimizations so as not to trigger this problem.
       (<a href="http://bugs.mysql.com/34297" target="_top">Bug#34297</a>)</p></li><li><p>
        Several additional configuration scripts in the
        <code class="filename">BUILD</code> directory now are included in source
        distributions. These may be useful for users who wish to build
        MySQL from source. (See
        <a href="installing.html#installing-source-tree" title="2.9.3. Installing from the Development Source Tree">Section 2.9.3, “Installing from the Development Source Tree”</a>, for information about
        what they do.)
       (<a href="http://bugs.mysql.com/34291" target="_top">Bug#34291</a>)</p></li><li><p>
        Executing a <code class="literal">FLUSH PRIVILEGES</code> statement after
        creating a temporary table in the <code class="literal">mysql</code>
        database with the same name as one of the MySQL system tables
        caused the server to crash.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            While it is possible to shadow a system table in this way,
            the temporary table exists only for the current user and
            connection, and does not effect any user privileges.
          </p></div><p>
       (<a href="http://bugs.mysql.com/33275" target="_top">Bug#33275</a>)</p></li><li><p>
        Assignment of relative pathnames to
        <code class="literal">general_log_file</code> or
        <code class="literal">slow_query_log_file</code> did not always work.
       (<a href="http://bugs.mysql.com/32748" target="_top">Bug#32748</a>)</p></li><li><p>
        The <code class="literal">mysql.servers</code> table was not created
        during installation on Windows.
       (<a href="http://bugs.mysql.com/28680" target="_top">Bug#28680</a>, <a href="http://bugs.mysql.com/32797" target="_top">Bug#32797</a>)</p></li><li><p>
        The <code class="literal">jp</code> test suite was not working.
       (<a href="http://bugs.mysql.com/28563" target="_top">Bug#28563</a>)</p></li><li><p>
        The internal <code class="literal">init_time()</code> library function
        was renamed to <code class="literal">my_init_time()</code> to avoid
        conflicts with external libraries.
       (<a href="http://bugs.mysql.com/26294" target="_top">Bug#26294</a>)</p></li><li><p>
        The parser used signed rather than unsigned values in some cases
        that caused legal lengths in column declarations to be rejected.
       (<a href="http://bugs.mysql.com/15776" target="_top">Bug#15776</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-24-maria"></a>C.1.5. Changes in  MySQL 5.1.24-maria (Not yet released)</h3></div></div></div><p>
        The following changes apply only to builds of MySQL 5.1.24 that
        include the <code class="literal">MARIA</code> storage engine.
      </p><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        When creating tables not using the <code class="literal">MARIA</code>
        engine, it would be possible to create a table using the
        <code class="literal">TRANSACTIONAL</code> option, even though this option
        is not supported by non-<code class="literal">MARIA</code> tables. A
        warning will now be produced when using these options, but the
        option will still be recorded within the options for the table
        to allow for correct modification during <code class="literal">ALTER
        TABLE</code> operations.
       (<a href="http://bugs.mysql.com/34395" target="_top">Bug#34395</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-24"></a>C.1.6. Changes in  MySQL 5.1.24 (08 April 2008)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: <span class="bold"><strong>Packaging</strong></span>: 
        Beginning with this release, standard MySQL 5.1 binaries are no
        longer built with support for the <code class="literal">NDBCLUSTER</code>
        storage engine, and the <code class="literal">NDBCLUSTER</code> code
        included in 5.1 mainline sources is no longer guaranteed to be
        maintained or supported. Those using MySQL Cluster in MySQL
        5.1.23 and earlier MySQL 5.1 mainline releases should upgrade to
        MySQL Cluster NDB 6.2.15 or a later MySQL Cluster NDB 6.2 or 6.3
        release.
       (<a href="http://bugs.mysql.com/36193" target="_top">Bug#36193</a>)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        The <code class="literal">FEDERATED</code> storage engine is not included
        in binary distributions of MySQL 5.1.24. (It will be included
        again in 5.1.25.)
      </p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Introduced the <code class="literal">slave_exec_mode</code> system
        variable to control whether idempotent or strict mode is used
        for replication conflict resolution. Idempotent mode suppresses
        duplicate-key, no-key-found, and some other errors, and is
        needed for circular replication, multi-master replication, and
        some other complex replication setups when using MySQL Cluster.
        Strict mode is the default.
       (<a href="http://bugs.mysql.com/31609" target="_top">Bug#31609</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When running the server with
        <code class="option">--binlog-format=MIXED</code> or
        <code class="option">--binlog-format=STATEMENT</code>, a query that
        referred to a system variable used the slave's value when
        replayed on the slave. This meant that, if the value of a system
        variable was inserted into a table, the slave differed from the
        master. Now, statements that refer to a system variable are
        marked as “<span class="quote">unsafe</span>”, which means that:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              When the server is using
              <code class="option">--binlog-format=MIXED</code>, the row-based
              format is used automatically to replicate these
              statements.
            </p></li><li><p>
              When the server is using
              <code class="option">--binlog-format=STATEMENT</code>, these
              statements produce a warning.
            </p></li></ul></div><p>
       (<a href="http://bugs.mysql.com/31168" target="_top">Bug#31168</a>)</p><p>See also <a href="http://bugs.mysql.com/34732" target="_top">Bug#34732</a></p></li><li><p>
        The <code class="literal">PROCESS</code> privilege now is required to
        start or stop the <code class="literal">InnoDB</code> monitor tables (see
        linkend="innodb-monitor"/&gt;). Previously, no privilege was
        required.
       (<a href="http://bugs.mysql.com/34053" target="_top">Bug#34053</a>)</p></li><li><p>
        For binary <code class="filename">.tar.gz</code> packages,
        <span><strong class="command">mysqld</strong></span> and other binaries now are compiled
        with debugging symbols included to enable easier use with a
        debugger. If you do not need debugging symbols and are short on
        disk space, you can use <span><strong class="command">strip</strong></span> to remove the
        symbols from the binaries.
       (<a href="http://bugs.mysql.com/33252" target="_top">Bug#33252</a>)</p></li><li><p>
        Formerly, when the MySQL server crashed, the generated stack
        dump was numeric and required external tools to properly resolve
        the names of functions. This is not very helpful to users having
        a limited knowledge of debugging techniques. In addition, the
        generated stack trace contained only the names of functions and
        was formatted differently for each platform due to different
        stack layouts.
      </p><p>
        Now it is possible to take advantage of newer versions of the
        GNU C Library provide a set of functions to obtain and
        manipulate stack traces from within the program. On systems that
        use the ELF binary format, the stack trace contains important
        information such as the shared object where the call was
        generated, an offset into the function, and the actual return
        address. Having the function name also makes possible the name
        demangling of C++ functions.
      </p><p>
        The library generates meaningful stack traces on the following
        platforms: i386, x86_64, PowerPC, IA64, Alpha, and S390. On
        other platforms, a numeric stack trace is still produced, and
        the use of the <span><strong class="command">resolve_stack_dump</strong></span> utility is
        still required.
       (<a href="http://bugs.mysql.com/31891" target="_top">Bug#31891</a>)</p></li><li><p>
        <span><strong class="command">mysqltest</strong></span> now has <code class="literal">mkdir</code>
        and <code class="literal">rmdir</code> commands for creating and removing
        directories.
       (<a href="http://bugs.mysql.com/31004" target="_top">Bug#31004</a>)</p></li><li><p>
        The server uses less memory when loading privileges containing
        table grants. (Patch provided by Google.)
       (<a href="http://bugs.mysql.com/25175" target="_top">Bug#25175</a>)</p></li><li><p>
        Added the <code class="literal">Uptime_since_flush_status</code> status
        variable, which indicates the number of seconds since the most
        recent <code class="literal">FLUSH STATUS</code> statement. (From Jeremy
        Cole)
       (<a href="http://bugs.mysql.com/24822" target="_top">Bug#24822</a>)</p></li><li><p>
        <code class="literal">SHOW OPEN TABLES</code> now supports
        <code class="literal">FROM</code> and <code class="literal">LIKE</code> clauses.
       (<a href="http://bugs.mysql.com/12183" target="_top">Bug#12183</a>)</p></li><li><p>
        The new read-only global system variables
        <code class="literal">report_host</code>,
        <code class="literal">report_password</code>,
        <code class="literal">report_port</code>, and
        <code class="literal">report_user</code> system variables provide runtime
        access to the values of the corresponding
        <code class="option">--report-host</code>,
        <code class="option">--report-password</code>,
        <code class="option">--report-port</code>, and
        <code class="option">--report-user</code> options.
      </p></li><li><p>
        Formerly it was possible to specify an
        <code class="literal">innodb_flush_method</code> value of
        <code class="literal">fdatasync</code> to obtain the default flush
        behavior of using <code class="literal">fdatasync()</code> for flushing.
        This is no longer possible because it can be confusing that a
        value of <code class="literal">fdatasync</code> causes use of
        <code class="literal">fsync()</code> rather than
        <code class="literal">fdatasync()</code>.
      </p></li><li><p>
        The use of <code class="literal">InnoDB</code> hash indexes now can be
        controlled by setting the new
        <code class="literal">innodb_adaptive_hash_index</code> system variable at
        server startup. By default, this variable is enabled. See
        <a href="storage-engines.html#innodb-adaptive-hash" title="13.5.13.3. Adaptive Hash Indexes">Section 13.5.13.3, “Adaptive Hash Indexes”</a>.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Security Fix</strong></span>: 
        It was possible to circumvent privileges through the creation of
        <code class="literal">MyISAM</code> tables employing the <code class="literal">DATA
        DIRECTORY</code> and <code class="literal">INDEX DIRECTORY</code>
        options to overwrite existing table files in the MySQL data
        directory. Use of the MySQL data directory in <code class="literal">DATA
        DIRECTORY</code> and <code class="literal">INDEX DIRECTORY</code> is
        now disallowed. This is now also true of these options when used
        with partitioned tables and individual partitions of such
        tables.
       (<a href="http://bugs.mysql.com/32167" target="_top">Bug#32167</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-2079" target="_top">CVE-2008-2079</a>)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        A client that connects to a malicious server could be tricked by
        the server into sending files from the client host to the
        server. This occurs because the
        <code class="literal">libmysqlclient</code> client library would respond
        to a <code class="literal">FETCH LOCAL FILE</code> request from the server
        even if the request is sent for statements from the client other
        than <code class="literal">LOAD DATA LOCAL INFILE</code>. The client
        library has been modified to respond to a <code class="literal">FETCH LOCAL
        FILE</code> request from the server only if is is sent in
        response to a <code class="literal">LOAD DATA LOCAL INFILE</code>
        statement from the client.
      </p><p>
        The client library now also checks whether
        <code class="literal">CLIENT_LOCAL_FILE</code> is set and refuses to send
        a local file if not.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Binary distributions ship with the
          <code class="literal">local-infile</code> capability enabled.
          Applications that do not use this functionality should disable
          it to be safe.
        </p></div><p>(<a href="http://bugs.mysql.com/29605" target="_top">Bug#29605</a>)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Security Enhancement</strong></span>: 
        On Windows Vista and Windows Server 2008, a user without
        administrative privileges does not have write permissions to the
        <code class="filename">Program Files</code> directory where MySQL and the
        associated data files are normally installed. Using data files
        located in the standard <code class="filename">Program Files</code>
        installation directory could therefore cause MySQL to fail, or
        lead to potential security issues in an installed instance.
      </p><p>
        To address the problem, on Windows XP, Windows Vista and Windows
        Server 2008, the datafiles and data file configuration are now
        set to the Microsoft recommended <code class="filename">AppData</code>
        folder. The <code class="filename">AppData</code> folder is typically
        located within the user's home directory.
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          When upgrading an existing 5.1.23 or 6.0.4 installation of
          MySQL you must take a backup of your data and configuration
          file (<code class="filename">my.ini</code> before installing the new
          version. To migrate your data, either extract the data and
          re-import (using <span><strong class="command">mysqldump</strong></span>, then upgrade
          and re-import using <span><strong class="command">mysql</strong></span>), or back up your
          data, upgrade to the new version, and copy your existing data
          files from your old <code class="filename">datadir</code> directory to
          the new directory located within <code class="filename">AppData</code>.
        </p><p>
          Failure to back up your data and follow these procedures may
          lead to data loss.
        </p></div><p>(<a href="http://bugs.mysql.com/34593" target="_top">Bug#34593</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>Incompatible Change</strong></span>: 
        The following statements did not function correctly with
        corrupted or crashed tables and have been removed:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">ALTER TABLE ... ANALYZE PARTITION</code>
            </p></li><li><p>
              <code class="literal">ALTER TABLE ... CHECK PARTITION</code>
            </p></li><li><p>
              <code class="literal">ALTER TABLE ... OPTIMIZE PARTITION</code>
            </p></li><li><p>
              <code class="literal">ALTER TABLE ... REPAIR PARTITION</code>
            </p></li></ul></div><p>
        <code class="literal">ALTER TABLE ... REBUILD PARTITION</code> is
        unaffected by this change and continues to be available. This
        statement and <code class="literal">ALTER TABLE ... REORGANIZE
        PARTITION</code> may be used to analyze and optimize
        partitioned tables, since these operations cause the partition
        files to be rebuilt.
       (<a href="http://bugs.mysql.com/20129" target="_top">Bug#20129</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        In MySQL 5.1.23, the <code class="literal">last_errno</code> and
        <code class="literal">last_error</code> members of the
        <code class="literal">NET</code> structure in
        <code class="filename">mysql_com.h</code> were renamed to
        <code class="literal">client_last_errno</code> and
        <code class="literal">client_last_error</code>. This was found to cause
        problems for connectors that use the internal
        <code class="literal">NET</code> structure for error handling. The change
        has been reverted.
       (<a href="http://bugs.mysql.com/34655" target="_top">Bug#34655</a>)</p><p>See also <a href="http://bugs.mysql.com/12713" target="_top">Bug#12713</a></p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        For packages that are built within their own prefix (for
        example, <code class="filename">/usr/local/mysql</code>) the plugin
        directory will be <code class="filename">lib/plugin</code>. For packages
        that are built to be installed into a system-wide prefix (such
        as RPM packages with a prefix of <code class="filename">/usr</code>), the
        plugin directory will be <code class="filename">lib/mysql/plugin</code>
        to ensure a clean <code class="filename">/usr/lib</code> hierarchy. In
        both cases, the <code class="literal">$pkglibdir</code> configuration
        setting is used at build time to set the plugin directory.
      </p><p>
        The current plugin directory location is available as the value
        of the <code class="literal">plugin_dir</code> system variable as before,
        but the <span><strong class="command">mysql_config</strong></span> script now has a
        <code class="option">--plugindir</code> option that can be used externally
        to the server by third-party plugin writers to obtain the
        default plugin directory pathname and configure their
        installation directory appropriately.
       (<a href="http://bugs.mysql.com/31736" target="_top">Bug#31736</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The <code class="literal">utf8_general_ci</code> and
        <code class="literal">ucs2_general_ci</code> collations did not sort the
        letter "U+00DF SHARP S" equal to <code class="literal">'s'</code>.
      </p><p>
        As a result of this fix, any indexes on columns that use these
        collations (but only columns that use SHARP S) must be rebuilt
        when upgrading to 5.1.24 or higher. To do this, use
        <code class="literal">ALTER TABLE</code> to drop and re-add the indexes,
        or <span><strong class="command">mysqldump</strong></span> to dump the affected tables and
        <span><strong class="command">mysql</strong></span> to reload the dump file.
       (<a href="http://bugs.mysql.com/27877" target="_top">Bug#27877</a>)</p><p>See also <a href="http://bugs.mysql.com/37046" target="_top">Bug#37046</a></p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        When the master crashed during an update on a transactional
        table while in <code class="literal">AUTOCOMMIT</code> mode, the slave
        failed. This fix causes every transaction (including
        <code class="literal">AUTOCOMMIT</code> transactions) to be recorded in
        the binlog as starting with a <code class="literal">BEGIN</code> and
        ending with a <code class="literal">COMMIT</code> or
        <code class="literal">ROLLBACK</code>.
       (<a href="http://bugs.mysql.com/26395" target="_top">Bug#26395</a>)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        It was possible to use <code class="literal">FRAC_SECOND</code> as a
        synonym for <code class="literal">MICROSECOND</code> with
        <a href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a>,
        <a href="functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a>, and
        <a href="functions.html#function_interval"><code class="literal">INTERVAL</code></a>; now, using
        <code class="literal">FRAC_SECOND</code> with anything other than
        <a href="functions.html#function_timestampadd"><code class="literal">TIMESTAMPADD()</code></a> or
        <a href="functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF()</code></a> produces a
        syntax error.
      </p><p>
        It is now possible (and preferable) to use
        <code class="literal">MICROSECOND</code> with
        <a href="functions.html#function_timestampadd"><code class="literal">TIMESTAMPADD()</code></a> and
        <a href="functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF()</code></a>, and
        <code class="literal">FRAC_SECOND</code> is now deprecated.
       (<a href="http://bugs.mysql.com/33834" target="_top">Bug#33834</a>)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        <code class="literal">InnoDB</code> free space information is now shown in
        the <code class="literal">Data_free</code> column of <code class="literal">SHOW TABLE
        STATUS</code> and in the <code class="literal">DATA_FREE</code> column
        of the <code class="literal">INFORMATION_SCHEMA.TABLES</code> table.
       (<a href="http://bugs.mysql.com/32440" target="_top">Bug#32440</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/11379" target="_top">Bug#11379</a></p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        The server handled truncation of values having excess trailing
        spaces into <code class="literal">CHAR</code>, <code class="literal">VARCHAR</code>,
        and <code class="literal">TEXT</code> columns in different ways. This
        behavior has now been made consistent for columns of all three
        of these types, and now follows the existing behavior of
        <code class="literal">VARCHAR</code> columns in this regard; that is, a
        <code class="literal">Note</code> is always issued whenever such
        truncation occurs.
      </p><p>
        This change does not affect columns of these three types when
        using a binary encoding; <code class="literal">BLOB</code> columns are
        also unaffected by the change, since they always use a binary
        encoding.
       (<a href="http://bugs.mysql.com/30059" target="_top">Bug#30059</a>)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        An <code class="literal">AFTER UPDATE</code> trigger was not invoked when
        the <code class="literal">UPDATE</code> did not make any changes to the
        table for which the trigger was defined. Now <code class="literal">AFTER
        UPDATE</code> triggers behave the same in this regard as do
        <code class="literal">BEFORE UPDATE</code> triggers, which are invoked
        whether the <code class="literal">UPDATE</code> makes any changes in the
        table or not.
       (<a href="http://bugs.mysql.com/23771" target="_top">Bug#23771</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: <span class="bold"><strong>Important Note</strong></span>: 
        Network timeouts between the master and the slave could result
        in corruption of the relay log. This fix rectifies a
        long-standing replication issue when using unreliable networks,
        including replication over wide area networks such as the
        Internet. If you experience reliability issues and see many
        <span class="errortext">You have an error in your SQL syntax</span>
        errors on replication slaves, we strongly recommend that you
        upgrade to a MySQL version which includes this fix.
       (<a href="http://bugs.mysql.com/26489" target="_top">Bug#26489</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        In some cases, matching rows from a partitioned
        <code class="literal">MyISAM</code> using a <code class="literal">BIT</code> column
        as the primary key were not found by queries.
       (<a href="http://bugs.mysql.com/34358" target="_top">Bug#34358</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Enabling <code class="literal">innodb_file_per_table</code> produced
        problems with partitioning and tablespace operations on
        partitioned <code class="literal">InnoDB</code> tables, in some cases
        leading to corrupt partitions or causing the server to crash.
       (<a href="http://bugs.mysql.com/33429" target="_top">Bug#33429</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        A table defined using <code class="literal">PARTITION BY KEY</code> and
        having a <code class="literal">BIT</code> column referenced in the
        partitioning key did not behave correctly; some rows could be
        inserted into the wrong partition, causing wrong results to be
        returned from queries.
       (<a href="http://bugs.mysql.com/33379" target="_top">Bug#33379</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        When <code class="literal">ALTER TABLE DROP PARTITION</code> was executed
        on a table on which there was a trigger, the statement failed
        with an error. This occurred even if the trigger did not
        reference any tables.
       (<a href="http://bugs.mysql.com/32943" target="_top">Bug#32943</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Currently, all partitions of a partitioned table must use the
        same storage engine. One may optinally specify the storage
        engine on a per-partition basis; however, where this is the
        done, the storage engine must be the same as used by the table
        as a whole. <code class="literal">ALTER TABLE</code> did not enforce these
        rules correctly, the result being that incaccurate error
        messages were shown when trying to use the statement to change
        the storage engine used by an individual partition or
        partitions.
       (<a href="http://bugs.mysql.com/31931" target="_top">Bug#31931</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Using the DATA DIRECTORY and INDEX DIRECTORY options for
        partitions with CREATE TABLE or ALTER TABLE statements appeared
        to work on Windows, although they are not supported by MySQL on
        Windows systems, and subsequent attempts to use the tables
        referenced caused errors. Now these options are disabled on
        Windows, and attempting to use them generates a warning.
       (<a href="http://bugs.mysql.com/30459" target="_top">Bug#30459</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The failure of a <code class="literal">CREATE TABLE ... ENGINE=InnoDB ...
        SELECT</code> statement caused the slave to lose data.
       (<a href="http://bugs.mysql.com/35762" target="_top">Bug#35762</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <code class="literal">INSERT_ID</code> was not written to the binary log
        for inserts into <code class="literal">BLACKHOLE</code> tables.
       (<a href="http://bugs.mysql.com/35178" target="_top">Bug#35178</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using statement-based replication and a
        <code class="literal">DELETE</code>, <code class="literal">UPDATE</code>, or
        <code class="literal">INSERT ... SELECT</code> statement using a
        <code class="literal">LIMIT</code> clause is encountered, a warning that
        the statement is not safe to replicate in statement mode is now
        issued; when using <code class="literal">MIXED</code> mode, the statement
        is now replicated using the row-based format.
       (<a href="http://bugs.mysql.com/34768" target="_top">Bug#34768</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <span><strong class="command">mysqlbinlog</strong></span> did not output the values of
        <code class="literal">auto_increment_increment</code> and
        <code class="literal">auto_increment_offset</code> when both were equal to
        their default values (for both of these variables, the default
        is 1). This meant that a binary log recorded by a client using
        the defaults for both variables and then replayed on another
        client using its own values for either or both of these
        variables produced erroneous results.
       (<a href="http://bugs.mysql.com/34732" target="_top">Bug#34732</a>)</p><p>See also <a href="http://bugs.mysql.com/31168" target="_top">Bug#31168</a></p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When the Windows version of <span><strong class="command">mysqlbinlog</strong></span> read
        4.1 binlogs containing <code class="literal">LOAD DATA INFILE</code>
        statements, it output backslashes as path separators, causing
        problems for client programs expecting forward slashes. In such
        cases, it now converts <code class="literal">\\</code> to
        <code class="literal">/</code> in directory paths.
       (<a href="http://bugs.mysql.com/34355" target="_top">Bug#34355</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <code class="literal">SHOW SLAVE STATUS</code> failed when slave I/O was
        about to terminate.
       (<a href="http://bugs.mysql.com/34305" target="_top">Bug#34305</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The character sets and collations used for constant identifiers
        in stored procedures were not replicated correctly.
       (<a href="http://bugs.mysql.com/34289" target="_top">Bug#34289</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <span><strong class="command">mysqlbinlog</strong></span> from a 5.1 or later MySQL
        distribution could not read binary logs generated by a 4.1
        server when the logs contained <code class="literal">LOAD DATA
        INFILE</code> statements.
       (<a href="http://bugs.mysql.com/34141" target="_top">Bug#34141</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/32407" target="_top">Bug#32407</a></p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        A <code class="literal">CREATE USER</code>, <code class="literal">DROP USER</code>,
        or <code class="literal">RENAME USER</code> statement that fails on the
        master, or that is a duplicate of any of these statements, is no
        longer written to the binlog; previously, either of these
        occurrences could cause the slave to fail.
      </p><p> (<a href="http://bugs.mysql.com/33862" target="_top">Bug#33862</a>)</p><p>See also <a href="http://bugs.mysql.com/29749" target="_top">Bug#29749</a></p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <code class="literal">SHOW BINLOG EVENTS</code> could fail when the binlog
        contained one or more events whose size was close to the value
        of <code class="literal">max_allowed_packet</code>.
       (<a href="http://bugs.mysql.com/33413" target="_top">Bug#33413</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        An extraneous <code class="literal">ROLLBACK</code> statement was written
        to the binary log by a connection that did not use any
        transactional tables.
       (<a href="http://bugs.mysql.com/33329" target="_top">Bug#33329</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <span><strong class="command">mysqlbinlog</strong></span> failed to release all of its
        memory after terminating abnormally.
       (<a href="http://bugs.mysql.com/33247" target="_top">Bug#33247</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When a stored routine or trigger, running on a master that used
        MySQL 5.0 or MySQL 5.1.11 or earlier, performed an insert on an
        <code class="literal">AUTO_INCREMENT</code> column, the
        <code class="literal">INSERT_ID</code> value was not replicated correctly
        to a slave running MySQL 5.1.12 or later (including any MySQL
        6.0 release).
       (<a href="http://bugs.mysql.com/33029" target="_top">Bug#33029</a>)</p><p>See also <a href="http://bugs.mysql.com/19630" target="_top">Bug#19630</a></p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The error message generated due to lack of a default value for
        an extra column was not sufficiently informative.
       (<a href="http://bugs.mysql.com/32971" target="_top">Bug#32971</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When a user variable was used inside an
        <code class="literal">INSERT</code> statement, the corresponding binlog
        event was not written to the binlog correctly.
       (<a href="http://bugs.mysql.com/32580" target="_top">Bug#32580</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using row-based replication, deletes from a table with a
        foreign key constraint failed on the slave.
       (<a href="http://bugs.mysql.com/32468" target="_top">Bug#32468</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The <code class="option">--base64-output</code> option for
        <span><strong class="command">mysqlbinlog</strong></span> was not honored for all types of
        events. This interfered in some cases with performing
        point-in-time recovery.
       (<a href="http://bugs.mysql.com/32407" target="_top">Bug#32407</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        SQL statements containing comments using <code class="literal">--</code>
        syntax were not replayable by <span><strong class="command">mysqlbinlog</strong></span>,
        even though such statements replicated correctly.
       (<a href="http://bugs.mysql.com/32205" target="_top">Bug#32205</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using row-based replication from a master running MySQL
        5.1.21 or earlier to a slave running 5.1.22 or later, updates of
        integer columns failed on the slave with <span class="errortext">Error in
        Unknown event: row application failed</span>.
       (<a href="http://bugs.mysql.com/31583" target="_top">Bug#31583</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/21842" target="_top">Bug#21842</a></p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Replicating write, update, or delete events from a master
        running MySQL 5.1.15 or earlier to a slave running 5.1.16 or
        later caused the slave to crash.
       (<a href="http://bugs.mysql.com/31581" target="_top">Bug#31581</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When using row-based replication, the slave stopped when
        attempting to delete non-existent rows from a slave table
        without a primary key. In addition, no error was reported when
        this occurred.
       (<a href="http://bugs.mysql.com/31552" target="_top">Bug#31552</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Errors due to server ID conflicts were reported only in the
        slave's error log; now these errors are also shown in the
        <code class="literal">Server_IO_State</code> column in the output of
        <code class="literal">SHOW SLAVE STATUS</code>.
       (<a href="http://bugs.mysql.com/31316" target="_top">Bug#31316</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <code class="literal">STOP SLAVE</code> did not stop connection attempts
        properly. If the IO slave thread was attempting to connect,
        <code class="literal">STOP SLAVE</code> waited for the attempt to finish,
        sometimes for a long period of time, rather than stopping the
        slave immediately.
       (<a href="http://bugs.mysql.com/31024" target="_top">Bug#31024</a>)</p><p>See also <a href="http://bugs.mysql.com/30932" target="_top">Bug#30932</a></p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Issuing a <code class="literal">DROP VIEW</code> statement caused
        replication to fail if the view did not actually exist.
       (<a href="http://bugs.mysql.com/30998" target="_top">Bug#30998</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The effects of scheduled events were not always correctly
        reproduced on the slave when using row-based replication.
       (<a href="http://bugs.mysql.com/29020" target="_top">Bug#29020</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Setting <code class="literal">server_id</code> did not update its value
        for the current session.
       (<a href="http://bugs.mysql.com/28908" target="_top">Bug#28908</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Some older servers wrote events to the binary log using
        different numbering from what is currently used, even though the
        file format number in the file is the same. Slaves running MySQL
        5.1.18 and later could not read these binary logs properly.
        Binary logs from these older versions now are recognized and
        event numbers are mapped to the current numbering so that they
        can be interpreted properly.
       (<a href="http://bugs.mysql.com/27779" target="_top">Bug#27779</a>, <a href="http://bugs.mysql.com/32434" target="_top">Bug#32434</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/22583" target="_top">Bug#22583</a></p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <code class="literal">MASTER_POS_WAIT()</code> did not return
        <code class="literal">NULL</code> when the server was not a slave.
       (<a href="http://bugs.mysql.com/26622" target="_top">Bug#26622</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        The inspecific error message <span class="errortext">Wrong parameters to
        function register_slave</span> resulted when <code class="literal">START
        SLAVE</code> failed to register on the master due to excess
        length of any the slave server options
        <code class="option">--report-host</code>, <code class="option">--report-user</code>,
        or <code class="option">--report-password</code>. An error message specific
        to each of these options is now returned in such cases. The new
        error messages are:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <span class="errortext">Failed to register slave: too long
              'report-host'</span>
            </p></li><li><p>
              <span class="errortext">Failed to register slave: too long
              'report-user'</span>
            </p></li><li><p>
              <span class="errortext">Failed to register slave; too long
              'report-password'</span>
            </p></li></ul></div><p>
       (<a href="http://bugs.mysql.com/22989" target="_top">Bug#22989</a>)</p><p>See also <a href="http://bugs.mysql.com/19328" target="_top">Bug#19328</a></p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <code class="literal">START SLAVE UNTIL
        MASTER_LOG_POS=<em class="replaceable"><code>position</code></em></code>
        issued on a slave that was using
        <code class="option">--log-slave-updates</code> and that was involved in
        circular replication would cause the slave to run and stop one
        event later than that specified by the value of
        <em class="replaceable"><code>position</code></em>.
       (<a href="http://bugs.mysql.com/13861" target="_top">Bug#13861</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        <code class="literal">PURGE BINARY LOGS TO</code> and <code class="literal">PURGE
        BINARY LOGS BEFORE</code> did not handle missing binary log
        files correctly or in the same way. Now for both of these
        statements, if any files listed in the
        <code class="filename">.index</code> file are missing from the
        filesystem, the statement fails with an error.
      </p></li><li><p>
        Manually replacing a binary log file with a directory having the
        same name caused an error that was not handled correctly.
       (<a href="http://bugs.mysql.com/35675" target="_top">Bug#35675</a>)</p></li><li><p>
        Using <code class="literal">LOAD DATA INFILE</code> with a view could
        crash the server.
       (<a href="http://bugs.mysql.com/35469" target="_top">Bug#35469</a>)</p></li><li><p>
        Selecting from
        <code class="literal">INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS</code>
        could cause a server crash.
       (<a href="http://bugs.mysql.com/35406" target="_top">Bug#35406</a>)</p><p>See also <a href="http://bugs.mysql.com/35108" target="_top">Bug#35108</a></p></li><li><p>
        For a <code class="literal">TEMPORARY</code> table,
        <code class="literal">DELETE</code> with no <code class="literal">WHERE</code>
        clause could fail when preceded by <code class="literal">DELETE</code>
        statements with a <code class="literal">WHERE</code> clause.
       (<a href="http://bugs.mysql.com/35392" target="_top">Bug#35392</a>)</p></li><li><p>
        If the server crashed with an <code class="literal">InnoDB</code> error
        due to unavailability of undo slots, errors could persist during
        rollback when the server was restarted: There are two
        <code class="literal">UNDO</code> slot caches (for
        <code class="literal">INSERT</code> and <code class="literal">UPDATE</code>). If all
        slots end up in one of the slot caches, a request for a slot
        from the other slot cache would fail. This can happen if the
        request is for an <code class="literal">UPDATE</code> slot and all slots
        are in the <code class="literal">INSERT</code> slot cache, or vice versa.
       (<a href="http://bugs.mysql.com/35352" target="_top">Bug#35352</a>)</p></li><li><p>
        In some cases, when too many clients tried to connect to the
        server, the proper <code class="literal">SQLSTATE</code> code was not
        returned.
       (<a href="http://bugs.mysql.com/35289" target="_top">Bug#35289</a>)</p></li><li><p>
        Memory-allocation failures for attempts to set
        <code class="literal">key_buffer_size</code> to large values could result
        in a server crash.
       (<a href="http://bugs.mysql.com/35272" target="_top">Bug#35272</a>)</p></li><li><p>
        When using row-based replication, a slave could crash at startup
        because it received a row-based replication event that
        <code class="literal">InnoDB</code> could not handle due to an incorrect
        test of the query string provided by MySQL, which was
        <code class="literal">NULL</code> for row-based replication events.
       (<a href="http://bugs.mysql.com/35226" target="_top">Bug#35226</a>)</p></li><li><p>
        For <code class="literal">InnoDB</code> tables, <code class="literal">ALTER TABLE
        DROP</code> failed if the name of the column to be dropped
        began with “<span class="quote">foreign</span>”.
       (<a href="http://bugs.mysql.com/35220" target="_top">Bug#35220</a>)</p></li><li><p>
        Queries could return different results depending on whether
        <code class="literal">ORDER BY</code> columns were indexed.
       (<a href="http://bugs.mysql.com/35206" target="_top">Bug#35206</a>)</p></li><li><p>
        When a view containing a reference to <code class="literal">DUAL</code>
        was created, the reference was removed when the definition was
        stored, causing some queries against the view to fail with
        invalid SQL syntax errors.
       (<a href="http://bugs.mysql.com/35193" target="_top">Bug#35193</a>)</p></li><li><p>
        <code class="literal">SELECT ... FROM
        INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS</code> caused the
        server to crash if the table referenced by a foreign key had
        been dropped. This issue was observed on Windows platforms only.
       (<a href="http://bugs.mysql.com/35108" target="_top">Bug#35108</a>)</p><p>See also <a href="http://bugs.mysql.com/35406" target="_top">Bug#35406</a></p></li><li><p>
        Debugging symbols were missing for some executables in Windows
        binary distributions.
       (<a href="http://bugs.mysql.com/35104" target="_top">Bug#35104</a>)</p></li><li><p>
        Non-connection threads were being counted in the value of the
        <code class="literal">Max_used_connections</code> status variable.
       (<a href="http://bugs.mysql.com/35074" target="_top">Bug#35074</a>)</p></li><li><p>
        A query that performed a <code class="literal">ref_or_null</code> join
        where the second table used a key having one or columns that
        could be <code class="literal">NULL</code> and had a column value that was
        <code class="literal">NULL</code> caused the server to crash.
       (<a href="http://bugs.mysql.com/34945" target="_top">Bug#34945</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/12144" target="_top">Bug#12144</a></p></li><li><p>
        For some queries, the optimizer used an ordered index scan for
        <code class="literal">GROUP BY</code> or <code class="literal">DISTINCT</code> when
        it was supposed to use a loose index scan, leading to incorrect
        results.
       (<a href="http://bugs.mysql.com/34928" target="_top">Bug#34928</a>)</p></li><li><p>
        Creating a foreign key on an <code class="literal">InnoDB</code> table
        that was created with an explicit
        <code class="literal">AUTO_INCREMENT</code> value caused that value to be
        reset to 1.
       (<a href="http://bugs.mysql.com/34920" target="_top">Bug#34920</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> failed to return an error code when
        using the <code class="option">--master-data</code> option without binary
        logging being enabled on the server.
       (<a href="http://bugs.mysql.com/34909" target="_top">Bug#34909</a>)</p></li><li><p>
        Under some circumstances, the value of
        <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> following a
        <code class="literal">SELECT ... INSERT</code> statement could return an
        incorrect value. This could happen when the last <code class="literal">SELECT
        ... INSERT</code> did not involve an
        <code class="literal">AUTO_INCREMENT</code> column, but the value of
        <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> was changed
        by some previous statements.
       (<a href="http://bugs.mysql.com/34889" target="_top">Bug#34889</a>)</p></li><li><p>
        Table and database names were mixed up in some places of the
        subquery transformation procedure. This could affect debugging
        trace output and further extensions of that procedure.
       (<a href="http://bugs.mysql.com/34830" target="_top">Bug#34830</a>)</p></li><li><p>
        If <code class="literal">fsync()</code> returned
        <code class="literal">ENOLCK</code>, <code class="literal">InnoDB</code> could treat
        this as fatal and cause abnormal server termination.
        <code class="literal">InnoDB</code> now retries the operation.
       (<a href="http://bugs.mysql.com/34823" target="_top">Bug#34823</a>)</p></li><li><p>
        <code class="literal">CREATE SERVER</code> and <code class="literal">ALTER
        SERVER</code> could crash the server if out-of-memory
        conditions occurred.
       (<a href="http://bugs.mysql.com/34790" target="_top">Bug#34790</a>)</p></li><li><p>
        <code class="literal">DROP SERVER</code> does not release memory cached
        for server structures created by <code class="literal">CREATE
        SERVER</code>, so repeated iterations of these statements
        resulted in a memory leak. <code class="literal">FLUSH PRIVILEGES</code>
        now releases the memory allocated for <code class="literal">CREATE
        SERVER</code>.
       (<a href="http://bugs.mysql.com/34789" target="_top">Bug#34789</a>)</p></li><li><p>
        A malformed URL used for a <code class="literal">FEDERATED</code>
        table's <code class="literal">CONNECTION</code> option value in a
        <code class="literal">CREATE TABLE</code> statement was not handled
        correctly and could crash the server.
       (<a href="http://bugs.mysql.com/34788" target="_top">Bug#34788</a>)</p></li><li><p>
        Queries such as <code class="literal">SELECT ROW(1, 2) IN (SELECT t1.a, 2)
        FROM t1 GROUP BY t1.a</code> (combining row constructors and
        subqueries in the <code class="literal">FROM</code> clause) could lead to
        assertion failure or unexpected error messages.
       (<a href="http://bugs.mysql.com/34763" target="_top">Bug#34763</a>)</p></li><li><p>
        Using <code class="literal">NAME_CONST()</code> with a negative number and
        an aggregate function caused MySQL to crash. This could also
        have a negative impact on replication.
       (<a href="http://bugs.mysql.com/34749" target="_top">Bug#34749</a>)</p></li><li><p>
        A memory-handling error associated with use of
        <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a> in subqueries
        could result in a server crash.
       (<a href="http://bugs.mysql.com/34747" target="_top">Bug#34747</a>)</p></li><li><p>
        For an indexed integer column
        <em class="replaceable"><code>col_name</code></em> and a value
        <em class="replaceable"><code>N</code></em> that is one greater than the
        maximum value allowed for the data type of
        <em class="replaceable"><code>col_name</code></em>, conditions of the form
        <code class="literal">WHERE <em class="replaceable"><code>col_name</code></em> &lt;
        <em class="replaceable"><code>N</code></em></code> failed to return rows
        where the value of <em class="replaceable"><code>col_name</code></em> is
        <code class="literal"><em class="replaceable"><code>N</code></em> - 1</code>.
       (<a href="http://bugs.mysql.com/34731" target="_top">Bug#34731</a>)</p></li><li><p>
        A server running with the <code class="option">--debug</code> option could
        attempt to dereference a null pointer when opening tables,
        resulting in a crash.
       (<a href="http://bugs.mysql.com/34726" target="_top">Bug#34726</a>)</p></li><li><p>
        Assigning an “<span class="quote">incremental</span>” value to the
        <code class="literal">debug</code> system variable did not add the new
        value to the current value. For example, if the current
        <code class="literal">debug</code> value was <code class="literal">'T'</code>, the
        statement <code class="literal">SET debug = '+P'</code> resulted in a
        value of <code class="literal">'P'</code> rather than the correct value of
        <code class="literal">'P:T'</code>.
       (<a href="http://bugs.mysql.com/34678" target="_top">Bug#34678</a>)</p></li><li><p>
        For debug builds, reading from
        <code class="literal">INFORMATION_SCHEMA.TABLES</code> or
        <code class="literal">INFORMATION_SCHEMA.COLUMNS</code> could cause
        assertion failures. This could happen under rare circumstances
        when <code class="literal">INFORMATION_SCHEMA</code> fails to get
        information about a table (for example, when a connection is
        killed).
       (<a href="http://bugs.mysql.com/34656" target="_top">Bug#34656</a>)</p></li><li><p>
        Executing a <code class="literal">TRUNCATE</code> statement on a table
        having both a foreign key reference and a
        <code class="literal">DELETE</code> trigger crashed the server.
       (<a href="http://bugs.mysql.com/34643" target="_top">Bug#34643</a>)</p></li><li><p>
        Some subqueries using an expression that included an aggregate
        function could fail or in some cases lead to a crash of the
        server.
       (<a href="http://bugs.mysql.com/34620" target="_top">Bug#34620</a>)</p></li><li><p>
        Dangerous pointer arithmetic crashed the server on some systems.
       (<a href="http://bugs.mysql.com/34598" target="_top">Bug#34598</a>)</p></li><li><p>
        Creating a view inside a stored procedure could lead to a crash
        of the MySQL Server.
       (<a href="http://bugs.mysql.com/34587" target="_top">Bug#34587</a>)</p></li><li><p>
        A server crash could occur if
        <code class="literal">INFORMATION_SCHEMA</code> tables built in memory
        were swapped out to disk during query execution.
       (<a href="http://bugs.mysql.com/34529" target="_top">Bug#34529</a>)</p></li><li><p>
        <a href="functions.html#function_cast"><code class="literal">CAST(AVG(<em class="replaceable"><code>arg</code></em>) AS
        DECIMAL)</code></a> produced incorrect results for
        non-<code class="literal">DECIMAL</code> arguments.
       (<a href="http://bugs.mysql.com/34512" target="_top">Bug#34512</a>)</p></li><li><p>
        The per-thread debugging settings stack was not being
        deallocated before thread termination, resulting in a stack
        memory leak.
       (<a href="http://bugs.mysql.com/34424" target="_top">Bug#34424</a>)</p></li><li><p>
        Executing an <code class="literal">ALTER VIEW</code> statement on a table
        crashed the server.
       (<a href="http://bugs.mysql.com/34337" target="_top">Bug#34337</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> could crash if overflow occurred for
        an <code class="literal">AUTO_INCREMENT</code> column.
       (<a href="http://bugs.mysql.com/34335" target="_top">Bug#34335</a>)</p></li><li><p>
        For <code class="literal">InnoDB</code>, exporting and importing a table
        could corrupt <code class="literal">TINYBLOB</code> columns, and a
        subsequent <code class="literal">ALTER TABLE</code> could corrupt
        <code class="literal">TINYTEXT</code> columns as well.
       (<a href="http://bugs.mysql.com/34300" target="_top">Bug#34300</a>)</p></li><li><p>
        <code class="literal">DEFAULT 0</code> was not allowed for the
        <code class="literal">YEAR</code> data type.
       (<a href="http://bugs.mysql.com/34274" target="_top">Bug#34274</a>)</p></li><li><p>
        Under some conditions, a <code class="literal">SET GLOBAL
        innodb_commit_concurrency</code> or <code class="literal">SET GLOBAL
        innodb_autoextend_increment</code> statement could fail.
       (<a href="http://bugs.mysql.com/34223" target="_top">Bug#34223</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> attempts to set the
        <code class="literal">character_set_results</code> system variable after
        connecting to the server. This failed for pre-4.1 servers that
        have no such variable, but <span><strong class="command">mysqldump</strong></span> did not
        account for this and 1) failed to dump database contents; 2)
        failed to produce any error message alerting the user to the
        problem.
       (<a href="http://bugs.mysql.com/34192" target="_top">Bug#34192</a>)</p></li><li><p>
        Use of stored functions in the <code class="literal">WHERE</code> clause
        for <code class="literal">SHOW OPEN TABLES</code> caused a server crash.
       (<a href="http://bugs.mysql.com/34166" target="_top">Bug#34166</a>)</p></li><li><p>
        For a <code class="literal">FEDERATED</code> table with an index on a
        nullable column, accessing the table could crash a server,
        return an incorrect result set, or return <code class="literal">ERROR 1030
        (HY000): Got error 1430 from storage engine</code>.
       (<a href="http://bugs.mysql.com/33946" target="_top">Bug#33946</a>)</p></li><li><p>
        Passing anything other than a integer to a
        <code class="literal">LIMIT</code> clause in a prepared statement would
        fail. (This limitation was introduced to avoid replication
        problems; for example, replicating the statement with a string
        argument would cause a parse failure in the slave). Now,
        arguments to the <code class="literal">LIMIT</code> clause are converted
        to integer values, and these converted values are used when
        logging the statement.
       (<a href="http://bugs.mysql.com/33851" target="_top">Bug#33851</a>)</p></li><li><p>
        An internal buffer in <span><strong class="command">mysql</strong></span> was too short.
        Overextending it could cause stack problems or segmentation
        violations on some architectures. (This is not a problem that
        could be exploited to run arbitrary code.)
       (<a href="http://bugs.mysql.com/33841" target="_top">Bug#33841</a>)</p></li><li><p>
        A query using <code class="literal">WHERE
        (column1='<em class="replaceable"><code>string1</code></em>' AND
        column2=<em class="replaceable"><code>constant1</code></em>) OR
        (column1='<em class="replaceable"><code>string2</code></em>' AND
        column2=<em class="replaceable"><code>constant2</code></em>)</code>, where
        <code class="literal">col1</code> used a binary collation and
        <em class="replaceable"><code>string1</code></em> matched
        <em class="replaceable"><code>string2</code></em> except for case, failed to
        match any records even when matches were found by a query using
        the equivalent clause <code class="literal">WHERE
        column2=<em class="replaceable"><code>constant1</code></em> OR
        column2=<em class="replaceable"><code>constant2</code></em></code>.
       (<a href="http://bugs.mysql.com/33833" target="_top">Bug#33833</a>)</p></li><li><p>
        Large unsigned integers were improperly handled for prepared
        statements, resulting in truncation or conversion to negative
        numbers.
       (<a href="http://bugs.mysql.com/33798" target="_top">Bug#33798</a>)</p></li><li><p>
        Reuse of prepared statements could cause a memory leak in the
        embedded server.
       (<a href="http://bugs.mysql.com/33796" target="_top">Bug#33796</a>)</p></li><li><p>
        The server crashed when executing a query that had a subquery
        containing an equality X=Y where Y referred to a named select
        list expression from the parent select. The server crashed when
        trying to use the X=Y equality for <code class="literal">ref</code>-based
        access.
       (<a href="http://bugs.mysql.com/33794" target="_top">Bug#33794</a>)</p></li><li><p>
        Some queries using a combination of <code class="literal">IN</code>,
        <a href="functions.html#function_concat"><code class="literal">CONCAT()</code></a>, and an implicit type
        conversion could return an incorrect result.
       (<a href="http://bugs.mysql.com/33764" target="_top">Bug#33764</a>)</p></li><li><p>
        In some cases a query that produced a result set when using
        <code class="literal">ORDER BY ASC</code> did not return any results when
        this was changed to <code class="literal">ORDER BY DESC</code>.
       (<a href="http://bugs.mysql.com/33758" target="_top">Bug#33758</a>)</p></li><li><p>
        Disabling concurrent inserts caused some cacheable queries not
        to be saved in the query cache.
       (<a href="http://bugs.mysql.com/33756" target="_top">Bug#33756</a>)</p></li><li><p>
        The UPDATE statement allowed <code class="literal">NULL</code> to be
        assigned to <code class="literal">NOT NULL</code> columns (the default
        data type value was assigned). An error occurs now.
       (<a href="http://bugs.mysql.com/33699" target="_top">Bug#33699</a>)</p></li><li><p>
        <code class="literal">ORDER BY ... DESC</code> sorts could produce
        misordered results.
       (<a href="http://bugs.mysql.com/33697" target="_top">Bug#33697</a>)</p></li><li><p>
        The server could crash when <code class="literal">REPEAT</code> or another
        control instruction was used in conjunction with labels and a
        <code class="literal">LEAVE</code> instruction.
       (<a href="http://bugs.mysql.com/33618" target="_top">Bug#33618</a>)</p></li><li><p>
        The parser allowed control structures in compound statements to
        have mismatched beginning and ending labels.
       (<a href="http://bugs.mysql.com/33618" target="_top">Bug#33618</a>)</p></li><li><p>
        <span><strong class="command">make_binary_distribution</strong></span> passed the
        <code class="option">--print-libgcc-file</code> option to the C compiler,
        but this does not work with the <span><strong class="command">ICC</strong></span> compiler.
       (<a href="http://bugs.mysql.com/33536" target="_top">Bug#33536</a>)</p></li><li><p>
        Threads created by the event scheduler were incorrectly counted
        against the <code class="literal">max_connections</code> thread limit,
        which could lead to client lockout.
       (<a href="http://bugs.mysql.com/33507" target="_top">Bug#33507</a>)</p></li><li><p>
        Dropping a function after dropping the function's creator
        could cause the server to crash.
       (<a href="http://bugs.mysql.com/33464" target="_top">Bug#33464</a>)</p></li><li><p>
        Certain combinations of views, subselects with outer references
        and stored routines or triggers could cause the server to crash.
       (<a href="http://bugs.mysql.com/33389" target="_top">Bug#33389</a>)</p></li><li><p>
        <code class="literal">SET GLOBAL myisam_max_sort_file_size=DEFAULT</code>
        set <code class="literal">myisam_max_sort_file_size</code> to an incorrect
        value.
       (<a href="http://bugs.mysql.com/33382" target="_top">Bug#33382</a>)</p><p>See also <a href="http://bugs.mysql.com/31177" target="_top">Bug#31177</a></p></li><li><p>
        <code class="literal">ENUM</code>- or <code class="literal">SET</code>-valued plugin
        variables could not be set from the command line.
       (<a href="http://bugs.mysql.com/33358" target="_top">Bug#33358</a>)</p></li><li><p>
        For <code class="literal">InnoDB</code> tables, there was a race condition
        involving the data dictionary and repartitioning.
       (<a href="http://bugs.mysql.com/33349" target="_top">Bug#33349</a>)</p></li><li><p>
        Loading plugins via command-line options to
        <span><strong class="command">mysqld</strong></span> could cause an assertion failure.
       (<a href="http://bugs.mysql.com/33345" target="_top">Bug#33345</a>)</p></li><li><p>
        <a href="functions.html#function_sleep"><code class="literal">SLEEP(0)</code></a> failed to return on
        64-bit Mac OS X due to a bug in
        <code class="literal">pthread_cond_timedwait()</code>.
       (<a href="http://bugs.mysql.com/33304" target="_top">Bug#33304</a>)</p></li><li><p>
        Using <span><strong class="keycap">Control-R</strong></span> in the <span><strong class="command">mysql</strong></span>
        client caused it to crash.
       (<a href="http://bugs.mysql.com/33288" target="_top">Bug#33288</a>)</p></li><li><p>
        For <code class="literal">MyISAM</code> tables, <code class="literal">CHECK
        TABLE</code> (non-<code class="literal">QUICK</code>) and any form of
        <code class="literal">REPAIR TABLE</code> incorrected treated rows as
        corrupted under the combination of the following conditions:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The table had dynamic row format
          </p></li><li><p>
            The table had a <code class="literal">CHAR</code> (not
            <code class="literal">VARCHAR</code>) column longer than 127 bytes
            (for multi-byte character sets this could be less than 127
            characters)
          </p></li><li><p>
            The table had rows with a signifcant length of more than 127
            bytes significant length in that <code class="literal">CHAR</code>
            column (that is, a byte beyond byte position 127 must be a
            non-space character)
          </p></li></ul></div><p>
        This problem affected <code class="literal">CHECK TABLE</code>,
        <code class="literal">REPAIR TABLE</code>, <code class="literal">OPTIMIZE
        TABLE</code>, <code class="literal">ALTER TABLE</code>. <code class="literal">CHECK
        TABLE</code> reported and marked the table as crashed if any
        row was present that fulfilled the third condition. The other
        statements deleted these rows.
       (<a href="http://bugs.mysql.com/33222" target="_top">Bug#33222</a>)</p></li><li><p>
        Granting the <code class="literal">UPDATE</code> privilege on one column
        of a view caused the server to crash.
       (<a href="http://bugs.mysql.com/33201" target="_top">Bug#33201</a>)</p></li><li><p>
        For <code class="literal">DECIMAL</code> columns used with the
        <a href="functions.html#function_round"><code class="literal">ROUND(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>D</code></em>)</code></a>
        or
        <a href="functions.html#function_truncate"><code class="literal">TRUNCATE(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>D</code></em>)</code></a>
        function with a non-constant value of
        <em class="replaceable"><code>D</code></em>, adding an <code class="literal">ORDER
        BY</code> for the function result produced misordered output.
       (<a href="http://bugs.mysql.com/33143" target="_top">Bug#33143</a>)</p><p>See also <a href="http://bugs.mysql.com/33402" target="_top">Bug#33402</a>, <a href="http://bugs.mysql.com/30617" target="_top">Bug#30617</a></p></li><li><p>
        The <code class="literal">CSV</code> engine did not honor update requests
        for <code class="literal">BLOB</code> columns when the new column value
        had the same length as the value to be updated.
       (<a href="http://bugs.mysql.com/33067" target="_top">Bug#33067</a>)</p></li><li><p>
        After receiving a <code class="literal">SIGHUP</code> signal, the server
        could crash, and user-specified log options were ignored when
        reopening the logs.
       (<a href="http://bugs.mysql.com/33065" target="_top">Bug#33065</a>)</p></li><li><p>
        When MySQL was built with OpenSSL, the SSL library was not
        properly initialized with information of which endpoint it was
        (server or client), causing connection failures.
       (<a href="http://bugs.mysql.com/33050" target="_top">Bug#33050</a>)</p></li><li><p>
        Under some circumstances a combination of aggregate functions
        and <code class="literal">GROUP BY</code> in a <code class="literal">SELECT</code>
        query over a view could lead to incorrect calculation of the
        result type of the aggregate function. This in turn could lead
        to incorrect results, or to crashes on debug builds of the
        server.
       (<a href="http://bugs.mysql.com/33049" target="_top">Bug#33049</a>)</p></li><li><p>
        For <code class="literal">DISTINCT</code> queries, 4.0 and 4.1 stopped
        reading joined tables as soon as the first matching row was
        found. However, this optimzation was lost in MySQL 5.0, which
        instead read all matching rows. This fix for this regression may
        result in a major improvement in performance for
        <code class="literal">DISTINCT</code> queries in cases where many rows
        match.
       (<a href="http://bugs.mysql.com/32942" target="_top">Bug#32942</a>)</p></li><li><p>
        Repeated creation and deletion of views within prepared
        statements could eventually crash the server.
       (<a href="http://bugs.mysql.com/32890" target="_top">Bug#32890</a>)</p><p>See also <a href="http://bugs.mysql.com/34587" target="_top">Bug#34587</a></p></li><li><p>
        Incorrect assertions could cause a server crash for
        <code class="literal">DELETE</code> triggers for transactional tables.
       (<a href="http://bugs.mysql.com/32790" target="_top">Bug#32790</a>)</p></li><li><p>
        In some cases where setting a system variable failed, no error
        was sent to the client, causing the client to hang.
       (<a href="http://bugs.mysql.com/32757" target="_top">Bug#32757</a>)</p></li><li><p>
        Enabling the <code class="literal">PAD_CHAR_TO_FULL_LENGTH</code> SQL mode
        caused privilege-loading operations (such as <code class="literal">FLUSH
        PRIVILEGES</code>) to include trailing spaces from grant
        table values stored in <code class="literal">CHAR</code> columns.
        Authentication for incoming connections failed as a result. Now
        privilege loading does not include trailing spaces, regardless
        of SQL mode.
       (<a href="http://bugs.mysql.com/32753" target="_top">Bug#32753</a>)</p></li><li><p>
        The <code class="literal">SHOW ENGINE INNODB STATUS</code> and
        <code class="literal">SHOW ENGINE INNODB MUTEX</code> statements
        incorrectly required the <code class="literal">SUPER</code> privilege
        rather than the <code class="literal">PROCESS</code> privilege.
       (<a href="http://bugs.mysql.com/32710" target="_top">Bug#32710</a>)</p></li><li><p>
        Inserting strings with a common prefix into a table that used
        the <code class="literal">ucs2</code> character set corrupted the table.
       (<a href="http://bugs.mysql.com/32705" target="_top">Bug#32705</a>)</p></li><li><p>
        Tables in the <code class="literal">mysql</code> database that stored the
        current <code class="literal">sql_mode</code> value as part of stored
        program definitions were not updated with newer mode values
        (<code class="literal">NO_ENGINE_SUBSTITUTION</code>,
        <code class="literal">PAD_CHAR_TO_FULL_LENGTH</code>). This causes various
        problems defining stored programs if those modes were included
        in the current <code class="literal">sql_mode</code> value.
       (<a href="http://bugs.mysql.com/32633" target="_top">Bug#32633</a>)</p></li><li><p>
        A view created with a string literal for one of the columns
        picked up the connection character set, but not the collation.
        Comparison to that field therefore used the default collation
        for that character set, causing an error if the connection
        collation was not compatible with the default collation. The
        problem was caused by text literals in a view being dumped with
        a character set introducer even when this was not necessary,
        sometimes leading to a loss of collation information. Now the
        character set introducer is dumped only if it was included in
        the original query.
       (<a href="http://bugs.mysql.com/32538" target="_top">Bug#32538</a>)</p><p>See also <a href="http://bugs.mysql.com/21505" target="_top">Bug#21505</a></p></li><li><p>
        Queries using <code class="literal">LIKE</code> on tables having indexed
        <code class="literal">CHAR</code> columns using either of the
        <code class="literal">eucjpms</code> or <code class="literal">ujis</code> character
        sets did not return correct results.
       (<a href="http://bugs.mysql.com/32510" target="_top">Bug#32510</a>)</p></li><li><p>
        Executing a prepared statement associated with a materialized
        cursor sent to the client a metadata packet with incorrect table
        and database names. The problem occurred because the server sent
        the the name of the temporary table used by the cursor instead
        of the table name of the original table.
      </p><p>
        The same problem occured when selecting from a view, in which
        case the name of the table name was sent, rather than the name
        of the view.
       (<a href="http://bugs.mysql.com/32265" target="_top">Bug#32265</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> adaptive hash latches could be held
        too long, resulting in a server crash. This fix may also provide
        significant performance improvements on systems on which many
        queries using filesorts with temporary tables are being
        performed.
       (<a href="http://bugs.mysql.com/32149" target="_top">Bug#32149</a>)</p></li><li><p>
        On Windows, <span><strong class="command">mysqltest_embedded.exe</strong></span> did not
        properly execute the <code class="literal">send</code> command.
       (<a href="http://bugs.mysql.com/32044" target="_top">Bug#32044</a>)</p></li><li><p>
        A variable named <code class="literal">read_only</code> could be declared
        even though that is a reserved word.
       (<a href="http://bugs.mysql.com/31947" target="_top">Bug#31947</a>)</p></li><li><p>
        On Windows, the build process failed with four parallel build
        threads.
       (<a href="http://bugs.mysql.com/31929" target="_top">Bug#31929</a>)</p></li><li><p>
        Queries testing numeric constants containing leading zeroes
        against <code class="literal">ZEROFILL</code> columns were not evaluated
        correctly.
       (<a href="http://bugs.mysql.com/31887" target="_top">Bug#31887</a>)</p></li><li><p>
        If an error occurred during file creation, the server sometimes
        did not remove the file, resulting in an unused file in the
        filesystem.
       (<a href="http://bugs.mysql.com/31781" target="_top">Bug#31781</a>)</p></li><li><p>
        The <span><strong class="command">mysqld</strong></span> crash handler failed on Windows.
       (<a href="http://bugs.mysql.com/31745" target="_top">Bug#31745</a>)</p></li><li><p>
        When upgrading from MySQL 5.1.19 to any version between MySQL
        5.1.20 to MySQL 5.1.23, the MySQL Instance Configuration Wizard
        would fail to account for the change in name for the
        <span><strong class="command">mysqld-nt.exe</strong></span> to
        <span><strong class="command">mysqld.exe</strong></span>, causing MySQL to fail to start
        properly after the upgrade.
       (<a href="http://bugs.mysql.com/31674" target="_top">Bug#31674</a>)</p></li><li><p>
        The server returned the error message <span class="errortext">Out of memory;
        restart server and try again</span> when the actual problem
        was that the sort buffer was too small. Now an appropriate error
        message is returned in such cases.
       (<a href="http://bugs.mysql.com/31590" target="_top">Bug#31590</a>)</p></li><li><p>
        A table having an index that included a <code class="literal">BLOB</code>
        or <code class="literal">TEXT</code> column, and that was originally
        created with a MySQL server using version 4.1 or earlier, could
        not be opened by a 5.1 or later server.
       (<a href="http://bugs.mysql.com/31331" target="_top">Bug#31331</a>)</p></li><li><p>
        The <code class="literal">-</code>, <code class="literal">*</code>, and
        <code class="literal">/</code> operators and the functions
        <a href="functions.html#function_pow"><code class="literal">POW()</code></a> and
        <a href="functions.html#function_exp"><code class="literal">EXP()</code></a> could misbehave when used
        with floating-point numbers. Previously they might return
        <code class="literal">+INF</code>, <code class="literal">-INF</code>, or
        <code class="literal">NaN</code> in cases of numeric overflow (including
        that caused by division by zero) or when invalid arguments were
        used. Now <code class="literal">NULL</code> is returned in all such cases.
       (<a href="http://bugs.mysql.com/31236" target="_top">Bug#31236</a>)</p></li><li><p>
        The <a href="apis.html#mysql-change-user" title="29.2.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a> C API
        function caused global
        <code class="literal">Com_<em class="replaceable"><code>xxx</code></em></code> status
        variable values to be incorrect.
       (<a href="http://bugs.mysql.com/31222" target="_top">Bug#31222</a>)</p></li><li><p>
        When sorting privilege table rows, the server treated escaped
        wildcard characters (<code class="literal">\%</code> and
        <code class="literal">\_</code>) the same as unescaped wildcard characters
        (<code class="literal">%</code> and <code class="literal">_</code>), resulting in
        incorrect row ordering.
       (<a href="http://bugs.mysql.com/31194" target="_top">Bug#31194</a>)</p></li><li><p>
        On Windows, <code class="literal">SHOW PROCESSLIST</code> could display
        process entries with a <code class="literal">State</code> value of
        <code class="literal">*** DEAD ***</code>.
       (<a href="http://bugs.mysql.com/30960" target="_top">Bug#30960</a>)</p></li><li><p>
        <a href="functions.html#function_round"><code class="literal">ROUND(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>D</code></em>)</code></a>
        or
        <a href="functions.html#function_truncate"><code class="literal">TRUNCATE(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>D</code></em>)</code></a>
        for non-constant values of <em class="replaceable"><code>D</code></em> could
        crash the server if these functions were used in an
        <code class="literal">ORDER BY</code> that was resolved using
        <code class="literal">filesort</code>.
       (<a href="http://bugs.mysql.com/30889" target="_top">Bug#30889</a>)</p></li><li><p>
        Resetting the query cache by issuing a <code class="literal">SET GLOBAL
        query_cache_size=0</code> statement caused the server to
        crash if it concurrently was saving a new result set to the
        query cache.
       (<a href="http://bugs.mysql.com/30887" target="_top">Bug#30887</a>)</p></li><li><p>
        Manifest problems prevented
        <span><strong class="command">MySQLInstanceConfig.exe</strong></span> from running on
        Windows Vista.
       (<a href="http://bugs.mysql.com/30823" target="_top">Bug#30823</a>)</p></li><li><p>
        If an alias was used to refer to the value returned by a stored
        function within a subselect, the outer select recognized the
        alias but failed to retrieve the value assigned to it in the
        subselect.
       (<a href="http://bugs.mysql.com/30787" target="_top">Bug#30787</a>)</p></li><li><p>
        Binary logging for a stored procedure differed depending on
        whether or not execution occurred in a prepared statement.
       (<a href="http://bugs.mysql.com/30604" target="_top">Bug#30604</a>)</p></li><li><p>
        Replication of <code class="literal">LOAD DATA INFILE</code> could fail
        when <code class="literal">read_buffer_size</code> was larger than
        <code class="literal">max_allowed_packet</code>.
       (<a href="http://bugs.mysql.com/30435" target="_top">Bug#30435</a>)</p></li><li><p>
        An orphaned PID file from a no-longer-running process could
        cause <span><strong class="command">mysql.server</strong></span> to wait for that process
        to exit even though it does not exist.
       (<a href="http://bugs.mysql.com/30378" target="_top">Bug#30378</a>)</p></li><li><p>
        The <code class="literal">Table_locks_waited</code> waited variable was
        not incremented in the cases that a lock had to be waited for
        but the waiting thread was killed or the request was aborted.
       (<a href="http://bugs.mysql.com/30331" target="_top">Bug#30331</a>)</p></li><li><p>
        The <code class="literal">Com_create_function</code> status variable was
        not incremented properly.
       (<a href="http://bugs.mysql.com/30252" target="_top">Bug#30252</a>)</p></li><li><p>
        View metadata returned from
        <code class="literal">INFORMATION_SCHEMA.VIEWS</code> was changed by the
        fix for <a href="http://bugs.mysql.com/11986" target="_top">Bug#11986</a>, causing the information returned in MySQL 5.1
        to differ from that returned in 5.0.
       (<a href="http://bugs.mysql.com/30217" target="_top">Bug#30217</a>)</p></li><li><p>
        <span><strong class="command">mysqld</strong></span> displayed the
        <code class="option">--enable-pstack</code> option in its help message even
        if MySQL was configured without <code class="option">--with-pstack</code>.
       (<a href="http://bugs.mysql.com/29836" target="_top">Bug#29836</a>)</p></li><li><p>
        The <span><strong class="command">mysql_config</strong></span> command would output
        <code class="literal">CFLAGS</code> values that were incompatible with C++
        for the HP-UX platform.
       (<a href="http://bugs.mysql.com/29645" target="_top">Bug#29645</a>)</p></li><li><p>
        Replication crashed with the <code class="literal">NDB</code> storage
        engine when <span><strong class="command">mysqld</strong></span> was started with
        <code class="option">--character-set-server=ucs2</code>.
       (<a href="http://bugs.mysql.com/29562" target="_top">Bug#29562</a>)</p></li><li><p>
        Views were treated as insertable even if some base table columns
        with no default value were omitted from the view definition.
        (This is contrary to the condition for insertability that a view
        must contain all columns in the base table that do not have a
        default value.)
       (<a href="http://bugs.mysql.com/29477" target="_top">Bug#29477</a>)</p></li><li><p>
        <span><strong class="command">myisamchk</strong></span> always reported the character set
        for a table as <code class="literal">latin1_swedish_ci (8)</code>
        regardless of the table' actual character set.
       (<a href="http://bugs.mysql.com/29182" target="_top">Bug#29182</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> could return an incorrect rows-updated
        value for <code class="literal">UPDATE</code> statements.
       (<a href="http://bugs.mysql.com/29157" target="_top">Bug#29157</a>)</p></li><li><p>
        The MySQL preferences pane did not work to start or stop MySQL
        on Mac OS X 10.5 (Leopard).
       (<a href="http://bugs.mysql.com/28854" target="_top">Bug#28854</a>)</p></li><li><p>
        For upgrading to a new major version using RPM packages (such as
        4.1 to 5.0), if the installation procedure found an existing
        MySQL server running, it could fail to shut down the old server,
        but also erroneously removed the server's socket file. Now the
        procedure checks for an existing server package from a different
        vendor or major MySQL version. In such case, it refuses to
        install the server and recommends how to safely remove the old
        packages before installing the new ones.
       (<a href="http://bugs.mysql.com/28555" target="_top">Bug#28555</a>)</p></li><li><p>
        <span><strong class="command">mysqlhotcopy</strong></span> silently skipped databases with
        names consisting of two alphanumeric characters.
       (<a href="http://bugs.mysql.com/28460" target="_top">Bug#28460</a>)</p></li><li><p>
        No information was written to the general query log for the
        <code class="literal">COM_STMT_CLOSE</code>,
        <code class="literal">COM_STMT_RESET</code>, and
        <code class="literal">COM_STMT_SEND_LONG_DATA</code> commands. (These
        occur when a client invokes the
        <a href="apis.html#mysql-stmt-close" title="29.2.7.6. mysql_stmt_close()"><code class="literal">mysql_stmt_close()</code></a>,
        <a href="apis.html#mysql-stmt-reset" title="29.2.7.21. mysql_stmt_reset()"><code class="literal">mysql_stmt_reset()</code></a> and
        <a href="apis.html#mysql-stmt-send-long-data" title="29.2.7.25. mysql_stmt_send_long_data()"><code class="literal">mysql_stmt_send_long_data()</code></a> C
        API functions.)
       (<a href="http://bugs.mysql.com/28386" target="_top">Bug#28386</a>)</p></li><li><p>
        Previously, the parser accepted the ODBC <code class="literal">{ OJ ... LEFT
        OUTER JOIN ...}</code> syntax for writing left outer joins.
        The parser now allows <code class="literal">{ OJ ... }</code> to be used
        to write other types of joins, such as <code class="literal">INNER
        JOIN</code> or <code class="literal">RIGHT OUTER JOIN</code>. This
        helps with compatibility with some third-party applications, but
        is not official ODBC syntax.
       (<a href="http://bugs.mysql.com/28317" target="_top">Bug#28317</a>)</p></li><li><p>
        The <code class="literal">FEDERATED</code> storage engine did not perform
        identifier quoting for column names that are reserved words when
        sending statements to the remote server.
       (<a href="http://bugs.mysql.com/28269" target="_top">Bug#28269</a>)</p></li><li><p>
        The SQL parser did not accept an empty
        <code class="literal">UNION=()</code> clause. This meant that, when there
        were no underlying tables specified for a
        <code class="literal">MERGE</code> table, <code class="literal">SHOW CREATE
        TABLE</code> and <span><strong class="command">mysqldump</strong></span> both output
        statements that could not be executed.
      </p><p>
        Now it is possible to execute a <code class="literal">CREATE TABLE</code>
        or <code class="literal">ALTER TABLE</code> statement with an empty
        <code class="literal">UNION=()</code> clause. However, <code class="literal">SHOW
        CREATE TABLE</code> and <span><strong class="command">mysqldump</strong></span> do not
        output the <code class="literal">UNION=()</code> clause if there are no
        underlying tables specified for a <code class="literal">MERGE</code>
        table. This also means it is now possible to remove the
        underlying tables for a <code class="literal">MERGE</code> table using
        <code class="literal">ALTER TABLE ... UNION=()</code>.
       (<a href="http://bugs.mysql.com/28248" target="_top">Bug#28248</a>)</p></li><li><p>
        It was possible to exhaust memory by repeatedly running
        <code class="literal">index_merge</code> queries and never performing any
        <code class="literal">FLUSH TABLES</code> statements.
       (<a href="http://bugs.mysql.com/27732" target="_top">Bug#27732</a>)</p></li><li><p>
        When <code class="literal">utf8</code> was set as the connection character
        set, using <a href="functions.html#function_space"><code class="literal">SPACE()</code></a> with a
        non-Unicode column produced an error.
       (<a href="http://bugs.mysql.com/27580" target="_top">Bug#27580</a>)</p><p>See also <a href="http://bugs.mysql.com/23637" target="_top">Bug#23637</a></p></li><li><p>
        The parser rules for the <code class="literal">SHOW PROFILE</code>
        statement were revised to work with older versions of
        <span><strong class="command">bison</strong></span>.
       (<a href="http://bugs.mysql.com/27433" target="_top">Bug#27433</a>)</p></li><li><p>
        <span><strong class="command">resolveip</strong></span> failed to produce correct results
        for hostnames that begin with a digit.
       (<a href="http://bugs.mysql.com/27427" target="_top">Bug#27427</a>)</p></li><li><p>
        In <code class="literal">ORDER BY</code> clauses, mixing aggregate
        functions and non-grouping columns is not allowed if the
        <code class="literal">ONLY_FULL_GROUP_BY</code> SQL mode is enabled.
        However, in some cases, no error was thrown because of
        insufficient checking.
       (<a href="http://bugs.mysql.com/27219" target="_top">Bug#27219</a>)</p></li><li><p>
        For the <code class="option">--record_log_pos</code> option,
        <span><strong class="command">mysqlhotcopy</strong></span> now determines the slave status
        information from the result of <code class="literal">SHOW SLAVE
        STATUS</code> by using the
        <code class="literal">Relay_Master_Log_File</code> and
        <code class="literal">Exec_Master_Log_Pos</code> values rather than the
        <code class="literal">Master_Log_File</code> and
        <code class="literal">Read_Master_Log_Pos</code> values. This provides a
        more accurate indication of slave execution relative to the
        master.
       (<a href="http://bugs.mysql.com/27101" target="_top">Bug#27101</a>)</p></li><li><p>
        The MySQL Instance Configuration Wizard would not allow you to
        choose a service name, even though the criteria for the service
        name were valid. The code that checks the name has been updated
        to support the correct criteria of any string less than 256
        character and not containing either a forward or backward slash
        character.
       (<a href="http://bugs.mysql.com/27013" target="_top">Bug#27013</a>)</p></li><li><p>
        Memory corruption, a crash of the MySQL server, or both, could
        take place if a low-level I/O error occurred while an
        <code class="literal">ARCHIVE</code> table was being opened.
       (<a href="http://bugs.mysql.com/26978" target="_top">Bug#26978</a>)</p></li><li><p>
        <code class="literal">DROP DATABASE</code> failed for attempts to drop
        databases with names that contained the legacy
        <code class="literal">#mysql50#</code> name prefix.
       (<a href="http://bugs.mysql.com/26703" target="_top">Bug#26703</a>)</p></li><li><p>
        <code class="filename">config-win.h</code> unconditionally defined
        <code class="literal">bool</code> as <code class="literal">BOOL</code>, causing
        problems on systems where <code class="literal">bool</code> is 1 byte and
        <code class="literal">BOOL</code> is 4 bytes.
       (<a href="http://bugs.mysql.com/26461" target="_top">Bug#26461</a>)</p></li><li><p>
        On Windows, for distributions built with debugging support,
        <span><strong class="command">mysql</strong></span> could crash if the user typed
        Control-C.
       (<a href="http://bugs.mysql.com/26243" target="_top">Bug#26243</a>)</p></li><li><p>
        The XPath <code class="literal">boolean()</code> function did not cast
        string and nodeset values correctly in some cases. It now
        returns <code class="literal">TRUE</code> for any non-empty string or
        nodeset and 0 for a <code class="literal">NULL</code> string, as specified
        in the XPath standard..
       (<a href="http://bugs.mysql.com/26051" target="_top">Bug#26051</a>)</p></li><li><p>
        When symbolic links were disabled, either with a server startup
        option or by enabling the <code class="literal">NO_DIR_IN_CREATE</code>
        SQL mode, <code class="literal">CREATE TABLE</code> silently ignored the
        <code class="literal">DATA DIRECTORY</code> and <code class="literal">INDEX
        DIRECTORY</code> table options. Now the server issues a
        warning if symbolic links are disabled when these table options
        are used.
       (<a href="http://bugs.mysql.com/25677" target="_top">Bug#25677</a>)</p></li><li><p>
        Attempting to create an index with a prefix on a
        <code class="literal">DECIMAL</code> column appeared to succeed with an
        inaccurate warning message. Now, this action fails with the
        error <span class="errortext">Incorrect prefix key; the used key part isn't a
        string, the used length is longer than the key part, or the
        storage engine doesn't support unique prefix keys</span>.
       (<a href="http://bugs.mysql.com/25426" target="_top">Bug#25426</a>)</p></li><li><p>
        <span><strong class="command">mysqlcheck -A -r</strong></span> did not correctly identify
        all tables that needed repairing.
       (<a href="http://bugs.mysql.com/25347" target="_top">Bug#25347</a>)</p></li><li><p>
        On Windows, an error in <code class="filename">configure.js</code> caused
        installation of source distributions to fail.
       (<a href="http://bugs.mysql.com/25340" target="_top">Bug#25340</a>)</p></li><li><p>
        The <code class="literal">Qcache_free_blocks</code> status variable did
        not display a value of 0 if the query cache was disabled.
       (<a href="http://bugs.mysql.com/25132" target="_top">Bug#25132</a>)</p></li><li><p>
        The client library had no way to return an error if no
        connection had been established. This caused problems such as
        <a href="apis.html#mysql-library-init" title="29.2.3.40. mysql_library_init()"><code class="literal">mysql_library_init()</code></a> failing
        silently if no <code class="filename">errmsg.sys</code> file was
        available.
       (<a href="http://bugs.mysql.com/25097" target="_top">Bug#25097</a>)</p></li><li><p>
        On Mac OS X, the StartupItem for MySQL did not work.
       (<a href="http://bugs.mysql.com/25008" target="_top">Bug#25008</a>)</p></li><li><p>
        For Windows 64-bit builds, enabling shared-memory support caused
        client connections to fail.
       (<a href="http://bugs.mysql.com/24992" target="_top">Bug#24992</a>)</p></li><li><p>
        <span><strong class="command">mysql</strong></span> did not use its completion table. Also,
        the table contained few entries.
       (<a href="http://bugs.mysql.com/24624" target="_top">Bug#24624</a>)</p></li><li><p>
        If a user installed MySQL Server and set a password for the
        <code class="literal">root</code> user, and then uninstalled and
        reinstalled MySQL Server to the same location, the user could
        not use the MySQL Instance Config wizard to configure the server
        because the uninstall operation left the previous data directory
        intact. The config wizard <span class="emphasis"><em>assumed</em></span> that any
        new install (not an upgrade) would have the default data
        directory where the <code class="literal">root</code> user has no
        password. The installer now writes a registry key named
        <code class="literal">FoundExistingDataDir</code>. If the installer finds
        an existing data directory, the key will have a value of 1,
        otherwise it will have a value of 0. When
        <span><strong class="command">MySQLInstanceConfig.exe</strong></span> is run, it will
        attempt to read the key. If it can read the key, and the value
        is 1 and there is no existing instance of the server (indicating
        a new installation), the Config Wizard will allow the user to
        input the old password so the server can be configured.
       (<a href="http://bugs.mysql.com/24215" target="_top">Bug#24215</a>)</p></li><li><p>
        Logging of statements to log tables was incorrect for statements
        that contained <code class="literal">utf8</code>-incompatible binary
        strings. Incompatible sequences are hex-encoded now.
       (<a href="http://bugs.mysql.com/23924" target="_top">Bug#23924</a>)</p></li><li><p>
        The MySQL header files contained some duplicate macro
        definitions that could cause compilation problems.
       (<a href="http://bugs.mysql.com/23839" target="_top">Bug#23839</a>)</p></li><li><p>
        <code class="literal">SHOW COLUMNS</code> on a <code class="literal">TEMPOARY</code>
        table caused locking issues.
       (<a href="http://bugs.mysql.com/23588" target="_top">Bug#23588</a>)</p></li><li><p>
        For distributions compiled with the bundled
        <code class="literal">libedit</code> library, there were difficulties
        using the <span><strong class="command">mysql</strong></span> client to enter input for
        non-ASCII or multi-byte characters.
       (<a href="http://bugs.mysql.com/23097" target="_top">Bug#23097</a>)</p></li><li><p>
        <span><strong class="command">perror</strong></span> reported incomplete or inaccurate
        information.
       (<a href="http://bugs.mysql.com/23028" target="_top">Bug#23028</a>, <a href="http://bugs.mysql.com/25177" target="_top">Bug#25177</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> exhibited thread thrashing with more
        than 50 concurrent connections under an update-intensive
        workload.
       (<a href="http://bugs.mysql.com/22868" target="_top">Bug#22868</a>)</p></li><li><p>
        After stopping and starting the event scheduler, disabled events
        could remain in the execution queue.
       (<a href="http://bugs.mysql.com/22738" target="_top">Bug#22738</a>)</p></li><li><p>
        The server produced a confusing error message when attempting to
        open a table that required a storage engine that was not loaded.
       (<a href="http://bugs.mysql.com/22708" target="_top">Bug#22708</a>)</p></li><li><p>
        For views or stored programs created with an invalid
        <code class="literal">DEFINER</code> value, the error message was
        confusing (did not tie the problem to the
        <code class="literal">DEFINER</code> clause) and has been improved.
       (<a href="http://bugs.mysql.com/21854" target="_top">Bug#21854</a>)</p></li><li><p>
        Warnings for deprecated syntax constructs used in stored
        routines make sense to report only when the routine is being
        created, but they were also being reported when the routine was
        parsed for loading into the execution cache. Now they are
        reported only at routine creation time.
       (<a href="http://bugs.mysql.com/21801" target="_top">Bug#21801</a>)</p></li><li><p>
        Renaming a column that appeared in a foreign key definition did
        not update that definition with the new column name. This
        occurred with both referenced and referencing tables.
       (<a href="http://bugs.mysql.com/21704" target="_top">Bug#21704</a>)</p></li><li><p>
        On Mac OS X, <span><strong class="command">mysqld</strong></span> did not react to Ctrl-C
        when run under <span><strong class="command">gdb</strong></span>, even when run with the
        <code class="option">--gdb</code> option.
       (<a href="http://bugs.mysql.com/21567" target="_top">Bug#21567</a>)</p></li><li><p>
        <code class="literal">CREATE ... SELECT</code> did not always set
        <code class="literal">DEFAULT</code> column values in the new table.
       (<a href="http://bugs.mysql.com/21380" target="_top">Bug#21380</a>)</p></li><li><p>
        <span><strong class="command">mysql_config</strong></span> output did not include
        <code class="literal">-lmygcc</code> on some platforms when it was needed.
       (<a href="http://bugs.mysql.com/21158" target="_top">Bug#21158</a>)</p></li><li><p>
        <span><strong class="command">mysql-stress-test.pl</strong></span> and
        <span><strong class="command">mysqld_multi.server.sh</strong></span> were missing from some
        binary distributions.
       (<a href="http://bugs.mysql.com/21023" target="_top">Bug#21023</a>, <a href="http://bugs.mysql.com/25486" target="_top">Bug#25486</a>)</p></li><li><p>
        The <a href="functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a> function,
        invoked with more than 2147483648 iterations (the size of a
        signed 32-bit integer), terminated prematurely.
       (<a href="http://bugs.mysql.com/20752" target="_top">Bug#20752</a>)</p></li><li><p>
        <span><strong class="command">mysqldumpslow</strong></span> returned a confusing error
        message when no configuration file was found.
       (<a href="http://bugs.mysql.com/20455" target="_top">Bug#20455</a>)</p></li><li><p>
        <span><strong class="command">MySQLInstanceConfig.exe</strong></span> could lose the
        <code class="literal">innodb_data_home_dir</code> setting when
        reconfiguring an instance.
       (<a href="http://bugs.mysql.com/19797" target="_top">Bug#19797</a>)</p></li><li><p>
        <code class="literal">DROP DATABASE</code> did not drop orphaned
        <code class="literal">FOREIGN KEY</code> constraints.
       (<a href="http://bugs.mysql.com/18942" target="_top">Bug#18942</a>)</p></li><li><p>
        <code class="literal">CREATE TABLE</code> allowed 0 as the default value
        for a <code class="literal">TIMESTAMP</code> column when the server was
        running in <code class="literal">NO_ZERO_DATE</code> mode.
       (<a href="http://bugs.mysql.com/18834" target="_top">Bug#18834</a>)</p></li><li><p>
        A <code class="literal">SET</code> column whose definition specified 64
        elements could not be updated using integer values.
       (<a href="http://bugs.mysql.com/15409" target="_top">Bug#15409</a>)</p></li><li><p>
        If a <code class="literal">SELECT</code> calls a stored function in a
        transaction, and a statement within the function fails, that
        statement should roll back. Furthermore, if
        <code class="literal">ROLLBACK</code> is executed after that, the entire
        transaction should be rolled back. Before this fix, the failed
        statement did not roll back when it failed (even though it might
        ultimately get rolled back by a <code class="literal">ROLLBACK</code>
        later that rolls back the entire transaction).
       (<a href="http://bugs.mysql.com/12713" target="_top">Bug#12713</a>)</p><p>See also <a href="http://bugs.mysql.com/34655" target="_top">Bug#34655</a></p></li><li><p>
        The parser incorrectly allowed <code class="literal">SQLSTATE
        '00000'</code> to be specified for a condition handler. (This
        is incorrect because the condition must be a failure condition
        and <code class="literal">'00000'</code> indicates success.)
       (<a href="http://bugs.mysql.com/8759" target="_top">Bug#8759</a>)</p></li><li><p>
        <span><strong class="command">MySQLInstanceConfig.exe</strong></span> did not save the
        <code class="literal">innodb_data_home_dir</code> value to the
        <code class="filename">my.ini</code> file under certain circumstances.
       (<a href="http://bugs.mysql.com/6627" target="_top">Bug#6627</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-23"></a>C.1.7. Changes in  MySQL 5.1.23 (29 January 2008)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>Security Fix</strong></span>: 
        It was possible, by creating a partitioned table using the
        <code class="literal">DATA DIRECTORY</code> and <code class="literal">INDEX
        DIRECTORY</code> options to gain privileges on other tables
        having the same name as the partitioned table. As a result of
        this fix, any table-level <code class="literal">DATA DIRECTORY</code> or
        <code class="literal">INDEX DIRECTORY</code> options are now ignored for
        partitioned tables.
       (<a href="http://bugs.mysql.com/32091" target="_top">Bug#32091</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-5970" target="_top">CVE-2007-5970</a>)</p><p>See also <a href="http://bugs.mysql.com/29325" target="_top">Bug#29325</a>, <a href="http://bugs.mysql.com/32111" target="_top">Bug#32111</a></p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        In MySQL 5.1.6, when log tables were implemented, the default
        log destination for the general query and slow query log was
        <code class="literal">TABLE</code>. This default has been changed to
        <code class="literal">FILE</code>, which is compatible with MySQL 5.0, but
        incompatible with earlier releases of MySQL 5.1 from 5.1.6 to
        5.1.20. If you are upgrading from MySQL 5.0 to this release, no
        logging option changes should be necessary. However, if you are
        upgrading from 5.1.6 through 5.1.20 to this release and were
        using <code class="literal">TABLE</code> logging, use the
        <code class="option">--log-output=TABLE</code> option explicitly to
        preserve your server's table-logging behavior.
      </p><p>
        In MySQL 5.1.x, this bug was addressed twice because it turned
        out that the default was set in two places, only one of which
        was fixed the first time.
       (<a href="http://bugs.mysql.com/29993" target="_top">Bug#29993</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span></p><p>
        The parser accepted statements that contained <code class="literal">/* ...
        */</code> that were not properly closed with
        <code class="literal">*/</code>, such as <code class="literal">SELECT 1 /* +
        2</code>. Statements that contain unclosed
        <code class="literal">/*</code>-comments now are rejected with a syntax
        error.
      </p><p>
        This fix has the potential to cause incompatibilities. Because
        of <a href="http://bugs.mysql.com/26302" target="_top">Bug#26302</a>, which caused the trailing <code class="literal">*/</code>
        to be truncated from comments in views, stored routines,
        triggers, and events, it is possible that objects of those types
        may have been stored with definitions that now will be rejected
        as syntactically invalid. Such objects should be dropped and
        re-created so that their definitions do not contain truncated
        comments.
       (<a href="http://bugs.mysql.com/28779" target="_top">Bug#28779</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The following improvements have been made in the
        <span><strong class="command">ndb_size.pl</strong></span> utility:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The script can now be used with multiple databases; lists of
            databases and tables can also be excluded from analysis.
          </p></li><li><p>
            Schema name information has been added to index table
            calculations.
          </p></li><li><p>
            The database name is now an optional parameter, the
            exclusion of which causes all databases to be examined.
          </p></li><li><p>
            If selecting from <code class="literal">INFORMATION_SCHEMA</code>
            fails, the script now attempts to fall back to <code class="literal">SHOW
            TABLES</code>.
          </p></li><li><p>
            A <code class="option">--real_table_name</code> option has been added;
            this designates a table to handle unique index size
            calculations.
          </p></li><li><p>
            The report title has been amended to cover cases where more
            than one database is being analyzed.
          </p></li></ul></div><p>
        Support for a <code class="option">--socket</code> option was also added.
      </p><p>
        For more information, see
        <a href="mysql-cluster.html#mysql-cluster-utilities-ndb-size" title="20.10.15. ndb_size.pl — NDBCLUSTER Size Requirement Estimator">Section 20.10.15, “<span><strong class="command">ndb_size.pl</strong></span> — NDBCLUSTER Size Requirement Estimator”</a>.
       (<a href="http://bugs.mysql.com/28683" target="_top">Bug#28683</a>, <a href="http://bugs.mysql.com/28253" target="_top">Bug#28253</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Mapping of <code class="literal">NDB</code> error codes to MySQL storage
        engine error codes has been improved.
       (<a href="http://bugs.mysql.com/28423" target="_top">Bug#28423</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The output from the cluster management client showing the
        progress of data node starts has been improved.
       (<a href="http://bugs.mysql.com/23354" target="_top">Bug#23354</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Error messages for partitioning syntax errors have been made
        more descriptive.
       (<a href="http://bugs.mysql.com/29368" target="_top">Bug#29368</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Replication of the following SQL functions now switches to
        row-based logging in <code class="literal">MIXED</code> mode, and
        generates a warning in <code class="literal">STATEMENT</code> mode:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <a href="functions.html#function_user"><code class="literal">USER()</code></a>
            </p></li><li><p>
              <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> and its
              alias <code class="literal">CURRENT_USER</code>
            </p></li><li><p>
              <a href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a>
            </p></li><li><p>
              <a href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a>
            </p></li></ul></div><p>
      </p><p>
        See <a href="server-administration.html#binary-log-mixed" title="5.2.4.3. Mixed Binary Logging Format">Section 5.2.4.3, “Mixed Binary Logging Format”</a>, for more information.
       (<a href="http://bugs.mysql.com/12092" target="_top">Bug#12092</a>, <a href="http://bugs.mysql.com/28086" target="_top">Bug#28086</a>, <a href="http://bugs.mysql.com/30244" target="_top">Bug#30244</a>)</p></li><li><p>
        <span><strong class="command">mysqltest</strong></span> now has a
        <code class="literal">change_user</code> command to change the user for
        the current connection. (It invokes the
        <a href="apis.html#mysql-change-user" title="29.2.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a> C API
        function.)
       (<a href="http://bugs.mysql.com/31608" target="_top">Bug#31608</a>)</p></li><li><p>
        <span><strong class="command">mysql-test-run.pl</strong></span> now allows a suite name
        prefix to be specified in command-line arguments that name test
        cases. The test name syntax now is
        <code class="literal">[<em class="replaceable"><code>suite_name</code></em>.]<em class="replaceable"><code>test_name</code></em>[.<em class="replaceable"><code>suffix</code></em>]</code>.
        For example, <span><strong class="command">mysql-test-run.pl binlog.mytest</strong></span>
        runs the <code class="filename">mytest.test</code> test in the
        <code class="literal">binlog</code> test suite.
       (<a href="http://bugs.mysql.com/31400" target="_top">Bug#31400</a>)</p></li><li><p>
        The <code class="option">--event-scheduler</code> option without a value
        disabled the event scheduler. Now it enables the event
        scheduler.
       (<a href="http://bugs.mysql.com/31332" target="_top">Bug#31332</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> produces a <code class="literal">-- Dump
        completed on <em class="replaceable"><code>DATE</code></em></code> comment
        at the end of the dump if <code class="option">--comments</code> is given.
        The date causes dump files for identical data take at different
        times to appear to be different. The new options
        <code class="option">--dump-date</code> and
        <code class="option">--skip-dump-date</code> control whether the date is
        added to the comment. <code class="option">--skip-dump-date</code>
        suppresses date printing. The default is
        <code class="option">--dump-date</code> (include the date in the comment).
       (<a href="http://bugs.mysql.com/31077" target="_top">Bug#31077</a>)</p></li><li><p>
        Server parser performance was improved for expression parsing by
        lowering the number of state transitions and reductions needed.
       (<a href="http://bugs.mysql.com/30625" target="_top">Bug#30625</a>)</p></li><li><p>
        Server parser performance was improved for identifier lists,
        expression lists, and UDF expression lists.
       (<a href="http://bugs.mysql.com/30333" target="_top">Bug#30333</a>)</p></li><li><p>
        Server parser performance was improved for boolean expressions.
       (<a href="http://bugs.mysql.com/30237" target="_top">Bug#30237</a>)</p></li><li><p>
        The <code class="literal">LAST_EXECUTED</code> column of the
        <code class="literal">INFORMATION_SCHEMA.EVENTS</code> table now indicates
        when the event started executing rather than when it finished
        executing. As a result, the <code class="literal">ENDS</code> column is
        never less than <code class="literal">LAST_EXECUTED</code>.
       (<a href="http://bugs.mysql.com/29830" target="_top">Bug#29830</a>)</p></li><li><p>
        The <code class="literal">mysql_odbc_escape_string()</code> C API
        function has been removed. It has multi-byte character escaping
        issues, doesn't honor the
        <code class="literal">NO_BACKSLASH_ESCAPES</code> SQL mode and is not
        needed anymore by Connector/ODBC as of 3.51.17.
       (<a href="http://bugs.mysql.com/29592" target="_top">Bug#29592</a>)</p></li><li><p>
        If a <code class="literal">MyISAM</code> table is created with no
        <code class="literal">DATA DIRECTORY</code> option, the
        <code class="filename">.MYD</code> file is created in the database
        directory. By default, if <code class="literal">MyISAM</code> finds an
        existing <code class="filename">.MYD</code> file in this case, it
        overwrites it. The same applies to <code class="filename">.MYI</code>
        files for tables created with no <code class="literal">INDEX
        DIRECTORY</code> option. To suppress this behavior, start the
        server with the new <code class="option">--keep_files_on_create</code>
        option, in which case <code class="literal">MyISAM</code> will not
        overwrite existing files and returns an error instead.
       (<a href="http://bugs.mysql.com/29325" target="_top">Bug#29325</a>)</p></li><li><p>
        The default value of the <code class="literal">connect_timeout</code>
        system variable was increased from 5 to 10 seconds. This might
        help in cases where clients frequently encounter errors of the
        form <code class="literal">Lost connection to MySQL server at
        '<em class="replaceable"><code>XXX</code></em>', system error:
        <em class="replaceable"><code>errno</code></em></code>.
       (<a href="http://bugs.mysql.com/28359" target="_top">Bug#28359</a>)</p></li><li><p>
        MySQL now can be compiled with <span><strong class="command">gcc</strong></span> 4.2.x.
        There was a problem involving a conflict with the
        <code class="literal">min()</code> and <code class="literal">max()</code> macros
        in <code class="filename">my_global.h</code>.
       (<a href="http://bugs.mysql.com/28184" target="_top">Bug#28184</a>)</p></li><li><p>
        The argument for the <span><strong class="command">mysql-test-run.pl</strong></span>
        <code class="option">--do-test</code> and <code class="option">--skip-test</code>
        options is now interpreted as a Perl regular expression if there
        is a pattern metacharacter in the argument value. This allows
        more flexible specification of which tests to perform or skip.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Fix</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        It was possible for any connected user to issue a
        <code class="literal">BINLOG</code> statement, which could be used to
        escalate privileges.
      </p><p>
        Use of the <code class="literal">BINLOG</code> statement now requires the
        <code class="literal">SUPER</code> privilege.
       (<a href="http://bugs.mysql.com/31611" target="_top">Bug#31611</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6313" target="_top">CVE-2007-6313</a>)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        Three vulnerabilities in yaSSL versions 1.7.5 and earlier were
        discovered that could lead to a server crash or execution of
        unauthorized code. The exploit requires a server with yaSSL
        enabled and TCP/IP connections enabled, but does not require
        valid MySQL account credentials. The exploit does not apply to
        OpenSSL.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The proof-of-concept exploit is freely available on the
          Internet. Everyone with a vulnerable MySQL configuration is
          advised to upgrade <span class="emphasis"><em>immediately</em></span>.
        </p></div><p>(<a href="http://bugs.mysql.com/33814" target="_top">Bug#33814</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-0226" target="_top">CVE-2008-0226</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-0227" target="_top">CVE-2008-0227</a>)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        Using <code class="literal">RENAME TABLE</code> against a table with
        explicit <code class="literal">DATA DIRECTORY</code> and <code class="literal">INDEX
        DIRECTORY</code> options can be used to overwrite system
        table information by replacing the symbolic link points. the
        file to which the symlink points.
      </p><p>
        MySQL will now return an error when the file to which the
        symlink points already exists.
       (<a href="http://bugs.mysql.com/32111" target="_top">Bug#32111</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-5969" target="_top">CVE-2007-5969</a>)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        <code class="literal">ALTER VIEW</code> retained the original
        <code class="literal">DEFINER</code> value, even when altered by another
        user, which could allow that user to gain the access rights of
        the view. Now <code class="literal">ALTER VIEW</code> is allowed only to
        the original definer or users with the <code class="literal">SUPER</code>
        privilege.
       (<a href="http://bugs.mysql.com/29908" target="_top">Bug#29908</a>)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        When using a <code class="literal">FEDERATED</code> table, the local
        server could be forced to crash if the remote server returned a
        result with fewer columns than expected.
       (<a href="http://bugs.mysql.com/29801" target="_top">Bug#29801</a>)</p></li><li><p><span class="bold"><strong>Security Enhancement</strong></span>: 
        It was possible to force an error message of excessive length
        which could lead to a buffer overflow. This has been made no
        longer possible as a security precaution.
       (<a href="http://bugs.mysql.com/32707" target="_top">Bug#32707</a>)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Incompatible Change</strong></span>: 
        A number of problems existed in the implementation of
        <code class="literal">MERGE</code> tables that could cause problems. The
        problems are summarized below:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <a href="http://bugs.mysql.com/26379" target="_top">Bug#26379</a> - Combination of <code class="literal">FLUSH TABLE</code>
            and <code class="literal">REPAIR TABLE</code> corrupts a
            <code class="literal">MERGE</code> table. This was caused in a number
            of situations:
          </p><div class="orderedlist"><ol type="1"><li><p>
                A thread trying to lock a <code class="literal">MERGE</code> table
                performs busy waiting while <code class="literal">REPAIR
                TABLE</code> or a similar table administration task
                is ongoing on one or more of its MyISAM tables.
              </p></li><li><p>
                A thread trying to lock a <code class="literal">MERGE</code> table
                performs busy waiting until all threads that did
                <code class="literal">REPAIR TABLE</code> or similar table
                administration tasks on one or more of its MyISAM tables
                in LOCK TABLES segments do UNLOCK TABLES. The difference
                against problem #1 is that the busy waiting takes place
                after the administration task. It is terminated by
                <code class="literal">UNLOCK TABLES</code> only.
              </p></li><li><p>
                Two <code class="literal">FLUSH TABLES</code> within a
                <code class="literal">LOCK TABLES</code> segment can invalidate
                the lock. This does not require a
                <code class="literal">MERGE</code> table. The first <code class="literal">FLUSH
                TABLES</code> can be replaced by any statement that
                requires other threads to reopen the table. In 5.0 and
                5.1 a single <code class="literal">FLUSH TABLES</code> can provoke
                the problem.
              </p></li></ol></div></li><li><p>
            <a href="http://bugs.mysql.com/26867" target="_top">Bug#26867</a> - Simultaneously executing <code class="literal">LOCK
            TABLES</code> and <code class="literal">REPAIR TABLE</code> on a
            <code class="literal">MERGE</code> table would result in memory/cpu
            hogging.
          </p><p>
            Trying DML on a <code class="literal">MERGE</code> table, which has a
            child locked and repaired by another thread, made an
            infinite loop in the server.
          </p></li><li><p>
            <a href="http://bugs.mysql.com/26377" target="_top">Bug#26377</a> - Deadlock with <code class="literal">MERGE</code> and
            <code class="literal">FLUSH TABLE</code>
          </p><p>
            Locking a MERGE table and its children in parent-child order
            and flushing the child deadlocked the server.
          </p></li><li><p>
            <a href="http://bugs.mysql.com/25038" target="_top">Bug#25038</a> - Waiting <code class="literal">TRUNCATE</code>
          </p><p>
            Truncating a MERGE child, while the MERGE table was in use,
            let the truncate fail instead of waiting for the table to
            become free.
          </p></li><li><p>
            <a href="http://bugs.mysql.com/25700" target="_top">Bug#25700</a> - <code class="literal">MERGE</code> base tables get
            corrupted by <code class="literal">OPTIMIZE/ANALYZE/REPAIR
            TABLE</code>
          </p><p>
            Repairing a child of an open <code class="literal">MERGE</code> table
            corrupted the child. It was necessary to
            <code class="literal">FLUSH</code> the child first.
          </p></li><li><p>
            <a href="http://bugs.mysql.com/30275" target="_top">Bug#30275</a> - <code class="literal">MERGE</code> tables: <code class="literal">FLUSH
            TABLES</code> or <code class="literal">UNLOCK TABLES</code> causes
            server to crash.
          </p><p>
            Flushing and optimizing locked <code class="literal">MERGE</code>
            children crashed the server.
          </p></li><li><p>
            <a href="http://bugs.mysql.com/19627" target="_top">Bug#19627</a> - temporary merge table locking
          </p><p>
            Use of a temporary <code class="literal">MERGE</code> table with
            non-temporary children could corrupt the children.
          </p><p>
            Temporary tables are never locked. Creation of tables with
            non-temporary children of a temporary
            <code class="literal">MERGE</code> table is now prohibited.
          </p></li><li><p>
            <a href="http://bugs.mysql.com/27660" target="_top">Bug#27660</a> - <code class="literal">Falcon</code>:
            <code class="literal">MERGE</code> table possible
          </p><p>
            It was possible to create a <code class="literal">MERGE</code> table
            with non-<code class="literal">MyISAM</code> children.
          </p></li><li><p>
            <a href="http://bugs.mysql.com/30273" target="_top">Bug#30273</a> - <code class="literal">MERGE</code> tables: Can't lock
            file (errno: 155)
          </p><p>
            This was a Windows-only bug. Table administration statements
            sometimes failed with "Can't lock file (errno: 155)".
          </p></li></ul></div><p>
        The fix introduces the following changes in behavior:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            This patch changes the behavior of temporary
            <code class="literal">MERGE</code> tables. Temporary
            <code class="literal">MERGE</code> must have temporary children. The
            old behavior was wrong. A temporary table is not locked.
            Hence even non-temporary children were not locked. See <a href="http://bugs.mysql.com/19627" target="_top">Bug#19627</a>.
          </p></li><li><p>
            You cannot change the union list of a non-temporary
            <code class="literal">MERGE</code> table when LOCK TABLES is in
            effect. The following does <span class="emphasis"><em>not</em></span> work:
</p><pre class="programlisting">CREATE TABLE m1 ... ENGINE=MRG_MYISAM ...;
LOCK TABLES t1 WRITE, t2 WRITE, m1 WRITE;
ALTER TABLE m1 ... UNION=(t1,t2) ...;
</pre><p>
            However, you can do this with a temporary
            <code class="literal">MERGE</code> table.
          </p></li><li><p>
            You cannot create a <code class="literal">MERGE</code> table with
            <code class="literal">CREATE ... SELECT</code>, neither as a temporary
            <code class="literal">MERGE</code> table, nor as a non-temporary
            <code class="literal">MERGE</code> table. For example, <code class="literal">CREATE
            TABLE m1 ... ENGINE=MRG_MYISAM ... SELECT ...;</code>
            causes the error message: <span class="errortext">table is not BASE
            TABLE</span>.
          </p></li></ul></div><p>(<a href="http://bugs.mysql.com/19627" target="_top">Bug#19627</a>, <a href="http://bugs.mysql.com/25038" target="_top">Bug#25038</a>, <a href="http://bugs.mysql.com/25700" target="_top">Bug#25700</a>, <a href="http://bugs.mysql.com/26377" target="_top">Bug#26377</a>, <a href="http://bugs.mysql.com/26379" target="_top">Bug#26379</a>, <a href="http://bugs.mysql.com/26867" target="_top">Bug#26867</a>, <a href="http://bugs.mysql.com/27660" target="_top">Bug#27660</a>, <a href="http://bugs.mysql.com/30275" target="_top">Bug#30275</a>, <a href="http://bugs.mysql.com/30491" target="_top">Bug#30491</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        It is no longer possible to create <code class="literal">CSV</code> tables
        with <code class="literal">NULL</code> columns. However, for backwards
        compatibility, you can continue to use such tables that were
        created in previous MySQL releases.
       (<a href="http://bugs.mysql.com/32050" target="_top">Bug#32050</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        With <code class="literal">ONLY_FULL_GROUP_BY</code> SQL mode enabled,
        queries such as <code class="literal">SELECT a FROM t1 HAVING
        COUNT(*)&gt;2</code> were not being rejected as they should
        have been.
      </p><p>
        This fix results in the following behavior:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            There is a check against mixing group and non-group columns
            <span class="emphasis"><em>only</em></span> when
            <code class="literal">ONLY_FULL_GROUP_BY</code> is enabled.
          </p></li><li><p>
            This check is done both for the select list and for the
            <code class="literal">HAVING</code> clause if there is one.
          </p></li></ul></div><p>
        This behavior differs from previous versions as follows:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Previously, the <code class="literal">HAVING</code> clause was not
            checked when <code class="literal">ONLY_FULL_GROUP_BY</code> was
            enabled; now it is checked.
          </p></li><li><p>
            Previously, the select list was checked even when
            <code class="literal">ONLY_FULL_GROUP_BY</code> was not enabled; now
            it is checked only when
            <code class="literal">ONLY_FULL_GROUP_BY</code> is enabled.
          </p></li></ul></div><p>(<a href="http://bugs.mysql.com/31794" target="_top">Bug#31794</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Inserting a row with a <code class="literal">NULL</code> value for a
        <code class="literal">DATETIME</code> column results in a
        <code class="literal">CSV</code> file that the storage engine cannot read.
      </p><p>
        All <code class="literal">CSV</code> tables now need to be defined with
        each column marked as <code class="literal">NOT NULL</code>. An error is
        raised if you try to create a <code class="literal">CSV</code> table with
        columns that are not defined with <code class="literal">NOT NULL</code>.
       (<a href="http://bugs.mysql.com/31473" target="_top">Bug#31473</a>, <a href="http://bugs.mysql.com/32817" target="_top">Bug#32817</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        <code class="literal">SET PASSWORD</code> statements now cause an implicit
        commit, and thus are prohibited within stored functions and
        triggers.
       (<a href="http://bugs.mysql.com/30904" target="_top">Bug#30904</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The <code class="literal">mysql_install_db</code> script could fail to
        locate some components (including <span><strong class="command">resolveip</strong></span>)
        during execution if the <code class="option">--basedir</code> option was
        specified on the command-line or within the
        <code class="filename">my.cnf</code> file. This was due to a conflict
        when comparing the compiled-in values and the supplied values.
      </p><p>
        The <code class="literal">--source-install</code> command-line option to
        the script has been removed and replaced with the
        <code class="literal">--srcdir</code> option.
        <span><strong class="command">mysql_install_db</strong></span> now locates components
        either using the compiled-in options, the
        <code class="option">--basedir</code> option or <code class="option">--srcdir</code>
        option.
       (<a href="http://bugs.mysql.com/30759" target="_top">Bug#30759</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Multiple-table <code class="literal">DELETE</code> statements containing
        ambiguous aliases could have unintended side effects such as
        deleting rows from the wrong table. Example:
      </p><pre class="programlisting">DELETE FROM t1 AS a2 USING t1 AS a1 INNER JOIN t2 AS a2;
</pre><p>
        Now alias declarations can be declared only in the
        <em class="replaceable"><code>table_references</code></em> part. Elsewhere in
        the statement, alias references are allowed but not alias
        declarations. Statements containing aliases that are no longer
        allowed must be rewritten.
       (<a href="http://bugs.mysql.com/30234" target="_top">Bug#30234</a>)</p><p>See also <a href="http://bugs.mysql.com/27525" target="_top">Bug#27525</a></p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Within a stored routine, it is no longer allowable to declare a
        cursor for a <code class="literal">SHOW</code> statement. This happened to
        work in some instances, but is no longer supported.
       (<a href="http://bugs.mysql.com/29223" target="_top">Bug#29223</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Several type-preserving functions and operators returned an
        incorrect result type that does not match their argument types:
        <a href="functions.html#function_coalesce"><code class="literal">COALESCE()</code></a>,
        <a href="functions.html#function_if"><code class="literal">IF()</code></a>,
        <a href="functions.html#function_ifnull"><code class="literal">IFNULL()</code></a>,
        <a href="functions.html#function_least"><code class="literal">LEAST()</code></a>,
        <a href="functions.html#function_greatest"><code class="literal">GREATEST()</code></a>,
        <a href="functions.html#operator_case"><code class="literal">CASE</code></a>. These now aggregate
        using the precise SQL types of their arguments rather than the
        internal type. In addition, the result type of the
        <a href="functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a> function
        is now <code class="literal">DATETIME</code> by default.
       (<a href="http://bugs.mysql.com/27216" target="_top">Bug#27216</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        <code class="literal">GRANT</code> and <code class="literal">REVOKE</code>
        statements now cause an implicit commit, and thus are prohibited
        within stored functions and triggers.
       (<a href="http://bugs.mysql.com/21975" target="_top">Bug#21975</a>, <a href="http://bugs.mysql.com/21422" target="_top">Bug#21422</a>, <a href="http://bugs.mysql.com/17244" target="_top">Bug#17244</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        It was possible for option files to be read twice at program
        startup, if some of the standard option file locations turned
        out to be the same directory. Now duplicates are removed from
        the list of files to be read.
      </p><p>
        Also, users could not override system-wide settings using
        <code class="filename">~/.my.cnf</code> because
        <code class="filename"><em class="replaceable"><code>SYSCONFDIR</code></em>/my.cnf</code>
        was read last. The latter file now is read earlier so that
        <code class="filename">~/.my.cnf</code> can override system-wide
        settings.
      </p><p>
        The fix for this problem had a side effect such that on Unix,
        MySQL programs looked for options in
        <code class="filename">~/my.cnf</code> rather than the standard location
        of <code class="filename">~/.my.cnf</code>. That problem was addressed as
        <a href="http://bugs.mysql.com/38180" target="_top">Bug#38180</a>.
       (<a href="http://bugs.mysql.com/20748" target="_top">Bug#20748</a>)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">AUTO_INCREMENT</code> columns had the following
        problems when used in <code class="literal">NDB</code> tables:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              The <code class="literal">AUTO_INCREMENT</code> counter was not
              updated correctly when such a column was updated.
            </p></li><li><p>
              <code class="literal">AUTO_INCREMENT</code> values were not
              prefetched beyond statement boundaries.
            </p></li><li><p>
              <code class="literal">AUTO_INCREMENT</code> values were not handled
              correctly with <code class="literal">INSERT IGNORE</code>
              statements.
            </p></li><li><p>
              After being set,
              <code class="literal">ndb_autoincrement_prefetch_sz</code> showed a
              value of 1, regardless of the value it had actually been
              set to.
            </p></li></ul></div><p>
        As part of this fix, the behavior of
        <code class="literal">ndb_autoincrement_prefetch_sz</code> has changed.
        Setting this to less than 32 no longer has any effect on
        prefetching within statements (where IDs are now always obtained
        in batches of 32 or more), but only between statements. The
        default value for this variable has also changed, and is now
        <code class="literal">1</code>.
       (<a href="http://bugs.mysql.com/25176" target="_top">Bug#25176</a>, <a href="http://bugs.mysql.com/31956" target="_top">Bug#31956</a>, <a href="http://bugs.mysql.com/32055" target="_top">Bug#32055</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>Important Note</strong></span>: 
        An apostrophe or single quote character
        (<code class="literal">'</code>) used in the <code class="literal">DATA
        DIRECTORY</code>, <code class="literal">INDEX DIRECTORY</code>, or
        <code class="literal">COMMENT</code> for a <code class="literal">PARTITION</code>
        clause caused the server to crash. When used as part of a
        <code class="literal">CREATE TABLE</code> statement, the crash was
        immediate. When used in an <code class="literal">ALTER TABLE</code>
        statement, the crash did not occur until trying to perform a
        <code class="literal">SELECT</code> or DML statement on the table. In
        either case, the server could not be completely restarted until
        the <code class="filename">.FRM</code> file corresponding to the newly
        created or altered table was deleted.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Upgrading to the current (or later) release solves this
          problem only for tables that are newly created or altered.
          Tables created or altered in previous versions of the server
          to include <code class="literal">'</code> characters in
          <code class="literal">PARTITION</code> options must still be removed by
          deleting the corresponding <code class="filename">.FRM</code> files and
          re-creating them afterwards.
        </p></div><p>(<a href="http://bugs.mysql.com/30695" target="_top">Bug#30695</a>)</p></li><li><p><span class="bold"><strong>Important Note</strong></span>: 
        The <code class="literal">RENAME DATABASE</code> statement was removed and
        replaced with <code class="literal">ALTER DATABASE
        <em class="replaceable"><code>db_name</code></em> UPGRADE DATA DIRECTORY
        NAME</code>. The <code class="literal">RENAME DATABASE</code> statement
        was intended for upgrading database directory names to the
        encoding format used in 5.1 for representing identifiers in the
        filesystem (see <a href="language-structure.html#identifier-mapping" title="8.2.3. Mapping of Identifiers to Filenames">Section 8.2.3, “Mapping of Identifiers to Filenames”</a>).
        However, the statement was found to be dangerous because it
        could result in loss of database contents. See
        <a href="sql-syntax.html#rename-database" title="12.1.18. RENAME DATABASE Syntax">Section 12.1.18, “<code class="literal">RENAME DATABASE</code> Syntax”</a> and
        <a href="sql-syntax.html#alter-database" title="12.1.1. ALTER DATABASE Syntax">Section 12.1.1, “<code class="literal">ALTER DATABASE</code> Syntax”</a>.
       (<a href="http://bugs.mysql.com/17565" target="_top">Bug#17565</a>, <a href="http://bugs.mysql.com/21741" target="_top">Bug#21741</a>, <a href="http://bugs.mysql.com/28360" target="_top">Bug#28360</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        Row-based replication from or to a big-endian machine where the
        table used the <code class="literal">NDB</code> storage engine failed, if
        the same table on the other machine was either
        non-<code class="literal">NDB</code> or the other machine was
        little-endian.
       (<a href="http://bugs.mysql.com/29549" target="_top">Bug#29549</a>, <a href="http://bugs.mysql.com/30790" target="_top">Bug#30790</a>)</p><p>See also <a href="http://bugs.mysql.com/24231" target="_top">Bug#24231</a>, <a href="http://bugs.mysql.com/30024" target="_top">Bug#30024</a>, <a href="http://bugs.mysql.com/30133" target="_top">Bug#30133</a>, <a href="http://bugs.mysql.com/30134" target="_top">Bug#30134</a></p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An improperly reset internal signal was observed as a hang when
        using events in the <code class="literal">NDB</code> API but could result
        in various errors.
       (<a href="http://bugs.mysql.com/33206" target="_top">Bug#33206</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Incorrectly handled parameters could lead to a crash in the
        Transaction Coordinator during a node failure, causing other
        data nodes to fail.
       (<a href="http://bugs.mysql.com/33168" target="_top">Bug#33168</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A memory leak occurred if a subscription start request was
        received by the subscription manager before the node making the
        request was fully connected to the cluster.
       (<a href="http://bugs.mysql.com/32652" target="_top">Bug#32652</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A local checkpoint could sometimes be started before the
        previous LCP was restorable from a global checkpoint.
       (<a href="http://bugs.mysql.com/32519" target="_top">Bug#32519</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        High numbers of API nodes on a slow or congested network could
        cause connection negotiation to time out prematurely, leading to
        the following issues:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              Excessive retries
            </p></li><li><p>
              Excessive CPU usage
            </p></li><li><p>
              Partially connected API nodes
            </p></li></ul></div><p>
       (<a href="http://bugs.mysql.com/32359" target="_top">Bug#32359</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When a <span><strong class="command">mysqld</strong></span> acting as a cluster SQL node
        starts the <code class="literal">NDBCLUSTER</code> storage engine, there
        is a delay during which some necessary data structures cannot be
        initialized until after it has connected to the cluster, and all
        MySQL Cluster tables should be opened as read-only. This worked
        correctly when the <code class="literal">NDB</code> binlog thread was
        running, but when it was not running, Cluster tables were not
        opened as read-only even when the data structures had not yet
        been set up.
       (<a href="http://bugs.mysql.com/32275" target="_top">Bug#32275</a>, <a href="http://bugs.mysql.com/33763" target="_top">Bug#33763</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The failure of a master node could lead to subsequent failures
        in local checkpointing.
       (<a href="http://bugs.mysql.com/32160" target="_top">Bug#32160</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The management server was slow to respond when no data nodes
        were connected to the cluster. This was most noticeable when
        running <code class="literal">SHOW</code> in the management client.
       (<a href="http://bugs.mysql.com/32023" target="_top">Bug#32023</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An error with an <code class="literal">if</code> statement in
        <code class="filename">sql/ha_ndbcluster.cc</code> could potentially lead
        to an infinite loop in case of failure when working with
        <code class="literal">AUTO_INCREMENT</code> columns in
        <code class="literal">NDB</code> tables.
       (<a href="http://bugs.mysql.com/31810" target="_top">Bug#31810</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="literal">NDB</code> storage engine code was not safe for
        strict-alias optimization in <span><strong class="command">gcc</strong></span> 4.2.1.
       (<a href="http://bugs.mysql.com/31761" target="_top">Bug#31761</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        It was possible in some cases for a node group to be
        “<span class="quote">lost</span>” due to missed local checkpoints following a
        system restart.
       (<a href="http://bugs.mysql.com/31525" target="_top">Bug#31525</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A query against a table with <code class="literal">TEXT</code> or
        <code class="literal">BLOB</code> columns that would return more than a
        certain amount of data failed with <span class="errortext">Got error 4350
        'Transaction already aborted' from NDBCLUSTER</span>.
       (<a href="http://bugs.mysql.com/31482" target="_top">Bug#31482</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/29102" target="_top">Bug#29102</a></p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">NDB</code> tables having names containing
        non-alphanumeric characters (such as “<span class="quote">
        <code class="literal">$</code> </span>”) were not discovered correctly.
       (<a href="http://bugs.mysql.com/31470" target="_top">Bug#31470</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A node failure during a local checkpoint could lead to a
        subsequent failure of the cluster during a system restart.
       (<a href="http://bugs.mysql.com/31257" target="_top">Bug#31257</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A cluster restart could sometimes fail due to an issue with
        table IDs.
       (<a href="http://bugs.mysql.com/30975" target="_top">Bug#30975</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When handling <code class="literal">BLOB</code> columns, the addition of
        read locks to the lock queue was not handled correctly.
       (<a href="http://bugs.mysql.com/30764" target="_top">Bug#30764</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Discovery of <code class="literal">NDB</code> tables did not work
        correctly with <code class="literal">INFORMATION_SCHEMA</code>.
       (<a href="http://bugs.mysql.com/30667" target="_top">Bug#30667</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A filesystem close operation could fail during a node or system
        restart.
       (<a href="http://bugs.mysql.com/30646" target="_top">Bug#30646</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Transaction timeouts were not handled well in some
        circumstances, leading to excessive number of transactions being
        aborted unnecessarily.
       (<a href="http://bugs.mysql.com/30379" target="_top">Bug#30379</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The cluster management client could not connect, and would hang
        instead. This issue affected Mac OS X 64-bit only.
       (<a href="http://bugs.mysql.com/30366" target="_top">Bug#30366</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Attempting to restore a backup made on a cluster host using one
        endian to a machine using the other endian could cause the
        cluster to fail.
       (<a href="http://bugs.mysql.com/29674" target="_top">Bug#29674</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Log event requests to <span><strong class="command">ndb_mgmd</strong></span> could time
        out, causing it to fail.
       (<a href="http://bugs.mysql.com/29621" target="_top">Bug#29621</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In some cases, the cluster managment server logged entries
        multiple times following a restart of <span><strong class="command">mgmd</strong></span>.
       (<a href="http://bugs.mysql.com/29565" target="_top">Bug#29565</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">ndb_mgm <code class="option">--help</code> </strong></span> did not
        display any information about the <code class="option">-a</code> option.
       (<a href="http://bugs.mysql.com/29509" target="_top">Bug#29509</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An interpreted program of sufficient size and complexity could
        cause all cluster data nodes to shut down due to buffer
        overruns.
       (<a href="http://bugs.mysql.com/29390" target="_top">Bug#29390</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">ndb_size.pl</strong></span> failed on tables with
        <code class="literal">FLOAT</code> columns whose definitions included
        commas (for example, <code class="literal">FLOAT(6,2)</code>).
       (<a href="http://bugs.mysql.com/29228" target="_top">Bug#29228</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The error message for <code class="literal">NDB</code> error code 275
        (<span class="errortext">Out of transaction records for complete
        phase</span>) was missing.
       (<a href="http://bugs.mysql.com/29139" target="_top">Bug#29139</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Reads on <code class="literal">BLOB</code> columns were not locked when
        they needed to be to guarantee consistency.
       (<a href="http://bugs.mysql.com/29102" target="_top">Bug#29102</a>)</p><p>See also <a href="http://bugs.mysql.com/31482" target="_top">Bug#31482</a></p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A query using joins between several large tables and requiring
        unique index lookups failed to complete, eventually returning
        <span class="errortext">Uknown Error</span> after a very long period of
        time. This occurred due to inadequate handling of instances
        where the Transaction Coordinator ran out of
        <code class="literal">TransactionBufferMemory</code>, when the cluster
        should have returned NDB error code 4012 (<span class="errortext">Request
        ndbd time-out</span>).
       (<a href="http://bugs.mysql.com/28804" target="_top">Bug#28804</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        There was a short interval during the startup process prior to
        the beginning of heartbeat detection such that, were an API or
        management node to reboot or a network failure to occur, data
        nodes could not detect this, with the result that there could be
        a lingering connection.
       (<a href="http://bugs.mysql.com/28445" target="_top">Bug#28445</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The description of the <code class="option">--print</code> option provided
        in the output from <span><strong class="command">ndb_restore <code class="option">--help</code>
        </strong></span> was incorrect.
       (<a href="http://bugs.mysql.com/27683" target="_top">Bug#27683</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Restoring a backup made on a cluster host using one endian to a
        machine using the other endian failed for
        <code class="literal">BLOB</code> and <code class="literal">DATETIME</code> columns.
       (<a href="http://bugs.mysql.com/27543" target="_top">Bug#27543</a>, <a href="http://bugs.mysql.com/30024" target="_top">Bug#30024</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An invalid subselect on an <code class="literal">NDB</code> table could
        cause <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/27494" target="_top">Bug#27494</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An attempt to perform a <code class="literal">SELECT ... FROM
        INFORMATION_SCHEMA.TABLES</code> whose result included
        information about <code class="literal">NDB</code> tables for which the
        user had no privileges crashed the MySQL Server on which the
        query was performed.
       (<a href="http://bugs.mysql.com/26793" target="_top">Bug#26793</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Performing <code class="literal">DELETE</code> operations after a data
        node had been shut down could lead to inconsistent data
        following a restart of the node.
       (<a href="http://bugs.mysql.com/26450" target="_top">Bug#26450</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">UPDATE IGNORE</code> could sometimes fail on
        <code class="literal">NDB</code> tables due to the use of unitialized data
        when checking for duplicate keys to be ignored.
       (<a href="http://bugs.mysql.com/25817" target="_top">Bug#25817</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The cluster log was formatted inconsistently and contained
        extraneous newline characters.
       (<a href="http://bugs.mysql.com/25064" target="_top">Bug#25064</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A restart of the cluster failed when more than 1 REDO phase was
        in use.
       (<a href="http://bugs.mysql.com/22696" target="_top">Bug#22696</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When inserting a row into an <code class="literal">NDB</code> table with a
        duplicate value for a non-primary unique key, the error issued
        would reference the wrong key.
      </p><p>
        This improves on an initial fix for this issue made in MySQL
        5.1.13.
       (<a href="http://bugs.mysql.com/21072" target="_top">Bug#21072</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An insufficiently descriptive and potentially misleading Error
        4006 (<span class="errortext">Connect failure - out of connection
        objects...</span>) was produced when either of the
        following two conditions occurred:
        </p><div class="orderedlist"><ol type="1"><li><p>
              There were no more transaction records in the transaction
              coordinator
            </p></li><li><p>
              an <code class="literal">Ndb</code> object in the NDB API was
              initialized with insufficient parallellism
            </p></li></ol></div><p>
        Separate error messages are now generated for each of these two
        cases.
       (<a href="http://bugs.mysql.com/11313" target="_top">Bug#11313</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        Replication of partitioned tables using the
        <code class="literal">InnoDB</code> storage engine failed with
        <code class="literal">binlog-format=ROW</code> or
        <code class="literal">binlog-format=MIXED</code>.
       (<a href="http://bugs.mysql.com/28430" target="_top">Bug#28430</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        It was possible to partition a table to which a foreign key
        referred.
       (<a href="http://bugs.mysql.com/32948" target="_top">Bug#32948</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        A query of the form <code class="literal">SELECT
        <em class="replaceable"><code>col1</code></em> FROM
        <em class="replaceable"><code>table</code></em> GROUP BY (SELECT
        <em class="replaceable"><code>col2</code></em> FROM
        <em class="replaceable"><code>table</code></em> LIMIT 1);</code> against a
        partitioned <em class="replaceable"><code>table</code></em> having a
        <code class="literal">SET</code> column crashed the server.
       (<a href="http://bugs.mysql.com/32772" target="_top">Bug#32772</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <code class="literal">SHOW CREATE TABLE</code> misreported the value of
        <code class="literal">AUTO_INCREMENT</code> for partitioned tables using
        either of the <code class="literal">InnoDB</code> or
        <code class="literal">ARCHIVE</code> storage engines.
       (<a href="http://bugs.mysql.com/32247" target="_top">Bug#32247</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Selecting from <code class="literal">INFORMATION_SCHEMA.PARTITIONS</code>
        while partition management statements (for example,
        <code class="literal">ALTER TABLE ... ADD PARTITION</code>) were executing
        caused the server to crash.
       (<a href="http://bugs.mysql.com/32178" target="_top">Bug#32178</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        An error in the internal function
        <code class="literal">mysql_unpack_partition()</code> led to a fatal
        error in subsequent calls to
        <code class="literal">open_table_from_share()</code>.
       (<a href="http://bugs.mysql.com/32158" target="_top">Bug#32158</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Repeated updates of a table that was partitioned by
        <code class="literal">KEY</code> on a <code class="literal">TIMESTAMP</code> column
        eventually crashed the server.
       (<a href="http://bugs.mysql.com/32067" target="_top">Bug#32067</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Changing the storage engine used by a table having subpartitions
        led to a server crash.
       (<a href="http://bugs.mysql.com/31893" target="_top">Bug#31893</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <code class="literal">ORDER BY ... DESC</code> did not always work
        correctly when selecting from partitioned tables.
       (<a href="http://bugs.mysql.com/31890" target="_top">Bug#31890</a>)</p><p>See also <a href="http://bugs.mysql.com/31001" target="_top">Bug#31001</a></p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Selecting from a table partitioned by <code class="literal">KEY</code> on
        a <code class="literal">VARCHAR</code> column whose size was greater than
        65530 caused the server to crash.
       (<a href="http://bugs.mysql.com/31705" target="_top">Bug#31705</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <code class="literal">INSERT DELAYED</code> on a partitioned table crashed
        the server. The server now rejects the statement with an error.
       (<a href="http://bugs.mysql.com/31210" target="_top">Bug#31210</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Using <code class="literal">ALTER TABLE</code> to partition an existing
        table having an <code class="literal">AUTO_INCREMENT</code> column could
        crash the server.
       (<a href="http://bugs.mysql.com/30878" target="_top">Bug#30878</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/27405" target="_top">Bug#27405</a></p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <code class="literal">ALTER TABLE ... COALESCE PARTITION</code> on a table
        partitioned by <code class="literal">[LINEAR] HASH</code> or
        <code class="literal">[LINEAR] KEY</code> caused the server to crash.
       (<a href="http://bugs.mysql.com/30822" target="_top">Bug#30822</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        <code class="literal">LIKE</code> queries on tables partitioned by
        <code class="literal">KEY</code> and using third-party storage engines
        could return incomplete results.
       (<a href="http://bugs.mysql.com/30480" target="_top">Bug#30480</a>)</p><p>See also <a href="http://bugs.mysql.com/29320" target="_top">Bug#29320</a>, <a href="http://bugs.mysql.com/29493" target="_top">Bug#29493</a>, <a href="http://bugs.mysql.com/30563" target="_top">Bug#30563</a></p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        It was not possible to insert the greatest possible value for a
        given data type into a partitioned table. For example, consider
        a table defined as shown here:
</p><pre class="programlisting">CREATE TABLE t (c BIGINT UNSIGNED)
    PARTITION BY RANGE(c) (
      PARTITION p0 VALUES LESS THAN MAXVALUE
    );
</pre><p>
        The largest possible value for a <code class="literal">BIGINT
        UNSIGNED</code> column is 18446744073709551615, but the
        statement <code class="literal">INSERT INTO t VALUES
        (18446744073709551615);</code> would fail, even though the
        same statement succeeded were <code class="literal">t</code> not a
        partitioned table.
      </p><p>
        In other words, <code class="literal">MAXVALUE</code> was treated as being
        equal to the greatest possible value, rather than as a least
        upper bound.
       (<a href="http://bugs.mysql.com/29258" target="_top">Bug#29258</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        When dropping a database containing a stored procedure while
        using row-cased replication, the delete of the stored procedure
        from the <code class="literal">mysql.proc</code> table was recorded in the
        binary log following the <code class="literal">DROP DATABASE</code>
        statement. To correct this issue, <code class="literal">DROP
        DATABASE</code> now uses statement-based replication.
       (<a href="http://bugs.mysql.com/32435" target="_top">Bug#32435</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        It was possible for the name of the relay log file to exceed the
        amount of memory reserved for it, possibly leading to a crash of
        the server.
       (<a href="http://bugs.mysql.com/31836" target="_top">Bug#31836</a>)</p><p>See also <a href="http://bugs.mysql.com/28597" target="_top">Bug#28597</a></p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Corruption of log events caused the server to crash on 64-bit
        Linux systems having 4 GB of memory or more.
       (<a href="http://bugs.mysql.com/31793" target="_top">Bug#31793</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Trying to replicate an update of a row that was missing on the
        slave led to a failure on the slave.
       (<a href="http://bugs.mysql.com/31702" target="_top">Bug#31702</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Table names were displayed as binary “<span class="quote">garbage</span>”
        characters in slave error messages. The issue was observed on
        64-bit Windows but may have effected other platforms.
       (<a href="http://bugs.mysql.com/30854" target="_top">Bug#30854</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        One thread could read uninitialized memory from the stack of
        another thread. This issue was only known to occur in a
        <span><strong class="command">mysqld</strong></span> process acting as both a master and a
        slave.
       (<a href="http://bugs.mysql.com/30752" target="_top">Bug#30752</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        It was possible to set <code class="literal">SQL_SLAVE_SKIP_COUNTER</code>
        such that the slave would jump into the middle of a transaction.
        This fix improves on one made for this bug in MySQL 5.1.20; the
        previous fix insured that the slave could not be made to jump
        into the middle of an event group, but the slave failed to
        recognize that <code class="literal">BEGIN</code>,
        <code class="literal">COMMIT</code>, and <code class="literal">ROLLBACK</code>
        statements could begin or end an event group.
       (<a href="http://bugs.mysql.com/28618" target="_top">Bug#28618</a>)</p><p>See also <a href="http://bugs.mysql.com/12691" target="_top">Bug#12691</a></p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Due a previous change in how the default name and location of
        the binlog file were determined, replication failed following
        some upgrades.
       (<a href="http://bugs.mysql.com/28597" target="_top">Bug#28597</a>, <a href="http://bugs.mysql.com/28603" target="_top">Bug#28603</a>)</p><p>See also <a href="http://bugs.mysql.com/31836" target="_top">Bug#31836</a></p><p>This regression was introduced by <a href="http://bugs.mysql.com/20166" target="_top">Bug#20166</a></p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Stored procedures having <code class="literal">BIT</code> parameters were
        not replicated correctly.
       (<a href="http://bugs.mysql.com/26199" target="_top">Bug#26199</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Issuing <code class="literal">SHOW SLAVE STATUS</code> as
        <span><strong class="command">mysqld</strong></span> was shutting down could cause a crash.
       (<a href="http://bugs.mysql.com/26000" target="_top">Bug#26000</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        If a temporary error occured inside an event group on an event
        that was not the first event of the group, the slave could get
        caught in an endless loop because the retry counter was reset
        whenever an event was executed successfully.
       (<a href="http://bugs.mysql.com/24860" target="_top">Bug#24860</a>)</p><p>See also <a href="http://bugs.mysql.com/12691" target="_top">Bug#12691</a>, <a href="http://bugs.mysql.com/23171" target="_top">Bug#23171</a></p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        An <code class="literal">UPDATE</code> statement using a stored function
        that modified a non-transactional table was not logged if it
        failed. This caused the copy of the non-transactional table on
        the master have a row that the copy on the slave did not.
       (<a href="http://bugs.mysql.com/23333" target="_top">Bug#23333</a>)</p><p>See also <a href="http://bugs.mysql.com/12713" target="_top">Bug#12713</a></p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        A replication slave sometimes failed to reconnect because it was
        unable to run <code class="literal">SHOW SLAVE HOSTS</code>. It was not
        necessary to run this statement on slaves (since the master
        should track connection IDs), and the execution of this
        statement by slaves was removed.
       (<a href="http://bugs.mysql.com/21132" target="_top">Bug#21132</a>)</p><p>See also <a href="http://bugs.mysql.com/13963" target="_top">Bug#13963</a>, <a href="http://bugs.mysql.com/21869" target="_top">Bug#21869</a></p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        A replication slave sometimes stopped for changes that were
        idempotent (that is, such changes should have been considered
        “<span class="quote">safe</span>”), even though it should have simply noted
        that the change was already done, and continued operation.
       (<a href="http://bugs.mysql.com/19958" target="_top">Bug#19958</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        A replication slave could return “<span class="quote">garbage</span>” data
        that was not in recognizable row format due to a problem with
        the internal <code class="literal">all_set()</code> method.
       (<a href="http://bugs.mysql.com/33375" target="_top">Bug#33375</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Memory was mistakenly freed for <code class="literal">NdbBlob</code>
        objects when adding an index while replicating the cluster,
        which could cause <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/33142" target="_top">Bug#33142</a>)</p><p>See also <a href="http://bugs.mysql.com/18106" target="_top">Bug#18106</a></p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Under certain conditions, the slave stopped processing relay
        logs. This resulted in the logs never being cleared and the
        slave eventually running out of disk space.
       (<a href="http://bugs.mysql.com/31958" target="_top">Bug#31958</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        A node failure during replication could lead to buckets out of
        order; now active subscribers are checked for, rather than empty
        buckets.
       (<a href="http://bugs.mysql.com/31701" target="_top">Bug#31701</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Replicating <code class="literal">NDB</code> tables with extra
        <code class="literal">VARCHAR</code> columns on the master caused the
        slave to fail.
       (<a href="http://bugs.mysql.com/31646" target="_top">Bug#31646</a>)</p><p>See also <a href="http://bugs.mysql.com/29549" target="_top">Bug#29549</a></p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        When the master <span><strong class="command">mysqld</strong></span> crashed or was
        restarted, no <code class="literal">LOST_EVENTS</code> entry was made in
        the binlog.
       (<a href="http://bugs.mysql.com/31484" target="_top">Bug#31484</a>)</p><p>See also <a href="http://bugs.mysql.com/21494" target="_top">Bug#21494</a></p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Incorrect handling of <code class="literal">INSERT</code> plus
        <code class="literal">DELETE</code> operations with regard to local
        checkpoints caused data node failures in multi-master
        replication setups.
       (<a href="http://bugs.mysql.com/30914" target="_top">Bug#30914</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        An issue with the <code class="literal">mysql.ndb_apply_status</code>
        table could cause <code class="literal">NDB</code> schema autodiscovery to
        fail in certain rare circumstances.
       (<a href="http://bugs.mysql.com/20872" target="_top">Bug#20872</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        A call to <code class="literal">CHECK_TIMEDOUT_RET()</code> in
        <code class="filename">mgmapi.cpp</code> should have been a call to
        <code class="literal">DBUG_CHECK_TIMEDOUT_RET()</code>.
       (<a href="http://bugs.mysql.com/30681" target="_top">Bug#30681</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        An <code class="literal">Ndb</code> object in the NDB API was initialized
        with insufficient parallellism
      </p></li><li><p><span class="bold"><strong>API</strong></span>: 
        When the language option was not set correctly, API programs
        calling <a href="apis.html#mysql-server-init" title="29.2.12.1. mysql_server_init()"><code class="literal">mysql_server_init()</code></a>
        crashed. This issue was observed only on Windows platforms.
       (<a href="http://bugs.mysql.com/31868" target="_top">Bug#31868</a>)</p></li><li><p>
        Corrected a typecast involving <code class="literal">bool</code> on Mac OS
        X 10.5 (Leopard), which evaluated differently from earlier Mac
        OS X versions.
       (<a href="http://bugs.mysql.com/38217" target="_top">Bug#38217</a>)</p></li><li><p>
        Use of uninitialized memory for <code class="literal">filesort</code> in a
        subquery caused a server crash.
       (<a href="http://bugs.mysql.com/33675" target="_top">Bug#33675</a>)</p></li><li><p>
        <code class="literal">CREATE TABLE ... SELECT</code> created tables that
        for date columns used the obsolete <code class="literal">Field_date</code>
        type instead of <code class="literal">Field_newdate</code>.
       (<a href="http://bugs.mysql.com/33256" target="_top">Bug#33256</a>)</p></li><li><p>
        Some valid <code class="literal">SELECT</code> statements could not be
        used as views due to incorrect column reference resolution.
       (<a href="http://bugs.mysql.com/33133" target="_top">Bug#33133</a>)</p></li><li><p>
        The fix for <a href="http://bugs.mysql.com/11230" target="_top">Bug#11230</a> and <a href="http://bugs.mysql.com/26215" target="_top">Bug#26215</a> introduced a significant
        input-parsing slowdown for the <span><strong class="command">mysql</strong></span> client.
        This has been corrected.
       (<a href="http://bugs.mysql.com/33057" target="_top">Bug#33057</a>)</p></li><li><p>
        The correct data type for a <code class="literal">NULL</code> column
        resulting from a <code class="literal">UNION</code> could be determined
        incorrectly in some cases: 1) Not correctly inferred as
        <code class="literal">NULL</code> depending on the number of selects; 2)
        Not inferred correctly as <code class="literal">NULL</code> if one select
        used a subquery.
       (<a href="http://bugs.mysql.com/32848" target="_top">Bug#32848</a>)</p></li><li><p>
        For queries containing <code class="literal">GROUP_CONCAT(DISTINCT
        <em class="replaceable"><code>col_list</code></em> ORDER BY
        <em class="replaceable"><code>col_list</code></em>)</code>, there was a
        limitation that the <code class="literal">DISTINCT</code> columns had to
        be the same as <code class="literal">ORDER BY</code> columns. Incorrect
        results could be returned if this was not true.
       (<a href="http://bugs.mysql.com/32798" target="_top">Bug#32798</a>)</p></li><li><p>
        <code class="literal">SHOW EVENTS</code> and selecting from the
        <code class="literal">INFORMATION_SCHEMA.EVENTS</code> table failed if the
        current database was <code class="literal">INFORMATION_SCHEMA</code>.
       (<a href="http://bugs.mysql.com/32775" target="_top">Bug#32775</a>)</p></li><li><p>
        Use of the <code class="literal">cp932</code> character set with
        <a href="functions.html#function_cast"><code class="literal">CAST()</code></a> in an <code class="literal">ORDER
        BY</code> clause could cause a server crash.
       (<a href="http://bugs.mysql.com/32726" target="_top">Bug#32726</a>)</p></li><li><p>
        A subquery using an <code class="literal">IS NULL</code> check of a column
        defined as <code class="literal">NOT NULL</code> in a table used in the
        <code class="literal">FROM</code> clause of the outer query produced an
        invalid result.
       (<a href="http://bugs.mysql.com/32694" target="_top">Bug#32694</a>)</p></li><li><p>
        <span><strong class="command">mysqld_safe</strong></span> looked for error messages in the
        wrong location.
       (<a href="http://bugs.mysql.com/32679" target="_top">Bug#32679</a>)</p></li><li><p>
        Specifying a non-existent column for an <code class="literal">INSERT
        DELAYED</code> statement caused a server crash rather than
        producing an error.
       (<a href="http://bugs.mysql.com/32676" target="_top">Bug#32676</a>)</p></li><li><p>
        An issue with the <code class="literal">NO_ENGINE_SUBSTITUTION</code>
        <code class="literal">sql_mode</code> database can cause the creation of
        stored routines to fail. If you are having problems with
        creating stored routines while using this
        <code class="literal">sql_mode</code> value, remove this value from your
        <code class="literal">sql_mode</code> setting.
       (<a href="http://bugs.mysql.com/32633" target="_top">Bug#32633</a>)</p></li><li><p>
        Use of <code class="literal">CLIENT_MULTI_QUERIES</code> caused
        <code class="literal">libmysqld</code> to crash.
       (<a href="http://bugs.mysql.com/32624" target="_top">Bug#32624</a>)</p></li><li><p>
        The <a href="functions.html#function_interval"><code class="literal">INTERVAL()</code></a> function
        incorrectly handled <code class="literal">NULL</code> values in the value
        list.
       (<a href="http://bugs.mysql.com/32560" target="_top">Bug#32560</a>)</p></li><li><p>
        Use of a <code class="literal">NULL</code>-returning <code class="literal">GROUP
        BY</code> expression in conjunction with <code class="literal">WITH
        ROLLUP</code> could cause a server crash.
       (<a href="http://bugs.mysql.com/32558" target="_top">Bug#32558</a>)</p><p>See also <a href="http://bugs.mysql.com/31095" target="_top">Bug#31095</a></p></li><li><p>
        <code class="literal">ORDER BY UpdateXML(...)</code> caused the server to
        crash in queries where
        <a href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a> returned
        <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/32557" target="_top">Bug#32557</a>)</p></li><li><p>
        A <code class="literal">SELECT ... GROUP BY
        <em class="replaceable"><code>bit_column</code></em></code> query failed
        with an assertion if the length of the <code class="literal">BIT</code>
        column used for the <code class="literal">GROUP BY</code> was not an
        integer multiple of 8.
       (<a href="http://bugs.mysql.com/32556" target="_top">Bug#32556</a>)</p></li><li><p>
        Using <code class="literal">SELECT INTO OUTFILE</code> with 8-bit
        <code class="literal">ENCLOSED BY</code> characters led to corrupted data
        when the data was reloaded using LOAD DATA INFILE. This was
        because <code class="literal">SELECT INTO OUTFILE</code> failed to escape
        the 8-bit characters.
       (<a href="http://bugs.mysql.com/32533" target="_top">Bug#32533</a>)</p></li><li><p>
        For <code class="literal">FLUSH TABLES WITH READ LOCK</code>, the server
        failed to properly detect write-locked tables when running with
        low-priority updates, resulting in a crash or deadlock.
       (<a href="http://bugs.mysql.com/32528" target="_top">Bug#32528</a>)</p></li><li><p>
        The rules for valid column names were being applied differently
        for base tables and views.
       (<a href="http://bugs.mysql.com/32496" target="_top">Bug#32496</a>)</p></li><li><p>
        A query of the form <code class="literal">SELECT
        @<em class="replaceable"><code>user_variable</code></em> :=
        <em class="replaceable"><code>constant</code></em> AS
        <em class="replaceable"><code>alias</code></em> FROM
        <em class="replaceable"><code>table</code></em> GROUP BY
        <em class="replaceable"><code>alias</code></em> WITH ROLLUP</code> crashed
        the server.
       (<a href="http://bugs.mysql.com/32482" target="_top">Bug#32482</a>)</p></li><li><p>
        Sending several <code class="literal">KILL QUERY</code> statements to
        target a connection running <code class="literal">SELECT SLEEP()</code>
        could freeze the server.
       (<a href="http://bugs.mysql.com/32436" target="_top">Bug#32436</a>)</p></li><li><p>
        <code class="literal">ssl-cipher</code> values in option files were not
        being read by <code class="literal">libmysqlclient</code>.
       (<a href="http://bugs.mysql.com/32429" target="_top">Bug#32429</a>)</p></li><li><p>
        Repeated execution of a query containing a
        <code class="literal">CASE</code> expression and numerous
        <code class="literal">AND</code> and <code class="literal">OR</code> relations could
        crash the server. The root cause of the issue was determined to
        be that the internal <code class="literal">SEL_ARG</code> structure was
        not properly initialized when created.
       (<a href="http://bugs.mysql.com/32403" target="_top">Bug#32403</a>)</p></li><li><p>
        Referencing within a subquery an alias used in the
        <code class="literal">SELECT</code> list of the outer query was
        incorrectly permitted.
       (<a href="http://bugs.mysql.com/32400" target="_top">Bug#32400</a>)</p></li><li><p>
        If a global read lock acquired with <code class="literal">FLUSH TABLES WITH
        READ LOCK</code> was in effect, executing <code class="literal">ALTER
        TABLE</code> could cause a server crash.
       (<a href="http://bugs.mysql.com/32395" target="_top">Bug#32395</a>)</p></li><li><p>
        An <code class="literal">ORDER BY</code> query on a view created using a
        <code class="literal">FEDERATED</code> table as a base table caused the
        server to crash.
       (<a href="http://bugs.mysql.com/32374" target="_top">Bug#32374</a>)</p></li><li><p>
        The <span><strong class="command">mysqldump</strong></span> utility did not print enough
        version information about itself at the top of its output. The
        output now shows the same information as
        <span><strong class="command">mysqldump</strong></span> invoked with the
        <code class="option">-V</code> option, namely the
        <span><strong class="command">mysqldump</strong></span> version number, the MySQL server
        version, and the distribution.
       (<a href="http://bugs.mysql.com/32350" target="_top">Bug#32350</a>)</p></li><li><p>
        Comparison of a <code class="literal">BIGINT NOT NULL</code> column with a
        constant arithmetic expression that evaluated to NULL mistakenly
        caused the error <span class="errortext">Column '...' cannot be
        null</span> (error 1048).
       (<a href="http://bugs.mysql.com/32335" target="_top">Bug#32335</a>)</p></li><li><p>
        Assigning a 65,536-byte string to a <code class="literal">TEXT</code>
        column (which can hold a maximum of 65,535 bytes) resulted in
        truncation without a warning. Now a truncation warning is
        generated.
       (<a href="http://bugs.mysql.com/32282" target="_top">Bug#32282</a>)</p></li><li><p>
        The <a href="functions.html#function_last-day"><code class="literal">LAST_DAY()</code></a> function returns
        a <code class="literal">DATE</code> value, but internally the value did
        not have the time fields zeroed and calculations involving the
        value could return incorrect results.
       (<a href="http://bugs.mysql.com/32270" target="_top">Bug#32270</a>)</p></li><li><p>
        <a href="functions.html#function_min"><code class="literal">MIN()</code></a> and
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a> could return incorrect
        results when an index was present if a loose index scan was
        used.
       (<a href="http://bugs.mysql.com/32268" target="_top">Bug#32268</a>)</p></li><li><p>
        Some uses of user variables in a query could result in a server
        crash.
       (<a href="http://bugs.mysql.com/32260" target="_top">Bug#32260</a>)</p></li><li><p>
        Memory corruption could occur due to large index map in
        <code class="literal">Range checked for each record</code> status reported
        by <code class="literal">EXPLAIN SELECT</code>. The problem was based in
        an incorrectly calculated length of the buffer used to store a
        hexadecimal representation of an index map, which could result
        in buffer overrun and stack corruption under some circumstances.
       (<a href="http://bugs.mysql.com/32241" target="_top">Bug#32241</a>)</p></li><li><p>
        Various test program cleanups were made: 1)
        <span><strong class="command">mytest</strong></span> and <code class="literal">libmysqltest</code>
        were removed. 2) <span><strong class="command">bug25714</strong></span> displays an error
        message when invoked with incorrect arguments or the
        <code class="option">--help</code> option. 3)
        <span><strong class="command">mysql_client_test</strong></span> exits cleanly with a proper
        error status.
       (<a href="http://bugs.mysql.com/32221" target="_top">Bug#32221</a>)</p></li><li><p>
        The default grant tables on Windows contained information for
        host <code class="literal">production.mysql.com</code>, which should not
        be there.
       (<a href="http://bugs.mysql.com/32219" target="_top">Bug#32219</a>)</p></li><li><p>
        Under certain conditions, the presence of a <code class="literal">GROUP
        BY</code> clause could cause an <code class="literal">ORDER BY</code>
        clause to be ignored.
       (<a href="http://bugs.mysql.com/32202" target="_top">Bug#32202</a>)</p></li><li><p>
        For comparisons of the form <em class="replaceable"><code>date_col OP
        datetime_const</code></em> (where
        <em class="replaceable"><code>OP</code></em> is
        <a href="functions.html#operator_equal"><code class="literal">=</code></a>,
        <a href="functions.html#operator_less-than"><code class="literal">&lt;</code></a>,
        <a href="functions.html#operator_greater-than"><code class="literal">&gt;</code></a>,
        <a href="functions.html#operator_less-than-or-equal"><code class="literal">&lt;=</code></a>,
        or
        <a href="functions.html#operator_greater-than-or-equal"><code class="literal">&gt;=</code></a>),
        the comparison is done using <code class="literal">DATETIME</code> values,
        per the fix for <a href="http://bugs.mysql.com/27590" target="_top">Bug#27590</a>. However that fix caused any index on
        <em class="replaceable"><code>date_col</code></em> not to be used and
        compromised performance. Now the index is used again.
       (<a href="http://bugs.mysql.com/32198" target="_top">Bug#32198</a>)</p></li><li><p>
        <code class="literal">DATETIME</code> arguments specified in numeric form
        were treated by <a href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a> as
        <code class="literal">DATE</code> values.
       (<a href="http://bugs.mysql.com/32180" target="_top">Bug#32180</a>)</p></li><li><p>
        Killing a statement could lead to a race condition in the
        server.
       (<a href="http://bugs.mysql.com/32148" target="_top">Bug#32148</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> does not support
        <code class="literal">SPATIAL</code> indexes, but could crash when asked
        to handle one. Now an error is returned.
       (<a href="http://bugs.mysql.com/32125" target="_top">Bug#32125</a>)</p></li><li><p>
        The server crashed on optimizations involving a join of
        <code class="literal">INT</code> and <code class="literal">MEDIUMINT</code> columns
        and a system variable in the <code class="literal">WHERE</code> clause.
       (<a href="http://bugs.mysql.com/32103" target="_top">Bug#32103</a>)</p></li><li><p>
        <span><strong class="command">mysql-test-run.pl</strong></span> used the
        <code class="option">--user</code> option when starting
        <span><strong class="command">mysqld</strong></span>, which produces warnings if the
        current user is not <code class="literal">root</code>. Now
        <code class="option">--user</code> is added only for
        <code class="literal">root</code>.
       (<a href="http://bugs.mysql.com/32078" target="_top">Bug#32078</a>)</p></li><li><p>
        <span><strong class="command">mysqlslap</strong></span> was missing from the MySQL 5.1.22
        Linux RPM packages.
       (<a href="http://bugs.mysql.com/32077" target="_top">Bug#32077</a>)</p></li><li><p>
        With <code class="literal">lower_case_table_names</code> set,
        <code class="literal">CREATE TABLE LIKE</code> was treated differently by
        <code class="literal">libmysqld</code> than by the non-embedded server.
       (<a href="http://bugs.mysql.com/32063" target="_top">Bug#32063</a>)</p></li><li><p>
        Within a subquery, <code class="literal">UNION</code> was handled
        differently than at the top level, which could result in
        incorrect results or a server crash.
       (<a href="http://bugs.mysql.com/32036" target="_top">Bug#32036</a>, <a href="http://bugs.mysql.com/32051" target="_top">Bug#32051</a>)</p></li><li><p>
        On 64-bit platforms, assignments of values to enumeration-valued
        storage engine-specific system variables were not validated and
        could result in unexpected values.
       (<a href="http://bugs.mysql.com/32034" target="_top">Bug#32034</a>)</p></li><li><p>
        A <code class="literal">DELETE</code> statement with a subquery in the
        <code class="literal">WHERE</code> clause would sometimes ignore an error
        during subquery evaluation and proceed with the delete
        operation.
       (<a href="http://bugs.mysql.com/32030" target="_top">Bug#32030</a>)</p></li><li><p>
        Using dates in the range <code class="literal">'0000-00-01'</code> to
        <code class="literal">'0000-00-99'</code> range in the
        <code class="literal">WHERE</code> clause could result in an incorrect
        result set. (These dates are not in the supported range for
        <code class="literal">DATE</code>, but different results for a given query
        could occur depending on position of records containing the
        dates within a table.)
       (<a href="http://bugs.mysql.com/32021" target="_top">Bug#32021</a>)</p></li><li><p>
        User-defined functions are not loaded if the server is started
        with the <code class="option">--skip-grant-tables</code> option, but the
        server did not properly handle this case and issued an
        <span class="errortext">Out of memory</span> error message instead.
       (<a href="http://bugs.mysql.com/32020" target="_top">Bug#32020</a>)</p></li><li><p>
        If a user-defined function was used in a
        <code class="literal">SELECT</code> statement, and an error occurred
        during UDF initialization, the error did not terminate execution
        of the <code class="literal">SELECT</code>, but rather was converted to a
        warning.
       (<a href="http://bugs.mysql.com/32007" target="_top">Bug#32007</a>)</p></li><li><p>
        <a href="functions.html#function_hour"><code class="literal">HOUR()</code></a>,
        <a href="functions.html#function_minute"><code class="literal">MINUTE()</code></a>, and
        <a href="functions.html#function_second"><code class="literal">SECOND()</code></a> could return non-zero
        values for <code class="literal">DATE</code> arguments.
       (<a href="http://bugs.mysql.com/31990" target="_top">Bug#31990</a>)</p></li><li><p>
        Changing the SQL mode to cause dates with “<span class="quote">zero</span>”
        parts to be considered invalid (such as
        <code class="literal">'1000-00-00'</code>) could result in indexed and
        non-indexed searches returning different results for a column
        that contained such dates.
       (<a href="http://bugs.mysql.com/31928" target="_top">Bug#31928</a>)</p></li><li><p>
        The server used unnecessarily large amounts of memory when user
        variables were used as an argument to
        <a href="functions.html#function_concat"><code class="literal">CONCAT()</code></a> or
        <a href="functions.html#function_concat-ws"><code class="literal">CONCAT_WS()</code></a>.
       (<a href="http://bugs.mysql.com/31898" target="_top">Bug#31898</a>)</p></li><li><p>
        In debug builds, testing the result of an <code class="literal">IN</code>
        subquery against <code class="literal">NULL</code> caused an assertion
        failure.
       (<a href="http://bugs.mysql.com/31884" target="_top">Bug#31884</a>)</p></li><li><p>
        <span><strong class="command">mysql-test-run.pl</strong></span> sometimes set up test
        scenarios in which the same port number was passed to multiple
        servers, causing one of them to be unable to start.
       (<a href="http://bugs.mysql.com/31880" target="_top">Bug#31880</a>)</p></li><li><p>
        <code class="literal">SHOW CREATE TRIGGER</code> caused a server crash.
       (<a href="http://bugs.mysql.com/31866" target="_top">Bug#31866</a>)</p></li><li><p>
        The server crashed after insertion of a negative value into an
        <code class="literal">AUTO_INCREMENT</code> column of an
        <code class="literal">InnoDB</code> table.
       (<a href="http://bugs.mysql.com/31860" target="_top">Bug#31860</a>)</p></li><li><p>
        For <code class="literal">libmysqld</code> applications, handling of
        <a href="apis.html#mysql-change-user" title="29.2.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a> calls left
        some pointers improperly updated, leading to server crashes.
       (<a href="http://bugs.mysql.com/31850" target="_top">Bug#31850</a>)</p></li><li><p>
        Using <code class="literal">ORDER BY</code> led to the wrong result when
        using the <code class="literal">ARCHIVE</code> on a table with a
        <code class="literal">BLOB</code> when the table cache was full. The table
        could also be reported as crashed after the query had completed,
        even though the table data was intact.
       (<a href="http://bugs.mysql.com/31833" target="_top">Bug#31833</a>)</p></li><li><p>
        Comparison results for <a href="functions.html#operator_between"><code class="literal">BETWEEN</code></a>
        were different from those for operators like
        <a href="functions.html#operator_less-than"><code class="literal">&lt;</code></a>
        and
        <a href="functions.html#operator_greater-than"><code class="literal">&gt;</code></a>
        for <code class="literal">DATETIME</code>-like values with trailing extra
        characters such as <code class="literal">'2007-10-01 00:00:00
        GMT-6'</code>.
        <a href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> treated the
        values as <code class="literal">DATETIME</code>, whereas the other
        operators performed a binary-string comparison. Now they all
        uniformly use a <code class="literal">DATETIME</code> comparison, but
        generate warnings for values with trailing garbage.
       (<a href="http://bugs.mysql.com/31800" target="_top">Bug#31800</a>)</p></li><li><p>
        Name resolution for correlated subqueries and
        <code class="literal">HAVING</code> clauses failed to distinguish which of
        two was being performed when there was a reference to an outer
        aliased field. This could result in error messages about a
        <code class="literal">HAVING</code> clause for queries that had no such
        clause.
       (<a href="http://bugs.mysql.com/31797" target="_top">Bug#31797</a>)</p></li><li><p>
        The server could crash during <code class="literal">filesort</code> for
        <code class="literal">ORDER BY</code> based on expressions with
        <a href="functions.html#function_inet-ntoa"><code class="literal">INET_NTOA()</code></a> or
        <a href="functions.html#function_oct"><code class="literal">OCT()</code></a> if those
        functions returned <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/31758" target="_top">Bug#31758</a>)</p></li><li><p>
        For tables with certain definitions, <code class="literal">UPDATE</code>
        statements could fail to find the correct record to update and
        report an error when the record did in fact exist.
       (<a href="http://bugs.mysql.com/31747" target="_top">Bug#31747</a>)</p></li><li><p>
        For a fatal error during a filesort in
        <code class="literal">find_all_keys()</code>, the error was returned
        without the necessary handler uninitialization, causing an
        assertion failure.
       (<a href="http://bugs.mysql.com/31742" target="_top">Bug#31742</a>)</p></li><li><p>
        <span><strong class="command">mysqlslap</strong></span> failed to commit after the final
        record load.
       (<a href="http://bugs.mysql.com/31704" target="_top">Bug#31704</a>)</p></li><li><p>
        The examined-rows count was not incremented for
        <code class="literal">const</code> queries.
       (<a href="http://bugs.mysql.com/31700" target="_top">Bug#31700</a>)</p></li><li><p>
        The server crashed if a thread was killed while locking the
        <code class="literal">general_log</code> table at the beginning of
        statement processing.
       (<a href="http://bugs.mysql.com/31692" target="_top">Bug#31692</a>)</p></li><li><p>
        The <a href="apis.html#mysql-change-user" title="29.2.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a> C API
        function was subject to buffer overflow.
       (<a href="http://bugs.mysql.com/31669" target="_top">Bug#31669</a>)</p></li><li><p>
        For <code class="literal">SELECT ... INTO OUTFILE</code>, if the
        <code class="literal">ENCLOSED BY</code> string is empty and the
        <code class="literal">FIELDS TERMINATED BY</code> string started with a
        special character (one of <code class="literal">n</code>,
        <code class="literal">t</code>, <code class="literal">r</code>,
        <code class="literal">b</code>, <code class="literal">0</code>,
        <code class="literal">Z</code>, or <code class="literal">N</code>), every occurrence
        of the character within field values would be duplicated.
       (<a href="http://bugs.mysql.com/31663" target="_top">Bug#31663</a>)</p></li><li><p>
        <code class="literal">SHOW COLUMNS</code> and <code class="literal">DESCRIBE</code>
        displayed <code class="literal">null</code> as the column type for a view
        with no valid definer. This caused <span><strong class="command">mysqldump</strong></span>
        to produce a non-reloadable dump file for the view.
       (<a href="http://bugs.mysql.com/31662" target="_top">Bug#31662</a>)</p></li><li><p>
        The <span><strong class="command">mysqlbug</strong></span> script did not include the
        correct values of <code class="literal">CFLAGS</code> and
        <code class="literal">CXXFLAGS</code> that were used to configure the
        distribution.
       (<a href="http://bugs.mysql.com/31644" target="_top">Bug#31644</a>)</p></li><li><p>
        Queries that include a comparison of an
        <code class="literal">INFORMATION_SCHEMA</code> table column to
        <code class="literal">NULL</code> caused a server crash.
       (<a href="http://bugs.mysql.com/31633" target="_top">Bug#31633</a>)</p></li><li><p>
        <code class="literal">EXPLAIN EXTENDED</code> for
        <code class="literal">SELECT</code> from
        <code class="literal">INFORMATION_SCHEMA</code> tables caused an assertion
        failure.
       (<a href="http://bugs.mysql.com/31630" target="_top">Bug#31630</a>)</p></li><li><p>
        <code class="literal">ucs2</code> does not work as a client character set,
        but attempts to use it as such were not rejected. Now
        <code class="literal">character_set_client</code> cannot be set to
        <code class="literal">ucs2</code>. This also affects statements such as
        <code class="literal">SET NAMES</code> and <code class="literal">SET CHARACTER
        SET</code>.
       (<a href="http://bugs.mysql.com/31615" target="_top">Bug#31615</a>)</p></li><li><p>
        A buffer used when setting variables was not dimensioned to
        accommodate the trailing <code class="literal">'\0'</code> byte, so a
        single-byte buffer overrun was possible.
       (<a href="http://bugs.mysql.com/31588" target="_top">Bug#31588</a>)</p></li><li><p>
        <code class="literal">HAVING</code> could treat lettercase of table
        aliases incorrectly if <code class="literal">lower_case_table_names</code>
        was enabled.
       (<a href="http://bugs.mysql.com/31562" target="_top">Bug#31562</a>)</p></li><li><p>
        Spurious duplicate-key errors could occur for multiple-row
        inserts into an <code class="literal">InnoDB</code> table that activate a
        trigger.
       (<a href="http://bugs.mysql.com/31540" target="_top">Bug#31540</a>)</p></li><li><p>
        Using <code class="literal">ALTER EVENT</code> to rename a disabled event
        caused it to become enabled.
       (<a href="http://bugs.mysql.com/31539" target="_top">Bug#31539</a>)</p></li><li><p>
        The fix for <a href="http://bugs.mysql.com/24989" target="_top">Bug#24989</a> introduced a problem such that a
        <code class="literal">NULL</code> thread handler could be used during a
        rollback operation. This problem is unlikely to be seen in
        practice.
       (<a href="http://bugs.mysql.com/31517" target="_top">Bug#31517</a>)</p></li><li><p>
        The length of the result from
        <a href="functions.html#function_ifnull"><code class="literal">IFNULL()</code></a> could be
        calculated incorrectly because the sign of the result was not
        taken into account.
       (<a href="http://bugs.mysql.com/31471" target="_top">Bug#31471</a>)</p></li><li><p>
        Queries that used the <code class="literal">ref</code> access method or
        index-based subquery execution over indexes that have
        <code class="literal">DECIMAL</code> columns could fail with an error
        <code class="literal">Column <em class="replaceable"><code>col_name</code></em> cannot be
        null</code>.
       (<a href="http://bugs.mysql.com/31450" target="_top">Bug#31450</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> now tracks locking and use of tables
        by MySQL only after a table has been successfully locked on
        behalf of a transaction. Previously, the locked flag was set and
        the table in-use counter was updated before checking whether the
        lock on the table succeeded. A subsequent failure in obtaining a
        lock on the table led to an inconsistent state as the table was
        neither locked nor in use.
       (<a href="http://bugs.mysql.com/31444" target="_top">Bug#31444</a>)</p></li><li><p>
        <code class="literal">SELECT 1 REGEX NULL</code> caused an assertion
        failure for debug servers.
       (<a href="http://bugs.mysql.com/31440" target="_top">Bug#31440</a>)</p></li><li><p>
        The <a href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a> function did not
        check for the validity of all its arguments; in some cases, this
        could lead to a crash of the server.
       (<a href="http://bugs.mysql.com/31438" target="_top">Bug#31438</a>)</p></li><li><p>
        The <a href="apis.html#mysql-change-user" title="29.2.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a> C API
        function caused advisory locks (obtained with
        <a href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a>) to
        malfunction.
       (<a href="http://bugs.mysql.com/31418" target="_top">Bug#31418</a>)</p></li><li><p>
        NDB libraries and include files were missing from some binary
        <span><strong class="command">tar</strong></span> file distributions.
       (<a href="http://bugs.mysql.com/31414" target="_top">Bug#31414</a>)</p></li><li><p>
        Executing <code class="literal">RENAME</code> while tables were open for
        use with <code class="literal">HANDLER</code> statements could cause a
        server crash.
       (<a href="http://bugs.mysql.com/31409" target="_top">Bug#31409</a>)</p></li><li><p>
        <span><strong class="command">mysql-test-run.pl</strong></span> tried to create files in a
        directory where it could not be expected to have write
        permission. <span><strong class="command">mysqltest</strong></span> created
        <code class="filename">.reject</code> files in a directory other than the
        one where test results go.
       (<a href="http://bugs.mysql.com/31398" target="_top">Bug#31398</a>)</p></li><li><p>
        For a table that had been opened with <code class="literal">HANDLER</code>
        and marked for reopening after being closed with <code class="literal">FLUSH
        TABLES</code>, <code class="literal">DROP TABLE</code> did not properly
        discard the handler.
       (<a href="http://bugs.mysql.com/31397" target="_top">Bug#31397</a>)</p></li><li><p>
        Automatically allocated memory for string options associated
        with a plugin was not freed if the plugin did not get installed.
       (<a href="http://bugs.mysql.com/31382" target="_top">Bug#31382</a>)</p></li><li><p>
        <code class="literal">INFORMATION_SCHEMA.TABLES</code> was returning
        incorrect information.
       (<a href="http://bugs.mysql.com/31381" target="_top">Bug#31381</a>)</p></li><li><p>
        <code class="literal">DROP USER</code> caused an increase in memory usage.
       (<a href="http://bugs.mysql.com/31347" target="_top">Bug#31347</a>)</p></li><li><p>
        <span><strong class="command">mysql_install_db</strong></span> failed if the default
        storage engine was <code class="literal">NDB</code>. Now it explicitly
        uses <code class="literal">MyISAM</code> as the storage engine when
        running <span><strong class="command">mysqld --bootstrap</strong></span>.
       (<a href="http://bugs.mysql.com/31315" target="_top">Bug#31315</a>)</p></li><li><p>
        For <code class="literal">InnoDB</code> tables with <code class="literal">READ
        COMMITTED</code> isolation level, <code class="literal">UPDATE</code>
        statements skipped rows locked by another transaction, rather
        than waiting for the locks to be released.
       (<a href="http://bugs.mysql.com/31310" target="_top">Bug#31310</a>)</p></li><li><p>
        For an almost-full <code class="literal">MyISAM</code> table, an insert
        that failed could leave the table in a corrupt state.
       (<a href="http://bugs.mysql.com/31305" target="_top">Bug#31305</a>)</p></li><li><p>
        <span><strong class="command">myisamchk --unpack</strong></span> could corrupt a table that
        when unpacked has static (fixed-length) row format.
       (<a href="http://bugs.mysql.com/31277" target="_top">Bug#31277</a>)</p></li><li><p>
        <a href="functions.html#function_convert"><code class="literal">CONVERT(<em class="replaceable"><code>val</code></em>,
        DATETIME)</code></a> would fail on invalid input, but processing
        was not aborted for the <code class="literal">WHERE</code> clause, leading
        to a server crash.
       (<a href="http://bugs.mysql.com/31253" target="_top">Bug#31253</a>)</p></li><li><p>
        Allocation of an insufficiently large group-by buffer following
        creation of a temporary table could lead to a server crash.
       (<a href="http://bugs.mysql.com/31249" target="_top">Bug#31249</a>)</p></li><li><p>
        Use of <code class="literal">DECIMAL(<em class="replaceable"><code>n</code></em>,
        <em class="replaceable"><code>n</code></em>) ZEROFILL</code> in
        <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a> could
        cause a server crash.
       (<a href="http://bugs.mysql.com/31227" target="_top">Bug#31227</a>)</p></li><li><p>
        When a <code class="literal">TIMESTAMP</code> with a non-zero time part
        was converted to a <code class="literal">DATE</code> value, no warning was
        generated. This caused index lookups to assume that this is a
        valid conversion and was returning rows that match a comparison
        between a <code class="literal">TIMESTAMP</code> value and a
        <code class="literal">DATE</code> keypart. Now a warning is generated so
        that <code class="literal">TIMESTAMP</code> with a non-zero time part will
        not match <code class="literal">DATE</code> values.
       (<a href="http://bugs.mysql.com/31221" target="_top">Bug#31221</a>)</p></li><li><p>
        Server variables could not be set to their current values on
        Linux platforms.
       (<a href="http://bugs.mysql.com/31177" target="_top">Bug#31177</a>)</p><p>See also <a href="http://bugs.mysql.com/6958" target="_top">Bug#6958</a></p></li><li><p>
        WIth small values of <code class="literal">myisam_sort_buffer_size</code>,
        <code class="literal">REPAIR TABLE</code> for <code class="literal">MyISAM</code>
        tables could cause a server crash.
       (<a href="http://bugs.mysql.com/31174" target="_top">Bug#31174</a>)</p></li><li><p>
        Use of the <code class="literal">@@hostname</code> system variable in
        inserts in <code class="filename">mysql_system_tables_data.sql</code> did
        not replicate. The workaround is to select its value into a user
        variable (which does replicate) and insert that.
       (<a href="http://bugs.mysql.com/31167" target="_top">Bug#31167</a>)</p></li><li><p>
        If <a href="functions.html#function_maketime"><code class="literal">MAKETIME()</code></a> returned
        <code class="literal">NULL</code> when used in an <code class="literal">ORDER
        BY</code> that was evaluated using
        <code class="literal">filesort</code>, a server crash could result.
       (<a href="http://bugs.mysql.com/31160" target="_top">Bug#31160</a>)</p></li><li><p>
        Data in <code class="literal">BLOB</code> or <code class="literal">GEOMETRY</code>
        columns could be cropped when performing a
        <code class="literal">UNION</code> query.
       (<a href="http://bugs.mysql.com/31158" target="_top">Bug#31158</a>)</p></li><li><p>
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> execution could
        be handled improperly in subqueries.
       (<a href="http://bugs.mysql.com/31157" target="_top">Bug#31157</a>)</p></li><li><p>
        An assertion designed to detect a bug in the
        <code class="literal">ROLLUP</code> implementation would incorrectly be
        triggered when used in a subquery context with non-cacheable
        statements.
       (<a href="http://bugs.mysql.com/31156" target="_top">Bug#31156</a>)</p></li><li><p>
        Selecting spatial types in a <code class="literal">UNION</code> could
        cause a server crash.
       (<a href="http://bugs.mysql.com/31155" target="_top">Bug#31155</a>)</p></li><li><p>
        Use of <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT(DISTINCT
        <em class="replaceable"><code>bit_column</code></em>)</code></a> caused an
        assertion failure.
       (<a href="http://bugs.mysql.com/31154" target="_top">Bug#31154</a>)</p></li><li><p>
        The server crashed in the parser when running out of memory.
        Memory handling in the parser has been improved to gracefully
        return an error when out-of-memory conditions occur in the
        parser.
       (<a href="http://bugs.mysql.com/31153" target="_top">Bug#31153</a>)</p></li><li><p>
        MySQL declares a <code class="literal">UNIQUE</code> key as a
        <code class="literal">PRIMARY</code> key if it doesn't have
        <code class="literal">NULL</code> columns and is not a partial key, and
        the <code class="literal">PRIMARY</code> key must alway be the first key.
        However, in some cases, a non-first key could be reported as
        <code class="literal">PRIMARY</code>, leading to an assert failure by
        <code class="literal">InnoDB</code>. This is fixed by correcting the key
        sort order.
       (<a href="http://bugs.mysql.com/31137" target="_top">Bug#31137</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> failed to handle databases
        containing a ‘<code class="literal">-</code>’ character in the
        name.
       (<a href="http://bugs.mysql.com/31113" target="_top">Bug#31113</a>)</p></li><li><p>
        Starting the server using <code class="option">--read-only</code> and with
        the Event Scheduler enabled caused it to crash.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This issue occurred only when the server had been built with
          certain nonstandard combinations of
          <span><strong class="command">configure</strong></span> options.
        </p></div><p>(<a href="http://bugs.mysql.com/31111" target="_top">Bug#31111</a>)</p></li><li><p>
        <code class="literal">GROUP BY NULL WITH ROLLUP</code> could cause a
        server crash.
       (<a href="http://bugs.mysql.com/31095" target="_top">Bug#31095</a>)</p><p>See also <a href="http://bugs.mysql.com/32558" target="_top">Bug#32558</a></p></li><li><p>
        A rule to prefer <code class="literal">filesort</code> over an indexed
        <code class="literal">ORDER BY</code> when accessing all rows of a table
        was being used even if a <code class="literal">LIMIT</code> clause was
        present.
       (<a href="http://bugs.mysql.com/31094" target="_top">Bug#31094</a>)</p></li><li><p>
        <a href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a> operations could cause
        a server crash for character sets such as
        <code class="literal">ucs2</code>. Now the arguments are converted to
        <code class="literal">utf8</code> if possible, to allow correct results to
        be produced if the resulting strings contain only 8-bit
        characters.
       (<a href="http://bugs.mysql.com/31081" target="_top">Bug#31081</a>)</p></li><li><p>
        Expressions of the form <code class="literal">WHERE
        <em class="replaceable"><code>col</code></em> NOT IN
        (<em class="replaceable"><code>col</code></em>, ...)</code>, where the same
        column was named both times, could cause a server crash in the
        optimizer.
       (<a href="http://bugs.mysql.com/31075" target="_top">Bug#31075</a>)</p></li><li><p>
        Internal conversion routines could fail for several multi-byte
        character sets (<code class="literal">big5</code>,
        <code class="literal">cp932</code>, <code class="literal">euckr</code>,
        <code class="literal">gb2312</code>, <code class="literal">sjis</code>) for empty
        strings or during evaluation of <a href="functions.html#operator_sounds-like"><code class="literal">SOUNDS
        LIKE</code></a>.
       (<a href="http://bugs.mysql.com/31069" target="_top">Bug#31069</a>, <a href="http://bugs.mysql.com/31070" target="_top">Bug#31070</a>)</p></li><li><p>
        Many nested subqueries in a single query could led to excessive
        memory consumption and possibly a crash of the server.
       (<a href="http://bugs.mysql.com/31048" target="_top">Bug#31048</a>)</p></li><li><p>
        Using <code class="literal">ORDER BY</code> with
        <code class="literal">ARCHIVE</code> tables caused a server crash.
       (<a href="http://bugs.mysql.com/31036" target="_top">Bug#31036</a>)</p></li><li><p>
        A server crash could occur when a
        non-<code class="literal">DETERMINISTIC</code> stored function was used in
        a <code class="literal">GROUP BY</code> clause.
       (<a href="http://bugs.mysql.com/31035" target="_top">Bug#31035</a>)</p></li><li><p>
        The <a href="functions.html#function_mod"><code class="literal">MOD()</code></a> function and the
        <code class="literal">%</code> operator crashed the server for a divisor
        less than 1 with a very long fractional part.
       (<a href="http://bugs.mysql.com/31019" target="_top">Bug#31019</a>)</p></li><li><p>
        Transactions were committed prematurely when <code class="literal">LOCK
        TABLE</code> and <code class="literal">SET AUTOCOMMIT=OFF</code> were
        used together.
       (<a href="http://bugs.mysql.com/30996" target="_top">Bug#30996</a>)</p></li><li><p>
        On Windows, the <code class="literal">pthread_mutex_trylock()</code>
        implementation was incorrect.
       (<a href="http://bugs.mysql.com/30992" target="_top">Bug#30992</a>)</p></li><li><p>
        A character set introducer followed by a hexadecimal or
        bit-value literal did not check its argument and could return an
        ill-formed result for invalid input.
       (<a href="http://bugs.mysql.com/30986" target="_top">Bug#30986</a>)</p></li><li><p>
        <a href="functions.html#function_char"><code class="literal">CHAR(<em class="replaceable"><code>str</code></em> USING
        <em class="replaceable"><code>charset</code></em>)</code></a> did not check its
        argument and could return an ill-formed result for invalid
        input.
       (<a href="http://bugs.mysql.com/30982" target="_top">Bug#30982</a>)</p></li><li><p>
        The result from
        <a href="functions.html#function_char"><code class="literal">CHAR(<em class="replaceable"><code>str</code></em>
        USING ucs2</code></a>) did not add a leading 0x00 byte for input
        strings with an odd number of bytes.
       (<a href="http://bugs.mysql.com/30981" target="_top">Bug#30981</a>)</p></li><li><p>
        The <a href="spatial-extensions.html#function_geomfromtext"><code class="literal">GeomFromText()</code></a> function
        could cause a server crash if the first argument was
        <code class="literal">NULL</code> or the empty string.
       (<a href="http://bugs.mysql.com/30955" target="_top">Bug#30955</a>)</p></li><li><p>
        <a href="functions.html#function_makedate"><code class="literal">MAKEDATE()</code></a> incorrectly moved
        year values in the 100-200 range into the 1970-2069 range. (This
        is legitimate for 00-99, but three-digit years should be used
        unchanged.)
       (<a href="http://bugs.mysql.com/30951" target="_top">Bug#30951</a>)</p></li><li><p>
        When invoked with constant arguments,
        <a href="functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a> could
        use a cached value for the format string and return incorrect
        results.
       (<a href="http://bugs.mysql.com/30942" target="_top">Bug#30942</a>)</p></li><li><p>
        <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a> returned
        <code class="literal">','</code> rather than an empty string when the
        argument column contained only empty strings.
       (<a href="http://bugs.mysql.com/30897" target="_top">Bug#30897</a>)</p></li><li><p>
        For <code class="literal">MEMORY</code> tables, lookups for
        <code class="literal">NULL</code> values in <code class="literal">BTREE</code>
        indexes could return incorrect results.
       (<a href="http://bugs.mysql.com/30885" target="_top">Bug#30885</a>)</p></li><li><p>
        A server crash could occur if a stored function that contained a
        <code class="literal">DROP TEMPORARY TABLE</code> statement was invoked by
        a <code class="literal">CREATE TEMPORARY TABLE</code> statement that
        created a table of the same name.
       (<a href="http://bugs.mysql.com/30882" target="_top">Bug#30882</a>)</p></li><li><p>
        Calling <a href="functions.html#function_name-const"><code class="literal">NAME_CONST()</code></a> with
        non-constant arguments triggered an assertion failure.
        Non-constant arguments are now disallowed.
       (<a href="http://bugs.mysql.com/30832" target="_top">Bug#30832</a>)</p></li><li><p>
        For a spatial column with a regular
        (non-<code class="literal">SPATIAL</code>) index, queries failed if the
        optimizer tried to use the index.
       (<a href="http://bugs.mysql.com/30825" target="_top">Bug#30825</a>)</p></li><li><p>
        Values for the <code class="option">--tc-heuristic-recover</code> option
        incorrectly were treated as values for the
        <code class="option">--myisam-stats-method</code> option.
       (<a href="http://bugs.mysql.com/30821" target="_top">Bug#30821</a>)</p></li><li><p>
        <code class="literal">INFORMATION_SCHEMA.SCHEMATA</code> was returning
        incorrect information.
       (<a href="http://bugs.mysql.com/30795" target="_top">Bug#30795</a>)</p></li><li><p>
        The optimizer incorrectly optimized conditions out of the
        <code class="literal">WHERE</code> clause in some queries involving
        subqueries and indexed columns.
       (<a href="http://bugs.mysql.com/30788" target="_top">Bug#30788</a>)</p></li><li><p>
        Improper calculation of <a href="functions.html#operator_case"><code class="literal">CASE</code></a>
        expression results could lead to value truncation.
       (<a href="http://bugs.mysql.com/30782" target="_top">Bug#30782</a>)</p></li><li><p>
        On Windows, the <code class="literal">pthread_mutex_trylock()</code>
        implementation was incorrect. One symptom was that invalidating
        the query cache could cause a server crash.
       (<a href="http://bugs.mysql.com/30768" target="_top">Bug#30768</a>)</p></li><li><p>
        A multiple-table <code class="literal">UPDATE</code> involving
        transactional and non-transactional tables caused an assertion
        failure.
       (<a href="http://bugs.mysql.com/30763" target="_top">Bug#30763</a>)</p></li><li><p>
        User-supplied names foreign key names might not be set to the
        right key, leading to foreign keys with no name.
       (<a href="http://bugs.mysql.com/30747" target="_top">Bug#30747</a>)</p></li><li><p>
        Under some circumstances, <code class="literal">CREATE TABLE ...
        SELECT</code> could crash the server or incorrectly report
        that the table row size was too large.
       (<a href="http://bugs.mysql.com/30736" target="_top">Bug#30736</a>)</p></li><li><p>
        Using the <a href="functions.html#function_min"><code class="literal">MIN()</code></a> or
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a> function to
        select one part of a multi-part key could cause a crash when the
        function result was <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/30715" target="_top">Bug#30715</a>)</p></li><li><p>
        The embedded server did not properly check column-level
        privileges.
       (<a href="http://bugs.mysql.com/30710" target="_top">Bug#30710</a>)</p></li><li><p>
        <code class="literal">INFORMATION_SCHEMA.VIEWS.VIEW_DEFINITION</code> was
        incorrect for views that were defined to select from other
        <code class="literal">INFORMATION_SCHEMA</code> tables.
       (<a href="http://bugs.mysql.com/30689" target="_top">Bug#30689</a>)</p></li><li><p>
        Issuing an <code class="literal">ALTER SERVER</code> statement to update
        the settings for a <code class="literal">FEDERATED</code> server would
        cause the <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/30671" target="_top">Bug#30671</a>)</p></li><li><p>
        The optimizer could ignore <code class="literal">ORDER BY</code> in cases
        when the result set is ordered by <code class="literal">filesort</code>,
        resulting in rows being returned in incorrect order.
       (<a href="http://bugs.mysql.com/30666" target="_top">Bug#30666</a>)</p></li><li><p>
        A different execution plan was displayed for
        <code class="literal">EXPLAIN</code> than would actually have been used
        for the <code class="literal">SELECT</code> because the test of sort keys
        for <code class="literal">ORDER BY</code> did not consider keys mentioned
        in <code class="literal">IGNORE KEYS FOR ORDER BY</code>.
       (<a href="http://bugs.mysql.com/30665" target="_top">Bug#30665</a>)</p></li><li><p>
        The <code class="literal">thread_handling</code> system variable was
        treated as having a <code class="literal">SESSION</code> value and as
        being settable at runtime. Now it has only a
        <code class="literal">GLOBAL</code> read-only value.
       (<a href="http://bugs.mysql.com/30651" target="_top">Bug#30651</a>)</p></li><li><p>
        On Windows, <code class="literal">LIMIT</code> arguments greater than 2^32
        did not work correctly.
       (<a href="http://bugs.mysql.com/30639" target="_top">Bug#30639</a>)</p></li><li><p>
        <code class="literal">MyISAM</code> tables could not exceed 4294967295
        (2^32 - 1) rows on Windows.
       (<a href="http://bugs.mysql.com/30638" target="_top">Bug#30638</a>)</p></li><li><p>
        A failed <code class="literal">HANDLER ... READ</code> operation could
        leave the table in a locked state.
       (<a href="http://bugs.mysql.com/30632" target="_top">Bug#30632</a>)</p></li><li><p>
        <span><strong class="command">mysql-test-run.pl</strong></span> could not run
        <span><strong class="command">mysqld</strong></span> with <code class="literal">root</code>
        privileges.
       (<a href="http://bugs.mysql.com/30630" target="_top">Bug#30630</a>)</p></li><li><p>
        The <span><strong class="command">mysqld_safe</strong></span> script contained a syntax
        error.
       (<a href="http://bugs.mysql.com/30624" target="_top">Bug#30624</a>)</p></li><li><p>
        The optimization that uses a unique index to remove
        <code class="literal">GROUP BY</code> did not ensure that the index was
        actually used, thus violating the <code class="literal">ORDER BY</code>
        that is implied by <code class="literal">GROUP BY</code>.
       (<a href="http://bugs.mysql.com/30596" target="_top">Bug#30596</a>)</p></li><li><p>
        <code class="literal">SHOW STATUS LIKE 'Ssl_cipher_list'</code> from a
        MySQL client connected via SSL returned an empty string rather
        than a list of available ciphers.
       (<a href="http://bugs.mysql.com/30593" target="_top">Bug#30593</a>)</p></li><li><p>
        For <code class="literal">MEMORY</code> tables, <code class="literal">DELETE</code>
        statements that remove rows based on an index read could fail to
        remove all matching rows.
       (<a href="http://bugs.mysql.com/30590" target="_top">Bug#30590</a>)</p></li><li><p>
        Using <code class="literal">GROUP BY</code> on an expression of the form
        <code class="literal"><em class="replaceable"><code>timestamp_col</code></em> DIV
        <em class="replaceable"><code>number</code></em></code> caused a server
        crash due to incorrect calculation of number of decimals.
       (<a href="http://bugs.mysql.com/30587" target="_top">Bug#30587</a>)</p></li><li><p>
        Executing a <code class="literal">SELECT COUNT(*)</code> query on an
        <code class="literal">InnoDB</code> table partitioned by
        <code class="literal">KEY</code> that used a <code class="literal">DOUBLE</code>
        column as the partitioning key caused the server to crash.
       (<a href="http://bugs.mysql.com/30583" target="_top">Bug#30583</a>)</p></li><li><p>
        The options available to the <code class="literal">CHECK TABLE</code>
        statement were also allowed in <code class="literal">OPTIMIZE TABLE</code>
        and <code class="literal">ANALYZE TABLE</code> statements, but caused
        corruption during their execution. These options were never
        supported for the these statements, and an error is now raised
        if you try to apply these options to these statements.
       (<a href="http://bugs.mysql.com/30495" target="_top">Bug#30495</a>)</p></li><li><p>
        A self-referencing trigger on a partitioned table caused the
        server to crash instead of failing with an error.
       (<a href="http://bugs.mysql.com/30484" target="_top">Bug#30484</a>)</p></li><li><p>
        The <a href="apis.html#mysql-change-user" title="29.2.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a> C API
        function did not correctly reset the character set variables to
        the values they had just after initially connecting.
       (<a href="http://bugs.mysql.com/30472" target="_top">Bug#30472</a>)</p></li><li><p>
        When expanding a <code class="literal">*</code> in a
        <code class="literal">USING</code> or <code class="literal">NATURAL</code> join, the
        check for table access for both tables in the join was done
        using only the grant information of the first table.
       (<a href="http://bugs.mysql.com/30468" target="_top">Bug#30468</a>)</p></li><li><p>
        When casting a string value to an integer, cases where the input
        string contained a decimal point and was long enough to overrun
        the <code class="literal">unsigned long long</code> type were not handled
        correctly. The position of the decimal point was not taken into
        account which resulted in miscalculated numbers and incorrect
        truncation to appropriate SQL data type limits.
       (<a href="http://bugs.mysql.com/30453" target="_top">Bug#30453</a>)</p></li><li><p>
        Versions of <span><strong class="command">mysqldump</strong></span> from MySQL 4.1 or
        higher tried to use <code class="literal">START TRANSACTION WITH CONSISTENT
        SNAPSHOT</code> if the <code class="option">--single-transaction</code>
        and <code class="option">--master-data</code> options were given, even with
        servers older than 4.1 that do not support consistent snapshots.
       (<a href="http://bugs.mysql.com/30444" target="_top">Bug#30444</a>)</p></li><li><p>
        With <code class="literal">libmysqld</code>, use of prepared statements
        and the query cache at the same time caused problems.
       (<a href="http://bugs.mysql.com/30430" target="_top">Bug#30430</a>)</p></li><li><p>
        Issuing a <code class="literal">DELETE</code> statement having both an
        <code class="literal">ORDER BY</code> clause and a
        <code class="literal">LIMIT</code> clause could cause
        <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/30385" target="_top">Bug#30385</a>)</p></li><li><p>
        For <code class="literal">CREATE ... SELECT ... FROM</code>, where the
        resulting table contained indexes, adding
        <code class="literal">SQL_BUFFER_RESULT</code> to the
        <code class="literal">SELECT</code> part caused index corruption in the
        table.
       (<a href="http://bugs.mysql.com/30384" target="_top">Bug#30384</a>)</p></li><li><p>
        The <code class="literal">Last_query_cost</code> status variable value can
        be computed accurately only for simple “<span class="quote">flat</span>”
        queries, not complex queries such as those with subqueries or
        <code class="literal">UNION</code>. However, the value was not
        consistently being set to 0 for complex queries.
       (<a href="http://bugs.mysql.com/30377" target="_top">Bug#30377</a>)</p></li><li><p>
        The optimizer made incorrect assumptions about the value of the
        <code class="literal">is_member</code> value for user-defined functions,
        sometimes resulting in incorrect ordering of UDF results.
       (<a href="http://bugs.mysql.com/30355" target="_top">Bug#30355</a>)</p></li><li><p>
        Queries that had a <code class="literal">GROUP BY</code> clause and
        selected <a href="functions.html#function_count"><code class="literal">COUNT(DISTINCT
        <em class="replaceable"><code>bit_column</code></em>)</code></a> returned
        incorrect results.
       (<a href="http://bugs.mysql.com/30324" target="_top">Bug#30324</a>)</p></li><li><p>
        Some valid <code class="literal">euc-kr</code> characters having the
        second byte in the ranges <code class="literal">[0x41..0x5A]</code> and
        <code class="literal">[0x61..0x7A]</code> were rejected.
       (<a href="http://bugs.mysql.com/30315" target="_top">Bug#30315</a>)</p></li><li><p>
        When loading a dynamic plugin on FreeBSD, the plugin would fail
        to load. This was due to a build error where the required
        symbols would be not exported correctly.
       (<a href="http://bugs.mysql.com/30296" target="_top">Bug#30296</a>)</p></li><li><p>
        Simultaneous <code class="literal">ALTER TABLE</code> statements for
        <code class="literal">BLACKHOLE</code> tables caused 100% CPU use due to
        locking problems.
       (<a href="http://bugs.mysql.com/30294" target="_top">Bug#30294</a>)</p></li><li><p>
        Setting certain values on a table using a spatial index could
        cause the server to crash.
       (<a href="http://bugs.mysql.com/30286" target="_top">Bug#30286</a>)</p></li><li><p>
        Tables with a <code class="literal">GEOMETRY</code> column could be marked
        as corrupt if you added a non-<code class="literal">SPATIAL</code> index
        on a <code class="literal">GEOMETRY</code> column.
       (<a href="http://bugs.mysql.com/30284" target="_top">Bug#30284</a>)</p></li><li><p>
        Flushing a merge table between the time it was opened and its
        child table were actually attached caused the server to crash.
       (<a href="http://bugs.mysql.com/30273" target="_top">Bug#30273</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/26379" target="_top">Bug#26379</a></p></li><li><p>
        The query cache does not support retrieval of statements for
        which column level access control applies, but the server was
        still caching such statements, thus wasting memory.
       (<a href="http://bugs.mysql.com/30269" target="_top">Bug#30269</a>)</p></li><li><p>
        Using <code class="literal">DISTINCT</code> or <code class="literal">GROUP BY</code>
        on a <code class="literal">BIT</code> column in a
        <code class="literal">SELECT</code> statement caused the column to be cast
        internally as an integer, with incorrect results being returned
        from the query.
       (<a href="http://bugs.mysql.com/30245" target="_top">Bug#30245</a>)</p></li><li><p>
        <code class="literal">GROUP BY</code> on <code class="literal">BIT</code> columns
        produced incorrect results.
       (<a href="http://bugs.mysql.com/30219" target="_top">Bug#30219</a>)</p></li><li><p>
        Short-format <span><strong class="command">mysql</strong></span> commands embedded within
        <code class="literal">/*! ... */</code> comments were parsed incorrectly
        by <span><strong class="command">mysql</strong></span>, which discarded the rest of the
        comment including the terminating <code class="literal">*/</code>
        characters. The result was a malformed (unclosed) comment. Now
        <span><strong class="command">mysql</strong></span> does not discard the
        <code class="literal">*/</code> characters.
       (<a href="http://bugs.mysql.com/30164" target="_top">Bug#30164</a>)</p></li><li><p>
        If the server crashed during an <code class="literal">ALTER TABLE</code>
        statement, leaving a temporary file in the database directory, a
        subsequent <code class="literal">DROP DATABASE</code> statement failed due
        to the presence of the temporary file.
       (<a href="http://bugs.mysql.com/30152" target="_top">Bug#30152</a>)</p></li><li><p>
        When <span><strong class="command">mysqldump</strong></span> wrote <code class="literal">DROP
        DATABASE</code> statements within version-specific comments,
        it included the terminating semicolon in the wrong place,
        causing following statements to fail when the dump file was
        reloaded.
       (<a href="http://bugs.mysql.com/30126" target="_top">Bug#30126</a>)</p></li><li><p>
        It was not possible for client applications to distinguish
        between auto-set and auto-updated <code class="literal">TIMESTAMP</code>
        column values.
      </p><p>
        To rectify this problem, a new
        <code class="literal">ON_UPDATE_NOW_FLAG</code> flag is set by
        Field_timestamp constructors whenever a column should be set to
        <code class="literal">NOW</code> on <code class="literal">UPDATE</code>, and the
        <code class="literal">get_schema_column_record()</code> function now
        reports whether a timestamp column is set to
        <code class="literal">NOW</code> on <code class="literal">UPDATE</code>. In
        addition, such columns now display <code class="literal">on update
        CURRENT_TIMESTAMP</code> in the <code class="literal">Extra</code>
        column in the output from <code class="literal">SHOW COLUMNS</code>.
       (<a href="http://bugs.mysql.com/30081" target="_top">Bug#30081</a>)</p></li><li><p>
        Some <code class="literal">INFORMATION_SCHEMA</code> tables are intended
        for internal use, but could be accessed by using
        <code class="literal">SHOW</code> statements.
       (<a href="http://bugs.mysql.com/30079" target="_top">Bug#30079</a>)</p></li><li><p>
        On some 64-bit systems, inserting the largest negative value
        into a <code class="literal">BIGINT</code> column resulted in incorrect
        data.
       (<a href="http://bugs.mysql.com/30069" target="_top">Bug#30069</a>)</p></li><li><p>
        <span><strong class="command">mysqlslap</strong></span> did not properly handle multiple
        result sets from stored procedures.
       (<a href="http://bugs.mysql.com/29985" target="_top">Bug#29985</a>)</p></li><li><p>
        Specifying the <code class="option">--without-geometry</code> option for
        <span><strong class="command">configure</strong></span> caused server compilation to fail.
       (<a href="http://bugs.mysql.com/29972" target="_top">Bug#29972</a>)</p></li><li><p>
        Statements within stored procedures ignored the value of the
        <code class="literal">low_priority_updates</code> system variable.
       (<a href="http://bugs.mysql.com/29963" target="_top">Bug#29963</a>)</p><p>See also <a href="http://bugs.mysql.com/26162" target="_top">Bug#26162</a></p></li><li><p>
        With auto-reconnect enabled, row fetching for a prepared
        statement could crash after reconnect occurred because loss of
        the statement handler was not accounted for.
       (<a href="http://bugs.mysql.com/29948" target="_top">Bug#29948</a>)</p></li><li><p>
        <span><strong class="command">mysqldump <code class="option">--skip-events
        --all-databases</code> </strong></span> dumped data from the
        <code class="literal">mysqld.event</code> table, and when restoring from
        this dump, events were created in spite of the
        <code class="option">--skip-events</code> option.
       (<a href="http://bugs.mysql.com/29938" target="_top">Bug#29938</a>)</p></li><li><p>
        When <span><strong class="command">mysqlslap</strong></span> was given a query to execute
        from a file via a
        <code class="option">--query=<em class="replaceable"><code>file_name</code></em> </code>
        option, it executed the query one too many times.
       (<a href="http://bugs.mysql.com/29803" target="_top">Bug#29803</a>)</p></li><li><p>
        <span><strong class="command">configure</strong></span> did not find <code class="literal">nss</code>
        on some Linux platforms.
       (<a href="http://bugs.mysql.com/29658" target="_top">Bug#29658</a>)</p></li><li><p>
        It was possible when creating a partitioned table using
        <code class="literal">CREATE TABLE ... SELECT</code> to refer in the
        <code class="literal">PARTITION BY</code> clause to columns in the table
        being selected from, which could cause the server to crash. An
        example of such a statement is:
</p><pre class="programlisting">CREATE TABLE t1 (b INT)   
PARTITION BY RANGE(t2.b) ( 
    PARTITION p1 VALUES LESS THAN (10),
    PARTITION p2 VALUES LESS THAN (20)
)   SELECT * FROM t2;
</pre><p>
        The fix is to disallow references in <code class="literal">PARTITION
        BY</code> clauses to columns not in the table being created.
       (<a href="http://bugs.mysql.com/29444" target="_top">Bug#29444</a>)</p></li><li><p>
        If a view used a function in its <code class="literal">SELECT</code>
        statement, the columns from the view were not inserted into the
        <code class="literal">INFORMATION_SCHEMA.COLUMNS</code> table.
       (<a href="http://bugs.mysql.com/29408" target="_top">Bug#29408</a>)</p></li><li><p>
        The <span><strong class="command">mysql</strong></span> client program now ignores Unicode
        byte order mark (BOM) characters at the beginning of input
        files. Previously, it read them and sent them to the server,
        resulting in a syntax error.
      </p><p>
        Presence of a BOM does not cause <span><strong class="command">mysql</strong></span> to
        change its default character set. To do that, invoke
        <span><strong class="command">mysql</strong></span> with an option such as
        <code class="option">--default-character-set=utf8</code>.
       (<a href="http://bugs.mysql.com/29323" target="_top">Bug#29323</a>)</p></li><li><p>
        For transactional tables, an error during a multiple-table
        <code class="literal">DELETE</code> statement did not roll back the
        statement.
       (<a href="http://bugs.mysql.com/29136" target="_top">Bug#29136</a>)</p></li><li><p>
        The <code class="literal">log</code> and
        <code class="literal">log_slow_queries</code> system variables were
        displayed by <code class="literal">SHOW VARIABLES</code> but could not be
        accessed in expressions as <code class="literal">@@log</code> and
        <code class="literal">@@log_slow_queries</code>. Also, attempting to set
        them with <code class="literal">SET</code> produced an incorrect
        <code class="literal">Unknown system variable</code> message. Now these
        variables are treated as synonyms for
        <code class="literal">general_log</code> and
        <code class="literal">slow_query_log</code>, which means that they can be
        accessed in expressions and their values can be changed with
        <code class="literal">SET</code>.
       (<a href="http://bugs.mysql.com/29131" target="_top">Bug#29131</a>)</p></li><li><p>
        Denormalized double-precision numbers cannot be handled properly
        by old MIPS pocessors. For IRIX, this is now handled by enabling
        a mode to use a software workaround.
       (<a href="http://bugs.mysql.com/29085" target="_top">Bug#29085</a>)</p></li><li><p>
        <code class="literal">SHOW VARIABLES</code> did not display the
        <code class="literal">relay_log</code>,
        <code class="literal">relay_log_index</code>, or
        <code class="literal">relay_log_info_file</code> system variables.
       (<a href="http://bugs.mysql.com/28893" target="_top">Bug#28893</a>)</p></li><li><p>
        When doing a <code class="literal">DELETE</code> on table that involved a
        <code class="literal">JOIN</code> with <code class="literal">MyISAM</code> or
        <code class="literal">MERGE</code> tables and the <code class="literal">JOIN</code>
        referred to the same table, the operation could fail reporting
        <code class="literal">ERROR 1030 (HY000): Got error 134 from storage
        engine</code>. This was because scans on the table contents
        would change because of rows that had already been deleted.
       (<a href="http://bugs.mysql.com/28837" target="_top">Bug#28837</a>)</p></li><li><p>
        Killing an SSL connection on platforms where MySQL is compiled
        with <code class="literal">-DSIGNAL_WITH_VIO_CLOSE</code> (Windows, Mac OS
        X, and some others) could crash the server.
       (<a href="http://bugs.mysql.com/28812" target="_top">Bug#28812</a>)</p></li><li><p>
        <code class="literal">SHOW VARIABLES</code> did not correctly display the
        value of the <code class="literal">thread_handling</code> system variable.
       (<a href="http://bugs.mysql.com/28785" target="_top">Bug#28785</a>)</p></li><li><p>
        On Windows, <span><strong class="command">mysql_upgrade</strong></span> created temporary
        files in <code class="filename">C:\</code> and did not clean them up.
       (<a href="http://bugs.mysql.com/28774" target="_top">Bug#28774</a>)</p></li><li><p>
        Index hints specified in view definitions were ignored when
        using the view to select from the base table.
       (<a href="http://bugs.mysql.com/28702" target="_top">Bug#28702</a>)</p></li><li><p>
        Views do not have indexes, so index hints do not apply. Use of
        index hints when selecting from a view is now disallowed.
       (<a href="http://bugs.mysql.com/28701" target="_top">Bug#28701</a>)</p></li><li><p>
        After changing the SQL mode to a restrictive value that would
        make already-inserted dates in a column be considered invalid,
        searches returned different results depending on whether the
        column was indexed.
       (<a href="http://bugs.mysql.com/28687" target="_top">Bug#28687</a>)</p></li><li><p>
        When running the MySQL Instance Configuration Wizard, a race
        condition could exist that would fail to connect to a newly
        configured instance. This was because <span><strong class="command">mysqld</strong></span>
        had not completed the startup process before the next stage of
        the installation process.
       (<a href="http://bugs.mysql.com/28628" target="_top">Bug#28628</a>)</p></li><li><p>
        A <code class="literal">SELECT</code> in one connection could be blocked
        by <code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code> in
        another connection even when
        <code class="literal">low_priority_updates</code> is set.
       (<a href="http://bugs.mysql.com/28587" target="_top">Bug#28587</a>)</p></li><li><p>
        <span><strong class="command">mysql_upgrade</strong></span> could run binaries dynamically
        linked against incorrect versions of shared libraries.
       (<a href="http://bugs.mysql.com/28560" target="_top">Bug#28560</a>)</p></li><li><p>
        The result from <a href="functions.html#function_char"><code class="literal">CHAR()</code></a> was
        incorrectly assumed in some contexts to return a single-byte
        result.
       (<a href="http://bugs.mysql.com/28550" target="_top">Bug#28550</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> reversed the event name and program
        name in one of its error messages.
       (<a href="http://bugs.mysql.com/28535" target="_top">Bug#28535</a>)</p></li><li><p>
        If a <code class="literal">LIMIT</code> clause was present, the server
        could fail to consider indexes that could be used for
        <code class="literal">ORDER BY</code> or <code class="literal">GROUP BY</code>.
       (<a href="http://bugs.mysql.com/28404" target="_top">Bug#28404</a>)</p></li><li><p>
        The parser confused user-defined function (UDF) and stored
        function creation for <code class="literal">CREATE FUNCTION</code> and
        required that there be a default database when creating UDFs,
        although there is no such requirement.
       (<a href="http://bugs.mysql.com/28318" target="_top">Bug#28318</a>, <a href="http://bugs.mysql.com/29816" target="_top">Bug#29816</a>)</p></li><li><p>
        Fast-mutex locking was not thread-safe and optimization-safe on
        some platforms, which could cause program failures such as
        out-of-memory errors.
       (<a href="http://bugs.mysql.com/28284" target="_top">Bug#28284</a>)</p></li><li><p>
        The result of a comparison between <code class="literal">VARBINARY</code>
        and <code class="literal">BINARY</code> columns differed depending on
        whether the <code class="literal">VARBINARY</code> column was indexed.
       (<a href="http://bugs.mysql.com/28076" target="_top">Bug#28076</a>)</p></li><li><p>
        The metadata in some <code class="literal">MYSQL_FIELD</code> members
        could be incorrect when a temporary table was used to evaluate a
        query.
       (<a href="http://bugs.mysql.com/27990" target="_top">Bug#27990</a>)</p></li><li><p>
        Partition pruning was not used for queries having
        <code class="literal">&lt;=</code> or <code class="literal">&gt;=</code> conditions
        in the <code class="literal">WHERE</code> clause on a table using
        <a href="functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a> in the partitioning
        expression.
       (<a href="http://bugs.mysql.com/27927" target="_top">Bug#27927</a>)</p></li><li><p>
        <span><strong class="command">mysqlbinlog</strong></span> produced incorrectly formatted
        <code class="literal">DATETIME</code> and <code class="literal">TIMESTAMP</code>
        values.
       (<a href="http://bugs.mysql.com/27894" target="_top">Bug#27894</a>)</p></li><li><p>
        Failure to log to the <code class="literal">general_log</code> or
        <code class="literal">slow_log</code> log tables were not logged to the
        error log at all or were logged incorrectly.
       (<a href="http://bugs.mysql.com/27858" target="_top">Bug#27858</a>)</p></li><li><p>
        An <code class="literal">ORDER BY</code> at the end of a
        <code class="literal">UNION</code> affected individual
        <code class="literal">SELECT</code> statements rather than the overall
        query result.
       (<a href="http://bugs.mysql.com/27848" target="_top">Bug#27848</a>)</p></li><li><p>
        <span><strong class="command">comp_err</strong></span> created files with permissions such
        that they might be inaccessible during <span><strong class="command">make
        install</strong></span> operations.
       (<a href="http://bugs.mysql.com/27789" target="_top">Bug#27789</a>)</p></li><li><p>
        <code class="literal">SHOW COLUMNS</code> returned <code class="literal">NULL</code>
        instead of the empty string for the <code class="literal">Default</code>
        value of columns that had no default specified.
       (<a href="http://bugs.mysql.com/27747" target="_top">Bug#27747</a>)</p></li><li><p>
        It was possible to create a view having a column whose name
        consisted of an empty string or space characters only.
       (<a href="http://bugs.mysql.com/27695" target="_top">Bug#27695</a>)</p><p>See also <a href="http://bugs.mysql.com/31202" target="_top">Bug#31202</a></p></li><li><p>
        With recent versions of DBD::mysql,
        <span><strong class="command">mysqlhotcopy</strong></span> generated table names that were
        doubly qualified with the database name.
       (<a href="http://bugs.mysql.com/27694" target="_top">Bug#27694</a>)</p></li><li><p>
        The anonymous accounts were not being created during MySQL
        installation.
       (<a href="http://bugs.mysql.com/27692" target="_top">Bug#27692</a>)</p></li><li><p>
        Some <code class="literal">SHOW</code> statements and
        <code class="literal">INFORMATION_SCHEMA</code> queries could expose
        information not allowed by the user's access privileges.
       (<a href="http://bugs.mysql.com/27629" target="_top">Bug#27629</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE <em class="replaceable"><code>tbl_name</code></em>
        ROW_FORMAT=<em class="replaceable"><code>format_type</code></em></code> did
        not cause the table to be rebuilt.
       (<a href="http://bugs.mysql.com/27610" target="_top">Bug#27610</a>)</p></li><li><p>
        A race condition between killing a statement and the thread
        executing the statement could lead to a situation such that the
        binary log contained an event indicating that the statement was
        killed, whereas the statement actually executed to completion.
       (<a href="http://bugs.mysql.com/27571" target="_top">Bug#27571</a>)</p></li><li><p>
        Some character mappings in the <code class="filename">ascii.xml</code>
        file were incorrect.
       (<a href="http://bugs.mysql.com/27562" target="_top">Bug#27562</a>)</p></li><li><p>
        Some queries using the
        <a href="functions.html#function_name-const"><code class="literal">NAME_CONST()</code></a> function failed to
        return either a result or an error to the client, causing it to
        hang. This was due to the fact that there was no check to insure
        that both arguments to this function were constant expressions.
       (<a href="http://bugs.mysql.com/27545" target="_top">Bug#27545</a>, <a href="http://bugs.mysql.com/32559" target="_top">Bug#32559</a>)</p></li><li><p>
        With the <code class="literal">read_only</code> system variable enabled,
        <code class="literal">CREATE DATABASE</code> and <code class="literal">DROP
        DATABASE</code> were allowed to users who did not have the
        <code class="literal">SUPER</code> privilege.
       (<a href="http://bugs.mysql.com/27440" target="_top">Bug#27440</a>)</p></li><li><p>
        For an event with an <code class="literal">ON COMPLETION</code> value of
        <code class="literal">PRESERVE</code>, an <code class="literal">ALTER EVENT</code>
        statement that specified no <code class="literal">ON COMPLETION</code>
        option caused the value to become <code class="literal">NOT
        PRESERVE</code>.
       (<a href="http://bugs.mysql.com/27407" target="_top">Bug#27407</a>)</p></li><li><p>
        MySQL failed to generate or retrieve an
        <code class="literal">AUTO_INCREMENT</code> primary key for
        <code class="literal">InnoDB</code> tables with user-defined partitioning.
       (<a href="http://bugs.mysql.com/27405" target="_top">Bug#27405</a>)</p></li><li><p>
        Changes to the <code class="literal">sql_mode</code> system variable were
        not tracked by <code class="literal">INSERT DELAYED</code>.
       (<a href="http://bugs.mysql.com/27358" target="_top">Bug#27358</a>)</p></li><li><p>
        A <code class="literal">SELECT</code> with more than 31 nested dependent
        subqueries returned an incorrect result.
       (<a href="http://bugs.mysql.com/27352" target="_top">Bug#27352</a>)</p></li><li><p>
        The <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> and
        <a href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a> functions
        performed extremely slowly for large amounts of XML data
        (greater than 64 KB). These functions now execute approximately
        2000 times faster than previously.
       (<a href="http://bugs.mysql.com/27287" target="_top">Bug#27287</a>)</p></li><li><p>
        On Windows, writes to the debug log were using
        <code class="literal">freopen()</code> instead of
        <code class="literal">fflush()</code>, resulting in slower performance.
       (<a href="http://bugs.mysql.com/27099" target="_top">Bug#27099</a>)</p></li><li><p>
        For a table that used different full-text parsers for different
        <code class="literal">FULLTEXT</code> indexes, <code class="literal">SHOW CREATE
        TABLE</code> displayed the first parser name for all of them.
       (<a href="http://bugs.mysql.com/27040" target="_top">Bug#27040</a>)</p></li><li><p>
        <a href="functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a> displayed an error
        message that referred to <code class="literal">STR_TO_TIME()</code>.
       (<a href="http://bugs.mysql.com/27014" target="_top">Bug#27014</a>)</p></li><li><p>
        The <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> C API
        function sometimes returned different results for
        <code class="literal">libmysqld</code> and
        <code class="literal">libmysqlclient</code>.
       (<a href="http://bugs.mysql.com/26921" target="_top">Bug#26921</a>)</p></li><li><p>
        Symbolic links on Windows could fail to work.
       (<a href="http://bugs.mysql.com/26811" target="_top">Bug#26811</a>)</p></li><li><p>
        <span><strong class="command">mysqld</strong></span> sometimes miscalculated the number of
        digits required when storing a floating-point number in a
        <code class="literal">CHAR</code> column. This caused the value to be
        truncated, or (when using a debug build) caused the server to
        crash.
       (<a href="http://bugs.mysql.com/26788" target="_top">Bug#26788</a>)</p><p>See also <a href="http://bugs.mysql.com/12860" target="_top">Bug#12860</a></p></li><li><p>
        <code class="literal">LOAD DATA INFILE</code> ran very slowly when reading
        large files into partitioned tables.
       (<a href="http://bugs.mysql.com/26527" target="_top">Bug#26527</a>)</p></li><li><p>
        It makes no sense to attempt to use <code class="literal">ALTER TABLE ...
        ORDER BY</code> to order an <code class="literal">InnoDB</code> table
        if there is a user-defined clustered index, because rows are
        always ordered by the clustered index. Such attempts now are
        ignored and produce a warning.
      </p><p>
        Also, in some cases, <code class="literal">InnoDB</code> incorrectly used
        a secondary index when the clustered index would produce a
        faster scan. <code class="literal">EXPLAIN</code> output now indicates use
        of the clustered index (for tables that have one) as lines with
        a <code class="literal">type</code> value of <code class="literal">index</code>, a
        <code class="literal">key</code> value of <code class="literal">PRIMARY</code>, and
        without <code class="literal">Using index</code> in the
        <code class="literal">Extra</code> value.
       (<a href="http://bugs.mysql.com/26447" target="_top">Bug#26447</a>)</p><p>See also <a href="http://bugs.mysql.com/35850" target="_top">Bug#35850</a></p></li><li><p>
        Using <code class="literal">HANDLER</code> to open a table having a
        storage engine not supported by <code class="literal">HANDLER</code>
        properly returned an error, but also improperly prevented the
        table from being dropped by other connections.
       (<a href="http://bugs.mysql.com/25856" target="_top">Bug#25856</a>)</p></li><li><p>
        For a prepared statement <em class="replaceable"><code>stmt</code></em>,
        changing the default database following <code class="literal">PREPARE
        <em class="replaceable"><code>stmt</code></em></code> but before
        <code class="literal">EXECUTE <em class="replaceable"><code>stmt</code></em></code>
        caused <em class="replaceable"><code>stmt</code></em> to be recorded
        incorrectly in the binary log.
       (<a href="http://bugs.mysql.com/25843" target="_top">Bug#25843</a>)</p></li><li><p>
        <code class="literal">CREATE TABLE LIKE</code> did not work when the
        source table was an <code class="literal">INFORMATION_SCHEMA</code> table.
       (<a href="http://bugs.mysql.com/25629" target="_top">Bug#25629</a>)</p></li><li><p>
        Threads that were calculating the estimated number of records
        for a range scan did not respond to the <code class="literal">KILL</code>
        statement. That is, if a <code class="literal">range</code> join type is
        possible (even if not selected by the optimizer as a join type
        of choice and thus not shown by <code class="literal">EXPLAIN</code>), the
        query in the <code class="literal">statistics</code> state (shown by the
        <code class="literal">SHOW PROCESSLIST</code>) did not respond to the
        <code class="literal">KILL</code> statement.
       (<a href="http://bugs.mysql.com/25421" target="_top">Bug#25421</a>)</p></li><li><p>
        For <code class="literal">InnoDB</code> tables, <code class="literal">CREATE TABLE a AS
        SELECT * FROM A</code> would fail.
       (<a href="http://bugs.mysql.com/25164" target="_top">Bug#25164</a>)</p></li><li><p>
        For <span><strong class="command">mysql --show-warnings</strong></span>, warnings were in
        some cases not displayed.
       (<a href="http://bugs.mysql.com/25146" target="_top">Bug#25146</a>)</p></li><li><p>
        The <code class="literal">returns</code> column of the
        <code class="literal">mysql.proc</code> table was
        <code class="literal">CHAR(64)</code>, which is not long enough to store
        long data types such as <code class="literal">ENUM</code> types. The
        column has been changed to <code class="literal">LONGBLOB</code> and a
        warning is generated if truncation occurs when storing a row
        into the <code class="literal">proc</code> table.
       (<a href="http://bugs.mysql.com/24923" target="_top">Bug#24923</a>)</p></li><li><p>
        If the expected precision of an arithmetic expression exceeded
        the maximum precision supported by MySQL, the precision of the
        result was reduced by an unpredictable or arbitrary amount,
        rather than to the maximum precision. In some cases, exceeding
        the maximum supported precision could also lead to a crash of
        the server.
       (<a href="http://bugs.mysql.com/24907" target="_top">Bug#24907</a>)</p></li><li><p>
        For Vista installs, <span><strong class="command">MySQLInstanceConfig.exe</strong></span>
        did not add the default MySQL port to the firewall exceptions.
        It now provides a checkbox that enables the user a choice of
        whether to do this.
       (<a href="http://bugs.mysql.com/24853" target="_top">Bug#24853</a>)</p></li><li><p>
        A <code class="literal">CREATE TRIGGER</code> statement could cause a
        deadlock or server crash if it referred to a table for which a
        table lock had been acquired with <code class="literal">LOCK
        TABLES</code>.
       (<a href="http://bugs.mysql.com/23713" target="_top">Bug#23713</a>)</p></li><li><p>
        For storage engines that do not redefine
        <code class="literal">handler::index_next_same()</code> and are capable
        of indexes, statements that include a <code class="literal">WHERE</code>
        clause might select incorrect data.
       (<a href="http://bugs.mysql.com/22351" target="_top">Bug#22351</a>)</p></li><li><p>
        The parser treated the
        <a href="functions.html#function_interval"><code class="literal">INTERVAL()</code></a> function incorrectly,
        leading to situations where syntax errors could result depending
        on which side of an arithmetic operator the function appeared.
       (<a href="http://bugs.mysql.com/22312" target="_top">Bug#22312</a>)</p></li><li><p>
        Entries in the general query log were truncated at 1000
        characters.
       (<a href="http://bugs.mysql.com/21557" target="_top">Bug#21557</a>)</p></li><li><p>
        A memory leak occurred when <code class="literal">CREATE TEMPORARY TABLE ..
        SELECT</code> was invoked from a stored function that in turn
        was called from <code class="literal">CREATE TABLE ... SELECT</code>.
       (<a href="http://bugs.mysql.com/21136" target="_top">Bug#21136</a>)</p></li><li><p>
        It was possible to execute <code class="literal">CREATE TABLE t1 ... SELECT
        ... FROM t2</code> with the <code class="literal">CREATE</code>
        privilege for <code class="literal">t1</code> and
        <code class="literal">SELECT</code> privilege for <code class="literal">t2</code>,
        even in the absence of the <code class="literal">INSERT</code> privilege
        for <code class="literal">t1</code>.
       (<a href="http://bugs.mysql.com/20901" target="_top">Bug#20901</a>)</p></li><li><p>
        Worked around an <span><strong class="command">icc</strong></span> problem with an
        incorrect machine instruction being generated in the context of
        software pre-fetching after a subroutine got in-lined.
        (Upgrading to <span><strong class="command">icc</strong></span> 10.0.026 makes the
        workaround unnecessary.)
       (<a href="http://bugs.mysql.com/20803" target="_top">Bug#20803</a>)</p></li><li><p>
        If a column selected by a view referred to a stored function,
        the data type reported for the column in
        <code class="literal">INFORMATION_SCHEMA.COLUMNS</code> could be
        incorrect.
       (<a href="http://bugs.mysql.com/20550" target="_top">Bug#20550</a>)</p></li><li><p>
        The <a href="apis.html#mysql-change-user" title="29.2.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a> C API
        function changed the value of the
        <code class="literal">SQL_BIG_SELECTS</code> session variable.
       (<a href="http://bugs.mysql.com/20023" target="_top">Bug#20023</a>)</p></li><li><p>
        Hostnames sometimes were treated as case sensitive in
        account-management statements (<code class="literal">CREATE USER</code>,
        <code class="literal">GRANT</code>, <code class="literal">REVOKE</code>, and so
        forth).
       (<a href="http://bugs.mysql.com/19828" target="_top">Bug#19828</a>)</p></li><li><p>
        Issuing an SQL <code class="literal">KILL</code> of the active connection
        caused an error on Mac OS X.
       (<a href="http://bugs.mysql.com/19723" target="_top">Bug#19723</a>)</p></li><li><p>
        The <code class="literal">readline</code> library has been updated to
        version 5.2. This addresses issues in the
        <span><strong class="command">mysql</strong></span> client where history and editing within
        the client would fail to work as expected.
       (<a href="http://bugs.mysql.com/18431" target="_top">Bug#18431</a>)</p></li><li><p>
        The <code class="literal">-lmtmalloc</code> library was removed from the
        output of <span><strong class="command">mysql_config</strong></span> on Solaris, as it
        caused problems when building <code class="literal">DBD::mysql</code> (and
        possibly other applications) on that platform that tried to use
        <span><strong class="command">dlopen()</strong></span> to access the client library.
       (<a href="http://bugs.mysql.com/18322" target="_top">Bug#18322</a>)</p></li><li><p>
        <span><strong class="command">MySQLInstanceConfig.exe</strong></span> failed to grant
        certain privileges to the <code class="literal">'root'@'%'</code> account.
       (<a href="http://bugs.mysql.com/17303" target="_top">Bug#17303</a>)</p></li><li><p>
        The <code class="literal">Aborted_clients</code> status variable was
        incremented twice if a client exited without calling
        <a href="apis.html#mysql-close" title="29.2.3.5. mysql_close()"><code class="literal">mysql_close()</code></a>.
       (<a href="http://bugs.mysql.com/16918" target="_top">Bug#16918</a>)</p></li><li><p>
        Use of <code class="literal">GRANT</code> statements with grant tables
        from an old version of MySQL could cause a server crash.
       (<a href="http://bugs.mysql.com/16470" target="_top">Bug#16470</a>)</p></li><li><p>
        Clients were ignoring the TCP/IP port number specified as the
        default port via the --with-tcp-port configuration option.
       (<a href="http://bugs.mysql.com/15327" target="_top">Bug#15327</a>)</p></li><li><p>
        Parameters of type <code class="literal">DATETIME</code> or
        <code class="literal">DATE</code> in stored procedures were silently
        converted to <code class="literal">VARBINARY</code>.
       (<a href="http://bugs.mysql.com/13675" target="_top">Bug#13675</a>)</p></li><li><p>
        Zero-padding of exponent values was not the same across
        platforms.
       (<a href="http://bugs.mysql.com/12860" target="_top">Bug#12860</a>)</p></li><li><p>
        Values of types <code class="literal">REAL ZEROFILL</code>,
        <code class="literal">DOUBLE ZEROFILL</code>, <code class="literal">FLOAT
        ZEROFILL</code>, were not zero-filled when converted to a
        character representation in the C prepared statement API.
       (<a href="http://bugs.mysql.com/11589" target="_top">Bug#11589</a>)</p></li><li><p>
        <span><strong class="command">mysql</strong></span> stripped comments from statements sent
        to the server. Now the <code class="option">--comments</code> or
        <code class="option">--skip-comments</code> option can be used to control
        whether to retain or strip comments. The default is
        <code class="option">--skip-comments</code>.
       (<a href="http://bugs.mysql.com/11230" target="_top">Bug#11230</a>, <a href="http://bugs.mysql.com/26215" target="_top">Bug#26215</a>)</p></li><li><p>
        Several buffer-size system variables were either being handled
        incorrectly for large values (for settings larger than 4GB, they
        were truncated to values less than 4GB without a warning), or
        were limited unnecessarily to 4GB even on 64-bit systems. The
        following changes were made:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            For <code class="literal">key_buffer_size</code>, values larger than
            4GB are allowed on 64-bit platforms.
          </p></li><li><p>
            For <code class="literal">join_buffer_size</code>,
            <code class="literal">sort_buffer_size</code>, and
            <code class="literal">myisam_sort_buffer_size</code>, values larger
            than 4GB are allowed on 64-bit platforms (except Windows,
            for which large values are truncated to 4GB with a warning).
          </p></li></ul></div><p>
        In addition, settings for <code class="literal">read_buffer_size</code>
        and <code class="literal">read_rnd_buffer_size</code> are limited to 2GB
        on all platforms. Larger values are truncated to 2GB with a
        warning.
       (<a href="http://bugs.mysql.com/5731" target="_top">Bug#5731</a>, <a href="http://bugs.mysql.com/29419" target="_top">Bug#29419</a>, <a href="http://bugs.mysql.com/29446" target="_top">Bug#29446</a>)</p></li><li><p>
        Executing <code class="literal">DISABLE KEYS</code> and <code class="literal">ENABLE
        KEYS</code> on a non-empty table would cause the size of the
        index file for the table to grow considerable. This was because
        the <code class="literal">DISABLE KEYS</code> operation would only mark
        the existing index, without deleting the index blocks. The
        <code class="literal">ENABLE KEYS</code> operation would re-create the
        index, adding new blocks, while the previous index blocks would
        remain. Existing indexes are now dropped and recreated when the
        <code class="literal">ENABLE KEYS</code> statement is executed.
       (<a href="http://bugs.mysql.com/4692" target="_top">Bug#4692</a>)</p></li><li><p>
        Grant table checks failed in <code class="literal">libmysqld</code>.
      </p></li><li><p>
        There were no more transaction records in the transaction
        coordinator
      </p></li><li><p>
        Replicating from a master table to a slave table where the size
        of a <code class="literal">CHAR</code> or <code class="literal">VARCHAR</code>
        column was a different size would cause
        <span><strong class="command">mysqld</strong></span> to crash. For more information on
        replicating with different column definitions, see
        <a href="replication.html#replication-features-differing-tables" title="19.3.1.22. Replication with Differing Tables on Master and Slave">Section 19.3.1.22, “Replication with Differing Tables on Master and Slave”</a>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-22"></a>C.1.8. Changes in  MySQL 5.1.22 (24 September 2007: Release Candidate)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        There is a new <code class="literal">innodb_autoinc_lock_mode</code>
        system variable to configure the locking behavior that
        <code class="literal">InnoDB</code> uses for generating auto-increment
        values. The default behavior now is slightly different from
        before, which involves a minor incompatibility for multiple-row
        inserts that specify an explicit value for the auto-increment
        column in some but not all rows. See
        <a href="storage-engines.html#innodb-auto-increment-handling" title="13.5.6.3. How AUTO_INCREMENT Handling Works in
        InnoDB">Section 13.5.6.3, “How <code class="literal">AUTO_INCREMENT</code> Handling Works in
        <code class="literal">InnoDB</code>”</a>.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Backups of <code class="literal">TIMESTAMP</code> columns made with
        <span><strong class="command">ndb_restore</strong></span> on a MySQL Cluster using data
        nodes hosts of one endian could not be used to restore the
        cluster's data to data node hosts of the other endian.
       (<a href="http://bugs.mysql.com/30134" target="_top">Bug#30134</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Replication): Multi-master replication setups did not handle
        <code class="option">--log-slave-updates</code> correctly.
       (<a href="http://bugs.mysql.com/30017" target="_top">Bug#30017</a>)</p></li><li><p>
        Row-based replication from a pre-5.1.22 MySQL Server to a MySQL
        5.1.22 was unstable due to an uninitialized variable.
       (<a href="http://bugs.mysql.com/31076" target="_top">Bug#31076</a>)</p></li><li><p>
        For an <code class="literal">InnoDB</code> table if a
        <code class="literal">SELECT</code> was ordered by the primary key and
        also had a <code class="literal">WHERE field = value</code> clause on a
        different field that was indexed, a <code class="literal">DESC</code>
        order instruction would be ignored.
       (<a href="http://bugs.mysql.com/31001" target="_top">Bug#31001</a>)</p></li><li><p>
        <span><strong class="command">mysql_install_db</strong></span> could fail to find its
        message file.
       (<a href="http://bugs.mysql.com/30678" target="_top">Bug#30678</a>)</p></li><li><p>
        Memory corruption occurred for some queries with a top-level
        <code class="literal">OR</code> operation in the <code class="literal">WHERE</code>
        condition if they contained equality predicates and other
        sargable predicates in disjunctive parts of the condition.
       (<a href="http://bugs.mysql.com/30396" target="_top">Bug#30396</a>)</p></li><li><p>
        <a href="functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a> always returned
        0 for the embedded server (<code class="literal">libmysqld</code>).
       (<a href="http://bugs.mysql.com/30389" target="_top">Bug#30389</a>)</p></li><li><p>
        The server created temporary tables for filesort operations in
        the working directory, not in the directory specified by the
        <code class="literal">tmpdir</code> system variable.
       (<a href="http://bugs.mysql.com/30287" target="_top">Bug#30287</a>)</p></li><li><p>
        Using <code class="literal">KILL QUERY</code> or <code class="literal">KILL
        CONNECTION</code> to kill a <code class="literal">SELECT</code>
        statement caused a server crash if the query cache was enabled.
       (<a href="http://bugs.mysql.com/30201" target="_top">Bug#30201</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> from the MySQL 5.1.21 distribution
        could not be used to create a dump from a MySQL 5.1.20 or older
        server.
       (<a href="http://bugs.mysql.com/30123" target="_top">Bug#30123</a>)</p></li><li><p>
        Under some circumstances, a UDF initialization function could be
        passed incorrect argument lengths.
       (<a href="http://bugs.mysql.com/29804" target="_top">Bug#29804</a>)</p></li><li><p>
        Operations that used the time zone replicated the time zone only
        for successful operations, but did not replicate the time zone
        for errors that need to know it.
       (<a href="http://bugs.mysql.com/29536" target="_top">Bug#29536</a>)</p></li><li><p>
        When using a combination of <code class="literal">HANDLER... READ</code>
        and <code class="literal">DELETE</code> on a table, MySQL continued to
        open new copies of the table every time, leading to an
        exhaustion of file descriptors.
       (<a href="http://bugs.mysql.com/29474" target="_top">Bug#29474</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/21587" target="_top">Bug#21587</a></p></li><li><p>
        The <a href="apis.html#mysql-list-fields" title="29.2.3.42. mysql_list_fields()"><code class="literal">mysql_list_fields()</code></a> C API
        function incorrectly set
        <code class="literal">MYSQL_FIELD::decimals</code> for some view columns.
       (<a href="http://bugs.mysql.com/29306" target="_top">Bug#29306</a>)</p></li><li><p>
        Tables using the <code class="literal">InnoDB</code> storage engine
        incremented <code class="literal">AUTO_INCREMENT</code> values incorrectly
        with <code class="literal">ON DUPLICATE KEY UPDATE</code>.
       (<a href="http://bugs.mysql.com/28781" target="_top">Bug#28781</a>)</p></li><li><p>
        Non-range queries of the form <code class="literal">SELECT ... FROM ... WHERE
        <em class="replaceable"><code>keypart1</code></em>=<em class="replaceable"><code>constant</code></em>,
        ...,
        <em class="replaceable"><code>keypartN</code></em>=<em class="replaceable"><code>constant</code></em>
        ORDER BY ... FOR UPDATE</code> sometimes were unnecessarily
        blocked waiting for a lock if another transaction was using
        <code class="literal">SELECT ... FOR UPDATE</code> on the same table.
       (<a href="http://bugs.mysql.com/28570" target="_top">Bug#28570</a>)</p></li><li><p>
        On Windows, symbols for yaSSL and taocrypt were missing from
        <code class="filename">mysqlclient.lib</code>, resulting in unresolved
        symbol errors for clients linked against that library.
       (<a href="http://bugs.mysql.com/27861" target="_top">Bug#27861</a>)</p></li><li><p>
        Read lock requests that were blocked by a pending write lock
        request were not allowed to proceed if the statement requesting
        the write lock was killed.
       (<a href="http://bugs.mysql.com/21281" target="_top">Bug#21281</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-21"></a>C.1.9. Changes in  MySQL 5.1.21 (16 August 2007)</h3></div></div></div><p class="release-level">
      This is a new Beta development release, fixing recently discovered
      bugs.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p class="release-non-production">
        This Beta release, as any other pre-production release, should
        not be installed on <span class="emphasis"><em>production</em></span> level
        systems or systems with critical data. It is good practice to
        back up your data before installing any new version of software.
        Although MySQL has worked very hard to ensure a high level of
        quality, protect your data by making a backup as you would for
        any software beta release. Please refer to our bug database at
        <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a> for more details about the
        individual bugs fixed in this version.
      </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Subsequent to release, it was discovered that on some platforms,
        <span><strong class="command">mysql_install_db</strong></span> could fail to find its
        message file, resulting in error messages of the following form:
      </p><pre class="programlisting">shell&gt; mysql_install_db 
Installing MySQL system tables...
070830  9:33:24 [ERROR] Can't find messagefile '<em class="replaceable"><code>path</code></em>/share/english/errmsg.sys'
070830  9:33:24 [ERROR] Aborting
</pre><p>
        To deal with this problem, specify a <code class="option">--language</code>
        option to specify the proper pathname to the language file
        directory. For example:
      </p><pre class="programlisting">shell&gt; mysql_install_db --language=/path/to/share/english/
</pre><p>
        This problem is corrected in MySQL 5.1.22.
      </p></div><p>This section documents all changes and bug fixes that have been applied since the last official MySQL release. If you would like to receive more fine-grained and personalized <span class="emphasis"><em>update alerts</em></span> about fixes that are relevant to the version and features you use, please consider subscribing to <span class="emphasis"><em>MySQL Enterprise</em></span> (a commercial MySQL offering). For more details please see <a href="http://www.mysql.com/products/enterprise" target="_top">http://www.mysql.com/products/enterprise</a>.</p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        In MySQL 5.1.6, when log tables were implemented, the default
        log destination for the general query and slow query log was
        <code class="literal">TABLE</code>. This default has been changed to
        <code class="literal">FILE</code>, which is compatible with MySQL 5.0, but
        incompatible with earlier releases of MySQL 5.1 from 5.1.6 to
        5.1.20. If you are upgrading from MySQL 5.0 to this release, no
        logging option changes should be necessary. However, if you are
        upgrading from 5.1.6 through 5.1.20 to this release and were
        using <code class="literal">TABLE</code> logging, use the
        <code class="option">--log-output=TABLE</code> option explicitly to
        preserve your server's table-logging behavior.
      </p><p>
        In MySQL 5.1.x, this bug was addressed twice because it turned
        out that the default was set in two places, only one of which
        was fixed the first time.
       (<a href="http://bugs.mysql.com/29993" target="_top">Bug#29993</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The <code class="literal">innodb_log_arch_dir</code> system variable
        (which has been deprecated since MySQL 5.0.24) has been removed
        and should no longer be used.
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        On Windows only, the <span><strong class="command">mysqld-nt</strong></span> has been
        removed from this release and all future releases. The
        <span><strong class="command">mysqld</strong></span> server now includes named-pipe support
        as standard, and you do not have to use the
        <span><strong class="command">mysqld-nt</strong></span> version to enable named-pipe
        support.
      </p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        The default <span><strong class="command">mysqld_safe</strong></span> logging behavior now
        is <code class="option">--skip-syslog</code> rather than
        <code class="option">--syslog</code>, which is compatible with the default
        behavior of writing an error log file for releases prior to
        5.1.20.
      </p></li><li><p>
        Several programs now accept <code class="option">--debug-check</code> and
        <code class="option">--debug-info</code> options: <span><strong class="command">mysql</strong></span>,
        <span><strong class="command">mysqladmin</strong></span>, <span><strong class="command">mysqlbinlog</strong></span>,
        <span><strong class="command">mysqlcheck</strong></span>, <span><strong class="command">mysqldump</strong></span>,
        <span><strong class="command">mysqlimport</strong></span>, <span><strong class="command">mysqlshow</strong></span>,
        <span><strong class="command">mysqlslap</strong></span>, <span><strong class="command">mysqltest</strong></span>,
        <span><strong class="command">mysql_upgrade</strong></span>. (Note:
        <span><strong class="command">mysql</strong></span>, <span><strong class="command">mysqladmin</strong></span>,
        <span><strong class="command">mysqlcheck</strong></span>, <span><strong class="command">mysqldump</strong></span>,
        <span><strong class="command">mysqlimport</strong></span>, <span><strong class="command">mysqlshow</strong></span>,
        and <span><strong class="command">mysqltest</strong></span> already accepted
        <code class="option">--debug-info</code>.) <code class="option">--debug-check</code>
        prints debugging information at program exit.
        <code class="option">--debug-info</code> is similar but also prints memory
        and CPU usage statistics. This patch also corrects a problem for
        <span><strong class="command">mysql</strong></span> that <code class="option">--debug-info</code> did
        not display statistics at exit time.
       (<a href="http://bugs.mysql.com/30127" target="_top">Bug#30127</a>)</p></li><li><p>
        The <code class="option">--syslog</code> option that was introduced in
        5.1.20 for <span><strong class="command">mysqld_safe</strong></span> (to send error output
        to <code class="literal">syslog</code>) did not work correctly: Error
        output was buffered and not logged immediately. This has been
        corrected. In addition, some feature changes were made:
      </p><div class="itemizedlist"><ul type="circle"><li><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
              The default <span><strong class="command">mysqld_safe</strong></span> logging
              behavior now is <code class="option">--skip-syslog</code> rather than
              <code class="option">--syslog</code>, which is compatible with the
              default behavior of writing an error log file for releases
              prior to 5.1.20.
            </p></div></li><li><p>
            A new option,
            <code class="option">--syslog-tag=<em class="replaceable"><code>tag</code></em>
            </code>, modifies the default tags written by
            <span><strong class="command">mysqld_safe</strong></span> and <span><strong class="command">mysqld</strong></span>
            to syslog to be
            <code class="literal">mysqld_safe-<em class="replaceable"><code>tag</code></em>
            </code> and
            <code class="literal">mysqld-<em class="replaceable"><code>tag</code></em></code>
            rather than the default tags of
            <code class="literal">mysqld_safe</code> and
            <code class="literal">mysqld</code>.
          </p></li></ul></div><p>(<a href="http://bugs.mysql.com/29992" target="_top">Bug#29992</a>)</p></li><li><p>
        Transaction support in the <code class="literal">FEDERATED</code> storage
        engine has been disabled due to issues with multiple active
        transactions and sessions on the same
        <code class="literal">FEDERATED</code> table.
       (<a href="http://bugs.mysql.com/29875" target="_top">Bug#29875</a>)</p></li><li><p>
        Previously, prepared statements processed using
        <code class="literal">PREPARE</code> and <code class="literal">EXECUTE</code> were
        not subject to caching in the query cache if they contained any
        <code class="literal">?</code> parameter markers. This limitation has been
        lifted.
       (<a href="http://bugs.mysql.com/29318" target="_top">Bug#29318</a>)</p></li><li><p>
        It is now possible to set <code class="literal">long_query_time</code> in
        microseconds or to 0. Setting this value to 0 causes all queries
        to be recorded in the slow query log.
      </p><p>
        Currently, fractional values can be used only when logging to
        files. We plan to provide this functionality for logging to
        tables when time-related data types are enhanced to support
        microsecond resolution.
       (<a href="http://bugs.mysql.com/25412" target="_top">Bug#25412</a>)</p></li><li><p>
        The SQL thread on a slave now is always allowed to enter
        <code class="literal">InnoDB</code> even if this would exceed the limit
        imposed by the <code class="literal">innodb_thread_concurrency</code>
        system variable. In cases of high load on the slave server (when
        <code class="literal">innodb_thread_concurrency</code> is reached), this
        change helps the slave stay more up to date with the master; in
        the previous behavior, the SQL thread was competing for
        resources with all client threads active on the slave server.
       (<a href="http://bugs.mysql.com/25078" target="_top">Bug#25078</a>)</p></li><li><p>
        <code class="literal">INFORMATION_SCHEMA</code> implementation changes
        were made that optimize certain types of queries for
        <code class="literal">INFORMATION_SCHEMA</code> tables so that they
        execute more quickly.
        <a href="optimization.html#information-schema-optimization" title="7.2.18. INFORMATION_SCHEMA Optimization">Section 7.2.18, “<code class="literal">INFORMATION_SCHEMA</code> Optimization”</a>, provides
        guidelines on how to take advantage of these optimizations by
        writing queries that minimize the need for the server to access
        the filesystem to obtain the information contained in
        <code class="literal">INFORMATION_SCHEMA</code> tables. By writing queries
        that enable the server to avoid directory scans or opening table
        files, you will obtain better performance.
       (<a href="http://bugs.mysql.com/19588" target="_top">Bug#19588</a>)</p></li><li><p>
        Log table locking was redesigned, eliminating several
        lock-related problems:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Truncating <code class="literal">mysql.slow_log</code> in a stored
            procedure after use of a cursor caused the thread to lock.
          </p></li><li><p>
            Flushing a log table resulted in unnecessary warnings.
          </p></li><li><p>
            The server would hang when performing concurrent
            <code class="literal">ALTER TABLE</code> or <code class="literal">TRUNCATE
            TABLE</code> statements against the log tables.
          </p></li><li><p>
            Changing the value of the <code class="literal">general_log</code>
            system variable while a global read lock was in place
            resulted in deadlock.
          </p></li></ul></div><p>
        The changes provide better-defined interface characteristics.
        See <a href="server-administration.html#log-tables" title="5.2.1. Selecting General Query and Slow Query Log Output Destinations">Section 5.2.1, “Selecting General Query and Slow Query Log Output Destinations”</a>.
       (<a href="http://bugs.mysql.com/17876" target="_top">Bug#17876</a>, <a href="http://bugs.mysql.com/23044" target="_top">Bug#23044</a>, <a href="http://bugs.mysql.com/25422" target="_top">Bug#25422</a>, <a href="http://bugs.mysql.com/29129" target="_top">Bug#29129</a>)</p></li><li><p>
        Added the <code class="option">--commit</code>, <code class="option">--detach</code>,
        <code class="option">--post-system</code>, and
        <code class="option">--pre-system</code> options for
        <span><strong class="command">mysqlslap</strong></span>.
      </p></li><li><p>
        Replication between master and slaves now supports different
        column numbers within a table on both master and slave. The
        rules for replication where the table definitions are different
        has also changed. This supercedes the functionality for
        replication from the master table to a slave table with more
        columns that was added in MySQL 5.1.12. For more information,
        see
        <a href="replication.html#replication-features-differing-tables" title="19.3.1.22. Replication with Differing Tables on Master and Slave">Section 19.3.1.22, “Replication with Differing Tables on Master and Slave”</a>.
      </p></li><li><p>
        A new option,
        <code class="option">--syslog-tag=<em class="replaceable"><code>tag</code></em> </code>,
        modifies the default tags written by
        <span><strong class="command">mysqld_safe</strong></span> and <span><strong class="command">mysqld</strong></span> to
        syslog to be <code class="literal">mysqld_safe-<em class="replaceable"><code>tag</code></em>
        </code> and <code class="literal">mysqld-<em class="replaceable"><code>tag</code></em>
        </code> rather than the default tags of
        <code class="literal">mysqld_safe</code> and <code class="literal">mysqld</code>.
      </p></li><li><p>
        Two options relating to slow query logging have been added for
        <span><strong class="command">mysqld</strong></span>.
        <code class="literal">--log-slow-slave-statements</code> causes slow
        statements executed by a replication slave to be written to the
        slow query log; <code class="literal">min_examined_row_limit</code> can be
        used to cause queries which examine fewer than the stated number
        of rows not to be logged.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Several issues were identified for stored programs (stored
        functions and procedures, triggers, and events) and views
        containing non-ASCII symbols. These issues involved conversion
        errors due to incomplete character set information when
        translating these objects to and from stored format, such as:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Parsing the original object definition so that it can be
            stored.
          </p></li><li><p>
            Compiling the stored definition into executable form when
            the object is invoked.
          </p></li><li><p>
            Retrieval of object definitions from
            <code class="literal">INFORMATION_SCHEMA</code> tables.
          </p></li><li><p>
            Displaying the object definition in <code class="literal">SHOW</code>
            statements. This issue also affected
            <span><strong class="command">mysqldump</strong></span>, which uses
            <code class="literal">SHOW</code>.
          </p></li></ul></div><p>
        The fix for the problems is to store character set information
        from the object creation context so that this information is
        available when the object needs to be used later. The context
        includes the client character set, the connection character set
        and collation, and the collation of the database with which the
        object is associated.
      </p><p>
        As a result of the patch, several tables have new columns:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            In the <code class="literal">mysql</code> database, the
            <code class="literal">proc</code> and <code class="literal">event</code> tables
            now have these columns:
            <code class="literal">character_set_client</code>,
            <code class="literal">collation_connection</code>,
            <code class="literal">db_collation</code>,
            <code class="literal">body_utf8</code>.
          </p></li><li><p>
            In <code class="literal">INFORMATION_SCHEMA</code>, the
            <code class="literal">VIEWS</code> table now has these columns:
            <code class="literal">CHARACTER_SET_CLIENT</code>,
            <code class="literal">COLLATION_CONNECTION</code>. The
            <code class="literal">ROUTINES</code>, <code class="literal">TRIGGERS</code>,
            and <code class="literal">EVENT</code> tables now have these columns:
            <code class="literal">CHARACTER_SET_CLIENT</code>,
            <code class="literal">COLLATION_CONNECTION</code>,
            <code class="literal">DATABASE_COLLATION</code>.
          </p></li></ul></div><p>
        These columns store the session values of the
        <code class="literal">character_set_client</code> and
        <code class="literal">collation_connection</code> system variables, and
        the collation of the database with which the object is
        associated. The values are those in effect at object creation
        time. (The saved database collation is not the value of the
        <code class="literal">collation_database</code> system variable, which
        applies to the default database; the database that contains the
        object is not necessarily the default database.)
      </p><p>
        Several <code class="literal">SHOW</code> statements now display
        additional columns corresponding to the new table columns. These
        statements are: <code class="literal">SHOW CREATE EVENT</code>,
        <code class="literal">SHOW CREATE FUNCTION</code>, <code class="literal">SHOW CREATE
        PROCEDURE</code>, <code class="literal">SHOW CREATE VIEW</code>,
        <code class="literal">SHOW EVENTS</code>, <code class="literal">SHOW FUNCTION
        STATUS</code>, <code class="literal">SHOW PROCEDURE STATUS</code>,
        <code class="literal">SHOW TRIGGERS</code>.
      </p><p>
        A new statement, <code class="literal">SHOW CREATE TRIGGER</code> is
        introduced and is used by <span><strong class="command">mysqldump</strong></span> for
        producing <code class="literal">CREATE TRIGGER</code> statements.
      </p><p>
        Subsequent to the patch just described, it was discovered that
        the patch broke <span><strong class="command">mysql_upgrade</strong></span>; this has been
        corrected.
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          The fixes for the problems just describe affect
          <span class="emphasis"><em>all</em></span> existing stored programs and views.
          (For example, you will see warnings about “<span class="quote">no creation
          context.</span>”) To avoid warnings from the server about the
          use of old definitions from any release prior to 5.1.21, you
          should dump stored programs and views with
          <span><strong class="command">mysqldump</strong></span> after upgrading to 5.1.21, and
          then reload them to recreate them with new definitions. Invoke
          <span><strong class="command">mysqldump</strong></span> with a
          <code class="option">--default-character-set</code> option that names the
          non-ASCII character set that was used for the definitions when
          the objects were originally defined.
        </p></div><p>(<a href="http://bugs.mysql.com/25221" target="_top">Bug#25221</a>, <a href="http://bugs.mysql.com/21249" target="_top">Bug#21249</a>, <a href="http://bugs.mysql.com/30027" target="_top">Bug#30027</a>, <a href="http://bugs.mysql.com/16291" target="_top">Bug#16291</a>, <a href="http://bugs.mysql.com/11986" target="_top">Bug#11986</a>, <a href="http://bugs.mysql.com/25212" target="_top">Bug#25212</a>, <a href="http://bugs.mysql.com/19443" target="_top">Bug#19443</a>, <a href="http://bugs.mysql.com/30029" target="_top">Bug#30029</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">DELETE FROM <em class="replaceable"><code>table</code></em> WHERE
        <em class="replaceable"><code>primary_key</code></em> IN
        (<em class="replaceable"><code>value_list</code></em>)</code>, where the
        <em class="replaceable"><code>value_list</code></em> contained more than one
        value, called from an <code class="literal">AFTER DELETE</code> trigger on
        an <code class="literal">NDB</code> table, caused
        <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/30337" target="_top">Bug#30337</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When restarting a data node, queries could hang during that
        node's start phase 5, and continue only after the node had
        entered phase 6.
       (<a href="http://bugs.mysql.com/29364" target="_top">Bug#29364</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Replica redo logs were inconsistently handled during a system
        restart.
       (<a href="http://bugs.mysql.com/29354" target="_top">Bug#29354</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When a node failed to respond to a <code class="literal">COPY_GCI</code>
        signal as part of a global checkpoint, the master node was
        killed instead of the node that actually failed.
       (<a href="http://bugs.mysql.com/29331" target="_top">Bug#29331</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An invalid comparison made during <code class="literal">REDO</code>
        validation that could lead to an <span class="errortext">Error while reading
        REDO log</span> condition.
       (<a href="http://bugs.mysql.com/29118" target="_top">Bug#29118</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The wrong data pages were sometimes invalidated following a
        global checkpoint.
       (<a href="http://bugs.mysql.com/29067" target="_top">Bug#29067</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        If at least 2 files were involved in <code class="literal">REDO</code>
        invalidation, then file 0 of page 0 was not updated and so
        pointed to an invalid part of the redo log.
       (<a href="http://bugs.mysql.com/29057" target="_top">Bug#29057</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        If a storage engine has its own logging capability, then any
        statement using both this engine and some other engine not
        having its own logging could not be correctly logged, due to the
        fact that entries from one engine could be logged before entries
        from the other engine were. This did not generate any error
        messages when it occurred.
      </p><p>
        Now, if multiple storage engines are used in a statement and at
        least one of them has its own logging capability, then an error
        message is generated and the statement is not executed.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Currently, the only storage engine to have its own logging
          capability is <code class="literal">NDBCLUSTER</code>.
        </p></div><p>(<a href="http://bugs.mysql.com/28722" target="_top">Bug#28722</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Warnings and errors generated by <span><strong class="command">ndb_config
        <code class="option">--config-file=<em class="replaceable"><code>file</code></em></code></strong></span>
        were sent to <code class="literal">stdout</code>, rather than to
        <code class="literal">stderr</code>.
       (<a href="http://bugs.mysql.com/25941" target="_top">Bug#25941</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When a cluster backup was terminated using the <code class="literal">ABORT
        BACKUP</code> command in the management client, a misleading
        error message <span class="errortext">Backup aborted by application:
        Permanent error: Internal error</span> was returned. The
        error message returned in such cases now reads <span class="errortext">Backup
        aborted by user request</span>.
       (<a href="http://bugs.mysql.com/21052" target="_top">Bug#21052</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Replication): Inconsistencies could occur between the master
        and the slave when replicating Disk Data tables.
       (<a href="http://bugs.mysql.com/19259" target="_top">Bug#19259</a>, <a href="http://bugs.mysql.com/19227" target="_top">Bug#19227</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Large file support did not work in AIX server binaries.
       (<a href="http://bugs.mysql.com/10776" target="_top">Bug#10776</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Performing Disk Data schema operations during a node restart
        could cause forced shutdowns of other data nodes.
       (<a href="http://bugs.mysql.com/29501" target="_top">Bug#29501</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        When dropping a page, the stack's bottom entry could sometime be
        left “<span class="quote">cold</span>” rather than “<span class="quote">hot</span>”,
        violating the rules for stack pruning.
       (<a href="http://bugs.mysql.com/29176" target="_top">Bug#29176</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Disk data meta-information that existed in
        <span><strong class="command">ndbd</strong></span> might not be visible to
        <span><strong class="command">mysqld</strong></span>.
       (<a href="http://bugs.mysql.com/28720" target="_top">Bug#28720</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        The number of free extents was incorrectly reported for some
        tablespaces.
       (<a href="http://bugs.mysql.com/28642" target="_top">Bug#28642</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        When executing a statement where
        <code class="literal">binlog_format=statement</code>, the result of the
        statement was logged both as a statement and as rows.
       (<a href="http://bugs.mysql.com/29222" target="_top">Bug#29222</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        <span><strong class="command">mysqld</strong></span> would segfault on startup when the
        <code class="literal">NDB</code> storage engine was enabled and the
        default character set was a strictly multi-byte character set
        such as UCS2.
      </p><p>
        This issue does <span class="emphasis"><em>not</em></span> apply to character sets
        that can contain single-byte characters in addition to
        multi-byte characters such as UTF-8.
      </p><p>
        Additional issues remain with regard to the use of multi-byte
        character sets in MySQL Cluster Replication; see
        <a href="mysql-cluster.html#mysql-cluster-replication-issues" title="20.11.3. Known Issues in MySQL Cluster Replication">Section 20.11.3, “Known Issues in MySQL Cluster Replication”</a>,
        for more information.
       (<a href="http://bugs.mysql.com/27404" target="_top">Bug#27404</a>)</p></li><li><p>
        Prepared statements containing
        <a href="functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a> could
        be written improperly to the binary log.
       (<a href="http://bugs.mysql.com/30200" target="_top">Bug#30200</a>)</p></li><li><p>
        Use of local variables with non-ASCII names in stored procedures
        crashed the server.
       (<a href="http://bugs.mysql.com/30120" target="_top">Bug#30120</a>)</p></li><li><p>
        On Windows, client libraries lacked symbols required for
        linking.
       (<a href="http://bugs.mysql.com/30118" target="_top">Bug#30118</a>)</p></li><li><p>
        <code class="option">--myisam-recover=''</code> (empty option value) did
        not disable <code class="literal">MyISAM</code> recovery.
       (<a href="http://bugs.mysql.com/30088" target="_top">Bug#30088</a>)</p></li><li><p>
        For the <code class="literal">SHOW TABLE TYPES</code> statement, the
        server sent incorrect output to clients, possibly causing them
        to crash.
       (<a href="http://bugs.mysql.com/30036" target="_top">Bug#30036</a>)</p></li><li><p>
        The <code class="literal">IS_UPDATABLE</code> column in the
        <code class="literal">INFORMATION_SCHEMA.VIEWS</code> table was not always
        set correctly.
       (<a href="http://bugs.mysql.com/30020" target="_top">Bug#30020</a>)</p></li><li><p>
        <code class="literal">SHOW</code> statements were being written to the
        slow query log that should not have been.
       (<a href="http://bugs.mysql.com/30000" target="_top">Bug#30000</a>)</p></li><li><p>
        <code class="literal">REPAIR TABLE ... USE_FRM</code> could corrupt
        tables.
       (<a href="http://bugs.mysql.com/29980" target="_top">Bug#29980</a>)</p></li><li><p>
        For <code class="literal">MyISAM</code> tables on Windows,
        <code class="literal">INSERT</code>, <code class="literal">DELETE</code>, or
        <code class="literal">UPDATE</code> followed by <code class="literal">ALTER
        TABLE</code> within <code class="literal">LOCK TABLES</code> could
        cause table corruption.
       (<a href="http://bugs.mysql.com/29957" target="_top">Bug#29957</a>)</p></li><li><p>
        LOCK TABLES did not pre-lock tables used in triggers of the
        locked tables. Unexpected locking behavior and statement
        failures similar to <span class="errortext">failed: 1100: Table
        '<em class="replaceable"><code>xx</code></em>' was not locked with LOCK
        TABLES</span> could result.
       (<a href="http://bugs.mysql.com/29929" target="_top">Bug#29929</a>)</p></li><li><p>
        <code class="literal">INSERT ... VALUES(CONNECTION_ID(), ...)</code>
        statements were written to the binary log in such a way that
        they could not be properly restored.
       (<a href="http://bugs.mysql.com/29928" target="_top">Bug#29928</a>)</p></li><li><p>
        Adding <code class="literal">DISTINCT</code> could cause incorrect rows to
        appear in a query result.
       (<a href="http://bugs.mysql.com/29911" target="_top">Bug#29911</a>)</p></li><li><p>
        On Windows, the CMake build process did not produce the embedded
        server library or related binaries.
       (<a href="http://bugs.mysql.com/29903" target="_top">Bug#29903</a>)</p></li><li><p>
        Using the <a href="functions.html#function_date"><code class="literal">DATE()</code></a> function in a
        <code class="literal">WHERE</code> clause did not return any records after
        encountering <code class="literal">NULL</code>. However, using
        <code class="literal">TRIM</code> or <code class="literal">CAST</code> produced the
        correct results.
       (<a href="http://bugs.mysql.com/29898" target="_top">Bug#29898</a>)</p></li><li><p>
        <a href="functions.html#function_session-user"><code class="literal">SESSION_USER()</code></a> returned garbage
        data (rather than the correct value of the empty string) when
        executed by a slave SQL thread.
       (<a href="http://bugs.mysql.com/29878" target="_top">Bug#29878</a>)</p></li><li><p>
        Very long prepared statements in stored procedures could cause a
        server crash.
       (<a href="http://bugs.mysql.com/29856" target="_top">Bug#29856</a>)</p></li><li><p>
        If query execution involved a temporary table,
        <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a> could
        return a result with an incorrect character set.
       (<a href="http://bugs.mysql.com/29850" target="_top">Bug#29850</a>)</p></li><li><p>
        If one thread was performing concurrent inserts, other threads
        reading from the same table using equality key searches could
        see the index values for new rows before the data values had
        been written, leading to reports of table corruption.
       (<a href="http://bugs.mysql.com/29838" target="_top">Bug#29838</a>)</p></li><li><p>
        Repeatedly accessing a view in a stored procedure (for example,
        in a loop) caused a small amount of memory to be allocated per
        access. Although this memory is deallocated on disconnect, it
        could be a problem for a long running stored procedures that
        make repeated access of views.
       (<a href="http://bugs.mysql.com/29834" target="_top">Bug#29834</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> produced output that incorrectly
        discarded the <code class="literal">NO_AUTO_VALUE_ON_ZERO</code> value of
        the <code class="literal">SQL_MODE</code> variable after dumping triggers.
       (<a href="http://bugs.mysql.com/29788" target="_top">Bug#29788</a>)</p></li><li><p>
        An assertion failure occurred within yaSSL for very long keys.
       (<a href="http://bugs.mysql.com/29784" target="_top">Bug#29784</a>)</p></li><li><p>
        For <code class="literal">MEMORY</code> tables, the
        <code class="literal">index_merge</code> union access method could return
        incorrect results.
       (<a href="http://bugs.mysql.com/29740" target="_top">Bug#29740</a>)</p></li><li><p>
        Comparison of <code class="literal">TIME</code> values using the
        <a href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> operator led
        to string comparison, producing incorrect results in some cases.
        Now the values are compared as integers.
       (<a href="http://bugs.mysql.com/29739" target="_top">Bug#29739</a>)</p></li><li><p>
        The thread ID was not reset properly after execution of
        <a href="apis.html#mysql-change-user" title="29.2.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a>,
        which could cause replication failure when replicating temporary
        tables.
       (<a href="http://bugs.mysql.com/29734" target="_top">Bug#29734</a>)</p></li><li><p>
        For a table with a <code class="literal">DATE</code> column
        <em class="replaceable"><code>date_col</code></em> such that selecting rows
        with <code class="literal">WHERE <em class="replaceable"><code>date_col</code></em> =
        '<em class="replaceable"><code>date_val</code></em> 00:00:00'</code> yielded
        a non-empty result, adding <code class="literal">GROUP BY
        <em class="replaceable"><code>date_col</code></em></code> caused the result
        to be empty.
       (<a href="http://bugs.mysql.com/29729" target="_top">Bug#29729</a>)</p></li><li><p>
        In some cases, <code class="literal">INSERT INTO ... SELECT ... GROUP
        BY</code> could insert rows even if the
        <code class="literal">SELECT</code> by itself produced an empty result.
       (<a href="http://bugs.mysql.com/29717" target="_top">Bug#29717</a>)</p></li><li><p>
        Single-row inserts could report a row count greater than one.
       (<a href="http://bugs.mysql.com/29692" target="_top">Bug#29692</a>)</p></li><li><p>
        For the embedded server, the
        <a href="apis.html#mysql-stmt-store-result" title="29.2.7.27. mysql_stmt_store_result()"><code class="literal">mysql_stmt_store_result()</code></a>
        C API function caused a memory leak for empty result sets.
       (<a href="http://bugs.mysql.com/29687" target="_top">Bug#29687</a>)</p></li><li><p>
        <code class="literal">EXPLAIN</code> produced <code class="literal">Impossible
        where</code> for statements of the form <code class="literal">SELECT ...
        FROM t WHERE c=0</code>, where <code class="literal">c</code> was an
        <code class="literal">ENUM</code> column defined as a primary key.
       (<a href="http://bugs.mysql.com/29661" target="_top">Bug#29661</a>)</p></li><li><p>
        On Windows, <code class="literal">ALTER TABLE</code> hung if records were
        locked in share mode by a long-running transaction.
       (<a href="http://bugs.mysql.com/29644" target="_top">Bug#29644</a>)</p></li><li><p>
        <span><strong class="command">mysqld_safe</strong></span> produced error messages and did
        not create the error log file under some circumstances.
       (<a href="http://bugs.mysql.com/29634" target="_top">Bug#29634</a>)</p></li><li><p>
        On 64-bit platforms, the filesort code (for queries with
        <code class="literal">GROUP BY</code> or <code class="literal">ORDER BY</code>)
        could crash due to an incorrect pointer size.
       (<a href="http://bugs.mysql.com/29610" target="_top">Bug#29610</a>)</p></li><li><p>
        A left join between two views could produce incorrect results.
       (<a href="http://bugs.mysql.com/29604" target="_top">Bug#29604</a>)</p></li><li><p>
        Certain statements with unions, subqueries, and joins could
        result in huge memory consumption.
       (<a href="http://bugs.mysql.com/29582" target="_top">Bug#29582</a>)</p></li><li><p>
        Clients using SSL could hang the server.
       (<a href="http://bugs.mysql.com/29579" target="_top">Bug#29579</a>)</p></li><li><p>
        A slave running with <code class="option">--log-slave-updates</code> would
        fail to write <code class="literal">INSERT DELAY IGNORE</code> statements
        to its binary log, resulting in different binary log contents on
        the master and slave.
       (<a href="http://bugs.mysql.com/29571" target="_top">Bug#29571</a>)</p></li><li><p>
        Storage engine error conditions in row-based replication were
        not correctly reported to the user.
       (<a href="http://bugs.mysql.com/29570" target="_top">Bug#29570</a>)</p></li><li><p>
        An incorrect result was returned when comparing string values
        that were converted to <code class="literal">TIME</code> values with
        <a href="functions.html#function_cast"><code class="literal">CAST()</code></a>.
       (<a href="http://bugs.mysql.com/29555" target="_top">Bug#29555</a>)</p></li><li><p>
        <span><strong class="command">gcov</strong></span> coverage-testing information was not
        written if the server crashed.
       (<a href="http://bugs.mysql.com/29543" target="_top">Bug#29543</a>)</p></li><li><p>
        Conversion of ASCII DEL (<code class="literal">0x7F</code>) to Unicode
        incorrectly resulted in QUESTION MARK (<code class="literal">0x3F</code>)
        rather than DEL.
       (<a href="http://bugs.mysql.com/29499" target="_top">Bug#29499</a>)</p></li><li><p>
        A field packet with <code class="literal">NULL</code> fields caused a
        <code class="literal">libmysqlclient</code> crash.
       (<a href="http://bugs.mysql.com/29494" target="_top">Bug#29494</a>)</p></li><li><p>
        On Windows, the <span><strong class="command">mysql</strong></span> client died if the user
        entered a statement and Return after entering Control-C.
       (<a href="http://bugs.mysql.com/29469" target="_top">Bug#29469</a>)</p></li><li><p>
        The full-text parser could enter an infinite loop if it
        encountered an illegal multi-byte sequence or a sequence that
        has no mapping to Unicode.
       (<a href="http://bugs.mysql.com/29464" target="_top">Bug#29464</a>)</p></li><li><p>
        Failure to consider collation when comparing space characters
        could lead to incorrect index entry order, making it impossible
        to find some index values.
       (<a href="http://bugs.mysql.com/29461" target="_top">Bug#29461</a>)</p></li><li><p>
        Searching a <code class="literal">FULLTEXT</code> index for a word with
        the boolean mode truncation operator could cause an infinite
        loop.
       (<a href="http://bugs.mysql.com/29445" target="_top">Bug#29445</a>)</p></li><li><p>
        Corrupt data resulted from use of <code class="literal">SELECT ... INTO
        OUTFILE '<em class="replaceable"><code>file_name</code></em>' FIELDS ENCLOSED
        BY '<em class="replaceable"><code>c</code></em>'</code>, where
        <em class="replaceable"><code>c</code></em> is a digit or minus sign, followed
        by <code class="literal">LOAD DATA INFILE
        '<em class="replaceable"><code>file_name</code></em>' FIELDS ENCLOSED BY
        '<em class="replaceable"><code>c</code></em>'</code>.
       (<a href="http://bugs.mysql.com/29442" target="_top">Bug#29442</a>)</p></li><li><p>
        Killing an <code class="literal">INSERT DELAYED</code> thread caused a
        server crash.
       (<a href="http://bugs.mysql.com/29431" target="_top">Bug#29431</a>)</p></li><li><p>
        Use of <code class="literal">SHOW BINLOG EVENTS</code> for a non-existent
        log file followed by <code class="literal">PURGE MASTER LOGS</code> caused
        a server crash.
       (<a href="http://bugs.mysql.com/29420" target="_top">Bug#29420</a>)</p></li><li><p>
        Assertion failure could occur for grouping queries that employed
        <code class="literal">DECIMAL</code> user variables with assignments to
        them.
       (<a href="http://bugs.mysql.com/29417" target="_top">Bug#29417</a>)</p></li><li><p>
        For <a href="functions.html#function_cast"><code class="literal">CAST(<em class="replaceable"><code>expr</code></em> AS
        DECIMAL(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>))</code></a>,
        the limits of 65 and 30 on the precision
        (<em class="replaceable"><code>M</code></em>) and scale
        (<em class="replaceable"><code>D</code></em>) were not enforced.
       (<a href="http://bugs.mysql.com/29415" target="_top">Bug#29415</a>)</p></li><li><p>
        Deleting from a <code class="literal">CSV</code> table could corrupt it.
       (<a href="http://bugs.mysql.com/29411" target="_top">Bug#29411</a>)</p></li><li><p>
        Results for a select query that aliases the column names against
        a view could duplicate one column while omitting another. This
        bug could occur for a query over a multiple-table view that
        includes an <code class="literal">ORDER BY</code> clause in its
        definition.
       (<a href="http://bugs.mysql.com/29392" target="_top">Bug#29392</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> created a stray file when a given a
        too-long filename argument.
       (<a href="http://bugs.mysql.com/29361" target="_top">Bug#29361</a>)</p></li><li><p>
        The special “<span class="quote">zero</span>” <code class="literal">ENUM</code> value
        was coerced to the normal empty string <code class="literal">ENUM</code>
        value during a column-to-column copy. This affected
        <code class="literal">CREATE ... SELECT</code> statements and
        <code class="literal">SELECT</code> statements with aggregate functions on
        <code class="literal">ENUM</code> columns in the <code class="literal">GROUP
        BY</code> clause.
       (<a href="http://bugs.mysql.com/29360" target="_top">Bug#29360</a>)</p></li><li><p>
        Inserting a negative number into a <code class="literal">CSV</code> table
        could corrupt it.
       (<a href="http://bugs.mysql.com/29353" target="_top">Bug#29353</a>)</p></li><li><p>
        Optimization of queries with <code class="literal">DETERMINISTIC</code>
        stored functions in the <code class="literal">WHERE</code> clause was
        ineffective: A sequential scan was always used.
       (<a href="http://bugs.mysql.com/29338" target="_top">Bug#29338</a>)</p></li><li><p>
        <code class="literal">MyISAM</code> corruption could occur with the
        <code class="literal">cp932_japanese_ci</code> collation for the
        <code class="literal">cp932</code> character set due to incorrect
        comparison for trailing space.
       (<a href="http://bugs.mysql.com/29333" target="_top">Bug#29333</a>)</p></li><li><p>
        For updates to <code class="literal">InnoDB</code> tables, a
        <code class="literal">TIMESTAMP</code> column with the <code class="literal">ON UPDATE
        CURRENT_TIMESTAMP</code> attribute could be updated even when
        no values actually changed.
       (<a href="http://bugs.mysql.com/29310" target="_top">Bug#29310</a>)</p></li><li><p>
        <code class="literal">FULLTEXT</code> indexes could be corrupted by
        certain <code class="literal">gbk</code> characters.
       (<a href="http://bugs.mysql.com/29299" target="_top">Bug#29299</a>)</p></li><li><p>
        <code class="literal">SELECT ... INTO OUTFILE</code> followed by
        <code class="literal">LOAD DATA</code> could result in garbled characters
        when the <code class="literal">FIELDS ENCLOSED BY</code> clause named a
        delimiter of <code class="literal">'0'</code>, <code class="literal">'b'</code>,
        <code class="literal">'n'</code>, <code class="literal">'r'</code>,
        <code class="literal">'t'</code>, <code class="literal">'N'</code>, or
        <code class="literal">'Z'</code> due to an interaction of character
        encoding and doubling for data values containing the enclosed-by
        character.
       (<a href="http://bugs.mysql.com/29294" target="_top">Bug#29294</a>)</p></li><li><p>
        Sort order of the collation wasn't used when comparing trailing
        spaces. This could lead to incorrect comparison results,
        incorrectly created indexes, or incorrect result set order for
        queries that include an <code class="literal">ORDER BY</code> clause.
       (<a href="http://bugs.mysql.com/29261" target="_top">Bug#29261</a>)</p></li><li><p>
        <code class="literal">CHECK TABLE</code> could erroneously report table
        corruption for a <code class="literal">CSV</code> table if multiple
        threads were modifying the table at the same time.
       (<a href="http://bugs.mysql.com/29253" target="_top">Bug#29253</a>)</p></li><li><p>
        Many threads accessing a <code class="literal">CSV</code> table
        simultaneously could cause an assertion failure.
       (<a href="http://bugs.mysql.com/29252" target="_top">Bug#29252</a>)</p></li><li><p>
        If an <code class="literal">ENUM</code> column contained
        <code class="literal">''</code> as one of its members (represented with
        numeric value greater than 0), and the column contained error
        values (represented as 0 and displayed as
        <code class="literal">''</code>), using <code class="literal">ALTER TABLE</code> to
        modify the column definition caused the 0 values to be given the
        numeric value of the non-zero <code class="literal">''</code> member.
       (<a href="http://bugs.mysql.com/29251" target="_top">Bug#29251</a>)</p></li><li><p>
        Calling <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> after
        <a href="apis.html#mysql-real-connect" title="29.2.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> could
        cause clients to crash.
       (<a href="http://bugs.mysql.com/29247" target="_top">Bug#29247</a>)</p></li><li><p>
        <code class="literal">CHECK TABLE</code> for <code class="literal">ARCHIVE</code>
        tables could falsely report table corruption or cause a server
        crash.
       (<a href="http://bugs.mysql.com/29207" target="_top">Bug#29207</a>)</p></li><li><p>
        Mixing binary and <code class="literal">utf8</code> columns in a union
        caused field lengths to be calculated incorrectly, resulting in
        truncation.
       (<a href="http://bugs.mysql.com/29205" target="_top">Bug#29205</a>)</p></li><li><p>
        <code class="literal">AsText()</code> could fail with a buffer overrun.
       (<a href="http://bugs.mysql.com/29166" target="_top">Bug#29166</a>)</p></li><li><p>
        Under some circumstances, a <code class="literal">SELECT ... FROM
        mysql.event</code> could cause the server to crash.
       (<a href="http://bugs.mysql.com/29156" target="_top">Bug#29156</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> refused to start on some versions of
        FreeBSD with LinuxThreads. This is fixed by enabling file
        locking on FreeBSD.
       (<a href="http://bugs.mysql.com/29155" target="_top">Bug#29155</a>)</p></li><li><p>
        <code class="literal">LOCK TABLES</code> was not atomic when more than one
        <code class="literal">InnoDB</code> tables were locked.
       (<a href="http://bugs.mysql.com/29154" target="_top">Bug#29154</a>)</p></li><li><p>
        <code class="literal">INSERT DELAYED</code> statements on a master server
        are replicated as non-<code class="literal">DELAYED</code> inserts on
        slaves (which is normal, to preserve serialization), but the
        inserts on the slave did not use concurrent inserts. Now
        <code class="literal">INSERT DELAYED</code> on a slave is converted to a
        concurrent insert when possible, and to a normal insert
        otherwise.
       (<a href="http://bugs.mysql.com/29152" target="_top">Bug#29152</a>)</p></li><li><p>
        <span><strong class="command">mysqld</strong></span> failed to exit during shutdown.
       (<a href="http://bugs.mysql.com/29133" target="_top">Bug#29133</a>)</p></li><li><p>
        A network structure was initialized incorrectly, leading to
        embedded server crashes.
       (<a href="http://bugs.mysql.com/29117" target="_top">Bug#29117</a>)</p></li><li><p>
        An assertion failure occurred if a query contained a conjunctive
        predicate of the form <code class="literal">
        <em class="replaceable"><code>view_column</code></em> = constant</code> in
        the <code class="literal">WHERE</code> clause and the <code class="literal">GROUP
        BY</code> clause contained a reference to a different view
        column. The fix also enables application of an optimization that
        was being skipped if a query contained a conjunctive predicate
        of the form <code class="literal"><em class="replaceable"><code>view_column</code></em> =
        constant</code> in the <code class="literal">WHERE</code> clause and
        the <code class="literal">GROUP BY</code> clause contained a reference to
        the same view column.
       (<a href="http://bugs.mysql.com/29104" target="_top">Bug#29104</a>)</p></li><li><p>
        A maximum of 4TB <code class="literal">InnoDB</code> free space was
        reported by <code class="literal">SHOW TABLE STATUS,</code> which is
        incorrect on systems with more than 4TB space.
       (<a href="http://bugs.mysql.com/29097" target="_top">Bug#29097</a>)</p></li><li><p>
        If an <code class="literal">INSERT INTO ... SELECT</code> statement
        inserted into the same table that the <code class="literal">SELECT</code>
        retrieved from, and the <code class="literal">SELECT</code> included
        <code class="literal">ORDER BY</code> and <code class="literal">LIMIT</code>
        clauses, different data was inserted than the data produced by
        the <code class="literal">SELECT</code> executed by itself.
       (<a href="http://bugs.mysql.com/29095" target="_top">Bug#29095</a>)</p></li><li><p>
        Queries that performed a lookup into a <code class="literal">BINARY</code>
        index containing key values ending with spaces caused an
        assertion failure for debug builds and incorrect results for
        non-debug builds.
       (<a href="http://bugs.mysql.com/29087" target="_top">Bug#29087</a>)</p></li><li><p>
        The semantics of <code class="literal">BIGINT</code> depended on
        platform-specific characteristics.
       (<a href="http://bugs.mysql.com/29079" target="_top">Bug#29079</a>)</p></li><li><p>
        A byte-order issue in writing a spatial index to disk caused bad
        index files on some systems.
       (<a href="http://bugs.mysql.com/29070" target="_top">Bug#29070</a>)</p></li><li><p>
        Creation of a legal stored procedure could fail if no default
        database had been selected.
       (<a href="http://bugs.mysql.com/29050" target="_top">Bug#29050</a>)</p></li><li><p>
        <code class="literal">REPLACE</code>, <code class="literal">INSERT IGNORE</code>,
        and <code class="literal">UPDATE IGNORE</code> did not work for
        <code class="literal">FEDERATED</code> tables.
       (<a href="http://bugs.mysql.com/29019" target="_top">Bug#29019</a>)</p></li><li><p>
        Inserting into <code class="literal">InnoDB</code> tables and executing
        <code class="literal">RESET MASTER</code> in multiple threads cause
        assertion failure in debug server binaries.
       (<a href="http://bugs.mysql.com/28983" target="_top">Bug#28983</a>)</p></li><li><p>
        Updates to a <code class="literal">CSV</code> table could cause a server
        crash or update the table with incorrect values.
       (<a href="http://bugs.mysql.com/28971" target="_top">Bug#28971</a>)</p></li><li><p>
        For a <code class="literal">ucs2</code> column,
        <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a> did
        not convert separators to the result character set before
        inserting them, producing a result containing a mixture of two
        different character sets.
       (<a href="http://bugs.mysql.com/28925" target="_top">Bug#28925</a>)</p></li><li><p>
        Dropping the definer of an active event caused the server to
        crash.
       (<a href="http://bugs.mysql.com/28924" target="_top">Bug#28924</a>)</p></li><li><p>
        For a join with <code class="literal">GROUP BY</code> and/or
        <code class="literal">ORDER BY</code> and a view reference in the
        <code class="literal">FROM</code> list, the query metadata erroneously
        showed empty table aliases and database names for the view
        columns.
       (<a href="http://bugs.mysql.com/28898" target="_top">Bug#28898</a>)</p></li><li><p>
        Creating an event using <code class="literal">ON SCHEDULE AT
        CURRENT_TIMESTAMP + INTERVAL ...</code> could in some cases
        cause <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/28881" target="_top">Bug#28881</a>)</p></li><li><p>
        Coercion of ASCII values to character sets that are a superset
        of ASCII sometimes was not done, resulting in <span class="errortext">illegal
        mix of collations</span> errors. These cases now are
        resolved using repertoire, a new string expression attribute
        (see <a href="internationalization-localization.html#charset-repertoire" title="9.1.6. String Repertoire">Section 9.1.6, “String Repertoire”</a>).
       (<a href="http://bugs.mysql.com/28875" target="_top">Bug#28875</a>)</p></li><li><p>
        Executing ALTER EVENT on an event whose definer's event creation
        privileges had been revoked cause the server to crash.
       (<a href="http://bugs.mysql.com/28873" target="_top">Bug#28873</a>)</p></li><li><p>
        <code class="literal">ALTER VIEW</code> is not supported as a prepared
        statement but was not being rejected. <code class="literal">ALTER
        VIEW</code> is now prohibited as a prepared statement or when
        called within stored routines.
       (<a href="http://bugs.mysql.com/28846" target="_top">Bug#28846</a>)</p></li><li><p>
        In strict SQL mode, errors silently stopped the SQL thread even
        for errors named using the <code class="option">--slave-skip-errors</code>
        option.
       (<a href="http://bugs.mysql.com/28839" target="_top">Bug#28839</a>)</p></li><li><p>
        Fast <code class="literal">ALTER TABLE</code> (that works without
        rebuilding the table) acquired duplicate locks in the storage
        engine. In <code class="literal">MyISAM</code>, if <code class="literal">ALTER
        TABLE</code> was issued under <code class="literal">LOCK TABLE</code>,
        it caused all data inserted after <code class="literal">LOCK TABLE</code>
        to disappear.
       (<a href="http://bugs.mysql.com/28838" target="_top">Bug#28838</a>)</p></li><li><p>
        Runtime changes to the
        <code class="literal">log_queries_not_using_indexes</code> system variable
        were ignored.
       (<a href="http://bugs.mysql.com/28808" target="_top">Bug#28808</a>)</p></li><li><p>
        Selecting a column not present in the selected-from table caused
        an extra error to be produced by <code class="literal">SHOW ERRORS</code>.
       (<a href="http://bugs.mysql.com/28677" target="_top">Bug#28677</a>)</p></li><li><p>
        Creating an event to be executed at a time close to the end of
        the allowed range (2038-01-19 03:14:07 UTC) would cause the
        server to crash.
       (<a href="http://bugs.mysql.com/28641" target="_top">Bug#28641</a>)</p></li><li><p>
        For a statement of the form <code class="literal">CREATE t1 SELECT
        <em class="replaceable"><code>integer_constant</code></em></code>, the
        server created the column using the <code class="literal">DECIMAL</code>
        data type for large negative values that are within the range of
        <code class="literal">BIGINT</code>.
       (<a href="http://bugs.mysql.com/28625" target="_top">Bug#28625</a>)</p></li><li><p>
        Starting the server with an
        <code class="literal">innodb_force_recovery</code> value of 4 did not
        work.
       (<a href="http://bugs.mysql.com/28604" target="_top">Bug#28604</a>)</p></li><li><p>
        For <code class="literal">InnoDB</code> tables, MySQL unnecessarily sorted
        records in certain cases when the records were retrieved by
        <code class="literal">InnoDB</code> in the proper order already.
       (<a href="http://bugs.mysql.com/28591" target="_top">Bug#28591</a>)</p></li><li><p>
        <span><strong class="command">mysql_install_db</strong></span> could fail to find script
        files that it needs.
       (<a href="http://bugs.mysql.com/28585" target="_top">Bug#28585</a>)</p></li><li><p>
        If a stored procedure was created and invoked prior to selecting
        a default database with <code class="literal">USE</code>, a <span class="errortext">No
        database selected</span> error occurred.
       (<a href="http://bugs.mysql.com/28551" target="_top">Bug#28551</a>)</p></li><li><p>
        On Mac OS X, shared-library installation pathnames were
        incorrect.
       (<a href="http://bugs.mysql.com/28544" target="_top">Bug#28544</a>)</p></li><li><p>
        Using the <code class="option">--skip-add-drop-table </code>option with
        <span><strong class="command">mysqldump</strong></span> generated incorrect SQL if the
        database included any views. The recreation of views requires
        the creation and removal of temporary tables. This option
        suppressed the removal of those temporary tables. The same
        applied to <code class="option">--compact</code> since this option also
        invokes <code class="option">--skip-add-drop-table</code>.
       (<a href="http://bugs.mysql.com/28524" target="_top">Bug#28524</a>)</p></li><li><p>
        <span><strong class="command">mysqlbinlog --hexdump</strong></span> generated incorrect
        output due to omission of the “<span class="quote"> <code class="literal">#</code>
        </span>” comment character for some comment lines.
       (<a href="http://bugs.mysql.com/28293" target="_top">Bug#28293</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> could crash if the server was shut
        down while <code class="literal">innodb_table_monitor</code> was running.
       (<a href="http://bugs.mysql.com/28254" target="_top">Bug#28254</a>)</p></li><li><p>
        A race condition in the interaction between
        <code class="literal">MyISAM</code> and the query cache code caused the
        query cache not to invalidate itself for concurrently inserted
        data.
       (<a href="http://bugs.mysql.com/28249" target="_top">Bug#28249</a>)</p></li><li><p>
        A duplicate-key error message could display an incorrect key
        value when not all columns of the key were used to select rows
        for update.
       (<a href="http://bugs.mysql.com/28158" target="_top">Bug#28158</a>)</p></li><li><p>
        Indexing column prefixes in <code class="literal">InnoDB</code> tables
        could cause table corruption.
       (<a href="http://bugs.mysql.com/28138" target="_top">Bug#28138</a>)</p></li><li><p>
        Index creation could fail due to truncation of key values to the
        maximum key length rather than to a mulitiple of the maximum
        character length.
       (<a href="http://bugs.mysql.com/28125" target="_top">Bug#28125</a>)</p></li><li><p>
        Instance Manager had a race condition when it received a
        shutdown request while a guarded <span><strong class="command">mysqld</strong></span>
        instance was starting such that it could fail to stop the
        <span><strong class="command">mysqld</strong></span> instance.
       (<a href="http://bugs.mysql.com/28030" target="_top">Bug#28030</a>)</p></li><li><p>
        <code class="literal">SELECT ... FOR UPDATE</code> with partitioned tables
        could cause a server crash.
       (<a href="http://bugs.mysql.com/28026" target="_top">Bug#28026</a>)</p></li><li><p>
        On Windows, Instance Manager would crash if an instance object
        failed to initialize during startup. This could happen if an
        incorrect <span><strong class="command">mysqld</strong></span> path was supplied in the
        configuration file.
       (<a href="http://bugs.mysql.com/28012" target="_top">Bug#28012</a>)</p></li><li><p>
        The <a href="functions.html#function_locate"><code class="literal">LOCATE()</code></a> function returned
        <code class="literal">NULL</code> if any of its arguments evaluated to
        <code class="literal">NULL</code>. Likewise, the predicate,
        <a href="functions.html#function_locate"><code class="literal">LOCATE(<em class="replaceable"><code>str</code></em>,NULL)
        IS NULL</code></a>, erroneously evaluated to
        <code class="literal">FALSE</code>.
       (<a href="http://bugs.mysql.com/27932" target="_top">Bug#27932</a>)</p></li><li><p>
        Dropping a user-defined function could cause a server crash if
        the function was still in use by another thread.
       (<a href="http://bugs.mysql.com/27564" target="_top">Bug#27564</a>)</p></li><li><p>
        An error that happened inside <code class="literal">INSERT</code>,
        <code class="literal">UPDATE</code>, or <code class="literal">DELETE</code>
        statements performed from within a stored function or trigger
        could cause inconsistency between master and slave servers.
       (<a href="http://bugs.mysql.com/27417" target="_top">Bug#27417</a>)</p></li><li><p>
        For some event-creation problems, the server displayed messages
        that implied the problems were errors when they were only
        warnings.
       (<a href="http://bugs.mysql.com/27406" target="_top">Bug#27406</a>)</p></li><li><p>
        Unsafe aliasing in the source caused a client library crash when
        compiled with <span><strong class="command">gcc</strong></span> 4 at high optimization
        levels.
       (<a href="http://bugs.mysql.com/27383" target="_top">Bug#27383</a>)</p></li><li><p>
        Index-based range reads could fail for comparisons that involved
        contraction characters (such as <code class="literal">ch</code> in Czech
        or <code class="literal">ll</code> in Spanish).
       (<a href="http://bugs.mysql.com/27345" target="_top">Bug#27345</a>)</p></li><li><p>
        Aggregations in subqueries that refer to outer query columns
        were not always correctly referenced to the proper outer query.
       (<a href="http://bugs.mysql.com/27333" target="_top">Bug#27333</a>)</p></li><li><p>
        Error returns from the <code class="literal">time()</code> system call
        were ignored.
       (<a href="http://bugs.mysql.com/27198" target="_top">Bug#27198</a>)</p></li><li><p>
        Phantom reads could occur under <code class="literal">InnoDB</code>
        serializable isolation level.
       (<a href="http://bugs.mysql.com/27197" target="_top">Bug#27197</a>)</p></li><li><p>
        The <a href="functions.html#function_substring"><code class="literal">SUBSTRING()</code></a> function
        returned the entire string instead of an empty string when it
        was called from a stored procedure and when the length parameter
        was specified by a variable with the value “<span class="quote">
        <code class="literal">0</code> </span>”.
       (<a href="http://bugs.mysql.com/27130" target="_top">Bug#27130</a>)</p></li><li><p>
        Some functions when used in partitioning expressions could cause
        <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/27084" target="_top">Bug#27084</a>)</p></li><li><p>
        The server acquired a global mutex for temporary tables,
        although such tables are thread-specific. This affected
        performance by blocking other threads.
       (<a href="http://bugs.mysql.com/27062" target="_top">Bug#27062</a>)</p></li><li><p>
        <code class="literal">FEDERATED</code> tables had an artificially low
        maximum of key length.
       (<a href="http://bugs.mysql.com/26909" target="_top">Bug#26909</a>)</p></li><li><p>
        Updates to rows in a partitioned table could update the wrong
        column.
       (<a href="http://bugs.mysql.com/26827" target="_top">Bug#26827</a>)</p></li><li><p>
        Index creation could corrupt the table definition in the
        <code class="filename">.frm</code> file: 1) A table with the maximum
        number of key segments and maximum length key name would have a
        corrupted <code class="filename">.frm</code> file, due to incorrect
        calculation of the total key length. 2)
        <code class="literal">MyISAM</code> would reject a table with the maximum
        number of keys and the maximum number of key segments in all
        keys. (It would allow one less than this total maximum.) Now
        <code class="literal">MyISAM</code> accepts a table defined with the
        maximum.
       (<a href="http://bugs.mysql.com/26642" target="_top">Bug#26642</a>)</p></li><li><p>
        The Windows implementation of <code class="literal">pthread_join()</code>
        was incorrect and could cause crashes.
       (<a href="http://bugs.mysql.com/26564" target="_top">Bug#26564</a>)</p></li><li><p>
        After the first read of a <code class="literal">TEMPORARY</code> table,
        <code class="literal">CHECK TABLE</code> could report the table as being
        corrupt.
       (<a href="http://bugs.mysql.com/26325" target="_top">Bug#26325</a>)</p></li><li><p>
        If an operation had an <code class="literal">InnoDB</code> table, and two
        triggers, <code class="literal">AFTER UPDATE</code> and <code class="literal">AFTER
        INSERT</code>, competing for different resources (such as two
        distinct <code class="literal">MyISAM</code> tables), the triggers were
        unable to execute concurrently. In addition,
        <code class="literal">INSERT</code> and <code class="literal">UPDATE</code>
        statements for the <code class="literal">InnoDB</code> table were unable
        to run concurrently.
       (<a href="http://bugs.mysql.com/26141" target="_top">Bug#26141</a>)</p></li><li><p>
        A number of unsupported constructs — including prohibited
        constructs, the <a href="functions.html#function_ucase"><code class="literal">UCASE()</code></a>
        function, and nested function calls — were permitted in
        partitioning expressions.
       (<a href="http://bugs.mysql.com/26082" target="_top">Bug#26082</a>, <a href="http://bugs.mysql.com/18198" target="_top">Bug#18198</a>, <a href="http://bugs.mysql.com/29308" target="_top">Bug#29308</a>)</p></li><li><p>
        <code class="literal">ALTER DATABASE</code> did not require at least one
        option.
       (<a href="http://bugs.mysql.com/25859" target="_top">Bug#25859</a>)</p></li><li><p>
        The index merge union access algorithm could produce incorrect
        results with <code class="literal">InnoDB</code> tables. The problem could
        also occur for queries that used <code class="literal">DISTINCT</code>.
       (<a href="http://bugs.mysql.com/25798" target="_top">Bug#25798</a>)</p></li><li><p>
        When using a <code class="literal">FEDERATED</code> table, the value of
        <code class="literal">last_insert_id()</code> would not correctly update
        the C API interface, which would affect the autogenerated ID
        returned both through the C API and the MySQL protocol,
        affecting Connectors that used the protocol and/or C API.
       (<a href="http://bugs.mysql.com/25714" target="_top">Bug#25714</a>)</p></li><li><p>
        The server was blocked from opening other tables while the
        <code class="literal">FEDERATED</code> engine was attempting to open a
        remote table. Now the server does not check the correctness of a
        <code class="literal">FEDERATED</code> table at <code class="literal">CREATE
        TABLE</code> time, but waits until the table actually is
        accessed.
       (<a href="http://bugs.mysql.com/25679" target="_top">Bug#25679</a>)</p></li><li><p>
        Under ActiveState Perl, <code class="literal">mysql-test-run.pl</code>
        could kill itself when attempting to kill other processes.
       (<a href="http://bugs.mysql.com/25657" target="_top">Bug#25657</a>)</p></li><li><p>
        Several <code class="literal">InnoDB</code> assertion failures were
        corrected.
       (<a href="http://bugs.mysql.com/25645" target="_top">Bug#25645</a>)</p></li><li><p>
        A query with <code class="literal">DISTINCT</code> in the select list to
        which the loose-scan optimization for grouping queries was
        applied returned an incorrect result set when the query was used
        with the <code class="literal">SQL_BIG_RESULT</code> option.
       (<a href="http://bugs.mysql.com/25602" target="_top">Bug#25602</a>)</p></li><li><p>
        For a multiple-row insert into a <code class="literal">FEDERATED</code>
        table that refers to a remote transactional table, if the insert
        failed for a row due to constraint failure, the remote table
        would contain a partial commit (the rows preceding the failed
        one) instead of rolling back the statement completely. This
        occurred because the rows were treated as individual inserts.
      </p><p>
        Now <code class="literal">FEDERATED</code> performs bulk-insert handling
        such that multiple rows are sent to the remote table in a batch.
        This provides a performance improvement and enables the remote
        table to perform statement rollback properly should an error
        occur. This capability has the following limitations:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The size of the insert cannot exceed the maximum packet size
            between servers. If the insert exceeds this size, it is
            broken into multiple packets and the rollback problem can
            occur.
          </p></li><li><p>
            Bulk-insert handling does not occur for <code class="literal">INSERT ...
            ON DUPLICATE KEY UPDATE</code>.
          </p></li></ul></div><p>(<a href="http://bugs.mysql.com/25513" target="_top">Bug#25513</a>)</p></li><li><p>
        The <code class="literal">FEDERATED</code> storage engine failed silently
        for <code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code> if a
        duplicate key violation occurred. <code class="literal">FEDERATED</code>
        does not support <code class="literal">ON DUPLICATE KEY UPDATE</code>, so
        now it correctly returns an <code class="literal">ER_DUP_KEY</code> error
        if a duplicate key violation occurs.
       (<a href="http://bugs.mysql.com/25511" target="_top">Bug#25511</a>)</p></li><li><p>
        In a stored function or trigger, when <code class="literal">InnoDB</code>
        detected deadlock, it attempted rollback and displayed an
        incorrect error message (<span class="errortext">Explicit or implicit commit
        is not allowed in stored function or trigger</span>). Now
        <code class="literal">InnoDB</code> returns an error under these
        conditions and does not attempt rollback. Rollback is handled
        outside of <code class="literal">InnoDB</code> above the function/trigger
        level.
       (<a href="http://bugs.mysql.com/24989" target="_top">Bug#24989</a>)</p></li><li><p>
        Dropping a temporary <code class="literal">InnoDB</code> table that had
        been locked with <code class="literal">LOCK TABLES</code> caused a server
        crash.
       (<a href="http://bugs.mysql.com/24918" target="_top">Bug#24918</a>)</p></li><li><p>
        On Windows, executables did not include Vista manifests.
       (<a href="http://bugs.mysql.com/24732" target="_top">Bug#24732</a>)</p><p>See also <a href="http://bugs.mysql.com/22563" target="_top">Bug#22563</a></p></li><li><p>
        Slave servers could incorrectly interpret an out-of-memory error
        from the master and reconnect using the wrong binary log
        position.
       (<a href="http://bugs.mysql.com/24192" target="_top">Bug#24192</a>)</p></li><li><p>
        If MySQL/<code class="literal">InnoDB</code> crashed very quickly after
        starting up, it would not force a checkpoint. In this case,
        <code class="literal">InnoDB</code> would skip crash recovery at next
        startup, and the database would become corrupt. Now, if the redo
        log scan at <code class="literal">InnoDB</code> startup goes past the last
        checkpoint, crash recovery is forced.
       (<a href="http://bugs.mysql.com/23710" target="_top">Bug#23710</a>)</p></li><li><p>
        Using the <code class="literal">READ COMMITTED</code> transaction
        isolation level caused mixed and statement-based replication to
        fail.
       (<a href="http://bugs.mysql.com/23051" target="_top">Bug#23051</a>)</p></li><li><p>
        <code class="literal">SHOW INNODB STATUS</code> caused an assertion
        failure under high load.
       (<a href="http://bugs.mysql.com/22819" target="_top">Bug#22819</a>)</p></li><li><p>
        <code class="literal">SHOW BINLOG EVENTS</code> displayed incorrect values
        of <code class="literal">End_log_pos</code> for events associated with
        transactional storage engines.
       (<a href="http://bugs.mysql.com/22540" target="_top">Bug#22540</a>)</p></li><li><p>
        When determining which transaction to kill after deadlock has
        been detected, <code class="literal">InnoDB</code> now adds the number of
        locks to a transaction's weight, and avoids killing transactions
        that mave modified non-transactional tables. This should reduce
        the likelihood of killing long-running transactions containing
        <code class="literal">SELECT ... FOR UPDATE</code> or
        <code class="literal">INSERT/REPLACE INTO ... SELECT</code> statements,
        and of causing partial updates if the target is a
        <code class="literal">MyISAM</code> table.
       (<a href="http://bugs.mysql.com/21293" target="_top">Bug#21293</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> displayed an incorrect error message
        when a <code class="literal">CREATE TABLE</code> statement exceeded the
        <code class="literal">InnoDB</code> maximum allowable row size.
       (<a href="http://bugs.mysql.com/21101" target="_top">Bug#21101</a>)</p></li><li><p>
        Under heavy load with a large query cache, invalidating part of
        the cache could cause the server to freeze (that is, to be
        unable to service other operations until the invalidation was
        complete).
       (<a href="http://bugs.mysql.com/21074" target="_top">Bug#21074</a>)</p></li><li><p>
        On Windows, the server used 10MB of memory for each connection
        thread, resulting in memory exhaustion. Now each thread uses
        1MB.
       (<a href="http://bugs.mysql.com/20815" target="_top">Bug#20815</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> produced an unnecessary (and harmless)
        warning: <code class="literal"><code class="literal">InnoDB</code>: Error: trying to
        declare trx to enter <code class="literal">InnoDB</code>, but
        <code class="literal">InnoDB</code>: it already is declared</code>.
       (<a href="http://bugs.mysql.com/20090" target="_top">Bug#20090</a>)</p></li><li><p>
        If a slave timed out while registering with the master to which
        it was connecting, auto-reconnect failed thereafter.
       (<a href="http://bugs.mysql.com/19328" target="_top">Bug#19328</a>)</p></li><li><p>
        If <code class="literal">InnoDB</code> reached its limit on the number of
        concurrent transactions (1023), it wrote a descriptive message
        to the error log but returned a misleading error message to the
        client, or an assertion failure occurred.
       (<a href="http://bugs.mysql.com/18828" target="_top">Bug#18828</a>)</p></li><li><p>
        Under ActiveState Perl, <code class="literal">mysql-test-run.pl</code>
        would not run.
       (<a href="http://bugs.mysql.com/18415" target="_top">Bug#18415</a>)</p></li><li><p>
        The server crashed when the size of an
        <code class="literal">ARCHIVE</code> table grew larger than 2GB.
       (<a href="http://bugs.mysql.com/15787" target="_top">Bug#15787</a>)</p></li><li><p>
        <code class="literal">SQL_BIG_RESULT</code> had no effect for
        <code class="literal">CREATE TABLE ... SELECT SQL_BIG_RESULT ...</code>
        statements.
       (<a href="http://bugs.mysql.com/15130" target="_top">Bug#15130</a>)</p></li><li><p>
        On 64-bit Windows systems, the Config Wizard failed to complete
        the setup because 64-bit Windows does not resolve dynamic
        linking of the 64-bit <code class="filename">libmysql.dll</code> to a
        32-bit application like the Config Wizard.
       (<a href="http://bugs.mysql.com/14649" target="_top">Bug#14649</a>)</p></li><li><p>
        <span><strong class="command">mysql_setpermission</strong></span> tried to grant
        global-only privileges at the database level.
       (<a href="http://bugs.mysql.com/14618" target="_top">Bug#14618</a>)</p></li><li><p>
        For the general query log, logging of prepared statements
        executed via the C API differed from logging of prepared
        statements performed with <code class="literal">PREPARE</code> and
        <code class="literal">EXECUTE</code>. Logging for the latter was missing
        the <code class="literal">Prepare</code> and <code class="literal">Execute</code>
        lines.
       (<a href="http://bugs.mysql.com/13326" target="_top">Bug#13326</a>)</p></li><li><p>
        The <code class="literal">TABLE_COMMENT</code> column for
        <code class="literal">INFORMATION_SCHEMA.TABLES</code> displayed
        extraneous information for <code class="literal">InnoDB</code> tables.
       (<a href="http://bugs.mysql.com/11379" target="_top">Bug#11379</a>)</p><p>See also <a href="http://bugs.mysql.com/32440" target="_top">Bug#32440</a></p></li><li><p>
        The server returned data from <code class="literal">SHOW CREATE
        TABLE</code> statement or a <code class="literal">SELECT</code>
        statement on an INFORMATION_SCHEMA table using the
        <code class="literal">binary</code> character set.
       (<a href="http://bugs.mysql.com/10491" target="_top">Bug#10491</a>)</p></li><li><p>
        Backup software can cause
        <code class="literal">ERROR_SHARING_VIOLATION</code> or
        <code class="literal">ERROR_LOCK_VIOLATION</code> conditions during file
        operations. <code class="literal">InnoDB</code> now retries forever until
        the condition goes away.
       (<a href="http://bugs.mysql.com/9709" target="_top">Bug#9709</a>)</p></li><li><p>
        Retrieval of object definitions from
        <code class="literal">INFORMATION_SCHEMA</code> tables.
      </p></li><li><p>
        In <code class="literal">INFORMATION_SCHEMA</code>, the
        <code class="literal">VIEWS</code> table now has these columns:
        <code class="literal">CHARACTER_SET_CLIENT</code>,
        <code class="literal">COLLATION_CONNECTION</code>. The
        <code class="literal">ROUTINES</code>, <code class="literal">TRIGGERS</code>, and
        <code class="literal">EVENT</code> tables now have these columns:
        <code class="literal">CHARACTER_SET_CLIENT</code>,
        <code class="literal">COLLATION_CONNECTION</code>,
        <code class="literal">DATABASE_COLLATION</code>.
      </p></li><li><p>
        In the <code class="literal">mysql</code> database, the
        <code class="literal">proc</code> and <code class="literal">event</code> tables now
        have these columns: <code class="literal">character_set_client</code>,
        <code class="literal">collation_connection</code>,
        <code class="literal">db_collation</code>, <code class="literal">body_utf8</code>.
      </p></li><li><p>
        Displaying the object definition in <code class="literal">SHOW</code>
        statements. This issue also affected
        <span><strong class="command">mysqldump</strong></span>, which uses
        <code class="literal">SHOW</code>.
      </p></li><li><p>
        Compiling the stored definition into executable form when the
        object is invoked.
      </p></li><li><p>
        Bulk-insert handling does not occur for <code class="literal">INSERT ... ON
        DUPLICATE KEY UPDATE</code>.
      </p></li><li><p>
        The size of the insert cannot exceed the maximum packet size
        between servers. If the insert exceeds this size, it is broken
        into multiple packets and the rollback problem can occur.
      </p></li><li><p>
        Parsing the original object definition so that it can be stored.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-20"></a>C.1.10. Changes in  MySQL 5.1.20 (25 June 2007)</h3></div></div></div><p class="release-level">
      This is a new Beta development release, fixing recently discovered
      bugs.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p class="release-non-production">
        This Beta release, as any other pre-production release, should
        not be installed on <span class="emphasis"><em>production</em></span> level
        systems or systems with critical data. It is good practice to
        back up your data before installing any new version of software.
        Although MySQL has worked very hard to ensure a high level of
        quality, protect your data by making a backup as you would for
        any software beta release. Please refer to our bug database at
        <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a> for more details about the
        individual bugs fixed in this version.
      </p></div><p>This section documents all changes and bug fixes that have been applied since the last official MySQL release. If you would like to receive more fine-grained and personalized <span class="emphasis"><em>update alerts</em></span> about fixes that are relevant to the version and features you use, please consider subscribing to <span class="emphasis"><em>MySQL Enterprise</em></span> (a commercial MySQL offering). For more details please see <a href="http://www.mysql.com/products/enterprise" target="_top">http://www.mysql.com/products/enterprise</a>.</p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        It is no longer possible to partition the log tables.
       (<a href="http://bugs.mysql.com/27816" target="_top">Bug#27816</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        <span><strong class="command">mysqld_safe</strong></span> now supports error logging to
        <code class="literal">syslog</code> on systems that support the
        <span><strong class="command">logger</strong></span> command. The new
        <code class="option">--syslog</code> and <code class="option">--skip-syslog</code>
        options can be used instead of the <code class="option">--log-error</code>
        option to control logging behavior, as described in
        <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script">Section 4.3.2, “<span><strong class="command">mysqld_safe</strong></span> — MySQL Server Startup Script”</a>. The default is to use
        <code class="literal">syslog</code>, which differs from the previous
        default behavior of writing an error log file.
      </p><p>
        <span class="bold"><strong>Currently, logging to
        <code class="literal">syslog</code> may fail to operate correctly in some
        cases, so we recommend that you use
        <code class="option">--skip-syslog</code> or
        <code class="option">--log-error</code>.</strong></span> To maintain the older
        behavior if you were using no error-logging option, use
        <code class="option">--skip-syslog</code>. If you were using
        <code class="option">--log-error</code>, continue to use it.
      </p><p>
        Note: In 5.1.21, the default is changed to
        <code class="option">--skip-syslog</code>, which is compatible with
        releases prior to 5.1.20.
       (<a href="http://bugs.mysql.com/4858" target="_top">Bug#4858</a>)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="literal">TimeBetweenWatchdogCheckInitial</code>
        configuration parameter was added to allow setting of a separate
        watchdog timeout for memory allocation during startup of the
        data nodes. See <a href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="20.3.4.5. Defining Data Nodes">Section 20.3.4.5, “Defining Data Nodes”</a>,
        for more information.
       (<a href="http://bugs.mysql.com/28899" target="_top">Bug#28899</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The cluster management client now stores command history between
        sessions.
       (<a href="http://bugs.mysql.com/29073" target="_top">Bug#29073</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">auto_increment_increment</code> and
        <code class="literal">auto_increment_offset</code> are now supported for
        <code class="literal">NDB</code> tables.
       (<a href="http://bugs.mysql.com/26342" target="_top">Bug#26342</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The server source tree now includes scripts to simplify building
        MySQL with SCI support. For more information about SCI
        interconnects and these build scripts, see
        <a href="mysql-cluster.html#mysql-cluster-sci-sockets" title="20.13.1. Configuring MySQL Cluster to use SCI Sockets">Section 20.13.1, “Configuring MySQL Cluster to use SCI Sockets”</a>.
       (<a href="http://bugs.mysql.com/25470" target="_top">Bug#25470</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A new configuration parameter <code class="literal">ODirect</code> causes
        <code class="literal">NDB</code> to attempt using
        <code class="literal">O_DIRECT</code> writes for LCP, backups, and redo
        logs, often lowering CPU usage.
      </p></li><li><p>
        If a <code class="literal">MERGE</code> table cannot be opened or used
        because of a problem with an underlying table, <code class="literal">CHECK
        TABLE</code> now displays information about which table
        caused the problem.
       (<a href="http://bugs.mysql.com/26976" target="_top">Bug#26976</a>)</p></li><li><p>
        User variables and stored procedure variables are now supported
        for use in XPath expressions employed as arguments to the
        <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> and
        <a href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a>
        functions.
      </p><p>
        This means that:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              XPath can now be used to load data from XML files using
              virtually any format, and so able to import data from most
              third party software which either has XML export
              functionality, or uses XML natively as a storage format.
            </p></li><li><p>
              Various complex conditions can be put on rows and columns,
              so one can filter for desired rows (or skip unwanted rows)
              when loading XML.
            </p></li><li><p>
              Various types of preprocessing using SQL functions are now
              possible when loading XML. For example, you can
              concatenate two XML tag or attribute values into a single
              column value using
              <a href="functions.html#function_concat"><code class="literal">CONCAT()</code></a>, or remove some
              parts of the data using
              <a href="functions.html#function_replace"><code class="literal">REPLACE()</code></a>.
            </p></li></ul></div><p>
      </p><p>
        See <a href="functions.html#xml-functions" title="11.10. XML Functions">Section 11.10, “XML Functions”</a>, for more information.
       (<a href="http://bugs.mysql.com/26518" target="_top">Bug#26518</a>)</p></li><li><p>
        Binary distributions for some platforms did not include shared
        libraries; now shared libraries are shipped for all platforms
        except AIX 5.2 64-bit. <span class="emphasis"><em>Exception</em></span>: The
        library for the <code class="literal">libmysqld</code> embedded server is
        not shared except on Windows.
       (<a href="http://bugs.mysql.com/16520" target="_top">Bug#16520</a>, <a href="http://bugs.mysql.com/26767" target="_top">Bug#26767</a>, <a href="http://bugs.mysql.com/13450" target="_top">Bug#13450</a>)</p></li><li><p>
        Added a new <code class="literal">PAD_CHAR_TO_FULL_LENGTH</code> SQL mode.
        By default, trailing spaces are trimmed from
        <code class="literal">CHAR</code> column values on retrieval. If
        <code class="literal">PAD_CHAR_TO_FULL_LENGTH</code> is enabled, trimming
        does not occur and retrieved <code class="literal">CHAR</code> values are
        padded to their full length. This mode does not apply to
        <code class="literal">VARCHAR</code> columns, for which trailing spaces
        are retained on retrieval.
      </p></li><li><p>
        XPath can now be used to load data from XML files using
        virtually any format, and so able to import data from most third
        party software which either has XML export functionality, or
        uses XML natively as a storage format.
      </p></li><li><p>
        Various complex conditions can be put on rows and columns, so
        one can filter for desired rows (or skip unwanted rows) when
        loading XML.
      </p></li><li><p>
        The <code class="literal">SQL_MODE</code>,
        <code class="literal">FOREIGN_KEY_CHECKS</code>,
        <code class="literal">UNIQUE_CHECKS</code>, character set/collations, and
        <code class="literal">SQL_AUTO_IS_NULL</code> sesstion variables are
        written to the binary log and honoured during replication. See
        <a href="server-administration.html#binary-log" title="5.2.4. The Binary Log">Section 5.2.4, “The Binary Log”</a>.
      </p></li><li><p>
        Various types of preprocessing using SQL functions are now
        possible when loading XML. For example, you can concatenate two
        XML tag or attribute values into a single column value using
        <a href="functions.html#function_concat"><code class="literal">CONCAT()</code></a>, or remove
        some parts of the data using
        <a href="functions.html#function_replace"><code class="literal">REPLACE()</code></a>.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        A malformed password packet in the connection protocol could
        cause the server to crash. Thanks for Dormando for reporting
        this bug, and for providing details and a proof of concept.
       (<a href="http://bugs.mysql.com/28984" target="_top">Bug#28984</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-3780" target="_top">CVE-2007-3780</a>)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        <code class="literal">CREATE TABLE LIKE</code> did not require any
        privileges on the source table. Now it requires the
        <code class="literal">SELECT</code> privilege.
      </p><p>
        In addition, <code class="literal">CREATE TABLE LIKE</code> was not
        isolated from alteration by other connections, which resulted in
        various errors and incorrect binary log order when trying to
        execute concurrently a <code class="literal">CREATE TABLE LIKE</code>
        statement and either DDL statements on the source table or DML
        or DDL statements on the target table.
       (<a href="http://bugs.mysql.com/23667" target="_top">Bug#23667</a>, <a href="http://bugs.mysql.com/25578" target="_top">Bug#25578</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-3781" target="_top">CVE-2007-3781</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Some error codes had error numbers in MySQL 5.1 different from
        the numbers in MySQL 5.0. In MySQL 5.1, error numbers have been
        changed to match the MySQL 5.0 values: Error codes with value of
        1458 or higher have changed in MySQL 5.1 now. Client
        applications designed to work with MySQL 5.1 with hard-coded
        error code values (for example, in statements such as
        <code class="literal">if (mysql_errno(mysql) == 1463) { ... }</code>) need
        to be updated in the source code. All clients designed to work
        with MySQL 5.1 that test error codes (for example, in statements
        such as <code class="literal">if (mysql_errno(mysql) == ER_VIEW_RECURSIVE) {
        ... }</code>) should be recompiled. Existing 5.0 clients
        should now work, without changes or recompilation, against
        servers for MySQL 5.1.20 or higher.
       (<a href="http://bugs.mysql.com/29245" target="_top">Bug#29245</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        When <span><strong class="command">mysqldump</strong></span> was run with the
        <code class="option">--delete-master-logs</code> option, binary log files
        were deleted before it was known that the dump had succeeded,
        not after. (The method for removing log files used
        <code class="literal">RESET MASTER</code> prior to the dump. This also
        reset the binary log sequence numbering to
        <code class="literal">.000001</code>.) Now <span><strong class="command">mysqldump</strong></span>
        flushes the logs (which creates a new binary log number with the
        next sequence number), performs the dump, and then uses
        <code class="literal">PURGE MASTER LOGS</code> to remove the log files
        older than the new one. This also preserves log numbering
        because the new log with the next number is generated and only
        the preceding logs are removed. However, this may affect
        applications if they rely on the log numbering sequence being
        reset.
       (<a href="http://bugs.mysql.com/24733" target="_top">Bug#24733</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The use of an <code class="literal">ORDER BY</code> or
        <code class="literal">DISTINCT</code> clause with a query containing a
        call to the <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a>
        function caused results from previous queries to be redisplayed
        in the current result. The fix for this includes replacing a
        <code class="literal">BLOB</code> value used internally for sorting with a
        <code class="literal">VARCHAR</code>. This means that for long results
        (more than 65,535 bytes), it is possible for truncation to
        occur; if so, an appropriate warning is issued.
       (<a href="http://bugs.mysql.com/23856" target="_top">Bug#23856</a>, <a href="http://bugs.mysql.com/28273" target="_top">Bug#28273</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Memory corruption could occur due to a problem in the
        <code class="literal">DBTUP</code> kernel block.
       (<a href="http://bugs.mysql.com/29229" target="_top">Bug#29229</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A query having a large <a href="functions.html#function_in"><code class="literal">IN(...)</code></a>
        or <code class="literal">NOT IN(...)</code> list in the
        <code class="literal">WHERE</code> condition on an <code class="literal">NDB</code>
        table could cause <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/29185" target="_top">Bug#29185</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In the event that two data nodes in the same node group and
        participating in a GCP crashed before they had written their
        respective <code class="filename">P0.sysfile</code> files,
        <code class="literal">QMGR</code> could refuse to start, issuing an
        invalid <span class="errortext">Insufficient nodes for restart</span>
        error instead.
       (<a href="http://bugs.mysql.com/29167" target="_top">Bug#29167</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Attempting to restore a <code class="literal">NULL</code> row to a
        <code class="literal">VARBINARY</code> column caused
        <span><strong class="command">ndb_restore</strong></span> to fail.
       (<a href="http://bugs.mysql.com/29103" target="_top">Bug#29103</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">ndb_error_reporter</strong></span> now preserves timestamps
        on files.
       (<a href="http://bugs.mysql.com/29074" target="_top">Bug#29074</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        It is now possible to set the maximum size of the allocation
        unit for table memory using the <code class="literal">MaxAllocate</code>
        configuration parameter.
       (<a href="http://bugs.mysql.com/29044" target="_top">Bug#29044</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When shutting down <span><strong class="command">mysqld</strong></span>, the
        <code class="literal">NDB</code> binlog process was not shut down before
        log cleanup began.
       (<a href="http://bugs.mysql.com/28949" target="_top">Bug#28949</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">ndb_mgm</strong></span> could hang when connecting to a
        nonexistent host.
       (<a href="http://bugs.mysql.com/28847" target="_top">Bug#28847</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A regression in the heartbeat monitoring code could lead to node
        failure under high load. This issue affected MySQL 5.1.19 and
        MySQL Cluster NDB 6.1.10 only.
       (<a href="http://bugs.mysql.com/28783" target="_top">Bug#28783</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A corrupt schema file could cause a <span class="errortext">File already
        open</span> error.
       (<a href="http://bugs.mysql.com/28770" target="_top">Bug#28770</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Having large amounts of memory locked caused swapping to disk.
       (<a href="http://bugs.mysql.com/28751" target="_top">Bug#28751</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Setting <code class="literal">InitialNoOpenFiles</code> equal to
        <code class="literal">MaxNoOfOpenFiles</code> caused an error. This was
        due to the fact that the actual value of
        <code class="literal">MaxNoOfOpenFiles</code> as used by the cluster was
        offset by 1 from the value set in
        <code class="filename">config.ini</code>.
       (<a href="http://bugs.mysql.com/28749" target="_top">Bug#28749</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        LCP files were not removed following an initial system restart.
       (<a href="http://bugs.mysql.com/28726" target="_top">Bug#28726</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">UPDATE IGNORE</code> statements involving the
        primary keys of multiple tables could result in data corruption.
       (<a href="http://bugs.mysql.com/28719" target="_top">Bug#28719</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A race condition could result when non-master nodes (in addition
        to the master node) tried to update active status due to a local
        checkpoint (that is, between <code class="literal">NODE_FAILREP</code> and
        <code class="literal">COPY_GCIREQ</code> events). Now only the master
        updates the active status.
       (<a href="http://bugs.mysql.com/28717" target="_top">Bug#28717</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A fast global checkpoint under high load with high usage of the
        redo buffer caused data nodes to fail.
       (<a href="http://bugs.mysql.com/28653" target="_top">Bug#28653</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The management client's response to <code class="literal">START BACKUP
        WAIT COMPLETED</code> did not include the backup ID.
       (<a href="http://bugs.mysql.com/27640" target="_top">Bug#27640</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Replication): A replicated unique key allowed duplicate key
        inserts on the slave.
       (<a href="http://bugs.mysql.com/27044" target="_top">Bug#27044</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        It was possible to set <code class="literal">SQL_SLAVE_SKIP_COUNTER</code>
        such that the slave would jump into the middle of an event
        group.
       (<a href="http://bugs.mysql.com/28618" target="_top">Bug#28618</a>)</p><p>See also <a href="http://bugs.mysql.com/12691" target="_top">Bug#12691</a></p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        When loading data into a cluster following a version upgrade,
        the data nodes could forcibly shut down due to page and buffer
        management failures (that is, <code class="literal">ndbrequire</code>
        failures in <code class="literal">PGMAN</code>).
       (<a href="http://bugs.mysql.com/28525" target="_top">Bug#28525</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Repeated <code class="literal">INSERT</code> and <code class="literal">DELETE</code>
        operations on a Disk Data table having one or more large
        <code class="literal">VARCHAR</code> columns could cause data nodes to
        fail.
       (<a href="http://bugs.mysql.com/20612" target="_top">Bug#20612</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        When replicating <code class="literal">MyISAM</code> or
        <code class="literal">InnoDB</code> tables to a MySQL Cluster, it was not
        possible to determine exactly what had been applied following a
        shutdown of the slave cluster or <span><strong class="command">mysqld</strong></span>
        process.
       (<a href="http://bugs.mysql.com/26783" target="_top">Bug#26783</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        The timeout set using the MGM API
        <code class="literal">ndb_mgm_set_timeout()</code> function was
        incorrectly interpreted as seconds rather than as milliseconds.
       (<a href="http://bugs.mysql.com/29063" target="_top">Bug#29063</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        An invalid error code could be set on transaction objects by
        <code class="literal">BLOB</code> handling code.
       (<a href="http://bugs.mysql.com/28724" target="_top">Bug#28724</a>)</p></li><li><p>
        The <code class="literal">TRUNCATE</code> statement was handled
        differently by the server when row-based logging was in effect,
        even though the binlogging format in effect does not effect the
        fact that <code class="literal">TRUNCATE</code> is always logged as a
        statement.
       (<a href="http://bugs.mysql.com/29130" target="_top">Bug#29130</a>)</p></li><li><p>
        If one of the queries in a <code class="literal">UNION</code> used the
        <code class="literal">SQL_CACHE</code> option and another query in the
        <code class="literal">UNION</code> contained a nondeterministic function,
        the result was still cached. For example, this query was
        incorrectly cached:
</p><pre class="programlisting">          
SELECT NOW() FROM t1 UNION SELECT SQL_CACHE 1 FROM t1;
</pre><p>
       (<a href="http://bugs.mysql.com/29053" target="_top">Bug#29053</a>)</p></li><li><p>
        <code class="literal">DROP USER</code> statements that named multiple
        users, only some of which could be dropped, were replicated
        incorrectly.
       (<a href="http://bugs.mysql.com/29030" target="_top">Bug#29030</a>)</p></li><li><p>
        Long pathnames for internal temporary tables could cause stack
        overflows.
       (<a href="http://bugs.mysql.com/29015" target="_top">Bug#29015</a>)</p></li><li><p>
        Using an <code class="literal">INTEGER</code> column from a table to
        <a href="functions.html#function_round"><code class="literal">ROUND()</code></a> a number produced
        different results than using a constant with the same value as
        the <code class="literal">INTEGER</code> column.
       (<a href="http://bugs.mysql.com/28980" target="_top">Bug#28980</a>)</p></li><li><p>
        Using events in replication could cause the slave to crash.
       (<a href="http://bugs.mysql.com/28953" target="_top">Bug#28953</a>)</p></li><li><p>
        If a program binds a given number of parameters to a prepared
        statement handle and then somehow changes
        <code class="literal">stmt-&gt;param_count</code> to a different number,
        <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a> could
        crash the client or server.
       (<a href="http://bugs.mysql.com/28934" target="_top">Bug#28934</a>)</p></li><li><p>
        Queries using UDFs or stored functions were cached.
       (<a href="http://bugs.mysql.com/28921" target="_top">Bug#28921</a>)</p></li><li><p>
        <code class="literal">INSERT .. ON DUPLICATE KEY UPDATE</code> could under
        some circumstances silently update rows when it should not have.
       (<a href="http://bugs.mysql.com/28904" target="_top">Bug#28904</a>)</p></li><li><p>
        Queries that used <a href="functions.html#function_uuid"><code class="literal">UUID()</code></a> were
        incorrectly allowed into the query cache. (This should not
        happen because <a href="functions.html#function_uuid"><code class="literal">UUID()</code></a> is
        non-deterministic.)
       (<a href="http://bugs.mysql.com/28897" target="_top">Bug#28897</a>)</p></li><li><p>
        Using a <code class="literal">VIEW</code> created with a non-existing
        <code class="literal">DEFINER</code> could lead to incorrect results under
        some circumstances.
       (<a href="http://bugs.mysql.com/28895" target="_top">Bug#28895</a>)</p></li><li><p>
        For <code class="literal">InnoDB</code> tables that use the
        <code class="literal">utf8</code> character set, incorrect results could
        occur for DML statements such as <code class="literal">DELETE</code> or
        <code class="literal">UPDATE</code> that use an index on character-based
        columns.
       (<a href="http://bugs.mysql.com/28878" target="_top">Bug#28878</a>)</p><p>See also <a href="http://bugs.mysql.com/29449" target="_top">Bug#29449</a>, <a href="http://bugs.mysql.com/30485" target="_top">Bug#30485</a>, <a href="http://bugs.mysql.com/31395" target="_top">Bug#31395</a></p><p>This regression was introduced by <a href="http://bugs.mysql.com/13195" target="_top">Bug#13195</a></p></li><li><p>
        Non-<code class="literal">utf8</code> characters could get mangled when
        stored in <code class="literal">CSV</code> tables.
       (<a href="http://bugs.mysql.com/28862" target="_top">Bug#28862</a>)</p></li><li><p>
        On Windows, <code class="literal">USE_TLS</code> was not defined for
        <code class="filename">mysqlclient.lib</code>.
       (<a href="http://bugs.mysql.com/28860" target="_top">Bug#28860</a>)</p></li><li><p>
        In MySQL 5.1.15, a new error code
        <code class="literal">ER_DUP_ENTRY_WITH_KEY_NAME</code> (1582) was
        introduced to replace <code class="literal">ER_DUP_ENTRY</code> (1062) so
        that the key name could be provided instead of the key number.
        This was unnecessary, so <code class="literal">ER_DUP_ENTRY</code> is used
        again and the key name is printed. The incompatibility
        introduced in 5.1.15 no longer applies.
       (<a href="http://bugs.mysql.com/28842" target="_top">Bug#28842</a>)</p></li><li><p>
        A subquery with <code class="literal">ORDER BY</code> and <code class="literal">LIMIT
        1</code> could cause a server crash.
       (<a href="http://bugs.mysql.com/28811" target="_top">Bug#28811</a>)</p></li><li><p>
        Running <code class="literal">SHOW TABLE STATUS</code> while performing a
        high number of inserts on partitioned tables with a great many
        partitions could cause the server to crash.
       (<a href="http://bugs.mysql.com/28806" target="_top">Bug#28806</a>)</p></li><li><p>
        Using <a href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> with non-indexed
        date columns and short formats of the date string could return
        incorrect results.
       (<a href="http://bugs.mysql.com/28778" target="_top">Bug#28778</a>)</p></li><li><p>
        Selecting <code class="literal">GEOMETRY</code> columns in a
        <code class="literal">UNION</code> caused a server crash.
       (<a href="http://bugs.mysql.com/28763" target="_top">Bug#28763</a>)</p></li><li><p>
        When constructing the path to the original
        <code class="filename">.frm</code> file, <code class="literal">ALTER ..
        RENAME</code> was unnecessarily (and incorrectly) lowercasing
        the entire path when not on a case-insensitive filesystem,
        causing the statement to fail.
       (<a href="http://bugs.mysql.com/28754" target="_top">Bug#28754</a>)</p></li><li><p>
        The <code class="literal">binlog_format</code> system variable value was
        empty if the server was started with binary logging disabled.
        Now it is set to <code class="literal">MIXED</code>.
       (<a href="http://bugs.mysql.com/28752" target="_top">Bug#28752</a>)</p></li><li><p>
        Searches on indexed and non-indexed <code class="literal">ENUM</code>
        columns could return different results for empty strings.
       (<a href="http://bugs.mysql.com/28729" target="_top">Bug#28729</a>)</p></li><li><p>
        Executing <code class="literal">EXPLAIN EXTENDED</code> on a query using a
        derived table over a grouping subselect could lead to a server
        crash. This occurred only when materialization of the derived
        tables required creation of an auxiliary temporary table, an
        example being when a grouping operation was carried out with
        usage of a temporary table.
       (<a href="http://bugs.mysql.com/28728" target="_top">Bug#28728</a>)</p></li><li><p>
        The result of evaluation for a view's <code class="literal">CHECK
        OPTION</code> option over an updated record and records of
        merged tables was arbitrary and dependant on the order of
        records in the merged tables during the execution of the
        <code class="literal">SELECT</code> statement.
       (<a href="http://bugs.mysql.com/28716" target="_top">Bug#28716</a>)</p></li><li><p>
        The “<span class="quote">manager thread</span>” of the LinuxThreads
        implementation was unintentionally started before
        <span><strong class="command">mysqld</strong></span> had dropped privileges (to run as an
        unprivileged user). This caused signaling between threads in
        <span><strong class="command">mysqld</strong></span> to fail when the privileges were
        finally dropped.
       (<a href="http://bugs.mysql.com/28690" target="_top">Bug#28690</a>)</p></li><li><p>
        Setting an interval of <code class="literal">EVERY 0 SECOND</code> for a
        scheduled event caused the server to crash.
       (<a href="http://bugs.mysql.com/28666" target="_top">Bug#28666</a>)</p></li><li><p>
        For debug builds, <code class="literal">ALTER TABLE</code> could trigger
        an assertion failure due to occurrence of a deadlock when
        committing changes.
       (<a href="http://bugs.mysql.com/28652" target="_top">Bug#28652</a>)</p></li><li><p>
        Attempting to create an index on a <code class="literal">BIT</code> column
        failed after modifying the column.
       (<a href="http://bugs.mysql.com/28631" target="_top">Bug#28631</a>)</p></li><li><p>
        After an upgrade, the names of stored routines referenced by
        views were no longer displayed by <code class="literal">SHOW CREATE
        VIEW</code>.
       (<a href="http://bugs.mysql.com/28605" target="_top">Bug#28605</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/23491" target="_top">Bug#23491</a></p></li><li><p>
        Conversion of U+00A5 YEN SIGN and U+203E OVERLINE from
        <code class="literal">ucs2</code> to <code class="literal">ujis</code> produced
        incorrect results.
       (<a href="http://bugs.mysql.com/28600" target="_top">Bug#28600</a>)</p></li><li><p>
        Killing from one connection a long-running <code class="literal">EXPLAIN
        QUERY</code> started from another connection caused
        <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/28598" target="_top">Bug#28598</a>)</p></li><li><p>
        <code class="literal">SHOW GLOBAL VARIABLES</code> repeated some variable
        names.
       (<a href="http://bugs.mysql.com/28580" target="_top">Bug#28580</a>)</p></li><li><p>
        When one thread attempts to lock two (or more) tables and
        another thread executes a statement that aborts these locks
        (such as <code class="literal">REPAIR TABLE</code>, <code class="literal">OPTIMIZE
        TABLE</code>, or <code class="literal">CHECK TABLE</code>), the thread
        might get a table object with an incorrect lock type in the
        table cache. The result is table corruption or a server crash.
       (<a href="http://bugs.mysql.com/28574" target="_top">Bug#28574</a>)</p></li><li><p>
        Outer join queries with <code class="literal">ON</code> conditions over
        constant outer tables did not return
        <code class="literal">NULL</code>-complemented rows when conditions were
        evaluated to <code class="literal">FALSE</code>.
       (<a href="http://bugs.mysql.com/28571" target="_top">Bug#28571</a>)</p></li><li><p>
        An update on a multiple-table view with the CHECK OPTION clause
        and a subquery in the WHERE condition could cause an assertion
        failure.
       (<a href="http://bugs.mysql.com/28561" target="_top">Bug#28561</a>)</p></li><li><p>
        Calling the <a href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a> function
        using invalid XPath syntax caused memory corruption possibly
        leading to a crash of the server.
       (<a href="http://bugs.mysql.com/28558" target="_top">Bug#28558</a>)</p></li><li><p>
        <code class="literal">PURGE MASTER LOGS BEFORE
        (<em class="replaceable"><code>subquery</code></em>)</code> caused a server
        crash. Subqueries are forbidden in the <code class="literal">BEFORE</code>
        clause now.
       (<a href="http://bugs.mysql.com/28553" target="_top">Bug#28553</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> calculated the required memory for
        a hex-blob string incorrectly causing a buffer overrun. This in
        turn caused <span><strong class="command">mysqldump</strong></span> to crash silently and
        produce incomplete output.
       (<a href="http://bugs.mysql.com/28522" target="_top">Bug#28522</a>)</p></li><li><p>
        When upgrading from MySQL 5.1.17 to 5.1.18,
        <span><strong class="command">mysql_upgrade</strong></span> and
        <span><strong class="command">mysql_fix_privilege_tables</strong></span> did not upgrade
        the system tables relating to the Event Scheduler correctly.
       (<a href="http://bugs.mysql.com/28521" target="_top">Bug#28521</a>)</p></li><li><p>
        Passing a <code class="literal">DECIMAL</code> value as a parameter of a
        statement prepared with <code class="literal">PREPARE</code> resulted in
        an error.
       (<a href="http://bugs.mysql.com/28509" target="_top">Bug#28509</a>)</p></li><li><p>
        <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> could
        return an incorrect result for <code class="literal">INSERT ... ON DUPLICATE
        KEY UPDATE</code> if the <code class="literal">CLIENT_FOUND_ROWS</code>
        flag was set.
       (<a href="http://bugs.mysql.com/28505" target="_top">Bug#28505</a>)</p></li><li><p>
        A query that grouped by the result of an expression returned a
        different result when the expression was assigned to a user
        variable.
       (<a href="http://bugs.mysql.com/28494" target="_top">Bug#28494</a>)</p></li><li><p>
        Subselects returning <code class="literal">LONG</code> values in MySQL
        versions later than 5.0.24a returned <code class="literal">LONGLONG</code>
        prior to this. The previous behavior was restored.
       (<a href="http://bugs.mysql.com/28492" target="_top">Bug#28492</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/19714" target="_top">Bug#19714</a></p></li><li><p>
        Performing <code class="literal">ALTER TABLE ... ADD PARTITION</code> or
        <code class="literal">ALTER TABLE DROP PARTITION</code> could result in
        inconsistent data, or cause the server to crash, if done
        concurrently with other accesses to the table.
       (<a href="http://bugs.mysql.com/28477" target="_top">Bug#28477</a>, <a href="http://bugs.mysql.com/28488" target="_top">Bug#28488</a>)</p></li><li><p>
        Forcing the use of an index on a <code class="literal">SELECT</code> query
        when the index had been disabled would raise an error without
        running the query. The query now executes, with a warning
        generated noting that the use of a disabled index has been
        ignored.
       (<a href="http://bugs.mysql.com/28476" target="_top">Bug#28476</a>)</p></li><li><p>
        The result of executing of a prepared statement created with
        <code class="literal">PREPARE s FROM "SELECT 1 LIMIT ?"</code>
        was not replicated correctly.
       (<a href="http://bugs.mysql.com/28464" target="_top">Bug#28464</a>)</p></li><li><p>
        The query <code class="literal">SELECT '2007-01-01' + INTERVAL
        <em class="replaceable"><code>column_name</code></em> DAY FROM
        <em class="replaceable"><code>table_name</code></em></code> caused
        <span><strong class="command">mysqld</strong></span> to fail.
       (<a href="http://bugs.mysql.com/28450" target="_top">Bug#28450</a>)</p></li><li><p>
        A server crash could happen under rare conditions such that a
        temporary table outgrew heap memory reserved for it and the
        remaining disk space was not big enough to store the table as a
        <code class="literal">MyISAM</code> table.
       (<a href="http://bugs.mysql.com/28449" target="_top">Bug#28449</a>)</p></li><li><p>
        Using <code class="literal">ALTER TABLE</code> to move columns resulted
        only in the columns being renamed. The table contents were not
        changed.
       (<a href="http://bugs.mysql.com/28427" target="_top">Bug#28427</a>)</p></li><li><p>
        The test case for <span><strong class="command">mysqldump</strong></span> failed with
        <code class="literal">bin-log</code> disabled.
       (<a href="http://bugs.mysql.com/28372" target="_top">Bug#28372</a>)</p></li><li><p>
        Attempting to <code class="literal">LOAD_FILE</code> from an empty floppy
        drive under Windows, caused the server to hang. For example, if
        you opened a connection to the server and then issued the
        command <span><strong class="command">SELECT LOAD_FILE('a:test');</strong></span>, with no
        floppy in the drive, the server was inaccessible until the modal
        pop-up dialog box was dismissed.
       (<a href="http://bugs.mysql.com/28366" target="_top">Bug#28366</a>)</p></li><li><p>
        <span><strong class="command">mysqltest</strong></span> used a too-large stack size on
        PPC/Debian Linux, causing thread-creation failure for tests that
        use many threads.
       (<a href="http://bugs.mysql.com/28333" target="_top">Bug#28333</a>)</p></li><li><p>
        When using a <code class="literal">MEMORY</code> table on Mac OS X,
        dropping a table and than creating a table with the same name
        could cause the information of the deleted table to remain
        accessible, leading to index errors.
       (<a href="http://bugs.mysql.com/28309" target="_top">Bug#28309</a>)</p></li><li><p>
        The <code class="literal">IS_UPDATABLE</code> column in the
        <code class="literal">INFORMATION_SCHEMA.VIEWS</code> table was not always
        set correctly.
       (<a href="http://bugs.mysql.com/28266" target="_top">Bug#28266</a>)</p></li><li><p>
        For <a href="functions.html#function_cast"><code class="literal">CAST()</code></a> of a
        <code class="literal">NULL</code> value with type
        <code class="literal">DECIMAL</code>, the return value was incorrectly
        initialized, producing a runtime error for binaries built using
        Visual C++ 2005.
       (<a href="http://bugs.mysql.com/28250" target="_top">Bug#28250</a>)</p></li><li><p>
        Recreating a view that already exists on the master would cause
        a replicating slave to terminate replication with a 'different
        error message on slave and master' error.
       (<a href="http://bugs.mysql.com/28244" target="_top">Bug#28244</a>)</p></li><li><p>
        When the query cache was fully used, issuing <code class="literal">RENAME
        DATABASE</code> or <code class="literal">RENAME SCHEMA</code> could
        cause the server to hang, with 100% CPU usage.
       (<a href="http://bugs.mysql.com/28211" target="_top">Bug#28211</a>)</p></li><li><p>
        The <code class="literal">Bytes_received</code> and
        <code class="literal">Bytes_sent</code> status variables could hold only
        32-bit values (not 64-bit values) on some platforms.
       (<a href="http://bugs.mysql.com/28149" target="_top">Bug#28149</a>)</p></li><li><p>
        Some valid identifiers were not parsed correctly.
       (<a href="http://bugs.mysql.com/28127" target="_top">Bug#28127</a>)</p></li><li><p>
        Storing a large number into a <code class="literal">FLOAT</code> or
        <code class="literal">DOUBLE</code> column with a fixed length could
        result in incorrect truncation of the number if the column's
        length was greater than 31.
       (<a href="http://bugs.mysql.com/28121" target="_top">Bug#28121</a>)</p></li><li><p>
        Sending debugging information from a dump of the Event Scheduler
        to <code class="literal">COM_DEBUG</code> could cause the server to crash.
       (<a href="http://bugs.mysql.com/28075" target="_top">Bug#28075</a>)</p></li><li><p>
        The <code class="literal">PARTITION_COMMENT</code> column of the
        <code class="literal">INFORMATION_SCHEMA.PARTITIONS</code> table had the
        wrong default value.
       (<a href="http://bugs.mysql.com/28007" target="_top">Bug#28007</a>)</p></li><li><p>
        <code class="literal">DECIMAL</code> values beginning with nine
        <code class="literal">9</code> digits could be incorrectly rounded.
       (<a href="http://bugs.mysql.com/27984" target="_top">Bug#27984</a>)</p></li><li><p>
        For attempts to open a non-existent table, the server should
        report <code class="literal">ER_NO_SUCH_TABLE</code> but sometimes
        reported <code class="literal">ER_TABLE_NOT_LOCKED</code>.
       (<a href="http://bugs.mysql.com/27907" target="_top">Bug#27907</a>)</p></li><li><p>
        Following an invalid call to
        <a href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a>, calling
        the function again (even if valid) crashed the server.
       (<a href="http://bugs.mysql.com/27898" target="_top">Bug#27898</a>)</p></li><li><p>
        A stored program that uses a variable name containing multibyte
        characters could fail to execute.
       (<a href="http://bugs.mysql.com/27876" target="_top">Bug#27876</a>)</p></li><li><p>
        The server made strong assumptions about the structure of the
        <code class="literal">general_log</code> and <code class="literal">slow_log</code>
        log tables: It supported only the table structure defined in the
        <code class="literal">mysql</code> database creation scripts. The server
        also allowed limited <code class="literal">ALTER TABLE</code> operations
        on the log tables, but adding an
        <code class="literal">AUTO_INCREMENT</code> column did not properly
        initialize the column, and subsequent inserts into the table
        could fail to generate correct sequence numbers. Now an
        <code class="literal">ALTER TABLE</code> statement that adds an
        <code class="literal">AUTO_INCREMENT</code> column populates the column
        correctly. In addition, when the server writes a log table row,
        it will set columns not present in the original table structure
        to their default values.
       (<a href="http://bugs.mysql.com/27857" target="_top">Bug#27857</a>)</p></li><li><p>
        <code class="literal">ON</code> conditions from <code class="literal">JOIN</code>
        expressions were ignored when checking the <code class="literal">CHECK
        OPTION</code> clause while updating a multiple-table view
        that included such a clause.
       (<a href="http://bugs.mysql.com/27827" target="_top">Bug#27827</a>)</p></li><li><p>
        On some systems, <code class="filename">udf_example.c</code> returned an
        incorrect result length. Also on some systems,
        <span><strong class="command">mysql-test-run.pl</strong></span> could not find the shared
        object built from <code class="filename">udf_example.c</code>.
       (<a href="http://bugs.mysql.com/27741" target="_top">Bug#27741</a>)</p></li><li><p>
        The modification of a table by a partially completed
        multi-column update was not recorded in the binlog, rather than
        being marked by an event and a corresponding error code.
       (<a href="http://bugs.mysql.com/27716" target="_top">Bug#27716</a>)</p></li><li><p>
        <code class="literal">SHOW ENGINES</code> and queries on
        <code class="literal">INFORMATION_SCHEMA.ENGINES</code> did not use the
        same values for representing the same storage engine states.
       (<a href="http://bugs.mysql.com/27684" target="_top">Bug#27684</a>)</p></li><li><p>
        <code class="literal">HASH</code> indexes on <code class="literal">VARCHAR</code>
        columns with binary collations did not ignore trailing spaces
        from strings before comparisons. This could result in duplicate
        records being successfully inserted into a
        <code class="literal">MEMORY</code> table with unique key constraints. A
        consequence was that internal <code class="literal">MEMORY</code> tables
        used for <code class="literal">GROUP BY</code> calculation contained
        duplicate rows that resulted in duplicate-key errors when
        converting those temporary tables to <code class="literal">MyISAM</code>,
        and that error was incorrectly reported as a <code class="literal">table is
        full</code> error.
       (<a href="http://bugs.mysql.com/27643" target="_top">Bug#27643</a>)</p></li><li><p>
        An error occurred trying to connect to
        <span><strong class="command">mysqld-debug.exe</strong></span>.
       (<a href="http://bugs.mysql.com/27597" target="_top">Bug#27597</a>)</p></li><li><p>
        A stack overrun could occur when storing
        <code class="literal">DATETIME</code> values using repeated prepared
        statements.
       (<a href="http://bugs.mysql.com/27592" target="_top">Bug#27592</a>)</p></li><li><p>
        If a stored function or trigger was killed, it aborted but no
        error was thrown, allowing the calling statement to continue
        without noticing the problem. This could lead to incorrect
        results.
       (<a href="http://bugs.mysql.com/27563" target="_top">Bug#27563</a>)</p></li><li><p>
        When <code class="literal">ALTER TABLE</code> was used to add a new
        <code class="literal">DATE</code> column with no explicit default value,
        <code class="literal">'0000-00-00'</code> was used as the default even if
        the SQL mode included the <code class="literal">NO_ZERO_DATE</code> mode
        to prohibit that value. A similar problem occurred for
        <code class="literal">DATETIME</code> columns.
       (<a href="http://bugs.mysql.com/27507" target="_top">Bug#27507</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE ... ENABLE KEYS</code> could cause
        <span><strong class="command">mysqld</strong></span> to crash when executed on a table
        containing on a <code class="literal">MyISAM</code> table containing
        billions of rows.
       (<a href="http://bugs.mysql.com/27029" target="_top">Bug#27029</a>)</p></li><li><p>
        Binary logging of prepared statements could produce
        syntactically incorrect queries in the binary log, replacing
        some parameters with variable names rather than variable values.
        This could lead to incorrect results on replication slaves.
       (<a href="http://bugs.mysql.com/26842" target="_top">Bug#26842</a>, <a href="http://bugs.mysql.com/12826" target="_top">Bug#12826</a>)</p></li><li><p>
        Binary content <code class="literal">0x00</code> in a
        <code class="literal">BLOB</code> column sometimes became <code class="literal">0x5C
        0x00</code> following a dump and reload, which could cause
        problems with data using multi-byte character sets such as
        <code class="literal">GBK</code> (Chinese). This was due to a problem with
        <code class="literal">SELECT INTO OUTFILE</code> whereby <code class="literal">LOAD
        DATA</code> later incorrectly interpreted
        <code class="literal">0x5C</code> as the second byte of a multi-byte
        sequence rather than as the <code class="literal">SOLIDUS</code>
        (“<span class="quote">\</span>”) character, used by MySQL as the escape
        character.
       (<a href="http://bugs.mysql.com/26711" target="_top">Bug#26711</a>)</p></li><li><p>
        Connections from one <span><strong class="command">mysqld</strong></span> server to another
        failed on Mac OS X, affecting replication and
        <code class="literal">FEDERATED</code> tables.
       (<a href="http://bugs.mysql.com/26664" target="_top">Bug#26664</a>)</p><p>See also <a href="http://bugs.mysql.com/29083" target="_top">Bug#29083</a></p></li><li><p>
        The server crashed when attempting to open a table having a
        <code class="literal">#mysql50#</code> prefix in the database or table
        name. The server now will not open such tables. (This prefix is
        reserved by <span><strong class="command">mysql_upgrade</strong></span> for accessing 5.0
        tables that have names not yet encoded for 5.1.)
       (<a href="http://bugs.mysql.com/26402" target="_top">Bug#26402</a>)</p></li><li><p>
        A <code class="literal">FLUSH TABLES WITH READ LOCK</code> statement
        followed by a <code class="literal">FLUSH LOGS</code> statement caused a
        deadlock if the general log or the slow query log was enabled.
       (<a href="http://bugs.mysql.com/26380" target="_top">Bug#26380</a>)</p></li><li><p>
        The query <code class="literal">SELECT /*2*/ user, host, db, info FROM
        INFORMATION_SCHEMA.PROCESSLIST WHERE (command!='Daemon' ||
        user='event_scheduler') AND (info IS NULL OR info NOT LIKE
        '%processlist%') ORDER BY INFO</code> yielded inconsistent
        results.
       (<a href="http://bugs.mysql.com/26338" target="_top">Bug#26338</a>)</p></li><li><p>
        For a given user variable <code class="literal">@v</code>, the statements
        <code class="literal">SELECT @v</code> and <code class="literal">CREATE TABLE ... AS
        SELECT @v</code> did not return the same data type.
       (<a href="http://bugs.mysql.com/26277" target="_top">Bug#26277</a>)</p></li><li><p>
        Statements within triggers ignored the value of the
        <code class="literal">low_priority_updates</code> system variable.
       (<a href="http://bugs.mysql.com/26162" target="_top">Bug#26162</a>)</p><p>See also <a href="http://bugs.mysql.com/29963" target="_top">Bug#29963</a></p></li><li><p>
        The embedded server library displayed error messages at startup
        if the <code class="literal">mysql.plugin</code> table was not present.
        This no longer occurs.
       (<a href="http://bugs.mysql.com/25800" target="_top">Bug#25800</a>)</p></li><li><p>
        On Windows, an application that called
        <a href="apis.html#mysql-thread-init" title="29.2.11.3. mysql_thread_init()"><code class="literal">mysql_thread_init()</code></a>
        but forgot to call
        <a href="apis.html#mysql-thread-end" title="29.2.11.2. mysql_thread_end()"><code class="literal">mysql_thread_end()</code></a>
        would get this error: <span class="errortext">Error in
        my_thread_global_end()</span>.
       (<a href="http://bugs.mysql.com/25621" target="_top">Bug#25621</a>)</p></li><li><p>
        Embedded <code class="literal">/* ... */</code> comments were handled
        incorrectly within the definitions of stored programs and views,
        resulting in malformed definitions (the trailing
        <code class="literal">*/</code> was stripped). This also affected binary
        log contents.
       (<a href="http://bugs.mysql.com/25411" target="_top">Bug#25411</a>, <a href="http://bugs.mysql.com/26302" target="_top">Bug#26302</a>)</p></li><li><p>
        Due to a race condition, executing <code class="literal">FLUSH
        PRIVILEGES</code> in one thread could cause brief table
        unavailability in other threads.
       (<a href="http://bugs.mysql.com/24988" target="_top">Bug#24988</a>)</p></li><li><p>
        In <code class="literal">SHOW SLAVE STATUS</code> output,
        <code class="literal">Last_Errno</code> and <code class="literal">Last_Error</code>
        were not set after <code class="literal">master_retry_count</code> errors
        had occurred. To provide additional information, the statement
        now displays four additional columns:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">Last_IO_Errno</code>: The number of the last
            error that caused the I/O thread to stop
          </p></li><li><p>
            <code class="literal">Last_IO_Error</code>: A description of the last
            error that caused the I/O thread to stop
          </p></li><li><p>
            <code class="literal">Last_SQL_Errno</code>: The number of the last
            error that caused the SQL thread to stop
          </p></li><li><p>
            <code class="literal">Last_SQL_Error</code>: A description of the last
            error that caused the SQL thread to stop
          </p></li></ul></div><p>
        Also, <code class="literal">Last_Errno</code> and
        <code class="literal">Last_Error</code> now are aliases for
        <code class="literal">Last_SQL_Errno</code> and
        <code class="literal">Last_SQL_Error</code>.
       (<a href="http://bugs.mysql.com/24954" target="_top">Bug#24954</a>)</p></li><li><p>
        A too-long <code class="literal">shared-memory-base-name</code> value
        could cause a buffer overflow and crash the server or clients.
       (<a href="http://bugs.mysql.com/24924" target="_top">Bug#24924</a>)</p></li><li><p>
        When <span><strong class="command">mysqld</strong></span> was run as a Windows service,
        shared memory objects were not created in the global namespace
        and could not be used by clients to connect.
       (<a href="http://bugs.mysql.com/24731" target="_top">Bug#24731</a>)</p></li><li><p>
        On some Linux distributions where LinuxThreads and NPTL
        <code class="literal">glibc</code> versions both are available, statically
        built binaries can crash because the linker defaults to
        LinuxThreads when linking statically, but calls to external
        libraries (such as <code class="literal">libnss</code>) are resolved to
        NPTL versions. This cannot be worked around in the code, so
        instead if a crash occurs on such a binary/OS combination, print
        an error message that provides advice about how to fix the
        problem.
       (<a href="http://bugs.mysql.com/24611" target="_top">Bug#24611</a>)</p></li><li><p>
        A number of <code class="literal">SHOW</code> statements caused
        <span><strong class="command">mysqld</strong></span> to crash on recent versions of
        Solaris. This issue is believed to be present only in MySQL
        5.1.12 and later.
       (<a href="http://bugs.mysql.com/23810" target="_top">Bug#23810</a>)</p></li><li><p>
        The server deducted some bytes from the
        <code class="literal">key_cache_block_size</code> option value and reduced
        it to the next lower 512 byte boundary. The resulting block size
        was not a power of two. Setting the
        <code class="literal">key_cache_block_size</code> system variable to a
        value that is not a power of two resulted in
        <code class="literal">MyISAM</code> table corruption.
       (<a href="http://bugs.mysql.com/23068" target="_top">Bug#23068</a>, <a href="http://bugs.mysql.com/28478" target="_top">Bug#28478</a>, <a href="http://bugs.mysql.com/25853" target="_top">Bug#25853</a>)</p></li><li><p>
        Conversion errors could occur when constructing the condition
        for an <code class="literal">IN</code> predicate. The predicate was
        treated as if the affected column contains
        <code class="literal">NULL</code>, but if the <code class="literal">IN</code>
        predicate is inside <code class="literal">NOT</code>, incorrect results
        could be returned.
       (<a href="http://bugs.mysql.com/22855" target="_top">Bug#22855</a>)</p></li><li><p>
        When using transactions and replication, shutting down the
        master in the middle of a transaction would cause all slaves to
        stop replicating.
       (<a href="http://bugs.mysql.com/22725" target="_top">Bug#22725</a>)</p></li><li><p>
        Linux binaries were unable to dump core after executing a
        <code class="literal">setuid()</code> call.
       (<a href="http://bugs.mysql.com/21723" target="_top">Bug#21723</a>)</p></li><li><p>
        Stack overflow caused server crashes.
       (<a href="http://bugs.mysql.com/21476" target="_top">Bug#21476</a>)</p></li><li><p>
        Using <code class="literal">CREATE TABLE LIKE ...</code> would raise an
        assertion when replicated to a slave.
       (<a href="http://bugs.mysql.com/18950" target="_top">Bug#18950</a>)</p></li><li><p>
        The server was ignoring the return value of the
        <code class="literal">parse()</code> function for full-text parser
        plugins.
       (<a href="http://bugs.mysql.com/18839" target="_top">Bug#18839</a>)</p></li><li><p>
        Granting access privileges to an individual table where the
        database or table name contained an underscore would fail.
       (<a href="http://bugs.mysql.com/18660" target="_top">Bug#18660</a>)</p></li><li><p>
        The <code class="literal">-lmtmalloc</code> library was removed from the
        output of <span><strong class="command">mysql_config</strong></span> on Solaris, as it
        caused problems when building <code class="literal">DBD::mysql</code> (and
        possibly other applications) on that platform that tried to use
        <span><strong class="command">dlopen()</strong></span> to access the client library.
       (<a href="http://bugs.mysql.com/18322" target="_top">Bug#18322</a>)</p></li><li><p>
        The <span><strong class="command">check-cpu</strong></span> script failed to detect AMD64
        Turion processors correctly.
       (<a href="http://bugs.mysql.com/17707" target="_top">Bug#17707</a>)</p></li><li><p>
        When using <span><strong class="command">mysqlbinlog</strong></span> with
        <code class="literal">--read-from-remote-server</code> to load the data
        direct from a remote MySQL server would cause a core dump when
        dumping certain binary log events.
       (<a href="http://bugs.mysql.com/17654" target="_top">Bug#17654</a>)</p></li><li><p>
        Trying to shut down the server following a failed <code class="literal">LOAD
        DATA INFILE</code> caused <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/17233" target="_top">Bug#17233</a>)</p></li><li><p>
        The omission of leading zeros in dates could lead to erroneous
        results when these were compared with the output of certain date
        and time functions.
       (<a href="http://bugs.mysql.com/16377" target="_top">Bug#16377</a>)</p></li><li><p>
        Using up-arrow for command-line recall in
        <span><strong class="command">mysql</strong></span> could cause a segmentation fault.
       (<a href="http://bugs.mysql.com/10218" target="_top">Bug#10218</a>)</p></li><li><p>
        The result for <a href="functions.html#function_cast"><code class="literal">CAST()</code></a> when
        casting a value to <code class="literal">UNSIGNED</code> was limited to
        the maximum signed <code class="literal">BIGINT</code> value
        (9223372036854775808), rather than the maximum unsigned value
        (18446744073709551615).
       (<a href="http://bugs.mysql.com/8663" target="_top">Bug#8663</a>)</p></li><li><p>
        The internal functions for table preparation, creation, and
        alteration were not re-execution friendly, causing problems in
        code that: repeatedly altered a table; repeatedly created and
        dropped a table; opened and closed a cursor on a table, altered
        the table, and then reopened the cursor; used <code class="literal">ALTER
        TABLE</code> to change a table's current
        <code class="literal">AUTO_INCREMENT</code> value; created indexes on
        <code class="literal">utf8</code> columns.
      </p><p>
        Re-execution of <code class="literal">CREATE DATABASE</code>,
        <code class="literal">CREATE TABLE</code>, and <code class="literal">ALTER
        TABLE</code> statements in stored routines or as prepared
        statements also caused incorrect results or crashes.
       (<a href="http://bugs.mysql.com/4968" target="_top">Bug#4968</a>, <a href="http://bugs.mysql.com/6895" target="_top">Bug#6895</a>, <a href="http://bugs.mysql.com/19182" target="_top">Bug#19182</a>, <a href="http://bugs.mysql.com/19733" target="_top">Bug#19733</a>, <a href="http://bugs.mysql.com/22060" target="_top">Bug#22060</a>, <a href="http://bugs.mysql.com/24879" target="_top">Bug#24879</a>)</p></li><li><p>
        <code class="literal">Last_IO_Error</code>: A description of the last
        error that caused the I/O thread to stop
      </p></li><li><p>
        <code class="literal">Last_IO_Errno</code>: The number of the last error
        that caused the I/O thread to stop
      </p></li><li><p>
        <code class="literal">Last_SQL_Error</code>: A description of the last
        error that caused the SQL thread to stop
      </p></li><li><p>
        <code class="literal">Last_SQL_Errno</code>: The number of the last error
        that caused the SQL thread to stop
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-19"></a>C.1.11. Changes in  MySQL 5.1.19 (25 May 2007)</h3></div></div></div><p class="release-level">
      This is a new Beta development release, fixing recently discovered
      bugs.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p class="release-non-production">
        This Beta release, as any other pre-production release, should
        not be installed on <span class="emphasis"><em>production</em></span> level
        systems or systems with critical data. It is good practice to
        back up your data before installing any new version of software.
        Although MySQL has worked very hard to ensure a high level of
        quality, protect your data by making a backup as you would for
        any software beta release. Please refer to our bug database at
        <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a> for more details about the
        individual bugs fixed in this version.
      </p></div><p>This section documents all changes and bug fixes that have been applied since the last official MySQL release. If you would like to receive more fine-grained and personalized <span class="emphasis"><em>update alerts</em></span> about fixes that are relevant to the version and features you use, please consider subscribing to <span class="emphasis"><em>MySQL Enterprise</em></span> (a commercial MySQL offering). For more details please see <a href="http://www.mysql.com/products/enterprise" target="_top">http://www.mysql.com/products/enterprise</a>.</p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        <code class="literal">INSERT DELAYED</code> is now downgraded to a normal
        <code class="literal">INSERT</code> if the statement uses functions that
        access tables or triggers, or that is called from a function or
        a trigger.
      </p><p>
        This was done to resolve the following interrelated issues:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              The server could abort or deadlock for <code class="literal">INSERT
              DELAYED</code> statements for which another insert was
              performed implicitly (for example, via a stored function
              that inserted a row).
            </p></li><li><p>
              A trigger using an <code class="literal">INSERT DELAYED</code>
              caused the error <span class="errortext">INSERT DELAYED can't be used
              with table ... because it is locked with LOCK
              TABLES</span> although the target table was not
              actually locked.
            </p></li><li><p>
              <code class="literal">INSERT DELAYED</code> into a table with a
              <code class="literal">BEFORE INSERT</code> or <code class="literal">AFTER
              INSERT</code> trigger gave an incorrect
              <code class="literal">NEW</code> pseudocolumn value and caused the
              server to deadlock or abort.
            </p></li></ul></div><p>
       (<a href="http://bugs.mysql.com/21483" target="_top">Bug#21483</a>)</p><p>See also <a href="http://bugs.mysql.com/20497" target="_top">Bug#20497</a>, <a href="http://bugs.mysql.com/21714" target="_top">Bug#21714</a></p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Formerly, restoring a cluster backup made on a MySQL 5.0 Cluster
        to a 5.1 cluster using a 5.1 version of
        <span><strong class="command">ndb_restore</strong></span> did not resize
        <code class="literal">VARCHAR</code> columns as might be expected; now,
        the default behavior of <span><strong class="command">ndb_restore</strong></span> in such
        cases is to resize the <code class="literal">VARCHAR</code> columns. This
        changed default behavior can be overridden using the
        <code class="option">--no-upgrade</code> (or <code class="option">-u</code>) option
        when invoking <span><strong class="command">ndb_restore</strong></span>.
       (<a href="http://bugs.mysql.com/22240" target="_top">Bug#22240</a>)</p></li><li><p>
        The <code class="literal">BLACKHOLE</code> storage engine now supports
        <code class="literal">INSERT DELAYED</code>. Previously, <code class="literal">INSERT
        DELAYED</code> statements for <code class="literal">BLACKHOLE</code>
        tables were not supported, and caused the server to crash.
       (<a href="http://bugs.mysql.com/27998" target="_top">Bug#27998</a>)</p></li><li><p>
        A new status variable, <code class="literal">Com_call_procedure</code>,
        indicates the number of calls to stored procedures.
       (<a href="http://bugs.mysql.com/27994" target="_top">Bug#27994</a>)</p></li><li><p>
        The <code class="literal">BLACKHOLE</code> storage engine now supports
        <code class="literal">LOCK TABLES</code> and <code class="literal">UNLOCK
        TABLES</code>.
       (<a href="http://bugs.mysql.com/26241" target="_top">Bug#26241</a>)</p></li><li><p>
        <code class="literal">GLOBAL_STATUS</code>
      </p></li><li><p>
        <code class="literal">GLOBAL_VARIABLES</code>
      </p></li><li><p>
        <code class="literal">SESSION_VARIABLES</code>
      </p></li><li><p>
        The data type used for the <code class="literal">VARIABLE_VALUE</code>
        column of the following INFORMATION_SCHEMA tables has been
        changed to <code class="literal">VARCHAR</code>:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">GLOBAL_STATUS</code>
            </p></li><li><p>
              <code class="literal">SESSION_STATUS</code>
            </p></li><li><p>
              <code class="literal">GLOBAL_VARIABLES</code>
            </p></li><li><p>
              <code class="literal">SESSION_VARIABLES</code>
            </p></li></ul></div><p>
        For more information, see
        <a href="information-schema.html#status-table" title="27.24. The INFORMATION_SCHEMA GLOBAL_STATUS and
      SESSION_STATUS Tables">Section 27.24, “The <code class="literal">INFORMATION_SCHEMA GLOBAL_STATUS</code> and
      <code class="literal">SESSION_STATUS</code> Tables”</a>,
        <a href="information-schema.html#variables-table" title="27.25. The INFORMATION_SCHEMA GLOBAL_VARIABLES and
      SESSION_VARIABLES Tables">Section 27.25, “The <code class="literal">INFORMATION_SCHEMA GLOBAL_VARIABLES</code> and
      <code class="literal">SESSION_VARIABLES</code> Tables”</a>.
      </p><p>See also <a href="http://bugs.mysql.com/26994" target="_top">Bug#26994</a></p></li><li><p>
        <code class="literal">SESSION_STATUS</code>
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        UDFs are supposed to be loadable only from the plugin directory,
        but this restriction was not being enforced.
       (<a href="http://bugs.mysql.com/28341" target="_top">Bug#28341</a>)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        Use of a view could allow a user to gain update privileges for
        tables in other databases.
       (<a href="http://bugs.mysql.com/27878" target="_top">Bug#27878</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-3782" target="_top">CVE-2007-3782</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When an API node sent more than 1024 signals in a single batch,
        <code class="literal">NDB</code> would process only the first 1024 of
        these, and then hang.
       (<a href="http://bugs.mysql.com/28443" target="_top">Bug#28443</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A delay in obtaining <code class="literal">AUTO_INCREMENT</code> IDs could
        lead to excess temporary errors.
       (<a href="http://bugs.mysql.com/28410" target="_top">Bug#28410</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Local checkpoint files relating to dropped
        <code class="literal">NDB</code> tables were not removed.
       (<a href="http://bugs.mysql.com/28348" target="_top">Bug#28348</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Multiple operations involving deletes followed by reads were not
        handled correctly.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This issue could also affect MySQL Cluster Replication.
        </p></div><p>(<a href="http://bugs.mysql.com/28276" target="_top">Bug#28276</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Repeated insertion of data generated by
        <span><strong class="command">mysqldump</strong></span> into <code class="literal">NDB</code> tables
        could eventually lead to failure of the cluster.
       (<a href="http://bugs.mysql.com/27437" target="_top">Bug#27437</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Restarting a data node caused SQL nodes to log repeatedly and
        unnecessarily the status of the event buffer.
      </p><p>
        (This issue was known to occur in MySQL 5.1.16 and later only.)
       (<a href="http://bugs.mysql.com/27292" target="_top">Bug#27292</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">ndb_mgmd</strong></span> failed silently when the cluster
        configuration file contained invalid <code class="literal">[tcp]</code>
        entries.
       (<a href="http://bugs.mysql.com/27207" target="_top">Bug#27207</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">ndb_connectstring</code> did not appear in the
        output of <code class="literal">SHOW VARIABLES</code>.
       (<a href="http://bugs.mysql.com/26675" target="_top">Bug#26675</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A failure to release internal resources following an error could
        lead to problems with single user mode.
       (<a href="http://bugs.mysql.com/25818" target="_top">Bug#25818</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        DDL operations were not supported on a partially started
        cluster.
       (<a href="http://bugs.mysql.com/24631" target="_top">Bug#24631</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Extremely large inserts into Disk Data tables could lead to data
        node failure in some circumstances.
       (<a href="http://bugs.mysql.com/27942" target="_top">Bug#27942</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        In a multi-operation transaction, a delete operation followed by
        the insertion of an implicit <code class="literal">NULL</code> failed to
        overwrite an existing value.
       (<a href="http://bugs.mysql.com/20535" target="_top">Bug#20535</a>)</p></li><li><p>
        Some <code class="literal">ALTER TABLE</code> statements that worked in
        MySQL 5.0 did not work in 5.1.
       (<a href="http://bugs.mysql.com/28415" target="_top">Bug#28415</a>)</p></li><li><p>
        <span><strong class="command">mysql_upgrade</strong></span> failed if certain SQL modes
        were set. Now it sets the mode itself to avoid this problem.
       (<a href="http://bugs.mysql.com/28401" target="_top">Bug#28401</a>)</p></li><li><p>
        A query with a <code class="literal">NOT IN</code> subquery predicate
        could cause a crash when the left operand of the predicate
        evaluated to <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/28375" target="_top">Bug#28375</a>)</p></li><li><p>
        A buffer overflow could occur when using
        <code class="literal">DECIMAL</code> columns on Windows operating systems.
       (<a href="http://bugs.mysql.com/28361" target="_top">Bug#28361</a>)</p></li><li><p>
        <code class="literal">libmysql.dll</code> could not be dynamically loaded
        on Windows.
       (<a href="http://bugs.mysql.com/28358" target="_top">Bug#28358</a>)</p></li><li><p>
        Grouping queries with correlated subqueries in
        <code class="literal">WHERE</code> conditions could produce incorrect
        results.
       (<a href="http://bugs.mysql.com/28337" target="_top">Bug#28337</a>)</p></li><li><p>
        <code class="literal">EXPLAIN</code> for a query on an empty table
        immediately after its creation could result in a server crash.
       (<a href="http://bugs.mysql.com/28272" target="_top">Bug#28272</a>)</p></li><li><p>
        Comparing a <code class="literal">DATETIME</code> column value with a user
        variable yielded incorrect results.
       (<a href="http://bugs.mysql.com/28261" target="_top">Bug#28261</a>)</p></li><li><p>
        Portability problems caused by use of <code class="literal">isinf()</code>
        were corrected.
       (<a href="http://bugs.mysql.com/28240" target="_top">Bug#28240</a>)</p></li><li><p>
        When dumping procedures, <span><strong class="command">mysqldump
        <code class="option">--compact</code> </strong></span> generated output that
        restored the session variable <code class="literal">SQL_MODE</code>
        without first capturing it. When dumping routines,
        <span><strong class="command">mysqldump <code class="option">--compact</code> </strong></span> neither
        set nor retrieved the value of <code class="literal">SQL_MODE</code>.
       (<a href="http://bugs.mysql.com/28223" target="_top">Bug#28223</a>)</p></li><li><p>
        Comparison of the string value of a date showed as unequal to
        <a href="functions.html#function_curtime"><code class="literal">CURTIME()</code></a>. Similar behavior was
        exhibited for <code class="literal">DATETIME</code> values.
       (<a href="http://bugs.mysql.com/28208" target="_top">Bug#28208</a>)</p></li><li><p>
        For <code class="literal">InnoDB</code>, in some rare cases the optimizer
        preferred a more expensive <code class="literal">ref</code> access to a
        less expensive range access.
       (<a href="http://bugs.mysql.com/28189" target="_top">Bug#28189</a>)</p></li><li><p>
        Comparisons of <code class="literal">DATE</code> or
        <code class="literal">DATETIME</code> values for the
        <a href="functions.html#function_in"><code class="literal">IN()</code></a> function could
        yield incorrect results.
       (<a href="http://bugs.mysql.com/28133" target="_top">Bug#28133</a>)</p></li><li><p>
        It was not possible to use the value
        <code class="literal">–9223372036854775808</code> (that is,
        <code class="literal">–MAXVALUE + 1</code>) when specifying a
        <code class="literal">LIST</code> partition.
       (<a href="http://bugs.mysql.com/28005" target="_top">Bug#28005</a>)</p></li><li><p>
        The server could hang for <code class="literal">INSERT IGNORE ... ON
        DUPLICATE KEY UPDATE</code> if an update failed.
       (<a href="http://bugs.mysql.com/28000" target="_top">Bug#28000</a>)</p></li><li><p>
        <a href="functions.html#function_cast"><code class="literal">CAST()</code></a> to
        <code class="literal">DECIMAL</code> did not check for overflow.
       (<a href="http://bugs.mysql.com/27957" target="_top">Bug#27957</a>)</p></li><li><p>
        The second execution of a prepared statement from a
        <code class="literal">UNION</code> query with <code class="literal">ORDER BY
        RAND()</code> caused the server to crash. This problem could
        also occur when invoking a stored procedure containing such a
        query.
       (<a href="http://bugs.mysql.com/27937" target="_top">Bug#27937</a>)</p></li><li><p>
        Views ignored precision for
        <a href="functions.html#function_cast"><code class="literal">CAST()</code></a> operations.
       (<a href="http://bugs.mysql.com/27921" target="_top">Bug#27921</a>)</p></li><li><p>
        Changes to some system variables should invalidate statements in
        the query cache, but invalidation did not happen.
       (<a href="http://bugs.mysql.com/27792" target="_top">Bug#27792</a>)</p></li><li><p>
        <code class="literal">LOAD DATA</code> did not use
        <code class="literal">CURRENT_TIMESTAMP</code> as the default value for a
        <code class="literal">TIMESTAMP</code> column for which no value was
        provided.
       (<a href="http://bugs.mysql.com/27670" target="_top">Bug#27670</a>)</p></li><li><p>
        Selecting <a href="functions.html#function_min"><code class="literal">MIN()</code></a> on an indexed
        column that contained only <code class="literal">NULL</code> values caused
        <code class="literal">NULL</code> to be returned for other result columns.
       (<a href="http://bugs.mysql.com/27573" target="_top">Bug#27573</a>)</p></li><li><p>
        Using a <code class="literal">TEXT</code> local variable in a stored
        routine in an expression such as <code class="literal">SET
        <em class="replaceable"><code>var</code></em> =
        SUBSTRING(<em class="replaceable"><code>var</code></em>, 3)</code> produced
        an incorrect result.
       (<a href="http://bugs.mysql.com/27415" target="_top">Bug#27415</a>)</p></li><li><p>
        The error message for error number <code class="literal">137</code> did
        not report which database/table combination reported the
        problem.
       (<a href="http://bugs.mysql.com/27173" target="_top">Bug#27173</a>)</p></li><li><p>
        A large filesort could result in a division by zero error and a
        server crash.
       (<a href="http://bugs.mysql.com/27119" target="_top">Bug#27119</a>)</p></li><li><p>
        Some <code class="literal">InnoDB</code> variables were missing from the
        output of <span><strong class="command">mysqld --verbose --help</strong></span>.
       (<a href="http://bugs.mysql.com/26987" target="_top">Bug#26987</a>)</p></li><li><p>
        Flow control optimization in stored routines could cause
        exception handlers to never return or execute incorrect logic.
       (<a href="http://bugs.mysql.com/26977" target="_top">Bug#26977</a>)</p></li><li><p>
        Some test suite files were missing from some MySQL-test
        packages.
       (<a href="http://bugs.mysql.com/26609" target="_top">Bug#26609</a>)</p></li><li><p>
        Running <code class="literal">CHECK TABLE</code> concurrently with a
        <code class="literal">SELECT</code>, <code class="literal">INSERT</code> or other
        statement on Windows could corrupt a MyISAM table.
       (<a href="http://bugs.mysql.com/25712" target="_top">Bug#25712</a>)</p></li><li><p>
        Concurrent execution of <code class="literal">CREATE TABLE ...
        SELECT</code> and other statements involving the target table
        suffered from various race conditions, some of which might have
        led to deadlocks.
       (<a href="http://bugs.mysql.com/24738" target="_top">Bug#24738</a>)</p></li><li><p>
        An attempt to execute <code class="literal">CREATE TABLE ... SELECT</code>
        when a temporary table with the same name already existed led to
        the insertion of data into the temporary table and creation of
        an empty non-temporary table.
       (<a href="http://bugs.mysql.com/24508" target="_top">Bug#24508</a>)</p></li><li><p>
        A statement of the form <code class="literal">CREATE TABLE IF NOT EXISTS t1
        SELECT f1() AS i</code> failed with a deadlock error if the
        stored function <code class="literal">f1()</code> referred to a table with
        the same name as the to-be-created table. Now it correctly
        produces a message that the table already exists.
       (<a href="http://bugs.mysql.com/22427" target="_top">Bug#22427</a>)</p></li><li><p>
        Quoted labels in stored routines were mishandled, rendering the
        routines unusable.
       (<a href="http://bugs.mysql.com/21513" target="_top">Bug#21513</a>)</p></li><li><p>
        <a href="functions.html#function_curdate"><code class="literal">CURDATE()</code></a> is less than
        <a href="functions.html#function_now"><code class="literal">NOW()</code></a>, either when
        comparing <a href="functions.html#function_curdate"><code class="literal">CURDATE()</code></a>
        directly (<code class="literal">CURDATE() &lt; NOW()</code> is true) or
        when casting
        <a href="functions.html#function_curdate"><code class="literal">CURDATE()</code></a> to
        <code class="literal">DATE</code> (<code class="literal">CAST(CURDATE() AS DATE) &lt;
        NOW()</code> is true). However, storing
        <a href="functions.html#function_curdate"><code class="literal">CURDATE()</code></a> in a
        <code class="literal">DATE</code> column and comparing <code class="literal">
        <em class="replaceable"><code>col_name</code></em> &lt; NOW()</code>
        incorrectly yielded false. This is fixed by comparing a
        <code class="literal">DATE</code> column as <code class="literal">DATETIME</code>
        for comparisons to a <code class="literal">DATETIME</code> constant.
       (<a href="http://bugs.mysql.com/21103" target="_top">Bug#21103</a>)</p></li><li><p>
        <code class="literal">CREATE TABLE IF NOT EXISTS ... SELECT</code> caused
        a server crash if the target table already existed and had a
        <code class="literal">BEFORE INSERT</code> trigger.
       (<a href="http://bugs.mysql.com/20903" target="_top">Bug#20903</a>)</p></li><li><p>
        Deadlock occurred for attempts to execute <code class="literal">CREATE TABLE
        IF NOT EXISTS ... SELECT</code> when <code class="literal">LOCK
        TABLES</code> had been used to acquire a read lock on the
        target table.
       (<a href="http://bugs.mysql.com/20662" target="_top">Bug#20662</a>, <a href="http://bugs.mysql.com/15522" target="_top">Bug#15522</a>)</p></li><li><p>
        For dates with 4-digit year parts less than 200, an incorrect
        implicit conversion to add a century was applied for date
        arithmetic performed with
        <a href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a>,
        <a href="functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a>, <code class="literal">+
        INTERVAL</code>, and <code class="literal">- INTERVAL</code>. (For
        example, <a href="functions.html#function_date-add"><code class="literal">DATE_ADD('0050-01-01
        00:00:00', INTERVAL 0 SECOND)</code></a> became
        <code class="literal">'2050-01-01 00:00:00'</code>.)
       (<a href="http://bugs.mysql.com/18997" target="_top">Bug#18997</a>)</p></li><li><p>
        Changing the size of a key buffer that is under heavy use could
        cause a server crash. The fix partially removes the limitation
        that <code class="literal">LOAD INDEX INTO CACHE</code> fails unless all
        indexes in a table have the same block size. Now the statement
        fails only if <code class="literal">IGNORE LEAVES</code> is specified.
       (<a href="http://bugs.mysql.com/17332" target="_top">Bug#17332</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-18"></a>C.1.12. Changes in  MySQL 5.1.18 (08 May 2007)</h3></div></div></div><p class="release-level">
      This is a new Beta development release, fixing recently discovered
      bugs.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p class="release-non-production">
        This Beta release, as any other pre-production release, should
        not be installed on <span class="emphasis"><em>production</em></span> level
        systems or systems with critical data. It is good practice to
        back up your data before installing any new version of software.
        Although MySQL has worked very hard to ensure a high level of
        quality, protect your data by making a backup as you would for
        any software beta release. Please refer to our bug database at
        <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a> for more details about the
        individual bugs fixed in this version.
      </p></div><p>This section documents all changes and bug fixes that have been applied since the last official MySQL release. If you would like to receive more fine-grained and personalized <span class="emphasis"><em>update alerts</em></span> about fixes that are relevant to the version and features you use, please consider subscribing to <span class="emphasis"><em>MySQL Enterprise</em></span> (a commercial MySQL offering). For more details please see <a href="http://www.mysql.com/products/enterprise" target="_top">http://www.mysql.com/products/enterprise</a>.</p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        The internal specifications for columns in
        <code class="literal">NDB</code> tables has changed to allow compatibility
        with future MySQL Cluster releases that are expected to
        implement online adding and dropping of columns. This change is
        not backward compatible with earlier versions of MySQL Cluster.
      </p><p>
        See
        <a href="mysql-cluster.html#mysql-cluster-upgrade-downgrade-compatibility-online-add-drop-column">the
        related note</a> in
        <a href="mysql-cluster.html#mysql-cluster-upgrade-downgrade-compatibility" title="20.5.2. MySQL Cluster 5.1 and MySQL Cluster NDB 6.x Upgrade and Downgrade
      Compatibility">Section 20.5.2, “MySQL Cluster 5.1 and MySQL Cluster NDB 6.x Upgrade and Downgrade
      Compatibility”</a>,
        for important information prior to upgrading a MySQL Cluster to
        MySQL 5.1.18 or later from MySQL 5.1.17 or earlier.
      </p><p>See also <a href="http://bugs.mysql.com/28205" target="_top">Bug#28205</a></p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: <span class="bold"><strong>Incompatible Change</strong></span>: 
        The definition of the <code class="literal">mysql.ndb_apply_status</code>
        table has changed such that an online upgrade is not possible
        from MySQL 5.1.17 or earlier for a replication slave cluster;
        you must shut down all SQL nodes as part of the upgrade
        procedure. See
        <a href="mysql-cluster.html#mysql-cluster-upgrade-downgrade-compatibility" title="20.5.2. MySQL Cluster 5.1 and MySQL Cluster NDB 6.x Upgrade and Downgrade
      Compatibility">Section 20.5.2, “MySQL Cluster 5.1 and MySQL Cluster NDB 6.x Upgrade and Downgrade
      Compatibility”</a>
        before upgrading for details.
      </p><p>
        For more information about the changes to
        <code class="literal">mysql.ndb_apply_status</code> see
        <a href="mysql-cluster.html#mysql-cluster-replication-schema" title="20.11.4. Cluster Replication Schema and Tables">Section 20.11.4, “Cluster Replication Schema and Tables”</a>.
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Prior to this release, when <code class="literal">DATE</code> values were
        compared with <code class="literal">DATETIME</code> values, the time
        portion of the <code class="literal">DATETIME</code> value was ignored, or
        the comparison could be performed as a string compare. Now a
        <code class="literal">DATE</code> value is coerced to the
        <code class="literal">DATETIME</code> type by adding the time portion as
        <code class="literal">00:00:00</code>. To mimic the old behavior, use the
        <a href="functions.html#function_cast"><code class="literal">CAST()</code></a> function as shown in this
        example: <code class="literal">SELECT <em class="replaceable"><code>date_col</code></em> =
        CAST(NOW() AS DATE) FROM
        <em class="replaceable"><code>table</code></em>;</code>.
       (<a href="http://bugs.mysql.com/28929" target="_top">Bug#28929</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The <code class="literal">INFORMATION_SCHEMA.EVENTS</code> and
        <code class="literal">mysql.event</code> tables have been changed to
        facilitate replication of events. When upgrading to MySQL
        5.1.18, you must run <span><strong class="command">mysql_upgrade</strong></span> prior to
        working with events. Until you have done so, any statement
        relating to the Event Scheduler or these tables (including
        <code class="literal">SHOW EVENTS</code>) will fail with the errors
        <span class="errortext">Expected field status at position 12 to have type
        enum ('ENABLED','SLAVESIDE_DISABLED','DISABLED'), found
        enum('ENABLED','DISABLED')</span> and <span class="errortext">Table
        mysql.event is damaged. Can not open</span>.
      </p><p>
        These changes were made as part of fixes for the following bugs:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              The effects of scheduled events were not replicated (that
              is, binary logging of scheduled events did not work).
            </p></li><li><p>
              Effects of scheduled events on a replication master were
              both replicated and executed on the slave, causing double
              execution of events.
            </p></li><li><p>
              <code class="literal">CREATE FUNCTION</code> statements and their
              effects were not replicated correctly.
            </p></li></ul></div><p>
      </p><p>
        For more information, see
        <a href="replication.html#replication-features-invoked" title="19.3.1.5. Replication of Invoked Features">Section 19.3.1.5, “Replication of Invoked Features”</a>.
       (<a href="http://bugs.mysql.com/17857" target="_top">Bug#17857</a>, <a href="http://bugs.mysql.com/16421" target="_top">Bug#16421</a>, <a href="http://bugs.mysql.com/20384" target="_top">Bug#20384</a>, <a href="http://bugs.mysql.com/17671" target="_top">Bug#17671</a>)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        When upgrading to MySQL 5.1.18 or later from a previous MySQL
        version and scheduled events have been used, the upgrade
        utilities do not accomodate changes in event-related system
        tables. As a workaround, you can dump events before the upgrade,
        then restore them from the dump afterwards. This issue was fixed
        in MySQL 5.1.20.
      </p><p>See also <a href="http://bugs.mysql.com/28521" target="_top">Bug#28521</a></p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The behavior of the <span><strong class="command">ndb_restore</strong></span> utility has
        been changed as follows:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              It is now possible to restore selected databases or tables
              using <span><strong class="command">ndb_restore</strong></span>.
            </p></li><li><p>
              Several options have been added for use with
              <span><strong class="command">ndb_restore <code class="option">--print_data</code>
              </strong></span> to facilitate the creation of structured data
              dump files. These options can be used to make dumps made
              using <span><strong class="command">ndb_restore</strong></span> more like those
              produced by <span><strong class="command">mysqldump</strong></span>.
            </p></li></ul></div><p>
        For details of these changes, see
        <a href="mysql-cluster.html#mysql-cluster-restore" title="20.9.3. ndb_restore — Restore a Cluster Backup">Section 20.9.3, “<span><strong class="command">ndb_restore</strong></span> — Restore a Cluster Backup”</a>.
       (<a href="http://bugs.mysql.com/26899" target="_top">Bug#26899</a>, <a href="http://bugs.mysql.com/26900" target="_top">Bug#26900</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The following changes were made in the
        <span><strong class="command">ndb_size.pl</strong></span> utility:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              When <span><strong class="command">ndb_size.pl</strong></span> calculates a value for
              a given configuration parameter that is less than the
              default value, it now suggests the default value instead.
            </p></li><li><p>
              The dependency on <code class="literal">HTML::Template</code> was
              removed, with the result that the file
              <code class="filename">ndb_size.tmpl</code> is no longer needed or
              included.
            </p></li></ul></div><p>
       (<a href="http://bugs.mysql.com/24227" target="_top">Bug#24227</a>, <a href="http://bugs.mysql.com/24228" target="_top">Bug#24228</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Some circular replication setups are now supported for MySQL
        Cluster. See <a href="mysql-cluster.html#mysql-cluster-replication-issues" title="20.11.3. Known Issues in MySQL Cluster Replication">Section 20.11.3, “Known Issues in MySQL Cluster Replication”</a>,
        for detailed information.
       (<a href="http://bugs.mysql.com/17095" target="_top">Bug#17095</a>, <a href="http://bugs.mysql.com/25688" target="_top">Bug#25688</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        The MGM API now supports explicit setting of network timeouts
        using the <code class="literal">ndb_mgm_set_timeout()</code> function. A
        utility function
        <code class="literal">ndb_mgm_number_of_mgmd_in_connect_string()</code> is
        also implemented to facilitate calculation of timeouts based on
        the number of management servers in the cluster.
      </p><p>
        For more information, see <a href="http://dev.mysql.com/doc/ndbapi/en/ndb-mgm-set-timeout.html" target="_top"><code class="literal">ndb_mgm_set_timeout()</code></a>,
        and <a href="http://dev.mysql.com/doc/ndbapi/en/ndb-mgm-number-of-mgmd-in-connect-string.html" target="_top"><code class="literal">ndb_mgm_number_of_mgmd_in_connect_string()</code></a>.
      </p></li><li><p>
        <span><strong class="command">mysqld_multi</strong></span> now understands the
        <code class="option">--no-defaults</code>,
        <code class="option">--defaults-file</code>, and
        <code class="literal">--defaults-extra-file</code> options. The
        <code class="option">--config-file</code> option is deprecated; if given,
        it is treated like <code class="option">--defaults-extra-file</code>.
       (<a href="http://bugs.mysql.com/27390" target="_top">Bug#27390</a>)</p></li><li><p>
        If a set function <em class="replaceable"><code>S</code></em> with an outer
        reference <code class="literal">
        <em class="replaceable"><code>S</code></em>(<em class="replaceable"><code>outer_ref</code></em>)</code>
        cannot be aggregated in the outer query against which the outer
        reference has been resolved, MySQL interprets <code class="literal">
        <em class="replaceable"><code>S</code></em>(<em class="replaceable"><code>outer_ref</code></em>)</code>
        the same way that it would interpret <code class="literal">
        <em class="replaceable"><code>S</code></em>(<em class="replaceable"><code>const</code></em>)</code>.
        However, standard SQL requires throwing an error in this
        situation. An error now is thrown for such queries if the
        <code class="literal">ANSI</code> SQL mode is enabled.
       (<a href="http://bugs.mysql.com/27348" target="_top">Bug#27348</a>)</p></li><li><p>
        Several additional data types are supported for columns in
        <code class="literal">INFORMATION_SCHEMA</code> tables:
        <code class="literal">DATE</code>, <code class="literal">TIME</code>,
        <code class="literal">BLOB</code>, <code class="literal">FLOAT</code>, and all
        integer types.
       (<a href="http://bugs.mysql.com/27047" target="_top">Bug#27047</a>)</p></li><li><p>
        The output of <span><strong class="command">mysql <code class="option">--xml</code> </strong></span>
        and <span><strong class="command">mysqldump <code class="option">--xml</code> </strong></span> now
        includes a valid XML namespace.
       (<a href="http://bugs.mysql.com/25946" target="_top">Bug#25946</a>)</p></li><li><p>
        If you use SSL for a client connection, you can tell the client
        not to authenticate the server certificate by specifying neither
        <code class="option">--ssl-ca</code> nor <code class="option">--ssl-capath</code>. The
        server still verifies the client according to any applicable
        requirements established via <code class="literal">GRANT</code> statements
        for the client, and it still uses any
        <code class="option">--ssl-ca</code>/<code class="option">--ssl-capath</code> values
        that were passed to server at startup time.
       (<a href="http://bugs.mysql.com/25309" target="_top">Bug#25309</a>)</p></li><li><p>
        Added a <code class="literal">MASTER_SSL_VERIFY_SERVER_CERT</code> option
        for the <code class="literal">CHANGE MASTER</code> statement, and a
        <code class="literal">Master_SSL_Verify_Server_Cert</code> output column
        to the <code class="literal">SHOW SLAVE STATUS</code> statement. The
        option value also is written to the
        <code class="filename">master.info</code> file.
       (<a href="http://bugs.mysql.com/19991" target="_top">Bug#19991</a>)</p></li><li><p>
        The <code class="literal">innodb_log_archive</code> system variable has
        been removed. The impact of this change should be low because
        the variable was unused, anyway.
      </p></li><li><p>
        Added the
        <code class="option">--auto-generate-sql-add-auto-increment</code>,
        <code class="option">--auto-generate-sql-execute-number</code>,
        <code class="option">--auto-generate-sql-guid-primary</code>,
        <code class="option">--auto-generate-sql-secondary-indexes</code>,
        <code class="option">--auto-generate-sql-unique-query-number</code>,
        <code class="option">--auto-generate-sql-unique-write-number</code>,
        <code class="option">--post-query</code>,, and
        <code class="option">--pre-query</code>, options for
        <span><strong class="command">mysqlslap</strong></span>. Removed the
        <code class="option">--lock-directory</code>, <code class="option">--slave</code>, and
        <code class="option">--use-threads</code> options.
      </p></li><li><p>
        Added <code class="option">--write-binlog</code> option for
        <span><strong class="command">mysqlcheck</strong></span>. This option is enabled by
        default, but can be given as
        <code class="option">--skip-write-binlog</code> to cause <code class="literal">ANALYZE
        TABLE</code>, <code class="literal">OPTIMIZE TABLE</code>, and
        <code class="literal">REPAIR TABLE</code> statements generated by
        <span><strong class="command">mysqlcheck</strong></span> not to be written to the binary
        log. (<a href="http://bugs.mysql.com/26262" target="_top">Bug#26262</a>)
      </p></li><li><p>
        New command-line options: To alleviate ambiguities in variable
        names, all variables related to plugins can be specified using a
        <code class="literal">plugin</code> part in the name. For example, every
        time where we used to have <code class="literal">innodb</code> in the
        command-line options, you can now write
        <code class="literal">plugin-innodb</code>:
      </p><pre class="programlisting">--skip-plugin-innodb
--plugin-innodb-buffer-pool-size=#
</pre><p>
        Furthermore, this is the preferred syntax. It helps to avoid
        ambiguities when a plugin, say, <code class="literal">wait</code>, has an
        option called <code class="literal">timeout</code>.
        <code class="option">--wait-timeout</code> will still set a system
        variable, but <code class="option">--plugin-wait-timeout</code> will set
        the plugin variable. Also, there is a new command-line option
        <code class="option">--plugin-load</code> to install or load plugins at
        initialization time without using the
        <code class="literal">mysql.plugin</code> table.
      </p></li><li><p>
        The plugin interface and its handling of system variables was
        changed. Command-line options such as
        <code class="option">--skip-innodb</code> now cause an error if
        <code class="literal">InnoDB</code> is not built-in or plugin-loaded. You
        should use <code class="option">--loose-skip-innodb</code> if you do not
        want any error even if <code class="literal">InnoDB</code> is not
        available. The <code class="option">--loose</code> prefix modifier should
        be used for all command-line options where you are uncertain
        whether the plugin exists and when you want the operation to
        proceed even if the option is necessarily ignored due to the
        absence of the plugin. (For a desecription of how
        <code class="option">--loose</code> works, see
        <a href="programs.html#command-line-options" title="4.2.3.1. Using Options on the Command Line">Section 4.2.3.1, “Using Options on the Command Line”</a>.)
      </p></li><li><p>
        Storage engine plugins may now be uninstalled at run time.
        However, a plugin is not actually uninstalled until after its
        reference count drops to zero. The
        <code class="literal">default_storage_engine</code> system variable
        consumes a reference count, so uninstalling will not complete
        until said reference is removed.
      </p></li><li><p>
        The <span><strong class="command">mysql_create_system_tables</strong></span> script was
        removed because <span><strong class="command">mysql_install_db</strong></span> no longer
        uses it in MySQL 5.1.
      </p></li><li><p>
        Renamed the <code class="literal">old_mode</code> system variable to
        <code class="literal">old</code>.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        The requirement of the <code class="literal">DROP</code> privilege for
        <code class="literal">RENAME TABLE</code> was not enforced.
       (<a href="http://bugs.mysql.com/27515" target="_top">Bug#27515</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-2691" target="_top">CVE-2007-2691</a>)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        If a stored routine was declared using <code class="literal">SQL SECURITY
        INVOKER</code>, a user who invoked the routine could gain
        privileges.
       (<a href="http://bugs.mysql.com/27337" target="_top">Bug#27337</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-2692" target="_top">CVE-2007-2692</a>)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        A user with only the <code class="literal">ALTER</code> privilege on a
        partitioned table could obtain information about the table that
        should require the <code class="literal">SELECT</code> privilege.
       (<a href="http://bugs.mysql.com/23675" target="_top">Bug#23675</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-2693" target="_top">CVE-2007-2693</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The cluster waited 30 seconds instead of 30 milliseconds before
        reading table statistics.
       (<a href="http://bugs.mysql.com/28093" target="_top">Bug#28093</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Under certain rare circumstances, <span><strong class="command">ndbd</strong></span> could
        get caught in an infinite loop when one transaction took a read
        lock and then a second transaction attempted to obtain a write
        lock on the same tuple in the lock queue.
       (<a href="http://bugs.mysql.com/28073" target="_top">Bug#28073</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Under some circumstances, a node restart could fail to update
        the Global Checkpoint Index (GCI).
       (<a href="http://bugs.mysql.com/28023" target="_top">Bug#28023</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">INSERT IGNORE</code> wrongly ignored
        <code class="literal">NULL</code> values in unique indexes.
       (<a href="http://bugs.mysql.com/27980" target="_top">Bug#27980</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The name of the month “<span class="quote">March</span>” was given incorrectly
        in the cluster error log.
       (<a href="http://bugs.mysql.com/27926" target="_top">Bug#27926</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">NDB</code> tables having <code class="literal">MEDIUMINT
        AUTO_INCREMENT</code> columns were not restored correctly by
        <span><strong class="command">ndb_restore</strong></span>, causing spurious duplicate key
        errors. This issue did not affect <code class="literal">TINYINT</code>,
        <code class="literal">INT</code>, or <code class="literal">BIGINT</code> columns
        with <code class="literal">AUTO_INCREMENT</code>.
       (<a href="http://bugs.mysql.com/27775" target="_top">Bug#27775</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">NDB</code> tables with indexes whose names contained
        space characters were not restored correctly by
        <span><strong class="command">ndb_restore</strong></span> (the index names were truncated).
       (<a href="http://bugs.mysql.com/27758" target="_top">Bug#27758</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An <code class="literal">INSERT</code> followed by a delete
        <code class="literal">DELETE</code> on the same <code class="literal">NDB</code>
        table caused a memory leak.
       (<a href="http://bugs.mysql.com/27756" target="_top">Bug#27756</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/20612" target="_top">Bug#20612</a></p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        It was not possible to add a unique index to an
        <code class="literal">NDB</code> table while in single user mode.
       (<a href="http://bugs.mysql.com/27710" target="_top">Bug#27710</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Under certain rare circumstances performing a <code class="literal">DROP
        TABLE</code> or <code class="literal">TRUNCATE</code> on an
        <code class="literal">NDB</code> table could cause a node failure or
        forced cluster shutdown.
       (<a href="http://bugs.mysql.com/27581" target="_top">Bug#27581</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Memory usage of a <span><strong class="command">mysqld</strong></span> process grew even
        while idle.
       (<a href="http://bugs.mysql.com/27560" target="_top">Bug#27560</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Using more than 16GB for <code class="literal">DataMemory</code> caused
        problems with variable-size columns.
       (<a href="http://bugs.mysql.com/27512" target="_top">Bug#27512</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A data node failing while another data node was restarting could
        leave the cluster in an inconsistent state. In certain rare
        cases, this could lead to a race condition and the eventual
        forced shutdown of the cluster.
       (<a href="http://bugs.mysql.com/27466" target="_top">Bug#27466</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When using the <code class="literal">MemReportFrequency</code>
        configuration parameter to generate periodic reports of memory
        usage in the cluster log, <code class="literal">DataMemory</code> usage
        was not always reported for all data nodes.
       (<a href="http://bugs.mysql.com/27444" target="_top">Bug#27444</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Replication): An <code class="literal">UPDATE</code> on the master became
        a <code class="literal">DELETE</code> on slaves.
       (<a href="http://bugs.mysql.com/27378" target="_top">Bug#27378</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When trying to create an <code class="literal">NDB</code> table after the
        server was started with <code class="option">--ndbcluster</code> but
        without <code class="option">--ndb-connectstring</code>,
        <span><strong class="command">mysqld</strong></span> produced a memory allocation error.
       (<a href="http://bugs.mysql.com/27359" target="_top">Bug#27359</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Performing a delete followed by an insert during a local
        checkpoint could cause a <span class="errortext">Rowid already
        allocated</span> error.
       (<a href="http://bugs.mysql.com/27205" target="_top">Bug#27205</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In an <code class="literal">NDB</code> table having a
        <code class="literal">TIMESTAMP</code> column using <code class="literal">DEFAULT
        CURRENT_TIMESTAMP</code>, that column would assume a random
        value when another column in the same row was updated.
       (<a href="http://bugs.mysql.com/27127" target="_top">Bug#27127</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Error messages displayed when running in single user mode were
        inconsistent.
       (<a href="http://bugs.mysql.com/27021" target="_top">Bug#27021</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        On Solaris, the value of an <code class="literal">NDB</code> table column
        declared as <code class="literal">BIT(33)</code> was always displayed as
        <code class="literal">0</code>.
       (<a href="http://bugs.mysql.com/26986" target="_top">Bug#26986</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Performing <code class="literal">ALTER TABLE ... ENGINE=MERGE</code> on an
        <code class="literal">NDB</code> table caused <span><strong class="command">mysqld</strong></span> to
        crash.
       (<a href="http://bugs.mysql.com/26898" target="_top">Bug#26898</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="literal">NDBCLUSTER</code> table handler did not set bits
        in null bytes correctly.
       (<a href="http://bugs.mysql.com/26591" target="_top">Bug#26591</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In some cases, <code class="literal">AFTER UPDATE</code> and
        <code class="literal">AFTER DELETE</code> triggers on
        <code class="literal">NDB</code> tables that referenced subject table did
        not see the results of operation which caused invocation of the
        trigger, but rather saw the row as it was prior to the update or
        delete operation.
      </p><p>
        This was most noticeable when an update operation used a
        subquery to obtain the rows to be updated. An example would be
        <code class="literal">UPDATE tbl1 SET col2 = val1 WHERE tbl1.col1 IN (SELECT
        col3 FROM tbl2 WHERE c4 = val2)</code> where there was an
        <code class="literal">AFTER UPDATE</code> trigger on table
        <code class="literal">tbl1</code>. In such cases, the trigger would fail
        to execute.
      </p><p>
        The problem occurred because the actual update or delete
        operations were deferred to be able to perform them later as one
        batch. The fix for this bug solves the problem by disabling this
        optimization for a given update or delete if the table has an
        <code class="literal">AFTER</code> trigger defined for this operation.
       (<a href="http://bugs.mysql.com/26242" target="_top">Bug#26242</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Joins on multiple tables containing <code class="literal">BLOB</code>
        columns could cause data nodes run out of memory, and to crash
        with the error <span class="errortext">NdbObjectIdMap::expand unable to
        expand</span>.
       (<a href="http://bugs.mysql.com/26176" target="_top">Bug#26176</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">START BACKUP NOWAIT</code> caused a spurious
        <span class="errortext">Out of backup record</span> error in the
        management client (<code class="literal">START BACKUP</code> and
        <code class="literal">START BACKUP WAIT STARTED</code> performed
        normally).
       (<a href="http://bugs.mysql.com/25446" target="_top">Bug#25446</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Adding of indexes online failed for <code class="literal">NDB</code>
        tables having <code class="literal">BLOB</code> or <code class="literal">TEXT</code>
        columns.
       (<a href="http://bugs.mysql.com/25431" target="_top">Bug#25431</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When a cluster data node suffered a “<span class="quote">hard</span>” failure
        (such as a power failure or loss of a network connection) TCP
        sockets to the missing node were maintained indefinitely. Now
        socket-based transporters check for a response and terminate the
        socket if there is no activity on the socket after 2 hours.
       (<a href="http://bugs.mysql.com/24793" target="_top">Bug#24793</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <span><strong class="command">ndb_resize.pl</strong></span> utility did not calculate
        memory usage for indexes correctly.
       (<a href="http://bugs.mysql.com/24229" target="_top">Bug#24229</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        While a data node was stopped, dropping a table then creating an
        index on a different table caused that node to fail during
        restart. This was due to the re-use of the dropped table's
        internal ID for the index without verifying that the index now
        referred to a different database object.
       (<a href="http://bugs.mysql.com/21755" target="_top">Bug#21755</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When trying to create tables on an SQL node not connected to the
        cluster, a misleading error message <span class="errortext">Table
        '<em class="replaceable"><code>tbl_name</code></em>' already exists</span>
        was generated. The error now generated is <span class="errortext">Could not
        connect to storage engine</span>.
       (<a href="http://bugs.mysql.com/18676" target="_top">Bug#18676</a>)</p></li><li><p><span class="bold"><strong>Replication</strong></span>: 
        Out-of-memory errors were not reported. Now they are written to
        the error log.
       (<a href="http://bugs.mysql.com/26844" target="_top">Bug#26844</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: <span class="bold"><strong>Disk Data</strong></span>: 
        An issue with replication of Disk Data tables could in some
        cases lead to node failure.
       (<a href="http://bugs.mysql.com/28161" target="_top">Bug#28161</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Changes to a Disk Data table made as part of a transaction could
        not be seen by the client performing the changes until the
        transaction had been committed.
       (<a href="http://bugs.mysql.com/27757" target="_top">Bug#27757</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        When in single user mode, it was possible to create log file
        groups and tablespaces from any SQL node connected to the
        cluster.
       (<a href="http://bugs.mysql.com/27712" target="_top">Bug#27712</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        <code class="literal">CREATE TABLE ... LIKE
        <em class="replaceable"><code>disk_data_table</code></em></code> created an
        in-memory <code class="literal">NDB</code> table.
       (<a href="http://bugs.mysql.com/25875" target="_top">Bug#25875</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        When restarting a data node following the creation of a large
        number of Disk Data objects (approximately 200 such objects),
        the cluster could not assign a node ID to the restarting node.
       (<a href="http://bugs.mysql.com/25741" target="_top">Bug#25741</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Creating an excessive number of Disk Data tables (1000 or more)
        could cause data nodes to fail.
       (<a href="http://bugs.mysql.com/24951" target="_top">Bug#24951</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Changing a column specification or issuing a
        <code class="literal">TRUNCATE</code> statement on a Disk Data table
        caused the table to become an in-memory table.
      </p><p>
        This fix supersedes an incomplete fix that was made for this
        issue in MySQL 5.1.15.
       (<a href="http://bugs.mysql.com/24667" target="_top">Bug#24667</a>, <a href="http://bugs.mysql.com/25296" target="_top">Bug#25296</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Setting the value of the <code class="literal">UNDO BUFFER SIZE</code> to
        64K or less in a <code class="literal">CREATE LOGFILE GROUP</code>
        statement led to failure of cluster data nodes.
       (<a href="http://bugs.mysql.com/24560" target="_top">Bug#24560</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Creating an excessive number of data files for a single
        tablespace caused data nodes to crash.
       (<a href="http://bugs.mysql.com/24521" target="_top">Bug#24521</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        It was possible to drop the last remaining datafile in a
        tablespace using <code class="literal">ALTER TABLESPACE</code>, even when
        there was still an empty table using the tablespace.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The datafile could be not dropped if the table still contained
          any rows, so this bug involved no loss of data.
        </p></div><p>(<a href="http://bugs.mysql.com/21699" target="_top">Bug#21699</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Some queries that updated multiple tables were not backed up
        correctly.
       (<a href="http://bugs.mysql.com/27748" target="_top">Bug#27748</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        It was possible for API nodes to begin interacting with the
        cluster subscription manager before they were fully connected to
        the cluster.
       (<a href="http://bugs.mysql.com/27728" target="_top">Bug#27728</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Under very high loads, checkpoints could be read or written with
        checkpoint indexes out of order.
       (<a href="http://bugs.mysql.com/27651" target="_top">Bug#27651</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Trying to replicate a large number of frequent updates with a
        relatively small relay log
        (<code class="literal">max-relay-log-size</code> set to 1M or less) could
        cause the slave to crash.
       (<a href="http://bugs.mysql.com/27529" target="_top">Bug#27529</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Setting <code class="literal">SQL_LOG_BIN</code> to zero did not disable
        binary logging.
      </p><p>
        This issue affected only the <code class="literal">NDB</code> storage
        engine.
       (<a href="http://bugs.mysql.com/27076" target="_top">Bug#27076</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        An SQL node acting as a replication master server could be a
        single point of failure; that is, if it failed, the replication
        slave had no way of knowing this, which could result in a
        mismatch of data between the master and the slave.
       (<a href="http://bugs.mysql.com/21494" target="_top">Bug#21494</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        For <code class="literal">BLOB</code> reads on operations with lock mode
        <code class="literal">LM_CommittedRead</code>, the lock mode was not
        upgraded to <code class="literal">LM_Read</code> before the state of the
        <code class="literal">BLOB</code> had already been calculated. The
        <code class="literal">NDB</code> API methods affected by this problem
        included the following:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">NdbOperation::readTuple()</code>
            </p></li><li><p>
              <code class="literal">NdbScanOperation::readTuples()</code>
            </p></li><li><p>
              <code class="literal">NdbIndexScanOperation::readTuples()</code>
            </p></li></ul></div><p>
       (<a href="http://bugs.mysql.com/27320" target="_top">Bug#27320</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        Using <code class="literal">NdbBlob::writeData()</code> to write data in
        the middle of an existing blob value (that is, updating the
        value) could overwrite some data past the end of the data to be
        changed.
       (<a href="http://bugs.mysql.com/27018" target="_top">Bug#27018</a>)</p></li><li><p>
        A performance degradation was observed for outer join queries to
        which a not-exists optimization was applied.
       (<a href="http://bugs.mysql.com/28188" target="_top">Bug#28188</a>)</p></li><li><p>
        <code class="literal">SELECT * INTO OUTFILE ... FROM
        INFORMATION_SCHEMA.SCHEMATA</code> failed with an
        <span class="errortext">Access denied</span> error, even for a user who
        had the <code class="literal">FILE</code> privilege.
       (<a href="http://bugs.mysql.com/28181" target="_top">Bug#28181</a>)</p></li><li><p>
        Early <code class="literal">NULL</code>-filtering optimization did not
        work for <code class="literal">eq_ref</code> table access.
       (<a href="http://bugs.mysql.com/27939" target="_top">Bug#27939</a>)</p></li><li><p>
        Non-grouped columns were allowed by <code class="literal">*</code> in
        <code class="literal">ONLY_FULL_GROUP_BY</code> SQL mode.
       (<a href="http://bugs.mysql.com/27874" target="_top">Bug#27874</a>)</p></li><li><p>
        Some equi-joins containing a <code class="literal">WHERE</code> clause
        that included a <code class="literal">NOT IN</code> subquery caused a
        server crash.
       (<a href="http://bugs.mysql.com/27870" target="_top">Bug#27870</a>)</p></li><li><p>
        An error message suggested the use of
        <span><strong class="command">mysql_fix_privilege_tables</strong></span> after an upgrade,
        but the recommended program is now
        <span><strong class="command">mysql_upgrade</strong></span>.
       (<a href="http://bugs.mysql.com/27818" target="_top">Bug#27818</a>)</p></li><li><p>
        Debug builds on Windows generated false alarms about
        uninitialized variables with some Visual Studio runtime
        libraries.
       (<a href="http://bugs.mysql.com/27811" target="_top">Bug#27811</a>)</p></li><li><p>
        Certain queries that used uncorrelated scalar subqueries caused
        <code class="literal">EXPLAIN</code> to crash.
       (<a href="http://bugs.mysql.com/27807" target="_top">Bug#27807</a>)</p></li><li><p>
        Performing a <code class="literal">UNION</code> on two views that had
        <code class="literal">ORDER BY</code> clauses resulted in an
        <code class="literal">Unknown column</code> error.
       (<a href="http://bugs.mysql.com/27786" target="_top">Bug#27786</a>)</p></li><li><p>
        <span><strong class="command">mysql_install_db</strong></span> is supposed to detect
        existing system tables and create only those that do not exist.
        Instead, it was exiting with an error if tables already existed.
       (<a href="http://bugs.mysql.com/27783" target="_top">Bug#27783</a>)</p></li><li><p>
        The <a href="functions.html#function_least"><code class="literal">LEAST()</code></a> and
        <a href="functions.html#function_greatest"><code class="literal">GREATEST()</code></a> functions
        compared <code class="literal">DATE</code> and <code class="literal">DATETIME</code>
        values as strings, which in some cases could lead to an
        incorrect result.
       (<a href="http://bugs.mysql.com/27759" target="_top">Bug#27759</a>)</p></li><li><p>
        A memory leak in the event scheduler was uncovered by Valgrind.
       (<a href="http://bugs.mysql.com/27733" target="_top">Bug#27733</a>)</p></li><li><p>
        <span><strong class="command">mysqld</strong></span> did not check the length of option
        values and could crash with a buffer overflow for long values.
       (<a href="http://bugs.mysql.com/27715" target="_top">Bug#27715</a>)</p></li><li><p>
        Comparisons using row constructors could fail for rows
        containing <code class="literal">NULL</code> values.
       (<a href="http://bugs.mysql.com/27704" target="_top">Bug#27704</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> could not connect using SSL.
       (<a href="http://bugs.mysql.com/27669" target="_top">Bug#27669</a>)</p></li><li><p>
        <code class="literal">SELECT DISTINCT</code> could return incorrect
        results if the select list contained duplicated columns.
       (<a href="http://bugs.mysql.com/27659" target="_top">Bug#27659</a>)</p></li><li><p>
        On Linux, the server could not create temporary tables if
        <code class="literal">lower_case_table_names</code> was set to 1 and the
        value of <code class="literal">tmpdir</code> was a directory name
        containing any uppercase letters.
       (<a href="http://bugs.mysql.com/27653" target="_top">Bug#27653</a>)</p></li><li><p>
        For <code class="literal">InnoDB</code> tables, a multiple-row
        <code class="literal">INSERT</code> of the form <code class="literal">INSERT INTO t
        (id...) VALUES (NULL...) ON DUPLICATE KEY UPDATE
        id=VALUES(id)</code>, where <code class="literal">id</code> is an
        <code class="literal">AUTO_INCREMENT</code> column, could cause
        <code class="literal">ERROR 1062 (23000): Duplicate entry...</code> errors
        or lost rows.
       (<a href="http://bugs.mysql.com/27650" target="_top">Bug#27650</a>)</p></li><li><p>
        When MySQL logged slow query information to a
        <code class="literal">CSV</code> table, it used an incorrect formula to
        calculate the <code class="literal">query_time</code> and
        <code class="literal">lock_time</code> values.
       (<a href="http://bugs.mysql.com/27638" target="_top">Bug#27638</a>)</p></li><li><p>
        The XML output representing an empty result was an empty string
        rather than an empty <code class="literal">&lt;resultset/&gt;</code>
        element.
       (<a href="http://bugs.mysql.com/27608" target="_top">Bug#27608</a>)</p></li><li><p>
        Comparison of a <code class="literal">DATE</code> with a
        <code class="literal">DATETIME</code> did not treat the
        <code class="literal">DATE</code> as having a time part of
        <code class="literal">00:00:00</code>.
       (<a href="http://bugs.mysql.com/27590" target="_top">Bug#27590</a>)</p><p>See also <a href="http://bugs.mysql.com/32198" target="_top">Bug#32198</a></p></li><li><p>
        With <code class="literal">NO_AUTO_VALUE_ON_ZERO</code> SQL mode enabled,
        <code class="literal">LOAD DATA</code> operations could assign incorrect
        <code class="literal">AUTO_INCREMENT</code> values.
       (<a href="http://bugs.mysql.com/27586" target="_top">Bug#27586</a>)</p></li><li><p>
        Group relay log rotation updated only the log position and not
        the name, causing the slave to stop.
       (<a href="http://bugs.mysql.com/27583" target="_top">Bug#27583</a>)</p></li><li><p>
        Incorrect results could be returned for some queries that
        contained a select list expression with <code class="literal">IN</code> or
        <a href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> together
        with an <code class="literal">ORDER BY</code> or <code class="literal">GROUP
        BY</code> on the same expression using <code class="literal">NOT
        IN</code> or <code class="literal">NOT BETWEEN</code>.
       (<a href="http://bugs.mysql.com/27532" target="_top">Bug#27532</a>)</p></li><li><p>
        The fix for <a href="http://bugs.mysql.com/17212" target="_top">Bug#17212</a> provided correct sort order for
        misordered output of certain queries, but caused significant
        overall query performance degradation. (Results were correct
        (good), but returned much more slowly (bad).) The fix also
        affected performance of queries for which results were correct.
        The performance degradation has been addressed.
       (<a href="http://bugs.mysql.com/27531" target="_top">Bug#27531</a>)</p></li><li><p>
        The <a href="functions.html#function_crc32"><code class="literal">CRC32()</code></a> function returns an
        unsigned integer, but the metadata was signed, which could cause
        certain queries to return incorrect results. (For example,
        queries that selected a <a href="functions.html#function_crc32"><code class="literal">CRC32()</code></a>
        value and used that value in the <code class="literal">GROUP BY</code>
        clause.)
       (<a href="http://bugs.mysql.com/27530" target="_top">Bug#27530</a>)</p></li><li><p>
        An interaction between <code class="literal">SHOW TABLE STATUS</code> and
        other concurrent statements that modify the table could result
        in a divide-by-zero error and a server crash.
       (<a href="http://bugs.mysql.com/27516" target="_top">Bug#27516</a>)</p></li><li><p>
        Evaluation of an <code class="literal">IN()</code> predicate containing a
        decimal-valued argument caused a server crash.
       (<a href="http://bugs.mysql.com/27513" target="_top">Bug#27513</a>, <a href="http://bugs.mysql.com/27362" target="_top">Bug#27362</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-2583" target="_top">CVE-2007-2583</a>)</p></li><li><p>
        A race condition between <code class="literal">DROP TABLE</code> and
        <code class="literal">SHOW TABLE STATUS</code> could cause the latter to
        display incorrect information.
       (<a href="http://bugs.mysql.com/27499" target="_top">Bug#27499</a>)</p></li><li><p>
        In out-of-memory conditions, the server might crash or otherwise
        not report an error to the Windows event log.
       (<a href="http://bugs.mysql.com/27490" target="_top">Bug#27490</a>)</p></li><li><p>
        Passing nested row expressions with different structures to an
        <code class="literal">IN</code> predicate caused a server crash.
       (<a href="http://bugs.mysql.com/27484" target="_top">Bug#27484</a>)</p></li><li><p>
        The <code class="filename">decimal.h</code> header file was incorrectly
        omitted from binary distributions.
       (<a href="http://bugs.mysql.com/27456" target="_top">Bug#27456</a>)</p></li><li><p>
        With <code class="literal">innodb_file_per_table</code> enabled,
        attempting to rename an <code class="literal">InnoDB</code> table to a
        non-existent database caused the server to exit.
       (<a href="http://bugs.mysql.com/27381" target="_top">Bug#27381</a>)</p></li><li><p>
        Nested aggregate functions could be improperly evaluated.
       (<a href="http://bugs.mysql.com/27363" target="_top">Bug#27363</a>)</p></li><li><p>
        A stored function invocation in the <code class="literal">WHERE</code>
        clause was treated as a constant.
       (<a href="http://bugs.mysql.com/27354" target="_top">Bug#27354</a>)</p></li><li><p>
        For the <code class="literal">INFORMATION_SCHEMA</code>
        <code class="literal">SESSION_STATUS</code> and
        <code class="literal">GLOBAL_STATUS</code> tables, some status values were
        incorrectly converted to the data type of the
        <code class="literal">VARIABLE_VALUE</code> column.
       (<a href="http://bugs.mysql.com/27327" target="_top">Bug#27327</a>)</p></li><li><p>
        Failure to allocate memory associated with
        <code class="literal">transaction_prealloc_size</code> could cause a
        server crash.
       (<a href="http://bugs.mysql.com/27322" target="_top">Bug#27322</a>)</p></li><li><p>
        A subquery could get incorrect values for references to outer
        query columns when it contained aggregate functions that were
        aggregated in outer context.
       (<a href="http://bugs.mysql.com/27321" target="_top">Bug#27321</a>)</p></li><li><p>
        The server did not shut down cleanly.
       (<a href="http://bugs.mysql.com/27310" target="_top">Bug#27310</a>)</p></li><li><p>
        In a view, a column that was defined using a
        <code class="literal">GEOMETRY</code> function was treated as having the
        <code class="literal">LONGBLOB</code> data type rather than the
        <code class="literal">GEOMETRY</code> type.
       (<a href="http://bugs.mysql.com/27300" target="_top">Bug#27300</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> crashed if it got no data from
        <code class="literal">SHOW CREATE PROCEDURE</code> (for example, when
        trying to dump a routine defined by a different user and for
        which the current user had no privileges). Now it prints a
        comment to indicate the problem. It also returns an error, or
        continues if the <code class="option">--force</code> option is given.
       (<a href="http://bugs.mysql.com/27293" target="_top">Bug#27293</a>)</p></li><li><p>
        Queries containing subqueries with
        <a href="functions.html#function_count"><code class="literal">COUNT(*)</code></a> aggregated in
        an outer context returned incorrect results. This happened only
        if the subquery did not contain any references to outer columns.
       (<a href="http://bugs.mysql.com/27257" target="_top">Bug#27257</a>)</p></li><li><p>
        Use of an aggregate function from an outer context as an
        argument to <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a>
        caused a server crash.
       (<a href="http://bugs.mysql.com/27229" target="_top">Bug#27229</a>)</p></li><li><p>
        String truncation upon insertion into an integer or year column
        did not generate a warning (or an error in strict mode).
       (<a href="http://bugs.mysql.com/27176" target="_top">Bug#27176</a>, <a href="http://bugs.mysql.com/26359" target="_top">Bug#26359</a>)</p></li><li><p>
        <span><strong class="command">mysqlbinlog</strong></span> produced different output with
        the <code class="option">-R</code> option than without it.
       (<a href="http://bugs.mysql.com/27171" target="_top">Bug#27171</a>)</p></li><li><p>
        Storing <code class="literal">NULL</code> values in spatial fields caused
        excessive memory allocation and crashes on some systems.
       (<a href="http://bugs.mysql.com/27164" target="_top">Bug#27164</a>)</p></li><li><p>
        Row equalities in <code class="literal">WHERE</code> clauses could cause
        memory corruption.
       (<a href="http://bugs.mysql.com/27154" target="_top">Bug#27154</a>)</p></li><li><p>
        <code class="literal">ON DUPLICATE KEY UPDATE</code> failed for a table
        partitioned by <code class="literal">KEY</code> on a primary key
        <code class="literal">VARCHAR</code> column.
       (<a href="http://bugs.mysql.com/27123" target="_top">Bug#27123</a>)</p></li><li><p>
        <code class="literal">GROUP BY</code> on a <code class="literal">ucs2</code> column
        caused a server crash when there was at least one empty string
        in the column.
       (<a href="http://bugs.mysql.com/27079" target="_top">Bug#27079</a>)</p></li><li><p>
        Duplicate members in <code class="literal">SET</code> or
        <code class="literal">ENUM</code> definitions were not detected. Now they
        result in a warning; if strict SQL mode is enabled, an error
        occurs instead.
       (<a href="http://bugs.mysql.com/27069" target="_top">Bug#27069</a>)</p></li><li><p>
        For <code class="literal">FEDERATED</code> tables, <code class="literal">SHOW CREATE
        TABLE</code> could fail when the table name was longer than
        the connection name.
       (<a href="http://bugs.mysql.com/27036" target="_top">Bug#27036</a>)</p></li><li><p>
        <span><strong class="command">mysql_install_db</strong></span> could terminate with an
        error after failing to determine that a system table already
        existed.
       (<a href="http://bugs.mysql.com/27022" target="_top">Bug#27022</a>)</p></li><li><p>
        In a <code class="literal">MEMORY</code> table, using a
        <code class="literal">BTREE</code> index to scan for updatable rows could
        lead to an infinite loop.
       (<a href="http://bugs.mysql.com/26996" target="_top">Bug#26996</a>)</p></li><li><p>
        <span><strong class="command">make_win_bin_dist</strong></span> neglected to copy some
        required <code class="literal">MyISAM</code> table files.
       (<a href="http://bugs.mysql.com/26922" target="_top">Bug#26922</a>)</p></li><li><p>
        Improved out-of-memory detection when sending logs from a master
        server to slaves, and log a message when allocation fails.
       (<a href="http://bugs.mysql.com/26837" target="_top">Bug#26837</a>)</p></li><li><p>
        For <code class="literal">InnoDB</code> tables having a clustered index
        that began with a <code class="literal">CHAR</code> or
        <code class="literal">VARCHAR</code> column, deleting a record and then
        inserting another before the deleted record was purged could
        result in table corruption.
       (<a href="http://bugs.mysql.com/26835" target="_top">Bug#26835</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> would not dump a view for which the
        <code class="literal">DEFINER</code> no longer exists.
       (<a href="http://bugs.mysql.com/26817" target="_top">Bug#26817</a>)</p></li><li><p>
        Duplicates were not properly identified among (potentially) long
        strings used as arguments for
        <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT(DISTINCT)</code></a>.
       (<a href="http://bugs.mysql.com/26815" target="_top">Bug#26815</a>)</p></li><li><p>
        <code class="literal">ALTER VIEW</code> requires the <code class="literal">CREATE
        VIEW</code> and <code class="literal">DROP</code> privileges for the
        view. However, if the view was created by another user, the
        server erroneously required the <code class="literal">SUPER</code>
        privilege.
       (<a href="http://bugs.mysql.com/26813" target="_top">Bug#26813</a>)</p></li><li><p>
        If the name of a table given to <span><strong class="command">myisamchk -rq</strong></span>
        was a packed table and the name included the
        <code class="filename">.MYI</code> extension,
        <span><strong class="command">myisamchk</strong></span> incorrectly created a file with a
        <code class="filename">.MYI.MYI</code> extension.
       (<a href="http://bugs.mysql.com/26782" target="_top">Bug#26782</a>)</p></li><li><p>
        Creating a temporary table with <code class="literal">InnoDB</code> when
        using the one-file-per-table setting, and when the host
        filesystem for temporary tables was <code class="literal">tmpfs</code>,
        would cause an assertion within <code class="literal">mysqld</code>. This
        was due to the use of <code class="literal">O_DIRECT</code> when opening
        the temporary table file.
       (<a href="http://bugs.mysql.com/26662" target="_top">Bug#26662</a>)</p></li><li><p>
        <span><strong class="command">mysql_upgrade</strong></span> did not detect failure of
        external commands that it runs.
       (<a href="http://bugs.mysql.com/26639" target="_top">Bug#26639</a>)</p></li><li><p>
        The range optimizer could cause the server to run out of memory.
       (<a href="http://bugs.mysql.com/26625" target="_top">Bug#26625</a>)</p></li><li><p>
        The range optimizer could consume a combinatorial amount of
        memory for certain classes of <code class="literal">WHERE</code> clauses.
       (<a href="http://bugs.mysql.com/26624" target="_top">Bug#26624</a>)</p></li><li><p>
        Aborting a statement on the master that applied to a
        non-transactional statement broke replication. The statement was
        written to the binary log but not completely executed on the
        master. Slaves receiving the statement executed it completely,
        resulting in loss of data synchrony. Now an error code is
        written to the error log so that the slaves stop without
        executing the aborted statement. (That is, replication stops,
        but synchrony to the point of the stop is preserved and you can
        investigate the problem.)
       (<a href="http://bugs.mysql.com/26551" target="_top">Bug#26551</a>)</p></li><li><p>
        <code class="literal">mysqldump</code> could crash or exhibit incorrect
        behavior when some options were given very long values, such as
        <code class="option">--fields-terminated-by="<em class="replaceable"><code>some very long
        string</code></em>"</code>. The code has been cleaned
        up to remove a number of fixed-sized buffers and to be more
        careful about error conditions in memory allocation.
       (<a href="http://bugs.mysql.com/26346" target="_top">Bug#26346</a>)</p></li><li><p>
        A possible buffer overflow in <code class="literal">SHOW PROCEDURE
        CODE</code> was removed.
       (<a href="http://bugs.mysql.com/26303" target="_top">Bug#26303</a>)</p></li><li><p>
        The <code class="literal">FEDERATED</code> engine did not allow the local
        and remote tables to have different names.
       (<a href="http://bugs.mysql.com/26257" target="_top">Bug#26257</a>)</p></li><li><p>
        The temporary file-creation code was cleaned up on Windows to
        improve server stability.
       (<a href="http://bugs.mysql.com/26233" target="_top">Bug#26233</a>)</p></li><li><p>
        For <code class="literal">MyISAM</code> tables,
        <a href="functions.html#function_count"><code class="literal">COUNT(*)</code></a> could return
        an incorrect value if the <code class="literal">WHERE</code> clause
        compared an indexed <code class="literal">TEXT</code> column to the empty
        string (<code class="literal">''</code>). This happened if the column
        contained empty strings and also strings starting with control
        characters such as tab or newline.
       (<a href="http://bugs.mysql.com/26231" target="_top">Bug#26231</a>)</p></li><li><p>
        For <code class="literal">INSERT INTO ... SELECT</code> where index
        searches used column prefixes, insert errors could occur when
        key value type conversion was done.
       (<a href="http://bugs.mysql.com/26207" target="_top">Bug#26207</a>)</p></li><li><p>
        <span><strong class="command">mysqlbinlog --base64-output</strong></span> produced invalid
        SQL.
       (<a href="http://bugs.mysql.com/26194" target="_top">Bug#26194</a>)</p></li><li><p>
        For <code class="literal">DELETE FROM <code class="literal">tbl_name</code> ORDER BY
        <em class="replaceable"><code>col_name</code></em></code> (with no
        <code class="literal">WHERE</code> or <code class="literal">LIMIT</code> clause),
        the server did not check whether
        <em class="replaceable"><code>col_name</code></em> was a valid column in the
        table.
       (<a href="http://bugs.mysql.com/26186" target="_top">Bug#26186</a>)</p></li><li><p>
        Executing an <code class="literal">INSERT ... SELECT ... FROM
        INFORMATION_SCHEMA.GLOBAL_STATUS</code> statement from within
        an event caused a server crash.
       (<a href="http://bugs.mysql.com/26174" target="_top">Bug#26174</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> could not dump log tables.
       (<a href="http://bugs.mysql.com/26121" target="_top">Bug#26121</a>)</p></li><li><p>
        On Windows, trying to use backslash (<code class="literal">\</code>)
        characters in paths for <code class="literal">DATA DIRECTORY</code> and
        <code class="literal">INDEX DIRECTORY</code> when creating partitioned
        tables caused MySQL to crash.
      </p><p>
        (You must use <code class="literal">/</code> characters when specifying
        paths for these options, regardless of platform. See
        <a href="partitioning.html#partitioning-overview" title="21.1. Overview of Partitioning in MySQL">Section 21.1, “Overview of Partitioning in MySQL”</a>, for an
        example using absolute paths for <code class="literal">DATA
        DIRECTORY</code> and <code class="literal">INDEX DIRECTORY</code> when
        creating a partitioned table on Windows.)
       (<a href="http://bugs.mysql.com/26074" target="_top">Bug#26074</a>, <a href="http://bugs.mysql.com/25141" target="_top">Bug#25141</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> crashed for
        <code class="literal">MERGE</code> tables if the
        <code class="option">--complete-insert</code> (<code class="option">-c</code>) option
        was given.
       (<a href="http://bugs.mysql.com/25993" target="_top">Bug#25993</a>)</p></li><li><p>
        Index hints (<code class="literal">USE INDEX</code>, <code class="literal">IGNORE
        INDEX</code>, <code class="literal">FORCE INDEX</code>) cannot be used
        with <code class="literal">FULLTEXT</code> indexes, but were not being
        ignored.
       (<a href="http://bugs.mysql.com/25951" target="_top">Bug#25951</a>)</p></li><li><p>
        Setting a column to <code class="literal">NOT NULL</code> with an
        <code class="literal">ON DELETE SET NULL</code> clause foreign key crashes
        the server.
       (<a href="http://bugs.mysql.com/25927" target="_top">Bug#25927</a>)</p></li><li><p>
        Corrupted <code class="literal">MyISAM</code> tables that have different
        definitions in the <code class="filename">.frm</code> and
        <code class="filename">.MYI</code> tables might cause a server crash.
       (<a href="http://bugs.mysql.com/25908" target="_top">Bug#25908</a>)</p></li><li><p>
        If <code class="literal">CREATE TABLE t1 LIKE t2</code> failed due to a
        full disk, an empty <code class="filename">t2.frm</code> file could be
        created but not removed. This file then caused subsequent
        attempts to create a table named <code class="literal">t2</code> to fail.
        This is easily corrected at the filesystem level by removing the
        <code class="filename">t2.frm</code> file manually, but now the server
        removes the file if the create operation does not complete
        successfully.
       (<a href="http://bugs.mysql.com/25761" target="_top">Bug#25761</a>)</p></li><li><p>
        In certain situations, <code class="literal">MATCH ... AGAINST</code>
        returned false hits for <code class="literal">NULL</code> values produced
        by <code class="literal">LEFT JOIN</code> when no full-text index was
        available.
       (<a href="http://bugs.mysql.com/25729" target="_top">Bug#25729</a>)</p></li><li><p>
        Concurrent <code class="literal">CREATE SERVER</code> and <code class="literal">ALTER
        SERVER</code> statements could cause a deadlock.
       (<a href="http://bugs.mysql.com/25721" target="_top">Bug#25721</a>)</p></li><li><p>
        <code class="literal">CREATE SERVER</code>, <code class="literal">DROP
        SERVER</code>, and <code class="literal">ALTER SERVER</code> did not
        require any privileges. Now these statements require the
        <code class="literal">SUPER</code> privilege.
       (<a href="http://bugs.mysql.com/25671" target="_top">Bug#25671</a>)</p></li><li><p>
        On Windows, connection handlers did not properly decrement the
        server's thread count when exiting.
       (<a href="http://bugs.mysql.com/25621" target="_top">Bug#25621</a>)</p></li><li><p>
        When <a href="functions.html#function_rand"><code class="literal">RAND()</code></a> was called multiple
        times inside a stored procedure, the server did not write the
        correct random seed values to the binary log, resulting in
        incorrect replication.
       (<a href="http://bugs.mysql.com/25543" target="_top">Bug#25543</a>)</p></li><li><p>
        <code class="literal">OPTIMIZE TABLE</code> might fail on Windows when it
        attempts to rename a temporary file to the original name if the
        original file had been opened, resulting in loss of the
        <code class="filename">.MYD</code> file.
       (<a href="http://bugs.mysql.com/25521" target="_top">Bug#25521</a>)</p></li><li><p>
        For <code class="literal">SHOW ENGINE INNODB STATUS</code>, the
        <code class="literal">LATEST DEADLOCK INFORMATION</code> was not always
        cleared properly.
       (<a href="http://bugs.mysql.com/25494" target="_top">Bug#25494</a>)</p></li><li><p>
        <a href="apis.html#mysql-stmt-fetch" title="29.2.7.11. mysql_stmt_fetch()"><code class="literal">mysql_stmt_fetch()</code></a> did an
        invalid memory deallocation when used with the embedded server.
       (<a href="http://bugs.mysql.com/25492" target="_top">Bug#25492</a>)</p></li><li><p>
        <code class="literal">GRANT</code> statements were not replicated if the
        server was started with the
        <code class="option">--replicate-ignore-table</code> or
        <code class="option">--replicate-wild-ignore-table</code> option.
       (<a href="http://bugs.mysql.com/25482" target="_top">Bug#25482</a>)</p></li><li><p>
        <span><strong class="command">mysql_upgrade</strong></span> did not pass a password to
        <span><strong class="command">mysqlcheck</strong></span> if one was given.
       (<a href="http://bugs.mysql.com/25452" target="_top">Bug#25452</a>)</p></li><li><p>
        On Windows, <span><strong class="command">mysql_upgrade</strong></span> was sensitive to
        lettercase of the names of some required components.
       (<a href="http://bugs.mysql.com/25405" target="_top">Bug#25405</a>)</p></li><li><p>
        During a call to
        <a href="apis.html#mysql-change-user" title="29.2.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a>,
        when authentication fails or the database to change to is
        unknown, a subsequent call to any function that does network
        communication leads to packets out of order. This problem was
        introduced in MySQL 5.1.14.
       (<a href="http://bugs.mysql.com/25371" target="_top">Bug#25371</a>)</p></li><li><p>
        Difficult repair or optimization operations could cause an
        assertion failure, resulting in a server crash.
       (<a href="http://bugs.mysql.com/25289" target="_top">Bug#25289</a>)</p></li><li><p>
        For storage engines that allow the current auto-increment value
        to be set, using <code class="literal">ALTER TABLE ... ENGINE</code> to
        convert a table from one such storage engine to another caused
        loss of the current value. (For storage engines that do not
        support setting the value, it cannot be retained anyway when
        changing the storage engine.)
       (<a href="http://bugs.mysql.com/25262" target="_top">Bug#25262</a>)</p></li><li><p>
        Restoration of the default database after stored routine or
        trigger execution on a slave could cause replication to stop if
        the database no longer existed.
       (<a href="http://bugs.mysql.com/25082" target="_top">Bug#25082</a>)</p></li><li><p>
        Duplicate entries were not assessed correctly in a
        <code class="literal">MEMORY</code> table with a <code class="literal">BTREE</code>
        primary key on a <code class="literal">utf8</code> <code class="literal">ENUM</code>
        column.
       (<a href="http://bugs.mysql.com/24985" target="_top">Bug#24985</a>)</p></li><li><p>
        Several math functions produced incorrect results for large
        unsigned values. <a href="functions.html#function_round"><code class="literal">ROUND()</code></a>
        produced incorrect results or a crash for a large
        number-of-decimals argument.
       (<a href="http://bugs.mysql.com/24912" target="_top">Bug#24912</a>)</p></li><li><p>
        The result set of a query that used <code class="literal">WITH
        ROLLUP</code> and <code class="literal">DISTINCT</code> could lack some
        rollup rows (rows with <code class="literal">NULL</code> values for
        grouping attributes) if the <code class="literal">GROUP BY</code> list
        contained constant expressions.
       (<a href="http://bugs.mysql.com/24856" target="_top">Bug#24856</a>)</p></li><li><p>
        Selecting the result of <a href="functions.html#function_avg"><code class="literal">AVG()</code></a>
        within a <code class="literal">UNION</code> could produce incorrect
        values.
       (<a href="http://bugs.mysql.com/24791" target="_top">Bug#24791</a>)</p></li><li><p>
        For queries that used <code class="literal">ORDER BY</code> with
        <code class="literal">InnoDB</code> tables, if the optimizer chose an
        index for accessing the table but found a covering index that
        enabled the <code class="literal">ORDER BY</code> to be skipped, no
        results were returned.
       (<a href="http://bugs.mysql.com/24778" target="_top">Bug#24778</a>)</p></li><li><p>
        The <code class="literal">NO_DIR_IN_CREATE</code> server SQL mode was not
        enforced for partitioned tables.
       (<a href="http://bugs.mysql.com/24633" target="_top">Bug#24633</a>)</p></li><li><p>
        <code class="literal">MBRDisjoint()</code>, <code class="literal">MBRequal()</code>,
        <code class="literal">MBRIntersects()</code>,
        <code class="literal">MBROverlaps()</code>,
        <code class="literal">MBRTouches()</code>, and
        <code class="literal">MBRWithin()</code> were inadvertently omitted from
        recent versions of MySQL (5.1.14 to 5.1.17).
       (<a href="http://bugs.mysql.com/24588" target="_top">Bug#24588</a>)</p></li><li><p>
        Access via <code class="literal">my_pread()</code> or
        <code class="literal">my_pwrite()</code> to table files larger than 2GB
        could fail on some systems.
       (<a href="http://bugs.mysql.com/24566" target="_top">Bug#24566</a>)</p></li><li><p>
        <code class="literal">MBROverlaps()</code> returned incorrect values in
        some cases.
       (<a href="http://bugs.mysql.com/24563" target="_top">Bug#24563</a>)</p></li><li><p>
        A problem in handling of aggregate functions in subqueries
        caused predicates containing aggregate functions to be ignored
        during query execution.
       (<a href="http://bugs.mysql.com/24484" target="_top">Bug#24484</a>)</p></li><li><p>
        The <code class="literal">MERGE</code> storage engine could return
        incorrect results when several index values that compare
        equality were present in an index (for example,
        <code class="literal">'gross'</code> and <code class="literal">'gross '</code>,
        which are considered equal but have different lengths).
       (<a href="http://bugs.mysql.com/24342" target="_top">Bug#24342</a>)</p></li><li><p>
        Some upgrade problems are detected and better error messages
        suggesting that <span><strong class="command">mysql_upgrade</strong></span> be run are
        produced.
       (<a href="http://bugs.mysql.com/24248" target="_top">Bug#24248</a>)</p></li><li><p>
        The test for the
        <code class="literal">MYSQL_OPT_SSL_VERIFY_SERVER_CERT</code> option for
        <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> was
        performed incorrectly. Also changed as a result of this bugfix:
        The <code class="literal">arg</code> option for the
        <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> C API function
        was changed from <code class="literal">char *</code> to <code class="literal">void
        *</code>.
       (<a href="http://bugs.mysql.com/24121" target="_top">Bug#24121</a>)</p></li><li><p>
        Some views could not be created even when the user had the
        requisite privileges.
       (<a href="http://bugs.mysql.com/24040" target="_top">Bug#24040</a>)</p></li><li><p>
        The values displayed for the
        <code class="literal">Innodb_row_lock_time</code>,
        <code class="literal">Innodb_row_lock_time_avg</code>, and
        <code class="literal">Innodb_row_lock_time_max</code> status variables
        were incorrect.
       (<a href="http://bugs.mysql.com/23666" target="_top">Bug#23666</a>)</p></li><li><p>
        Using <a href="functions.html#function_cast"><code class="literal">CAST()</code></a> to convert
        <code class="literal">DATETIME</code> values to numeric values did not
        work.
       (<a href="http://bugs.mysql.com/23656" target="_top">Bug#23656</a>)</p></li><li><p>
        A damaged or missing <code class="literal">mysql.event</code> table caused
        <code class="literal">SHOW VARIABLES</code> to fail.
       (<a href="http://bugs.mysql.com/23631" target="_top">Bug#23631</a>)</p></li><li><p>
        <code class="literal">SHOW CREATE VIEW</code> qualified references to
        stored functions in the view definition with the function's
        database name, even when the database was the default database.
        This affected <span><strong class="command">mysqldump</strong></span> (which uses
        <code class="literal">SHOW CREATE VIEW</code> to dump views) because the
        resulting dump file could not be used to reload the database
        into a different database. <code class="literal">SHOW CREATE VIEW</code>
        now suppresses the database name for references to functions in
        the default database.
       (<a href="http://bugs.mysql.com/23491" target="_top">Bug#23491</a>)</p></li><li><p>
        An <code class="literal">INTO OUTFILE</code> clause is allowed only for
        the final <code class="literal">SELECT</code> of a
        <code class="literal">UNION</code>, but this restriction was not being
        enforced correctly.
       (<a href="http://bugs.mysql.com/23345" target="_top">Bug#23345</a>)</p></li><li><p>
        The <code class="literal">AUTO_INCREMENT</code> value would not be
        correctly reported for <code class="literal">InnoDB</code> tables when
        using <code class="literal">SHOW CREATE TABLE</code> statement or
        <span><strong class="command">mysqldump</strong></span> command.
       (<a href="http://bugs.mysql.com/23313" target="_top">Bug#23313</a>)</p></li><li><p>
        With the <code class="literal">NO_AUTO_VALUE_ON_ZERO</code> SQL mode
        enabled, <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> could
        return 0 after <code class="literal">INSERT ... ON DUPLICATE KEY
        UPDATE</code>. Additionally, the next rows inserted (by the
        same <code class="literal">INSERT</code>, or the following
        <code class="literal">INSERT</code> with or without <code class="literal">ON DUPLICATE
        KEY UPDATE</code>), would insert 0 for the auto-generated
        value if the value for the <code class="literal">AUTO_INCREMENT</code>
        column was <code class="literal">NULL</code> or missing.
       (<a href="http://bugs.mysql.com/23233" target="_top">Bug#23233</a>)</p></li><li><p>
        If a rotate event occured in the middle of a non-transaction
        group, the group position would be updated by the rotate event
        indicating an illegal group start position that was effectively
        inside a group. This can happen if, for example, a rotate occurs
        between an <code class="literal">Intvar</code> event and the associated
        <code class="literal">Query</code> event, or between the table map events
        and the rows events when using row-based replication.
       (<a href="http://bugs.mysql.com/23171" target="_top">Bug#23171</a>)</p></li><li><p>
        Implicit conversion of <code class="literal">9912101</code> to
        <code class="literal">DATE</code> did not match
        <a href="functions.html#function_cast"><code class="literal">CAST(9912101 AS DATE)</code></a>.
       (<a href="http://bugs.mysql.com/23093" target="_top">Bug#23093</a>)</p></li><li><p>
        <code class="literal">SELECT COUNT(*)</code> from a table containing a
        <code class="literal">DATETIME NOT NULL</code> column could produce
        spurious warnings with the <code class="literal">NO_ZERO_DATE</code> SQL
        mode enabled.
       (<a href="http://bugs.mysql.com/22824" target="_top">Bug#22824</a>)</p></li><li><p>
        Using <code class="literal">SET GLOBAL</code> to change the
        <code class="literal">lc_time_names</code> system variable had no effect
        on new connections.
       (<a href="http://bugs.mysql.com/22648" target="_top">Bug#22648</a>)</p></li><li><p>
        <a href="functions.html#function_soundex"><code class="literal">SOUNDEX()</code></a> returned an invalid
        string for international characters in multi-byte character
        sets.
       (<a href="http://bugs.mysql.com/22638" target="_top">Bug#22638</a>)</p></li><li><p>
        Row-based replication of <code class="literal">MyISAM</code> to
        non-<code class="literal">MyISAM</code> tables did not work correctly for
        <code class="literal">BIT</code> columns. This has been corrected, but the
        fix introduces an incompatibility into the binary log format.
        (The incompatibility is corrected by the fix for <a href="http://bugs.mysql.com/27779" target="_top">Bug#27779</a>.)
       (<a href="http://bugs.mysql.com/22583" target="_top">Bug#22583</a>)</p></li><li><p>
        A multiple-table <code class="literal">UPDATE</code> could return an
        incorrect rows-matched value if, during insertion of rows into a
        temporary table, the table had to be converted from a
        <code class="literal">MEMORY</code> table to a <code class="literal">MyISAM</code>
        table.
       (<a href="http://bugs.mysql.com/22364" target="_top">Bug#22364</a>)</p></li><li><p>
        <a href="functions.html#function_count"><code class="literal">COUNT(<em class="replaceable"><code>decimal_expr</code></em>)</code></a>
        sometimes generated a spurious truncation warning.
       (<a href="http://bugs.mysql.com/21976" target="_top">Bug#21976</a>)</p></li><li><p>
        yaSSL crashed on pre-Pentium Intel CPUs.
       (<a href="http://bugs.mysql.com/21765" target="_top">Bug#21765</a>)</p></li><li><p>
        A slave that used <code class="option">--master-ssl-cipher</code> could not
        connect to the master.
       (<a href="http://bugs.mysql.com/21611" target="_top">Bug#21611</a>)</p></li><li><p>
        Database and table names have a maximum length of 64 characters
        (even if they contain multi-byte characters), but were truncated
        to 64 bytes.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This improves on a previous fix made for this bug in MySQL
          5.1.12.
        </p></div><p>(<a href="http://bugs.mysql.com/21432" target="_top">Bug#21432</a>)</p></li><li><p>
        <code class="literal">InnoDB</code>: The first read statement, if served
        from the query cache, was not consistent with the <code class="literal">READ
        COMMITTED</code> isolation level.
       (<a href="http://bugs.mysql.com/21409" target="_top">Bug#21409</a>)</p></li><li><p>
        On Windows, if the server was installed as a service, it did not
        auto-detect the location of the data directory.
       (<a href="http://bugs.mysql.com/20376" target="_top">Bug#20376</a>)</p></li><li><p>
        Changing a <code class="literal">utf8</code> column in an
        <code class="literal">InnoDB</code> table to a shorter length did not
        shorten the data values.
       (<a href="http://bugs.mysql.com/20095" target="_top">Bug#20095</a>)</p></li><li><p>
        In some cases, the optimizer preferred a range or full index
        scan access method over lookup access methods when the latter
        were much cheaper.
       (<a href="http://bugs.mysql.com/19372" target="_top">Bug#19372</a>)</p></li><li><p>
        Conversion of <code class="literal">DATETIME</code> values in numeric
        contexts sometimes did not produce a double
        (<code class="literal">YYYYMMDDHHMMSS.uuuuuu</code>) value.
       (<a href="http://bugs.mysql.com/16546" target="_top">Bug#16546</a>)</p></li><li><p>
        <code class="literal">INSERT...ON DUPLICATE KEY UPDATE</code> could cause
        <code class="literal">Error 1032: Can't find record in ...</code> for
        inserts into an <code class="literal">InnoDB</code> table unique index
        using key column prefixes with an underlying
        <code class="literal">utf8</code> string column.
       (<a href="http://bugs.mysql.com/13191" target="_top">Bug#13191</a>)</p></li><li><p>
        Having the <code class="literal">EXECUTE</code> privilege for a routine in
        a database should make it possible to <code class="literal">USE</code>
        that database, but the server returned an error instead. This
        has been corrected. As a result of the change, <code class="literal">SHOW
        TABLES</code> for a database in which you have only the
        <code class="literal">EXECUTE</code> privilege returns an empty set rather
        than an error.
       (<a href="http://bugs.mysql.com/9504" target="_top">Bug#9504</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-17"></a>C.1.13. Changes in  MySQL 5.1.17 (04 April 2007)</h3></div></div></div><p class="release-level">
      This is a new Beta development release, fixing recently discovered
      bugs.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p class="release-non-production">
        This Beta release, as any other pre-production release, should
        not be installed on <span class="emphasis"><em>production</em></span> level
        systems or systems with critical data. It is good practice to
        back up your data before installing any new version of software.
        Although MySQL has worked very hard to ensure a high level of
        quality, protect your data by making a backup as you would for
        any software beta release. Please refer to our bug database at
        <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a> for more details about the
        individual bugs fixed in this version.
      </p></div><p>This section documents all changes and bug fixes that have been applied since the last official MySQL release. If you would like to receive more fine-grained and personalized <span class="emphasis"><em>update alerts</em></span> about fixes that are relevant to the version and features you use, please consider subscribing to <span class="emphasis"><em>MySQL Enterprise</em></span> (a commercial MySQL offering). For more details please see <a href="http://www.mysql.com/products/enterprise" target="_top">http://www.mysql.com/products/enterprise</a>.</p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Scheduled events now use the MySQL server time zone to determine
        their schedules, rather than UTC as in previous releases.
        Because of this change, scheduled event metadata now includes
        time zone information, which can be seen in the
        <code class="literal">TIME_ZONE</code> column of the
        <code class="literal">INFORMATION_SCHEMA.EVENTS</code> table and the
        <code class="literal">Time zone</code> column in the output of the
        <code class="literal">SHOW EVENTS</code> statement. These columns have
        been added in this release, along with a
        <code class="literal">time_zone</code> column in the
        <code class="literal">mysql.event</code> table. Due to these changes,
        events created in previous versions of MySQL cannot be created,
        viewed, or used until <code class="literal">mysql.event</code> has been
        upgraded.
       (<a href="http://bugs.mysql.com/16420" target="_top">Bug#16420</a>)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        The <code class="literal">CREATE EVENT</code> and <code class="literal">ALTER
        EVENT</code> statements now support a
        <code class="literal">DEFINER</code> clause, similar to that used in the
        <code class="literal">CREATE TRIGGER</code> statement.
      </p><p>
        See <a href="events.html#create-event" title="25.2.2. CREATE EVENT Syntax">Section 25.2.2, “<code class="literal">CREATE EVENT</code> Syntax”</a>, for detailed information.
       (<a href="http://bugs.mysql.com/16425" target="_top">Bug#16425</a>)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        The following options for controlling replication master
        configuration on a slave are now deprecated.
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="option">--master-host</code>
          </p></li><li><p>
            <code class="option">--master-user</code>
          </p></li><li><p>
            <code class="option">--master-password </code>
          </p></li><li><p>
            <code class="option">--master-port</code>
          </p></li><li><p>
            <code class="option">--master-connect-retry</code>
          </p></li><li><p>
            <code class="option">--master-ssl</code>
          </p></li><li><p>
            <code class="option">--master-ssl-ca</code>
          </p></li><li><p>
            <code class="option">--master-ssl-capath</code>
          </p></li><li><p>
            <code class="option">--master-ssl-cert</code>
          </p></li><li><p>
            <code class="option">--master-ssl-cipher</code>
          </p></li><li><p>
            <code class="option">--master-ssl-key</code>
          </p></li></ul></div><p>
        To change the master configuration on a slave you should use the
        <code class="literal">CHANGE MASTER</code> statement.
      </p><p>See also <a href="http://bugs.mysql.com/21490" target="_top">Bug#21490</a></p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Added the <code class="option">--skip-table-check</code> option (short form
        <code class="option">-s</code>) for <span><strong class="command">ndb_restore</strong></span>, which
        causes the restoration process to ignore any changes that may
        have occurred in table schemas after the backup was made.
        Previously, this was the default behavior.
      </p><p>
        See <a href="mysql-cluster.html#mysql-cluster-restore" title="20.9.3. ndb_restore — Restore a Cluster Backup">Section 20.9.3, “<span><strong class="command">ndb_restore</strong></span> — Restore a Cluster Backup”</a>, for more
        information.
       (<a href="http://bugs.mysql.com/24363" target="_top">Bug#24363</a>)</p></li><li><p>
        Added a <code class="option">--no-beep</code> option to
        <span><strong class="command">mysqladmin</strong></span>. It suppresses the warning beep
        that is emitted by default for errors such as a failure to
        connect to the server.
       (<a href="http://bugs.mysql.com/26964" target="_top">Bug#26964</a>)</p></li><li><p>
        Added the <code class="option">--service-startup-timeout</code> option for
        <span><strong class="command">mysql.server</strong></span> to specify how long to wait for
        the server to start. If the server does not start within the
        timeout period, <span><strong class="command">mysql.server</strong></span> exits with an
        error.
       (<a href="http://bugs.mysql.com/26952" target="_top">Bug#26952</a>)</p></li><li><p>
        Prefix lengths for columns in <code class="literal">SPATIAL</code> indexes
        can no longer be specified. For tables created in older versions
        of MySQL that have <code class="literal">SPATIAL</code> indexes containing
        prefixed columns, dumping and reloading the table causes the
        indexes to be created with no prefixes. (The full column width
        of each column is indexed.)
       (<a href="http://bugs.mysql.com/26794" target="_top">Bug#26794</a>)</p></li><li><p>
        Added the <code class="literal">innodb_stats_on_metadata</code> system
        variable to enable control over whether
        <code class="literal">InnoDB</code> performs statistics gathering when
        metadata statements are executed. See
        <a href="storage-engines.html#innodb-parameters" title="13.5.4. InnoDB Startup Options and System Variables">Section 13.5.4, “<code class="literal">InnoDB</code> Startup Options and System Variables”</a>.
       (<a href="http://bugs.mysql.com/26598" target="_top">Bug#26598</a>)</p></li><li><p>
        Statements that affect <code class="literal">mysql</code> database tables
        now are written to the binary log using the following rules:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Data manipulation statements such as
            <code class="literal">INSERT</code> that change data in
            <code class="literal">mysql</code> database tables directly are logged
            according to the settings of the
            <code class="literal">binlog_format</code> system variable.
          </p></li><li><p>
            Statements such as <code class="literal">GRANT</code> that change the
            <code class="literal">mysql</code> database indirectly are logged as
            statements regardless of the value of
            <code class="literal">binlog_format</code>.
          </p></li></ul></div><p>
        For more details, see
        <a href="server-administration.html#binary-log-mysql-database" title="5.2.4.4. Logging Format for Changes to mysql Database Tables">Section 5.2.4.4, “Logging Format for Changes to <code class="literal">mysql</code> Database Tables”</a>.
       (<a href="http://bugs.mysql.com/25091" target="_top">Bug#25091</a>)</p></li><li><p>
        The server now includes a timestamp in error messages that are
        logged as a result of unhandled signals (such as <code class="literal">mysqld
        got signal 11</code> messages).
       (<a href="http://bugs.mysql.com/24878" target="_top">Bug#24878</a>)</p></li><li><p>
        The syntax for index hints has been extended to enable more
        fine-grained control over the optimizer's selection of an
        execution plan for various phases of query processing. See
        <a href="sql-syntax.html#index-hints" title="12.2.7.2. Index Hint Syntax">Section 12.2.7.2, “Index Hint Syntax”</a>.
       (<a href="http://bugs.mysql.com/21174" target="_top">Bug#21174</a>)</p></li><li><p>
        Added the <code class="option">--secure-file-priv</code> option for
        <span><strong class="command">mysqld</strong></span>, which limits the effect of the
        <a href="functions.html#function_load-file"><code class="literal">LOAD_FILE()</code></a> function
        and the <code class="literal">LOAD DATA</code> and <code class="literal">SELECT ...
        INTO OUTFILE</code> statements to work only with files in a
        given directory.
       (<a href="http://bugs.mysql.com/18628" target="_top">Bug#18628</a>)</p></li><li><p>
        Added the <code class="literal">thread_handling</code> system variable to
        control whether the server use a single thread or one thread per
        connection. The <code class="option">--one-thread</code> option now is
        deprecated; use <code class="option">--thread_handling=one-thread</code>
        instead.
      </p></li><li><p>
        Prepared statements now use the query cache under the conditions
        described in <a href="optimization.html#query-cache-how" title="7.5.4.1. How the Query Cache Operates">Section 7.5.4.1, “How the Query Cache Operates”</a>.
       (<a href="http://bugs.mysql.com/735" target="_top">Bug#735</a>)</p></li><li><p>
        Statements such as <code class="literal">GRANT</code> that change the
        <code class="literal">mysql</code> database indirectly are logged as
        statements regardless of the value of
        <code class="literal">binlog_format</code>.
      </p></li><li><p>
        Added the <code class="literal">hostname</code> system variable, which the
        server sets at startup to the server hostname.
      </p></li><li><p>
        Online (non-copying) <code class="literal">ADD INDEX</code> and
        <code class="literal">DROP INDEX</code> operations are now performed on
        dynamic (variable-width) columns. Renaming of
        <code class="literal">NDB</code> and <code class="literal">MyISAM</code> tables and
        of columns in such tables is now performed without copying or
        locking the tables. As a result, these operations are now
        performed much more quickly than previously.
      </p><p>
        See <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax">Section 12.1.4, “<code class="literal">ALTER TABLE</code> Syntax”</a>,
        <a href="sql-syntax.html#create-index" title="12.1.7. CREATE INDEX Syntax">Section 12.1.7, “<code class="literal">CREATE INDEX</code> Syntax”</a>, and
        <a href="sql-syntax.html#drop-index" title="12.1.13. DROP INDEX Syntax">Section 12.1.13, “<code class="literal">DROP INDEX</code> Syntax”</a>, for more information.
      </p></li><li><p>
        Data manipulation statements such as <code class="literal">INSERT</code>
        that change data in <code class="literal">mysql</code> database tables
        directly are logged according to the settings of the
        <code class="literal">binlog_format</code> system variable.
      </p></li><li><p>
        Added the <code class="literal">old_mode</code> system variable to cause
        the server to revert to certain behaviors present in older
        versions. Currently, this variable affects handling of index
        hints. See <a href="sql-syntax.html#index-hints" title="12.2.7.2. Index Hint Syntax">Section 12.2.7.2, “Index Hint Syntax”</a>.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        <code class="literal">INSERT DELAYED</code> statements are not supported
        for <code class="literal">MERGE</code> tables, but the
        <code class="literal">MERGE</code> storage engine was not rejecting such
        statements, resulting in table corruption. Applications
        previously using <code class="literal">INSERT DELAYED</code> into
        <code class="literal">MERGE</code> table will break when upgrading to
        versions with this fix. To avoid the problem, remove
        <code class="literal">DELAYED</code> from such statements.
       (<a href="http://bugs.mysql.com/26464" target="_top">Bug#26464</a>)</p></li><li><p><span class="bold"><strong>Important Note</strong></span>: 
        The parser accepted invalid code in SQL condition handlers,
        leading to server crashes or unexpected execution behavior in
        stored programs. Specifically, the parser allowed a condition
        handler to refer to labels for blocks that enclose the handler
        declaration. This was incorrect because block label scope does
        not include the code for handlers declared within the labeled
        block.
      </p><p>
        The parser now rejects this invalid construct, but if you
        upgrade in place (without dumping and reloading your databases),
        existing handlers that contain the construct are still invalid
        — <span class="emphasis"><em>even if they appear to function as you
        expect</em></span> — and should be rewritten.
      </p><p>
        To find affected handlers, use <span><strong class="command">mysqldump</strong></span> to
        dump all stored functions and procedures, triggers, and events.
        Then attempt to reload them into an upgraded server. Handlers
        that contain illegal label references will be rejected.
      </p><p>
        For more information about condition handlers and writing them
        to avoid invalid jumps, see <a href="stored-procedures.html#declare-handlers" title="23.2.10.2. DECLARE Handlers">Section 23.2.10.2, “<code class="literal">DECLARE</code> Handlers”</a>.
       (<a href="http://bugs.mysql.com/26503" target="_top">Bug#26503</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        It was not possible to set
        <code class="literal">LockPagesInMainMemory</code> equal to
        <code class="literal">0</code>.
       (<a href="http://bugs.mysql.com/27291" target="_top">Bug#27291</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A race condition could sometimes occur if the node acting as
        master failed while node IDs were still being allocated during
        startup.
       (<a href="http://bugs.mysql.com/27286" target="_top">Bug#27286</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When a data node was taking over as the master node, a race
        condition could sometimes occur as the node was assuming
        responsibility for handling of global checkpoints.
       (<a href="http://bugs.mysql.com/27283" target="_top">Bug#27283</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        After putting the cluster in single user mode from one MySQL
        server, trying to drop an <code class="literal">NDB</code> table from a
        second MySQL server also connected to the cluster would cause
        the second MySQL server to hang.
       (<a href="http://bugs.mysql.com/27254" target="_top">Bug#27254</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">mysqld</strong></span> could crash shortly after a data node
        failure following certain DML operations.
       (<a href="http://bugs.mysql.com/27169" target="_top">Bug#27169</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Disk Data): Under some circumstances, a data node could fail
        during restart while flushing Disk Data UNDO logs.
       (<a href="http://bugs.mysql.com/27102" target="_top">Bug#27102</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The same failed request from an API node could be handled by the
        cluster multiple times, resulting in reduced performance.
       (<a href="http://bugs.mysql.com/27087" target="_top">Bug#27087</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The failure of a data node while restarting could cause other
        data nodes to hang or crash.
       (<a href="http://bugs.mysql.com/27003" target="_top">Bug#27003</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Creating a table on one SQL node while in single user mode
        caused other SQL nodes to crash.
       (<a href="http://bugs.mysql.com/26997" target="_top">Bug#26997</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">mysqld</strong></span> processes would sometimes crash under
        high load.
       (<a href="http://bugs.mysql.com/26825" target="_top">Bug#26825</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Using only the <code class="option">--print_data</code> option (and no
        other options) with <span><strong class="command">ndb_restore</strong></span> caused
        <span><strong class="command">ndb_restore</strong></span> to fail.
       (<a href="http://bugs.mysql.com/26741" target="_top">Bug#26741</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/14612" target="_top">Bug#14612</a></p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The output from <span><strong class="command">ndb_restore
        <code class="option">--print_data</code></strong></span> was incorrect for a
        backup made of a database containing tables with
        <code class="literal">TINYINT</code> or <code class="literal">SMALLINT</code>
        columns.
       (<a href="http://bugs.mysql.com/26740" target="_top">Bug#26740</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An infinite loop in an internal logging function could cause
        trace logs to fill up with <span class="errortext">Unknown Signal
        type</span> error messages and thus grow to unreasonable
        sizes.
       (<a href="http://bugs.mysql.com/26720" target="_top">Bug#26720</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An invalid pointer was returned following a
        <code class="literal">FSCLOSECONF</code> signal when accessing the REDO
        logs during a node restart or system restart.
       (<a href="http://bugs.mysql.com/26515" target="_top">Bug#26515</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The management client command <code class="literal">
        <em class="replaceable"><code>node_id</code></em> STATUS</code> displayed
        the message <code class="literal">Node <em class="replaceable"><code>node_id</code></em>:
        not connected</code> when <em class="replaceable"><code>node_id</code></em>
        was not the node ID of a data node.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The <code class="literal">ALL STATUS</code> command in the cluster
          management client still displays status information for data
          nodes only. This is by design. See
          <a href="mysql-cluster.html#mysql-cluster-mgm-client-commands" title="20.7.2. Commands in the MySQL Cluster Management Client">Section 20.7.2, “Commands in the MySQL Cluster Management Client”</a>,
          for more information.
        </p></div><p>(<a href="http://bugs.mysql.com/21715" target="_top">Bug#21715</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When performing an upgrade or downgrade, no specific error
        information was made available when trying to upgrade data nodes
        or SQL nodes before upgrading management nodes.
       (<a href="http://bugs.mysql.com/21296" target="_top">Bug#21296</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Some values of <code class="literal">MaxNoOfTables</code> caused the error
        <span class="errortext">Job buffer congestion</span> to occur.
       (<a href="http://bugs.mysql.com/19378" target="_top">Bug#19378</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        A memory overflow could occur with tables having a large amount
        of data stored on disk, or with queries using a very high degree
        of parallelism on Disk Data tables.
       (<a href="http://bugs.mysql.com/26514" target="_top">Bug#26514</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Use of a tablespace whose <code class="literal">INITIAL_SIZE</code> was
        greater than 1 GB could cause the cluster to crash.
       (<a href="http://bugs.mysql.com/26487" target="_top">Bug#26487</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Creating multiple Disk Data tables using different tablespaces
        could sometimes cause the cluster to fail.
       (<a href="http://bugs.mysql.com/25992" target="_top">Bug#25992</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        <code class="literal">ALTER TABLE ... ADD COLUMN ...</code> on a Disk Data
        table moved data for existing non-indexed columns from the
        tablespace into memory.
       (<a href="http://bugs.mysql.com/25880" target="_top">Bug#25880</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        <code class="literal">DROP INDEX</code> on a Disk Data table did not
        always move data from memory into the tablespace.
       (<a href="http://bugs.mysql.com/25877" target="_top">Bug#25877</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        When creating a log file group, setting
        <code class="literal">INITIAL_SIZE</code> to less than
        <code class="literal">UNDO_BUFFER_SIZE</code> caused data nodes to crash.
       (<a href="http://bugs.mysql.com/25743" target="_top">Bug#25743</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        The simultaneous failure of a data node and an SQL node could
        cause replication to fail.
       (<a href="http://bugs.mysql.com/27005" target="_top">Bug#27005</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        A delete operation using a scan followed by an insert using a
        scan could cause a data node to fail.
       (<a href="http://bugs.mysql.com/27203" target="_top">Bug#27203</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        (Cluster APIs): <code class="literal">NAND</code> and
        <code class="literal">NOR</code> operations with
        <code class="literal">NdbScanFilter</code> did not perform correctly.
       (<a href="http://bugs.mysql.com/24568" target="_top">Bug#24568</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        You can now use the
        <code class="literal">ndb_mgm_check_connection()</code> function to
        determine whether a management server is running. See
        <a href="http://dev.mysql.com/doc/ndbapi/en/ndb-mgm-check-connection.html" target="_top"><code class="literal">ndb_mgm_check_connection()</code></a>.
      </p></li><li><p>
        <code class="literal">SELECT ... INTO OUTFILE</code> with a long
        <code class="literal">FIELDS ENCLOSED BY</code> value could crash the
        server.
       (<a href="http://bugs.mysql.com/27231" target="_top">Bug#27231</a>)</p></li><li><p>
        An <code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code>
        statement might modify values in a table but not flush affected
        data from the query cache, causing subsequent selects to return
        stale results. This made the combination of query cache plus
        <code class="literal">ON DUPLICATE KEY UPDATE</code> very unreliable.
       (<a href="http://bugs.mysql.com/27210" target="_top">Bug#27210</a>)</p><p>See also <a href="http://bugs.mysql.com/27006" target="_top">Bug#27006</a>, <a href="http://bugs.mysql.com/27033" target="_top">Bug#27033</a></p><p>This regression was introduced by <a href="http://bugs.mysql.com/19978" target="_top">Bug#19978</a></p></li><li><p>
        For <code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code>
        statements on tables containing
        <code class="literal">AUTO_INCREMENT</code> columns,
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> was reset to 0
        if no rows were successfully inserted or changed. “<span class="quote">Not
        changed</span>” includes the case where a row was updated to its
        current values, but in that case,
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> should
        not be reset to 0. Now
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> is
        reset to 0 only if no rows were successfully inserted or
        touched, whether or not touched rows were changed.
       (<a href="http://bugs.mysql.com/27033" target="_top">Bug#27033</a>)</p><p>See also <a href="http://bugs.mysql.com/27210" target="_top">Bug#27210</a>, <a href="http://bugs.mysql.com/27006" target="_top">Bug#27006</a></p><p>This regression was introduced by <a href="http://bugs.mysql.com/19978" target="_top">Bug#19978</a></p></li><li><p>
        Invalid optimization of pushdown conditions for queries where an
        outer join was guaranteed to read only one row from the outer
        table led to results with too few rows.
       (<a href="http://bugs.mysql.com/26963" target="_top">Bug#26963</a>)</p></li><li><p>
        For <code class="literal">MERGE</code> tables defined on underlying tables
        that contained a short <code class="literal">VARCHAR</code> column
        (shorter than four characters), using <code class="literal">ALTER
        TABLE</code> on at least one but not all of the underlying
        tables caused the table definitions to be considered different
        from that of the <code class="literal">MERGE</code> table, even if the
        <code class="literal">ALTER TABLE</code> did not change the definition.
       (<a href="http://bugs.mysql.com/26881" target="_top">Bug#26881</a>)</p></li><li><p>
        Use of a subquery containing <code class="literal">GROUP BY</code> and
        <code class="literal">WITH ROLLUP</code> caused a server crash.
       (<a href="http://bugs.mysql.com/26830" target="_top">Bug#26830</a>)</p></li><li><p>
        Setting <code class="literal">event_scheduler=1</code> or
        <code class="literal">event_scheduler=ON</code> caused the server to crash
        if the server had been started with
        <code class="option">--skip-grant-tables</code>. Starting the server with
        <code class="option">--skip-grant-tables</code> now causes
        <code class="literal">event_scheduler</code> to be set to
        <code class="literal">DISABLED</code> automatically, overriding any other
        value that may have been set.
       (<a href="http://bugs.mysql.com/26807" target="_top">Bug#26807</a>)</p></li><li><p>
        Added support for <code class="option">--debugger=dbx</code> for
        <span><strong class="command">mysql-test-run.pl</strong></span> and added support for
        <code class="option">--debugger=devenv</code>,
        <code class="option">--debugger=DevEnv</code>, and
        <code class="option">--debugger=<em class="replaceable"><code>/path/to</code></em>/devenv</code>.
       (<a href="http://bugs.mysql.com/26792" target="_top">Bug#26792</a>)</p></li><li><p>
        A result set column formed by concatention of string literals
        was incomplete when the column was produced by a subquery in the
        <code class="literal">FROM</code> clause.
       (<a href="http://bugs.mysql.com/26738" target="_top">Bug#26738</a>)</p></li><li><p>
        SSL connections failed on Windows.
       (<a href="http://bugs.mysql.com/26678" target="_top">Bug#26678</a>)</p></li><li><p>
        When using the result of
        <a href="functions.html#function_sec-to-time"><code class="literal">SEC_TO_TIME()</code></a> for time
        value greater than 24 hours in an <code class="literal">ORDER BY</code>
        clause, either directly or through a column alias, the rows were
        sorted incorrectly as strings.
       (<a href="http://bugs.mysql.com/26672" target="_top">Bug#26672</a>)</p></li><li><p>
        Use of a subquery containing a <code class="literal">UNION</code> with an
        invalid <code class="literal">ORDER BY</code> clause caused a server
        crash.
       (<a href="http://bugs.mysql.com/26661" target="_top">Bug#26661</a>)</p></li><li><p>
        In some error messages, inconsistent format specifiers were used
        for the translations in different languages.
        <span><strong class="command">comp_err</strong></span> (the error message compiler) now
        checks for mismatches.
       (<a href="http://bugs.mysql.com/26571" target="_top">Bug#26571</a>)</p></li><li><p>
        Views that used a scalar correlated subquery returned incorrect
        results.
       (<a href="http://bugs.mysql.com/26560" target="_top">Bug#26560</a>)</p></li><li><p>
        <code class="literal">UNHEX() IS NULL</code> comparisons failed when
        <a href="functions.html#function_unhex"><code class="literal">UNHEX()</code></a> returned
        <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/26537" target="_top">Bug#26537</a>)</p></li><li><p>
        On 64-bit Windows, large timestamp values could be handled
        incorrectly.
       (<a href="http://bugs.mysql.com/26536" target="_top">Bug#26536</a>)</p></li><li><p>
        <code class="literal">SHOW CREATE EVENT</code> failed to display the
        <code class="literal">STARTS</code> and <code class="literal">ENDS</code> clauses
        for an event defined with <code class="literal">STARTS NOW()</code>,
        <code class="literal">ENDS NOW()</code>, or both.
       (<a href="http://bugs.mysql.com/26429" target="_top">Bug#26429</a>)</p></li><li><p>
        If the server was started with
        <code class="option">--skip-grant-tables</code>, Selecting from
        <code class="literal">INFORMATION_SCHEMA</code> tables causes a server
        crash.
       (<a href="http://bugs.mysql.com/26285" target="_top">Bug#26285</a>)</p></li><li><p>
        For some values of the position argument, the
        <a href="functions.html#function_insert"><code class="literal">INSERT()</code></a> function
        could insert a NUL byte into the result.
       (<a href="http://bugs.mysql.com/26281" target="_top">Bug#26281</a>)</p></li><li><p>
        For an <code class="literal">INSERT</code> statement that should fail due
        to a column with no default value not being assigned a value,
        the statement succeeded with no error if the column was assigned
        a value in an <code class="literal">ON DUPLICATE KEY UPDATE</code> clause,
        even if that clause was not used.
       (<a href="http://bugs.mysql.com/26261" target="_top">Bug#26261</a>)</p></li><li><p>
        <code class="literal">INSERT DELAYED</code> statements inserted incorrect
        values into <code class="literal">BIT</code> columns.
       (<a href="http://bugs.mysql.com/26238" target="_top">Bug#26238</a>)</p></li><li><p>
        A query of type <code class="literal">index_merge</code>, and with a
        <code class="literal">WHERE</code> clause having the form <code class="literal">WHERE
        <em class="replaceable"><code>indexed_column_1</code></em>=<em class="replaceable"><code>value_1</code></em>
        OR
        <em class="replaceable"><code>indexed_column_2</code></em>=<em class="replaceable"><code>value_2</code></em>
        </code> on a partitioned table caused the server to crash.
       (<a href="http://bugs.mysql.com/26117" target="_top">Bug#26117</a>)</p></li><li><p>
        A multiple-row delayed insert with an auto-increment column
        could cause duplicate entries to be created on the slave in a
        replication environment.
       (<a href="http://bugs.mysql.com/26116" target="_top">Bug#26116</a>, <a href="http://bugs.mysql.com/25507" target="_top">Bug#25507</a>)</p></li><li><p>
        <a href="functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a> did not work
        correctly for expressions that produced a
        <code class="literal">DECIMAL</code> result.
       (<a href="http://bugs.mysql.com/26093" target="_top">Bug#26093</a>)</p></li><li><p>
        For <code class="literal">MEMORY</code> tables, extending the length of a
        <code class="literal">VARCHAR</code> column with <code class="literal">ALTER
        TABLE</code> might result in an unusable table.
       (<a href="http://bugs.mysql.com/26080" target="_top">Bug#26080</a>)</p></li><li><p>
        The server could hang during binary log rotation.
       (<a href="http://bugs.mysql.com/26079" target="_top">Bug#26079</a>)</p></li><li><p>
        <code class="literal">LOAD DATA INFILE</code> sent an okay to the client
        before writing the binary log and committing the changes to the
        table had finished, thus violating ACID requirements.
       (<a href="http://bugs.mysql.com/26050" target="_top">Bug#26050</a>)</p></li><li><p>
        <code class="literal">X() IS NULL</code> and <code class="literal">Y() IS
        NULL</code> comparisons failed when
        <a href="spatial-extensions.html#function_x"><code class="literal">X()</code></a> and
        <a href="spatial-extensions.html#function_y"><code class="literal">Y()</code></a> returned
        <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/26038" target="_top">Bug#26038</a>)</p></li><li><p>
        Indexes on <code class="literal">TEXT</code> columns were ignored when
        <code class="literal">ref</code> accesses were evaluated.
       (<a href="http://bugs.mysql.com/25971" target="_top">Bug#25971</a>)</p></li><li><p>
        If a thread previously serviced a connection that was killed,
        excessive memory and CPU use by the thread occurred if it later
        serviced a connection that had to wait for a table lock.
       (<a href="http://bugs.mysql.com/25966" target="_top">Bug#25966</a>)</p></li><li><p>
        <code class="literal">VIEW</code> restrictions were applied to
        <code class="literal">SELECT</code> statements after a <code class="literal">CREATE
        VIEW</code> statement failed, as though the
        <code class="literal">CREATE</code> had succeeded.
       (<a href="http://bugs.mysql.com/25897" target="_top">Bug#25897</a>)</p></li><li><p>
        Several deficiencies in resolution of column names for
        <code class="literal">INSERT ... SELECT</code> statements were corrected.
       (<a href="http://bugs.mysql.com/25831" target="_top">Bug#25831</a>)</p></li><li><p>
        Inserting <code class="literal">utf8</code> data into a
        <code class="literal">TEXT</code> column that used a single-byte character
        set could result in spurious warnings about truncated data.
       (<a href="http://bugs.mysql.com/25815" target="_top">Bug#25815</a>)</p></li><li><p>
        On Windows, debug builds of <span><strong class="command">mysqld</strong></span> could fail
        with heap assertions.
       (<a href="http://bugs.mysql.com/25765" target="_top">Bug#25765</a>)</p></li><li><p>
        In certain cases it could happen that deleting a row corrupted
        an <code class="literal">RTREE</code> index. This affected indexes on
        spatial columns.
       (<a href="http://bugs.mysql.com/25673" target="_top">Bug#25673</a>)</p></li><li><p>
        Using <span><strong class="command">mysqlbinlog</strong></span> on a binary log would crash
        if there were a large number of row-based events related to a
        single statement.
       (<a href="http://bugs.mysql.com/25628" target="_top">Bug#25628</a>)</p></li><li><p>
        Expressions involving <a href="functions.html#function_sum"><code class="literal">SUM()</code></a>,
        when used in an <code class="literal">ORDER BY</code> clause, could lead
        to out-of-order results.
       (<a href="http://bugs.mysql.com/25376" target="_top">Bug#25376</a>)</p></li><li><p>
        Use of a <code class="literal">GROUP BY</code> clause that referred to a
        stored function result together with <code class="literal">WITH
        ROLLUP</code> caused incorrect results.
       (<a href="http://bugs.mysql.com/25373" target="_top">Bug#25373</a>)</p></li><li><p>
        A stored procedure that made use of cursors failed when the
        procedure was invoked from a stored function.
       (<a href="http://bugs.mysql.com/25345" target="_top">Bug#25345</a>)</p></li><li><p>
        On Windows, the server exhibited a file-handle leak after
        reaching the limit on the number of open file descriptors.
       (<a href="http://bugs.mysql.com/25222" target="_top">Bug#25222</a>)</p></li><li><p>
        The <a href="functions.html#function_repeat"><code class="literal">REPEAT()</code></a> function did not
        allow a column name as the <em class="replaceable"><code>count</code></em>
        parameter.
       (<a href="http://bugs.mysql.com/25197" target="_top">Bug#25197</a>)</p></li><li><p>
        Duplicating the usage of a user variable in a stored procedure
        or trigger would not be replicated correctly to the slave.
       (<a href="http://bugs.mysql.com/25167" target="_top">Bug#25167</a>)</p></li><li><p>
        A reference to a non-existent column in the <code class="literal">ORDER
        BY</code> clause of an <code class="literal">UPDATE ... ORDER BY</code>
        statement could cause a server crash.
       (<a href="http://bugs.mysql.com/25126" target="_top">Bug#25126</a>)</p></li><li><p>
        A view on a join is insertable for <code class="literal">INSERT</code>
        statements that store values into only one table of the join.
        However, inserts were being rejected if the inserted-into table
        was used in a self-join because MySQL incorrectly was
        considering the insert to modify multiple tables of the view.
       (<a href="http://bugs.mysql.com/25122" target="_top">Bug#25122</a>)</p></li><li><p>
        Creating a table with latin characters in the name caused the
        output of <code class="literal">SHOW FULL TABLES</code> to have
        <code class="literal">ERROR</code> for the table type.
       (<a href="http://bugs.mysql.com/25081" target="_top">Bug#25081</a>)</p></li><li><p>
        MySQL would not compile when configured using
        <code class="option">--without-query-cache</code>.
       (<a href="http://bugs.mysql.com/25075" target="_top">Bug#25075</a>)</p></li><li><p>
        It was not possible to use XPath keywords as tag names for
        expressions used in the
        <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> function.
       (<a href="http://bugs.mysql.com/24747" target="_top">Bug#24747</a>)</p></li><li><p>
        Increasing the width of a <code class="literal">DECIMAL</code> column
        could cause column values to be changed.
       (<a href="http://bugs.mysql.com/24558" target="_top">Bug#24558</a>)</p></li><li><p>
        IF(<em class="replaceable"><code>expr</code></em>,
        <em class="replaceable"><code>unsigned_expr</code></em>,
        <em class="replaceable"><code>unsigned_expr</code></em>) was evaluated to a
        signed result, not unsigned. This has been corrected. The fix
        also affects constructs of the form <code class="literal">IS [NOT]
        {TRUE|FALSE}</code>, which were transformed internally into
        <a href="functions.html#function_if"><code class="literal">IF()</code></a> expressions that evaluated
        to a signed result.
      </p><p>
        For existing views that were defined using <code class="literal">IS [NOT]
        {TRUE|FALSE}</code> constructs, there is a related
        implication. The definitions of such views were stored using the
        <a href="functions.html#function_if"><code class="literal">IF()</code></a> expression, not
        the original construct. This is manifest in that <code class="literal">SHOW
        CREATE VIEW</code> shows the transformed
        <a href="functions.html#function_if"><code class="literal">IF()</code></a> expression, not the
        original one. Existing views will evaluate correctly after the
        fix, but if you want <code class="literal">SHOW CREATE VIEW</code> to
        display the original construct, you must drop the view and
        re-create it using its original definition. New views will
        retain the construct in their definition.
       (<a href="http://bugs.mysql.com/24532" target="_top">Bug#24532</a>)</p></li><li><p>
        <code class="literal">DROP TRIGGER</code> statements would not be filtered
        on the slave when using the
        <code class="literal">replication-wild-do-table</code> option.
       (<a href="http://bugs.mysql.com/24478" target="_top">Bug#24478</a>)</p></li><li><p>
        For <code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code>
        statements where some <code class="literal">AUTO_INCREMENT</code> values
        were generated automatically for inserts and some rows were
        updated, one auto-generated value was lost per updated row,
        leading to faster exhaustion of the range of the
        <code class="literal">AUTO_INCREMENT</code> column.
      </p><p>
        Because the original problem can affect replication (different
        values on master and slave), it is recommended that the master
        and its slaves be upgraded to the current version.
       (<a href="http://bugs.mysql.com/24432" target="_top">Bug#24432</a>)</p></li><li><p>
        <code class="literal">SHOW ENGINE MUTEX STATUS</code> failed to produce an
        <span class="errortext">Unknown table engine</span> error.
      </p><p>
        See <a href="sql-syntax.html#show-engine" title="12.5.5.15. SHOW ENGINE Syntax">Section 12.5.5.15, “<code class="literal">SHOW ENGINE</code> Syntax”</a>.
       (<a href="http://bugs.mysql.com/24392" target="_top">Bug#24392</a>)</p></li><li><p>
        A user-defined variable could be assigned an incorrect value if
        a temporary table was employed in obtaining the result of the
        query used to determine its value.
       (<a href="http://bugs.mysql.com/24010" target="_top">Bug#24010</a>)</p></li><li><p>
        <span><strong class="command">mysqlimport</strong></span> used a variable of the wrong type
        for the <code class="option">--use-threads</code> option, which could cause
        a crash on some architectures.
       (<a href="http://bugs.mysql.com/23814" target="_top">Bug#23814</a>)</p></li><li><p>
        Queries that used a temporary table for the outer query when
        evaluating a correlated subquery could return incorrect results.
       (<a href="http://bugs.mysql.com/23800" target="_top">Bug#23800</a>)</p></li><li><p>
        Replication between master and slave would infinitely retry
        binary log transmission where the
        <code class="option">max_allowed_packet</code> on the master was larger
        than that on the slave if the size of the transfer was between
        these two values.
       (<a href="http://bugs.mysql.com/23775" target="_top">Bug#23775</a>)</p></li><li><p>
        On Windows, debug builds of <span><strong class="command">mysqlbinlog</strong></span> could
        fail with a memory error.
       (<a href="http://bugs.mysql.com/23736" target="_top">Bug#23736</a>)</p></li><li><p>
        When using certain server SQL modes, the
        <code class="literal">mysql.proc</code> table was not created by
        <span><strong class="command">mysql_install_db</strong></span>.
       (<a href="http://bugs.mysql.com/23669" target="_top">Bug#23669</a>)</p></li><li><p>
        <code class="literal">DOUBLE</code> values such as
        <code class="literal">20070202191048.000000</code> were being treated as
        illegal arguments by <a href="functions.html#function_week"><code class="literal">WEEK()</code></a>.
       (<a href="http://bugs.mysql.com/23616" target="_top">Bug#23616</a>)</p></li><li><p>
        The server could crash if two or more threads initiated query
        cache resize operation at moments very close in time.
       (<a href="http://bugs.mysql.com/23527" target="_top">Bug#23527</a>)</p></li><li><p>
        <a href="functions.html#function_now"><code class="literal">NOW()</code></a> returned the wrong value
        in statements executed at server startup with the
        <code class="option">--init-file</code> option.
       (<a href="http://bugs.mysql.com/23240" target="_top">Bug#23240</a>)</p></li><li><p>
        Setting the <code class="literal">slow_query_log_file</code> system
        variable caused log output to go tothe general log, not the slow
        query log.
       (<a href="http://bugs.mysql.com/23225" target="_top">Bug#23225</a>)</p></li><li><p>
        When nesting stored procedures within a trigger on a table, a
        false dependency error was thrown when one of the nested
        procedures contained a <code class="literal">DROP TABLE</code> statement.
       (<a href="http://bugs.mysql.com/22580" target="_top">Bug#22580</a>)</p></li><li><p>
        Instance Manager did not remove the angel PID file on a clean
        shutdown.
       (<a href="http://bugs.mysql.com/22511" target="_top">Bug#22511</a>)</p></li><li><p>
        <code class="literal">EXPLAIN EXTENDED</code> did not show
        <code class="literal">WHERE</code> conditions that were optimized away.
       (<a href="http://bugs.mysql.com/22331" target="_top">Bug#22331</a>)</p></li><li><p>
        <code class="literal">IN ((<em class="replaceable"><code>subquery</code></em>))</code>,
        <code class="literal">IN (((<em class="replaceable"><code>subquery</code></em>)))</code>,
        and so forth, are equivalent to <code class="literal">IN
        (<em class="replaceable"><code>subquery</code></em>)</code>, which is always
        interpreted as a table subquery (so that it is allowed to return
        more than one row). MySQL was treating the
        “<span class="quote">over-parenthesized</span>” subquery as a single-row
        subquery and rejecting it if it returned more than one row. This
        bug primarily affected automatically generated code (such as
        queries generated by Hibernate), because humans rarely write the
        over-parenthesized forms.
       (<a href="http://bugs.mysql.com/21904" target="_top">Bug#21904</a>)</p></li><li><p>
        An <code class="literal">INSERT</code> trigger invoking a stored routine
        that inserted into a table other than the one on which the
        trigger was defined would fail with a <span class="errortext">Table '...'
        doesn't exist</span> referring to the second table when
        attempting to delete records from the first table.
       (<a href="http://bugs.mysql.com/21825" target="_top">Bug#21825</a>)</p></li><li><p>
        <a href="functions.html#function_curdate"><code class="literal">CURDATE()</code></a> is less than
        <a href="functions.html#function_now"><code class="literal">NOW()</code></a>, either when
        comparing <a href="functions.html#function_curdate"><code class="literal">CURDATE()</code></a>
        directly (<code class="literal">CURDATE() &lt; NOW()</code> is true) or
        when casting
        <a href="functions.html#function_curdate"><code class="literal">CURDATE()</code></a> to
        <code class="literal">DATE</code> (<code class="literal">CAST(CURDATE() AS DATE) &lt;
        NOW()</code> is true). However, storing
        <a href="functions.html#function_curdate"><code class="literal">CURDATE()</code></a> in a
        <code class="literal">DATE</code> column and comparing <code class="literal">
        <em class="replaceable"><code>col_name</code></em> &lt; NOW()</code>
        incorrectly yielded false. This is fixed by comparing a
        <code class="literal">DATE</code> column as <code class="literal">DATETIME</code>
        for comparisons to a <code class="literal">DATETIME</code> constant.
       (<a href="http://bugs.mysql.com/21103" target="_top">Bug#21103</a>)</p></li><li><p>
        When a stored routine attempted to execute a statement accessing
        a nonexistent table, the error was not caught by the routine's
        exception handler.
       (<a href="http://bugs.mysql.com/20713" target="_top">Bug#20713</a>, <a href="http://bugs.mysql.com/8407" target="_top">Bug#8407</a>)</p></li><li><p>
        For a stored procedure containing a <code class="literal">SELECT</code>
        statement that used a complicated join with an
        <code class="literal">ON</code> expression, the expression could be
        ignored during re-execution of the procedure, yielding an
        incorrect result.
       (<a href="http://bugs.mysql.com/20492" target="_top">Bug#20492</a>)</p></li><li><p>
        The conditions checked by the optimizer to allow use of indexes
        in <code class="literal">IN</code> predicate calculations were
        unnecessarily tight and were relaxed.
       (<a href="http://bugs.mysql.com/20420" target="_top">Bug#20420</a>)</p></li><li><p>
        When a <a href="functions.html#function_time-format"><code class="literal">TIME_FORMAT()</code></a> expression
        was used as a column in a <code class="literal">GROUP BY</code> clause,
        the expression result was truncated.
       (<a href="http://bugs.mysql.com/20293" target="_top">Bug#20293</a>)</p></li><li><p>
        The creation of MySQL system tables was not checked for by
        <span><strong class="command">mysql-test-run.pl</strong></span>.
       (<a href="http://bugs.mysql.com/20166" target="_top">Bug#20166</a>)</p></li><li><p>
        For index reads, the <code class="literal">BLACKHOLE</code> engine did not
        return end-of-file (which it must because
        <code class="literal">BLACKHOLE</code> tables contain no rows), causing
        some queries to crash.
       (<a href="http://bugs.mysql.com/19717" target="_top">Bug#19717</a>)</p></li><li><p>
        For <code class="literal"><em class="replaceable"><code>expr</code></em>
        IN(<em class="replaceable"><code>value_list</code></em>)</code>, the result
        could be incorrect if <code class="literal">BIGINT UNSIGNED</code> values
        were used for <em class="replaceable"><code>expr</code></em> or in the value
        list.
       (<a href="http://bugs.mysql.com/19342" target="_top">Bug#19342</a>)</p></li><li><p>
        When attempting to call a stored procedure creating a table from
        a trigger on a table <code class="literal">tbl</code> in a database
        <code class="literal">db</code>, the trigger failed with <span class="errortext">ERROR
        1146 (42S02): Table 'db.tbl' doesn't exist</span>. However,
        the actual reason that such a trigger fails is due to the fact
        that <code class="literal">CREATE TABLE</code> causes an implicit
        <code class="literal">COMMIT</code>, and so a trigger cannot invoke a
        stored routine containing this statement. A trigger which does
        so now fails with <span class="errortext">ERROR 1422 (HY000): Explicit or
        implicit commit is not allowed in stored function or
        trigger</span>, which makes clear the reason for the
        trigger's failure.
       (<a href="http://bugs.mysql.com/18914" target="_top">Bug#18914</a>)</p></li><li><p>
        While preparing prepared statements, the server acquired
        unnecessary table write locks.
       (<a href="http://bugs.mysql.com/18326" target="_top">Bug#18326</a>)</p></li><li><p>
        The update columns for <code class="literal">INSERT ... SELECT ... ON
        DUPLICATE KEY UPDATE</code> could be assigned incorrect
        values if a temporary table was used to evaluate the
        <code class="literal">SELECT</code>.
       (<a href="http://bugs.mysql.com/16630" target="_top">Bug#16630</a>)</p></li><li><p>
        For <a href="functions.html#function_substring"><code class="literal">SUBSTRING()</code></a> evaluation using
        a temporary table, when
        <a href="functions.html#function_substring"><code class="literal">SUBSTRING()</code></a> was used on a
        LONGTEXT column, the <code class="literal">max_length</code> metadata
        value of the result was incorrectly calculated and set to 0.
        Consequently, an empty string was returned instead of the
        correct result.
       (<a href="http://bugs.mysql.com/15757" target="_top">Bug#15757</a>)</p></li><li><p>
        Loading data using <code class="literal">LOAD DATA INFILE</code> may not
        replicate correctly (due to character set incompatibilities) if
        the <code class="literal">character_set_database</code> variable is set
        before the data is loaded.
       (<a href="http://bugs.mysql.com/15126" target="_top">Bug#15126</a>)</p></li><li><p>
        User defined variables used within stored procedures and
        triggers are not replicated correctly when operating in
        statement-based replication mode.
       (<a href="http://bugs.mysql.com/14914" target="_top">Bug#14914</a>, <a href="http://bugs.mysql.com/20141" target="_top">Bug#20141</a>)</p></li><li><p>
        Local variables in stored routines or triggers, when declared as
        the <code class="literal">BIT</code> type, were interpreted as strings.
       (<a href="http://bugs.mysql.com/12976" target="_top">Bug#12976</a>)</p></li><li><p>
        For some operations, system tables in the
        <code class="literal">mysql</code> database must be accessed. For example,
        the <code class="literal">HELP</code> statement requires the contents of
        the server-side help tables, and
        <a href="functions.html#function_convert-tz"><code class="literal">CONVERT_TZ()</code></a> might need to read
        the time zone tables. However, to perform such operations while
        a <code class="literal">LOCK TABLES</code> statement is in effect, the
        server required you to also lock the requisite system tables
        explicitly or a lock error occurred:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>LOCK TABLE t1 READ;</code></strong>
Query OK, 0 rows affected (0.02 sec)
mysql&gt; <strong class="userinput"><code>HELP HELP;</code></strong>
ERROR 1100 (HY000) at line 4: Table 'help_topic' was not
locked with LOCK TABLES
</pre><p>
        Now, the server implicitly locks the system tables for reading
        as necessary so that you need not lock them explicitly. These
        tables are treated as just described:
      </p><pre class="programlisting">mysql.help_category
mysql.help_keyword
mysql.help_relation
mysql.help_topic
mysql.proc
mysql.time_zone
mysql.time_zone_leap_second
mysql.time_zone_name
mysql.time_zone_transition
mysql.time_zone_transition_type
</pre><p>
        If you want to explicitly place a <code class="literal">WRITE</code> lock
        on any of those tables with a <code class="literal">LOCK TABLES</code>
        statement, the table must be the only one locked; no other table
        can be locked with the same statement.
       (<a href="http://bugs.mysql.com/9953" target="_top">Bug#9953</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-16"></a>C.1.14. Changes in  MySQL 5.1.16 (26 February 2007)</h3></div></div></div><p class="release-level">
      This is a new Beta development release, fixing recently discovered
      bugs.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p class="release-non-production">
        This Beta release, as any other pre-production release, should
        not be installed on <span class="emphasis"><em>production</em></span> level
        systems or systems with critical data. It is good practice to
        back up your data before installing any new version of software.
        Although MySQL has worked very hard to ensure a high level of
        quality, protect your data by making a backup as you would for
        any software beta release. Please refer to our bug database at
        <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a> for more details about the
        individual bugs fixed in this version.
      </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        After release, a trigger failure problem was found to have been
        introduced. (<a href="http://bugs.mysql.com/27006" target="_top">Bug#27006</a>) Users affected by this issue should
        upgrade to MySQL 5.1.17, which corrects the problem.
      </p></div><p>This section documents all changes and bug fixes that have been applied since the last official MySQL release. If you would like to receive more fine-grained and personalized <span class="emphasis"><em>update alerts</em></span> about fixes that are relevant to the version and features you use, please consider subscribing to <span class="emphasis"><em>MySQL Enterprise</em></span> (a commercial MySQL offering). For more details please see <a href="http://www.mysql.com/products/enterprise" target="_top">http://www.mysql.com/products/enterprise</a>.</p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Cluster API</strong></span>: <span class="bold"><strong>Incompatible Change</strong></span>: 
        The <code class="literal">AbortOption</code> type is now a member of the
        <code class="literal">NdbOperation</code> class; its values and behavior
        have also changed.
        <code class="literal">NdbTransaction::AbortOption</code> can no longer be
        used, and applications written against the NDB API may need to
        be rewritten and recompiled to accomodate these changes. For
        more information about this change, see
        <a href="http://dev.mysql.com/doc/ndbapi/en/class-ndboperation-abortoption.html" target="_top">The <code class="literal">NdbOperation::AbortOption</code> Type</a>.
      </p><p>
        This also affects the behavior of the
        <code class="literal">NdbTransaction::execute()</code> method, which now
        reports failure only if the transaction was actually aborted.
        See <a href="http://dev.mysql.com/doc/ndbapi/en/class-ndbtransaction-execute.html" target="_top"><code class="literal">NdbTransaction::execute()</code></a>,
        for more information.
      </p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Previously, when a data node failed more than 8 times in
        succession to start, this caused a forced shutdown of the
        cluster. Now, when a data node fails to start 7 consecutive
        times, the node will not start again until it is started with
        the <code class="option">--initial</code> option, and a warning to this
        effect is written to the error log.
       (<a href="http://bugs.mysql.com/25984" target="_top">Bug#25984</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In the event that all cluster management and API nodes are
        configured with <code class="literal">ArbitrationRank=0</code>,
        <span><strong class="command">ndb_mgmd</strong></span> now issues the following warning
        when starting: <span class="errortext">Cluster configuration warning: Neither
        MGM nor API nodes are configured with arbitrator, may cause
        complete cluster shutdown in case of host failure</span>.
       (<a href="http://bugs.mysql.com/23546" target="_top">Bug#23546</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A number of new and more descriptive error messages covering
        transporter errors were added.
       (<a href="http://bugs.mysql.com/22025" target="_top">Bug#22025</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A new configuration parameter
        <code class="literal">MemReportFrequency</code> allows for additional
        control of data node memory usage. Previously, only warnings at
        predetermined percentages of memory allocation were given;
        setting this parameter allows for that behavior to be
        overridden. For more information, see
        <a href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="20.3.4.5. Defining Data Nodes">Section 20.3.4.5, “Defining Data Nodes”</a>.
      </p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        A new <code class="literal">ndb_mgm_get_clusterlog_loglevel()</code>
        function was added to the MGM API.
      </p><p>
        For more information, see
        <a href="http://dev.mysql.com/doc/ndbapi/en/ndb-mgm-get-clusterlog-loglevel.html" target="_top"><code class="literal">ndb_mgm_get_clusterlog_loglevel()</code></a>.
      </p></li><li><p>
        The <code class="literal">localhost</code> anonymous user account created
        during MySQL installation on Windows now has no global
        privileges. Formerly this account had all global privileges. For
        operations that require global privileges, the
        <code class="literal">root</code> account can be used instead.
       (<a href="http://bugs.mysql.com/24496" target="_top">Bug#24496</a>)</p></li><li><p>
        In the <code class="literal">INFORMATION_SCHEMA</code>
        <code class="literal">REFERENTIAL_CONSTRAINTS</code> table, the
        <code class="literal">UNIQUE_CONSTRAINT_NAME</code> column incorrectly
        named the referenced table. Now it names the referenced
        constraint, and a new column,
        <code class="literal">REFERENCED_TABLE_NAME</code>, names the referenced
        table.
       (<a href="http://bugs.mysql.com/21713" target="_top">Bug#21713</a>)</p></li><li><p>
        <a href="functions.html#function_rand"><code class="literal">RAND()</code></a> now allows non-constant
        initializers (such as a column name) as its argument. In this
        case, the seed is initialized with the value for each invocation
        of <a href="functions.html#function_rand"><code class="literal">RAND()</code></a>. (One
        implication of this is that for equal argument values,
        <a href="functions.html#function_rand"><code class="literal">RAND()</code></a> will return the same
        value each time.)
       (<a href="http://bugs.mysql.com/6172" target="_top">Bug#6172</a>)</p></li><li><p>
        Added the <code class="option">--auto-generate-sql-load-type</code> and
        <code class="option">--auto-generate-sql-write-number</code> options for
        <span><strong class="command">mysqlslap</strong></span>.
      </p></li><li><p>
        The bundled yaSSL library was upgraded to version 1.5.8.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        Using an <code class="literal">INFORMATION_SCHEMA</code> table with
        <code class="literal">ORDER BY</code> in a subquery could cause a server
        crash.
      </p><p>
        We would like to thank Oren Isacson of Flowgate Security
        Consulting and Stefan Streichsbier of SEC Consult for informing
        us of this problem.
       (<a href="http://bugs.mysql.com/24630" target="_top">Bug#24630</a>, <a href="http://bugs.mysql.com/26556" target="_top">Bug#26556</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-1420" target="_top">CVE-2007-1420</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        A query with an <code class="literal">IN</code> clause against an
        <code class="literal">NDB</code> table employing explicit user-defined
        partitioning did not always return all matching rows.
       (<a href="http://bugs.mysql.com/25821" target="_top">Bug#25821</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An inadvertent use of unaligned data caused
        <span><strong class="command">ndb_restore</strong></span> to fail on some 64-bit platforms,
        including Sparc and Itanium-2.
       (<a href="http://bugs.mysql.com/26739" target="_top">Bug#26739</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <span class="errorname">InvalidUndoBufferSize</span> error used the
        same error code (<span class="errorcode">763</span>) as the
        <span class="errorname">IncompatibleVersions</span> error.
        <span class="errorname">InvalidUndoBufferSize</span> now uses its own
        error code (<span class="errorcode">779</span>).
       (<a href="http://bugs.mysql.com/26490" target="_top">Bug#26490</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The failure of a data node when restarting it with
        <code class="option">--initial</code> could lead to failures of subsequent
        data node restarts.
       (<a href="http://bugs.mysql.com/26481" target="_top">Bug#26481</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Takeover for local checkpointing due to multiple failures of
        master nodes was sometimes incorrectly handled.
       (<a href="http://bugs.mysql.com/26457" target="_top">Bug#26457</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="literal">LockPagesInMainMemory</code> parameter was not
        read until after distributed communication had already started
        between cluster nodes. When the value of this parameter was
        <code class="literal">1</code>, this could sometimes result in data node
        failure due to missed heartbeats.
       (<a href="http://bugs.mysql.com/26454" target="_top">Bug#26454</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Under some circumstances, following the restart of a management
        node, all data nodes would connect to it normally, but some of
        them subsequently failed to log any events to the management
        node.
       (<a href="http://bugs.mysql.com/26293" target="_top">Bug#26293</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Condition pushdown did not work with prepared statements.
       (<a href="http://bugs.mysql.com/26225" target="_top">Bug#26225</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Replication): Under some circumstances, the binlog thread could
        shut down while the slave SQL thread was still using it.
       (<a href="http://bugs.mysql.com/26015" target="_top">Bug#26015</a>, <a href="http://bugs.mysql.com/26019" target="_top">Bug#26019</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A memory leak could cause problems during a node or cluster
        shutdown or failure.
       (<a href="http://bugs.mysql.com/25997" target="_top">Bug#25997</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        No appropriate error message was provided when there was
        insufficient REDO log file space for the cluster to start.
       (<a href="http://bugs.mysql.com/25801" target="_top">Bug#25801</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An <code class="literal">UPDATE</code> using an <code class="literal">IN</code>
        clause on an <code class="literal">NDB</code> table on which there was a
        trigger caused <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/25522" target="_top">Bug#25522</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A memory allocation failure in <code class="literal">SUMA</code> (the
        cluster Subscription Manager) could cause the cluster to crash.
       (<a href="http://bugs.mysql.com/25239" target="_top">Bug#25239</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="filename">ndb_size.tmpl</code> file (necessary for using
        the <code class="filename">ndb_size.pl</code> script) was missing from
        binary distributions.
       (<a href="http://bugs.mysql.com/24191" target="_top">Bug#24191</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The message <span class="errortext">Error 0 in readAutoIncrementValue(): no
        Error</span> was written to the error log whenever
        <code class="literal">SHOW TABLE STATUS</code> was performed on a Cluster
        table that did not have an <code class="literal">AUTO_INCREMENT</code>
        column.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This improves on and supersedes an earlier fix that was made
          for this issue in MySQL 5.1.12.
        </p></div><p>(<a href="http://bugs.mysql.com/21033" target="_top">Bug#21033</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When a node failed due to there being insufficient disk space to
        perform a local checkpoint, there was no indication that this
        was the source of the problem. Such a condition now produces an
        appropriate error message.
       (<a href="http://bugs.mysql.com/20121" target="_top">Bug#20121</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Replication): The error message <span class="errortext">Last_Errno:
        4294967295, Error in Write_rows event</span> now supplies a
        valid error code.
       (<a href="http://bugs.mysql.com/19896" target="_top">Bug#19896</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In the event that cluster backup parameters such as
        <code class="literal">BackupWriteSize</code> were incorrectly set, no
        appropriate error was issued to indicate that this was the case.
       (<a href="http://bugs.mysql.com/19146" target="_top">Bug#19146</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: <span class="bold"><strong>Disk Data</strong></span>: 
        A delete and a read performed in the same operation could cause
        one or more data nodes to crash. This could occur when the
        operation affected more than 5 columns concurrently, or when one
        or more of the columns was of the <code class="literal">VARCHAR</code>
        type and was stored on disk.
       (<a href="http://bugs.mysql.com/25794" target="_top">Bug#25794</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        After defining a delete operation (using
        <code class="literal">NdbOperation::deleteTuple()</code>) on a nonexistent
        primary key of a table having a <code class="literal">BLOB</code> or
        <code class="literal">TEXT</code> column, invoking
        <code class="literal">NdbTransaction::execute()</code> caused the calling
        application to enter an endless loop rather than raising an
        error.
      </p><p>
        This issue also affected <span><strong class="command">ndb_restore</strong></span>; when
        restoring tables containing <code class="literal">BLOB</code> or
        <code class="literal">TEXT</code> columns, this could cause it to consume
        all available memory and then crash.
       (<a href="http://bugs.mysql.com/24028" target="_top">Bug#24028</a>)</p><p>See also <a href="http://bugs.mysql.com/27308" target="_top">Bug#27308</a>, <a href="http://bugs.mysql.com/30177" target="_top">Bug#30177</a></p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        <code class="filename">libndbclient.so</code> was not versioned.
       (<a href="http://bugs.mysql.com/13522" target="_top">Bug#13522</a>)</p></li><li><p>
        Using <code class="literal">ORDER BY</code> or <code class="literal">GROUP BY</code>
        could yield different results when selecting from a view and
        selecting from the underlying table.
       (<a href="http://bugs.mysql.com/26209" target="_top">Bug#26209</a>)</p></li><li><p>
        <code class="literal">DISTINCT</code> queries that were executed using a
        loose scan for an <code class="literal">InnoDB</code> table that had been
        emptied caused a server crash.
       (<a href="http://bugs.mysql.com/26159" target="_top">Bug#26159</a>)</p></li><li><p>
        A <code class="literal">WHERE</code> clause that used
        <a href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> for
        <code class="literal">DATETIME</code> values could be treated differently
        for a <code class="literal">SELECT</code> and a view defined as that
        <code class="literal">SELECT</code>.
       (<a href="http://bugs.mysql.com/26124" target="_top">Bug#26124</a>)</p></li><li><p>
        Collation for <code class="literal">LEFT JOIN</code> comparisons could be
        evaluated incorrectly, leading to improper query results.
       (<a href="http://bugs.mysql.com/26017" target="_top">Bug#26017</a>)</p></li><li><p>
        The <code class="literal">WITH CHECK OPTION</code> clause for views was
        ignored for updates of multiple-table views when the updates
        could not be performed on fly and the rows to update had to be
        put into temporary tables first.
       (<a href="http://bugs.mysql.com/25931" target="_top">Bug#25931</a>)</p></li><li><p>
        <code class="literal">LOAD DATA INFILE</code> did not work with pipes.
       (<a href="http://bugs.mysql.com/25807" target="_top">Bug#25807</a>)</p></li><li><p>
        The <a href="functions.html#function_sec-to-time"><code class="literal">SEC_TO_TIME()</code></a> and
        <a href="functions.html#function_quarter"><code class="literal">QUARTER()</code></a> functions
        sometimes did not handle <code class="literal">NULL</code> values
        correctly.
       (<a href="http://bugs.mysql.com/25643" target="_top">Bug#25643</a>)</p></li><li><p>
        View definitions that used the <code class="literal">!</code> operator
        were treated as containing the <code class="literal">NOT</code> operator,
        which has a different precedence and can produce different
        results. .
       (<a href="http://bugs.mysql.com/25580" target="_top">Bug#25580</a>)</p></li><li><p>
        An error in the name resolution of nested <code class="literal">JOIN ...
        USING</code> constructs was corrected.
       (<a href="http://bugs.mysql.com/25575" target="_top">Bug#25575</a>)</p></li><li><p>
        <code class="literal">GROUP BY</code> and <code class="literal">DISTINCT</code> did
        not group <code class="literal">NULL</code> values for columns that have a
        <code class="literal">UNIQUE</code> index. .
       (<a href="http://bugs.mysql.com/25551" target="_top">Bug#25551</a>)</p></li><li><p>
        The <code class="option">--with-readline</code> option for
        <span><strong class="command">configure</strong></span> did not work for commercial source
        packages, but no error message was printed to that effect. Now a
        message is printed.
       (<a href="http://bugs.mysql.com/25530" target="_top">Bug#25530</a>)</p></li><li><p>
        A yaSSL program named <span><strong class="command">test</strong></span> was installed,
        causing conflicts with the <span><strong class="command">test</strong></span> system
        utility. It is no longer installed.
       (<a href="http://bugs.mysql.com/25417" target="_top">Bug#25417</a>)</p></li><li><p>
        For a <code class="literal">UNIQUE</code> index containing many
        <code class="literal">NULL</code> values, the optimizer would prefer the
        index for <code class="literal"><em class="replaceable"><code>col</code></em> IS
        NULL</code> conditions over other more selective indexes. .
       (<a href="http://bugs.mysql.com/25407" target="_top">Bug#25407</a>)</p></li><li><p>
        An <code class="literal">AFTER UPDATE</code> trigger on an
        <code class="literal">InnoDB</code> table with a composite primary key
        caused the server to crash.
       (<a href="http://bugs.mysql.com/25398" target="_top">Bug#25398</a>)</p></li><li><p>
        Passing a <code class="literal">NULL</code> value to a user-defined
        function from within a stored procedure crashes the server.
       (<a href="http://bugs.mysql.com/25382" target="_top">Bug#25382</a>)</p></li><li><p>
        <span><strong class="command">perror</strong></span> crashed on some platforms due to
        failure to handle a <code class="literal">NULL</code> pointer.
       (<a href="http://bugs.mysql.com/25344" target="_top">Bug#25344</a>)</p></li><li><p>
        <span><strong class="command">mysql.server stop</strong></span> timed out too quickly (35
        seconds) waiting for the server to exit. Now it waits up to 15
        minutes, to ensure that the server exits.
       (<a href="http://bugs.mysql.com/25341" target="_top">Bug#25341</a>)</p></li><li><p>
        A query that contained an <code class="literal">EXIST</code> subquery with
        a <code class="literal">UNION</code> over correlated and uncorrelated
        <code class="literal">SELECT</code> queries could cause the server to
        crash.
       (<a href="http://bugs.mysql.com/25219" target="_top">Bug#25219</a>)</p></li><li><p>
        <a href="apis.html#mysql-kill" title="29.2.3.38. mysql_kill()"><code class="literal">mysql_kill()</code></a> caused a server
        crash when used on an SSL connection.
       (<a href="http://bugs.mysql.com/25203" target="_top">Bug#25203</a>)</p></li><li><p>
        yaSSL was sensitive to the presence of whitespace at the ends of
        lines in PEM-encoded certificates, causing a server crash.
       (<a href="http://bugs.mysql.com/25189" target="_top">Bug#25189</a>)</p></li><li><p>
        A query with <code class="literal">ORDER BY</code> and <code class="literal">GROUP
        BY</code> clauses where the <code class="literal">ORDER BY</code>
        clause had more elements than the <code class="literal">GROUP BY</code>
        clause caused a memory overrun leading to a crash of the server.
       (<a href="http://bugs.mysql.com/25172" target="_top">Bug#25172</a>)</p></li><li><p>
        Use of <code class="literal">ON DUPLICATE KEY UPDATE</code> defeated the
        usual restriction against inserting into a join-based view
        unless only one of the underlying tables is used.
       (<a href="http://bugs.mysql.com/25123" target="_top">Bug#25123</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE ... ENABLE KEYS</code> acquired a global
        lock, preventing concurrent execution of other statements that
        use tables. .
       (<a href="http://bugs.mysql.com/25044" target="_top">Bug#25044</a>)</p></li><li><p>
        <code class="literal">OPTIMIZE TABLE</code> caused a race condition in the
        I/O cache.
       (<a href="http://bugs.mysql.com/25042" target="_top">Bug#25042</a>)</p></li><li><p>
        A return value of <code class="literal">-1</code> from user-defined
        handlers was not handled well and could result in conflicts with
        server code.
       (<a href="http://bugs.mysql.com/24987" target="_top">Bug#24987</a>)</p></li><li><p>
        Certain joins using <code class="literal">Range checked for each
        record</code> in the query execution plan could cause the
        server to crash.
       (<a href="http://bugs.mysql.com/24776" target="_top">Bug#24776</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE</code> caused loss of
        <code class="literal">CASCADE</code> clauses for <code class="literal">InnoDB</code>
        tables.
       (<a href="http://bugs.mysql.com/24741" target="_top">Bug#24741</a>)</p></li><li><p>
        If an <code class="literal">ORDER BY</code> or <code class="literal">GROUP BY</code>
        list included a constant expression being optimized away and, at
        the same time, containing single-row subselects that returned
        more that one row, no error was reported. If a query required
        sorting by expressions containing single-row subselects that
        returned more than one row, execution of the query could cause a
        server crash.
       (<a href="http://bugs.mysql.com/24653" target="_top">Bug#24653</a>)</p></li><li><p>
        For <code class="literal">ALTER TABLE</code>, using <code class="literal">ORDER BY
        <em class="replaceable"><code>expression</code></em></code> could cause a
        server crash. Now the <code class="literal">ORDER BY</code> clause allows
        only column names to be specified as sort criteria (which was
        the only documented syntax, anyway).
       (<a href="http://bugs.mysql.com/24562" target="_top">Bug#24562</a>)</p></li><li><p>
        Within stored routines or prepared statements, inconsistent
        results occurred with multiple use of <code class="literal">INSERT ... SELECT
        ... ON DUPLICATE KEY UPDATE</code> when the <code class="literal">ON
        DUPLICATE KEY UPDATE</code> clause erroneously tried to
        assign a value to a column mentioned only in its
        <code class="literal">SELECT</code> part.
       (<a href="http://bugs.mysql.com/24491" target="_top">Bug#24491</a>)</p></li><li><p>
        Expressions of the form <code class="literal">(a, b) IN (SELECT a, MIN(b)
        FROM t GROUP BY a)</code> could produce incorrect results
        when column <code class="literal">a</code> of table <code class="literal">t</code>
        contained <code class="literal">NULL</code> values while column
        <code class="literal">b</code> did not.
       (<a href="http://bugs.mysql.com/24420" target="_top">Bug#24420</a>)</p></li><li><p>
        If a prepared statement accessed a view, access to the tables
        listed in the query after that view was checked in the security
        context of the view.
       (<a href="http://bugs.mysql.com/24404" target="_top">Bug#24404</a>)</p></li><li><p>
        A nested query on a partitioned table returned fewer records
        than on the corresponding non-partitioned table, when the
        subquery affected more than one partition.
       (<a href="http://bugs.mysql.com/24186" target="_top">Bug#24186</a>)</p></li><li><p>
        Expressions of the form <code class="literal">(a, b) IN (SELECT c, d
        ...)</code> could produce incorrect results if
        <code class="literal">a</code>, <code class="literal">b</code>, or both were
        <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/24127" target="_top">Bug#24127</a>)</p></li><li><p>
        Queries that evaluate <code class="literal">NULL IN (SELECT ... UNION SELECT
        ...)</code> could produce an incorrect result
        (<code class="literal">FALSE</code> instead of <code class="literal">NULL</code>).
       (<a href="http://bugs.mysql.com/24085" target="_top">Bug#24085</a>)</p></li><li><p>
        Some <code class="literal">UPDATE</code> statements were slower than in
        previous versions when the search key could not be converted to
        a valid value for the type of the search column.
       (<a href="http://bugs.mysql.com/24035" target="_top">Bug#24035</a>)</p></li><li><p>
        <a href="functions.html#function_isnull"><code class="literal">ISNULL(DATE(NULL))</code></a> and
        <a href="functions.html#function_isnull"><code class="literal">ISNULL(CAST(NULL AS
        DATE))</code></a> erroneously returned false.
       (<a href="http://bugs.mysql.com/23938" target="_top">Bug#23938</a>)</p></li><li><p>
        Within a stored routine, accessing a declared routine variable
        with <code class="literal">PROCEDURE ANALYSE()</code> caused a server
        crash.
       (<a href="http://bugs.mysql.com/23782" target="_top">Bug#23782</a>)</p></li><li><p>
        For an <code class="literal">InnoDB</code> table with any <code class="literal">ON
        DELETE</code> trigger, <code class="literal">TRUNCATE TABLE</code>
        mapped to <code class="literal">DELETE</code> and activated triggers. Now
        a fast truncation occurs and triggers are not activated. .
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          As a result of this fix, <code class="literal">TRUNCATE TABLE</code> now
          requires the <code class="literal">DROP</code> privilege rather than the
          <code class="literal">DELETE</code> privilege.
        </p></div><p>(<a href="http://bugs.mysql.com/23556" target="_top">Bug#23556</a>)</p></li><li><p>
        With <code class="literal">ONLY_FULL_GROUP_BY</code> enables, the server
        was too strict: Some expressions involving only aggregate values
        were rejected as non-aggregate (for example,
        <a href="functions.html#function_max"><code class="literal">MAX(a)</code></a> –
        <a href="functions.html#function_min"><code class="literal">MIN(a)</code></a>).
       (<a href="http://bugs.mysql.com/23417" target="_top">Bug#23417</a>)</p></li><li><p>
        The arguments to the <a href="functions.html#function_encode"><code class="literal">ENCODE()</code></a>
        and the <a href="functions.html#function_decode"><code class="literal">DECODE()</code></a> functions were
        not printed correctly, causing problems in the output of
        <code class="literal">EXPLAIN EXTENDED</code> and in view definitions.
       (<a href="http://bugs.mysql.com/23409" target="_top">Bug#23409</a>)</p></li><li><p>
        Some queries against <code class="literal">INFORMATION_SCHEMA</code> that
        used subqueries failed. .
       (<a href="http://bugs.mysql.com/23299" target="_top">Bug#23299</a>)</p></li><li><p>
        <code class="literal">readline</code> detection did not work correctly on
        NetBSD.
       (<a href="http://bugs.mysql.com/23293" target="_top">Bug#23293</a>)</p></li><li><p>
        The number of <code class="literal">setsockopt()</code> calls performed
        for reads and writes to the network socket was reduced to
        decrease system call overhead.
       (<a href="http://bugs.mysql.com/22943" target="_top">Bug#22943</a>)</p></li><li><p>
        Storing values specified as hexadecimal values 64 or more bits
        long in <code class="literal">BIT(64)</code>, <code class="literal">BIGINT</code>,
        or <code class="literal">BIGINT UNSIGNED</code> columns did not raise any
        warning or error if the value was out of range.
       (<a href="http://bugs.mysql.com/22533" target="_top">Bug#22533</a>)</p></li><li><p>
        Type conversion errors during formation of index search
        conditions were not correctly checked, leading to incorrect
        query results.
       (<a href="http://bugs.mysql.com/22344" target="_top">Bug#22344</a>)</p></li><li><p>
        For the <a href="functions.html#function_if"><code class="literal">IF()</code></a> and
        <a href="functions.html#function_coalesce"><code class="literal">COALESCE()</code></a> function
        and <a href="functions.html#operator_case"><code class="literal">CASE</code></a>
        expressions, large unsigned integer values could be mishandled
        and result in warnings.
       (<a href="http://bugs.mysql.com/22026" target="_top">Bug#22026</a>)</p></li><li><p>
        Inserting <code class="literal">DEFAULT</code> into a column with no
        default value could result in garbage in the column. Now the
        same result occurs as when inserting <code class="literal">NULL</code>
        into a <code class="literal">NOT NULL</code> column.
       (<a href="http://bugs.mysql.com/20691" target="_top">Bug#20691</a>)</p></li><li><p>
        Indexes disabled with <code class="literal">ALTER TABLE ... DISABLE
        KEYS</code> could in some cases be used by specifying
        <code class="literal">FORCE INDEX</code>.
       (<a href="http://bugs.mysql.com/20604" target="_top">Bug#20604</a>)</p></li><li><p>
        If a duplicate key value was present in the table,
        <code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code> reported a
        row count indicating that a record was updated, even when no
        record actually changed due to the old and new values being the
        same. Now it reports a row count of zero.
       (<a href="http://bugs.mysql.com/19978" target="_top">Bug#19978</a>)</p><p>See also <a href="http://bugs.mysql.com/27006" target="_top">Bug#27006</a>, <a href="http://bugs.mysql.com/27033" target="_top">Bug#27033</a>, <a href="http://bugs.mysql.com/27210" target="_top">Bug#27210</a></p></li><li><p>
        <code class="literal">ORDER BY</code> values of the
        <code class="literal">DOUBLE</code> or <code class="literal">DECIMAL</code> types
        could change the result returned by a query.
       (<a href="http://bugs.mysql.com/19690" target="_top">Bug#19690</a>)</p></li><li><p>
        The <code class="literal">readline</code> library wrote to uninitialized
        memory, causing <span><strong class="command">mysql</strong></span> to crash.
       (<a href="http://bugs.mysql.com/19474" target="_top">Bug#19474</a>)</p></li><li><p>
        Use of already freed memory caused SSL connections to hang
        forever.
       (<a href="http://bugs.mysql.com/19209" target="_top">Bug#19209</a>)</p></li><li><p>
        The server might fail to use an appropriate index for
        <code class="literal">DELETE</code> when <code class="literal">ORDER BY</code>,
        <code class="literal">LIMIT</code>, and a non-restricting
        <code class="literal">WHERE</code> are present.
       (<a href="http://bugs.mysql.com/17711" target="_top">Bug#17711</a>)</p></li><li><p>
        The optimizer used a filesort rather than a
        <code class="literal">const</code> table read in some cases when the
        latter was possible.
       (<a href="http://bugs.mysql.com/16590" target="_top">Bug#16590</a>)</p></li><li><p>
        To enable installation of MySQL RPMs on Linux systems running
        RHEL 4 (which includes SE-Linux) additional information was
        provided to specify some actions that are allowed to the MySQL
        binaries.
       (<a href="http://bugs.mysql.com/12676" target="_top">Bug#12676</a>)</p></li><li><p>
        <code class="literal">CONNECTION</code> is no longer treated as a reserved
        word.
       (<a href="http://bugs.mysql.com/12204" target="_top">Bug#12204</a>)</p></li><li><p>
        The presence of <code class="literal">ORDER BY</code> in a view definition
        prevented the <code class="literal">MERGE</code> algorithm from being used
        to resolve the view even if nothing else in the definition
        required the <code class="literal">TEMPTABLE</code> algorithm.
       (<a href="http://bugs.mysql.com/12122" target="_top">Bug#12122</a>)</p></li><li><p>
        If a slave server closed its relay log (for example, due to an
        error during log rotation), the I/O thread did not recognize
        this and still tried to write to the log, causing a server
        crash.
       (<a href="http://bugs.mysql.com/10798" target="_top">Bug#10798</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-15"></a>C.1.15. Changes in  MySQL 5.1.15 (25 January 2007)</h3></div></div></div><p class="release-level">
      This is a new Beta development release, fixing recently discovered
      bugs.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p class="release-non-production">
        This Beta release, as any other pre-production release, should
        not be installed on <span class="emphasis"><em>production</em></span> level
        systems or systems with critical data. It is good practice to
        back up your data before installing any new version of software.
        Although MySQL has worked very hard to ensure a high level of
        quality, protect your data by making a backup as you would for
        any software beta release. Please refer to our bug database at
        <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a> for more details about the
        individual bugs fixed in this version.
      </p></div><p>This section documents all changes and bug fixes that have been applied since the last official MySQL release. If you would like to receive more fine-grained and personalized <span class="emphasis"><em>update alerts</em></span> about fixes that are relevant to the version and features you use, please consider subscribing to <span class="emphasis"><em>MySQL Enterprise</em></span> (a commercial MySQL offering). For more details please see <a href="http://www.mysql.com/products/enterprise" target="_top">http://www.mysql.com/products/enterprise</a>.</p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="literal">LockPagesInMainMemory</code> configuration
        parameter has changed its type and possible values. For more
        information, see <code class="literal">
        <a href="mysql-cluster.html#mysql-cluster-param-ndbd-definition-lockpagesinmainmemory">LockPagesInMainMemory</a>
        </code>.
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          The values <code class="literal">true</code> and
          <code class="literal">false</code> are no longer accepted for this
          parameter. If you were using this parameter and had it set to
          <code class="literal">false</code> in a previous release, you must
          change it to <code class="literal">0</code>. If you had this parameter
          set to <code class="literal">true</code>, you should instead use
          <code class="literal">1</code> to obtain the same behavior as
          previously, or <code class="literal">2</code> to take advantage of new
          functionality introduced with this release, as described in
          the section cited above.
        </p></div><p>(<a href="http://bugs.mysql.com/25686" target="_top">Bug#25686</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        <code class="literal">InnoDB</code> rolls back only the last statement on
        a transaction timeout. A new option,
        <code class="option">--innodb_rollback_on_timeout</code>, causes
        <code class="literal">InnoDB</code> to abort and roll back the entire
        transaction if a transaction timeout occurs (the same behavior
        as in MySQL 5.0.13 and earlier).
       (<a href="http://bugs.mysql.com/24200" target="_top">Bug#24200</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Previously, the <a href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a>
        function returned a binary string. Now it returns a string with
        a character set and collation given by
        <code class="literal">character_set_connection</code> and
        <code class="literal">collation_connection</code> so that it can return
        month and weekday names containing non-ASCII characters.
       (<a href="http://bugs.mysql.com/22646" target="_top">Bug#22646</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The following conditions apply to enabling the
        <code class="literal">read_only</code> system variable:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            If you attempt to enable <code class="literal">read_only</code> while
            you have any explicit locks (acquired with <code class="literal">LOCK
            TABLES</code> or have a pending transaction, an error
            will occur.
          </p></li><li><p>
            If other clients hold explicit table locks or have pending
            transactions, the attempt to enable
            <code class="literal">read_only</code> blocks until the locks are
            released and the transactions end. While the attempt to
            enable <code class="literal">read_only</code> is pending, requests by
            other clients for table locks or to begin transactions also
            block until <code class="literal">read_only</code> has been set.
          </p></li><li><p>
            <code class="literal">read_only</code> can be enabled while you hold a
            global read lock (acquired with <code class="literal">FLUSH TABLES WITH
            READ LOCK</code>) because that does not involve table
            locks.
          </p></li></ul></div><p>
        Previously, the attempt to enable <code class="literal">read_only</code>
        would return immediately even if explicit locks or transactions
        were pending, so some data changes could occur for statements
        executing in the server at the same time.
       (<a href="http://bugs.mysql.com/22009" target="_top">Bug#22009</a>, <a href="http://bugs.mysql.com/11733" target="_top">Bug#11733</a>)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        When using <code class="literal">MERGE</code> tables the definition of the
        <code class="literal">MERGE</code> table and the <code class="literal">MyISAM</code>
        tables are checked each time the tables are opened for access
        (including any <code class="literal">SELECT</code> or
        <code class="literal">INSERT</code> statement. Each table is compared for
        column order, types, sizes and associated. If there is a
        difference in any one of the tables then the statement will
        fail.
      </p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        Previously, duplicate-key errors were indicated by the
        <code class="literal">ER_DUP_ENTRY</code> error code (1062). This code is
        no longer used. Instead, the server returns
        <code class="literal">ER_DUP_ENTRY_WITH_KEY_NAME</code> (1582), and the
        error message indicates the name of the index for which the
        duplicate occurred. Applications that test for duplicate keys
        should look for both error codes if they need to be compatible
        with current and older servers.
      </p><p>See also <a href="http://bugs.mysql.com/28842" target="_top">Bug#28842</a></p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="literal">NDB</code> storage engine could leak memory
        during file operations.
       (<a href="http://bugs.mysql.com/21858" target="_top">Bug#21858</a>)</p></li><li><p>
        On Unix, when searching the standard locations for option files,
        MySQL programs now also look for /etc/mysql/my.cnf after
        checking for /etc/my.cnf and before checking the remaining
        locations.
       (<a href="http://bugs.mysql.com/25104" target="_top">Bug#25104</a>)</p></li><li><p>
        The default value of the <code class="literal">max_connections</code>
        variable has been increased to 151 in order that Websites
        running on Apache and using MySQL will not have more processes
        trying to access MySQL than the default number of connections
        available.
      </p><p>
        (The maximum number of Apache processes is determined by the
        Apache <code class="literal">MaxClient</code>, which defaults to 256, but
        is usually set to 150 in the <code class="filename">httpd.conf</code>
        commonly distributed with Apache. For more information about
        <code class="literal">MaxClient</code>, see
        <a href="http://httpd.apache.org/docs/2.2/mod/mpm_common.html#maxclients" target="_top">http://httpd.apache.org/docs/2.2/mod/mpm_common.html#maxclients</a>.)
       (<a href="http://bugs.mysql.com/23883" target="_top">Bug#23883</a>)</p></li><li><p>
        The <code class="literal">Com_create_user</code> status variable was added
        (for counting <code class="literal">CREATE USER</code> statements).
       (<a href="http://bugs.mysql.com/22958" target="_top">Bug#22958</a>)</p></li><li><p>
        The <code class="option">--memlock</code> option relies on system calls
        that are unreliable on some operating systems. If a crash
        occurs, the server now checks whether <code class="option">--memlock</code>
        was specified and if so issues some information about possible
        workarounds.
       (<a href="http://bugs.mysql.com/22860" target="_top">Bug#22860</a>)</p></li><li><p>
        The (undocumented) <code class="literal">UNIQUE_USERS()</code> and
        <code class="literal">GROUP_UNIQUE_USERS()</code> functions were
        removed.
       (<a href="http://bugs.mysql.com/22687" target="_top">Bug#22687</a>)</p></li><li><p>
        Partitioning of tables using the <code class="literal">FEDERATED</code>
        storage engine is no longer permitted. Attempting to create such
        a table or to modify an existing table so that is uses both
        partitioning and <code class="literal">FEDERATED</code> now fails with an
        error.
       (<a href="http://bugs.mysql.com/22451" target="_top">Bug#22451</a>)</p></li><li><p>
        The <code class="option">--skip-thread-priority</code> option now is
        enabled by default for binary Mac OS X distributions. Use of
        thread priorities degrades performance on Mac OS X.
       (<a href="http://bugs.mysql.com/18526" target="_top">Bug#18526</a>)</p></li><li><p>
        Calling a non-deterministic stored routine when using
        statement-based replication now throws an error. Formerly,
        defining such a stored routine would cause an error to be
        thrown.
       (<a href="http://bugs.mysql.com/16456" target="_top">Bug#16456</a>)</p></li><li><p>
        <code class="literal">read_only</code> can be enabled while you hold a
        global read lock (acquired with <code class="literal">FLUSH TABLES WITH READ
        LOCK</code>) because that does not involve table locks.
      </p></li><li><p>
        The bundled yaSSL library was upgraded to version 1.5.0.
      </p></li><li><p>
        Remote servers for use with the <code class="literal">FEDERATED</code>
        storage engine now can be managed with the new
        <code class="literal">CREATE/ALTER/DROP SERVER</code> syntax.
      </p></li><li><p>
        Added the <code class="option">--disable-grant-options</code> option to
        <span><strong class="command">configure</strong></span>. If <span><strong class="command">configure</strong></span> is
        run with this option, the <code class="option">--bootstrap</code>,
        <code class="option">--skip-grant-tables</code>, and
        <code class="option">--init-file</code> options for
        <span><strong class="command">mysqld</strong></span> are disabled and cannot be used. For
        Windows, the <span><strong class="command">configure.js</strong></span> script recognizes
        the <code class="literal">DISABLE_GRANT_OPTIONS</code> flag, which has the
        same effect.
      </p></li><li><p>
        If other clients hold explicit table locks or have pending
        transactions, the attempt to enable <code class="literal">read_only</code>
        blocks until the locks are released and the transactions end.
        While the attempt to enable <code class="literal">read_only</code> is
        pending, requests by other clients for table locks or to begin
        transactions also block until <code class="literal">read_only</code> has
        been set.
      </p></li><li><p>
        If you attempt to enable <code class="literal">read_only</code> while you
        have any explicit locks (acquired with <code class="literal">LOCK
        TABLES</code> or have a pending transaction, an error will
        occur.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        For <code class="literal">ENUM</code> columns that had enumeration values
        containing commas, the commas were mapped to
        <code class="literal">0xff</code> internally. However, this rendered the
        commas indistinguishable from true <code class="literal">0xff</code>
        characters in the values. This no longer occurs. However, the
        fix requires that you dump and reload any tables that have
        <code class="literal">ENUM</code> columns containing any true
        <code class="literal">0xff</code> values. Dump the tables using
        <span><strong class="command">mysqldump</strong></span> with the current server before
        upgrading from a version of MySQL 5.1 older than 5.1.15 to
        version 5.1.15 or newer.
       (<a href="http://bugs.mysql.com/24660" target="_top">Bug#24660</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        Non-32-bit, non-aligned columns were not handled correctly in
        explicitly partitioned <code class="literal">NDB</code> tables.
       (<a href="http://bugs.mysql.com/25587" target="_top">Bug#25587</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        It was not possible to create an <code class="literal">NDB</code> table
        with a key on two <code class="literal">VARCHAR</code> columns where both
        columns had a storage length in excess of 256.
       (<a href="http://bugs.mysql.com/25746" target="_top">Bug#25746</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Hosts in clusters with large numbers of nodes could experience
        excessive CPU usage while obtaining configuration data.
       (<a href="http://bugs.mysql.com/25711" target="_top">Bug#25711</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In some circumstances, shutting down the cluster could cause
        connected <span><strong class="command">mysqld</strong></span> processes to crash.
       (<a href="http://bugs.mysql.com/25668" target="_top">Bug#25668</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Some aggregate queries such as <code class="literal">SELECT
        COUNT(*)</code> performed a table scan on
        <code class="literal">NDB</code> tables rather than checking table
        statistics, causing such queries to perform much more slowly in
        MySQL Cluster 5.1 than in 5.0.
       (<a href="http://bugs.mysql.com/25567" target="_top">Bug#25567</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Memory allocations for <code class="literal">TEXT</code> columns were
        calculated incorrectly, resulting in space being wasted and
        other issues.
       (<a href="http://bugs.mysql.com/25562" target="_top">Bug#25562</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The failure of a master node during a node restart could lead to
        a resource leak, causing later node failures.
       (<a href="http://bugs.mysql.com/25554" target="_top">Bug#25554</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The failure of a node during a local checkpoint could lead to
        other node failures.
       (<a href="http://bugs.mysql.com/25468" target="_top">Bug#25468</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Replication): Connecting a <span><strong class="command">mysqld</strong></span> to a
        cluster where not all nodes were running, starting the remaining
        cluster nodes, and then disconnecting from the cluster caused
        the <span><strong class="command">mysqld</strong></span> process to crash.
       (<a href="http://bugs.mysql.com/25387" target="_top">Bug#25387</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A node shutdown occurred if the master failed during a commit.
       (<a href="http://bugs.mysql.com/25364" target="_top">Bug#25364</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Creating a non-unique index with the <code class="literal">USING
        HASH</code> clause silently created an ordered index instead
        of issuing a warning.
       (<a href="http://bugs.mysql.com/24820" target="_top">Bug#24820</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">ndb_config</strong></span> failed when trying to use 2
        management servers and node IDs.
       (<a href="http://bugs.mysql.com/23887" target="_top">Bug#23887</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When a data node was shut down using the management client
        <code class="literal">STOP</code> command, a connection event
        (<code class="literal">NDB_LE_Connected</code>) was logged instead of a
        disconnection event (<code class="literal">NDB_LE_Disconnected</code>).
       (<a href="http://bugs.mysql.com/22773" target="_top">Bug#22773</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The management server did not handle logging of node shutdown
        events correctly in certain cases.
       (<a href="http://bugs.mysql.com/22013" target="_top">Bug#22013</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">SELECT</code> statements with a
        <code class="literal">BLOB</code> or <code class="literal">TEXT</code> column in the
        selected column list and a <code class="literal">WHERE</code> condition
        including a primary key lookup on a <code class="literal">VARCHAR</code>
        primary key produced empty result sets.
       (<a href="http://bugs.mysql.com/19956" target="_top">Bug#19956</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When stopping and restarting multiple data nodes, the last node
        to be restarted would sometimes hang in Phase 100.
       (<a href="http://bugs.mysql.com/19645" target="_top">Bug#19645</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Following 3 or more missed local checkpoints by a cluster node,
        a restart of the node caused incorrect undo information to be
        used for Disk Data tables.
       (<a href="http://bugs.mysql.com/25636" target="_top">Bug#25636</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        <code class="literal">MEDIUMTEXT</code> columns of Disk Data tables were
        stored in memory rather than on disk, even if the columns were
        not indexed.
       (<a href="http://bugs.mysql.com/25001" target="_top">Bug#25001</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Performing a node restart with a newly dropped Disk Data table
        could lead to failure of the node during the restart.
       (<a href="http://bugs.mysql.com/24917" target="_top">Bug#24917</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Changing a column specification or issuing a
        <code class="literal">TRUNCATE</code> statement on a Disk Data table
        caused the table to become an in-memory table.
       (<a href="http://bugs.mysql.com/24667" target="_top">Bug#24667</a>, <a href="http://bugs.mysql.com/25296" target="_top">Bug#25296</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        When restoring from backup a cluster containing any Disk Data
        tables with hidden primary keys, a node failure resulted which
        could lead to a crash of the cluster.
       (<a href="http://bugs.mysql.com/24166" target="_top">Bug#24166</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Repeated <code class="literal">CREATE</code>, <code class="literal">DROP</code>, or
        <code class="literal">TRUNCATE</code> in various combinations with system
        restarts between these operations could lead to the eventual
        failure of a system restart.
       (<a href="http://bugs.mysql.com/21948" target="_top">Bug#21948</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Extents that should have been available for re-use following a
        <code class="literal">DROP TABLE</code> operation were not actually made
        available again until after the cluster had performed a local
        checkpoint.
       (<a href="http://bugs.mysql.com/17605" target="_top">Bug#17605</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Certain errors in replication setups could lead to unexpected
        node failures.
       (<a href="http://bugs.mysql.com/25755" target="_top">Bug#25755</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Connecting an API node to the cluster during a node restart
        while performing database operations could cause the restarting
        node to fail.
       (<a href="http://bugs.mysql.com/25329" target="_top">Bug#25329</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Following a restart of the master cluster, the latest GCI was
        set to 0 upon reconnection to the slave.
       (<a href="http://bugs.mysql.com/21806" target="_top">Bug#21806</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        Deletion of an <code class="literal">Ndb_cluster_connection</code> object
        took a very long time.
       (<a href="http://bugs.mysql.com/25487" target="_top">Bug#25487</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        Invoking the <code class="literal">NdbTransaction::execute()</code> method
        using execution type <code class="literal">Commit</code> and abort option
        <code class="literal">AO_IgnoreError</code> could lead to a crash of the
        transaction coordinator (<code class="literal">DBTC</code>).
       (<a href="http://bugs.mysql.com/25090" target="_top">Bug#25090</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        A unique index lookup on a non-existent tuple could lead to a
        data node timeout (error 4012).
       (<a href="http://bugs.mysql.com/25059" target="_top">Bug#25059</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        When using the <code class="literal">NdbTransaction::execute()</code>
        method, a very long timeout (greater than 5 minutes) could
        result if the last data node being polled was disconnected from
        the cluster.
       (<a href="http://bugs.mysql.com/24949" target="_top">Bug#24949</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        Due to an error in the computation of table fragment arrays,
        some transactions were not executed from the correct starting
        point.
       (<a href="http://bugs.mysql.com/24914" target="_top">Bug#24914</a>)</p></li><li><p>
        <span><strong class="command">mysqltest_embedded</strong></span> crashed at startup.
       (<a href="http://bugs.mysql.com/25890" target="_top">Bug#25890</a>)</p></li><li><p>
        Referencing an ambiguous column alias in an expression in the
        <code class="literal">ORDER BY</code> clause of a query caused the server
        to crash.
       (<a href="http://bugs.mysql.com/25427" target="_top">Bug#25427</a>)</p></li><li><p>
        A number of issues were uncovered by Valgrind.
       (<a href="http://bugs.mysql.com/25396" target="_top">Bug#25396</a>)</p></li><li><p>
        Using a view in combination with a <code class="literal">USING</code>
        clause caused column aliases to be ignored.
       (<a href="http://bugs.mysql.com/25106" target="_top">Bug#25106</a>)</p></li><li><p>
        A multiple-table <code class="literal">DELETE QUICK</code> could sometimes
        cause one of the affected tables to become corrupted.
       (<a href="http://bugs.mysql.com/25048" target="_top">Bug#25048</a>)</p></li><li><p>
        An assertion failed incorrectly for prepared statements that
        contained a single-row uncorrelated subquery that was used as an
        argument of the <a href="functions.html#operator_is-null"><code class="literal">IS NULL</code></a>
        predicate.
       (<a href="http://bugs.mysql.com/25027" target="_top">Bug#25027</a>)</p></li><li><p>
        In the <code class="literal">INFORMATION_SCHEMA.KEY_COLUMN_USAGE</code>
        table, the value displayed for the
        <code class="literal">REFERENCED_TABLE_NAME</code> column was the table
        name as encoded for disk storage, not the actual table name.
       (<a href="http://bugs.mysql.com/25026" target="_top">Bug#25026</a>)</p></li><li><p>
        The <a href="functions.html#function_repeat"><code class="literal">REPEAT()</code></a> function could
        return <code class="literal">NULL</code> when passed a column for the
        count argument.
       (<a href="http://bugs.mysql.com/24947" target="_top">Bug#24947</a>)</p></li><li><p>
        <span><strong class="command">mysql_upgrade</strong></span> failed if the
        <code class="literal">--password</code> (or <code class="option">-p</code>) option
        was given.
       (<a href="http://bugs.mysql.com/24896" target="_top">Bug#24896</a>)</p></li><li><p>
        Accessing a fixed record format table with a crashed key
        definition results in server/<span><strong class="command">myisamchk</strong></span>
        segmentation fault.
       (<a href="http://bugs.mysql.com/24855" target="_top">Bug#24855</a>)</p></li><li><p>
        <span><strong class="command">mysqld_multi</strong></span> and
        <span><strong class="command">mysqlaccess</strong></span> looked for option files in
        <code class="filename">/etc</code> even if the
        <code class="option">--sysconfdir</code> option for
        <span><strong class="command">configure</strong></span> had been given to specify a
        different directory.
       (<a href="http://bugs.mysql.com/24780" target="_top">Bug#24780</a>)</p></li><li><p>
        If there was insufficient memory available to
        <span><strong class="command">mysqld</strong></span>, this could sometimes cause the server
        to hang during startup.
       (<a href="http://bugs.mysql.com/24751" target="_top">Bug#24751</a>)</p></li><li><p>
        Optimizations that are legal only for subqueries without tables
        and <code class="literal">WHERE</code> conditions were applied for any
        subquery without tables.
       (<a href="http://bugs.mysql.com/24670" target="_top">Bug#24670</a>)</p></li><li><p>
        Under certain rare circumstances, local checkpoints were not
        performed properly, leading to an inability to restart one or
        more data nodes.
       (<a href="http://bugs.mysql.com/24664" target="_top">Bug#24664</a>)</p></li><li><p>
        A workaround was implemented to avoid a race condition in the
        NPTL <code class="literal">pthread_exit()</code> implementation.
       (<a href="http://bugs.mysql.com/24507" target="_top">Bug#24507</a>)</p></li><li><p>
        Under some circumstances, a <code class="literal">REORGANIZE
        PARTITION</code> statement could crash
        <span><strong class="command">mysqld</strong></span>.
       (<a href="http://bugs.mysql.com/24502" target="_top">Bug#24502</a>)</p></li><li><p>
        <span><strong class="command">mysqltest</strong></span> crashed with a stack overflow.
       (<a href="http://bugs.mysql.com/24498" target="_top">Bug#24498</a>)</p></li><li><p>
        Using row-based replication to replicate to a table having at
        least one extra <code class="literal">BIT</code> column with a default
        value on the slave as compared to the master could cause the
        slave to fail.
       (<a href="http://bugs.mysql.com/24490" target="_top">Bug#24490</a>)</p></li><li><p>
        Attempts to access a <code class="literal">MyISAM</code> table with a
        corrupt column definition caused a server crash.
       (<a href="http://bugs.mysql.com/24401" target="_top">Bug#24401</a>)</p></li><li><p>
        <code class="literal">ALTER ENABLE KEYS</code> or <code class="literal">ALTER TABLE
        DISABLE KEYS</code> combined with another <code class="literal">ALTER
        TABLE</code> option other than <code class="literal">RENAME TO</code>
        did nothing. In addition, if ALTER TABLE was used on a table
        having disabled keys, the keys of the resulting table were
        enabled.
       (<a href="http://bugs.mysql.com/24395" target="_top">Bug#24395</a>)</p></li><li><p>
        When opening a corrupted <code class="filename">.frm</code> file during a
        query, the server crashes.
       (<a href="http://bugs.mysql.com/24358" target="_top">Bug#24358</a>)</p></li><li><p>
        The <code class="option">--extern</code> option for
        <span><strong class="command">mysql-test-run.pl</strong></span> did not function correctly.
       (<a href="http://bugs.mysql.com/24354" target="_top">Bug#24354</a>)</p></li><li><p>
        Some joins in which one of the joined tables was a view could
        return erroneous results or crash the server.
       (<a href="http://bugs.mysql.com/24345" target="_top">Bug#24345</a>)</p></li><li><p>
        The <span><strong class="command">mysql.server</strong></span> script used the
        <span><strong class="command">source</strong></span> command, which is less portable than
        the <span><strong class="command">.</strong></span> command; it now uses
        <span><strong class="command">.</strong></span> instead.
       (<a href="http://bugs.mysql.com/24294" target="_top">Bug#24294</a>)</p></li><li><p>
        A view was not handled correctly if the
        <code class="literal">SELECT</code> part contained “<span class="quote">
        <code class="literal">\Z</code> </span>”.
       (<a href="http://bugs.mysql.com/24293" target="_top">Bug#24293</a>)</p></li><li><p>
        <span><strong class="command">mysql_install_db</strong></span> did not create the
        <code class="literal">mysql.plugin</code> table if strict SQL mode was
        enabled.
       (<a href="http://bugs.mysql.com/24270" target="_top">Bug#24270</a>)</p></li><li><p>
        A query using <code class="literal">WHERE
        <em class="replaceable"><code>unsigned_column</code></em> NOT IN
        ('<em class="replaceable"><code>negative_value</code></em>')</code> could
        cause the server to crash.
       (<a href="http://bugs.mysql.com/24261" target="_top">Bug#24261</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE</code> statements that performed both
        <code class="literal">RENAME TO</code> and <code class="literal">{ENABLE|DISABLE}
        KEYS</code> operations caused a server crash.
       (<a href="http://bugs.mysql.com/24219" target="_top">Bug#24219</a>)</p></li><li><p>
        When <code class="literal">SET PASSWORD</code> was written to the binary
        log double quotes were included in the statement. If the slave
        was running in with the server SQL mode set to
        <code class="literal">ANSI_QUOTES</code>, then the event failed, which
        halted the replication process.
       (<a href="http://bugs.mysql.com/24158" target="_top">Bug#24158</a>)</p></li><li><p>
        A <code class="literal">FETCH</code> statement using a cursor on a table
        which was not in the table cache could sometimes cause the
        server to crash.
       (<a href="http://bugs.mysql.com/24117" target="_top">Bug#24117</a>)</p></li><li><p>
        Hebrew-to-Unicode conversion failed for some characters.
        Definitions for the following Hebrew characters (as specified by
        the ISO/IEC 8859-8:1999) were added: LEFT-TO-RIGHT MARK (LRM),
        RIGHT-TO-LEFT MARK (RLM)
       (<a href="http://bugs.mysql.com/24037" target="_top">Bug#24037</a>)</p></li><li><p>
        On HP-UX, <span><strong class="command">mysqltest</strong></span> (non-thread-safe) crashed
        due to being linked against a thread-safe
        <code class="literal">libmysys</code> library.
       (<a href="http://bugs.mysql.com/23984" target="_top">Bug#23984</a>)</p></li><li><p>
        The server was built even when <span><strong class="command">configure</strong></span> was
        run with the <code class="option">--without-server</code> option.
       (<a href="http://bugs.mysql.com/23973" target="_top">Bug#23973</a>)</p><p>See also <a href="http://bugs.mysql.com/32898" target="_top">Bug#32898</a></p></li><li><p>
        The MySQL 5.1.12 binaries for Windows were missing the
        <code class="literal">FEDERATED</code>, <code class="literal">EXAMPLE</code>, and
        <code class="literal">BLACKHOLE</code> storage engines.
       (<a href="http://bugs.mysql.com/23900" target="_top">Bug#23900</a>)</p></li><li><p>
        <a href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a> did not work
        properly as an argument to a stored procedure.
       (<a href="http://bugs.mysql.com/23760" target="_top">Bug#23760</a>)</p></li><li><p>
        When reading from the standard input on Windows,
        <span><strong class="command">mysqlbinlog</strong></span> opened the input in text mode
        rather than binary mode and consequently misinterpreted some
        characters such as Control-Z.
       (<a href="http://bugs.mysql.com/23735" target="_top">Bug#23735</a>)</p></li><li><p>
        A stored procedure, executed from a connection using a binary
        character set, and which wrote multibyte data, would write
        incorrectly escaped entries to the binary log. This caused
        syntax errors, and caused replication to fail.
       (<a href="http://bugs.mysql.com/23619" target="_top">Bug#23619</a>, <a href="http://bugs.mysql.com/24492" target="_top">Bug#24492</a>)</p></li><li><p>
        <code class="literal">OPTIMIZE TABLE</code> tried to sort R-tree indexes
        such as spatial indexes, although this is not possible (see
        <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax">Section 12.5.2.5, “<code class="literal">OPTIMIZE TABLE</code> Syntax”</a>).
       (<a href="http://bugs.mysql.com/23578" target="_top">Bug#23578</a>)</p></li><li><p>
        The row count for <code class="literal">MyISAM</code> tables was not
        updated properly, causing <code class="literal">SHOW TABLE STATUS</code>
        to report incorrect values.
       (<a href="http://bugs.mysql.com/23526" target="_top">Bug#23526</a>)</p></li><li><p>
        The Instance Manager <code class="literal">DROP INSTANCE</code> command
        did not work.
       (<a href="http://bugs.mysql.com/23476" target="_top">Bug#23476</a>)</p></li><li><p>
        User-defined variables could consume excess memory, leading to a
        crash caused by the exhaustion of resources available to the
        <code class="literal">MEMORY</code> storage engine, due to the fact that
        this engine is used by MySQL for variable storage and
        intermediate results of <code class="literal">GROUP BY</code> queries.
        Where <code class="literal">SET</code> had been used, such a condition
        could instead give rise to the misleading error message
        <span class="errortext">You may only use constant expressions with
        SET</span>, rather than <span class="errortext">Out of memory (Needed
        NNNNNN bytes)</span>.
       (<a href="http://bugs.mysql.com/23443" target="_top">Bug#23443</a>)</p></li><li><p>
        A table created with the <code class="literal">ROW_FORMAT = FIXED</code>
        table option lost the option if an index was added or dropped
        with <code class="literal">CREATE INDEX</code> or <code class="literal">DROP
        INDEX</code>.
       (<a href="http://bugs.mysql.com/23404" target="_top">Bug#23404</a>)</p></li><li><p>
        A deadlock could occur, with the server hanging on
        <code class="literal">Closing tables</code>, with a sufficient number of
        concurrent <code class="literal">INSERT DELAYED</code>, <code class="literal">FLUSH
        TABLES</code>, and <code class="literal">ALTER TABLE</code> operations.
       (<a href="http://bugs.mysql.com/23312" target="_top">Bug#23312</a>)</p></li><li><p>
        Accuracy was improved for comparisons between
        <code class="literal">DECIMAL</code> columns and numbers represented as
        strings.
       (<a href="http://bugs.mysql.com/23260" target="_top">Bug#23260</a>)</p></li><li><p>
        The Instance Manager <code class="literal">STOP INSTANCE</code> command
        took too much time and caused Instance Manager to be
        unresponsive.
       (<a href="http://bugs.mysql.com/23215" target="_top">Bug#23215</a>)</p></li><li><p>
        If there was insufficient memory to store or update a blob
        record in a <code class="literal">MyISAM</code> table then the table will
        marked as crashed.
       (<a href="http://bugs.mysql.com/23196" target="_top">Bug#23196</a>)</p></li><li><p>
        A compressed <code class="literal">MyISAM</code> table that became
        corrupted could crash <span><strong class="command">myisamchk</strong></span> and possibly
        the MySQL Server.
       (<a href="http://bugs.mysql.com/23139" target="_top">Bug#23139</a>)</p></li><li><p>
        Using <code class="literal">CREATE TABLE ... SELECT</code> and rolling
        back the transaction would leave an empty table on the master,
        but the instructions would not be recorded in the binary log and
        therefore replicated to the slave. This would result in a
        difference between the master and slave databases. An implicit
        commit has been added to ensure consistency.
       (<a href="http://bugs.mysql.com/22865" target="_top">Bug#22865</a>)</p></li><li><p>
        <code class="literal">CREATE TABLE ... SELECT</code> statements were not
        rolled back correctly. As part of the fix, such a statement now
        causes an implicit commit before and after it is executed.
        However, it does not cause a commit when used to create a
        temporary table.
       (<a href="http://bugs.mysql.com/22864" target="_top">Bug#22864</a>)</p></li><li><p>
        <span><strong class="command">mysql_upgrade</strong></span> failed when called with a
        <code class="literal">basedir</code> pathname containing spaces.
       (<a href="http://bugs.mysql.com/22801" target="_top">Bug#22801</a>)</p></li><li><p>
        Using <code class="literal">INSTALL PLUGIN</code> followed by a restart of
        the server caused an error due to memory not being properly
        initialized.
       (<a href="http://bugs.mysql.com/22694" target="_top">Bug#22694</a>)</p></li><li><p>
        <code class="literal">SET lc_time_names = <em class="replaceable"><code>value</code></em>
        </code> allowed only exact literal values, not expression
        values.
       (<a href="http://bugs.mysql.com/22647" target="_top">Bug#22647</a>)</p></li><li><p>
        Changes to the <code class="literal">lc_time_names</code> system variable
        were not replicated.
       (<a href="http://bugs.mysql.com/22645" target="_top">Bug#22645</a>)</p></li><li><p>
        A partitioned table that used the <code class="literal">DATA
        DIRECTORY</code> option, where the data directory was the
        same as the directory in which the table definition file
        resided, became corrupted following <code class="literal">ALTER TABLE
        ENGINE=ARCHIVE</code>. This was actually due to an issue with
        the <code class="literal">ARCHIVE</code> storage engine, and not with
        partitioned tables in general.
       (<a href="http://bugs.mysql.com/22634" target="_top">Bug#22634</a>)</p></li><li><p>
        The <a href="functions.html#function_stddev"><code class="literal">STDDEV()</code></a> function returned a
        positive value for data sets consisting of a single value.
       (<a href="http://bugs.mysql.com/22555" target="_top">Bug#22555</a>)</p></li><li><p>
        <code class="literal">SHOW COLUMNS</code> reported some <code class="literal">NOT
        NULL</code> columns as <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/22377" target="_top">Bug#22377</a>)</p></li><li><p>
        A server crash occurred when using <code class="literal">LOAD DATA</code>
        to load a table containing a <code class="literal">NOT NULL</code> spatial
        column, when the statement did not load the spatial column. Now
        a <code class="literal">NULL supplied to NOT NULL column</code> error
        occurs.
       (<a href="http://bugs.mysql.com/22372" target="_top">Bug#22372</a>)</p></li><li><p>
        An <code class="literal">ALTER TABLE</code> statement that used a
        <code class="literal">RENAME</code> clause in combination with a
        <code class="literal">MODIFY</code> or <code class="literal">CHANGE</code> that did
        not actually change the table (for example, when it changed a
        column's type from <code class="literal">INT</code> to
        <code class="literal">INT</code>). The behavior caused by this bug
        differed according to whether or not the storage engine used by
        the table was transactional or non-transactional. For
        transactional tables (such as those using the
        <code class="literal">InnoDB</code> storage engine), the statement simply
        failed; for non-transactional tables (such as those using the
        <code class="literal">MyISAM</code> storage engine), the <code class="literal">ALTER
        TABLE</code> statement succeeding renaming the table, but
        subsequent <code class="literal">SELECT</code> statements against the
        renamed table would fail.
       (<a href="http://bugs.mysql.com/22369" target="_top">Bug#22369</a>)</p></li><li><p>
        The Instance Manager <code class="literal">STOP INSTANCE</code> command
        could not be applied to instances in the
        <code class="literal">Crashed</code>, <code class="literal">Failed</code>, or
        <code class="literal">Abandoned</code> state.
       (<a href="http://bugs.mysql.com/22306" target="_top">Bug#22306</a>)</p></li><li><p>
        <a href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a> requires complete
        dates with no “<span class="quote">zero</span>” parts, but sometimes did not
        return <code class="literal">NULL</code> when given such a date.
       (<a href="http://bugs.mysql.com/22229" target="_top">Bug#22229</a>)</p></li><li><p>
        Some small double precision numbers (such as
        <code class="literal">1.00000001e-300</code>) that should have been
        accepted were truncated to zero.
       (<a href="http://bugs.mysql.com/22129" target="_top">Bug#22129</a>)</p></li><li><p>
        Changing the value of <code class="literal">MI_KEY_BLOCK_LENGTH</code> in
        <code class="filename">myisam.h</code> and recompiling MySQL resulted in
        a <span><strong class="command">myisamchk</strong></span> that saw existing
        <code class="literal">MyISAM</code> tables as corrupt.
       (<a href="http://bugs.mysql.com/22119" target="_top">Bug#22119</a>)</p></li><li><p>
        For a nonexistent table, <code class="literal">DROP TEMPORARY TABLE</code>
        failed with an incorrect error message if
        <code class="literal">read_only</code> was enabled.
       (<a href="http://bugs.mysql.com/22077" target="_top">Bug#22077</a>)</p></li><li><p>
        A crash of the MySQL Server could occur when unpacking a
        <code class="literal">BLOB</code> column from a row in a corrupted MyISAM
        table. This could happen when trying to repair a table using
        either <code class="literal">REPAIR TABLE</code> or
        <span><strong class="command">myisamchk</strong></span>; it could also happen when trying
        to access such a “<span class="quote">broken</span>” row using statements like
        <code class="literal">SELECT</code> if the table was not marked as
        crashed.
       (<a href="http://bugs.mysql.com/22053" target="_top">Bug#22053</a>)</p></li><li><p>
        The code for generating <code class="literal">USE</code> statements for
        binary logging of <code class="literal">CREATE PROCEDURE</code> statements
        resulted in confusing output from <span><strong class="command">mysqlbinlog</strong></span>
        for <code class="literal">DROP PROCEDURE</code> statements.
       (<a href="http://bugs.mysql.com/22043" target="_top">Bug#22043</a>)</p></li><li><p>
        <a href="functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a> returned
        <code class="literal">NULL</code> if the format string contained a space
        following a non-format character.
       (<a href="http://bugs.mysql.com/22029" target="_top">Bug#22029</a>)</p></li><li><p>
        It was possible to use <code class="literal">DATETIME</code> values whose
        year, month, and day parts were all zeroes but whose hour,
        minute, and second parts contained nonzero values, an example of
        such an illegal <code class="literal">DATETIME</code> being
        <code class="literal">'0000-00-00 11:23:45'</code>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This fix was reverted in MySQL 5.1.18.
        </p></div><p>(<a href="http://bugs.mysql.com/21789" target="_top">Bug#21789</a>)</p><p>See also <a href="http://bugs.mysql.com/25301" target="_top">Bug#25301</a></p></li><li><p>
        SSL connections could hang at connection shutdown.
       (<a href="http://bugs.mysql.com/21781" target="_top">Bug#21781</a>, <a href="http://bugs.mysql.com/24148" target="_top">Bug#24148</a>)</p></li><li><p>
        yaSSL crashed on pre-Pentium Intel CPUs.
       (<a href="http://bugs.mysql.com/21765" target="_top">Bug#21765</a>)</p></li><li><p>
        Using <code class="literal">FLUSH TABLES</code> in one connection while
        another connection is using <code class="literal">HANDLER</code>
        statements caused a server crash.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This fix was reverted in MySQL 5.1.22
        </p></div><p>(<a href="http://bugs.mysql.com/21587" target="_top">Bug#21587</a>)</p><p>See also <a href="http://bugs.mysql.com/29474" target="_top">Bug#29474</a></p></li><li><p>
        The <code class="literal">FEDERATED</code> storage engine did not support
        the <code class="literal">euckr</code> character set.
       (<a href="http://bugs.mysql.com/21556" target="_top">Bug#21556</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> crashed while performing XA recovery
        of prepared transactions.
       (<a href="http://bugs.mysql.com/21468" target="_top">Bug#21468</a>)</p></li><li><p>
        It was possible to set the backslash character (“<span class="quote">
        <code class="literal">\</code> </span>”) as the delimiter character using
        <code class="literal">DELIMITER</code>, but not actually possible to use
        it as the delimiter.
       (<a href="http://bugs.mysql.com/21412" target="_top">Bug#21412</a>)</p></li><li><p>
        Using <code class="literal">ALTER TABLE</code> to convert a
        <code class="literal">CSV</code> table containing <code class="literal">NULL</code>
        values to <code class="literal">MyISAM</code> resulted in warnings.
       (<a href="http://bugs.mysql.com/21328" target="_top">Bug#21328</a>)</p></li><li><p>
        When updating a table that used a <code class="literal">JOIN</code> of the
        table itself (for example, when building trees) and the table
        was modified on one side of the expression, the table would
        either be reported as crashed or the wrong rows in the table
        would be updated.
       (<a href="http://bugs.mysql.com/21310" target="_top">Bug#21310</a>)</p></li><li><p>
        <code class="filename">mysqld_error.h</code> was not installed when only
        the client libraries were built.
       (<a href="http://bugs.mysql.com/21265" target="_top">Bug#21265</a>)</p></li><li><p>
        <code class="literal">InnoDB</code>: During a restart of the MySQL Server
        that followed the creation of a temporary table using the
        <code class="literal">InnoDB</code> storage engine, MySQL failed to clean
        up in such a way that <code class="literal">InnoDB</code> still attempted
        to find the files associated with such tables.
       (<a href="http://bugs.mysql.com/20867" target="_top">Bug#20867</a>)</p></li><li><p>
        Selecting into variables sometimes returned incorrect wrong
        results.
       (<a href="http://bugs.mysql.com/20836" target="_top">Bug#20836</a>)</p></li><li><p>
        Queries of the form <code class="literal">SELECT ... WHERE
        <em class="replaceable"><code>string</code></em> = ANY(...)</code> failed
        when the server used a single-byte character set and the client
        used a multi-byte character set.
       (<a href="http://bugs.mysql.com/20835" target="_top">Bug#20835</a>)</p></li><li><p>
        <code class="filename">mysql_fix_privilege_tables.sql</code> altered the
        <code class="literal">table_privs.table_priv</code> column to contain too
        few privileges, causing loss of the <code class="literal">CREATE
        VIEW</code> and <code class="literal">SHOW VIEW</code> privileges.
       (<a href="http://bugs.mysql.com/20589" target="_top">Bug#20589</a>)</p></li><li><p>
        A stored routine containing semicolon in its body could not be
        reloaded from a dump of a binary log.
       (<a href="http://bugs.mysql.com/20396" target="_top">Bug#20396</a>)</p></li><li><p>
        <code class="literal">SELECT ... FOR UPDATE</code>, <code class="literal">SELECT ...
        LOCK IN SHARE MODE</code>, <code class="literal">DELETE</code>, and
        <code class="literal">UPDATE</code> statements executed using a full table
        scan were not releasing locks on rows that did not satisfy the
        <code class="literal">WHERE</code> condition.
       (<a href="http://bugs.mysql.com/20390" target="_top">Bug#20390</a>)</p></li><li><p>
        The <span><strong class="command">BUILD/check-cpu</strong></span> script did not recognize
        Celeron processors.
       (<a href="http://bugs.mysql.com/20061" target="_top">Bug#20061</a>)</p></li><li><p>
        Unsigned <code class="literal">BIGINT</code> values treated as signed
        values by the <a href="functions.html#function_mod"><code class="literal">MOD()</code></a> function.
       (<a href="http://bugs.mysql.com/19955" target="_top">Bug#19955</a>)</p></li><li><p>
        Compiling PHP 5.1 with the MySQL static libraries failed on some
        versions of Linux.
       (<a href="http://bugs.mysql.com/19817" target="_top">Bug#19817</a>)</p></li><li><p>
        The <code class="literal">DELIMITER</code> statement did not work
        correctly when used in an SQL file run using the
        <code class="literal">SOURCE</code> statement.
       (<a href="http://bugs.mysql.com/19799" target="_top">Bug#19799</a>)</p></li><li><p>
        For <code class="literal">SET</code>, <code class="literal">SELECT</code>, and
        <code class="literal">DO</code> statements that invoked a stored function
        from a database other than the default database, the function
        invocation could fail to be replicated.
       (<a href="http://bugs.mysql.com/19725" target="_top">Bug#19725</a>)</p></li><li><p>
        <span><strong class="command">mysqltest</strong></span> incorrectly tried to retrieve
        result sets for some queries where no result set was available.
       (<a href="http://bugs.mysql.com/19410" target="_top">Bug#19410</a>)</p></li><li><p>
        <code class="literal">VARBINARY</code> column values inserted on a MySQL
        4.1 server had trailing zeroes following upgrade to MySQL 5.0 or
        later.
       (<a href="http://bugs.mysql.com/19371" target="_top">Bug#19371</a>)</p></li><li><p>
        Some <code class="literal">CASE</code> statements inside stored routines
        could lead to excessive resource usage or a crash of the server.
       (<a href="http://bugs.mysql.com/19194" target="_top">Bug#19194</a>, <a href="http://bugs.mysql.com/24854" target="_top">Bug#24854</a>)</p></li><li><p>
        Instance Manager could crash during shutdown.
       (<a href="http://bugs.mysql.com/19044" target="_top">Bug#19044</a>)</p></li><li><p>
        <span><strong class="command">myisampack</strong></span> wrote to unallocated memory,
        causing a crash.
       (<a href="http://bugs.mysql.com/17951" target="_top">Bug#17951</a>)</p></li><li><p>
        <code class="literal">FLUSH LOGS</code> or <span><strong class="command">mysqladmin
        flush-logs</strong></span> caused a server crash if the binary log was
        not open.
       (<a href="http://bugs.mysql.com/17733" target="_top">Bug#17733</a>)</p></li><li><p>
        <span><strong class="command">mysql_fix_privilege_tables</strong></span> did not accept a
        password containing embedded space or apostrophe characters.
       (<a href="http://bugs.mysql.com/17700" target="_top">Bug#17700</a>)</p></li><li><p>
        No warning was issued for use of the <code class="literal">DATA
        DIRECTORY</code> or <code class="literal">INDEX DIRECTORY</code> table
        options on a platform that does not support them.
       (<a href="http://bugs.mysql.com/17498" target="_top">Bug#17498</a>)</p></li><li><p>
        The <code class="literal">FEDERATED</code> storage engine did not support
        the <code class="literal">utf8</code> character set.
       (<a href="http://bugs.mysql.com/17044" target="_top">Bug#17044</a>)</p></li><li><p>
        The optimizer removes expressions from <code class="literal">GROUP
        BY</code> and <code class="literal">DISTINCT</code> clauses if they
        happen to participate in <code class="literal">
        <em class="replaceable"><code>expression</code></em> =
        <em class="replaceable"><code>constant</code></em></code> predicates of the
        <code class="literal">WHERE</code> clause, the idea being that, if the
        expression is equal to a constant, then it cannot take on
        multiple values. However, for predicates where the expression
        and the constant item are of different result types (for
        example, when a string column is compared to 0), this is not
        valid, and can lead to invalid results in such cases. The
        optimizer now performs an additional check of the result types
        of the expression and the constant; if their types differ, then
        the expression is not removed from the <code class="literal">GROUP
        BY</code> list.
       (<a href="http://bugs.mysql.com/15881" target="_top">Bug#15881</a>)</p></li><li><p>
        When a prepared statement failed during the prepare operation,
        the error code was not cleared when it was reused, even if the
        subsequent use was successful.
       (<a href="http://bugs.mysql.com/15518" target="_top">Bug#15518</a>)</p></li><li><p>
        Dropping a user-defined function sometimes did not remove the
        UDF entry from the <code class="literal">mysql.proc</code> table.
       (<a href="http://bugs.mysql.com/15439" target="_top">Bug#15439</a>)</p></li><li><p>
        Inserting a row into a table without specifying a value for a
        <code class="literal">BINARY(<em class="replaceable"><code>N</code></em>) NOT NULL</code>
        column caused the column to be set to spaces, not zeroes.
       (<a href="http://bugs.mysql.com/14171" target="_top">Bug#14171</a>)</p></li><li><p>
        On Windows, the <a href="functions.html#function_sleep"><code class="literal">SLEEP()</code></a> function
        could sleep too long, especially after a change to the system
        clock.
       (<a href="http://bugs.mysql.com/14094" target="_top">Bug#14094</a>, <a href="http://bugs.mysql.com/24686" target="_top">Bug#24686</a>, <a href="http://bugs.mysql.com/17635" target="_top">Bug#17635</a>)</p></li><li><p>
        <span><strong class="command">mysqldump --order-by-primary</strong></span> failed if the
        primary key name was an identifier that required quoting.
       (<a href="http://bugs.mysql.com/13926" target="_top">Bug#13926</a>)</p></li><li><p>
        Subqueries of the form <code class="literal">NULL IN (SELECT ...)</code>
        returned invalid results.
       (<a href="http://bugs.mysql.com/8804" target="_top">Bug#8804</a>, <a href="http://bugs.mysql.com/23485" target="_top">Bug#23485</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-14"></a>C.1.16. Changes in  MySQL 5.1.14 (05 December 2006)</h3></div></div></div><p class="release-level">
      This is a new Beta development release, fixing recently discovered
      bugs.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p class="release-non-production">
        This Beta release, as any other pre-production release, should
        not be installed on <span class="emphasis"><em>production</em></span> level
        systems or systems with critical data. It is good practice to
        back up your data before installing any new version of software.
        Although MySQL has worked very hard to ensure a high level of
        quality, protect your data by making a backup as you would for
        any software beta release. Please refer to our bug database at
        <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a> for more details about the
        individual bugs fixed in this version.
      </p></div><p>This section documents all changes and bug fixes that have been applied since the last official MySQL release. If you would like to receive more fine-grained and personalized <span class="emphasis"><em>update alerts</em></span> about fixes that are relevant to the version and features you use, please consider subscribing to <span class="emphasis"><em>MySQL Enterprise</em></span> (a commercial MySQL offering). For more details please see <a href="http://www.mysql.com/products/enterprise" target="_top">http://www.mysql.com/products/enterprise</a>.</p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Cluster Replication</strong></span>: <span class="bold"><strong>Incompatible Change</strong></span>: 
        Two major changes have taken place with regard to the MySQL
        Cluster system tables. These are:
      </p><p>
        </p><div class="orderedlist"><ol type="1"><li><p>
              The <code class="literal">cluster</code> database is no longer used.
              The tables formerly found in the
              <code class="literal">cluster</code> database are now in the
              <code class="literal">mysql</code> database, and have been renamed
              as <code class="literal">ndb_binlog_index</code>,
              <code class="literal">ndb_apply_status</code>, and
              <code class="literal">ndb_schema</code>.
            </p></li><li><p>
              The <code class="literal">mysql.ndb_apply_status</code> and
              <code class="literal">mysql.ndb_schema</code> tables (formerly
              <code class="literal">cluster.apply_status</code> and
              <code class="literal">cluster.schema</code> are now created by
              <span><strong class="command">ndb_restore</strong></span>, in the event that they do
              not already exist on the slave cluster.
            </p></li></ol></div><p>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          When upgrading from versions of MySQL previous to 5.1.14 to
          5.1.14 or later, <code class="literal">mysql_fix_privilege_tables</code>
          merely creates a new <code class="literal">mysql.ndb_binlog_index</code>
          table, but does not remove the existing
          <code class="literal">cluster</code> database (or, if upgrading from
          MySQL 5.1.7 or earlier, the existing
          <code class="literal">cluster_replication</code> database), nor any of
          the tables in it.
        </p></div><p>
        For more information, see
        <a href="mysql-cluster.html#mysql-cluster-replication-schema" title="20.11.4. Cluster Replication Schema and Tables">Section 20.11.4, “Cluster Replication Schema and Tables”</a>.
       (<a href="http://bugs.mysql.com/14612" target="_top">Bug#14612</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: <span class="bold"><strong>Incompatible Change</strong></span>: 
        The <code class="literal">cluster</code> database is no longer used. The
        tables formerly found in the <code class="literal">cluster</code> database
        are now in the <code class="literal">mysql</code> database, and have been
        renamed as <code class="literal">ndb_binlog_index</code>,
        <code class="literal">ndb_apply_status</code>, and
        <code class="literal">ndb_schema</code>.
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The <code class="literal">prepared_stmt_count</code> system variable has
        been converted to the <code class="literal">Prepared_stmt_count</code>
        global status variable (viewable with the <code class="literal">SHOW GLOBAL
        STATUS</code> statement).
       (<a href="http://bugs.mysql.com/23159" target="_top">Bug#23159</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Previously, you could create a user-defined function (UDF) or
        stored function with the same name as a built-in function, but
        could not invoke the UDF. Now an error occurs if you try to
        create such a UDF. The server also now generates a warning if
        you create a stored function with the same name as a built-in
        function. It is not considered an error to create a stored
        function with the same name as a built-in function because you
        can invoke the function using <code class="literal">
        <em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>func_name</code></em>()</code>
        syntax. However, the server now generates a warning in this
        case.
      </p><p>
        See <a href="language-structure.html#function-resolution" title="8.2.4. Function Name Parsing and Resolution">Section 8.2.4, “Function Name Parsing and Resolution”</a>, for the rules
        describing how the server interprets references to different
        kinds of functions.
       (<a href="http://bugs.mysql.com/22619" target="_top">Bug#22619</a>, <a href="http://bugs.mysql.com/18239" target="_top">Bug#18239</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Backup messages are now printed to the Cluster log.
       (<a href="http://bugs.mysql.com/24544" target="_top">Bug#24544</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Setting the configuration parameter
        <code class="literal">LockPagesInMainMemory</code> had no effect.
       (<a href="http://bugs.mysql.com/24461" target="_top">Bug#24461</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The error message <span class="errortext">Management server closed
        connection</span>, when recorded in the MySQL error log,
        now includes a timestamp indicating when the error took place.
       (<a href="http://bugs.mysql.com/21519" target="_top">Bug#21519</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        It is now possible to create a unique hashed index on a column
        that is not defined as <code class="literal">NOT NULL</code>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This change applies only to tables using the
          <code class="literal">NDB</code> storage engine.
        </p></div><p>
        Unique indexes on columns in <code class="literal">NDB</code> tables do
        not store null values because they are mapped to primary keys in
        an internal index table (and primary keys cannot contain nulls).
      </p><p>
        Normally, an additional ordered index is created when one
        creates unique indexes on <code class="literal">NDB</code> table columns;
        this can be used to search for <code class="literal">NULL</code> values.
        However, if <code class="literal">USING HASH</code> is specified when such
        an index is created, no ordered index is created.
      </p><p>
        The reason for permitting unique hash indexes with null values
        is that, in some cases, the user wants to save space if a large
        number of records are pre-allocated but not fully initialized.
        This also assumes that the user will <span class="emphasis"><em>not</em></span>
        try to search for null values. Since MySQL does not support
        indexes that are not allowed to be searched in some cases, the
        <code class="literal">NDB</code> storage engine uses a full table scan
        with pushed conditions for the referenced index columns to
        return the correct result.
      </p><p>
        A warning is returned if one creates a unique nullable hash
        index, since the query optimizer should be provided a hint not
        to use it with <code class="literal">NULL</code> values if this can be
        avoided.
       (<a href="http://bugs.mysql.com/21507" target="_top">Bug#21507</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Disk Data): The output of <span><strong class="command">mysqldump</strong></span> now
        includes by default all tablespace and logfile group definitions
        used by any tables or databases that are dumped.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The working of the <code class="option">--all-tablespaces</code> or
          <code class="option">-Y</code> option for <span><strong class="command">mysqldump</strong></span>
          remains unaffected by this change.
        </p></div><p>(<a href="http://bugs.mysql.com/20839" target="_top">Bug#20839</a>)</p></li><li><p>
        <code class="literal">DROP TRIGGER</code> now supports an <code class="literal">IF
        EXISTS</code> clause.
       (<a href="http://bugs.mysql.com/23703" target="_top">Bug#23703</a>)</p></li><li><p>
        Direct and indirect usage of stored routines, user-defined
        functions, and table references is now prohibited in
        <code class="literal">CREATE EVENT</code> and <code class="literal">ALTER
        EVENT</code> statements.
      </p><p>
        See <a href="events.html#create-event" title="25.2.2. CREATE EVENT Syntax">Section 25.2.2, “<code class="literal">CREATE EVENT</code> Syntax”</a>, and
        <a href="events.html#alter-event" title="25.2.1. ALTER EVENT Syntax">Section 25.2.1, “<code class="literal">ALTER EVENT</code> Syntax”</a>, for more specific
        information.
       (<a href="http://bugs.mysql.com/22830" target="_top">Bug#22830</a>)</p></li><li><p>
        The XPath operators <code class="literal">&lt;</code> and
        <code class="literal">&gt;</code>, as implemented in the
        <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a>
        function, operated in reverse.
      </p><p>
        With this fix, all standard XPath comparison operators should
        now be supported correctly for use with the
        <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> and
        <a href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a> functions.
       (<a href="http://bugs.mysql.com/22823" target="_top">Bug#22823</a>)</p></li><li><p>
        For the <span><strong class="command">mysql</strong></span> client, display of result set
        metadata now is enabled with the
        <code class="option">--column-type-info</code> option rather than with
        <code class="option">--debug-info</code>/<code class="option">-T</code>.
      </p></li><li><p>
        <span><strong class="command">mysqladmin</strong></span>, <span><strong class="command">mysqlcheck</strong></span>,
        <span><strong class="command">mysqldump</strong></span>, <span><strong class="command">mysqlimport</strong></span>,
        and <span><strong class="command">mysqlshow</strong></span> now accept the
        <code class="option">--debug-info</code> option, which displays debugging
        information and memory and CPU usage statistics at program exit.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The failure of a data node failure during a schema operation
        could lead to additional node failures.
       (<a href="http://bugs.mysql.com/24752" target="_top">Bug#24752</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A committed read could be attempted before a data node had time
        to connect, causing a timeout error.
       (<a href="http://bugs.mysql.com/24717" target="_top">Bug#24717</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The simultaneous shutdown of <span><strong class="command">mysqld</strong></span> and
        <span><strong class="command">ndbd</strong></span> processes caused unnecessary locking.
       (<a href="http://bugs.mysql.com/24655" target="_top">Bug#24655</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The failure of the master node in a node group during the
        allocation of node IDs could cause <span><strong class="command">ndb_mgmd</strong></span>
        to hang.
       (<a href="http://bugs.mysql.com/24543" target="_top">Bug#24543</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In certain rare cases, a data node could crash due to a
        typographical error in the MySQL Cluster source code.
       (<a href="http://bugs.mysql.com/24476" target="_top">Bug#24476</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Creating a new tables containing a <code class="literal">BLOB</code>
        column when the server was short of memory could cause the
        server to crash.
       (<a href="http://bugs.mysql.com/24470" target="_top">Bug#24470</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Sudden disconnection of an SQL or data node could lead to
        shutdown of data nodes with the error <span class="errortext">failed
        ndbrequire</span>.
       (<a href="http://bugs.mysql.com/24447" target="_top">Bug#24447</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Any statement following the execution of <code class="literal">CREATE TABLE
        ... LIKE <em class="replaceable"><code>ndb_table</code></em></code> (where
        <em class="replaceable"><code>ndb_table</code></em> was a table using the
        <code class="literal">NDB</code> storage engine), would cause the
        <span><strong class="command">mysql</strong></span> client to hang.
       (<a href="http://bugs.mysql.com/24301" target="_top">Bug#24301</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Disk Data): Excessive fragmentation of Disk Data files
        (including log files and data files) could occur during the
        course of normal use.
       (<a href="http://bugs.mysql.com/24143" target="_top">Bug#24143</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When the management client command <code class="literal">ALL RESTART
        -i</code> was executed while one data node was not running,
        all data nodes in the cluster were shut down.
       (<a href="http://bugs.mysql.com/24105" target="_top">Bug#24105</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A query using an index scan followed by a delete operation, and
        then a rollback could cause one or more data nodes to crash.
       (<a href="http://bugs.mysql.com/24039" target="_top">Bug#24039</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Disk Data): Under some circumstances, a
        <code class="literal">DELETE</code> from a Disk Data table could cause
        <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/23542" target="_top">Bug#23542</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        It was possible for the sum of the
        <code class="literal">MaxNoOfTables</code>,
        <code class="literal">MaxNoOfOrderedIndexes</code>, and
        <code class="literal">MaxNoOfUniqueHashIndexes</code> configuration
        parameters, plus the number of system tables to exceed the
        maximum value for a <code class="literal">Uint32</code> number. In such a
        case, the cluster's data nodes failed to start, and no reason
        for this could easily be determined from the error messages
        provided.
       (<a href="http://bugs.mysql.com/22548" target="_top">Bug#22548</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A value equal to or greater than the allowed maximum for
        <code class="literal">LongMessageBuffer</code> caused all data nodes to
        crash.
       (<a href="http://bugs.mysql.com/22547" target="_top">Bug#22547</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Multiple occurrences of error conditions were logged with
        duplicat error messages rather than being reported with a single
        error message stating that the error was encountered
        <em class="replaceable"><code>N</code></em> times.
       (<a href="http://bugs.mysql.com/22313" target="_top">Bug#22313</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Given a table <code class="literal">mytbl</code> in a database
        <code class="literal">mydb</code> on a MySQL Server acting as an SQL node
        in a MySQL Cluster, then, following multiple <code class="literal">ALTER
        TABLE mytbl ENGINE=<em class="replaceable"><code>engine</code></em></code>
        statements — first, to change the storage engine used for
        a table to <code class="literal">NDB</code>, and then again to change the
        table to use a non-<code class="literal">NDB</code> storage engine —
        a <code class="literal">DROP DATABASE mydb</code> statement executed on
        any SQL node in the cluster would cause <code class="literal">mydb</code>
        to be dropped on <span class="emphasis"><em>all</em></span> SQL nodes in the
        cluster, even if <code class="literal">mydb</code> contained
        non-<code class="literal">NDB</code> tables.
       (<a href="http://bugs.mysql.com/21495" target="_top">Bug#21495</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An incorrect error message was displayed in the event that the
        value of the <code class="literal">MaxNoOfOrderedIndexes</code> parameter
        was set too low.
       (<a href="http://bugs.mysql.com/20065" target="_top">Bug#20065</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An incorrect error message was displayed in the event that the
        value of the <code class="literal">DataMemory</code> parameter was
        insufficient for the amount of data to be stored by the cluster.
       (<a href="http://bugs.mysql.com/19808" target="_top">Bug#19808</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Some values of <code class="literal">MaxNoOfTriggers</code> could cause
        the server to become inaccessible following startup of the data
        nodes.
       (<a href="http://bugs.mysql.com/19454" target="_top">Bug#19454</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        If the value set for <code class="literal">MaxNoOfAttributes</code> is
        excessive, a suitable error message is now returned.
       (<a href="http://bugs.mysql.com/19352" target="_top">Bug#19352</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Different error messages were returned for similar cases
        involving failure to allocate memory for Cluster operations.
       (<a href="http://bugs.mysql.com/19203" target="_top">Bug#19203</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A unique constraint violation was not ignored by an
        <code class="literal">UPDATE IGNORE</code> statement when the constraint
        violation occurred on a non-primary key.
       (<a href="http://bugs.mysql.com/18487" target="_top">Bug#18487</a>, <a href="http://bugs.mysql.com/24303" target="_top">Bug#24303</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Replication): If errors occurred during purging of the binary
        logs, extraneous rows could remain left in the
        <code class="literal">binlog_index</code> table.
       (<a href="http://bugs.mysql.com/15021" target="_top">Bug#15021</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        <span><strong class="command">ndb_restore</strong></span> sometimes failed when attempting
        to restore Disk Data tables due to data node failure caused by
        accessing uninitialized memory.
       (<a href="http://bugs.mysql.com/24331" target="_top">Bug#24331</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        It was possible to execute a statement for creating a Disk Data
        table that referred to a nonexistent tablespace, in which case
        the table created was actually an in-memory
        <code class="literal">NDB</code> table. Such a statement now fails
        instead, with an appropriate error message.
       (<a href="http://bugs.mysql.com/23576" target="_top">Bug#23576</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        Using <code class="literal">BIT</code> values with any of the comparison
        methods of the <code class="literal">NdbScanFilter</code> class caused
        data nodes to fail.
       (<a href="http://bugs.mysql.com/24503" target="_top">Bug#24503</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        Some MGM API function calls could yield incorrect return values
        in certain cases where the cluster was operating under a very
        high load, or experienced timeouts in inter-node communications.
       (<a href="http://bugs.mysql.com/24011" target="_top">Bug#24011</a>)</p></li><li><p>
        In some cases, a function that should be parsed as a
        user-defined function was parsed as a stored function.
       (<a href="http://bugs.mysql.com/24736" target="_top">Bug#24736</a>)</p></li><li><p>
        Some unnecessary Valgrind warnings were removed from the server.
        .
       (<a href="http://bugs.mysql.com/24488" target="_top">Bug#24488</a>, <a href="http://bugs.mysql.com/24533" target="_top">Bug#24533</a>)</p></li><li><p>
        The server source code had multiple exportable definitions of
        the <code class="literal">field_in_record_is_null()</code> function. These
        are now all declared <code class="literal">static</code>.
       (<a href="http://bugs.mysql.com/24190" target="_top">Bug#24190</a>)</p></li><li><p>
        The loose index scan optimization for <code class="literal">GROUP
        BY</code> with <code class="literal">MIN</code> or
        <code class="literal">MAX</code> was not applied within other queries,
        such as <code class="literal">CREATE TABLE ... SELECT ...</code>,
        <code class="literal">INSERT ... SELECT ...</code>, or in the
        <code class="literal">FROM</code> clauses of subqueries.
       (<a href="http://bugs.mysql.com/24156" target="_top">Bug#24156</a>)</p></li><li><p>
        Subqueries for which a pushed-down condition did not produce
        exactly one key field could cause a server crash.
       (<a href="http://bugs.mysql.com/24056" target="_top">Bug#24056</a>)</p></li><li><p>
        The size of <code class="literal">MEMORY</code> tables and internal
        temporary tables was limited to 4GB on 64-bit Windows systems.
       (<a href="http://bugs.mysql.com/24052" target="_top">Bug#24052</a>)</p></li><li><p>
        With row-based binary logging, replicated multiple-statement
        transaction deadlocks did not return the correct error code,
        causing the slave SQL thread to stop rather than roll back and
        re-execute.
       (<a href="http://bugs.mysql.com/23831" target="_top">Bug#23831</a>)</p></li><li><p>
        <a href="functions.html#function_last-day"><code class="literal">LAST_DAY('0000-00-00')</code></a> could
        cause a server crash.
       (<a href="http://bugs.mysql.com/23653" target="_top">Bug#23653</a>)</p></li><li><p>
        A trigger that invoked a stored function could cause a server
        crash when activated by different client connections.
       (<a href="http://bugs.mysql.com/23651" target="_top">Bug#23651</a>)</p></li><li><p>
        The stack size for NetWare binaries was increased to 128KB to
        prevent problems caused by insufficient stack size.
       (<a href="http://bugs.mysql.com/23504" target="_top">Bug#23504</a>)</p></li><li><p>
        If elements in a non-top-level <code class="literal">IN</code> subquery
        were accessed by an index and the subquery result set included a
        <code class="literal">NULL</code> value, the quantified predicate that
        contained the subquery was evaluated to <code class="literal">NULL</code>
        when it should return a non-<code class="literal">NULL</code> value.
       (<a href="http://bugs.mysql.com/23478" target="_top">Bug#23478</a>)</p></li><li><p>
        When applying the <code class="literal">group_concat_max_len</code> limit,
        <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a> could truncate
        multi-byte characters in the middle.
       (<a href="http://bugs.mysql.com/23451" target="_top">Bug#23451</a>)</p></li><li><p>
        <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> could
        return values different from
        <a href="apis.html#mysql-stmt-affected-rows" title="29.2.7.1. mysql_stmt_affected_rows()"><code class="literal">mysql_stmt_affected_rows()</code></a>
        for the same sequence of statements.
       (<a href="http://bugs.mysql.com/23383" target="_top">Bug#23383</a>)</p></li><li><p>
        Calculation of <a href="functions.html#function_count"><code class="literal">COUNT(DISTINCT)</code></a>,
        <a href="functions.html#function_avg"><code class="literal">AVG(DISTINCT)</code></a>, or
        <a href="functions.html#function_sum"><code class="literal">SUM(DISTINCT)</code></a> when
        they are referenced more than once in a single query with
        <code class="literal">GROUP BY</code> could cause a server crash.
       (<a href="http://bugs.mysql.com/23184" target="_top">Bug#23184</a>)</p></li><li><p>
        Changes to character set variables prior to an action on a
        replication-ignored table were forgotten by slave servers.
       (<a href="http://bugs.mysql.com/22877" target="_top">Bug#22877</a>)</p></li><li><p>
        With row-based binary logging, for <code class="literal">CREATE TABLE IF NOT
        EXISTS LIKE <em class="replaceable"><code>temporary_table</code></em>
        </code> statements, the <code class="literal">IF NOT EXISTS</code>
        clause was not logged.
       (<a href="http://bugs.mysql.com/22762" target="_top">Bug#22762</a>)</p></li><li><p>
        <a href="functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a>,
        <a href="functions.html#function_encode"><code class="literal">ENCODE()</code></a>,
        <a href="functions.html#function_decode"><code class="literal">DECODE()</code></a>, and
        <a href="functions.html#function_format"><code class="literal">FORMAT()</code></a> could only accept a
        constant for some parameters, and could not be used in prepared
        statements.
       (<a href="http://bugs.mysql.com/22684" target="_top">Bug#22684</a>)</p></li><li><p>
        Queries using a column alias in an expression as part of an
        <code class="literal">ORDER BY</code> clause failed, an example of such a
        query being <code class="literal">SELECT mycol + 1 AS mynum FROM mytable
        ORDER BY 30 - mynum</code>.
       (<a href="http://bugs.mysql.com/22457" target="_top">Bug#22457</a>)</p></li><li><p>
        Using <code class="literal">EXPLAIN</code> caused a server crash for
        queries that selected from <code class="literal">INFORMATION_SCHEMA</code>
        in a subquery in the <code class="literal">FROM</code> clause.
       (<a href="http://bugs.mysql.com/22413" target="_top">Bug#22413</a>)</p></li><li><p>
        Instance Manager option-parsing code caused memory-allocation
        errors.
       (<a href="http://bugs.mysql.com/22242" target="_top">Bug#22242</a>)</p></li><li><p>
        Trailing spaces were not removed from Unicode
        <code class="literal">CHAR</code> column values when used in indexes. This
        resulted in excessive usage of storage space, and could affect
        the results of some <code class="literal">ORDER BY</code> queries that
        made use of such indexes.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          When upgrading, it is necessary to re-create any existing
          indexes on Unicode <code class="literal">CHAR</code> columns in order to
          take advantage of the fix. This can be done by using a
          <code class="literal">REPAIR TABLE</code> statement on each affected
          table.
        </p></div><p>(<a href="http://bugs.mysql.com/22052" target="_top">Bug#22052</a>)</p></li><li><p>
        With row-based binary logging, <code class="literal">CREATE TABLE IF NOT
        EXISTS SELECT</code> statements were not logged properly.
       (<a href="http://bugs.mysql.com/22027" target="_top">Bug#22027</a>)</p></li><li><p>
        In some cases, the parser failed to distinguish a user-defined
        function from a stored function.
       (<a href="http://bugs.mysql.com/21809" target="_top">Bug#21809</a>)</p></li><li><p>
        Inserting a default or invalid value into a spatial column could
        fail with <code class="literal">Unknown error</code> rather than a more
        appropriate error.
       (<a href="http://bugs.mysql.com/21790" target="_top">Bug#21790</a>)</p></li><li><p>
        Evaluation of subqueries that require the filesort algorithm
        were allocating and freeing the
        <code class="literal">sort_buffer_size</code> buffer many times, resulting
        in slow performance. Now the buffer is allocated once and
        reused.
       (<a href="http://bugs.mysql.com/21727" target="_top">Bug#21727</a>)</p></li><li><p>
        Through the C API, the member strings in
        <code class="literal">MYSQL_FIELD</code> for a query that contains
        expressions may return incorrect results.
       (<a href="http://bugs.mysql.com/21635" target="_top">Bug#21635</a>)</p></li><li><p>
        View columns were always handled as having implicit derivation,
        leading to <code class="literal">illegal mix of collation errors</code>
        for some views in <code class="literal">UNION</code> operations. Now view
        column derivation comes from the original expression given in
        the view definition.
       (<a href="http://bugs.mysql.com/21505" target="_top">Bug#21505</a>)</p></li><li><p>
        <a href="functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a> returned a signed
        <code class="literal">BIGINT</code> value, not an unsigned value.
       (<a href="http://bugs.mysql.com/21466" target="_top">Bug#21466</a>)</p></li><li><p>
        For debug builds, <span><strong class="command">mysqladmin shutdown</strong></span>
        displayed an extraneous <code class="literal">skipped 9 bytes from file:
        socket (3)</code> message.
       (<a href="http://bugs.mysql.com/21428" target="_top">Bug#21428</a>)</p></li><li><p>
        For renaming of views, encoding of table name to filenames was
        not performed.
       (<a href="http://bugs.mysql.com/21370" target="_top">Bug#21370</a>)</p></li><li><p>
        <code class="literal">CREATE FUNCTION X()</code> and <code class="literal">CREATE
        FUNCTION Y()</code> failed with a syntax error instead of
        warning the user that these function names are already used (for
        GIS functions).
       (<a href="http://bugs.mysql.com/21025" target="_top">Bug#21025</a>)</p></li><li><p>
        On slave servers, transactions that exceeded the lock wait
        timeout failed to roll back properly.
       (<a href="http://bugs.mysql.com/20697" target="_top">Bug#20697</a>)</p></li><li><p>
        <code class="literal">CONCURRENT</code> did not work correctly for
        <code class="literal">LOAD DATA INFILE</code>.
       (<a href="http://bugs.mysql.com/20637" target="_top">Bug#20637</a>)</p></li><li><p>
        With <code class="literal">lower_case_table_names</code> set to 1,
        <code class="literal">SHOW CREATE TABLE</code> printed incorrect output
        for table names containing Turkish I (LATIN CAPITAL LETTER I
        WITH DOT ABOVE).
       (<a href="http://bugs.mysql.com/20404" target="_top">Bug#20404</a>)</p></li><li><p>
        A query with a subquery that references columns of a view from
        the outer <code class="literal">SELECT</code> could return an incorrect
        result if used from a prepared statement.
       (<a href="http://bugs.mysql.com/20327" target="_top">Bug#20327</a>)</p></li><li><p>
        For queries that select from a view, the server was returning
        <code class="literal">MYSQL_FIELD</code> metadata inconsistently for view
        names and table names. For view columns, the server now returns
        the view name in the <code class="literal">table</code> field and, if the
        column selects from an underlying table, the table name in the
        <code class="literal">org_table</code> field.
       (<a href="http://bugs.mysql.com/20191" target="_top">Bug#20191</a>)</p></li><li><p>
        Invalidating the query cache caused a server crash for
        <code class="literal">INSERT INTO ... SELECT</code> statements that
        selected from a view.
       (<a href="http://bugs.mysql.com/20045" target="_top">Bug#20045</a>)</p></li><li><p>
        For a cast of a <code class="literal">DATETIME</code> value containing
        microseconds to <code class="literal">DECIMAL</code>, the microseconds
        part was truncated without generating a warning. Now the
        microseconds part is preserved.
       (<a href="http://bugs.mysql.com/19491" target="_top">Bug#19491</a>)</p></li><li><p>
        SQL statements close to the size of
        <code class="literal">max_allowed_packet</code> could produce binary log
        events larger than <code class="literal">max_allowed_packet</code> that
        could not be read by slave servers.
       (<a href="http://bugs.mysql.com/19402" target="_top">Bug#19402</a>)</p></li><li><p>
        The server could send incorrect column count information to the
        client for queries that produce a larger number of columns than
        can fit in a two-byte number.
       (<a href="http://bugs.mysql.com/19216" target="_top">Bug#19216</a>)</p></li><li><p>
        For some problems relating to character set conversion or
        incorrect string values for <code class="literal">INSERT</code> or
        <code class="literal">UPDATE</code>, the server was reporting truncation
        or length errors instead.
       (<a href="http://bugs.mysql.com/18908" target="_top">Bug#18908</a>)</p></li><li><p>
        Constant expressions and some numeric constants used as input
        parameters to user-defined functions were not treated as
        constants.
       (<a href="http://bugs.mysql.com/18761" target="_top">Bug#18761</a>)</p></li><li><p>
        Attempting to use a view containing <code class="literal">DEFINER</code>
        information for a non-existent user resulted in an error message
        that revealed the definer account. Now the definer is revealed
        only to superusers. Other users receive only an <code class="literal">access
        denied</code> message.
       (<a href="http://bugs.mysql.com/17254" target="_top">Bug#17254</a>)</p></li><li><p>
        <a href="functions.html#function_in"><code class="literal">IN()</code></a> and
        <a href="functions.html#function_char"><code class="literal">CHAR()</code></a> can return
        <code class="literal">NULL</code>, but did not signal that to the query
        processor, causing incorrect results for
        <a href="functions.html#operator_is-null"><code class="literal">IS NULL</code></a>
        operations.
       (<a href="http://bugs.mysql.com/17047" target="_top">Bug#17047</a>)</p></li><li><p>
        Warnings were generated when explicitly casting a character to a
        number (for example, <a href="functions.html#function_cast"><code class="literal">CAST('x' AS
        SIGNED)</code></a>), but not for implicit conversions in simple
        arithmetic operations (such as <code class="literal">'x' + 0</code>). Now
        warnings are generated in all cases.
       (<a href="http://bugs.mysql.com/11927" target="_top">Bug#11927</a>)</p></li><li><p>
        Metadata for columns calculated from scalar subqueries was
        limited to integer, double, or string, even if the actual type
        of the column was different.
       (<a href="http://bugs.mysql.com/11032" target="_top">Bug#11032</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-13"></a>C.1.17. Changes in  MySQL 5.1.13 (Not released)</h3></div></div></div><p class="release-level">
      This is a new Beta development release, fixing recently discovered
      bugs.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p class="release-non-production">
        This Beta release, as any other pre-production release, should
        not be installed on <span class="emphasis"><em>production</em></span> level
        systems or systems with critical data. It is good practice to
        back up your data before installing any new version of software.
        Although MySQL has worked very hard to ensure a high level of
        quality, protect your data by making a backup as you would for
        any software beta release. Please refer to our bug database at
        <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a> for more details about the
        individual bugs fixed in this version.
      </p></div><p>This section documents all changes and bug fixes that have been applied since the last official MySQL release. If you would like to receive more fine-grained and personalized <span class="emphasis"><em>update alerts</em></span> about fixes that are relevant to the version and features you use, please consider subscribing to <span class="emphasis"><em>MySQL Enterprise</em></span> (a commercial MySQL offering). For more details please see <a href="http://www.mysql.com/products/enterprise" target="_top">http://www.mysql.com/products/enterprise</a>.</p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The number of function names affected by
        <code class="literal">IGNORE_SPACE</code> was reduced significantly in
        MySQL 5.1.13, from about 200 to about 30. (For details about
        <code class="literal">IGNORE_SPACE</code>, see
        <a href="language-structure.html#function-resolution" title="8.2.4. Function Name Parsing and Resolution">Section 8.2.4, “Function Name Parsing and Resolution”</a>.) This change
        improves the consistency of parser operation. However, it also
        introduces the possibility of incompatibility for old SQL code
        that relies on the following conditions:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">IGNORE_SPACE</code> is disabled.
          </p></li><li><p>
            The presence or absence of whitespace following a function
            name is used to distinguish between a built-in function and
            stored function that have the same name (for example,
            <a href="functions.html#function_pi"><code class="literal">PI()</code></a> versus
            <code class="literal">PI ()</code>).
          </p></li></ul></div><p>
        For functions that are no longer affected by
        <code class="literal">IGNORE_SPACE</code> as of MySQL 5.1.13, that
        strategy no longer works. Either of the following approaches can
        be used if you have code that is subject to the preceding
        incompatibility:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            If a stored function has a name that conflicts with a
            built-in function, refer to the stored function with a
            schema name qualifier, regardless of whether whitespace is
            present. For example, write <code class="literal">
            <em class="replaceable"><code>schema_name</code></em>.PI()</code> or
            <code class="literal"><em class="replaceable"><code>schema_name</code></em>.PI
            ()</code>.
          </p></li><li><p>
            Alternatively, rename the stored function to use a
            non-conflicting name and change invocations of the function
            to use the new name.
          </p></li></ul></div><p>(<a href="http://bugs.mysql.com/21114" target="_top">Bug#21114</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The <code class="literal">innodb_buffer_pool_awe_mem_mb</code> system
        variable has been removed and should no longer be used.
      </p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A change in the interfaces for the
        <code class="literal">INFORMATION_SCHEMA.FILES</code> table has made the
        table accessible to storage engines other than
        <code class="literal">NDB</code>.
       (<a href="http://bugs.mysql.com/23013" target="_top">Bug#23013</a>)</p></li><li><p>
        Binary distributions of MySQL 5.1.12 were built without support
        for partitioning. This has been corrected except for NetWare.
       (<a href="http://bugs.mysql.com/23949" target="_top">Bug#23949</a>)</p></li><li><p>
        If the user specified the server options
        <code class="option">--max-connections=<em class="replaceable"><code>N</code></em> </code>
        or <code class="option">--table-open-cache=<em class="replaceable"><code>M</code></em>
        </code>, a warning would be given in some cases that some
        values were recalculated, with the result that
        <code class="option">--table-open-cache</code> could be assigned greater
        value.
      </p><p>
        In such cases, both the warning and the increase in the
        <code class="option">--table-open-cache</code> value were completely
        harmless. Note also that it is not possible for the MySQL Server
        to predict or to control limitations on the maximum number of
        open files, since this is determined by the operating system.
      </p><p>
        The value of <code class="option">--table-open-cache</code> is no longer
        increased automatically, and a warning is now given only if some
        values had to be decreased due to operating system limits.
       (<a href="http://bugs.mysql.com/21915" target="_top">Bug#21915</a>)</p></li><li><p>
        For the <code class="literal">CALL</code> statement, stored procedures
        that take no arguments now can be invoked without parentheses.
        That is, <code class="literal">CALL p()</code> and <code class="literal">CALL
        p</code> are equivalent.
       (<a href="http://bugs.mysql.com/21462" target="_top">Bug#21462</a>)</p></li><li><p>
        <code class="literal">mysql_upgrade</code> now passes all the parameters
        specified on the command line to both
        <code class="literal">mysqlcheck</code> and <code class="literal">mysql</code> using
        the <code class="filename">upgrade_defaults</code> file.
       (<a href="http://bugs.mysql.com/20100" target="_top">Bug#20100</a>)</p></li><li><p>
        <span><strong class="command">mysqldump --single-transaction</strong></span> now uses
        <code class="literal">START TRANSACTION /*!40100 WITH CONSISTENT SNAPSHOT
        */</code> rather than <code class="literal">BEGIN</code> to start a
        transaction, so that a consistent snapshot will be used on those
        servers that support it.
       (<a href="http://bugs.mysql.com/19660" target="_top">Bug#19660</a>)</p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Backup of a cluster failed if there were any tables with 128 or
        more columns.
       (<a href="http://bugs.mysql.com/23502" target="_top">Bug#23502</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Cluster backups failed when there were more than 2048 schema
        objects in the cluster.
       (<a href="http://bugs.mysql.com/23499" target="_top">Bug#23499</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Restoring a cluster failed if there were any tables with 128 or
        more columns.
       (<a href="http://bugs.mysql.com/23494" target="_top">Bug#23494</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The management client command <code class="literal">ALL DUMP 1000</code>
        would cause the cluster to crash if data nodes were connected to
        the cluster but not yret fully started.
       (<a href="http://bugs.mysql.com/23203" target="_top">Bug#23203</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code> on an
        <code class="literal">NDB</code> table could lead to deadlocks and memory
        leaks.
       (<a href="http://bugs.mysql.com/23200" target="_top">Bug#23200</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An <code class="literal">NDB</code> source file included a
        <code class="literal">memset()</code> call with reversed arguments.
       (<a href="http://bugs.mysql.com/23169" target="_top">Bug#23169</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        If a node restart could not be performed from the REDO log, no
        node takeover took place. This could cause partitions to be left
        empty during a system restart.
       (<a href="http://bugs.mysql.com/22893" target="_top">Bug#22893</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Multiple node restarts in rapid succession could cause a system
        restart to fail , or induce a race condition.
       (<a href="http://bugs.mysql.com/22892" target="_top">Bug#22892</a>, <a href="http://bugs.mysql.com/23210" target="_top">Bug#23210</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Attempting to create a unique constraint with <code class="literal">USING
        HASH</code> on an <code class="literal">NDB</code> table caused
        <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/21873" target="_top">Bug#21873</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When inserting a row into an <code class="literal">NDB</code> table with a
        duplicate value for a non-primary unique key, the error issued
        would reference the wrong key.
       (<a href="http://bugs.mysql.com/21072" target="_top">Bug#21072</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Aborting a cluster backup too soon after starting it caused a
        forced shutdown of the data nodes.
       (<a href="http://bugs.mysql.com/19148" target="_top">Bug#19148</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        In the event of an aborted multiple update, the space in the
        Disk Data log buffer to be freed as a result was actually freed
        twice, which could eventually lead to a crash.
       (<a href="http://bugs.mysql.com/23430" target="_top">Bug#23430</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        When multiple processes or threads in parallel performed the
        same ordered scan with exclusive lock and updated the retrieved
        records, the scan could skip some records, which as a result
        were not updated.
       (<a href="http://bugs.mysql.com/20446" target="_top">Bug#20446</a>)</p></li><li><p>
        There was a race condition in the <code class="literal">InnoDB</code>
        <code class="literal">fil_flush_file_spaces()</code> function.
       (<a href="http://bugs.mysql.com/24098" target="_top">Bug#24098</a>)</p></li><li><p>
        yaSSL-related memory leaks were detected by Valgrind.
       (<a href="http://bugs.mysql.com/23981" target="_top">Bug#23981</a>)</p></li><li><p>
        MySQL 5.0.26 introduced an ABI incompatibility, which this
        release reverts. Programs compiled against 5.0.26 are not
        compatible with any other version and must be recompiled.
       (<a href="http://bugs.mysql.com/23427" target="_top">Bug#23427</a>)</p></li><li><p>
        <code class="literal"><em class="replaceable"><code>M</code></em> % 0</code> returns
        <code class="literal">NULL</code>, but (<code class="literal">
        <em class="replaceable"><code>M</code></em> % 0) IS NULL</code> evaluated to
        false.
       (<a href="http://bugs.mysql.com/23411" target="_top">Bug#23411</a>)</p></li><li><p>
        For not-yet-authenticated connections, the
        <code class="literal">Time</code> column in <code class="literal">SHOW
        PROCESSLIST</code> was a random value rather than
        <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/23379" target="_top">Bug#23379</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> crashed when trying to display an
        error message about a foreign key constraint violation when the
        two tables are in different schemas.
       (<a href="http://bugs.mysql.com/23368" target="_top">Bug#23368</a>)</p></li><li><p>
        MySQL failed to build on Linux/Alpha.
       (<a href="http://bugs.mysql.com/23256" target="_top">Bug#23256</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/21250" target="_top">Bug#21250</a></p></li><li><p>
        If <a href="functions.html#function_compress"><code class="literal">COMPRESS()</code></a> returned
        <code class="literal">NULL</code>, subsequent invocations of
        <a href="functions.html#function_compress"><code class="literal">COMPRESS()</code></a> within a
        result set or within a trigger also returned
        <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/23254" target="_top">Bug#23254</a>)</p></li><li><p>
        Insufficient memory (<code class="literal">myisam_sort_buffer_size</code>)
        could cause a server crash for several operations on
        <code class="literal">MyISAM</code> tables: repair table, create index by
        sort, repair by sort, parallel repair, bulk insert.
       (<a href="http://bugs.mysql.com/23175" target="_top">Bug#23175</a>)</p></li><li><p>
        The column default value in the output from <code class="literal">SHOW
        COLUMNS</code> or <code class="literal">SELECT FROM
        INFORMATION_SCHEMA.COLUMNS</code> was truncated to 64
        characters.
       (<a href="http://bugs.mysql.com/23037" target="_top">Bug#23037</a>)</p></li><li><p>
        <span><strong class="command">mysql</strong></span> did not check for errors when fetching
        data during result set printing.
       (<a href="http://bugs.mysql.com/22913" target="_top">Bug#22913</a>)</p></li><li><p>
        The return value from <code class="literal">my_seek()</code> was ignored.
       (<a href="http://bugs.mysql.com/22828" target="_top">Bug#22828</a>)</p></li><li><p>
        Use of <code class="literal">SQL_BIG_RESULT</code> did not influence the
        sort plan for query execution.
       (<a href="http://bugs.mysql.com/22781" target="_top">Bug#22781</a>)</p></li><li><p>
        The optimizer failed to use equality propagation for
        <a href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> and
        <code class="literal">IN</code> predicates with string arguments.
       (<a href="http://bugs.mysql.com/22753" target="_top">Bug#22753</a>)</p></li><li><p>
        The <code class="literal">Handler_rollback</code> status variable
        sometimes was incremented when no rollback had taken place.
       (<a href="http://bugs.mysql.com/22728" target="_top">Bug#22728</a>)</p></li><li><p>
        The <code class="literal">Host</code> column in <code class="literal">SHOW
        PROCESSLIST</code> output was blank when the server was
        started with the <code class="option">--skip-grant-tables</code> option.
       (<a href="http://bugs.mysql.com/22723" target="_top">Bug#22723</a>)</p></li><li><p>
        If a table contains an <code class="literal">AUTO_INCREMENT</code> column,
        inserting into an insertable view on the table that does not
        include the <code class="literal">AUTO_INCREMENT</code> column should not
        change the value of
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>, because the
        side effects of inserting default values into columns not part
        of the view should not be visible. MySQL was incorrectly setting
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> to
        zero.
       (<a href="http://bugs.mysql.com/22584" target="_top">Bug#22584</a>)</p></li><li><p>
        The optimizer used the <code class="literal">ref</code> join type rather
        than <code class="literal">eq_ref</code> for a simple join on strings.
       (<a href="http://bugs.mysql.com/22367" target="_top">Bug#22367</a>)</p></li><li><p>
        Some queries that used <a href="functions.html#function_max"><code class="literal">MAX()</code></a> and
        <code class="literal">GROUP BY</code> could incorrectly return an empty
        result.
       (<a href="http://bugs.mysql.com/22342" target="_top">Bug#22342</a>)</p></li><li><p>
        If an <code class="literal">init_connect</code> SQL statement produced an
        error, the connection was silently terminated with no error
        message. Now the server writes a warning to the error log.
       (<a href="http://bugs.mysql.com/22158" target="_top">Bug#22158</a>)</p></li><li><p>
        An unhandled <code class="literal">NULL</code> pointer caused a server
        crash.
       (<a href="http://bugs.mysql.com/22138" target="_top">Bug#22138</a>)</p></li><li><p>
        Incorrect warnings occurred for use of <code class="literal">CREATE TABLE ...
        LIKE</code> or <code class="literal">REPAIR TABLE</code> with the log
        tables.
       (<a href="http://bugs.mysql.com/21966" target="_top">Bug#21966</a>)</p></li><li><p>
        The optimizer sometimes mishandled R-tree indexes for
        <code class="literal">GEOMETRY</code> data types, resulting in a server
        crash.
       (<a href="http://bugs.mysql.com/21888" target="_top">Bug#21888</a>)</p></li><li><p>
        Use of a DES-encrypted SSL certificate file caused a server
        crash.
       (<a href="http://bugs.mysql.com/21868" target="_top">Bug#21868</a>)</p></li><li><p>
        Use of <code class="literal">PREPARE</code> with a <code class="literal">CREATE
        PROCEDURE</code> statement that contained a syntax error
        caused a server crash.
       (<a href="http://bugs.mysql.com/21856" target="_top">Bug#21856</a>)</p></li><li><p>
        Adding a day, month, or year interval to a
        <code class="literal">DATE</code> value produced a
        <code class="literal">DATE</code>, but adding a week interval produced a
        <code class="literal">DATETIME</code> value. Now all produce a
        <code class="literal">DATE</code> value.
       (<a href="http://bugs.mysql.com/21811" target="_top">Bug#21811</a>)</p></li><li><p>
        Use of a subquery that invoked a function in the column list of
        the outer query resulted in a memory leak.
       (<a href="http://bugs.mysql.com/21798" target="_top">Bug#21798</a>)</p></li><li><p>
        It was not possible to do an atomic rename of the log tables
        without the possibility of losing rows. Now you can do this:
      </p><pre class="programlisting">USE mysql;
CREATE TABLE IF NOT EXISTS general_log2 LIKE general_log;
RENAME TABLE general_log TO general_log_backup, general_log2 TO general_log;
</pre><p>(<a href="http://bugs.mysql.com/21785" target="_top">Bug#21785</a>, <a href="http://bugs.mysql.com/17544" target="_top">Bug#17544</a>)</p></li><li><p>
        Within a prepared statement, <code class="literal">SELECT (COUNT(*) =
        1)</code> (or similar use of other aggregate functions) did
        not return the correct result for statement re-execution.
       (<a href="http://bugs.mysql.com/21354" target="_top">Bug#21354</a>)</p></li><li><p>
        Within a stored routine, a view definition cannot refer to
        routine parameters or local variables. However, an error did not
        occur until the routine was called. Now it occurs during parsing
        of the routine creation statement.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          A side effect of this fix is that if you have already created
          such routines, and error will occur if you execute
          <code class="literal">SHOW CREATE PROCEDURE</code> or <code class="literal">SHOW
          CREATE FUNCTION</code>. You should drop these routines
          because they are erroneous.
        </p></div><p>(<a href="http://bugs.mysql.com/20953" target="_top">Bug#20953</a>)</p></li><li><p>
        In <span><strong class="command">mysql</strong></span>, invoking <code class="literal">connect</code>
        or <code class="literal">\r</code> with very long
        <em class="replaceable"><code>db_name</code></em> or
        <em class="replaceable"><code>host_name</code></em> parameters caused buffer
        overflow.
       (<a href="http://bugs.mysql.com/20894" target="_top">Bug#20894</a>)</p></li><li><p>
        <code class="literal">WITH ROLLUP</code> could group unequal values.
       (<a href="http://bugs.mysql.com/20825" target="_top">Bug#20825</a>)</p></li><li><p>
        Range searches on columns with an index prefix could miss
        records.
       (<a href="http://bugs.mysql.com/20732" target="_top">Bug#20732</a>)</p></li><li><p>
        The server did not allocate sufficient memory for some queries
        for which a <code class="literal">DISTINCT</code> to <code class="literal">GROUP
        BY</code> conversion is possible and an <code class="literal">ORDER
        BY</code> clause is present, resulting in a server crash.
       (<a href="http://bugs.mysql.com/20503" target="_top">Bug#20503</a>)</p></li><li><p>
        <code class="literal">LIKE</code> searches failed for indexed
        <code class="literal">utf8</code> character columns.
       (<a href="http://bugs.mysql.com/20471" target="_top">Bug#20471</a>)</p></li><li><p>
        With <code class="literal">SQL_MODE=TRADITIONAL</code>, MySQL incorrectly
        aborted on warnings within stored routines and triggers.
       (<a href="http://bugs.mysql.com/20028" target="_top">Bug#20028</a>)</p></li><li><p>
        <span><strong class="command">mysqldump --xml</strong></span> produced invalid XML for
        <code class="literal">BLOB</code> data.
       (<a href="http://bugs.mysql.com/19745" target="_top">Bug#19745</a>)</p></li><li><p>
        Column names were not quoted properly for replicated views.
       (<a href="http://bugs.mysql.com/19736" target="_top">Bug#19736</a>)</p></li><li><p>
        The range analysis optimizer did not take into account
        predicates for which an index could be used after reading
        <code class="literal">const</code> tables. In some cases this resulted in
        non-optimal execution plans.
       (<a href="http://bugs.mysql.com/19579" target="_top">Bug#19579</a>)</p></li><li><p>
        <code class="literal">FLUSH INSTANCES</code> in Instance Manager triggered
        an assertion failure.
       (<a href="http://bugs.mysql.com/19368" target="_top">Bug#19368</a>)</p></li><li><p>
        For a debug server, a reference to an undefined user variable in
        a prepared statment executed with <code class="literal">EXECUTE</code>
        caused an assertion failure.
       (<a href="http://bugs.mysql.com/19356" target="_top">Bug#19356</a>)</p></li><li><p>
        Within a trigger for a base table, selecting from a view on that
        base table failed.
       (<a href="http://bugs.mysql.com/19111" target="_top">Bug#19111</a>)</p></li><li><p>
        The value of the <code class="literal">warning_count</code> system
        variable was not being calculated correctly (also affecting
        <code class="literal">SHOW COUNT(*) WARNINGS</code>).
       (<a href="http://bugs.mysql.com/19024" target="_top">Bug#19024</a>)</p></li><li><p>
        <code class="literal">DELETE IGNORE</code> could hang for foreign key
        parent deletes.
       (<a href="http://bugs.mysql.com/18819" target="_top">Bug#18819</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> used table locks (not row locks)
        within stored functions.
       (<a href="http://bugs.mysql.com/18077" target="_top">Bug#18077</a>)</p></li><li><p>
        <span><strong class="command">mysql</strong></span> would lose its connection to the server
        if its standard output was not writable.
       (<a href="http://bugs.mysql.com/17583" target="_top">Bug#17583</a>)</p></li><li><p>
        At shutdown, Instance Manager told guarded server instances to
        stop, but did not wait until they actually stopped.
       (<a href="http://bugs.mysql.com/17486" target="_top">Bug#17486</a>)</p></li><li><p>
        <span><strong class="command">mysql-test-run</strong></span> did not work correctly for
        RPM-based installations.
       (<a href="http://bugs.mysql.com/17194" target="_top">Bug#17194</a>)</p></li><li><p>
        A client library crash was caused by executing a statement such
        as <code class="literal">SELECT * FROM t1 PROCEDURE ANALYSE()</code> using
        a server side cursor on a table <code class="literal">t1</code> that does
        not have the same number of columns as the output from
        <code class="literal">PROCEDURE ANALYSE()</code>.
       (<a href="http://bugs.mysql.com/17039" target="_top">Bug#17039</a>)</p></li><li><p>
        The <code class="literal">WITH CHECK OPTION</code> for a view failed to
        prevent storing invalid column values for
        <code class="literal">UPDATE</code> statements.
       (<a href="http://bugs.mysql.com/16813" target="_top">Bug#16813</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> showed substandard performance with
        multiple queries running concurrently.
       (<a href="http://bugs.mysql.com/15815" target="_top">Bug#15815</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE</code> was not able to rename a view.
       (<a href="http://bugs.mysql.com/14959" target="_top">Bug#14959</a>)</p></li><li><p>
        Statements such as <code class="literal">DROP PROCEDURE</code> and
        <code class="literal">DROP VIEW</code> were written to the binary log too
        late due to a race condition.
       (<a href="http://bugs.mysql.com/14262" target="_top">Bug#14262</a>)</p></li><li><p>
        A literal string in a <code class="literal">GROUP BY</code> clause could
        be interpreted as a column name.
       (<a href="http://bugs.mysql.com/14019" target="_top">Bug#14019</a>)</p></li><li><p>
        Entries in the slow query log could have an incorrect
        <code class="literal">Rows_examined</code> value.
       (<a href="http://bugs.mysql.com/12240" target="_top">Bug#12240</a>)</p></li><li><p>
        Lack of validation for input and output <code class="literal">TIME</code>
        values resulted in several problems:
        <a href="functions.html#function_sec-to-time"><code class="literal">SEC_TO_TIME()</code></a> in some
        cases did not clip large values to the <code class="literal">TIME</code>
        range appropriately;
        <a href="functions.html#function_sec-to-time"><code class="literal">SEC_TO_TIME()</code></a> treated
        <code class="literal">BIGINT UNSIGNED</code> values as signed; only
        truncation warnings were produced when both truncation and
        out-of-range <code class="literal">TIME</code> values occurred.
       (<a href="http://bugs.mysql.com/11655" target="_top">Bug#11655</a>, <a href="http://bugs.mysql.com/20927" target="_top">Bug#20927</a>)</p></li><li><p>
        Several string functions could return incorrect results when
        given very large length arguments.
       (<a href="http://bugs.mysql.com/10963" target="_top">Bug#10963</a>)</p></li><li><p>
        <a href="functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME()</code></a> did not accept
        arguments up to <a href="functions.html#function_power"><code class="literal">POWER(2,31)-1</code></a>,
        which it had previously.
       (<a href="http://bugs.mysql.com/9191" target="_top">Bug#9191</a>)</p></li><li><p>
        <code class="literal">OPTIMIZE TABLE</code> with
        <code class="literal">myisam_repair_threads</code> &gt; 1 could result in
        <code class="literal">MyISAM</code> table corruption.
       (<a href="http://bugs.mysql.com/8283" target="_top">Bug#8283</a>)</p></li><li><p>
        Transient errors in replication from master to slave may trigger
        multiple <code class="literal">Got fatal error 1236: 'binlog truncated in the
        middle of event'</code> errors on the slave.
       (<a href="http://bugs.mysql.com/4053" target="_top">Bug#4053</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-12"></a>C.1.18. Changes in  MySQL 5.1.12 (24 October 2006)</h3></div></div></div><p class="release-level">
      This is a new Beta development release, fixing recently discovered
      bugs.
    </p><p>This section documents all changes and bug fixes that have been applied since the last official MySQL release. If you would like to receive more fine-grained and personalized <span class="emphasis"><em>update alerts</em></span> about fixes that are relevant to the version and features you use, please consider subscribing to <span class="emphasis"><em>MySQL Enterprise</em></span> (a commercial MySQL offering). For more details please see <a href="http://www.mysql.com/products/enterprise" target="_top">http://www.mysql.com/products/enterprise</a>.</p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        MySQL Cluster node and system restarts formerly required that
        all fragments use the same local checkpoint (LCP); beginning
        with this version, it is now possible for different fragments to
        use different LCPs during restarts. This means that data node
        filesystems must be rebuilt as part of any upgrade to this
        version by restarting all data nodes with the
        <code class="option">--initial</code> option.
      </p><p>
        See
        <a href="mysql-cluster.html#mysql-cluster-upgrade-downgrade-compatibility" title="20.5.2. MySQL Cluster 5.1 and MySQL Cluster NDB 6.x Upgrade and Downgrade
      Compatibility">Section 20.5.2, “MySQL Cluster 5.1 and MySQL Cluster NDB 6.x Upgrade and Downgrade
      Compatibility”</a>,
        and related sections of the Manual before upgrading a MySQL
        Cluster to version 5.1.12 or later.
       (<a href="http://bugs.mysql.com/21478" target="_top">Bug#21478</a>, <a href="http://bugs.mysql.com/21271" target="_top">Bug#21271</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        In the <code class="literal">INFORMATION_SCHEMA.EVENTS</code> table, the
        <code class="literal">EVENT_DEFINITION</code> column now contains the SQL
        executed by a scheduled event.
      </p><p>
        The <code class="literal">EVENT_BODY</code> column now contains the
        language used for the statement or statements shown in
        <code class="literal">EVENT_DEFINITION</code>. In MySQL 5.1, the value
        shown in <code class="literal">EVENT_BODY</code> is always
        <code class="literal">SQL</code>.
      </p><p>
        These changes were made to bring this table into line with the
        <code class="literal">INFORMATION_SCHEMA.ROUTINES</code> table, and that
        table's <code class="literal">ROUTINE_BODY</code> and
        <code class="literal">ROUTINE_DEFINITION</code> columns.
       (<a href="http://bugs.mysql.com/16992" target="_top">Bug#16992</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Support for the BerkeleyDB (<code class="literal">BDB</code>) engine has
        been dropped from this release. Any existing tables that are in
        BDB format will not be readable from within MySQL from 5.1.12 or
        newer. You should convert your tables to another storage engine
        <span class="emphasis"><em>before</em></span> upgrading to 5.1.12.
      </p><p>
        Because of this change, the <code class="literal">SHOW [BDB] LOGS</code>
        statement has been dropped.
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        A number of MySQL constructs are now prohibited in partitioning
        expressions, beginning with this release. These include the
        following:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            A number of MySQL functions. For a complete list of these,
            see <a href="partitioning.html#partitioning-limitations-functions" title="21.5.3. Partitioning Limitations Relating to Functions">Section 21.5.3, “Partitioning Limitations Relating to Functions”</a>.
          </p></li><li><p>
            The bit operators
            <a href="functions.html#operator_bitwise-or"><code class="literal">|</code></a>,
            <a href="functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a>,
            <a href="functions.html#operator_bitwise-xor"><code class="literal">^</code></a>,
            <a href="functions.html#operator_left-shift"><code class="literal">&lt;&lt;</code></a>,
            <a href="functions.html#operator_right-shift"><code class="literal">&gt;&gt;</code></a>,
            and
            <a href="functions.html#operator_bitwise-invert"><code class="literal">~</code></a>.
          </p></li><li><p>
            Nested function calls.
          </p></li><li><p>
            Calls to stored routines, UDFs, or plugins.
          </p></li><li><p>
            Character-to-integer conversions involving non-8-bit
            character sets or any of the
            <code class="literal">latin1_german2_ci</code>,
            <code class="literal">latin2_czech_cs</code>, or
            <code class="literal">cp1250_czech_cs</code> collations.
          </p></li></ul></div><p>
        These restrictions were added in part as a result of <a href="http://bugs.mysql.com/18198" target="_top">Bug#18198</a>
        and related bug reports.
      </p><p>
        For more information about these and other restrictions on
        partitioned tables in MySQL, see
        <a href="partitioning.html#partitioning-limitations" title="21.5. Restrictions and Limitations on Partitioning">Section 21.5, “Restrictions and Limitations on Partitioning”</a>.
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The permitted values for and behaviour of the
        <code class="literal">event_scheduler</code> system variable have changed.
        Permitted values are now <code class="literal">ON</code>,
        <code class="literal">OFF</code>, and <code class="literal">DISABLED</code>, with
        <code class="literal">OFF</code> being the default. It is not possible to
        change its value to or from <code class="literal">DISABLED</code> while
        the server is running.
      </p><p>
        For details, see <a href="events.html#events-overview" title="25.1. Event Scheduler Overview">Section 25.1, “Event Scheduler Overview”</a>.
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The plugin interface has changed: The
        <code class="literal">st_mysql_plugin</code> structure has a new
        <code class="literal">license</code> member to indicate the license type.
        (The allowable values are defined in
        <code class="filename">mysql/plugin.h</code>.) This change is not
        backward compatible, so the API version
        (<code class="literal">MYSQL_PLUGIN_INTERFACE_VERSION</code>) has changed.
        For additional information, see
        <a href="extending-mysql.html#plugin-writing" title="31.2.3. Writing Plugins">Section 31.2.3, “Writing Plugins”</a>.
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The full-text parser plugin interface has changed in two ways:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The <code class="literal">MYSQL_FTPARSER_PARAM</code> structure has a
            new <code class="literal">flags</code> member. This is zero if there
            are no special flags, or
            <code class="literal">MYSQL_FTFLAGS_NEED_COPY</code>, which means that
            <code class="literal">mysql_add_word()</code> must save a copy of
            the word (that is, it cannot use a pointer to the word
            because the word is in a buffer that will be overwritten.)
          </p><p>
            This flag might be set or reset by MySQL before calling the
            parser plugin, by the parser plugin itself, or by the
            <code class="literal">mysql_parse()</code> function.
          </p></li><li><p>
            The <code class="literal">mysql_parse()</code> and
            <code class="literal">mysql_add_word()</code> functions now take a
            <code class="literal">MYSQL_FTPARSER_PARAM</code> as their first
            argument, not a
            <code class="literal">MYSQL_FTPARSER_PARAM::mysql_ftparam</code> as
            before.
          </p></li></ul></div><p>
        These changes are not backward compatible, so the API version
        (<code class="literal">MYSQL_FTPARSER_INTERFACE_VERSION</code>) has
        changed. For additional information, see
        <a href="extending-mysql.html#plugin-writing" title="31.2.3. Writing Plugins">Section 31.2.3, “Writing Plugins”</a>.
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Storage engines can be pluggable at runtime, so the distinction
        between disabled and invalid storage engines no longer applies.
        This affects the <code class="literal">NO_ENGINE_SUBSTITUTION</code> SQL
        mode, as described in <a href="server-administration.html#server-sql-mode" title="5.1.7. SQL Modes">Section 5.1.7, “SQL Modes”</a>.
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The namespace for scheduled events has changed, such that events
        are no longer unique to individual users. This also means that a
        user with the <code class="literal">EVENT</code> privilege on a given
        database can now view, alter, or drop any events defined on that
        database.
      </p><p>
        If you used scheduled events in an earlier MySQL 5.1 release,
        you should rename any of them having the same name and defined
        on the same database but belonging to different users — so
        that all events in a given database have unique names —
        <span class="emphasis"><em>before</em></span> upgrading to 5.1.12 (or newer).
      </p><p>
        For additional information, see
        <a href="events.html#events-privileges" title="25.5. The Event Scheduler and MySQL Privileges">Section 25.5, “The Event Scheduler and MySQL Privileges”</a>.
      </p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        It is no longer possible to create Cluster tables using any
        partitioning type other than [<code class="literal">LINEAR</code>]
        <code class="literal">KEY</code>. Attempting to do so now raises an error.
      </p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">LOAD DATA INFILE</code> no longer causes an implicit
        commit for all storage engines. It now causes an implicit commit
        only for tables using the <code class="literal">NDB</code> storage engine.
       (<a href="http://bugs.mysql.com/11151" target="_top">Bug#11151</a>)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        The status variables <code class="literal">Ndb_connected_host</code> and
        <code class="literal">Ndb_connected_port</code> were renamed to
        <code class="literal">Ndb_config_from_host</code> and
        <code class="literal">Ndb_config_from_port</code>, respectively.
      </p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        The default value for the <code class="option">--binlog-format</code>
        server option is now <code class="literal">MIXED</code>.
      </p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <span><strong class="command">ndb_config</strong></span> utility now accepts
        <code class="option">-c</code> as a short form of the
        <code class="option">--ndb-connectstring</code> option.
       (<a href="http://bugs.mysql.com/22295" target="_top">Bug#22295</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Added the --bind-address option for <span><strong class="command">ndbd</strong></span>.
        This allows a data node process to be bound to a specific
        network interface.
       (<a href="http://bugs.mysql.com/22195" target="_top">Bug#22195</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="literal">Ndb_number_of_storage_nodes</code> system
        variable was renamed to
        <code class="literal">Ndb_number_of_data_nodes</code>.
       (<a href="http://bugs.mysql.com/20848" target="_top">Bug#20848</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="literal">HELP</code> command in the Cluster management
        client now provides command-specific help. For example,
        <code class="literal">HELP RESTART</code> in <span><strong class="command">ndb_mgm</strong></span>
        provides detailed information about the
        <code class="literal">RESTART</code> command.
       (<a href="http://bugs.mysql.com/19620" target="_top">Bug#19620</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A number of erroneous, misleading, or missing error messages
        have been corrected.
       (<a href="http://bugs.mysql.com/17297" target="_top">Bug#17297</a>, <a href="http://bugs.mysql.com/19543" target="_top">Bug#19543</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Backup messages are no longer printed to the cluster log.
      </p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Added the <code class="option">--ndb-use-copying-alter-table</code> option
        to <span><strong class="command">mysqld</strong></span> to provide a fallback in case of
        problems with online <code class="literal">ALTER TABLE</code> operations
        on <code class="literal">NDB</code> tables.
      </p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        Two new NDB API methods — <code class="literal">aggregate()</code>
        and <code class="literal">validate()</code> — were added to the
        <code class="literal">NdbDictionary::Object::Table</code> class. See
        <a href="http://dev.mysql.com/doc/ndbapi/en/class-table-aggregate.html" target="_top"><code class="literal">Table::aggregate()</code></a>, and
        <a href="http://dev.mysql.com/doc/ndbapi/en/class-table-validate.html" target="_top"><code class="literal">Table::validate()</code></a>, for more
        information. This was done to rectify the following issues:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              Under some conditions, the data distribution could become
              unbalanced in a MySQL Cluster with 2 or more node groups
              following the creation of a new table.
            </p></li><li><p>
              Data was stored unevenly between partitions due to all
              <code class="literal">BLOB</code> data being placed in partition 0.
            </p></li></ul></div><p>
       (<a href="http://bugs.mysql.com/21690" target="_top">Bug#21690</a>)</p></li><li><p>
        The number of <code class="literal">InnoDB</code> threads is no longer
        limited to 1,000 on Windows.
       (<a href="http://bugs.mysql.com/22268" target="_top">Bug#22268</a>)</p></li><li><p>
        The <code class="literal">STATE</code> column of the
        <code class="literal">INFORMATION_SCHEMA.PROCESSLIST</code> table was
        increased from 30 to 64 characters to accommodate longer state
        values.
       (<a href="http://bugs.mysql.com/21652" target="_top">Bug#21652</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> now has a
        <code class="option">--flush-privileges</code> option. It causes
        <span><strong class="command">mysqldump</strong></span> to emit a <code class="literal">FLUSH
        PRIVILEGES</code> statement after dumping the
        <code class="literal">mysql</code> database. This option should be used
        any time the dump contains the <code class="literal">mysql</code> database
        and any other database that depends on the data in the
        <code class="literal">mysql</code> database for proper restoration.
       (<a href="http://bugs.mysql.com/21424" target="_top">Bug#21424</a>)</p></li><li><p>
        <span><strong class="command">mysqlslap</strong></span> threads now try to connect up to 10
        times if the initial connect attempt fails.
       (<a href="http://bugs.mysql.com/21297" target="_top">Bug#21297</a>)</p></li><li><p>
        The output generated by the server when using the
        <code class="option">--xml</code> option has changed with regard to null
        values. It now matches the output from <span><strong class="command">mysqldump
        <code class="option">--xml</code> </strong></span>. That is, a column containing
        a <code class="literal">NULL</code> value is now reported as
      </p><pre class="programlisting">&lt;field name="<em class="replaceable"><code>column_name</code></em>" xsi:nil="true" /&gt;
</pre><p>
        whereas a column containing the string value
        <code class="literal">'NULL'</code> is reported as
      </p><pre class="programlisting">&lt;field name="<em class="replaceable"><code>column_name</code></em>"&gt;NULL&lt;/field&gt;
</pre><p>
        and a column containing an empty string is reported as
      </p><pre class="programlisting">&lt;field name="<em class="replaceable"><code>column_name</code></em>"&gt;&gt;/field&gt;
</pre><p>(<a href="http://bugs.mysql.com/21263" target="_top">Bug#21263</a>)</p></li><li><p>
        The <span><strong class="command">mysqld</strong></span> and
        <span><strong class="command">mysqlmanager</strong></span> manpages have been reclassified
        from volume 1 to volume 8.
       (<a href="http://bugs.mysql.com/21220" target="_top">Bug#21220</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> now honors <code class="literal">IGNORE
        INDEX</code>. Perviously using <code class="literal">IGNORE
        INDEX</code> in cases where an index sort would be slower
        than a filesort had no effect when used with
        <code class="literal">InnoDB</code> tables.
       (<a href="http://bugs.mysql.com/21174" target="_top">Bug#21174</a>)</p></li><li><p>
        <code class="literal">TIMESTAMP</code> columns that are <code class="literal">NOT
        NULL</code> now are reported that way by <code class="literal">SHOW
        COLUMNS</code> and <code class="literal">INFORMATION_SCHEMA</code>.
       (<a href="http://bugs.mysql.com/20910" target="_top">Bug#20910</a>)</p></li><li><p>
        Memory consumption of the <code class="literal">InnoDB</code> data
        dictionary cache was roughly halved by cleaning up the data
        structures.
       (<a href="http://bugs.mysql.com/20877" target="_top">Bug#20877</a>)</p></li><li><p>
        The <code class="literal">BINARY</code> keyword now is forbidden as a data
        type attribute in stored routines (for example, <code class="literal">DECLARE
        v1 VARCHAR(25) BINARY</code>), because
        <code class="literal">DECLARE</code> does not support collations, and in
        this context <code class="literal">BINARY</code> specifies the binary
        collation of the variable's character set.
       (<a href="http://bugs.mysql.com/20701" target="_top">Bug#20701</a>)</p></li><li><p>
        The following statements now can be executed as prepared
        statements (using <code class="literal">PREPARE</code> plus
        <code class="literal">EXECUTE</code>):
      </p><pre class="programlisting">CACHE INDEX
CHANGE MASTER
CHECKSUM {TABLE | TABLES}
{CREATE | RENAME | DROP} DATABASE
{CREATE | RENAME | DROP} USER
FLUSH {TABLE | TABLES | TABLES WITH READ LOCK | HOSTS | PRIVILEGES
  | LOGS | STATUS | MASTER | SLAVE | DES_KEY_FILE | USER_RESOURCES}
GRANT
REVOKE
KILL
LOAD INDEX INTO CACHE
RESET {MASTER | SLAVE | QUERY CACHE}
SHOW BINLOG EVENTS
SHOW CREATE {PROCEDURE | FUNCTION | EVENT | TABLE | VIEW}
SHOW {AUTHORS | CONTRIBUTORS | WARNINGS | ERRORS}
SHOW {MASTER | BINARY} LOGS
SHOW {MASTER | SLAVE} STATUS
SLAVE {START | STOP}
INSTALL PLUGIN
UNINSTALL PLUGIN
</pre><p>(<a href="http://bugs.mysql.com/20665" target="_top">Bug#20665</a>)</p></li><li><p>
        In the <code class="literal">INFORMATION_SCHEMA.ROUTINES</code> table the
        <code class="literal">ROUTINE_DEFINITION</code> column now is defined as
        <code class="literal">NULL</code> rather than <code class="literal">NOT NULL</code>.
        Also, <code class="literal">NULL</code> rather than the empty string is
        returned as the column value if the user does not have
        sufficient privileges to see the routine definition.
       (<a href="http://bugs.mysql.com/20230" target="_top">Bug#20230</a>)</p></li><li><p>
        The <span><strong class="command">mysqldumpslow</strong></span> script has been moved from
        client RPM packages to server RPM packages. This corrects a
        problem where <span><strong class="command">mysqldumpslow</strong></span> could not be used
        with a client-only RPM install, because it depends on
        <span><strong class="command">my_print_defaults</strong></span> which is in the server RPM.
       (<a href="http://bugs.mysql.com/20216" target="_top">Bug#20216</a>)</p></li><li><p>
        The MySQL distribution now compiles on UnixWare 7.13.
       (<a href="http://bugs.mysql.com/20190" target="_top">Bug#20190</a>)</p></li><li><p>
        <span><strong class="command">configure</strong></span> now defines the symbol
        <code class="literal">DBUG_ON</code> in <code class="filename">config.h</code> to
        indicate whether the source tree is configured to be compiled
        with debugging support.
       (<a href="http://bugs.mysql.com/19517" target="_top">Bug#19517</a>)</p></li><li><p>
        <code class="literal">TEXT</code> and <code class="literal">BLOB</code> columns do
        not support <code class="literal">DEFAULT</code> values. However, when a
        default of <code class="literal">''</code> was specified, the
        specification was silently ignored. This now results in a
        warning, or an error in strict mode.
       (<a href="http://bugs.mysql.com/19498" target="_top">Bug#19498</a>)</p></li><li><p>
        For <span><strong class="command">mysqlshow</strong></span>, if a database name argument
        contains wildcard characters (such as “<span class="quote">
        <code class="literal">_</code> </span>”) but matches a single database
        name exactly, treat the name as a literal name. This allows a
        command such as <span><strong class="command">mysqlshow information_schema</strong></span>
        work without having to escape the wildcard character.
       (<a href="http://bugs.mysql.com/19147" target="_top">Bug#19147</a>)</p></li><li><p>
        The source distribution has been updated so that the UDF example
        can be compiled under Windows with CMake. See
        <a href="extending-mysql.html#udf-compiling" title="31.3.2.5. Compiling and Installing User-Defined Functions">Section 31.3.2.5, “Compiling and Installing User-Defined Functions”</a>.
       (<a href="http://bugs.mysql.com/19121" target="_top">Bug#19121</a>)</p></li><li><p>
        The default value of the <code class="literal">tmp_table_size</code>
        system variable was lowered from 32MB to 16MB because it is
        bounded by the value of <code class="literal">max_heap_table_size</code>,
        which has a default of 16MB.
       (<a href="http://bugs.mysql.com/18875" target="_top">Bug#18875</a>)</p></li><li><p>
        Log table changes: By default, the log tables use the
        <code class="literal">CSV</code> storage engine, as before. But now the
        log tables can be altered to use the <code class="literal">MyISAM</code>
        storage engine. You cannot use <code class="literal">ALTER TABLE</code> to
        alter a log table that is in use. The log must be disabled
        first. No engines other than <code class="literal">CSV</code> or
        <code class="literal">MyISAM</code> are legal for the log tables. The use
        of <code class="literal">DROP TABLE</code> for log tables is similarly
        restricted: It cannot be used to drop a log table that is in
        use. The log must be disabled first. (These changes also correct
        a deadlock that occurred for an attempt to drop an in-use log
        table.)
       (<a href="http://bugs.mysql.com/18559" target="_top">Bug#18559</a>)</p></li><li><p>
        Added the <code class="option">--set-charset</code> option to
        <span><strong class="command">mysqlbinlog</strong></span> to allow the character set to be
        specified for processing binary log files.
       (<a href="http://bugs.mysql.com/18351" target="_top">Bug#18351</a>)</p></li><li><p>
        The <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> function now
        produces an error when passed an XML fragment that is not
        well-formed.
      </p><p>
        (Previously, the function allowed invalid XML fragments to be
        used.)
       (<a href="http://bugs.mysql.com/18201" target="_top">Bug#18201</a>)</p></li><li><p>
        On Windows, typing Control-C while a query was running caused
        the <span><strong class="command">mysql</strong></span> client to crash. Now it causes
        <span><strong class="command">mysql</strong></span> to attempt to kill the current
        statement. If this cannot be done, or Control-C is typed again
        before the statement is killed, <span><strong class="command">mysql</strong></span> exits.
        (In other words, <span><strong class="command">mysql</strong></span>'s behavior with
        regard to Control-C is now the same as it is on Unix platforms.)
       (<a href="http://bugs.mysql.com/17926" target="_top">Bug#17926</a>)</p><p>See also <a href="http://bugs.mysql.com/1989" target="_top">Bug#1989</a></p></li><li><p>
        The bundled yaSSL library licensing has added a FLOSS exception
        similar to MySQL to resolve licensing incompatibilities with
        MySQL. (See the
        <code class="filename">extra/yassl/FLOSS-EXCEPTIONS</code> file in a
        MySQL source distribution for details.)
       (<a href="http://bugs.mysql.com/16755" target="_top">Bug#16755</a>)</p></li><li><p>
        <code class="literal">SHOW CREATE TABLE</code> now shows constraints for
        <code class="literal">InnoDB</code> tables.
       (<a href="http://bugs.mysql.com/16614" target="_top">Bug#16614</a>)</p></li><li><p>
        <code class="literal">EXPLAIN EXTENDED</code> now shows a
        <code class="literal">filtered</code> column that is an estimated
        percentage of the examined rows that will be joined with the
        previous tables. This was added while dealing with a problem of
        MySQL choosing the wrong index for some queries.
       (<a href="http://bugs.mysql.com/14940" target="_top">Bug#14940</a>)</p></li><li><p>
        The <span><strong class="command">mysql</strong></span> client now allows
        <code class="literal">\l</code> in the <code class="literal">prompt</code> command
        argument to insert the current delimiter into the prompt.
       (<a href="http://bugs.mysql.com/14448" target="_top">Bug#14448</a>)</p></li><li><p>
        The <span><strong class="command">mysql</strong></span> client used the default character
        set if it automatically reconnected to the server, which is
        incorrect if the character set had been changed. To enable the
        character set to remain synchronized on the client and server,
        the <span><strong class="command">mysql</strong></span> command <code class="literal">charset</code>
        (or <code class="literal">\C</code>) that changes the default character
        set and now also issues a <code class="literal">SET NAMES</code>
        statement. The changed character set is used for reconnects.
       (<a href="http://bugs.mysql.com/11972" target="_top">Bug#11972</a>)</p></li><li><p>
        The <a href="functions.html#function_left"><code class="literal">LEFT()</code></a> and
        <a href="functions.html#function_right"><code class="literal">RIGHT()</code></a> functions
        return <code class="literal">NULL</code> if any argument is
        <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/11728" target="_top">Bug#11728</a>)</p></li><li><p>
        If a <code class="literal">DROP VIEW</code> statement named multiple
        views, it stopped with an error if a non-existent view was named
        and did not drop the remaining views. Now it continues on and
        reports an error at the end, similar to <code class="literal">DROP
        TABLE</code>.
       (<a href="http://bugs.mysql.com/11551" target="_top">Bug#11551</a>)</p></li><li><p>
        For a successful dump, <span><strong class="command">mysqldump</strong></span> now writes a
        SQL comment to the end of the dump file in the following format:
      </p><pre class="programlisting">-- Dump completed on YYYY-MM-DD hh:mm:ss
</pre><p>(<a href="http://bugs.mysql.com/10877" target="_top">Bug#10877</a>)</p></li><li><p>
        There were several issues regarding how <code class="literal">SHOW
        STATUS</code> affected some status variables and logging
        which could impact monitoring the MySQL Server. The behavior of
        this statement has been modified in two ways:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">SHOW STATUS</code> is no longer logged to the
            slow query log.
          </p></li><li><p>
            <code class="literal">SHOW STATUS</code> no longer updates any session
            status variables, except for
            <code class="literal">com_show_status</code>.
          </p></li></ul></div><p>
        However, <code class="literal">SHOW STATUS</code> continues to update
        <span class="emphasis"><em>global</em></span> status variables to allow monitoring
        of what the server is actually doing. This is because
        <code class="literal">SHOW STATUS</code> creates temporary tables that may
        affect performance if it is called excessively often.
       (<a href="http://bugs.mysql.com/10210" target="_top">Bug#10210</a>)</p><p>See also <a href="http://bugs.mysql.com/19764" target="_top">Bug#19764</a></p></li><li><p>
        For spatial data types, the server formerly returned these as
        <code class="literal">VARSTRING</code> values with a binary collation. Now
        the server returns spatial values as <code class="literal">BLOB</code>
        values.
       (<a href="http://bugs.mysql.com/10166" target="_top">Bug#10166</a>)</p></li><li><p>
        The <code class="literal">LOAD DATA FROM MASTER</code> and <code class="literal">LOAD
        TABLE FROM MASTER</code> statements are deprecated. See
        <a href="sql-syntax.html#load-data-from-master" title="12.6.2.2. LOAD DATA FROM MASTER Syntax">Section 12.6.2.2, “<code class="literal">LOAD DATA FROM MASTER</code> Syntax”</a>, for
        recommended alternatives.
       (<a href="http://bugs.mysql.com/9125" target="_top">Bug#9125</a>, <a href="http://bugs.mysql.com/20596" target="_top">Bug#20596</a>, <a href="http://bugs.mysql.com/14399" target="_top">Bug#14399</a>, <a href="http://bugs.mysql.com/12187" target="_top">Bug#12187</a>, <a href="http://bugs.mysql.com/15025" target="_top">Bug#15025</a>, <a href="http://bugs.mysql.com/18822" target="_top">Bug#18822</a>)</p></li><li><p>
        For the <span><strong class="command">mysql</strong></span> client, typing Control-C causes
        <span><strong class="command">mysql</strong></span> to attempt to kill the current
        statement. If this cannot be done, or Control-C is typed again
        before the statement is killed, <span><strong class="command">mysql</strong></span> exits.
        Previously, Control-C caused <span><strong class="command">mysql</strong></span> to exit in
        all cases.
       (<a href="http://bugs.mysql.com/1989" target="_top">Bug#1989</a>)</p></li><li><p>
        It is no longer possible to create partitioned tables using the
        <code class="literal">CSV</code> storage engine.
      </p></li><li><p>
        Binary MySQL distributions no longer include a
        <span><strong class="command">mysqld-max</strong></span> server. Instead, distributions
        contain a binary that includes the features previously included
        in the <span><strong class="command">mysqld-max</strong></span> binary.
      </p></li><li><p>
        <code class="literal">SHOW STATUS</code> is no longer logged to the slow
        query log.
      </p></li><li><p>
        Program Database files (extension <code class="filename">pdf</code>) are
        now included by default in Windows distributions. These can be
        used to help diagnose problems with <span><strong class="command">mysqld</strong></span>
        and other tools. See <a href="extending-mysql.html#debugging-server" title="31.5.1. Debugging a MySQL Server">Section 31.5.1, “Debugging a MySQL Server”</a>.
      </p></li><li><p>
        <code class="literal">INFORMATION_SCHEMA</code> contains new tables,
        <code class="literal">GLOBAL_STATUS</code>,
        <code class="literal">SESSION_STATUS</code>,
        <code class="literal">GLOBAL_VARIABLES</code>, and
        <code class="literal">SESSION_VARIABLES</code>, that correspond to the
        output from the <code class="literal">SHOW {GLOBAL|SESSION} STATUS</code>
        and <code class="literal">SHOW {GLOBAL|SESSION} VARIABLES</code>
        statements.
      </p></li><li><p>
        <code class="literal">SHOW STATUS</code> no longer updates any session
        status variables, except for <code class="literal">com_show_status</code>.
      </p></li><li><p>
        A new system variable, <code class="literal">lc_time_names</code>,
        specifies the locale that controls the language used to display
        day and month names and abbreviations. This variable affects the
        output from the <a href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a>,
        <a href="functions.html#function_dayname"><code class="literal">DAYNAME()</code></a> and
        <a href="functions.html#function_monthname"><code class="literal">MONTHNAME()</code></a> functions. See
        <a href="internationalization-localization.html#locale-support" title="9.8. MySQL Server Locale Support">Section 9.8, “MySQL Server Locale Support”</a>.
      </p></li><li><p>
        Using <code class="option">--with-debug</code> to configure MySQL with
        debugging support enables you to use the
        <code class="option">--debug="d,parser_debug"</code> option when
        you start the server. This causes the Bison parser that is used
        to process SQL statements to dump a parser trace to the server's
        standard error output. Typically, this output is written to the
        error log.
      </p></li><li><p>
        The bundled yaSSL library was upgraded to version 1.3.7.
      </p></li><li><p>
        The Instance Manager <code class="option">--passwd</code> option has been
        renamed to <code class="option">--print-password-line</code>. Other options
        were added to enable management of the IM password file from the
        command line: <code class="option">--add-user</code>,
        <code class="option">--drop-user</code>, <code class="option">--edit-user</code>,
        <code class="option">--list-users</code>,
        <code class="option">--check-password-file</code>,
        <code class="option">--clean-password-file</code>,
        <code class="option">--username</code>, and <code class="option">--password</code>.
        The <code class="option">--mysql-safe-compatible</code> option was added to
        cause the Instance Manner to act similarly to
        <span><strong class="command">mysqld_safe</strong></span>.
      </p></li><li><p>
        Added the <code class="literal">SHOW CONTRIBUTORS</code> statement.
      </p></li><li><p>
        The general query log and slow query logs now can be enabled or
        disabled at runtime with the <code class="literal">general_log</code> and
        <code class="literal">slow_query_log</code> system variables, and the name
        of the log files can be changed by setting the
        <code class="literal">general_log_file</code> and
        <code class="literal">slow_query_log_file</code> system variables. See
        <a href="server-administration.html#query-log" title="5.2.3. The General Query Log">Section 5.2.3, “The General Query Log”</a>, and
        <a href="server-administration.html#slow-query-log" title="5.2.5. The Slow Query Log">Section 5.2.5, “The Slow Query Log”</a>.
      </p></li><li><p>
        The default binary log format (as used during replication) is
        now Mixed based, automatically using a combination of row-based
        and statement based log events as appropriate.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        A stored routine created by one user and then made accessible to
        a different user using <code class="literal">GRANT EXECUTE</code> could be
        executed by that user with the privileges of the routine's
        definer.
       (<a href="http://bugs.mysql.com/18630" target="_top">Bug#18630</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-4227" target="_top">CVE-2006-4227</a>)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        On Linux, and possibly other platforms using case-sensitive
        filesystems, it was possible for a user granted rights on a
        database to create or access a database whose name differed only
        from that of the first by the case of one or more letters.
       (<a href="http://bugs.mysql.com/17647" target="_top">Bug#17647</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-4226" target="_top">CVE-2006-4226</a>)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        If a user has access to <code class="literal">MyISAM</code> table
        <em class="replaceable"><code>t</code></em>, that user can create a
        <code class="literal">MERGE</code> table <em class="replaceable"><code>m</code></em> that
        accesses <em class="replaceable"><code>t</code></em>. However, if the user's
        privileges on <em class="replaceable"><code>t</code></em> are subsequently
        revoked, the user can continue to access
        <em class="replaceable"><code>t</code></em> by doing so through
        <em class="replaceable"><code>m</code></em>. If this behavior is undesirable,
        you can start the server with the new
        <code class="option">--skip-merge</code> option to disable the
        <code class="literal">MERGE</code> storage engine.
       (<a href="http://bugs.mysql.com/15195" target="_top">Bug#15195</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-4031" target="_top">CVE-2006-4031</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        For <code class="literal">utf8</code> columns, the full-text parser
        incorrectly considered several non-word punctuation and
        whitespace characters as word characters, causing some searches
        to return incorrect results.
      </p><p>
        The fix involves a change to the full-text parser, so any tables
        that have <code class="literal">FULLTEXT</code> indexes on
        <code class="literal">utf8</code> columns must be repaired with
        <code class="literal">REPAIR TABLE</code>:
      </p><pre class="programlisting">REPAIR TABLE <em class="replaceable"><code>tbl_name</code></em> QUICK;
</pre><p>(<a href="http://bugs.mysql.com/19580" target="_top">Bug#19580</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: <span class="bold"><strong>Packaging</strong></span>: 
        The <span><strong class="command">ndb_mgm</strong></span> program was included in both the
        <code class="literal">MySQL-ndb-tools</code> and
        <code class="literal">MySQL-ndb-management</code> RPM packages, resulting
        in a conflict if both were installed. Now
        <span><strong class="command">ndb_mgm</strong></span> is included only in
        <code class="literal">MySQL-ndb-tools</code>.
       (<a href="http://bugs.mysql.com/21058" target="_top">Bug#21058</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        A <code class="literal">DELETE FROM table</code> with no
        <code class="literal">WHERE</code> clause (deleting all rows) running
        concurrently with <code class="literal">INSERT</code> statements on a
        storage engine with row-level locking (such as
        <code class="literal">NDB</code>) could produce inconsistent results when
        using statement-based replication.
       (<a href="http://bugs.mysql.com/19066" target="_top">Bug#19066</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (NDB API): Inacivity timeouts for scans were not correctly
        handled.
       (<a href="http://bugs.mysql.com/23107" target="_top">Bug#23107</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Inserting into an <code class="literal">NDB</code> table failed when the
        table had no primary key but had a unique key added after table
        was created on one or more <code class="literal">NOT NULL</code> columns.
        This occurred when the unique key had been adding using either
        <code class="literal">ALTER TABLE</code> or <code class="literal">CREATE UNIQUE
        KEY</code>.
       (<a href="http://bugs.mysql.com/22838" target="_top">Bug#22838</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (NDB API): Attempting to read a nonexistent tuple using
        <code class="literal">Commit</code> mode for
        <code class="literal">NdbTransaction::execute()</code> caused node
        failures.
       (<a href="http://bugs.mysql.com/22672" target="_top">Bug#22672</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="option">--help</code> output from <code class="literal">NDB</code>
        binaries did not include file-related options.
       (<a href="http://bugs.mysql.com/21994" target="_top">Bug#21994</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Setting <code class="literal">TransactionDeadlockDetectionTimeout</code>
        to a value greater than 12000 would cause scans to deadlock,
        time out, fail to release scan records, until the cluster ran
        out of scan records and stopped processing.
       (<a href="http://bugs.mysql.com/21800" target="_top">Bug#21800</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A scan timeout returned Error 4028 (<span class="errortext">Node failure
        caused abort of transaction</span>) instead of Error 4008
        (<span class="errortext">Node failure caused abort of
        transaction...</span>).
       (<a href="http://bugs.mysql.com/21799" target="_top">Bug#21799</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The node recovery algorithm was missing a version check for
        tables in the <code class="literal">ALTER_TABLE_COMMITTED</code> state (as
        opposed to the <code class="literal">TABLE_ADD_COMMITTED</code> state,
        which has the version check). This could cause inconsistent
        schemas across nodes following node recovery.
       (<a href="http://bugs.mysql.com/21756" target="_top">Bug#21756</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A memory leak occurred when running <span><strong class="command">ndb_mgm -e
        "SHOW"</strong></span>.
       (<a href="http://bugs.mysql.com/21670" target="_top">Bug#21670</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The server provided a non-descriptive error message when
        encountering a fatally corrupted REDO log.
       (<a href="http://bugs.mysql.com/21615" target="_top">Bug#21615</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The output for the <code class="option">--help</code> option used with
        <code class="literal">NDB</code> executable programs (such as
        <span><strong class="command">ndbd</strong></span>, <span><strong class="command">ndb_mgm</strong></span>,
        <span><strong class="command">ndb_restore</strong></span>, <span><strong class="command">ndb_config</strong></span>,
        and others mentioned in
        <a href="mysql-cluster.html#mysql-cluster-utilities" title="20.10. Cluster Utility Programs">Section 20.10, “Cluster Utility Programs”</a>) referred to the
        <code class="filename">Ndb.cfg</code> file, instead of to
        <code class="filename">my.cnf</code>.
       (<a href="http://bugs.mysql.com/21585" target="_top">Bug#21585</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A partial rollback could lead to node restart failures.
       (<a href="http://bugs.mysql.com/21536" target="_top">Bug#21536</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Partition distribution keys were updated only for the primary
        and starting replicas during node recovery. This could lead to
        node failure recovery for clusters having an odd number of
        replicas.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          We recommend values for <code class="literal">NumberOfReplicas</code>
          that are even powers of 2, for best results.
        </p></div><p>(<a href="http://bugs.mysql.com/21535" target="_top">Bug#21535</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <span><strong class="command">ndb_mgm</strong></span> management client did not set the
        exit status on errors, always returning 0 instead.
       (<a href="http://bugs.mysql.com/21530" target="_top">Bug#21530</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The failure of a unique index read due to an invalid schema
        version could be handled incorrectly in some cases, leading to
        unpredictable results.
       (<a href="http://bugs.mysql.com/21384" target="_top">Bug#21384</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Attempting to create an <code class="literal">NDB</code> table on a MySQL
        server with an existing non-Cluster table with the same name in
        the same database could result in data loss or corruption. Now,
        if such a table is encountered during autodiscovery, a warning
        is written to the error log of the affected
        <span><strong class="command">mysqld</strong></span>, and the local table is overwritten.
       (<a href="http://bugs.mysql.com/21378" target="_top">Bug#21378</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Cluster logs were not rotated following the first rotation
        cycle.
       (<a href="http://bugs.mysql.com/21345" target="_top">Bug#21345</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In a cluster with more than 2 replicas, a manual restart of one
        of the data nodes could fail and cause the other nodes in the
        same node group to shut down.
       (<a href="http://bugs.mysql.com/21213" target="_top">Bug#21213</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <span><strong class="command">ndb_size.pl</strong></span> script did not account for
        <code class="literal">TEXT</code> and <code class="literal">BLOB</code> column
        values correctly.
       (<a href="http://bugs.mysql.com/21204" target="_top">Bug#21204</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Some queries involving joins on very large
        <code class="literal">NDB</code> tables could crash the MySQL server.
       (<a href="http://bugs.mysql.com/21059" target="_top">Bug#21059</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Condition pushdown did not work correctly with
        <code class="literal">DATETIME</code> columns.
       (<a href="http://bugs.mysql.com/21056" target="_top">Bug#21056</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Responses to the ALL DUMP 1000 management client command were
        printed multiple times in the cluster log for each cluster node.
       (<a href="http://bugs.mysql.com/21044" target="_top">Bug#21044</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The message <span class="errortext">Error 0 in readAutoIncrementValue(): no
        Error</span> was written to the error log whenever
        <code class="literal">SHOW TABLE STATUS</code> was performed on a Cluster
        table that did not have an <code class="literal">AUTO_INCREMENT</code>
        column.
       (<a href="http://bugs.mysql.com/21033" target="_top">Bug#21033</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Restarting a data node while DDL operations were in progress on
        the cluster could cause other data nodes to fail. This could
        also lead to <span><strong class="command">mysqld</strong></span> hanging or crashing under
        some circumstances.
       (<a href="http://bugs.mysql.com/21017" target="_top">Bug#21017</a>, <a href="http://bugs.mysql.com/21050" target="_top">Bug#21050</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In some situations with a high disk-load, writing of the redo
        log could hang, causing a crash with the error message
        <span class="errortext">GCP STOP detected</span>.
       (<a href="http://bugs.mysql.com/20904" target="_top">Bug#20904</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A race condition could in some cirumstances following a
        <code class="literal">DROP TABLE</code>.
       (<a href="http://bugs.mysql.com/20897" target="_top">Bug#20897</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Under some circumstances, local checkpointing would hang,
        keeping any unstarted nodes from being started.
       (<a href="http://bugs.mysql.com/20895" target="_top">Bug#20895</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When the redo buffer ran out of space, a <span class="errortext">Pointer too
        large</span> error was raised and the cluster could become
        unusable until restarted with <code class="option">--initial</code>.
       (<a href="http://bugs.mysql.com/20892" target="_top">Bug#20892</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A vague error message was returned when reading both schema
        files during a restart of the cluster.
       (<a href="http://bugs.mysql.com/20860" target="_top">Bug#20860</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The repeated creating and dropping of a table would eventually
        lead to <code class="literal">NDB</code> Error 826, <span class="errortext">Too many
        tables and attributes ... Insufficient space</span>.
       (<a href="http://bugs.mysql.com/20847" target="_top">Bug#20847</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When attempting to restart the cluster following a data import,
        the cluster failed during Phase 4 of the restart with
        <span class="errortext">Error 2334: Job buffer congestion</span>.
       (<a href="http://bugs.mysql.com/20774" target="_top">Bug#20774</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">REPLACE</code> statements did not work correctly on
        an <code class="literal">NDB</code> table having both a primary key and a
        unique key. In such cases, proper values were not set for
        columns which were not explicitly referenced in the statement.
       (<a href="http://bugs.mysql.com/20728" target="_top">Bug#20728</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The server did not honor the value set for
        <code class="literal">ndb_cache_check_time</code> in the
        <code class="filename">my.cnf</code> file.
       (<a href="http://bugs.mysql.com/20708" target="_top">Bug#20708</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Truncating a table on one <span><strong class="command">mysqld</strong></span> caused other
        <span><strong class="command">mysqld</strong></span> processes connected to the cluster to
        return <span class="errortext">ERROR 1412 (HY000): Table definition has
        changed, please retry transaction</span> on subsequent
        queries.
       (<a href="http://bugs.mysql.com/20705" target="_top">Bug#20705</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Using an invalid node ID with the management client
        <code class="literal">STOP</code> command could cause
        <span><strong class="command">ndb_mgm</strong></span> to hang.
       (<a href="http://bugs.mysql.com/20575" target="_top">Bug#20575</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Renaming of table columns was not supported as fast a
        <code class="literal">ALTER TABLE</code> for NDB tables.
       (<a href="http://bugs.mysql.com/20456" target="_top">Bug#20456</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">ndb_size.pl</strong></span> and
        <span><strong class="command">ndb_error_reporter</strong></span> were missing from RPM
        packages.
       (<a href="http://bugs.mysql.com/20426" target="_top">Bug#20426</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Running <span><strong class="command">ndbd</strong></span>
        <code class="option">--nowait-nodes=<em class="replaceable"><code>id</code></em> </code>
        where <em class="replaceable"><code>id</code></em> was the node ID of a node
        that was already running would fail with an invalid error
        message.
       (<a href="http://bugs.mysql.com/20419" target="_top">Bug#20419</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Data nodes added while the cluster was running in single user
        mode were all assigned node ID 0, which could later cause
        multiple node failures. Adding nodes while in single user mode
        is no longer possible.
       (<a href="http://bugs.mysql.com/20395" target="_top">Bug#20395</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <span><strong class="command">ndb_mgm</strong></span> client command <code class="literal">ALL
        CLUSTERLOG STATISTICS=15</code> had no effect.
       (<a href="http://bugs.mysql.com/20336" target="_top">Bug#20336</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Direct APIs): <code class="literal">NdbScanOperation::readTuples()</code>
        and <code class="literal">NdbIndexScanOperation::readTuples()</code>
        ignored the <em class="replaceable"><code>batch</code></em> parameter.
       (<a href="http://bugs.mysql.com/20252" target="_top">Bug#20252</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A node failure during a scan could sometime cause the node to
        crash when restarting too quickly following the failure.
       (<a href="http://bugs.mysql.com/20197" target="_top">Bug#20197</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The failure of a data node when preparing to commit a
        transaction (that is, while the node's status was
        <code class="literal">CS_PREPARE_TO_COMMIT</code>) could cause the failure
        of other cluster data nodes.
       (<a href="http://bugs.mysql.com/20185" target="_top">Bug#20185</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">SHOW ENGINE NDB STATUS</code> could sometimes return
        an incorrect value of <code class="literal">0</code> for the latest epoch,
        which could cause problems with synchronizing the binlog.
       (<a href="http://bugs.mysql.com/20142" target="_top">Bug#20142</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An internal formatting error caused some management client error
        messages to be unreadable.
       (<a href="http://bugs.mysql.com/20016" target="_top">Bug#20016</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Creating tables with variable-size columns caused
        <code class="literal">DataMemory</code> to be used but not freed when the
        tables were dropped.
       (<a href="http://bugs.mysql.com/20007" target="_top">Bug#20007</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Renaming a table in such a way as to move it to a different
        database failed to move the table's indexes.
       (<a href="http://bugs.mysql.com/19967" target="_top">Bug#19967</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Running management client commands while <span><strong class="command">mgmd</strong></span>
        was in the process of disconnecting could cause the management
        server to fail.
       (<a href="http://bugs.mysql.com/19932" target="_top">Bug#19932</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Under certain conditions, a starting node could miss
        transactions, leading to inconsistencies between the primary and
        backup replicas.
       (<a href="http://bugs.mysql.com/19929" target="_top">Bug#19929</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An uncommitted row could sometimes be checkpointed and thus
        incorrectly included in a backup.
       (<a href="http://bugs.mysql.com/19928" target="_top">Bug#19928</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In some cases where <code class="literal">SELECT COUNT(*)</code> from an
        <code class="literal">NDB</code> table should have yielded an error,
        <code class="literal">MAX_INT</code> was returned instead.
       (<a href="http://bugs.mysql.com/19914" target="_top">Bug#19914</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">TEXT</code> columns in Cluster tables having both an
        explicit primary key and a unique key were not correctly updated
        by <code class="literal">REPLACE</code> statements.
       (<a href="http://bugs.mysql.com/19906" target="_top">Bug#19906</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The cluster's data nodes failed while trying to load data when
        <code class="literal">NoOfFrangmentLogFiles</code> was set equal to 1.
       (<a href="http://bugs.mysql.com/19894" target="_top">Bug#19894</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Following the restart of a management node, the Cluster
        management client did not automatically reconnect.
       (<a href="http://bugs.mysql.com/19873" target="_top">Bug#19873</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Restoring a backup with <span><strong class="command">ndb_restore</strong></span> failed
        when the backup had been taken from a cluster whose
        <code class="literal">DataMemory</code> had been completely used up.
       (<a href="http://bugs.mysql.com/19852" target="_top">Bug#19852</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Error messages given when trying to make online changes to
        parameters such as <code class="literal">NoOfReplicas</code> that can only
        be changed via a complete shutdown and restart of the cluster
        did not indicate the true nature of the problem.
       (<a href="http://bugs.mysql.com/19787" target="_top">Bug#19787</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Under some circumstances, repeated DDL operations on one
        <code class="literal">mysqld</code> could cause failure of a second
        <code class="literal">mysqld</code> attached to the same cluster.
       (<a href="http://bugs.mysql.com/19770" target="_top">Bug#19770</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">ndb_restore</strong></span> did not always make clear that it
        had recovered successfully from temporary errors while restoring
        a cluster backup.
       (<a href="http://bugs.mysql.com/19651" target="_top">Bug#19651</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Resources for unique indexes on Cluster table columns were
        incorrectly allocated, so that only one-fourth as many unique
        indexes as indicated by the value of
        <code class="literal">UniqueHashIndexes</code> could be created.
       (<a href="http://bugs.mysql.com/19623" target="_top">Bug#19623</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">LOAD DATA LOCAL</code> failed to ignore duplicate
        keys in Cluster tables.
       (<a href="http://bugs.mysql.com/19496" target="_top">Bug#19496</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        For <span><strong class="command">ndb_mgmd</strong></span>, Valgrind revealed problems with
        a memory leak and a dependency on an uninitialized variable.
       (<a href="http://bugs.mysql.com/19318" target="_top">Bug#19318</a>, <a href="http://bugs.mysql.com/20333" target="_top">Bug#20333</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A <code class="literal">DELETE</code> of many rows immediately followed by
        an <code class="literal">INSERT</code> on the same table could cause the
        <span><strong class="command">ndbd</strong></span> process on the backup replica to crash.
       (<a href="http://bugs.mysql.com/19293" target="_top">Bug#19293</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An excessive number of <code class="literal">ALTER TABLE</code> operations
        could cause the cluster to fail with <code class="literal">NDB</code>
        error code 773 (<span class="errortext">Out of string memory, please modify
        StringMemory</span>).
       (<a href="http://bugs.mysql.com/19275" target="_top">Bug#19275</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A problem with error handling when
        <code class="literal">ndb_use_exact_count</code> was enabled could lead to
        incorrect values returned from queries using
        <a href="functions.html#function_count"><code class="literal">COUNT()</code></a>. A warning is
        now returned in such cases.
       (<a href="http://bugs.mysql.com/19202" target="_top">Bug#19202</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In rare situations with resource shortages, a crash could result
        from insufficient <code class="literal">IndexScanOperations</code>.
       (<a href="http://bugs.mysql.com/19198" target="_top">Bug#19198</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Running out of <code class="literal">DataMemory</code> could sometimes
        crash <span><strong class="command">ndbd</strong></span> and <span><strong class="command">mysqld</strong></span>
        processes.
       (<a href="http://bugs.mysql.com/19185" target="_top">Bug#19185</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        It was possible to use port numbers greater than 65535 for
        <code class="literal">ServerPort</code> in the
        <code class="filename">config.ini</code> file.
       (<a href="http://bugs.mysql.com/19164" target="_top">Bug#19164</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">ndb_mgm -e show | head</strong></span> would hang after
        displaying the first 10 lines of output.
       (<a href="http://bugs.mysql.com/19047" target="_top">Bug#19047</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The error returned by the cluster when too many nodes were
        defined did not make clear the nature of the problem.
       (<a href="http://bugs.mysql.com/19045" target="_top">Bug#19045</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The management client <code class="literal">ALL STOP</code> command shut
        down <span><strong class="command">mgmd</strong></span> processes (as well as
        <span><strong class="command">ndbd</strong></span> processes).
       (<a href="http://bugs.mysql.com/18966" target="_top">Bug#18966</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">TRUNCATE TABLE</code> failed to reset the
        <code class="literal">AUTO_INCREMENT</code> counter.
       (<a href="http://bugs.mysql.com/18864" target="_top">Bug#18864</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Restarting a failed node could sometimes crash the cluster.
       (<a href="http://bugs.mysql.com/18782" target="_top">Bug#18782</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Trying to create or drop a table while a node was restarting
        caused the node to crash. This is now handled by raising an
        error.
       (<a href="http://bugs.mysql.com/18781" target="_top">Bug#18781</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Repeated <code class="literal">CREATE</code> - <code class="literal">INSERT</code> -
        <code class="literal">DROP</code> operations tables could in some
        circumstances cause the MySQL table definition cache to become
        corrupt, so that some <span><strong class="command">mysqld</strong></span> processes could
        access table information but others could not.
       (<a href="http://bugs.mysql.com/18595" target="_top">Bug#18595</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A <code class="literal">CREATE TABLE</code> statement involving foreign
        key constraints raised an error rather than being silently
        ignored (see <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>).
      </p><p>
        This bug affected Cluster in MySQL 5.1 only.
       (<a href="http://bugs.mysql.com/18483" target="_top">Bug#18483</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The server failed with a non-descriptive error message when out
        of data memory.
       (<a href="http://bugs.mysql.com/18475" target="_top">Bug#18475</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        For <code class="literal">NDB</code> and possibly
        <code class="literal">InnoDB</code> tables, a <code class="literal">BEFORE
        UPDATE</code> trigger could insert incorrect values.
       (<a href="http://bugs.mysql.com/18437" target="_top">Bug#18437</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="literal">DATA_LENGTH</code> and
        <code class="literal">AVG_ROW_LENGTH</code> columns of the
        <code class="literal">INFORMATION_SCHEMA.TABLES</code> table did not
        report the size of variable-width column values correctly.
      </p><p>
        See <a href="information-schema.html#tables-table" title="27.2. The INFORMATION_SCHEMA TABLES Table">Section 27.2, “The <code class="literal">INFORMATION_SCHEMA TABLES</code> Table”</a>, for more information.
       (<a href="http://bugs.mysql.com/18413" target="_top">Bug#18413</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">SELECT ... FOR UPDATE</code> failed to lock the
        selected rows.
       (<a href="http://bugs.mysql.com/18184" target="_top">Bug#18184</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Disk Data): Deletes from Disk Data tables used a non-optimal
        scan to find the rows to be deleted, resulting in poor
        performance. The fix causes disk order rather than memory order
        to be used, and can improve performance of Disk Data deletes by
        up to ~300% in some cases.
       (<a href="http://bugs.mysql.com/17929" target="_top">Bug#17929</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">perror</strong></span> did not properly report
        <code class="literal">NDB</code> error codes.
       (<a href="http://bugs.mysql.com/16561" target="_top">Bug#16561</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A problem with takeover during a system restart caused ordered
        indexes to be rebuilt incorrectly. This also adversely affected
        MySQL Cluster Replication.
       (<a href="http://bugs.mysql.com/15303" target="_top">Bug#15303</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A cluster data node could crash when an ordered index became
        full before the table containing the index was full.
       (<a href="http://bugs.mysql.com/14935" target="_top">Bug#14935</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The management client <code class="literal">ALL STATUS</code> command
        could sometimes report the status of some data nodes
        incorrectly.
       (<a href="http://bugs.mysql.com/13985" target="_top">Bug#13985</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        New <span><strong class="command">mysqld</strong></span> processes were allowed to connect
        without a restart of the cluster, causing the cluster to crash.
       (<a href="http://bugs.mysql.com/13266" target="_top">Bug#13266</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Cluster system status variables were not updated properly.
       (<a href="http://bugs.mysql.com/11459" target="_top">Bug#11459</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (NDBAPI): Update operations on blobs were not checked for
        illegal operations.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Read locks with blob update operations are now upgraded from
          read committed to read shared.
        </p></div></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Replication): A node failure could send duplicate events,
        causing a <span><strong class="command">mysqld</strong></span> replicating tables
        containing <code class="literal">BLOB</code>s to crash.
      </p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The loss of one or more data nodes could sometimes cause
        <span><strong class="command">ndb_mgmd</strong></span> to use a high amount of CPU (15
        percent or more, as opposed to 1 to 2 percent normally).
      </p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        Old partition and subpartition files were not always removed
        following <code class="literal">ALTER TABLE ... REORGANIZE
        PARTITION</code> statements.
       (<a href="http://bugs.mysql.com/20770" target="_top">Bug#20770</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        On some platforms, <span><strong class="command">ndbd</strong></span> compiled with
        <span><strong class="command">gcc</strong></span> 4 would crash when attempting to run
        <code class="literal">CREATE LOGFILE GROUP</code>.
       (<a href="http://bugs.mysql.com/21981" target="_top">Bug#21981</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Trying to create a Disk Data table using a nonexistent
        tablespace or to drop a nonexistent data file from a tablespace
        produced an uninformative error message.
       (<a href="http://bugs.mysql.com/21751" target="_top">Bug#21751</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Errors could occur when dropping a data file during a node local
        checkpoint.
       (<a href="http://bugs.mysql.com/21710" target="_top">Bug#21710</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Creating a tablespace and log file group, then attempting to
        restart the cluster without using the <code class="option">--initial</code>
        option and without having created any Disk Data tables could
        cause a forced shutdown of the cluster and raise a configuration
        error.
       (<a href="http://bugs.mysql.com/21172" target="_top">Bug#21172</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        <span><strong class="command">mysqldump</strong></span> did not back up tablespace or log
        file group information for Disk Data tables correctly.
      </p><p>
        Specifically, <code class="literal">UNDO_BUFFER_SIZE</code> and
        <code class="literal">INITIAL_SIZE</code> values were misreported. This
        meant that trying to restore from such a backup would produce
        error 1296: <span class="errortext">Got error 1504 'Out of logbuffer memory'
        from NDB</span>.
       (<a href="http://bugs.mysql.com/20809" target="_top">Bug#20809</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Running a large number of scans on Disk Data could cause
        subsequent scans to perform poorly.
       (<a href="http://bugs.mysql.com/20334" target="_top">Bug#20334</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        <code class="literal">INFORMATION_SCHEMA.FILES</code> records for UNDO
        files showed incorrect values in the
        <code class="literal">EXTENT_SIZE</code>, <code class="literal">FREE_EXTENTS</code>,
        and <code class="literal">TOTAL_EXTENTS</code> columns.
       (<a href="http://bugs.mysql.com/20073" target="_top">Bug#20073</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        A data file created for one tablespace could be dropped using
        <code class="literal">ALTER TABLESPACE ... DROP DATAFILE</code> using a
        different tablespace.
       (<a href="http://bugs.mysql.com/20053" target="_top">Bug#20053</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Trying to create Disk Data tables when running the cluster in
        diskless mode caused cluster data nodes to crash.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Disk Data tables are now disabled when running in diskless
          mode.
        </p></div><p>(<a href="http://bugs.mysql.com/20008" target="_top">Bug#20008</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        An issue with disk allocation could sometimes cause a forced
        shutdown of the cluster when running a mix of memory and Disk
        Data tables.
       (<a href="http://bugs.mysql.com/18780" target="_top">Bug#18780</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        The failure of a <code class="literal">CREATE TABLESPACE</code> or
        <code class="literal">CREATE LOGFILE GROUP</code> statement did not revert
        all changes made prior to the point of failure.
       (<a href="http://bugs.mysql.com/16341" target="_top">Bug#16341</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        In some cases, a large number of MySQL servers sending requests
        to the cluster simultaneously could cause the cluster to crash.
        This could also be triggered by many <code class="literal">NDB</code> API
        clients making simultaneous event subscriptions or
        unsubscriptions.
       (<a href="http://bugs.mysql.com/20683" target="_top">Bug#20683</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        One or more of the <span><strong class="command">mysqld</strong></span> processes could
        fail when subjecting a Cluster replication setup with multiple
        <span><strong class="command">mysqld</strong></span> processes on both the master and slave
        clusters to high loads.
       (<a href="http://bugs.mysql.com/19768" target="_top">Bug#19768</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Data definition and data manipulation statements on different
        tables were not serialised correctly in the binlog. For example,
        there was no guarantee that a <code class="literal">CREATE TABLE</code>
        statement and an update on a different table would occur in the
        same order in the binlog as they did on the cluster being
        replicated.
       (<a href="http://bugs.mysql.com/18947" target="_top">Bug#18947</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        The <code class="filename">storage/ndb</code> directory was missing from
        the server binary distribution, making it impossible to compile
        <code class="literal">NDB</code> API and MGM API applications. This
        directory can be found as
        <code class="filename">/usr/include/storage/ndb</code> after installing
        that distribution.
       (<a href="http://bugs.mysql.com/21955" target="_top">Bug#21955</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        Invoking the MGM API function
        <code class="literal">ndb_mgm_listen_event()</code> caused a memory leak.
       (<a href="http://bugs.mysql.com/21671" target="_top">Bug#21671</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        The inclusion of <code class="filename">my_config.h</code> in
        <code class="filename">NdbApi.h</code> required anyone wishing to write
        NDB API applications against MySQL 5.1 to have a complete copy
        of the 5.1 sources.
       (<a href="http://bugs.mysql.com/21253" target="_top">Bug#21253</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        The MGM API function <code class="literal">ndb_logevent_get_fd()</code>
        was not implemented.
       (<a href="http://bugs.mysql.com/21129" target="_top">Bug#21129</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        The <code class="literal">NdbOperation::getBlobHandle()</code> method,
        when called with the name of a nonexistent column, caused a
        segmentation fault.
       (<a href="http://bugs.mysql.com/21036" target="_top">Bug#21036</a>)</p></li><li><p>
        <code class="literal">ALTER EVENT</code> statements including only a
        <code class="literal">COMMENT</code> clause failed with a syntax error on
        two platforms: Linux for S/390, and OS X 10.4 for 64-bit PPC.
       (<a href="http://bugs.mysql.com/23423" target="_top">Bug#23423</a>)</p></li><li><p>
        When <code class="literal">event_scheduler</code> was set to
        <code class="literal">DISABLED</code>, its value was not displayed
        correctly by <code class="literal">SHOW VARIABLES</code> or
        <code class="literal">SELECT @@global.event_scheduler</code>.
       (<a href="http://bugs.mysql.com/22662" target="_top">Bug#22662</a>)</p></li><li><p>
        <code class="literal">BIT</code> columns were not replicated properly
        under row-based replication.
       (<a href="http://bugs.mysql.com/22550" target="_top">Bug#22550</a>)</p></li><li><p>
        <code class="literal">ALTER EVENT</code> in the body of a stored procedure
        led to a crash when the procedure was called. This affected only
        those <code class="literal">ALTER EVENT</code> statements which changed
        the interval of the event.
       (<a href="http://bugs.mysql.com/22397" target="_top">Bug#22397</a>)</p></li><li><p>
        The optimizer could make an incorrect index choice for indexes
        with a skewed key distribution.
       (<a href="http://bugs.mysql.com/22393" target="_top">Bug#22393</a>)</p></li><li><p>
        Deleting entries from a large <code class="literal">MyISAM</code> index
        could cause index corruption when it needed to shrink. Deletes
        from an index can happen when a record is deleted, when a key
        changes and must be moved, and when a key must be un-inserted
        because of a duplicate key. This can also happen in
        <code class="literal">REPAIR TABLE</code> when a duplicate key is found
        and in <span><strong class="command">myisamchk</strong></span> when sorting the records by
        an index.
       (<a href="http://bugs.mysql.com/22384" target="_top">Bug#22384</a>)</p></li><li><p>
        Instance Manager had a race condition involving <span><strong class="command">
        mysqld</strong></span> PID file removal.
       (<a href="http://bugs.mysql.com/22379" target="_top">Bug#22379</a>)</p></li><li><p>
        yaSSL had a conflicting definition for
        <code class="literal">socklen_t</code> on hurd-i386 systems.
       (<a href="http://bugs.mysql.com/22326" target="_top">Bug#22326</a>)</p></li><li><p>
        Conversion of values inserted into a <code class="literal">BIT</code>
        column could affect adjacent columns.
       (<a href="http://bugs.mysql.com/22271" target="_top">Bug#22271</a>)</p></li><li><p>
        Some Linux-x86_64-icc packages (of previous releases) mistakenly
        contained 32-bit binaries. Only <span><strong class="command">ICC</strong></span> builds
        are affected, not <span><strong class="command">gcc</strong></span> builds. Solaris and
        FreeBSD x86_64 builds are not affected.
       (<a href="http://bugs.mysql.com/22238" target="_top">Bug#22238</a>)</p></li><li><p>
        <code class="filename">mysql_com.h</code> unnecessarily referred to the
        <code class="literal">ulong</code> type.
       (<a href="http://bugs.mysql.com/22227" target="_top">Bug#22227</a>)</p></li><li><p>
        The source distribution would not build on Windows due to a
        spurious dependency on <code class="filename">ib_config.h</code>.
       (<a href="http://bugs.mysql.com/22224" target="_top">Bug#22224</a>)</p></li><li><p>
        Execution of a prepared statement that uses an
        <code class="literal">IN</code> subquery with aggregate functions in the
        <code class="literal">HAVING</code> clause could cause a server crash.
       (<a href="http://bugs.mysql.com/22085" target="_top">Bug#22085</a>)</p></li><li><p>
        The <code class="literal">CSV</code> storage engine failed to detect some
        table corruption.
       (<a href="http://bugs.mysql.com/22080" target="_top">Bug#22080</a>)</p></li><li><p>
        Using <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a> on the
        result of a subquery in the <code class="literal">FROM</code> clause that
        itself used <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a> could
        cause a server crash.
       (<a href="http://bugs.mysql.com/22015" target="_top">Bug#22015</a>)</p></li><li><p>
        Running <code class="literal">SHOW MASTER LOGS</code> at the same time as
        binary log files were being switched would cause
        <code class="literal">mysqld</code> to hang.
       (<a href="http://bugs.mysql.com/21965" target="_top">Bug#21965</a>)</p></li><li><p>
        <code class="literal">libmysqlclient</code> defined a symbol
        <code class="literal">BN_bin2bn</code> which belongs to OpenSSL. This
        could break applications that also linked against OpenSSL's
        <code class="literal">libcrypto</code> library. The fix required
        correcting an error in a build script that was failing to add
        rename macros for some functions.
       (<a href="http://bugs.mysql.com/21930" target="_top">Bug#21930</a>)</p></li><li><p>
        <code class="literal">character_set_results</code> can be
        <code class="literal">NULL</code> to signify “<span class="quote">no conversion,</span>”
        but some code did not check for <code class="literal">NULL</code>,
        resulting in a server crash.
       (<a href="http://bugs.mysql.com/21913" target="_top">Bug#21913</a>)</p></li><li><p>
        A misleading error message was displayed when attempting to
        define a unique key that was not valid for a partitioned table.
       (<a href="http://bugs.mysql.com/21862" target="_top">Bug#21862</a>)</p></li><li><p>
        A query that used <code class="literal">GROUP BY</code> and an
        <code class="literal">ALL</code> or <code class="literal">ANY</code> quantified
        subquery in a <code class="literal">HAVING</code> clause could trigger an
        assertion failure.
       (<a href="http://bugs.mysql.com/21853" target="_top">Bug#21853</a>)</p></li><li><p>
        An <code class="literal">InnoDB</code> mutex was not aquired and released
        under the same condition, leading to deadlock in some rare
        situations involving XA transactions.
       (<a href="http://bugs.mysql.com/21833" target="_top">Bug#21833</a>)</p></li><li><p>
        A <code class="literal">NUL</code> byte within a prepared statement string
        caused the rest of the string not to be written to the query
        log, allowing logging to be bypassed.
       (<a href="http://bugs.mysql.com/21813" target="_top">Bug#21813</a>)</p></li><li><p>
        <a href="functions.html#function_count"><code class="literal">COUNT(*)</code></a> queries with
        <code class="literal">ORDER BY</code> and <code class="literal">LIMIT</code> could
        return the wrong result.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This problem was introduced by the fix for <a href="http://bugs.mysql.com/9676" target="_top">Bug#9676</a>, which
          limited the rows stored in a temporary table to the
          <code class="literal">LIMIT</code> clause. This optimization is not
          applicable to non-group queries with aggregate functions. The
          current fix disables the optimization in such cases.
        </p></div><p>(<a href="http://bugs.mysql.com/21787" target="_top">Bug#21787</a>)</p></li><li><p>
        Using <code class="literal">DROP TABLE</code> with concurrent queries
        causes <code class="literal">mysqld</code> to crash.
       (<a href="http://bugs.mysql.com/21784" target="_top">Bug#21784</a>)</p></li><li><p>
        <code class="literal">INSERT ... SELECT</code> sometimes generated a
        spurious <code class="literal">Column count doesn't match value
        count</code> error.
       (<a href="http://bugs.mysql.com/21774" target="_top">Bug#21774</a>)</p></li><li><p>
        <code class="literal">UPGRADE</code> was treated as a reserved word,
        although it is not.
       (<a href="http://bugs.mysql.com/21772" target="_top">Bug#21772</a>)</p></li><li><p>
        A function result in a comparison was replaced with a constant
        by the optimizer under some circumstances when this optimization
        was invalid.
       (<a href="http://bugs.mysql.com/21698" target="_top">Bug#21698</a>)</p></li><li><p>
        Selecting from <code class="literal">INFORMATION_SCHEMA.FILES</code> could
        crash the server.
       (<a href="http://bugs.mysql.com/21676" target="_top">Bug#21676</a>)</p></li><li><p>
        Errors could be generated during the execution of certain
        prepared statements that ran queries on partitioned tables.
       (<a href="http://bugs.mysql.com/21658" target="_top">Bug#21658</a>)</p></li><li><p>
        The presence of a subquery in the <code class="literal">ON</code> clause
        of a join in a view definition prevented the
        <code class="literal">MERGE</code> algorithm from being used for the view
        in cases where it should be allowed.
       (<a href="http://bugs.mysql.com/21646" target="_top">Bug#21646</a>)</p></li><li><p>
        When records are merged from the insert buffer and the page
        needs to be reorganized, <code class="literal">InnoDB</code> used
        incorrect column length information when interpreting the
        records of the page. This caused a server crash due to apparent
        corruption of secondary indexes in
        <code class="literal">ROW_FORMAT=COMPACT</code> that contain prefix
        indexes of fixed-length columns. Data files should not be
        corrupted, but the crash was likely to repeat every time the
        server was restarted.
       (<a href="http://bugs.mysql.com/21638" target="_top">Bug#21638</a>)</p></li><li><p>
        For character sets having a <code class="literal">mbmaxlen</code> value of
        2, any <code class="literal">ALTER TABLE</code> statement changed
        <code class="literal">TEXT</code> columns to
        <code class="literal">MEDIUMTEXT</code>.
       (<a href="http://bugs.mysql.com/21620" target="_top">Bug#21620</a>)</p></li><li><p>
        <span><strong class="command">mysql</strong></span> displayed an empty string for
        <code class="literal">NULL</code> values.
       (<a href="http://bugs.mysql.com/21618" target="_top">Bug#21618</a>)</p></li><li><p>
        Selecting from a <code class="literal">MERGE</code> table could result in
        a server crash if the underlying tables had fewer indexes than
        the <code class="literal">MERGE</code> table itself.
       (<a href="http://bugs.mysql.com/21617" target="_top">Bug#21617</a>, <a href="http://bugs.mysql.com/22937" target="_top">Bug#22937</a>)</p></li><li><p>
        A loaded storage engine plugin did not load after a server
        restart.
       (<a href="http://bugs.mysql.com/21610" target="_top">Bug#21610</a>)</p></li><li><p>
        For <code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code>, use
        of
        <a href="functions.html#function_values"><code class="literal">VALUES(<em class="replaceable"><code>col_name</code></em>)</code></a>
        within the <code class="literal">UPDATE</code> clause sometimes was
        handled incorrectly.
       (<a href="http://bugs.mysql.com/21555" target="_top">Bug#21555</a>)</p></li><li><p>
        Subqueries with aggregate functions but no
        <code class="literal">FROM</code> clause could return incorrect results.
       (<a href="http://bugs.mysql.com/21540" target="_top">Bug#21540</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> incorrectly tried to use
        <code class="literal">LOCK TABLES</code> for tables in the
        <code class="literal">INFORMATION_SCHEMA</code> database.
       (<a href="http://bugs.mysql.com/21527" target="_top">Bug#21527</a>)</p></li><li><p>
        The server could crash for the second execution of a function
        containing a <code class="literal">SELECT</code> statement that uses an
        aggregating <code class="literal">IN</code> subquery.
       (<a href="http://bugs.mysql.com/21493" target="_top">Bug#21493</a>)</p></li><li><p>
        Memory overruns could occur for certain kinds of subqueries.
       (<a href="http://bugs.mysql.com/21477" target="_top">Bug#21477</a>)</p></li><li><p>
        A <code class="literal">DATE</code> can be represented as an integer (such
        as <code class="literal">20060101</code>) or as a string (such as
        <code class="literal">'2006.01.01'</code>). When a <code class="literal">DATE</code>
        (or <code class="literal">TIME</code>) column is compared in one
        <code class="literal">SELECT</code> against both representations, constant
        propagation by the optimizer led to comparison of
        <code class="literal">DATE</code> as a string against
        <code class="literal">DATE</code> as an integer. This could result in
        integer comparisons such as <code class="literal">2006</code> against
        <code class="literal">20060101</code>, erroneously producing a false
        result.
       (<a href="http://bugs.mysql.com/21475" target="_top">Bug#21475</a>)</p></li><li><p>
        For row-based replication, log rotation could occur at an
        improper time.
       (<a href="http://bugs.mysql.com/21474" target="_top">Bug#21474</a>)</p></li><li><p>
        <span><strong class="command">myisam_ftdump</strong></span> produced bad counts for common
        words.
       (<a href="http://bugs.mysql.com/21459" target="_top">Bug#21459</a>)</p></li><li><p>
        Adding <code class="literal">ORDER BY</code> to a <code class="literal">SELECT
        DISTINCT(<em class="replaceable"><code>expr</code></em>)</code> query could
        produce incorrect results.
       (<a href="http://bugs.mysql.com/21456" target="_top">Bug#21456</a>)</p></li><li><p>
        The URL into the online manual that is printed in the stack
        trace message by the server was out of date.
       (<a href="http://bugs.mysql.com/21449" target="_top">Bug#21449</a>)</p></li><li><p>
        Database and table names have a maximum length of 64 characters
        (even if they contain multi-byte characters), but were truncated
        to 64 bytes.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          An additional fix was made in MySQL 5.1.18.
        </p></div><p>(<a href="http://bugs.mysql.com/21432" target="_top">Bug#21432</a>)</p></li><li><p>
        With <code class="literal">max_sp_recursion</code> set to 0, a stored
        procedure that executed a <code class="literal">SHOW CREATE
        PROCEDURE</code> statement for itself triggered a recursion
        limit exceeded error, though the statement involves no
        recursion.
       (<a href="http://bugs.mysql.com/21416" target="_top">Bug#21416</a>)</p></li><li><p>
        After <code class="literal">FLUSH TABLES WITH READ LOCK</code> followed by
        <code class="literal">UNLOCK TABLES</code>, attempts to drop or alter a
        stored routine failed with an error that the routine did not
        exist, and attempts to execute the routine failed with a lock
        conflict error.
       (<a href="http://bugs.mysql.com/21414" target="_top">Bug#21414</a>)</p></li><li><p>
        On 64-bit Windows, a missing table generated error 1017, not the
        correct value of 1146.
       (<a href="http://bugs.mysql.com/21396" target="_top">Bug#21396</a>)</p></li><li><p>
        Table aliases in multiple-table <code class="literal">DELETE</code>
        statements sometimes were not resolved.
       (<a href="http://bugs.mysql.com/21392" target="_top">Bug#21392</a>)</p></li><li><p>
        The optimizer sometimes produced an incorrect row-count estimate
        after elimination of <code class="literal">const</code> tables. This
        resulted in choosing extremely inefficient execution plans in
        same cases when distribution of data in joins were skewed.
       (<a href="http://bugs.mysql.com/21390" target="_top">Bug#21390</a>)</p></li><li><p>
        For multiple-table <code class="literal">UPDATE</code> statements, storage
        engines were not notified of duplicate-key errors.
       (<a href="http://bugs.mysql.com/21381" target="_top">Bug#21381</a>)</p></li><li><p>
        Using relative paths for <code class="literal">DATA DIRECTORY</code> or
        <code class="literal">INDEX DIRECTORY</code> with a partitioned table
        generated a warning rather than an error, and caused
        “<span class="quote">junk</span>” files to be created in the server's data
        directory.
       (<a href="http://bugs.mysql.com/21350" target="_top">Bug#21350</a>)</p></li><li><p>
        Using <code class="literal">EXPLAIN PARTITIONS</code> with a query on a
        table whose partitioning expression was based on the value of a
        <code class="literal">DATE</code> column could sometimes cause the server
        to crash.
       (<a href="http://bugs.mysql.com/21339" target="_top">Bug#21339</a>)</p></li><li><p>
        The feature of being able to recover a temporary table named
        <code class="literal">#sql_<em class="replaceable"><code>id</code></em></code> in
        <code class="literal">InnoDB</code> by creating a table named
        <code class="literal">rsql_<em class="replaceable"><code>id</code></em>_recover_innodb_tmp_table</code>
        was broken by the introduction of the new identifier encoding in
        MySQL 5.1.6
       (<a href="http://bugs.mysql.com/21313" target="_top">Bug#21313</a>)</p></li><li><p>
        It was possible for a stored routine with a
        non-<code class="literal">latin1</code> name to cause a stack overrun.
       (<a href="http://bugs.mysql.com/21311" target="_top">Bug#21311</a>)</p></li><li><p>
        A query result could be sorted improperly when using
        <code class="literal">ORDER BY</code> for the second table in a join.
       (<a href="http://bugs.mysql.com/21302" target="_top">Bug#21302</a>)</p></li><li><p>
        Query results could be incorrect if the <code class="literal">WHERE</code>
        clause contained <code class="literal">t.<em class="replaceable"><code>key_part</code></em>
        NOT IN (<em class="replaceable"><code>val_list</code></em>)</code>, where
        <em class="replaceable"><code>val_list</code></em> is a list of more than 1000
        constants.
       (<a href="http://bugs.mysql.com/21282" target="_top">Bug#21282</a>)</p></li><li><p>
        Queries that used the <code class="literal">index_merge</code> and
        <code class="literal">sort_union</code> methods to access an
        <code class="literal">InnoDB</code> table could produce inaccurate
        results. This issue was introduced in MySQL 5.1.10 when a new
        handler and bitmap interface was implemented.
       (<a href="http://bugs.mysql.com/21277" target="_top">Bug#21277</a>)</p></li><li><p>
        For user-defined functions created with <code class="literal">CREATE
        FUNCTION</code>, the <code class="literal">DEFINER</code> clause is not
        legal, but no error was generated.
       (<a href="http://bugs.mysql.com/21269" target="_top">Bug#21269</a>)</p></li><li><p>
        The <code class="literal">SELECT</code> privilege was required for an
        insert on a view, instead of the <code class="literal">INSERT</code>
        privilege.
       (<a href="http://bugs.mysql.com/21261" target="_top">Bug#21261</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/20989" target="_top">Bug#20989</a></p></li><li><p>
        <span><strong class="command">mysql_config --libmysqld-libs</strong></span> did not produce
        any SSL options necessary for linking
        <code class="literal">libmysqld</code> with SSL support enabled.
       (<a href="http://bugs.mysql.com/21239" target="_top">Bug#21239</a>)</p></li><li><p>
        Subqueries on <code class="literal">INFORMATION_SCHEMA</code> tables could
        erroneously return an empty result.
       (<a href="http://bugs.mysql.com/21231" target="_top">Bug#21231</a>)</p></li><li><p>
        <span><strong class="command">mysql_upgrade</strong></span> created temporary files in a
        possibly insecure way.
       (<a href="http://bugs.mysql.com/21224" target="_top">Bug#21224</a>)</p></li><li><p>
        When <code class="literal">DROP DATABASE</code> or <code class="literal">SHOW OPEN
        TABLES</code> was issued while concurrently in another
        connection issuing <code class="literal">DROP TABLE</code>,
        <code class="literal">RENAME TABLE</code>, <code class="literal">CREATE TABLE
        LIKE</code> or any other statement that required a name lock,
        the server crashed.
       (<a href="http://bugs.mysql.com/21216" target="_top">Bug#21216</a>, <a href="http://bugs.mysql.com/19403" target="_top">Bug#19403</a>)</p></li><li><p>
        The <code class="option">--master-data</code> option for
        <span><strong class="command">mysqldump</strong></span> requires certain privileges, but
        <span><strong class="command">mysqldump</strong></span> generated a truncated dump file
        without producing an appropriate error message or exit status if
        the invoking user did not have those privileges.
       (<a href="http://bugs.mysql.com/21215" target="_top">Bug#21215</a>)</p></li><li><p>
        Using <code class="literal">ALTER TABLE ... REORGANIZE PARTITIONS</code>
        to reduce the number of subpartitions to 1 caused the server to
        crash.
       (<a href="http://bugs.mysql.com/21210" target="_top">Bug#21210</a>)</p></li><li><p>
        In the package of pre-built time zone tables that is available
        for download at <a href="timezones.html" target="_top">timezones.html</a>, the tables now
        explicitly use the <code class="literal">utf8</code> character set so that
        they work the same way regardless of the system character set
        value.
       (<a href="http://bugs.mysql.com/21208" target="_top">Bug#21208</a>)</p></li><li><p>
        Under heavy load (executing more than 1024 simultaneous complex
        queries), a problem in the code that handles internal temporary
        tables could lead to writing beyond allocated space and memory
        corruption.
      </p><p>
        Use of more than 1024 simultaneous cursors server wide also
        could lead to memory corruption. This applies to both stored
        procedure cursors and C API cursors.
       (<a href="http://bugs.mysql.com/21206" target="_top">Bug#21206</a>)</p></li><li><p>
        When run with the <code class="option">--use-threads</code> option,
        <span><strong class="command">mysqlimport</strong></span> returned a random exit code.
       (<a href="http://bugs.mysql.com/21188" target="_top">Bug#21188</a>)</p></li><li><p>
        A subquery that uses an index for both the
        <code class="literal">WHERE</code> and <code class="literal">ORDER BY</code> clauses
        produced an empty result.
       (<a href="http://bugs.mysql.com/21180" target="_top">Bug#21180</a>)</p></li><li><p>
        Running <code class="literal">SHOW TABLE STATUS</code> on any
        <code class="literal">InnoDB</code> table having at least one record could
        crash the server. Note that this was not due to any issue in the
        <code class="literal">InnoDB</code> storage engine, but rather with
        <code class="literal">AUTO_INCREMENT</code> handling in the partitioning
        code — however, the table did not have to have an
        <code class="literal">AUTO_INCREMENT</code> column for the bug to
        manifest.
       (<a href="http://bugs.mysql.com/21173" target="_top">Bug#21173</a>)</p></li><li><p>
        Some prepared statements caused a server crash when executed a
        second time.
       (<a href="http://bugs.mysql.com/21166" target="_top">Bug#21166</a>)</p></li><li><p>
        The optimizer assumed that if <code class="literal">(a=x AND b=x)</code>
        is true, <code class="literal">(a=x AND b=x) AND a=b</code> is also true.
        But that is not always so if <code class="literal">a</code> and
        <code class="literal">b</code> have different data types.
       (<a href="http://bugs.mysql.com/21159" target="_top">Bug#21159</a>)</p></li><li><p>
        Some <code class="literal">ALTER TABLE</code> statements affecting a
        table's subpartitioning could hang.
       (<a href="http://bugs.mysql.com/21143" target="_top">Bug#21143</a>)</p></li><li><p>
        Certain malformed <code class="literal">INSERT</code> statements could
        crash the <span><strong class="command">mysql</strong></span> client.
       (<a href="http://bugs.mysql.com/21142" target="_top">Bug#21142</a>)</p></li><li><p>
        <code class="literal">SHOW INNODB STATUS</code> contained some duplicate
        output.
       (<a href="http://bugs.mysql.com/21113" target="_top">Bug#21113</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> was slow with more than 100,000
        <code class="filename">.idb</code> files.
       (<a href="http://bugs.mysql.com/21112" target="_top">Bug#21112</a>)</p></li><li><p>
        Creating a <code class="literal">TEMPORARY</code> table with the same name
        as an existing table that was locked by another client could
        result in a lock conflict for <code class="literal">DROP TEMPORARY
        TABLE</code> because the server unnecessarily tried to
        acquire a name lock.
       (<a href="http://bugs.mysql.com/21096" target="_top">Bug#21096</a>)</p></li><li><p>
        Performing an <code class="literal">INSERT</code> on a view that was
        defined using a <code class="literal">SELECT</code> that specified a
        collation and a column alias caused the server to crash .
       (<a href="http://bugs.mysql.com/21086" target="_top">Bug#21086</a>)</p></li><li><p>
        Incorrect results could be obtained from re-execution of a
        parametrized prepared statement or a stored routine with a
        <code class="literal">SELECT</code> that uses <code class="literal">LEFT JOIN</code>
        with a second table having only one row.
       (<a href="http://bugs.mysql.com/21081" target="_top">Bug#21081</a>)</p></li><li><p>
        <code class="literal">ALTER VIEW</code> did not retain existing values of
        attributes that had been originally specified but were not
        changed in the <code class="literal">ALTER VIEW</code> statement.
       (<a href="http://bugs.mysql.com/21080" target="_top">Bug#21080</a>)</p></li><li><p>
        The <code class="literal">myisam_stats_method</code> variable was
        mishandled when set from an option file or on the command line.
       (<a href="http://bugs.mysql.com/21054" target="_top">Bug#21054</a>)</p></li><li><p>
        With <code class="literal">query_cache_type</code> set to 0,
        <code class="literal">RESET QUERY CACHE</code> was very slow and other
        threads were blocked during the operation. Now a cache reset is
        faster and non-blocking.
       (<a href="http://bugs.mysql.com/21051" target="_top">Bug#21051</a>)</p></li><li><p>
        <span><strong class="command">mysql</strong></span> crashed for very long arguments to the
        <code class="literal">connect</code> command.
       (<a href="http://bugs.mysql.com/21042" target="_top">Bug#21042</a>)</p></li><li><p>
        When creating a table using <code class="literal">CREATE...SELECT</code>
        and a stored procedure, there would be a mismatch between the
        binary log and transaction cache which would cause a server
        crash.
       (<a href="http://bugs.mysql.com/21039" target="_top">Bug#21039</a>)</p></li><li><p>
        A query using <code class="literal">WHERE <em class="replaceable"><code>column</code></em> =
        <em class="replaceable"><code>constant</code></em> OR
        <em class="replaceable"><code>column</code></em> IS NULL</code> did not
        return consistent results on successive invocations. The
        <em class="replaceable"><code>column</code></em> in each part of the
        <code class="literal">WHERE</code> clause could be either the same column,
        or two different columns, for the effect to be observed.
       (<a href="http://bugs.mysql.com/21019" target="_top">Bug#21019</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> sometimes did not select the
        correct database before trying to dump views from it, resulting
        in an empty result set that caused <span><strong class="command">mysqldump</strong></span>
        to die with a segmentation fault.
       (<a href="http://bugs.mysql.com/21014" target="_top">Bug#21014</a>)</p></li><li><p>
        Performance during an import on a table with a trigger that
        called a stored procedure was severely degraded.
       (<a href="http://bugs.mysql.com/21013" target="_top">Bug#21013</a>)</p></li><li><p>
        <span><strong class="command">mysql_upgrade</strong></span> produced a malformed
        <code class="filename">upgrade_defaults</code> file by overwriting the
        <code class="literal">[client]</code> group header with a
        <code class="literal">password</code> option. This prevented
        <span><strong class="command">mysqlcheck</strong></span> from running successfully when
        invoked by <span><strong class="command">mysql_upgrade</strong></span>.
       (<a href="http://bugs.mysql.com/21011" target="_top">Bug#21011</a>)</p></li><li><p>
        A query of the form shown here caused the server to crash:
      </p><pre class="programlisting">SELECT * FROM t1 NATURAL JOIN (
    t2 JOIN (
        t3 NATURAL JOIN t4,
        t5 NATURAL JOIN t6
    )
    ON (t3.id3 = t2.id3 AND t5.id5 = t2.id5)
);
</pre><p>(<a href="http://bugs.mysql.com/21007" target="_top">Bug#21007</a>)</p></li><li><p>
        A <code class="literal">SELECT</code> that used a subquery in the
        <code class="literal">FROM</code> clause that did not select from a table
        failed when the subquery was used in a join.
       (<a href="http://bugs.mysql.com/21002" target="_top">Bug#21002</a>)</p></li><li><p>
        <code class="literal">REPLACE ... SELECT</code> for a view required the
        <code class="literal">INSERT</code> privilege for tables other than the
        table being modified.
       (<a href="http://bugs.mysql.com/20989" target="_top">Bug#20989</a>)</p></li><li><p>
        <a href="functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a> sometimes would
        return <code class="literal">NULL</code> if the <code class="literal">%D</code>
        format specifier was not the last specifier in the format
        string.
       (<a href="http://bugs.mysql.com/20987" target="_top">Bug#20987</a>)</p></li><li><p>
        A query using <code class="literal">WHERE NOT
        (<em class="replaceable"><code>column</code></em> &lt; ANY
        (<em class="replaceable"><code>subquery</code></em>))</code> yielded a
        different result from the same query using the same
        <em class="replaceable"><code>column</code></em> and
        <em class="replaceable"><code>subquery</code></em> with <code class="literal">WHERE
        (<em class="replaceable"><code>column</code></em> &gt; ANY
        (<em class="replaceable"><code>subquery</code></em>))</code>.
       (<a href="http://bugs.mysql.com/20975" target="_top">Bug#20975</a>)</p></li><li><p>
        Under certain circumstances,
        <a href="functions.html#function_avg"><code class="literal">AVG(<em class="replaceable"><code>key_val</code></em>)</code></a>
        returned a value but
        <a href="functions.html#function_max"><code class="literal">MAX(<em class="replaceable"><code>key_val</code></em>)</code></a>
        returned an empty set due to incorrect application of
        <a href="functions.html#function_min"><code class="literal">MIN()/MAX()</code></a>
        optimization.
       (<a href="http://bugs.mysql.com/20954" target="_top">Bug#20954</a>)</p></li><li><p>
        In mixed-format binary logging mode, stored functions, triggers,
        and views that use functions in their body that require
        row-based logging did not replicate reliably because the logging
        did not switch from statement-based to row-based format. For
        example, <code class="literal">INSERT INTO t SELECT FROM v</code>, where
        <code class="literal">v</code> is a view that selects
        <a href="functions.html#function_uuid"><code class="literal">UUID()</code></a> could cause problems.
        This limitation has been removed.
       (<a href="http://bugs.mysql.com/20930" target="_top">Bug#20930</a>)</p></li><li><p>
        Closing of temporary tables failed if binary logging was not
        enabled.
       (<a href="http://bugs.mysql.com/20919" target="_top">Bug#20919</a>)</p></li><li><p>
        Use of zero-length variable names caused a server crash.
       (<a href="http://bugs.mysql.com/20908" target="_top">Bug#20908</a>)</p></li><li><p>
        Building <code class="literal">mysql</code> on Windows with CMake 2.4
        would fail to create <code class="literal">libmysqld</code> correctly.
       (<a href="http://bugs.mysql.com/20907" target="_top">Bug#20907</a>)</p></li><li><p>
        Creating a partitioned table that used the
        <code class="literal">InnoDB</code> storage engine and then restarting
        <span><strong class="command">mysqld</strong></span> with <code class="option">--skip-innodb</code>
        caused MySQL to crash.
       (<a href="http://bugs.mysql.com/20871" target="_top">Bug#20871</a>)</p></li><li><p>
        For certain queries, the server incorrectly resolved a reference
        to an aggregate function and crashed.
       (<a href="http://bugs.mysql.com/20868" target="_top">Bug#20868</a>)</p></li><li><p>
        If the binary logging format was changed between the times when
        a locked table was modified and when it was unlocked, the binary
        log contents were incorrect.
       (<a href="http://bugs.mysql.com/20863" target="_top">Bug#20863</a>)</p></li><li><p>
        It was possible to provide the
        <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> function
        with input containing “<span class="quote">tags</span>” that were not valid
        XML; for example, it was possible to use tag names beginning
        with a digit, which are disallowed by the W3C's XML 1.0
        specification. Such cases caused the function to return
        “<span class="quote">junk</span>” output rather than an error message
        signalling the user as to the true nature of the problem.
       (<a href="http://bugs.mysql.com/20854" target="_top">Bug#20854</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> (Partitioning): Updating an
        <code class="literal">InnoDB</code> table using <code class="literal">HASH</code>
        partitioning with a composite primary key would cause the server
        to hang.
       (<a href="http://bugs.mysql.com/20852" target="_top">Bug#20852</a>)</p></li><li><p>
        A race condition during slave server shutdown caused an assert
        failure.
       (<a href="http://bugs.mysql.com/20850" target="_top">Bug#20850</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> did not add version-specific
        comments around <code class="literal">WITH PARSER</code> and
        <code class="literal">TABLESPACE ... STORAGE DISK</code> clauses for
        <code class="literal">CREATE TABLE</code> statements, causing dump files
        from servers where these features were in use to fail when
        loaded into older servers.
       (<a href="http://bugs.mysql.com/20841" target="_top">Bug#20841</a>)</p></li><li><p>
        For multiple <code class="literal">INSERT DELAYED</code> statements
        executed in a batch by the delayed-insert handler thread, not
        all rows were written to the binary log.
       (<a href="http://bugs.mysql.com/20821" target="_top">Bug#20821</a>)</p></li><li><p>
        The <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> function did
        not accept XML tag names containing a period
        (<code class="literal">.</code>) character.
       (<a href="http://bugs.mysql.com/20795" target="_top">Bug#20795</a>)</p></li><li><p>
        Using aggregate functions in subqueries yielded incorrect
        results under certain circumstances due to incorrect application
        of
        <a href="functions.html#function_min"><code class="literal">MIN()</code></a>/<a href="functions.html#function_max"><code class="literal">MAX()</code></a>
        optimization.
       (<a href="http://bugs.mysql.com/20792" target="_top">Bug#20792</a>)</p></li><li><p>
        On Windows, inserting into a <code class="literal">MERGE</code> table
        after renaming an underlying <code class="literal">MyISAM</code> table
        caused a server crash.
       (<a href="http://bugs.mysql.com/20789" target="_top">Bug#20789</a>)</p></li><li><p>
        Within stored routines, some error messages were printed
        incorrectly. A non-null-terminated string was passed to a
        message-printing routine that expected a null-terminated string.
       (<a href="http://bugs.mysql.com/20778" target="_top">Bug#20778</a>)</p></li><li><p>
        Merging multiple partitions having subpartitions into a single
        partition with subpartitions, or splitting a single partition
        having subpartitions into multiple partitions with
        subpartitions, could sometimes crash the server. These issues
        were associated with a failure reported in the
        <code class="literal">partition_range</code> test.
       (<a href="http://bugs.mysql.com/20767" target="_top">Bug#20767</a>, <a href="http://bugs.mysql.com/20893" target="_top">Bug#20893</a>, <a href="http://bugs.mysql.com/20766" target="_top">Bug#20766</a>, <a href="http://bugs.mysql.com/21357" target="_top">Bug#21357</a>)</p></li><li><p>
        Searches against a <code class="literal">ZEROFILL</code> column of a
        partitioned table could fail when the
        <code class="literal">ZEROFILL</code> column was part of the table's
        partitioning key.
       (<a href="http://bugs.mysql.com/20733" target="_top">Bug#20733</a>)</p></li><li><p>
        If a column definition contained a character set declaration,
        but a <code class="literal">DEFAULT</code> value began with an introducer,
        the introducer character set was used as the column character
        set.
       (<a href="http://bugs.mysql.com/20695" target="_top">Bug#20695</a>)</p></li><li><p>
        An <code class="literal">UPDATE</code> that referred to a key column in
        the <code class="literal">WHERE</code> clause and activated a trigger that
        modified the column resulted in a loop.
       (<a href="http://bugs.mysql.com/20670" target="_top">Bug#20670</a>)</p></li><li><p>
        Issuing a <code class="literal">SHOW CREATE FUNCTION</code> or
        <code class="literal">SHOW CREATE PROCEDURE</code> statement without
        sufficient privileges could crash the <span><strong class="command">mysql</strong></span>
        client.
       (<a href="http://bugs.mysql.com/20664" target="_top">Bug#20664</a>)</p></li><li><p>
        With mixed-format binary logging, <code class="literal">INSERT
        DELAYED</code> statements were logged using statement-based
        logging, and they did not replicate properly for statements that
        used values such as
        <a href="functions.html#function_uuid"><code class="literal">UUID()</code></a>,
        <a href="functions.html#function_rand"><code class="literal">RAND()</code></a>, or user-defined
        variables that require row-based logging. To correct this, the
        <code class="literal">DELAYED</code> handler thread how switches to
        row-based logging if the logging format is mixed.
       (<a href="http://bugs.mysql.com/20633" target="_top">Bug#20633</a>, <a href="http://bugs.mysql.com/20649" target="_top">Bug#20649</a>)</p></li><li><p>
        <code class="literal">INSERT DELAYED</code> did not honor <code class="literal">SET
        INSERT_ID</code> or the <code class="literal">auto_increment_*</code>
        system variables.
       (<a href="http://bugs.mysql.com/20627" target="_top">Bug#20627</a>, <a href="http://bugs.mysql.com/20830" target="_top">Bug#20830</a>)</p></li><li><p>
        A buffer overwrite error in Instance Manager caused a crash.
       (<a href="http://bugs.mysql.com/20622" target="_top">Bug#20622</a>)</p></li><li><p>
        Loading a plugin caused any an existing plugin with the same
        name to be lost.
       (<a href="http://bugs.mysql.com/20615" target="_top">Bug#20615</a>)</p></li><li><p>
        A query selecting records from a single partition of a
        partitioned table and using <code class="literal">ORDER BY
        <em class="replaceable"><code>ic</code></em> DESC</code> (where
        <em class="replaceable"><code>ic</code></em> represents an indexed column)
        could cause errors or crash the server.
       (<a href="http://bugs.mysql.com/20583" target="_top">Bug#20583</a>)</p></li><li><p>
        If the <code class="literal">auto_increment_offset</code> setting causes
        MySQL to generate a value larger than the column's maximum
        possible value, the <code class="literal">INSERT</code> statement is
        accepted in strict SQL mode, whereas but should fail with an
        error.
       (<a href="http://bugs.mysql.com/20573" target="_top">Bug#20573</a>)</p></li><li><p>
        In a view defined with <code class="literal">SQL SECURITY DEFINER</code>,
        the <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> function
        returned the invoker, not the definer.
       (<a href="http://bugs.mysql.com/20570" target="_top">Bug#20570</a>)</p></li><li><p>
        The <code class="filename">fill_help_tables.sql</code> file did not
        contain a <code class="literal">SET NAMES 'utf8'</code> statement to
        indicate its encoding. This caused problems for some settings of
        the MySQL character set such as <code class="literal">big5</code>.
       (<a href="http://bugs.mysql.com/20551" target="_top">Bug#20551</a>)</p></li><li><p>
        Scheduled events that invoked stored procedures executing DDL
        operations on partitioned tables could crash the server.
       (<a href="http://bugs.mysql.com/20548" target="_top">Bug#20548</a>)</p></li><li><p>
        Users who had the <code class="literal">SHOW VIEW</code> privilege for a
        view and privileges on one of the view's base tables could
        not see records in <code class="literal">INFORMATION_SCHEMA</code> tables
        relating to the base table.
       (<a href="http://bugs.mysql.com/20543" target="_top">Bug#20543</a>)</p></li><li><p>
        The <code class="filename">fill_help_tables.sql</code> file did not load
        properly if the <code class="literal">ANSI_QUOTES</code> SQL mode was
        enabled.
       (<a href="http://bugs.mysql.com/20542" target="_top">Bug#20542</a>)</p></li><li><p>
        The <a href="functions.html#function_md5"><code class="literal">MD5()</code></a>,
        <a href="functions.html#function_sha1"><code class="literal">SHA1()</code></a>, and
        <a href="functions.html#function_encrypt"><code class="literal">ENCRYPT()</code></a> functions should
        return a binary string, but the result sometimes was converted
        to the character set of the argument.
        <a href="functions.html#function_make-set"><code class="literal">MAKE_SET()</code></a> and
        <a href="functions.html#function_export-set"><code class="literal">EXPORT_SET()</code></a> now use
        the correct character set for their default separators,
        resulting in consistent result strings which can be coerced
        according to normal character set rules.
       (<a href="http://bugs.mysql.com/20536" target="_top">Bug#20536</a>)</p></li><li><p>
        With the <code class="literal">auto_increment_increment</code> system
        variable set larger than 1, if the next generated
        <code class="literal">AUTO_INCREMENT</code> value would be larger than the
        column's maximum value, the value would be clipped down to that
        maximum value and inserted, even if the resulting value would
        not be in the generated sequence. This could cause problems for
        master-master replication. Now the server clips the value down
        to the previous value in the sequence, which correctly produces
        a duplicate-key error if that value already exists in the
        column.
       (<a href="http://bugs.mysql.com/20524" target="_top">Bug#20524</a>)</p></li><li><p>
        In mixed binary logging mode, a temporary switch from
        statement-based logging to row-based logging occurs when storing
        a row that uses a function such as
        <a href="functions.html#function_uuid"><code class="literal">UUID()</code></a> into a temporary table.
        However, temporary table changes are not written to the binary
        log under row-based logging, so the row does not exist on the
        slave. A subsequent select from the temporary table to a
        non-temporary table using statement-based logging works
        correctly on the master, but not on the slave where the row does
        not exist. Replication no longer switches back from row-based
        logging to statement-based logging until there are no temporary
        tables for the session.
       (<a href="http://bugs.mysql.com/20499" target="_top">Bug#20499</a>)</p></li><li><p>
        If a partitioned <code class="literal">InnoDB</code> table contained an
        <code class="literal">AUTO_INCREMENT</code> column, a
        <code class="literal">SHOW</code> statement could cause an assertion
        failure with more than one connection.
       (<a href="http://bugs.mysql.com/20493" target="_top">Bug#20493</a>)</p></li><li><p>
        Using <code class="literal">EXPLAIN PARTITIONS</code> with a
        <code class="literal">UNION</code> query could crash the server. This
        could occur whether or not the query actually used any
        partitioned tables.
       (<a href="http://bugs.mysql.com/20484" target="_top">Bug#20484</a>)</p></li><li><p>
        Creation of a view as a join of views or tables could fail if
        the views or tables are in different databases.
       (<a href="http://bugs.mysql.com/20482" target="_top">Bug#20482</a>)</p></li><li><p>
        <code class="literal">SELECT</code> statements using <code class="literal">GROUP
        BY</code> against a view could have missing columns in the
        output when there was a trigger defined on one of the base
        tables for the view.
       (<a href="http://bugs.mysql.com/20466" target="_top">Bug#20466</a>)</p></li><li><p>
        <code class="literal">CREATE PROCEDURE</code>, <code class="literal">CREATE
        FUNTION</code>, <code class="literal">CREATE TRIGGER</code>, and
        <code class="literal">CREATE VIEW</code> statements containing multi-line
        comments (<code class="literal">/* ... */</code>) could not be replicated.
       (<a href="http://bugs.mysql.com/20438" target="_top">Bug#20438</a>)</p></li><li><p>
        For connections that required a <code class="literal">SUBJECT</code>
        value, a check was performed to verify that the value was
        correct, but the connection was not refused if not.
       (<a href="http://bugs.mysql.com/20411" target="_top">Bug#20411</a>)</p></li><li><p>
        <span><strong class="command">mysql_upgrade</strong></span> was missing from binary MySQL
        distributions.
       (<a href="http://bugs.mysql.com/20403" target="_top">Bug#20403</a>, <a href="http://bugs.mysql.com/18516" target="_top">Bug#18516</a>, <a href="http://bugs.mysql.com/20556" target="_top">Bug#20556</a>)</p></li><li><p>
        Some user-level errors were being written to the server's error
        log, which is for server errors.
       (<a href="http://bugs.mysql.com/20402" target="_top">Bug#20402</a>)</p></li><li><p>
        Using <code class="literal">ALTER TABLE ... ENGINE =
        <em class="replaceable"><code>x</code></em></code>, where
        <em class="replaceable"><code>x</code></em> was not a storage engine supported
        by the server, would cause <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/20397" target="_top">Bug#20397</a>)</p></li><li><p>
        User names have a maximum length of 16 characters (even if they
        contain multi-byte characters), but were being truncated to 16
        bytes.
       (<a href="http://bugs.mysql.com/20393" target="_top">Bug#20393</a>)</p></li><li><p>
        Some queries using <code class="literal">ORDER BY ... DESC</code> on
        subpartitioned tables could crash the server.
       (<a href="http://bugs.mysql.com/20389" target="_top">Bug#20389</a>)</p></li><li><p>
        <span><strong class="command">mysqlslap</strong></span> did not enable the
        <code class="literal">CLIENT_MULTI_RESULTS</code> flag when connecting,
        which is necessary for executing stored procedures.
       (<a href="http://bugs.mysql.com/20365" target="_top">Bug#20365</a>)</p></li><li><p>
        Queries using an indexed column as the argument for the
        <a href="functions.html#function_min"><code class="literal">MIN()</code></a> and
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a> functions following an
        <code class="literal">ALTER TABLE .. DISABLE KEYS</code> statement
        returned <span class="errortext">Got error 124 from storage
        engine</span> until <code class="literal">ALTER TABLE ... ENABLE
        KEYS</code> was run on the table.
       (<a href="http://bugs.mysql.com/20357" target="_top">Bug#20357</a>)</p></li><li><p>
        When a statement used a stored function that inserted into an
        <code class="literal">AUTO_INCREMENT</code> column, the generated
        <code class="literal">AUTO_INCREMENT</code> value was not written into the
        binary log, so a different value could in some cases be inserted
        on the slave.
       (<a href="http://bugs.mysql.com/20341" target="_top">Bug#20341</a>)</p></li><li><p>
        Partitions were represented internally as the wrong data type,
        which led in some cases to failures of queries such as
        <code class="literal">SELECT COUNT(*) FROM INFORMATION_SCHEMA.PARTITIONS
        WHERE PARTITION_NAME =
        '<em class="replaceable"><code>partition_name</code></em>'</code>.
       (<a href="http://bugs.mysql.com/20340" target="_top">Bug#20340</a>)</p></li><li><p>
        A stored procedure that used
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> did
        not replicate properly using statement-based binary logging.
       (<a href="http://bugs.mysql.com/20339" target="_top">Bug#20339</a>)</p></li><li><p>
        <code class="literal">PROCEDURE ANALYSE()</code> returned incorrect values
        of <em class="replaceable"><code>M</code></em>
        <code class="literal">FLOAT(<em class="replaceable"><code>M</code></em>,
        <em class="replaceable"><code>D</code></em>)</code> and
        <code class="literal">DOUBLE(<em class="replaceable"><code>M</code></em>,
        <em class="replaceable"><code>D</code></em>)</code>.
       (<a href="http://bugs.mysql.com/20305" target="_top">Bug#20305</a>)</p></li><li><p>
        Defining a table partitioned by <code class="literal">LIST</code> with a
        single <code class="literal">PARTITION ... VALUES IN (NULL)</code> clause
        could lead to server crashes, particularly with queries having
        <code class="literal">WHERE</code> conditions comparing the partitioning
        key with a constant.
       (<a href="http://bugs.mysql.com/20268" target="_top">Bug#20268</a>, <a href="http://bugs.mysql.com/19801" target="_top">Bug#19801</a>)</p></li><li><p>
        When using row based replication, a <code class="literal">CREATE
        TABLE...SELECT</code> statement would be replicated, even if
        the table creation failed on the master (for example, due to a
        duplicate key failure).
       (<a href="http://bugs.mysql.com/20265" target="_top">Bug#20265</a>)</p></li><li><p>
        Partition pruning could cause incorrect results from queries,
        such missing rows, when the partitioning expression relied on a
        <code class="literal">BIGINT UNSIGNED</code> column.
       (<a href="http://bugs.mysql.com/20257" target="_top">Bug#20257</a>)</p></li><li><p>
        For a <code class="literal">MyISAM</code> table locked with <code class="literal">LOCK
        TABLES ...WRITE</code>, queries optimized using the
        <code class="literal">index_merge</code> method did not show rows inserted
        with the lock in place.
       (<a href="http://bugs.mysql.com/20256" target="_top">Bug#20256</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> produced a malformed dump file when
        dumping multiple databases that contained views.
       (<a href="http://bugs.mysql.com/20221" target="_top">Bug#20221</a>)</p></li><li><p>
        Running <code class="literal">InnoDB</code> with many concurrent threads
        could cause memory corruption and a seg fault due to a bug
        introduced in MySQL 5.1.11.
       (<a href="http://bugs.mysql.com/20213" target="_top">Bug#20213</a>)</p></li><li><p>
        <a href="functions.html#function_substring"><code class="literal">SUBSTRING()</code></a> results sometimes
        were stored improperly into a temporary table when multi-byte
        character sets were used.
       (<a href="http://bugs.mysql.com/20204" target="_top">Bug#20204</a>)</p></li><li><p>
        The thread for <code class="literal">INSERT DELAYED</code> rows was
        maintaining a separate <code class="literal">AUTO_INCREMENT</code>
        counter, resulting in incorrect values being assigned if
        <code class="literal">DELAYED</code> and non-<code class="literal">DELAYED</code>
        inserts were mixed.
       (<a href="http://bugs.mysql.com/20195" target="_top">Bug#20195</a>)</p></li><li><p>
        If a table on a slave server had a higher
        <code class="literal">AUTO_INCREMENT</code> counter than the corresponding
        master table (even though all rows of the two tables were
        identical), in some cases <code class="literal">REPLACE</code> or
        <code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code> would not
        replicate properly using statement-based logging. (Different
        values would be inserted on the master and slave.)
       (<a href="http://bugs.mysql.com/20188" target="_top">Bug#20188</a>)</p></li><li><p>
        The <code class="option">--default-storage-engine</code> server option did
        not work.
       (<a href="http://bugs.mysql.com/20168" target="_top">Bug#20168</a>)</p></li><li><p>
        For a table having <code class="literal">LINEAR HASH</code> subpartitions,
        the <code class="literal">LINEAR</code> keyword did not appear in the
        <code class="literal">SUBPARTITION_METHOD</code> column of the
        <code class="literal">INFORMATION_SCHEMA.PARTITIONS</code> table.
       (<a href="http://bugs.mysql.com/20161" target="_top">Bug#20161</a>)</p></li><li><p>
        For a <code class="literal">DATE</code> parameter sent via a
        <code class="literal">MYSQL_TIME</code> data structure,
        <a href="apis.html#mysql-stmt-execute" title="29.2.7.10. mysql_stmt_execute()"><code class="literal">mysql_stmt_execute()</code></a>
        zeroed the hour, minute, and second members of the structure
        rather than treating them as read-only.
       (<a href="http://bugs.mysql.com/20152" target="_top">Bug#20152</a>)</p></li><li><p>
        <span><strong class="command">perror</strong></span> crashed on Solaris due to
        <code class="literal">NULL</code> return value of
        <code class="literal">strerror()</code> system call.
       (<a href="http://bugs.mysql.com/20145" target="_top">Bug#20145</a>)</p></li><li><p>
        <code class="literal">FLUSH TABLES</code> followed by a <code class="literal">LOCK
        TABLES</code> statement to lock a log table and a non-log
        table caused an infinite loop and high CPU use. Now
        <code class="literal">FLUSH TABLES</code> ignores log tables. To flush the
        log tables, use <code class="literal">FLUSH LOGS</code> instead.
       (<a href="http://bugs.mysql.com/20139" target="_top">Bug#20139</a>)</p></li><li><p>
        On Linux, <code class="literal">libmysqlclient</code> when compiled with
        yaSSL using the <span><strong class="command">icc</strong></span> compiler had a spurious
        dependency on C++ libraries.
       (<a href="http://bugs.mysql.com/20119" target="_top">Bug#20119</a>)</p></li><li><p>
        For an <code class="literal">ENUM</code> column that used the
        <code class="literal">ucs2</code> character set, using <code class="literal">ALTER
        TABLE</code> to modify the column definition caused the
        default value to be lost.
       (<a href="http://bugs.mysql.com/20108" target="_top">Bug#20108</a>)</p></li><li><p>
        For <span><strong class="command">mysql</strong></span>, escaping with backslash sometimes
        did not work.
       (<a href="http://bugs.mysql.com/20103" target="_top">Bug#20103</a>)</p></li><li><p>
        Queries on tables that were partitioned by
        <code class="literal">KEY</code> and had a <code class="literal">VARCHAR</code>
        column as the partitioning key produced an empty result set.
       (<a href="http://bugs.mysql.com/20086" target="_top">Bug#20086</a>)</p></li><li><p>
        A number of dependency issues in the RPM
        <code class="literal">bench</code> and <code class="literal">test</code> packages
        caused installation of these packages to fail.
       (<a href="http://bugs.mysql.com/20078" target="_top">Bug#20078</a>)</p></li><li><p>
        Use of <a href="functions.html#function_min"><code class="literal">MIN()</code></a> or
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a> with
        <code class="literal">GROUP BY</code> on a <code class="literal">ucs2</code> column
        could cause a server crash.
       (<a href="http://bugs.mysql.com/20076" target="_top">Bug#20076</a>)</p></li><li><p>
        <span><strong class="command">mysqld --flush</strong></span> failed to flush
        <code class="literal">MyISAM</code> table changes to disk following an
        <code class="literal">UPDATE</code> statement for which no updated column
        had an index.
       (<a href="http://bugs.mysql.com/20060" target="_top">Bug#20060</a>)</p></li><li><p>
        In MySQL 5.1.11, the <code class="option">--with-openssl</code> and
        <code class="option">--with-yassl</code> options were replaced by
        <code class="option">--with-ssl</code>. But no message was issued if the
        old options were given. Now <span><strong class="command">configure</strong></span>
        produces a message indicating that the new option should be used
        and exits.
       (<a href="http://bugs.mysql.com/20002" target="_top">Bug#20002</a>)</p></li><li><p>
        When a statement is executed that does not generate any rows, an
        extra table map event and associated binrows event would be
        generated and written to the binary log.
       (<a href="http://bugs.mysql.com/19995" target="_top">Bug#19995</a>)</p></li><li><p>
        Join conditions using index prefixes on <code class="literal">utf8</code>
        columns of <code class="literal">InnoDB</code> tables incorrectly ignored
        rows where the length of the actual value was greater than the
        length of the index prefix.
       (<a href="http://bugs.mysql.com/19960" target="_top">Bug#19960</a>)</p></li><li><p>
        <code class="literal">AUTHORS</code> and <code class="literal">CONTRIBUTORS</code>
        were not treated as reserved words.
       (<a href="http://bugs.mysql.com/19939" target="_top">Bug#19939</a>)</p></li><li><p>
        The <code class="literal">query</code> command for
        <span><strong class="command">mysqltest</strong></span> did not work.
       (<a href="http://bugs.mysql.com/19890" target="_top">Bug#19890</a>)</p></li><li><p>
        Shutting down a slave in a replication scenario where temporary
        tables are in use would cause the slave to produce a core dump.
       (<a href="http://bugs.mysql.com/19881" target="_top">Bug#19881</a>)</p></li><li><p>
        Identifiers with embedded escape characters were not handled
        correctly by some <code class="literal">SHOW</code> statements due to some
        old code that was doing some extra unescaping.
       (<a href="http://bugs.mysql.com/19874" target="_top">Bug#19874</a>)</p></li><li><p>
        When executing a <code class="literal">SELECT</code> with <code class="literal">ORDER
        BY</code> on a view that is constructed from a
        <code class="literal">SELECT</code> statement containing a stored
        function, the stored function was evaluated too many times.
       (<a href="http://bugs.mysql.com/19862" target="_top">Bug#19862</a>)</p></li><li><p>
        Using <code class="literal">SELECT</code> on a corrupt
        <code class="literal">MyISAM</code> table using the dynamic record format
        could cause a server crash.
       (<a href="http://bugs.mysql.com/19835" target="_top">Bug#19835</a>)</p></li><li><p>
        Using cursors with <code class="literal">READ COMMITTED</code> isolation
        level could cause <code class="literal">InnoDB</code> to crash.
       (<a href="http://bugs.mysql.com/19834" target="_top">Bug#19834</a>)</p></li><li><p>
        <code class="literal">CREATE DATABASE</code>, <code class="literal">RENAME
        DATABASE</code>, and <code class="literal">DROP DATABASE</code> could
        deadlock in cases where there was a global read lock.
       (<a href="http://bugs.mysql.com/19815" target="_top">Bug#19815</a>)</p></li><li><p>
        The yaSSL library bundled with <code class="literal">libmysqlclient</code>
        had some conflicts with OpenSSL. Now macros are used to rename
        the conflicting symbols to have a prefix of
        <code class="literal">ya</code>.
       (<a href="http://bugs.mysql.com/19810" target="_top">Bug#19810</a>)</p></li><li><p>
        The <code class="literal">WITH CHECK OPTION</code> was not enforced when a
        <code class="literal">REPLACE</code> statement was executed against a
        view.
       (<a href="http://bugs.mysql.com/19789" target="_top">Bug#19789</a>)</p></li><li><p>
        Multiple-table updates with <code class="literal">FEDERATED</code> tables
        could cause a server crash.
       (<a href="http://bugs.mysql.com/19773" target="_top">Bug#19773</a>)</p></li><li><p>
        On 64-bit systems, use of the <code class="literal">cp1250</code>
        character set with a primary key column in a
        <code class="literal">LIKE</code> clause caused a server crash for
        patterns having letters in the range 128..255.
       (<a href="http://bugs.mysql.com/19741" target="_top">Bug#19741</a>)</p></li><li><p>
        <span><strong class="command">make install</strong></span> tried to build files that should
        already have been built by <span><strong class="command">make all</strong></span>, causing
        a failure if installation was performed using a different
        account than the one used for the initial build.
       (<a href="http://bugs.mysql.com/19738" target="_top">Bug#19738</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> unlocked its data directory before
        committing a transaction, potentially resulting in
        non-recoverable tables if a server crash occurred before the
        commit.
       (<a href="http://bugs.mysql.com/19727" target="_top">Bug#19727</a>)</p></li><li><p>
        An issue with yaSSL prevented Connector/J clients from
        connecting to the server using a certificate.
       (<a href="http://bugs.mysql.com/19705" target="_top">Bug#19705</a>)</p></li><li><p>
        For a <code class="literal">MyISAM</code> table with a
        <code class="literal">FULLTEXT</code> index, compression with
        <span><strong class="command">myisampack</strong></span> or a check with
        <span><strong class="command">myisamchk</strong></span> after compression resulted in table
        corruption.
       (<a href="http://bugs.mysql.com/19702" target="_top">Bug#19702</a>)</p></li><li><p>
        The <code class="literal">EGNINE</code> clause was displayed in the output
        of <code class="literal">SHOW CREATE TABLE</code> for partitioned tables
        when the SQL mode included <code class="literal">no_table_options</code>.
       (<a href="http://bugs.mysql.com/19695" target="_top">Bug#19695</a>)</p></li><li><p>
        A cast problem caused incorrect results for prepared statements
        that returned float values when MySQL was compiled with
        <span><strong class="command">gcc</strong></span> 4.0.
       (<a href="http://bugs.mysql.com/19694" target="_top">Bug#19694</a>)</p></li><li><p>
        <code class="literal">EXPLAIN PARTITIONS</code> would produce illegible
        output in the <code class="literal">partitions</code> column if the length
        of text to be displayed in that column was too long. This could
        occur when very many partitions were defined for the table,
        partitions were given very long names, or due to a combination
        of the two.
       (<a href="http://bugs.mysql.com/19684" target="_top">Bug#19684</a>)</p></li><li><p>
        The <a href="apis.html#mysql-list-fields" title="29.2.3.42. mysql_list_fields()"><code class="literal">mysql_list_fields()</code></a> C API
        function returned the incorrect table name for views.
       (<a href="http://bugs.mysql.com/19671" target="_top">Bug#19671</a>)</p></li><li><p>
        If a query had a condition of the form <code class="literal">
        <em class="replaceable"><code>tableX</code></em>.<em class="replaceable"><code>key</code></em>
        =
        <em class="replaceable"><code>tableY</code></em>.<em class="replaceable"><code>key</code></em>
        </code>, which participated in equality propagation and also
        was used for <code class="literal">ref</code> access, then early
        <code class="literal">ref</code>-access <code class="literal">NULL</code> filtering
        was not peformed for the condition. This could make query
        execution slower.
       (<a href="http://bugs.mysql.com/19649" target="_top">Bug#19649</a>)</p></li><li><p>
        Re-execution of a prepared multiple-table
        <code class="literal">DELETE</code> statement that involves a trigger or
        stored function can result in a server crash.
       (<a href="http://bugs.mysql.com/19634" target="_top">Bug#19634</a>)</p></li><li><p>
        The effect of a stored function or trigger that caused
        <code class="literal">AUTO_INCREMENT</code> values to be generated for
        multiple tables was not logged properly if statement-based
        logging was used. Only the first table's value was logged,
        causing replication to fail. Under mixed logging format, this is
        dealt with by switching to row-based logging for the function or
        trigger. For statement-based logging, this remains a problem.
       (<a href="http://bugs.mysql.com/19630" target="_top">Bug#19630</a>)</p></li><li><p>
        File size specifications for <code class="literal">InnoDB</code> data
        files were case sensitive.
       (<a href="http://bugs.mysql.com/19609" target="_top">Bug#19609</a>)</p></li><li><p>
        <code class="literal">CHECK TABLE</code> on a <code class="literal">MyISAM</code>
        table briefly cleared its <code class="literal">AUTO_INCREMENT</code>
        value, while holding only a read lock. Concurrent inserts to
        that table could use the wrong <code class="literal">AUTO_INCREMENT</code>
        value. <code class="literal">CHECK TABLE</code> no longer modifies the
        <code class="literal">AUTO_INCREMENT</code> value.
       (<a href="http://bugs.mysql.com/19604" target="_top">Bug#19604</a>)</p></li><li><p>
        Some yaSSL public function names conflicted with those from
        OpenSSL, causing conflicts for applications that linked against
        both OpenSSL and a version of <code class="literal">libmysqlclient</code>
        that was built with yaSSL support. The yaSSL public functions
        now are renamed to avoid this conflict.
       (<a href="http://bugs.mysql.com/19575" target="_top">Bug#19575</a>)</p></li><li><p>
        In the <code class="literal">INFORMATION_SCHEMA.FILES</code> table, the
        <code class="literal">INITIAL_SIZE</code>,
        <code class="literal">MAXIMUM_SIZE</code>, and
        <code class="literal">AUTOEXTEND_SIZE</code> columns incorrectly were
        being stored as <code class="literal">VARCHAR</code> rather than
        <code class="literal">BIGINT</code>. .
       (<a href="http://bugs.mysql.com/19544" target="_top">Bug#19544</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> failed to increment the
        <code class="literal">handler_read_prev</code> counter.
       (<a href="http://bugs.mysql.com/19542" target="_top">Bug#19542</a>)</p></li><li><p>
        Portions of statements related to partitioning were not
        surrounded by version-specific comments by
        <code class="literal">mysqldump</code>, breaking backward compatibility
        for dump files.
       (<a href="http://bugs.mysql.com/19488" target="_top">Bug#19488</a>)</p></li><li><p>
        For row-based replication, the <code class="literal">BINLOG</code>
        statement did not lock tables properly, causing a crash for some
        table types.
       (<a href="http://bugs.mysql.com/19459" target="_top">Bug#19459</a>)</p></li><li><p>
        Column names supplied for a view created on a master server
        could be lost on a slave server.
       (<a href="http://bugs.mysql.com/19419" target="_top">Bug#19419</a>)</p></li><li><p>
        Repeated <code class="literal">DROP TABLE</code> statements in a stored
        procedure could sometimes cause the server to crash.
       (<a href="http://bugs.mysql.com/19399" target="_top">Bug#19399</a>)</p></li><li><p>
        Renaming a database to itself caused a server crash.
       (<a href="http://bugs.mysql.com/19392" target="_top">Bug#19392</a>)</p></li><li><p>
        Race conditions on certain platforms could cause the Instance
        Manager to fail to initialize.
       (<a href="http://bugs.mysql.com/19391" target="_top">Bug#19391</a>)</p></li><li><p>
        When not running in strict mode, the server failed to convert
        the invalid years portion of a <code class="literal">DATE</code> or
        <code class="literal">DATETIME</code> value to <code class="literal">'0000'</code>
        when inserting it into a table.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This fix was reverted in MySQL 5.1.18.
        </p></div><p>(<a href="http://bugs.mysql.com/19370" target="_top">Bug#19370</a>)</p><p>See also <a href="http://bugs.mysql.com/25301" target="_top">Bug#25301</a></p></li><li><p>
        Use of the <code class="option">--no-pager</code> option caused
        <span><strong class="command">mysql</strong></span> to crash.
       (<a href="http://bugs.mysql.com/19363" target="_top">Bug#19363</a>)</p></li><li><p>
        Multiple calls to a stored procedure that altered a partitioned
        <code class="literal">MyISAM</code> table would cause the server to crash.
       (<a href="http://bugs.mysql.com/19309" target="_top">Bug#19309</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE ... COALESCE PARTITION</code> did not
        delete the files associated with the partitions that were
        removed.
       (<a href="http://bugs.mysql.com/19305" target="_top">Bug#19305</a>)</p></li><li><p>
        Adding an index to a partitioned table that had been created
        using <code class="literal">AUTO_INCREMENT = <em class="replaceable"><code>value</code></em>
        </code> caused the <code class="literal">AUTO_INCREMENT</code> value to
        be reset.
       (<a href="http://bugs.mysql.com/19281" target="_top">Bug#19281</a>)</p></li><li><p>
        Multiple-table <code class="literal">DELETE</code> statements containing a
        subquery that selected from one of the tables being modified
        caused a server crash.
       (<a href="http://bugs.mysql.com/19225" target="_top">Bug#19225</a>)</p></li><li><p>
        The final parenthesis of a <code class="literal">CREATE INDEX</code>
        statement occurring in a stored procedure was omitted from the
        binary log when the stored procedure was called.
       (<a href="http://bugs.mysql.com/19207" target="_top">Bug#19207</a>)</p></li><li><p>
        An <code class="literal">ALTER TABLE</code> operation that does not need
        to copy data, when executed on a table created prior to MySQL
        4.0.25, could result in a server crash for subsequent accesses
        to the table.
       (<a href="http://bugs.mysql.com/19192" target="_top">Bug#19192</a>)</p></li><li><p>
        SSL connections using yaSSL on OpenBSD could fail.
       (<a href="http://bugs.mysql.com/19191" target="_top">Bug#19191</a>)</p></li><li><p>
        The dropping of a temporary table whose name contained a
        backtick ('<code class="literal">`</code>') character was not correctly
        written to the binary log, which also caused it not to be
        replicated correctly.
       (<a href="http://bugs.mysql.com/19188" target="_top">Bug#19188</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE ... REBUILD PARTITION</code> could cause
        the server to hang or crash.
       (<a href="http://bugs.mysql.com/19122" target="_top">Bug#19122</a>)</p></li><li><p>
        With row-based replication, replicating a statement to a slave
        where the table had additional columns relative to the master
        table did not work.
       (<a href="http://bugs.mysql.com/19069" target="_top">Bug#19069</a>)</p></li><li><p>
        Using <code class="literal">ALTER TABLE</code> on a subpartitioned table
        caused the server to crash.
       (<a href="http://bugs.mysql.com/19067" target="_top">Bug#19067</a>)</p></li><li><p>
        Trying to execute a query having a <code class="literal">WHERE</code>
        clause using <code class="literal"><em class="replaceable"><code>int_col</code></em> =
        "<em class="replaceable"><code>string_value</code></em>" OR
        <em class="replaceable"><code>int_col</code></em> IS NULL</code> on a
        partitioned table whose partitioning or subpartitioning function
        used the integer column <em class="replaceable"><code>int_col</code></em> would
        crash the server.
       (<a href="http://bugs.mysql.com/19055" target="_top">Bug#19055</a>)</p></li><li><p>
        Valgrind revealed several issues with <span><strong class="command">mysqld</strong></span>
        that were corrected: A dangling stack pointer being overwritten;
        possible uninitialized data in a string comparison; memory
        corruption in replication slaves when switching databases;
        <code class="literal">syscall()</code> write parameter pointing to an
        uninitialized byte.
       (<a href="http://bugs.mysql.com/19022" target="_top">Bug#19022</a>, <a href="http://bugs.mysql.com/20579" target="_top">Bug#20579</a>, <a href="http://bugs.mysql.com/20769" target="_top">Bug#20769</a>, <a href="http://bugs.mysql.com/20783" target="_top">Bug#20783</a>, <a href="http://bugs.mysql.com/20791" target="_top">Bug#20791</a>)</p></li><li><p>
        A redundant table map event could be generated in the binary log
        when there were no actual changes to a table being replicated.
        In addition, a slave failed to stop when attempting to replicate
        a table that did not exist on the slave.
       (<a href="http://bugs.mysql.com/18948" target="_top">Bug#18948</a>)</p></li><li><p>
        A <code class="literal">SELECT</code> with a subquery that was bound to
        the outer query over multiple columns returned different results
        when a constant was used instead of one of the dependant
        columns.
       (<a href="http://bugs.mysql.com/18925" target="_top">Bug#18925</a>)</p></li><li><p>
        It was possible using <code class="literal">ALTER EVENT ... RENAME
        ...</code> to move an event to a database on which the user
        did not have the <code class="literal">EVENT</code> privilege.
       (<a href="http://bugs.mysql.com/18897" target="_top">Bug#18897</a>)</p></li><li><p>
        When used in the <code class="literal">DO</code> clause of a
        <code class="literal">CREATE EVENT</code> statement, the statements
        <code class="literal">CREATE EVENT</code>, <code class="literal">CREATE
        FUNCTION</code>, and <code class="literal">CREATE PROCEDURE</code>
        caused the server to crash. (These statements are not permitted
        inside <code class="literal">CREATE EVENT</code>.)
       (<a href="http://bugs.mysql.com/18896" target="_top">Bug#18896</a>, <a href="http://bugs.mysql.com/16409" target="_top">Bug#16409</a>)</p></li><li><p>
        <code class="literal">BIT</code> columns in a table could cause joins that
        use the table to fail.
       (<a href="http://bugs.mysql.com/18895" target="_top">Bug#18895</a>)</p></li><li><p>
        The build process incorrectly tried to overwrite
        <code class="filename">sql/lex_hash.h</code>. This caused the build to
        fail when using a shadow link tree pointing to original sources
        that were owned by another account.
       (<a href="http://bugs.mysql.com/18888" target="_top">Bug#18888</a>)</p></li><li><p>
        Setting <code class="literal">myisam_repair_threads</code> caused any
        repair operation on a <code class="literal">MyISAM</code> table to fail to
        update the cardinality of indexes, instead making them always
        equal to 1.
       (<a href="http://bugs.mysql.com/18874" target="_top">Bug#18874</a>)</p></li><li><p>
        The MySQL server startup script
        <span><strong class="command">/etc/init.d/mysql</strong></span> (created from
        <span><strong class="command">mysql.server</strong></span>) is now marked to ensure that
        the system services <span><strong class="command">ypbind</strong></span>,
        <span><strong class="command">nscd</strong></span>, <span><strong class="command">ldap</strong></span>, and
        <span><strong class="command">NTP</strong></span> are started first (if these are
        configured on the machine).
       (<a href="http://bugs.mysql.com/18810" target="_top">Bug#18810</a>)</p></li><li><p>
        <code class="literal">InnoDB</code>: Quoted Unicode identifiers were not
        handled correctly. This included names of tables, columns, and
        foreign keys.
       (<a href="http://bugs.mysql.com/18800" target="_top">Bug#18800</a>)</p></li><li><p>
        Intermediate tables created during the execution of an
        <code class="literal">ALTER TABLE</code> statement were visible in the
        output of <code class="literal">SHOW TABLES</code>.
       (<a href="http://bugs.mysql.com/18775" target="_top">Bug#18775</a>)</p></li><li><p>
        <code class="literal">FEDERATED</code> tables raised invalid duplicate key
        errors when attempting on one server to insert rows having the
        same primary key values as rows that had been deleted from the
        linked table on the other server.
       (<a href="http://bugs.mysql.com/18764" target="_top">Bug#18764</a>)</p></li><li><p>
        Memory used by scheduled events was not freed when the events
        were dropped.
       (<a href="http://bugs.mysql.com/18683" target="_top">Bug#18683</a>)</p></li><li><p>
        The implementation for
        <a href="functions.html#function_uncompress"><code class="literal">UNCOMPRESS()</code></a> did not indicate
        that it could return <code class="literal">NULL</code>, causing the
        optimizer to do the wrong thing.
       (<a href="http://bugs.mysql.com/18539" target="_top">Bug#18539</a>)</p></li><li><p>
        Referring to a stored function qualified with the name of one
        database and tables in another database caused a “<span class="quote">table
        doesn't exist</span>” error.
       (<a href="http://bugs.mysql.com/18444" target="_top">Bug#18444</a>)</p></li><li><p>
        Identifiers could not contain bytes with a value of 255, though
        that should be allowed as of the identifier-encoding changes
        made in MySQL 5.1.6.
       (<a href="http://bugs.mysql.com/18396" target="_top">Bug#18396</a>)</p></li><li><p>
        Triggers on tables in the <code class="literal">mysql</code> database
        caused a server crash. Triggers for tables in this database now
        are disallowed.
       (<a href="http://bugs.mysql.com/18361" target="_top">Bug#18361</a>, <a href="http://bugs.mysql.com/18005" target="_top">Bug#18005</a>)</p></li><li><p>
        Incorrect type aggregation for
        <a href="functions.html#function_in"><code class="literal">IN()</code></a> and
        <a href="functions.html#operator_case"><code class="literal">CASE</code></a> expressions could lead to
        an incorrect result.
       (<a href="http://bugs.mysql.com/18360" target="_top">Bug#18360</a>)</p></li><li><p>
        The length of the pattern string prefix for
        <code class="literal">LIKE</code> operations was calculated incorrectly
        for multi-byte character sets. As a result, the scanned range
        was wider than necessary if the prefix contained any multi-byte
        characters, and rows could be missing from the result set.
       (<a href="http://bugs.mysql.com/18359" target="_top">Bug#18359</a>, <a href="http://bugs.mysql.com/16674" target="_top">Bug#16674</a>)</p></li><li><p>
        On Windows, corrected a crash stemming from differences in
        Visual C runtime library routines from POSIX behavior regarding
        invalid file descriptors.
       (<a href="http://bugs.mysql.com/18275" target="_top">Bug#18275</a>)</p></li><li><p>
        Linking the <code class="literal">pthreads</code> library to
        single-threaded MySQL libraries caused
        <code class="literal">dlopen()</code> to fail at runtime on HP-UX.
       (<a href="http://bugs.mysql.com/18267" target="_top">Bug#18267</a>)</p></li><li><p>
        The source distribution failed to compile when configured with
        the <code class="option">--with-libwrap</code> option.
       (<a href="http://bugs.mysql.com/18246" target="_top">Bug#18246</a>)</p></li><li><p>
        On Windows, terminating <span><strong class="command">mysqld</strong></span> with Control-C
        could result in a crash during shutdown.
       (<a href="http://bugs.mysql.com/18235" target="_top">Bug#18235</a>)</p></li><li><p>
        Selecting data from a <code class="literal">MEMORY</code> table with a
        <code class="literal">VARCHAR</code> column and a <code class="literal">HASH</code>
        index over it returned only the first row matched.
       (<a href="http://bugs.mysql.com/18233" target="_top">Bug#18233</a>)</p></li><li><p>
        The use of <a href="functions.html#function_min"><code class="literal">MIN()</code></a> and
        <a href="functions.html#function_max"><code class="literal">MAX()</code></a> on columns with
        an index prefix produced incorrect results in some queries.
       (<a href="http://bugs.mysql.com/18206" target="_top">Bug#18206</a>)</p></li><li><p>
        A <code class="literal">UNION</code> over more than 128
        <code class="literal">SELECT</code> statements that use an aggregate
        function failed.
       (<a href="http://bugs.mysql.com/18175" target="_top">Bug#18175</a>)</p></li><li><p>
        The optimizer did not take advantage of indexes on columns used
        for the second or third arguments of
        <a href="functions.html#operator_between"><code class="literal">BETWEEN</code></a>.
       (<a href="http://bugs.mysql.com/18165" target="_top">Bug#18165</a>)</p></li><li><p>
        Performing <code class="literal">INSERT ... SELECT ... JOIN ...
        USING</code> without qualifying the column names caused
        <code class="literal">ERROR 1052 "column 'x' in field list is
        ambiguous"</code> even in cases where the column
        references were unambiguous.
       (<a href="http://bugs.mysql.com/18080" target="_top">Bug#18080</a>)</p></li><li><p>
        An update that used a join of a table to itself and modified the
        table on both sides of the join reported the table as crashed.
       (<a href="http://bugs.mysql.com/18036" target="_top">Bug#18036</a>)</p></li><li><p>
        Race conditions on certain platforms could cause the Instance
        Manager to try to restart the same instance multiple times.
       (<a href="http://bugs.mysql.com/18023" target="_top">Bug#18023</a>)</p></li><li><p>
        Changing the definition of a <code class="literal">DECIMAL</code> column
        with <code class="literal">ALTER TABLE</code> caused loss of column
        values.
       (<a href="http://bugs.mysql.com/18014" target="_top">Bug#18014</a>)</p></li><li><p>
        For table-format output, <span><strong class="command">mysql</strong></span> did not always
        calculate columns widths correctly for columns containing
        multi-byte characters in the column name or contents.
       (<a href="http://bugs.mysql.com/17939" target="_top">Bug#17939</a>)</p></li><li><p>
        The character set was not being properly initialized for
        <a href="functions.html#function_cast"><code class="literal">CAST()</code></a> with a type
        like <code class="literal">CHAR(2) BINARY</code>, which resulted in
        incorrect results or even a server crash.
       (<a href="http://bugs.mysql.com/17903" target="_top">Bug#17903</a>)</p></li><li><p>
        Checking a <code class="literal">MyISAM</code> table (using <code class="literal">CHECK
        TABLE</code>) having a spatial index and only one row would
        wrongly indicate that the table was corrupted.
       (<a href="http://bugs.mysql.com/17877" target="_top">Bug#17877</a>)</p></li><li><p>
        For a reference to a non-existent index in <code class="literal">FORCE
        INDEX</code>, the error message referred to a column, not an
        index.
       (<a href="http://bugs.mysql.com/17873" target="_top">Bug#17873</a>)</p></li><li><p>
        A stored procedure that created and invoked a prepared statement
        was not executed when called in a mysqld init-file.
       (<a href="http://bugs.mysql.com/17843" target="_top">Bug#17843</a>)</p></li><li><p>
        It is possible to create <code class="literal">MERGE</code> tables into
        which data cannot be inserted (by not specifying a
        <code class="literal">UNION</code> clause. However, when an insert was
        attempted, the error message was confusing. Now an error occurs
        indicating that the table is read-only.
       (<a href="http://bugs.mysql.com/17766" target="_top">Bug#17766</a>)</p></li><li><p>
        Row-based replication failed when the query cache was enabled on
        the slave.
       (<a href="http://bugs.mysql.com/17620" target="_top">Bug#17620</a>)</p></li><li><p>
        Attempting to insert a string of greater than 4096 bytes into a
        <code class="literal">FEDERATED</code> table resulted in the error
        <span class="errortext">ERROR 1296 (HY000) at line 2: Got error 10000 'Error
        on remote system: 1054: Unknown column
        '<em class="replaceable"><code>string-value</code></em>' from
        FEDERATED</span>. This error was raised regardless of the
        type of column involved (<code class="literal">VARCHAR</code>,
        <code class="literal">TEXT</code>, and so on.)
       (<a href="http://bugs.mysql.com/17608" target="_top">Bug#17608</a>)</p></li><li><p>
        If a filename was specified for the <code class="option">--log</code> or
        <code class="option">--log-slow_queries</code> options but the server was
        logging to tables and not files, the server produced no error
        message.
       (<a href="http://bugs.mysql.com/17599" target="_top">Bug#17599</a>)</p></li><li><p>
        If the general log table reached a large enough file size
        (27GB), <code class="literal">SELECT COUNT(*)</code> on the table caused a
        server crash.
       (<a href="http://bugs.mysql.com/17589" target="_top">Bug#17589</a>)</p></li><li><p>
        Using the extended syntax for
        <a href="functions.html#function_trim"><code class="literal">TRIM()</code></a> — that is,
        <a href="functions.html#function_trim"><code class="literal">TRIM(... FROM ...)</code></a> — in a
        <code class="literal">SELECT</code> statement defining a view caused an
        invalid syntax error when selecting from the view.
       (<a href="http://bugs.mysql.com/17526" target="_top">Bug#17526</a>)</p></li><li><p>
        Use of the <code class="option">--prompt</code> option or
        <code class="literal">prompt</code> command caused
        <span><strong class="command">mysql</strong></span> to be unable to connect to the Instance
        Manager.
       (<a href="http://bugs.mysql.com/17485" target="_top">Bug#17485</a>)</p></li><li><p>
        <code class="literal">OPTIMIZE TABLE</code> and <code class="literal">REPAIR
        TABLE</code> yielded incorrect messages or warnings when used
        on partitioned tables.
       (<a href="http://bugs.mysql.com/17455" target="_top">Bug#17455</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> would not dump views that had
        become invalid because a table named in the view definition had
        been dropped. Instead, it quit with an error message. Now you
        can specify the <code class="option">--force</code> option to cause
        <span><strong class="command">mysqldump</strong></span> to keep going and write an SQL
        comment containing the view definition to the dump output.
       (<a href="http://bugs.mysql.com/17371" target="_top">Bug#17371</a>)</p></li><li><p>
        <code class="literal">N'xxx'</code> and <code class="literal">_utf8'xxx'</code> were
        not treated as equivalent because <code class="literal">N'xxx'</code>
        failed to unescape backslashes (<code class="literal">\</code>) and
        doubled apostrophe/single quote characters
        (<code class="literal">''</code>).
       (<a href="http://bugs.mysql.com/17313" target="_top">Bug#17313</a>)</p></li><li><p>
        Following a failed attempt to add an index to an
        <code class="literal">ARCHIVE</code> table, it was no longer possible to
        drop the database in which the table had been created.
       (<a href="http://bugs.mysql.com/17310" target="_top">Bug#17310</a>)</p></li><li><p>
        Assignments of values to variables of type
        <code class="literal">TEXT</code> were handled incorrectly in stored
        routines.
       (<a href="http://bugs.mysql.com/17225" target="_top">Bug#17225</a>)</p></li><li><p>
        Views created from prepared statements inside of stored
        procedures were created with a definition that included both
        <code class="literal">SQL_CACHE</code> and
        <code class="literal">SQL_NO_CACHE</code>.
       (<a href="http://bugs.mysql.com/17203" target="_top">Bug#17203</a>)</p></li><li><p>
        <span><strong class="command">mysqldump</strong></span> wrote an extra pair of
        <code class="literal">DROP DATABASE</code> and <code class="literal">CREATE
        DATABASE</code> statements if run with the
        <code class="option">--add-drop-database</code> option and the database
        contained views.
       (<a href="http://bugs.mysql.com/17201" target="_top">Bug#17201</a>)</p></li><li><p>
        A <span class="errortext">Table ... doesn't exist</span> error could
        occur for statements that called a function defined in another
        database.
       (<a href="http://bugs.mysql.com/17199" target="_top">Bug#17199</a>)</p></li><li><p>
        A prepared statement that altered partitioned table within a
        stored procedure failed with the error <span class="errortext">Unknown
        prepared statement handler</span>.
       (<a href="http://bugs.mysql.com/17138" target="_top">Bug#17138</a>)</p></li><li><p>
        <span><strong class="command">myisam_ftdump</strong></span> would fail when trying to open
        a MyISAM index file that you did not have write permissions to
        access, even though the command would only be reading from the
        file.
       (<a href="http://bugs.mysql.com/17122" target="_top">Bug#17122</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE</code> on a table created prior to 5.0.3
        would cause table corruption if the <code class="literal">ALTER
        TABLE</code> did one of the following:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Change the default value of a column.
          </p></li><li><p>
            Change the table comment.
          </p></li><li><p>
            Change the table password.
          </p></li></ul></div><p>(<a href="http://bugs.mysql.com/17001" target="_top">Bug#17001</a>)</p></li><li><p>
        For statements that have a <code class="literal">DEFINER</code> clause
        such as <code class="literal">CREATE TRIGGER</code> or <code class="literal">CREATE
        VIEW</code>, long usernames or hostnames could cause a buffer
        overflow.
       (<a href="http://bugs.mysql.com/16899" target="_top">Bug#16899</a>)</p></li><li><p>
        The <a href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> function returned
        invalid results when used in some <code class="literal">UNION</code>
        queries.
       (<a href="http://bugs.mysql.com/16881" target="_top">Bug#16881</a>)</p></li><li><p>
        <code class="literal">ORDER BY RAND() LIMIT 1</code> always set a user
        variable to the last possible value from the table.
       (<a href="http://bugs.mysql.com/16861" target="_top">Bug#16861</a>)</p></li><li><p>
        Compilation on Windows would fail if row based replication was
        disabled using <code class="option">--without-row-based-replication</code>.
       (<a href="http://bugs.mysql.com/16837" target="_top">Bug#16837</a>)</p></li><li><p>
        Queries containing a subquery that used aggregate functions
        could return incorrect results.
       (<a href="http://bugs.mysql.com/16792" target="_top">Bug#16792</a>)</p></li><li><p>
        Concatenating the results of multiple constant subselects
        produced incorrect results.
       (<a href="http://bugs.mysql.com/16716" target="_top">Bug#16716</a>)</p></li><li><p>
        When performing a
        <a href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a>, the server
        transformed <code class="literal">BLOB</code> columns
        <code class="literal">VARCHAR</code> columns, which could cause erroneous
        results when using Connector/J and possibly other MySQL APIs.
       (<a href="http://bugs.mysql.com/16712" target="_top">Bug#16712</a>)</p></li><li><p>
        Stored procedures did not use the character set defined for the
        database in which they were created.
       (<a href="http://bugs.mysql.com/16676" target="_top">Bug#16676</a>)</p></li><li><p>
        Some server errors were not reported to the client, causing both
        to try to read from the connection until a hang or crash
        resulted.
       (<a href="http://bugs.mysql.com/16581" target="_top">Bug#16581</a>)</p></li><li><p>
        If the files for an open table were removed at the OS level
        (external to the server), the server exited with an assertion
        failure.
       (<a href="http://bugs.mysql.com/16532" target="_top">Bug#16532</a>)</p></li><li><p>
        On Windows, a definition for
        <a href="apis.html#mysql-set-server-option" title="29.2.3.64. mysql_set_server_option()"><code class="literal">mysql_set_server_option()</code></a>
        was missing from the C client library.
       (<a href="http://bugs.mysql.com/16513" target="_top">Bug#16513</a>)</p></li><li><p>
        <span><strong class="command">mysqlcheck</strong></span> tried to check views instead of
        ignoring them.
       (<a href="http://bugs.mysql.com/16502" target="_top">Bug#16502</a>)</p></li><li><p>
        Updating a column of a <code class="literal">FEDERATED</code> table to
        <code class="literal">NULL</code> sometimes failed.
       (<a href="http://bugs.mysql.com/16494" target="_top">Bug#16494</a>)</p></li><li><p>
        For <code class="literal">SELECT ... FOR UPDATE</code> statements that
        used <code class="literal">DISTINCT</code> or <code class="literal">GROUP BY</code>
        over all key parts of a unique index (or primary key), the
        optimizer unnecessarily created a temporary table, thus losing
        the linkage to the underlying unique index values. This caused a
        <code class="literal">Result set not updatable</code> error. (The
        temporary table is unnecessary because under these circumstances
        the distinct or grouped columns must also be unique.)
       (<a href="http://bugs.mysql.com/16458" target="_top">Bug#16458</a>)</p></li><li><p>
        A scheduled event that took longer to execute than the length of
        time scheduled between successive executions could
        “<span class="quote">skip</span>” executions. For example, an event defined
        with <code class="literal">EVERY 1 SECOND</code> — but which
        required longer than 1 second to complete — might be
        executed only once every 2 seconds.
       (<a href="http://bugs.mysql.com/16417" target="_top">Bug#16417</a>)</p></li><li><p>
        A subselect used in the <code class="literal">ON SCHEDULE</code> clause of
        a <code class="literal">CREATE EVENT</code> or <code class="literal">ALTER
        EVENT</code> statement caused the server to crash, rather
        than producing an error as expected.
       (<a href="http://bugs.mysql.com/16394" target="_top">Bug#16394</a>)</p></li><li><p>
        Grant table modifications sometimes did not refresh the
        in-memory tables if the hostname was <code class="literal">''</code> or
        not specified.
       (<a href="http://bugs.mysql.com/16297" target="_top">Bug#16297</a>)</p></li><li><p>
        A subquery in the <code class="literal">WHERE</code> clause of the outer
        query and using <code class="literal">IN</code> and <code class="literal">GROUP
        BY</code> returned an incorrect result.
       (<a href="http://bugs.mysql.com/16255" target="_top">Bug#16255</a>)</p></li><li><p>
        A query could produce different results with and without and
        index, if the <code class="literal">WHERE</code> clause contained a range
        condition that used an invalid <code class="literal">DATETIME</code>
        constant.
       (<a href="http://bugs.mysql.com/16249" target="_top">Bug#16249</a>)</p></li><li><p>
        <a href="functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF()</code></a> examined only
        the date and ignored the time when the requested difference unit
        was months or quarters.
       (<a href="http://bugs.mysql.com/16226" target="_top">Bug#16226</a>)</p></li><li><p>
        Using tables from MySQL 4.x in MySQL 5.x, in particular those
        with <code class="literal">VARCHAR</code> fields and using <code class="literal">INSERT
        DELAYED</code> to update data in the table would result in
        either data corruption or a server crash.
       (<a href="http://bugs.mysql.com/16218" target="_top">Bug#16218</a>, <a href="http://bugs.mysql.com/17294" target="_top">Bug#17294</a>, <a href="http://bugs.mysql.com/16611" target="_top">Bug#16611</a>)</p></li><li><p>
        The value returned by a stored function returning a string value
        was not of the declared character set.
       (<a href="http://bugs.mysql.com/16211" target="_top">Bug#16211</a>)</p></li><li><p>
        The
        <code class="literal">index_merge</code>/<code class="literal">Intersection</code>
        optimizer could experience a memory overrun when the number of
        table columns covered by an index was sufficiently large,
        possibly resulting in a server crash.
       (<a href="http://bugs.mysql.com/16201" target="_top">Bug#16201</a>)</p></li><li><p>
        Row equalities (such as <code class="literal">WHERE (a,b) = (c,d)</code>
        were not taken into account by the optimizer, resulting in slow
        query execution. Now they are treated as conjunctions of
        equalities between row elements.
       (<a href="http://bugs.mysql.com/16081" target="_top">Bug#16081</a>)</p></li><li><p>
        Some memory leaks in the <code class="literal">libmysqld</code> embedded
        server were corrected.
       (<a href="http://bugs.mysql.com/16017" target="_top">Bug#16017</a>)</p></li><li><p>
        Values greater than 2 gigabytes used in the VALUES LESS THAN
        clause of a table partitioned by RANGE were treated as negative
        numbers.
       (<a href="http://bugs.mysql.com/16002" target="_top">Bug#16002</a>)</p></li><li><p>
        A <code class="literal">CREATE TABLE</code> that produced a <span class="errortext">The
        PARTITION function returns the wrong type</span> error also
        caused an <span class="errortext">Incorrect information in file</span>
        to be printed to <code class="literal">STDERR</code>, and a junk file to
        be left in the database directory.
       (<a href="http://bugs.mysql.com/16000" target="_top">Bug#16000</a>)</p></li><li><p>
        The <code class="literal">max_length</code> metadata value for columns
        created from <a href="functions.html#function_concat"><code class="literal">CONCAT()</code></a> could be
        incorrect when the collation of an argument differed from the
        collation of the <a href="functions.html#function_concat"><code class="literal">CONCAT()</code></a>
        itself. In some contexts such as <code class="literal">UNION</code>, this
        could lead to truncation of the column contents.
       (<a href="http://bugs.mysql.com/15962" target="_top">Bug#15962</a>)</p></li><li><p>
        When <a href="functions.html#function_now"><code class="literal">NOW()</code></a> was used in a
        <a href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> clause of
        the definition for a view, it was replaced with a constant in
        the view.
       (<a href="http://bugs.mysql.com/15950" target="_top">Bug#15950</a>)</p></li><li><p>
        The server's handling of the number of partitions or
        subpartitions specified in a <code class="literal">PARTITIONS</code> or
        <code class="literal">SUBPARTITIONS</code> clause was changed. Beginning
        with this release, the number of partitions must:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            be a positive, non-zero integer
          </p></li><li><p>
            not have any leading zeroes
          </p></li><li><p>
            not be an expression
          </p></li></ul></div><p>
        Also beginning with this version, no attempt is made to convert,
        truncate, or evaluate a <code class="literal">PARTITIONS</code> or
        <code class="literal">SUBPARTITIONS</code> value; instead, the
        <code class="literal">CREATE TABLE</code> or <code class="literal">ALTER
        TABLE</code> statement containing the
        <code class="literal">PARTITIONS</code> or
        <code class="literal">SUBPARTITIONS</code> clause now fails with an
        appropriate error message.
       (<a href="http://bugs.mysql.com/15890" target="_top">Bug#15890</a>)</p></li><li><p>
        Long multiple-row <code class="literal">INSERT</code> statements could
        take a very long time for some multi-byte character sets.
       (<a href="http://bugs.mysql.com/15811" target="_top">Bug#15811</a>)</p></li><li><p>
        The C API failed to return a status message when invoking a
        stored procedure.
       (<a href="http://bugs.mysql.com/15752" target="_top">Bug#15752</a>)</p></li><li><p>
        <span><strong class="command">mysqlimport</strong></span> sends a <code class="literal">set
        @@character_set_database=binary</code> statement to the
        server, but this is not understood by pre-4.1 servers. Now
        <span><strong class="command">mysqlimport</strong></span> encloses the statement within a
        <code class="literal">/*!40101 ... */</code> comment so that old servers
        will ignore it.
       (<a href="http://bugs.mysql.com/15690" target="_top">Bug#15690</a>)</p></li><li><p>
        <code class="literal">DELETE</code> with <code class="literal">LEFT JOIN</code> for
        <code class="literal">InnoDB</code> tables could crash the server if
        <code class="literal">innodb_locks_unsafe_for_binlog</code> was enabled.
       (<a href="http://bugs.mysql.com/15650" target="_top">Bug#15650</a>)</p></li><li><p>
        <a href="functions.html#function_bin"><code class="literal">BIN()</code></a>,
        <a href="functions.html#function_oct"><code class="literal">OCT()</code></a>, and
        <a href="functions.html#function_conv"><code class="literal">CONV()</code></a> did not work with BIT
        values.
       (<a href="http://bugs.mysql.com/15583" target="_top">Bug#15583</a>)</p></li><li><p>
        Nested natural joins worked executed correctly when executed as
        a non-prepared statement could fail with an <code class="literal">Unknown
        column '<em class="replaceable"><code>col_name</code></em>' in 'field
        list'</code> error when executed as a prepared statement, due
        to a name resolution problem.
       (<a href="http://bugs.mysql.com/15355" target="_top">Bug#15355</a>)</p></li><li><p>
        The <code class="literal">MD5()</code> and <code class="literal">SHA()</code>
        functions treat their arguments as case-sensitive strings. But
        when they are compared, their arguments were compared as
        case-insensitive strings, which leads to two function calls with
        different arguments (and thus different results) compared as
        being identical. This can lead to a wrong decision made in the
        range optimizer and thus to an incorrect result set.
       (<a href="http://bugs.mysql.com/15351" target="_top">Bug#15351</a>)</p></li><li><p>
        Invalid escape sequences in option files caused MySQL programs
        that read them to abort.
       (<a href="http://bugs.mysql.com/15328" target="_top">Bug#15328</a>)</p></li><li><p>
        <code class="literal">SHOW GRANTS FOR CURRENT_USER</code> did not return
        definer grants when executed in <code class="literal">DEFINER</code>
        context (such as within a stored prodedure defined with
        <code class="literal">SQL SECURITY DEFINER</code>), it returned the
        invoker grants.
       (<a href="http://bugs.mysql.com/15298" target="_top">Bug#15298</a>)</p></li><li><p>
        The <code class="option">--collation-server</code> server option was being
        ignored. With the fix, if you choose a non-default character set
        with <code class="option">--character-set-server</code>, you should also
        use <code class="option">--collation-server</code> to specify the
        collation.
       (<a href="http://bugs.mysql.com/15276" target="_top">Bug#15276</a>)</p></li><li><p>
        Re-executing a stored procedure with a complex stored procedure
        cursor query could lead to a server crash.
       (<a href="http://bugs.mysql.com/15217" target="_top">Bug#15217</a>)</p></li><li><p>
        The server crashed if it tried to access a
        <code class="literal">CSV</code> table for which the data file had been
        removed.
       (<a href="http://bugs.mysql.com/15205" target="_top">Bug#15205</a>)</p></li><li><p>
        When using tables containing <code class="literal">VARCHAR</code> columns
        created under MySQL 4.1 with a 5.0 or later server, for some
        queries the metadata sent to the client could have an empty
        column name.
       (<a href="http://bugs.mysql.com/14897" target="_top">Bug#14897</a>)</p></li><li><p>
        An invalid comparison between keys with index prefixes over
        multi-byte character fields could lead to incorrect result sets
        if the selected query execution plan used a range scan by an
        index prefix over a <code class="literal">UTF8</code> character field.
        This also caused incorrect results under similar circumstances
        with many other character sets.
       (<a href="http://bugs.mysql.com/14896" target="_top">Bug#14896</a>)</p></li><li><p>
        When setting a column to its implicit default value as the
        result of inserting a <code class="literal">NULL</code> into a
        <code class="literal">NOT NULL</code> column as part of a multi-row insert
        or <code class="literal">LOAD DATA</code> operation, the server returned a
        misleading warning message.
       (<a href="http://bugs.mysql.com/14770" target="_top">Bug#14770</a>)</p></li><li><p>
        For <code class="literal">BOOLEAN</code> mode full-text searches on
        non-indexed columns, <code class="literal">NULL</code> rows generated by a
        <code class="literal">LEFT JOIN</code> caused incorrect query results.
       (<a href="http://bugs.mysql.com/14708" target="_top">Bug#14708</a>, <a href="http://bugs.mysql.com/25637" target="_top">Bug#25637</a>)</p></li><li><p>
        The parser rejected queries that selected from a table twice
        using a <code class="literal">UNION</code> within a subquery. The parser
        now supports arbitrary subquery, join, and parenthesis
        operations within <code class="literal">EXISTS</code> subqueries. A
        limitation still exists for scalar subqueries: If the subquery
        contains <code class="literal">UNION</code>, the first
        <code class="literal">SELECT</code> of the <code class="literal">UNION</code> cannot
        be within parentheses. For example, <code class="literal">SELECT (SELECT a
        FROM t1 UNION SELECT b FROM t2)</code> will work, but
        <code class="literal">SELECT ((SELECT a FROM t1) UNION (SELECT b FROM
        t2))</code> will not.
       (<a href="http://bugs.mysql.com/14654" target="_top">Bug#14654</a>)</p></li><li><p>
        Using <code class="literal">SELECT</code> and a table join while running a
        concurrent <code class="literal">INSERT</code> operation would join
        incorrect rows.
       (<a href="http://bugs.mysql.com/14400" target="_top">Bug#14400</a>)</p></li><li><p>
        Prepared statements caused general log and server memory
        corruption.
       (<a href="http://bugs.mysql.com/14346" target="_top">Bug#14346</a>)</p></li><li><p>
        The binary log lacked character set information for table names
        when dropping temporary tables.
       (<a href="http://bugs.mysql.com/14157" target="_top">Bug#14157</a>)</p></li><li><p>
        <code class="literal">libmysqld</code> produced some warnings to
        <code class="literal">stderr</code> which could not be silenced. These
        warnings now are suppressed.
       (<a href="http://bugs.mysql.com/13717" target="_top">Bug#13717</a>)</p></li><li><p>
        RPM packages had spurious dependencies on Perl modules and other
        programs.
       (<a href="http://bugs.mysql.com/13634" target="_top">Bug#13634</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> locking was improved by removing a gap
        lock for the case that you try to delete the same row twice
        within a transaction.
       (<a href="http://bugs.mysql.com/13544" target="_top">Bug#13544</a>)</p></li><li><p>
        <code class="literal">REPLACE</code> statements caused activation of
        <code class="literal">UPDATE</code> triggers, not
        <code class="literal">DELETE</code> and <code class="literal">INSERT</code>
        triggers.
       (<a href="http://bugs.mysql.com/13479" target="_top">Bug#13479</a>)</p></li><li><p>
        The source distribution failed to compile when configured with
        the <code class="option">--without-geometry</code> option.
       (<a href="http://bugs.mysql.com/12991" target="_top">Bug#12991</a>)</p></li><li><p>
        With settings of <code class="literal">read_buffer_size</code> &gt;= 2G
        and <code class="literal">read_rnd_buffer_size</code> &gt;=2G,
        <code class="literal">LOAD DATA INFILE</code> failed with no error message
        or caused a server crash for files larger than 2GB.
       (<a href="http://bugs.mysql.com/12982" target="_top">Bug#12982</a>)</p></li><li><p>
        A <code class="literal">B-TREE</code> index on a <code class="literal">MEMORY</code>
        table erroneously reported duplicate entry error for multiple
        <code class="literal">NULL</code> values.
       (<a href="http://bugs.mysql.com/12873" target="_top">Bug#12873</a>)</p></li><li><p>
        Instance Manager didn't close the client socket file when
        starting a new <span><strong class="command">mysqld</strong></span> instance.
        <span><strong class="command">mysqld</strong></span> inherited the socket, causing clients
        connected to Instance Manager to hang.
       (<a href="http://bugs.mysql.com/12751" target="_top">Bug#12751</a>)</p></li><li><p>
        On Mac OS X, zero-byte <code class="literal">read()</code> or
        <code class="literal">write()</code> calls to an SMB-mounted filesystem
        could return a non-standard return value, leading to data
        corruption. Now such calls are avoided.
       (<a href="http://bugs.mysql.com/12620" target="_top">Bug#12620</a>)</p></li><li><p>
        <a href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a> and
        <a href="functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a> returned
        <code class="literal">NULL</code> when the result date was on the day
        <code class="literal">'9999-12-31'</code>.
       (<a href="http://bugs.mysql.com/12356" target="_top">Bug#12356</a>)</p></li><li><p>
        For very complex <code class="literal">SELECT</code> statements could
        create temporary tables that were too large, and for which the
        temporary files were not removed, causing subsequent queries to
        fail.
       (<a href="http://bugs.mysql.com/11824" target="_top">Bug#11824</a>)</p></li><li><p>
        After an <code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code>
        statement that updated an existing row,
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>
        could return a value not in the table.
       (<a href="http://bugs.mysql.com/11460" target="_top">Bug#11460</a>)</p></li><li><p>
        <code class="literal">USE</code> did not refresh database privileges when
        employed to re-select the current database.
       (<a href="http://bugs.mysql.com/10979" target="_top">Bug#10979</a>)</p></li><li><p>
        The server returns a more informative error message when it
        attempts to open a <code class="literal">MERGE</code> table that has been
        defined to use non-<code class="literal">MyISAM</code> tables.
       (<a href="http://bugs.mysql.com/10974" target="_top">Bug#10974</a>)</p></li><li><p>
        The type of the value returned by the
        <a href="functions.html#function_variance"><code class="literal">VARIANCE()</code></a> function
        varied according to the type of the input value. The function
        should always return a <code class="literal">DOUBLE</code> value.
       (<a href="http://bugs.mysql.com/10966" target="_top">Bug#10966</a>)</p></li><li><p>
        The same trigger error message was produced under two
        conditions: The trigger duplicated an existing trigger name, or
        the trigger duplicated an existing combination of action and
        event. Now different messages are produced for the two
        conditions so as to be more informative.
       (<a href="http://bugs.mysql.com/10946" target="_top">Bug#10946</a>)</p></li><li><p>
        A locking safety check in <code class="literal">InnoDB</code> reported a
        spurious error <span class="errortext">stored_select_lock_type is 0 inside
        ::start_stmt()</span> for <code class="literal">INSERT ...
        SELECT</code> statements in
        <code class="literal">innodb_locks_unsafe_for_binlog</code> mode. The
        safety check was removed.
       (<a href="http://bugs.mysql.com/10746" target="_top">Bug#10746</a>)</p></li><li><p>
        <code class="literal">CREATE USER</code> did not respect the 16-character
        username limit.
       (<a href="http://bugs.mysql.com/10668" target="_top">Bug#10668</a>)</p></li><li><p>
        A server or network failure with an open client connection would
        cause the client to hang even though the server was no longer
        available.
      </p><p>
        As a result of this change, the
        <code class="literal">MYSQL_OPT_READ_TIMEOUT</code> and
        <code class="literal">MYSQL_OPT_WRITE_TIMEOUT</code> options for
        <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> now
        apply to TCP/IP connections on all platforms. Previously, they
        applied only to Windows.
       (<a href="http://bugs.mysql.com/9678" target="_top">Bug#9678</a>)</p></li><li><p>
        <code class="literal">INSERT INTO ... SELECT ... LIMIT 1</code> could be
        slow because the <code class="literal">LIMIT</code> was ignored when
        selecting candidate rows.
       (<a href="http://bugs.mysql.com/9676" target="_top">Bug#9676</a>)</p></li><li><p>
        The optimizer could produce an incorrect result after
        <code class="literal">AND</code> with collations such as
        <code class="literal">latin1_german2_ci</code>,
        <code class="literal">utf8_czech_ci</code>, and
        <code class="literal">utf8_lithianian_ci</code>.
       (<a href="http://bugs.mysql.com/9509" target="_top">Bug#9509</a>)</p></li><li><p>
        The <code class="literal">DATA DIRECTORY</code> table option did not work
        for <code class="literal">TEMPORARY</code> tables.
       (<a href="http://bugs.mysql.com/8706" target="_top">Bug#8706</a>)</p></li><li><p>
        A stored procedure with a <code class="literal">CONTINUE</code> handler
        that encountered an error continued to execute a statement that
        caused an error, rather with the next statement following the
        one that caused the error.
       (<a href="http://bugs.mysql.com/8153" target="_top">Bug#8153</a>)</p></li><li><p>
        For ODBC compatibility, MySQL supports use of <code class="literal">WHERE
        <em class="replaceable"><code>col_name</code></em> IS NULL</code> for
        <code class="literal">DATE</code> or <code class="literal">DATETIME</code> columns
        that are <code class="literal">NOT NULL</code>, to allow column values of
        <code class="literal">'0000-00-00'</code> or <code class="literal">'0000-00-00
        00:00:00'</code> to be selected. However, this was not
        working for <code class="literal">WHERE</code> clauses in
        <code class="literal">DELETE</code> statements.
       (<a href="http://bugs.mysql.com/8143" target="_top">Bug#8143</a>)</p></li><li><p>
        A user variable set to a value selected from an unsigned column
        was stored as a signed value.
       (<a href="http://bugs.mysql.com/7498" target="_top">Bug#7498</a>)</p></li><li><p>
        The <code class="option">--with-collation</code> option was not honored for
        client connections.
       (<a href="http://bugs.mysql.com/7192" target="_top">Bug#7192</a>)</p></li><li><p>
        An invalid <code class="literal">GRANT</code> statement for which
        <code class="literal">Ok</code> was returned on a replication master
        caused an error on the slave and replication to fail.
       (<a href="http://bugs.mysql.com/6774" target="_top">Bug#6774</a>)</p></li><li><p>
        With <code class="literal">TRADITIONAL</code> SQL mode, assignment of
        out-of-bound values and rounding of assigned values was done
        correctly, but assignment of the same numbers represented as
        strings sometimes was handled differently.
       (<a href="http://bugs.mysql.com/6147" target="_top">Bug#6147</a>)</p></li><li><p>
        On an <code class="literal">INSERT</code> into an updatable but
        non-insertable view, an error message was issued stating that
        the view was not updatable. Now the message says the view is not
        insertable-into.
       (<a href="http://bugs.mysql.com/5505" target="_top">Bug#5505</a>)</p></li><li><p>
        <code class="literal">EXPLAIN</code> sometimes returned an incorrect
        <code class="literal">select_type</code> for a <code class="literal">SELECT</code>
        from a view, compared to the <code class="literal">select_type</code> for
        the equivalent <code class="literal">SELECT</code> from the base table.
       (<a href="http://bugs.mysql.com/5500" target="_top">Bug#5500</a>)</p></li><li><p>
        Some queries that used <code class="literal">ORDER BY</code> and
        <code class="literal">LIMIT</code> performed quickly in MySQL 3.23, but
        slowly in MySQL 4.x/5.x due to an optimizer problem.
       (<a href="http://bugs.mysql.com/4981" target="_top">Bug#4981</a>)</p></li><li><p>
        Incorporated portability fixes into the definition of
        <code class="literal">__attribute__</code> in
        <code class="filename">my_global.h</code>.
       (<a href="http://bugs.mysql.com/2717" target="_top">Bug#2717</a>)</p></li><li><p>
        User-created tables having a name beginning with
        <code class="literal">#sql</code> were not visible to <code class="literal">SHOW
        TABLES</code> and could collide with internal temporary table
        names. Now they are not hidden and do not collide.
       (<a href="http://bugs.mysql.com/1405" target="_top">Bug#1405</a>)</p></li><li><p>
        not have any leading zeroes
      </p></li><li><p>
        not be an expression
      </p></li><li><p>
        be a positive, non-zero integer
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-11"></a>C.1.19. Changes in  MySQL 5.1.11 (26 May 2006)</h3></div></div></div><p class="release-level">
      This is a new Beta development release, fixing recently discovered
      bugs.
    </p><p>This section documents all changes and bug fixes that have been applied since the last official MySQL release. If you would like to receive more fine-grained and personalized <span class="emphasis"><em>update alerts</em></span> about fixes that are relevant to the version and features you use, please consider subscribing to <span class="emphasis"><em>MySQL Enterprise</em></span> (a commercial MySQL offering). For more details please see <a href="http://www.mysql.com/products/enterprise" target="_top">http://www.mysql.com/products/enterprise</a>.</p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The Event Scheduler can now be in one of three states (on, off,
        or the new suspended state). In addition, due to the fact that
        <code class="literal">SET GLOBAL event_scheduler;</code> now acts in a
        synchronous rather than asynchronous manner, the Event Scheduler
        thread can be no longer be activated or deactivated at run time.
      </p><p>
        For more information regarding these changes, see
        <a href="events.html#events-overview" title="25.1. Event Scheduler Overview">Section 25.1, “Event Scheduler Overview”</a>.
       (<a href="http://bugs.mysql.com/17619" target="_top">Bug#17619</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The limit of 2048 ordered indexes per cluster has been lifted.
        There is now no upper limit on the number of ordered indexes
        (including <code class="literal">AUTO_INCREMENT</code> columns) that may
        be used.
       (<a href="http://bugs.mysql.com/14509" target="_top">Bug#14509</a>)</p></li><li><p>
        Added the <code class="literal">log_queries_not_using_indexes</code>
        system variable.
       (<a href="http://bugs.mysql.com/19616" target="_top">Bug#19616</a>)</p></li><li><p>
        Added the <code class="literal">ssl_ca</code>,
        <code class="literal">ssl_capath</code>, <code class="literal">ssl_cert</code>,
        <code class="literal">ssl_cipher</code>, and <code class="literal">ssl_key</code>
        system variables, which display the values given via the
        corresponding command options. See
        <a href="server-administration.html#ssl-options" title="5.5.7.3. SSL Command Options">Section 5.5.7.3, “SSL Command Options”</a>.
       (<a href="http://bugs.mysql.com/19606" target="_top">Bug#19606</a>)</p></li><li><p>
        The <code class="literal">ENABLE KEYS</code> and <code class="literal">DISABLE
        KEYS</code> clauses for the <code class="literal">ALTER TABLE</code>
        statement are now supported for partitioned tables.
       (<a href="http://bugs.mysql.com/19502" target="_top">Bug#19502</a>)</p></li><li><p>
        Added the <code class="option">--ssl-verify-server-cert</code> option to
        MySQL client programs. This option causes the server's Common
        Name value in its certificate to be verified against the
        hostname used when connecting to the server, and the connection
        is rejected if there is a mismatch. Added
        <code class="literal">MYSQL_OPT_SSL_VERIFY_SERVER_CERT</code> option for
        the <a href="apis.html#mysql-options" title="29.2.3.49. mysql_options()"><code class="literal">mysql_options()</code></a> C API
        function to enable this verification. This feature can be used
        to prevent man-in-the-middle attacks. Verification is disabled
        by default.
       (<a href="http://bugs.mysql.com/17208" target="_top">Bug#17208</a>)</p></li><li><p>
        The default for the <code class="literal">innodb_thread_concurrency</code>
        system variable was changed to <code class="literal">8</code>.
       (<a href="http://bugs.mysql.com/15868" target="_top">Bug#15868</a>)</p></li><li><p>
        It is now possible to use
        <code class="literal">NEW.<em class="replaceable"><code>var_name</code></em></code>
        values within triggers as <code class="literal">INOUT</code> parameters to
        stored procedures.
       (<a href="http://bugs.mysql.com/14635" target="_top">Bug#14635</a>)</p></li><li><p>
        Added the <code class="option">--angel-pid-file</code> option to
        <span><strong class="command">mysqlmanager</strong></span> for specifying the file in which
        the angel process records its process ID when
        <span><strong class="command">mysqlmanager</strong></span> runs in daemon mode.
       (<a href="http://bugs.mysql.com/14106" target="_top">Bug#14106</a>)</p></li><li><p>
        Previously, to build MySQL from source with SSL support enabled,
        you would invoke <span><strong class="command">configure</strong></span> with either the
        <code class="option">--with-openssl</code> or <code class="option">--with-yassl</code>
        option. Those options both have been replaced by the
        <code class="option">--with-ssl</code> option. By default,
        <code class="option">--with-ssl</code> causes the bundled yaSSL library to
        be used. To select OpenSSL instead, give the option as
        <code class="option">--with-ssl=<em class="replaceable"><code>path</code></em> </code>,
        where <em class="replaceable"><code>path</code></em> is the directory where the
        OpenSSL header files and libraries are located.
      </p></li><li><p>
        The <a href="apis.html#mysql-get-ssl-cipher" title="29.2.3.33. mysql_get_ssl_cipher()"><code class="literal">mysql_get_ssl_cipher()</code></a> C
        API function was added.
      </p></li><li><p>
        <span><strong class="command">mysql_explain_log</strong></span> (a third-party program) is
        no longer included in MySQL distributions.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        An SQL-injection security hole has been found in multi-byte
        encoding processing. The bug was in the server, incorrectly
        parsing the string escaped with the
        <a href="apis.html#mysql-real-escape-string" title="29.2.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
        C API function.
      </p><p>
        This vulnerability was discovered and reported by Josh Berkus
        <code class="email">&lt;<a href="mailto:josh@postgresql.org">josh@postgresql.org</a>&gt;</code> and Tom Lane
        <code class="email">&lt;<a href="mailto:tgl@sss.pgh.pa.us">tgl@sss.pgh.pa.us</a>&gt;</code> as part of the inter-project
        security collaboration of the OSDB consortium. For more
        information about SQL injection, please see the following text.
      </p><p><b>Discussion. </b>
          An SQL injection security hole has been found in multi-byte
          encoding processing. An SQL injection security hole can
          include a situation whereby when a user supplied data to be
          inserted into a database, the user might inject SQL statements
          into the data that the server will execute. With regards to
          this vulnerability, when character set-unaware escaping is
          used (for example, <code class="literal">addslashes()</code> in PHP), it
          is possible to bypass the escaping in some multi-byte
          character sets (for example, SJIS, BIG5 and GBK). As a result,
          a function such as <code class="literal">addslashes()</code> is not able
          to prevent SQL-injection attacks. It is impossible to fix this
          on the server side. The best solution is for applications to
          use character set-aware escaping offered by a function such
          <a href="apis.html#mysql-real-escape-string" title="29.2.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>.
        </p><p>
        However, a bug was detected in how the MySQL server parses the
        output of
        <a href="apis.html#mysql-real-escape-string" title="29.2.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>. As
        a result, even when the character set-aware function
        <a href="apis.html#mysql-real-escape-string" title="29.2.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
        was used, SQL injection was possible. This bug has been fixed.
      </p><p><b>Workarounds. </b>
          If you are unable to upgrade MySQL to a version that includes
          the fix for the bug in
          <a href="apis.html#mysql-real-escape-string" title="29.2.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
          parsing, but run MySQL 5.0.1 or higher, you can use the
          <code class="literal">NO_BACKSLASH_ESCAPES</code> SQL mode as a
          workaround. (This mode was introduced in MySQL 5.0.1.)
          <code class="literal">NO_BACKSLASH_ESCAPES</code> enables an SQL
          standard compatibility mode, where backslash is not considered
          a special character. The result will be that queries will
          fail.
        </p><p>
        To set this mode for the current connection, enter the following
        SQL statement:
      </p><pre class="programlisting">SET sql_mode='NO_BACKSLASH_ESCAPES';
</pre><p>
        You can also set the mode globally for all clients:
      </p><pre class="programlisting">SET GLOBAL sql_mode='NO_BACKSLASH_ESCAPES';
</pre><p>
        This SQL mode also can be enabled automatically when the server
        starts by using the command-line option
        <code class="option">--sql-mode=NO_BACKSLASH_ESCAPES</code> or by setting
        <code class="literal">sql-mode=NO_BACKSLASH_ESCAPES</code> in the server
        option file (for example, <code class="filename">my.cnf</code> or
        <code class="filename">my.ini</code>, depending on your system).
       (<a href="http://bugs.mysql.com/8378" target="_top">Bug#8378</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-2753" target="_top">CVE-2006-2753</a>)</p><p>See also <a href="http://bugs.mysql.com/8303" target="_top">Bug#8303</a></p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">SELECT
        MIN(<em class="replaceable"><code>unique_column</code></em>)</code> from a
        Cluster table with user-defined partitioning crashed the server.
       (<a href="http://bugs.mysql.com/18730" target="_top">Bug#18730</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Running <code class="literal">ALL START</code> in the
        <code class="literal">NDB</code> management client or restarting multiple
        nodes simultaneously could under some circumstances cause the
        cluster to crash.
       (<a href="http://bugs.mysql.com/19930" target="_top">Bug#19930</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Replication): Memory was not freed after some <code class="literal">ALTER
        TABLE</code> operations, which could cause
        <span><strong class="command">mysqld</strong></span> processes to crash.
       (<a href="http://bugs.mysql.com/19885" target="_top">Bug#19885</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (NDBAPI): On big-endian platforms,
        <code class="literal">NdbOperation::write_attr()</code> did not update
        32-bit fields correctly.
       (<a href="http://bugs.mysql.com/19537" target="_top">Bug#19537</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">TRUNCATE</code> failed on tables having
        <code class="literal">BLOB</code> or <code class="literal">TEXT</code> columns with
        the error <span class="errortext">Lock wait timeout exceeded</span>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This issue affected both in-memory and Disk Data tables.
        </p></div><p>(<a href="http://bugs.mysql.com/19201" target="_top">Bug#19201</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">ALTER TABLE ENGINE=...</code> failed when used to
        change a MySQL Cluster table having no explicit primary key to
        use a different storage engine.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          As a consequence of this fix, <code class="literal">SHOW CREATE
          TABLE</code> no longer displays auto-partitioning
          information for <code class="literal">NDBCLUSTER</code> tables.
        </p></div><p>(<a href="http://bugs.mysql.com/19010" target="_top">Bug#19010</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (NDBAPI): The <code class="literal">Ndb::dropEventOperation()</code>
        method failed to clean up all objects used, which could cause
        memory leaks to occur.
       (<a href="http://bugs.mysql.com/17610" target="_top">Bug#17610</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Using “<span class="quote">stale</span>” <span><strong class="command">mysqld</strong></span>
        <code class="filename">.FRM</code> files could cause a newly-restored
        cluster to fail. This situation could arise when restarting a
        MySQL Cluster using the <code class="option">--intial</code> option while
        leaving connected <span><strong class="command">mysqld</strong></span> processes running.
       (<a href="http://bugs.mysql.com/16875" target="_top">Bug#16875</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A Cluster whose storage nodes were installed from the
        <code class="filename">MySQL-ndb-storage-<em class="replaceable"><code>*</code></em>
        </code> RPMs could not perform <code class="literal">CREATE</code> or
        <code class="literal">ALTER</code> operations that made use of non-default
        character sets or collations.
       (<a href="http://bugs.mysql.com/14918" target="_top">Bug#14918</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Data node failures could cause excessive CPU usage by
        <span><strong class="command">ndb_mgmd</strong></span>.
       (<a href="http://bugs.mysql.com/13987" target="_top">Bug#13987</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        <span><strong class="command">mysqld</strong></span> processes did not always detect
        cluster shutdown, leading to issues with Cluster replication and
        schema distribution.
       (<a href="http://bugs.mysql.com/19395" target="_top">Bug#19395</a>)</p></li><li><p>
        The <code class="literal">Data_free</code> column in the output of
        <code class="literal">SHOW TABLE STATUS</code> always displayed 0 for
        partitioned tables.
       (<a href="http://bugs.mysql.com/19501" target="_top">Bug#19501</a>)</p></li><li><p>
        Altering a <code class="literal">VARCHAR</code> column in a
        <code class="literal">MyISAM</code> table to make it longer could cause
        corruption of the following column.
       (<a href="http://bugs.mysql.com/19386" target="_top">Bug#19386</a>)</p></li><li><p>
        In was not possible to invoke a stored routine containing
        dynamic SQL from a scheduled event.
       (<a href="http://bugs.mysql.com/19264" target="_top">Bug#19264</a>)</p></li><li><p>
        Adding an index to a table created using partitioning by
        <code class="literal">KEY</code> and the <code class="literal">MEMORY</code> storage
        engine caused the server to crash.
       (<a href="http://bugs.mysql.com/19140" target="_top">Bug#19140</a>)</p></li><li><p>
        Use of uninitialized user variables in a subquery in the
        <code class="literal">FROM</code> clause resulted in invalid entries in
        the binary log.
       (<a href="http://bugs.mysql.com/19136" target="_top">Bug#19136</a>)</p></li><li><p>
        A <code class="literal">CREATE TABLE</code> statement that created a table
        from a materialized view did not inherit default values from the
        underlying table.
       (<a href="http://bugs.mysql.com/19089" target="_top">Bug#19089</a>)</p></li><li><p>
        Premature optimization of nested subqueries in the
        <code class="literal">FROM</code> clause that refer to aggregate functions
        could lead to incorrect results.
       (<a href="http://bugs.mysql.com/19077" target="_top">Bug#19077</a>)</p></li><li><p>
        When creating a table using <code class="literal">CREATE TABLE ... PARTITION
        BY ... SELECT ...</code>, the partitioning clause was
        ignored.
       (<a href="http://bugs.mysql.com/19062" target="_top">Bug#19062</a>)</p></li><li><p>
        For dates with 4-digit year parts less than 200, an implicit
        conversion to add a century was applied for date arithmetic
        performed with <a href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a>,
        <a href="functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a>,
        <code class="literal">+ INTERVAL</code>, and <code class="literal">-
        INTERVAL</code>. (For example,
        <a href="functions.html#function_date-add"><code class="literal">DATE_ADD('0050-01-01 00:00:00',
        INTERVAL 0 SECOND)</code></a> became <code class="literal">'2050-01-01
        00:00:00'</code>.) Now these operations return
        <code class="literal">NULL</code> rather than an incorrect
        non-<code class="literal">NULL</code> value.
       (<a href="http://bugs.mysql.com/18997" target="_top">Bug#18997</a>)</p></li><li><p>
        <code class="literal">BLOB</code> or <code class="literal">TEXT</code> arguments to
        or values returned from stored functions were not copied
        properly if too long and could become garbled.
       (<a href="http://bugs.mysql.com/18587" target="_top">Bug#18587</a>)</p></li><li><p>
        The embedded server crashed with row-based replication enabled.
       (<a href="http://bugs.mysql.com/18518" target="_top">Bug#18518</a>)</p></li><li><p>
        The client libraries were not compiled for position-independent
        code on Solaris-SPARC and AMD x86_64 platforms.
       (<a href="http://bugs.mysql.com/18091" target="_top">Bug#18091</a>, <a href="http://bugs.mysql.com/13159" target="_top">Bug#13159</a>, <a href="http://bugs.mysql.com/14202" target="_top">Bug#14202</a>)</p></li><li><p>
        Returning the value of a system variable from a stored function
        caused a server crash.
       (<a href="http://bugs.mysql.com/18037" target="_top">Bug#18037</a>)</p></li><li><p>
        Revised memory allocation for local objects within stored
        functions and triggers to avoid memory leak for repeated
        function or trigger invocation.
       (<a href="http://bugs.mysql.com/17260" target="_top">Bug#17260</a>)</p></li><li><p>
        Symlinking <code class="filename">.mysql_history</code> to
        <code class="filename">/dev/null</code> to suppress statement history
        saving by <span><strong class="command">mysql</strong></span> did not work.
        (<span><strong class="command">mysql</strong></span> deleted the symlink and recreated
        <code class="filename">.mysql_history</code> as a regular file, and then
        wrote history to it.)
       (<a href="http://bugs.mysql.com/16803" target="_top">Bug#16803</a>)</p></li><li><p>
        <a href="functions.html#function_is-used-lock"><code class="literal">IS_USED_LOCK()</code></a> could return an
        incorrect connection identifier.
       (<a href="http://bugs.mysql.com/16501" target="_top">Bug#16501</a>)</p></li><li><p>
        Simultaneous scheduled events whose actions conflicted with one
        another could crash the server.
       (<a href="http://bugs.mysql.com/16428" target="_top">Bug#16428</a>)</p></li><li><p>
        Concurrent reading and writing of privilege structures could
        crash the server.
       (<a href="http://bugs.mysql.com/16372" target="_top">Bug#16372</a>)</p></li><li><p>
        The server no longer uses a signal handler for signal 0 because
        it could cause a crash on some platforms.
       (<a href="http://bugs.mysql.com/15869" target="_top">Bug#15869</a>)</p></li><li><p>
        <code class="literal">EXPLAIN ... SELECT INTO</code> caused the client to
        hang.
       (<a href="http://bugs.mysql.com/15463" target="_top">Bug#15463</a>)</p></li><li><p>
        <code class="literal">CREATE TABLE ... SELECT ...</code> statements that
        used a stored function explicitly or implicitly (through a view)
        resulted in a <code class="literal">Table not locked</code> error.
       (<a href="http://bugs.mysql.com/15137" target="_top">Bug#15137</a>, <a href="http://bugs.mysql.com/12472" target="_top">Bug#12472</a>)</p></li><li><p>
        Display better error message for <code class="literal">ALTER TABLE</code>
        operations that will result in duplicate keys due to
        <code class="literal">AUTO_INCREMENT</code> resequencing.
       (<a href="http://bugs.mysql.com/14573" target="_top">Bug#14573</a>)</p></li><li><p>
        The result from <a href="functions.html#function_conv"><code class="literal">CONV()</code></a> is a
        string, but was not always treated the same way as a string when
        converted to a real value for an arithmetic operation.
       (<a href="http://bugs.mysql.com/13975" target="_top">Bug#13975</a>)</p></li><li><p>
        Within a trigger, <code class="literal">SET</code> used the SQL mode of
        the invoking statement, not the mode in effect at trigger
        creation time.
       (<a href="http://bugs.mysql.com/6951" target="_top">Bug#6951</a>)</p></li><li><p>
        Corrected several problems with the treatment of the
        <code class="option">--log-error</code> option by
        <span><strong class="command">mysqld_safe</strong></span>. These problems were manifest as
        differences from <span><strong class="command">mysqld</strong></span> in error log
        handling.
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            If a filename was given for <code class="option">--log-error</code>,
            <span><strong class="command">mysqld_safe</strong></span> ignored it and did not pass
            it to <span><strong class="command">mysqld</strong></span>, which then wrote error
            information to <code class="literal">stderr</code> and resulted in
            incorrect log rotation when <code class="literal">FLUSH LOGS</code>
            was used.
          </p></li><li><p>
            <span><strong class="command">mysql_safe</strong></span> now adds
            <code class="filename">.err</code> to the end of the filename if no
            extension is present (the same as
            <span><strong class="command">mysqld</strong></span>).
          </p></li><li><p>
            <span><strong class="command">mysqld_safe</strong></span> treated a relative pathname
            as relative to its own current working directory. Now it
            treats a relative pathname as relative to the data directory
            (the same as <span><strong class="command">mysqld</strong></span>).
          </p></li></ul></div><p>
        In addition, some argument quoting problems were corrected.
       (<a href="http://bugs.mysql.com/6061" target="_top">Bug#6061</a>)</p></li><li><p>
        The <code class="literal">basedir</code> and <code class="literal">tmpdir</code>
        system variables could not be accessed via
        <code class="literal">@@<em class="replaceable"><code>var_name</code></em></code> syntax.
       (<a href="http://bugs.mysql.com/1039" target="_top">Bug#1039</a>)</p></li><li><p>
        <span><strong class="command">mysqld_safe</strong></span> treated a relative pathname as
        relative to its own current working directory. Now it treats a
        relative pathname as relative to the data directory (the same as
        <span><strong class="command">mysqld</strong></span>).
      </p></li><li><p>
        <span><strong class="command">mysql_safe</strong></span> now adds <code class="filename">.err</code>
        to the end of the filename if no extension is present (the same
        as <span><strong class="command">mysqld</strong></span>).
      </p></li><li><p>
        If a filename was given for <code class="option">--log-error</code>,
        <span><strong class="command">mysqld_safe</strong></span> ignored it and did not pass it to
        <span><strong class="command">mysqld</strong></span>, which then wrote error information to
        <code class="literal">stderr</code> and resulted in incorrect log rotation
        when <code class="literal">FLUSH LOGS</code> was used.
      </p></li><li><p>
        The patch for <a href="http://bugs.mysql.com/8303" target="_top">Bug#8303</a> broke the fix for <a href="http://bugs.mysql.com/8378" target="_top">Bug#8378</a> and was
        reverted.
      </p><p>
        In string literals with an escape character
        (<code class="literal">\</code>) followed by a multi-byte character that
        had (<code class="literal">\</code>) as its second byte, the literal was
        not interpreted correctly. Now only next byte now is escaped,
        and not the entire multi-byte character. This means it a strict
        reverse of the
        <a href="apis.html#mysql-real-escape-string" title="29.2.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
        function.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-10"></a>C.1.20. Changes in  MySQL 5.1.10 (Not released)</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        This was an internal release only, and no binaries were
        published.
      </p></div><p>
      MySQL 5.1.10 includes the patches for recently reported security
      vulnerabilites in the MySQL client-server protocol. We would like
      to thank Stefano Di Paola <code class="email">&lt;<a href="mailto:stefano.dipaola@wisec.it">stefano.dipaola@wisec.it</a>&gt;</code>
      for finding and reporting these to us.
    </p><p>This section documents all changes and bug fixes that have been applied since the last official MySQL release. If you would like to receive more fine-grained and personalized <span class="emphasis"><em>update alerts</em></span> about fixes that are relevant to the version and features you use, please consider subscribing to <span class="emphasis"><em>MySQL Enterprise</em></span> (a commercial MySQL offering). For more details please see <a href="http://www.mysql.com/products/enterprise" target="_top">http://www.mysql.com/products/enterprise</a>.</p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Enhancement</strong></span>: 
        Added the global <code class="literal">max_prepared_stmt_count</code>
        system variable to limit the total number of prepared statements
        in the server. This limits the potential for denial-of-service
        attacks based on running the server out of memory by preparing
        huge numbers of statements. The current number of prepared
        statements is available through the
        <code class="literal">prepared_stmt_count</code> system variable.
       (<a href="http://bugs.mysql.com/16365" target="_top">Bug#16365</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        It is now possible to restore a MySQL Cluster backup between
        big-endian and little-endian machines.
       (<a href="http://bugs.mysql.com/19255" target="_top">Bug#19255</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        It is now possible to perform a partial start of a cluster. That
        is, it is now possible to bring up the cluster without first
        running <span><strong class="command">ndbd <code class="option">--initial</code></strong></span> on
        all configured data nodes.
       (<a href="http://bugs.mysql.com/18606" target="_top">Bug#18606</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        It is now possible to install MySQL with Cluster support to a
        non-default location and change the search path for font
        description files using either the <code class="option">--basedir</code> or
        <code class="option">--character-sets-dir</code> options. (Previously in
        MySQL 5.1, <span><strong class="command">ndbd</strong></span> searched only the default
        path for character sets.)
      </p></li><li><p><span class="bold"><strong>Packaging</strong></span>: 
        The
        <code class="literal">MySQL-shared-compat-5.1.<em class="replaceable"><code>X</code></em>-.i386.rpm</code>
        shared compatibility RPMs no longer contain libraries for MySQL
        5.0. This avoids a conflict because the 5.0 and 5.1 libraries
        share the same <code class="literal">soname</code> number. They now
        contain libraries for MySQL 3.23, 4.0, 4.1, and 5.1.
       (<a href="http://bugs.mysql.com/19288" target="_top">Bug#19288</a>)</p></li><li><p>
        SQL syntax for prepared statements now supports <code class="literal">ANALYZE
        TABLE</code>, <code class="literal">OPTIMIZE TABLE</code>, and
        <code class="literal">REPAIR TABLE</code>.
       (<a href="http://bugs.mysql.com/19308" target="_top">Bug#19308</a>)</p></li><li><p>
        The <code class="literal">ONLY_FULL_GROUP_BY</code> SQL mode now also
        applies to the <code class="literal">HAVING</code> clause. That is,
        columns not named in the <code class="literal">GROUP BY</code> clause
        cannot be used in the <code class="literal">HAVING</code> clause if not
        used in an aggregate function.
       (<a href="http://bugs.mysql.com/18739" target="_top">Bug#18739</a>)</p></li><li><p>
        XPath expressions passed to the
        <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> and
        <a href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a> functions
        can now include the colon character (“<span class="quote">
        <code class="literal">:</code> </span>”). This enables use of these
        functions with XML which employs namespaces.
       (<a href="http://bugs.mysql.com/18170" target="_top">Bug#18170</a>)</p></li><li><p>
        On Windows, some names such as <code class="literal">nul</code>,
        <code class="literal">prn</code>, and <code class="literal">aux</code> could not be
        used as filenames because they are reserved as device names.
        These are now allowable names in MySQL. They are encoded by
        appending <code class="literal">@@@</code> to the name when the server
        creates the corresponding file or directory. This occurs on all
        platforms for portability of the corresponding database object
        between platforms.
       (<a href="http://bugs.mysql.com/17870" target="_top">Bug#17870</a>)</p></li><li><p>
        The bundled yaSSL library was upgraded to version 1.3.5. This
        improves handling of certain problems with SSL-related command
        options.
       (<a href="http://bugs.mysql.com/17737" target="_top">Bug#17737</a>)</p></li><li><p>
        You must now have the <code class="literal">DROP</code> privilege to drop
        table partitions.
       (<a href="http://bugs.mysql.com/17139" target="_top">Bug#17139</a>)</p></li><li><p>
        Server and clients ignored the <code class="option">--sysconfdir</code>
        option that was passed to <span><strong class="command">configure</strong></span>. The
        directory specified by this option, if set, now is used as one
        of the standard locations in which to look for option files.
       (<a href="http://bugs.mysql.com/15069" target="_top">Bug#15069</a>)</p></li><li><p>
        In result set metadata, the
        <code class="literal">MYSQL_FIELD.length</code> value for
        <code class="literal">BIT</code> columns now is reported in number of
        bits. For example, the value for a <code class="literal">BIT(9)</code>
        column is 9. (Formerly, the value was related to number of
        bytes.)
       (<a href="http://bugs.mysql.com/13601" target="_top">Bug#13601</a>)</p></li><li><p>
        Added the <code class="literal">KEY_BLOCK_SIZE</code> table option and
        index option. This can be used in <code class="literal">CREATE
        TABLE</code>, <code class="literal">ALTER TABLE</code>, and
        <code class="literal">CREATE INDEX</code> statements to provide a hint to
        the storage engine about the size to use for index key blocks.
        The engine is allowed to change the value if necessary.
      </p></li><li><p>
        Added the <code class="literal">sql_big_selects</code> system variable to
        the output of <code class="literal">SHOW VARIABLES</code>.
      </p></li><li><p>
        The <span><strong class="command">mysql_upgrade</strong></span> command has been converted
        from a shell script to a C program, so it is available on
        non-Unix systems such as Windows. This program should be run for
        each MySQL upgrade. See <a href="programs.html#mysql-upgrade" title="4.4.8. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.8, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
      </p></li><li><p>
        Added the <code class="literal">REFERENTIAL_CONSTRAINTS</code> table to
        <code class="literal">INFORMATION_SCHEMA</code>. It provides information
        about foreign keys.
      </p></li><li><p>
        Added the <code class="literal">have_dynamic_loading</code> system
        variable that indicates whether the server supports dynamic
        loading of plugins.
      </p></li><li><p>
        Added <code class="option">--debug</code> option to Instance Manager.
      </p></li><li><p>
        Binary distributions that include SSL support now are built
        using yaSSL when possible.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        A <code class="literal">NUL</code> byte within a comment in a statement
        string caused the rest of the string not to be written to the
        query log, allowing logging to be bypassed.
       (<a href="http://bugs.mysql.com/17667" target="_top">Bug#17667</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-0903" target="_top">CVE-2006-0903</a>)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        A malicious client, using specially crafted invalid
        <code class="literal">COM_TABLE_DUMP</code> packets was able to trigger an
        exploitable buffer overflow on the server. Thanks to Stefano Di
        Paola <code class="email">&lt;<a href="mailto:stefano.dipaola@wisec.it">stefano.dipaola@wisec.it</a>&gt;</code> for finding and
        reporting this bug.
       (<a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-1518" target="_top">CVE-2006-1518</a>)</p></li><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        A malicious client, using specially crafted invalid login or
        <code class="literal">COM_TABLE_DUMP</code> packets was able to read
        uninitialized memory, which potentially, though unlikely in
        MySQL, could have led to an information disclosure. (, ) Thanks
        to Stefano Di Paola <code class="email">&lt;<a href="mailto:stefano.dipaola@wisec.it">stefano.dipaola@wisec.it</a>&gt;</code> for
        finding and reporting this bug.
       (<a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-1516" target="_top">CVE-2006-1516</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-1517" target="_top">CVE-2006-1517</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A 5.1.6 or newer server did not read local checkpoints recorded
        by any other 5.1 version, thus preventing a system restart
        following an upgrade.
       (<a href="http://bugs.mysql.com/19333" target="_top">Bug#19333</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Concurrent <code class="literal">INSERT</code> and
        <code class="literal">ROLLBACK</code> statements from different
        connections could cause node failures.
       (<a href="http://bugs.mysql.com/19245" target="_top">Bug#19245</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Disk Data): Running an <code class="literal">INSERT</code> and a
        <code class="literal">DELETE</code> on a Disk Data table in the same
        transaction could cause a deadlock.
       (<a href="http://bugs.mysql.com/19244" target="_top">Bug#19244</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Starting <span><strong class="command">mysqld</strong></span> without
        <code class="option">--log-bin</code> caused DDL statements on
        <code class="literal">NDB</code> tables to time out.
       (<a href="http://bugs.mysql.com/19214" target="_top">Bug#19214</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (NDBAPI): Passing a nonexistent index name to
        <code class="literal">NdbIndexScanOperation::setBound()</code> caused a
        segmentation fault.
       (<a href="http://bugs.mysql.com/19088" target="_top">Bug#19088</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">mysql-test-run.pl</strong></span> started
        <code class="literal">NDB</code> even for test cases that did not need it.
       (<a href="http://bugs.mysql.com/19083" target="_top">Bug#19083</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Stopping multiple nodes could cause node failure handling not to
        be completed.
       (<a href="http://bugs.mysql.com/19039" target="_top">Bug#19039</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The Cluster binlog <span><strong class="command">mysqld</strong></span> accepted updates
        even though the binary log was not set up, which could lead to
        updates missing from the binary log.
       (<a href="http://bugs.mysql.com/18932" target="_top">Bug#18932</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">mysqld</strong></span> could crash when attempting an update
        if the cluster had failed previously.
       (<a href="http://bugs.mysql.com/18798" target="_top">Bug#18798</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An <code class="literal">INSERT</code> or <code class="literal">UPDATE</code> of
        more than 128 bytes of data in a 4-replica cluster could cause
        data nodes to crash.
       (<a href="http://bugs.mysql.com/18622" target="_top">Bug#18622</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Disk Data): <code class="literal">CREATE LOGFILE GROUP</code> accepted
        values other than <code class="literal">NDB</code> or
        <code class="literal">NDBCLUSTER</code> in the <code class="literal">ENGINE</code>
        clause.
       (<a href="http://bugs.mysql.com/18604" target="_top">Bug#18604</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Disk Data): Omitting the required <code class="literal">ENGINE</code>
        clause from a <code class="literal">CREATE LOGFILE GROUP</code> or
        <code class="literal">CREATE TABLESPACE</code> statement caused the server
        to crash. An appropriate error message is now returned instead.
       (<a href="http://bugs.mysql.com/18603" target="_top">Bug#18603</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Queries using <code class="literal">ORDER BY <em class="replaceable"><code>pkN</code></em>
        </code> failed against a <code class="literal">LIST</code>-partitioned
        Cluster table having a multi-column primary key, where
        <em class="replaceable"><code>pkN</code></em> represents one of the columns
        making up the primary key.
       (<a href="http://bugs.mysql.com/18598" target="_top">Bug#18598</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A simultaneous <code class="literal">DROP TABLE</code> and table update
        operation utilising a table scan could trigger a node failure.
       (<a href="http://bugs.mysql.com/18597" target="_top">Bug#18597</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Fragment IDs were not logged correctly, causing
        <span><strong class="command">ndb_restore_log</strong></span> to fail.
       (<a href="http://bugs.mysql.com/18594" target="_top">Bug#18594</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Repeated use of the <code class="literal">SHOW</code> and <code class="literal">ALL
        STATUS</code> commands in the <span><strong class="command">ndb_mgm</strong></span>
        client could cause the <span><strong class="command">mgmd</strong></span> process to crash.
       (<a href="http://bugs.mysql.com/18591" target="_top">Bug#18591</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">ndbd</strong></span> sometimes failed to start with the error
        <span class="errortext">Node failure handling not completed</span>
        following a graceful restart.
       (<a href="http://bugs.mysql.com/18550" target="_top">Bug#18550</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">ndb_restore</strong></span> failed to restore a backup made
        from a 5.0 cluster to a 5.1 cluster.
       (<a href="http://bugs.mysql.com/18210" target="_top">Bug#18210</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Adding an index to an unsigned integer column did not work
        correctly.
       (<a href="http://bugs.mysql.com/18133" target="_top">Bug#18133</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A <code class="literal">SELECT</code> from an <code class="literal">NDB</code> table
        with <code class="literal">ORDER BY <em class="replaceable"><code>indexed_column</code></em>
        </code> and a <code class="literal">LIMIT</code> clause would fail
        following <code class="literal">ALTER TABLE</code>.
       (<a href="http://bugs.mysql.com/18094" target="_top">Bug#18094</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">mysqldump</strong></span> included in its output data from
        the internal <code class="literal">cluster</code> database.
       (<a href="http://bugs.mysql.com/17840" target="_top">Bug#17840</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Backups could fail for large clusters with many tables, where
        the number of tables approached
        <code class="literal">MaxNoOfTables</code>.
       (<a href="http://bugs.mysql.com/17607" target="_top">Bug#17607</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Some queries having a <code class="literal">WHERE</code> clause of the
        form <code class="literal">c1=val1 OR c2 LIKE 'val2'</code> were not
        evaluated correctly.
       (<a href="http://bugs.mysql.com/17421" target="_top">Bug#17421</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Replication): Delete and update of rows in a table without a
        primary key failed on the slave.
       (<a href="http://bugs.mysql.com/17400" target="_top">Bug#17400</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An issue with <span><strong class="command">ndb_mgmd</strong></span> prevented more than 27
        <code class="literal">mysqld</code> processes from connecting to a single
        cluster at one time.
       (<a href="http://bugs.mysql.com/17150" target="_top">Bug#17150</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In a 2-node cluster with a node failure, restarting the node
        with a low value for <code class="literal">StartPartialTimeout</code>
        could cause the cluster to come up partitioned
        (“<span class="quote">split-brain</span>” issue).
      </p><p>
        A similar issue could occur when the cluster was first started
        with a sufficiently low value for this parameter.
       (<a href="http://bugs.mysql.com/16447" target="_top">Bug#16447</a>, <a href="http://bugs.mysql.com/18612" target="_top">Bug#18612</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Performing multiple <code class="literal">ALTER TABLE</code> operations on
        the same <code class="literal">NDB</code> table from different
        <span><strong class="command">mysqld</strong></span> processes in the same cluster led to
        schema versioning errors when trying to access the table again
        following the restart of one of the <span><strong class="command">mysqld</strong></span>
        processes.
       (<a href="http://bugs.mysql.com/16445" target="_top">Bug#16445</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        On systems with multiple network interfaces, data nodes would
        get “<span class="quote">stuck</span>” in startup phase 2 if the interface
        connecting them to the management server was working on node
        startup while the interface interconnecting the data nodes
        experienced a temporary outage.
       (<a href="http://bugs.mysql.com/15695" target="_top">Bug#15695</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        On slow networks or CPUs, the management client
        <code class="literal">SHOW</code> command could sometimes erroneously show
        all data nodes as being master nodes belonging to nodegroup 0.
       (<a href="http://bugs.mysql.com/15530" target="_top">Bug#15530</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Unused open handlers for tables in which the metadata had
        changed were not properly closed. This could result in stale
        results from <code class="literal">NDB</code> tables following an
        <code class="literal">ALTER TABLE</code> statement.
       (<a href="http://bugs.mysql.com/13228" target="_top">Bug#13228</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Uninitialized internal variables could lead to unexpected
        results.
       (<a href="http://bugs.mysql.com/11033" target="_top">Bug#11033</a>, <a href="http://bugs.mysql.com/11034" target="_top">Bug#11034</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When attempting to create an index on a <code class="literal">BIT</code>
        or <code class="literal">BLOB</code> column, <span class="errortext">Error 743:
        Unsupported character set in table or index</span> was
        returned instead of <span class="errortext">Error 906: Unsupported attribute
        type in index</span>.
      </p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: <span class="bold"><strong>Partitioning</strong></span>: 
        Attempting to create an index using multiple columns on an
        explicitly partitioned table in a replicated Cluster database
        could cause the master <span><strong class="command">mysqld</strong></span> process to
        crash.
       (<a href="http://bugs.mysql.com/18284" target="_top">Bug#18284</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Issuing a <code class="literal">CREATE LOGFILE GROUP</code> statement
        during the drop of an <code class="literal">NDB</code> table would cause
        database corruption.
       (<a href="http://bugs.mysql.com/19141" target="_top">Bug#19141</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Concurrent table schema operations and operations on log file
        groups, tablespaces, data files, or undo files could lead to
        data node failures.
       (<a href="http://bugs.mysql.com/18575" target="_top">Bug#18575</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Using the <code class="option">--binlog-do-db</code> option caused problems
        with <code class="literal">CREATE TABLE</code> on the cluster acting as
        the replication master.
       (<a href="http://bugs.mysql.com/19492" target="_top">Bug#19492</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        When taking part in Cluster replication of tables containing
        <code class="literal">BLOB</code> columns, <span><strong class="command">mysqld</strong></span>
        falsely reported a large memory leak in the replication buffers
        when there was none.
       (<a href="http://bugs.mysql.com/19247" target="_top">Bug#19247</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Trying to restore the <code class="literal">apply_status</code> table from
        a 5.0 cluster backup failed on a 5.1 server.
       (<a href="http://bugs.mysql.com/18935" target="_top">Bug#18935</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        An issue with replication caused a <span><strong class="command">mysqld</strong></span>
        connected to a replicated cluster to crash when entering single
        user mode.
       (<a href="http://bugs.mysql.com/18535" target="_top">Bug#18535</a>)</p></li><li><p>
        A compatibility issue with NPTL (Native POSIX Thread Library) on
        Linux could result in a deadlock with <code class="literal">FLUSH TABLES WITH
        READ LOCK</code> under some conditions.
       (<a href="http://bugs.mysql.com/20048" target="_top">Bug#20048</a>)</p></li><li><p>
        Some outer joins were incorrectly converted to inner joins.
       (<a href="http://bugs.mysql.com/19816" target="_top">Bug#19816</a>)</p><p>This regression was introduced by <a href="http://bugs.mysql.com/17146" target="_top">Bug#17146</a></p></li><li><p>
        A view definition that referred to an alias in the
        <code class="literal">HAVING</code> clause could be saved in the
        <code class="filename">.frm</code> file with the alias replaced by the
        expression that it referred to, causing failure of subsequent
        <code class="literal">SELECT * FROM <em class="replaceable"><code>view_name</code></em>
        </code> statements.
       (<a href="http://bugs.mysql.com/19573" target="_top">Bug#19573</a>)</p></li><li><p>
        <span><strong class="command">mysql</strong></span> displayed <code class="literal">NULL</code> for
        strings that are empty or contain only spaces.
       (<a href="http://bugs.mysql.com/19564" target="_top">Bug#19564</a>)</p></li><li><p>
        Selecting from a view that used <code class="literal">GROUP BY</code> on a
        non-constant temporal interval (such as
        <code class="literal">DATE(<em class="replaceable"><code>col</code></em>) + INTERVAL
        TIME_TO_SEC(<em class="replaceable"><code>col</code></em>) SECOND</code>
        could cause a server crash.
       (<a href="http://bugs.mysql.com/19490" target="_top">Bug#19490</a>)</p></li><li><p>
        An outer join of two views that was written using <code class="literal">{ OJ
        ... }</code> syntax could cause a server crash.
       (<a href="http://bugs.mysql.com/19396" target="_top">Bug#19396</a>)</p></li><li><p>
        An issue with file handling in the partitioning code could cause
        <span><strong class="command">mysqld</strong></span> to crash when started and then stopped
        within a very short period of time.
       (<a href="http://bugs.mysql.com/19313" target="_top">Bug#19313</a>)</p></li><li><p>
        <span><strong class="command">myisamchk</strong></span> and
        <span><strong class="command">myisam_ftdump</strong></span> should allow either table names
        or <code class="filename">.MYI</code> filenames as arguments, but allowed
        only table names.
       (<a href="http://bugs.mysql.com/19220" target="_top">Bug#19220</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> could read a delete mark from its
        system tables incorrectly.
       (<a href="http://bugs.mysql.com/19217" target="_top">Bug#19217</a>)</p></li><li><p>
        Executing a <code class="literal">CREATE EVENT</code> statement could
        cause 100% CPU usage.
       (<a href="http://bugs.mysql.com/19170" target="_top">Bug#19170</a>)</p></li><li><p>
        Eliminated some memory corruption problems that resultsd in
        <code class="literal">double free or corruption</code> errors and a server
        crash.
       (<a href="http://bugs.mysql.com/19154" target="_top">Bug#19154</a>)</p></li><li><p>
        Attempting to set the default value of an
        <code class="literal">ENUM</code> or <code class="literal">SET</code> column to
        <code class="literal">NULL</code> caused a server crash.
       (<a href="http://bugs.mysql.com/19145" target="_top">Bug#19145</a>)</p></li><li><p>
        Index corruption could occur in cases when
        <code class="literal">key_cache_block_size</code> was not a multiple of
        <code class="literal">myisam_block_size</code> (for example, with
        <code class="literal">key_cache_block_size=1536</code> and
        <code class="literal">myisam_block_size=1024</code>).
       (<a href="http://bugs.mysql.com/19079" target="_top">Bug#19079</a>)</p></li><li><p>
        Instance Manager now finds the version numbers, so that it works
        properly when the executable name isn't the same as what the
        Instance Manager launched (such as when wrapping a
        <span><strong class="command">libtool</strong></span>-wrapped executable from the source
        tree).
       (<a href="http://bugs.mysql.com/19059" target="_top">Bug#19059</a>)</p></li><li><p>
        Some fast <code class="literal">ALTER TABLE</code> operations (requiring
        no temporary table) did not work for all tables.
       (<a href="http://bugs.mysql.com/19011" target="_top">Bug#19011</a>)</p></li><li><p>
        Successive <code class="literal">ALTER TABLE ... DROP PARTITION</code>
        statements on the same subpartitioned table could eventually
        cause the server to crash.
       (<a href="http://bugs.mysql.com/18962" target="_top">Bug#18962</a>)</p></li><li><p>
        Creating a table in an <code class="literal">InnoDB</code> database with a
        column name that matched the name of an internal
        <code class="literal">InnoDB</code> column (including
        <code class="literal">DB_ROW_ID</code>, <code class="literal">DB_TRX_ID</code>,
        <code class="literal">DB_ROLL_PTR</code> and <code class="literal">DB_MIX_ID</code>)
        would cause a crash. MySQL now returns Error 1005
        <span class="errortext">Cannot create table</span> with
        <code class="literal">errno</code> set to -1.
       (<a href="http://bugs.mysql.com/18934" target="_top">Bug#18934</a>)</p></li><li><p>
        The parser leaked memory when its stack needed to be extended.
       (<a href="http://bugs.mysql.com/18930" target="_top">Bug#18930</a>)</p></li><li><p>
        MySQL would not compile on Linux distributions that use the
        <code class="literal">tinfo</code> library.
       (<a href="http://bugs.mysql.com/18912" target="_top">Bug#18912</a>)</p></li><li><p>
        The server attempted to flush uninitialized log tables during
        <code class="literal">SIGHUP</code> processing, causing a crash.
       (<a href="http://bugs.mysql.com/18848" target="_top">Bug#18848</a>)</p></li><li><p>
        For a reference to a non-existent stored function in a stored
        routine that had a <code class="literal">CONTINUE</code> handler, the
        server continued as though a useful result had been returned,
        possibly resulting in a server crash.
       (<a href="http://bugs.mysql.com/18787" target="_top">Bug#18787</a>)</p></li><li><p>
        For single-<code class="literal">SELECT</code> union constructs of the
        form (SELECT ... ORDER BY <em class="replaceable"><code>order_list1</code></em>
        [LIMIT <em class="replaceable"><code>n</code></em>]) ORDER BY
        <em class="replaceable"><code>order_list2</code></em>, the <code class="literal">ORDER
        BY</code> lists were concatenated and the
        <code class="literal">LIMIT</code> clause was ignored.
       (<a href="http://bugs.mysql.com/18767" target="_top">Bug#18767</a>)</p></li><li><p>
        Inserts failed with duplicate key errors on a table partitioned
        using an <code class="literal">AUTO_INCREMENT</code> column for the
        partitioning key.
       (<a href="http://bugs.mysql.com/18753" target="_top">Bug#18753</a>, <a href="http://bugs.mysql.com/18552" target="_top">Bug#18552</a>)</p></li><li><p>
        It was possible to create a <code class="literal">RANGE</code>-partitioned
        table with a partition defined using the clause <code class="literal">VALUES
        LESS THAN (NULL)</code>, even though such a partition could
        never contain any values whatsoever.
       (<a href="http://bugs.mysql.com/18752" target="_top">Bug#18752</a>)</p></li><li><p>
        Delimited identifiers for partitions were not being treated the
        same as delimited identifiers for other database objects (such
        as tables and columns) with regard to allowed characters.
       (<a href="http://bugs.mysql.com/18750" target="_top">Bug#18750</a>)</p></li><li><p>
        <code class="literal">CREATE VIEW</code> statements would not be
        replicated to the slave if the
        <code class="option">--replicate-wild-ignore-table</code> rule was enabled.
       (<a href="http://bugs.mysql.com/18715" target="_top">Bug#18715</a>)</p></li><li><p>
        Conversion of a number to a <code class="literal">CHAR UNICODE</code>
        string returned an invalid result.
       (<a href="http://bugs.mysql.com/18691" target="_top">Bug#18691</a>)</p></li><li><p>
        If the second or third argument to
        <a href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> was a
        constant expression such as <code class="literal">'2005-09-01 - INTERVAL 6
        MONTH</code> and the other two arguments were columns,
        <a href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> was evaluated
        incorrectly.
       (<a href="http://bugs.mysql.com/18618" target="_top">Bug#18618</a>)</p></li><li><p>
        <code class="literal">LOAD DATA FROM MASTER</code> would fail when trying
        to load the <code class="literal">INFORMATION_SCHEMA</code> database from
        the master, because the <code class="literal">INFORMATION_SCHEMA</code>
        system database would already exist on the slave.
       (<a href="http://bugs.mysql.com/18607" target="_top">Bug#18607</a>)</p></li><li><p>
        Running an <code class="literal">ALTER TABLE</code> on a partitioned table
        simultaneously experiencing a high number of concurrent DML
        statements could crash the server.
       (<a href="http://bugs.mysql.com/18572" target="_top">Bug#18572</a>)</p></li><li><p>
        A <code class="literal">LOCK TABLES</code> statement that failed could
        cause <code class="literal">MyISAM</code> not to update table statistics
        properly, causing a subsequent <code class="literal">CHECK TABLE</code> to
        report table corruption.
       (<a href="http://bugs.mysql.com/18544" target="_top">Bug#18544</a>)</p></li><li><p>
        <span><strong class="command">mysqltest</strong></span> incorrectly interpreted some
        <code class="literal">ER_<em class="replaceable"><code>xxx</code></em></code> error names
        given in the <code class="literal">error</code> command.
       (<a href="http://bugs.mysql.com/18495" target="_top">Bug#18495</a>)</p></li><li><p>
        <code class="literal">InnoDB</code>: <code class="literal">ALTER TABLE</code> to add
        or drop a foreign key for an <code class="literal">InnoDB</code> table had
        no effect.
       (<a href="http://bugs.mysql.com/18477" target="_top">Bug#18477</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> did not use a consistent read for
        <code class="literal">CREATE ... SELECT</code> when
        <code class="literal">innodb_locks_unsafe_for_binlog</code> was set.
       (<a href="http://bugs.mysql.com/18350" target="_top">Bug#18350</a>)</p></li><li><p>
        <code class="literal">DROP DATABASE</code> did not drop stored routines
        associated with the database if the database name was longer
        than 21 characters.
       (<a href="http://bugs.mysql.com/18344" target="_top">Bug#18344</a>)</p></li><li><p>
        A query on a table partitioned or subpartitioned by
        <code class="literal">HASH</code> did not display all results when using a
        <code class="literal">WHERE</code> condition involving a column used in
        the hashing expression.
       (<a href="http://bugs.mysql.com/18329" target="_top">Bug#18329</a>, <a href="http://bugs.mysql.com/18423" target="_top">Bug#18423</a>)</p></li><li><p>
        In <span><strong class="command">mysqltest</strong></span>, <code class="option">--sleep=0</code> had
        no effect. Now it correctly causes <code class="literal">sleep</code>
        commands in test case files to sleep for 0 seconds.
       (<a href="http://bugs.mysql.com/18312" target="_top">Bug#18312</a>)</p></li><li><p>
        <code class="literal">ExtractValue</code> function did not return
        character data within <code class="literal">&lt;![CDATA[]]&gt;</code> as
        expected.
       (<a href="http://bugs.mysql.com/18285" target="_top">Bug#18285</a>)</p></li><li><p>
        A recent change caused the <span><strong class="command">mysql</strong></span> client not
        to display <code class="literal">NULL</code> values correctly and to
        display numeric columns left-justified rather than
        right-justified. The problems have been corrected.
       (<a href="http://bugs.mysql.com/18265" target="_top">Bug#18265</a>)</p></li><li><p>
        Updates to a <code class="literal">MEMORY</code> table caused the size of
        <code class="literal">BTREE</code> indexes for the table to increase.
       (<a href="http://bugs.mysql.com/18160" target="_top">Bug#18160</a>)</p></li><li><p>
        A failed <code class="literal">ALTER TABLE</code> operation could fail to
        clean up a temporary <code class="filename">.frm</code> file.
       (<a href="http://bugs.mysql.com/18129" target="_top">Bug#18129</a>)</p></li><li><p>
        Event-creation statements enclosed in multi-line comments using
        <code class="literal">/*!<em class="replaceable"><code>version_number</code></em> ...
        */</code> syntax were not parsed correctly.
       (<a href="http://bugs.mysql.com/18078" target="_top">Bug#18078</a>)</p></li><li><p>
        <code class="literal">SELECT DISTINCT</code> queries sometimes returned
        only the last row.
       (<a href="http://bugs.mysql.com/18068" target="_top">Bug#18068</a>)</p></li><li><p>
        <code class="literal">InnoDB</code>: A <code class="literal">DELETE</code> followed
        by an <code class="literal">INSERT</code> and then by an
        <code class="literal">UPDATE</code> on a partitioned
        <code class="literal">InnoDB</code> table caused subsequent queries to
        return incorrect results.
       (<a href="http://bugs.mysql.com/17992" target="_top">Bug#17992</a>)</p></li><li><p>
        It was possible to use trailing spaces in the names of
        partitions and subpartitions. Attempting to do so now raises the
        error <span class="errortext">Incorrect partition name</span>.
       (<a href="http://bugs.mysql.com/17973" target="_top">Bug#17973</a>)</p></li><li><p>
        <code class="literal">LIKE</code> searches failed on a
        <code class="literal">CHAR</code> column used as the partitioning column
        of a table partitioned by <code class="literal">KEY</code>.
       (<a href="http://bugs.mysql.com/17946" target="_top">Bug#17946</a>)</p></li><li><p>
        Executing <code class="literal">SELECT</code> on a large table that had
        been compressed within <span><strong class="command">myisampack</strong></span> could cause
        a crash.
       (<a href="http://bugs.mysql.com/17917" target="_top">Bug#17917</a>)</p></li><li><p>
        The <code class="literal">sql_big_selects</code> system variable was not
        displayed by <code class="literal">SHOW VARIABLES</code>.
       (<a href="http://bugs.mysql.com/17849" target="_top">Bug#17849</a>)</p></li><li><p>
        <code class="literal">REPAIR TABLE</code> did not restore the length for
        packed keys in tables created under MySQL 4.x, which caused them
        to appear corrupt to <code class="literal">CHECK TABLE</code> but not to
        <code class="literal">REPAIR TABLE</code>.
       (<a href="http://bugs.mysql.com/17810" target="_top">Bug#17810</a>)</p></li><li><p>
        A range access optimizer heuristic was invalid, causing some
        queries to be much slower in MySQL 5.0 than in 4.0.
       (<a href="http://bugs.mysql.com/17379" target="_top">Bug#17379</a>, <a href="http://bugs.mysql.com/18940" target="_top">Bug#18940</a>)</p></li><li><p>
        Logging to the <code class="literal">mysql.general_log</code> and
        <code class="literal">mysql.slow_log</code> tables did not work for
        Windows builds because the <code class="literal">CSV</code> storage engine
        was unavailable. The <code class="literal">CSV</code> engine now is
        enabled in Windows builds.
       (<a href="http://bugs.mysql.com/17368" target="_top">Bug#17368</a>)</p></li><li><p>
        Updating a field value when also requesting a lock with
        <a href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a> would cause
        slave servers in a replication environment to terminate.
       (<a href="http://bugs.mysql.com/17284" target="_top">Bug#17284</a>)</p></li><li><p>
        The binary log would create an incorrect <code class="literal">DROP</code>
        query when creating temporary tables during replication.
       (<a href="http://bugs.mysql.com/17263" target="_top">Bug#17263</a>)</p></li><li><p>
        If the <code class="literal">WHERE</code> condition of a query contained
        an <code class="literal">OR</code>-ed <code class="literal">FALSE</code> term, the
        set of tables whose rows cannot serve for null-complements in
        outer joins was determined incorrectly. This resulted in
        blocking possible conversions of outer joins into joins by the
        optimizer for such queries.
       (<a href="http://bugs.mysql.com/17164" target="_top">Bug#17164</a>)</p></li><li><p>
        Casting a string to <code class="literal">DECIMAL</code> worked, but
        casting a trimmed string (using
        <a href="functions.html#function_ltrim"><code class="literal">LTRIM()</code></a> or
        <a href="functions.html#function_rtrim"><code class="literal">RTRIM()</code></a>) resulted in loss of
        decimal digits.
       (<a href="http://bugs.mysql.com/17043" target="_top">Bug#17043</a>)</p></li><li><p>
        <code class="literal">MyISAM</code> table deadlock was possible if one
        thread issued a <code class="literal">LOCK TABLES</code> request for write
        locks and then an administrative statement such as
        <code class="literal">OPTIMIZE TABLE</code>, if between the two statements
        another client meanwhile issued a multiple-table
        <code class="literal">SELECT</code> for some of the locked tables.
       (<a href="http://bugs.mysql.com/16986" target="_top">Bug#16986</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE ... REBUILD PARTITION</code> returned an
        inaccurate error message.
       (<a href="http://bugs.mysql.com/16819" target="_top">Bug#16819</a>)</p></li><li><p>
        Use of <code class="option">--default-storage-engine=innodb</code> resulted
        in an error with the server reporting that
        <code class="literal">InnoDB</code> was an unknown table type.
       (<a href="http://bugs.mysql.com/16691" target="_top">Bug#16691</a>)</p></li><li><p>
        <code class="literal">MySQL-shared-compat-5.1.9-0.i386.rpm</code>
        incorrectly depended on <code class="literal">glibc</code> 2.3 and could
        not be installed on a <code class="literal">glibc</code> 2.2 system.
       (<a href="http://bugs.mysql.com/16539" target="_top">Bug#16539</a>)</p></li><li><p>
        The presence of multiple equalities in a condition after reading
        a constant table could cause the optimizer not to use an index.
        This resulted in certain queries being much slower than in MySQL
        4.1.
       (<a href="http://bugs.mysql.com/16504" target="_top">Bug#16504</a>)</p></li><li><p>
        Within a trigger,
        <a href="functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a> did not return
        the connection ID of the thread that caused the trigger to be
        activated.
       (<a href="http://bugs.mysql.com/16461" target="_top">Bug#16461</a>)</p></li><li><p>
        The XPath <code class="literal">string-length()</code> function was not
        implemented for use with
        <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a>.
       (<a href="http://bugs.mysql.com/16319" target="_top">Bug#16319</a>)</p></li><li><p>
        The <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> function
        failed with a syntax error when the XPath expression used
        special characters such as <code class="literal">Ñ</code>
        (“<span class="quote">N-tilde</span>”).
       (<a href="http://bugs.mysql.com/16233" target="_top">Bug#16233</a>)</p></li><li><p>
        The <code class="literal">sql_notes</code> and
        <code class="literal">sql_warnings</code> system variables were not always
        displayed correctly by <code class="literal">SHOW VARIABLES</code> (for
        example, they were displayed as <code class="literal">ON</code> after
        being set to <code class="literal">OFF</code>).
       (<a href="http://bugs.mysql.com/16195" target="_top">Bug#16195</a>)</p></li><li><p>
        If the first argument to
        <a href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> was a
        <code class="literal">DATE</code> or <code class="literal">TIME</code> column of a
        view and the other arguments were constants,
        <a href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> did not
        perform conversion of the constants to the appropriate temporary
        type, resulting in incorrect evaluation.
       (<a href="http://bugs.mysql.com/16069" target="_top">Bug#16069</a>)</p></li><li><p>
        After calling <code class="literal">FLUSH STATUS</code>, the
        <code class="literal">max_used_connections</code> variable did not
        increment for existing connections and connections which use the
        thread cache.
       (<a href="http://bugs.mysql.com/15933" target="_top">Bug#15933</a>)</p></li><li><p>
        <code class="literal">DELETE</code> and <code class="literal">UPDATE</code>
        statements that used large <code class="literal">NOT IN
        (<em class="replaceable"><code>value_list</code></em>)</code> clauses could
        use large amounts of memory.
       (<a href="http://bugs.mysql.com/15872" target="_top">Bug#15872</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> failure to release an adaptive hash
        index latch could cause a server crash if the query cache was
        enabled.
       (<a href="http://bugs.mysql.com/15758" target="_top">Bug#15758</a>)</p></li><li><p>
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> in a stored
        function or trigger returned zero. .
       (<a href="http://bugs.mysql.com/15728" target="_top">Bug#15728</a>)</p></li><li><p>
        The <code class="literal">system_time_zone</code> and
        <code class="literal">version_*</code> system variables could not be
        accessed via <code class="literal">SELECT
        @@<em class="replaceable"><code>var_name</code></em></code> syntax.
       (<a href="http://bugs.mysql.com/15684" target="_top">Bug#15684</a>, <a href="http://bugs.mysql.com/12792" target="_top">Bug#12792</a>)</p></li><li><p>
        If the server were built without partition support, it was
        possible to run partitioning-related statements with no errors
        or warnings, even though these statements would have no effect.
        Now such statements are disallowed unless the server has been
        compiled using the <code class="option">--with-partition</code>
        option.
       (<a href="http://bugs.mysql.com/15561" target="_top">Bug#15561</a>)</p></li><li><p>
        Use of <a href="functions.html#function_convert-tz"><code class="literal">CONVERT_TZ()</code></a> in a view
        definition could result in spurious syntax or access errors.
       (<a href="http://bugs.mysql.com/15153" target="_top">Bug#15153</a>)</p></li><li><p>
        Prevent recursive views caused by using <code class="literal">RENAME
        TABLE</code> on a view after creating it.
       (<a href="http://bugs.mysql.com/14308" target="_top">Bug#14308</a>)</p></li><li><p>
        Some queries were slower in 5.0 than in 4.1 because some 4.1
        cost-evaluation code had not been merged into 5.0.
       (<a href="http://bugs.mysql.com/14292" target="_top">Bug#14292</a>)</p></li><li><p>
        Avoid trying to include
        <code class="filename">&lt;asm/atomic.h&gt;</code> when it doesn't work
        in C++ code.
       (<a href="http://bugs.mysql.com/13621" target="_top">Bug#13621</a>)</p></li><li><p>
        Running <span><strong class="command">myisampack</strong></span> followed by
        <span><strong class="command">myisamchk</strong></span> with the <code class="option">--unpack</code>
        option would corrupt the <code class="literal">auto_increment</code> key.
       (<a href="http://bugs.mysql.com/12633" target="_top">Bug#12633</a>)</p></li><li><p>
        Use of <a href="functions.html#function_convert-tz"><code class="literal">CONVERT_TZ()</code></a> in a stored
        function or trigger (or in a stored procedure called from a
        stored function or trigger) caused an error.
       (<a href="http://bugs.mysql.com/11081" target="_top">Bug#11081</a>)</p></li><li><p>
        When <span><strong class="command">myisamchk</strong></span> needed to rebuild a table,
        <code class="literal">AUTO_INCREMENT</code> information was lost.
       (<a href="http://bugs.mysql.com/10405" target="_top">Bug#10405</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-9"></a>C.1.21. Changes in  MySQL 5.1.9 (12 April 2006)</h3></div></div></div><p class="release-level">
      This is a new Beta development release, fixing recently discovered
      bugs.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p class="release-non-production">
        This Beta release, as any other pre-production release, should
        not be installed on <span class="emphasis"><em>production</em></span> level
        systems or systems with critical data. It is good practice to
        back up your data before installing any new version of software.
        Although MySQL has worked very hard to ensure a high level of
        quality, protect your data by making a backup as you would for
        any software beta release. Please refer to our bug database at
        <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a> for more details about the
        individual bugs fixed in this version.
      </p></div><p>This section documents all changes and bug fixes that have been applied since the last official MySQL release. If you would like to receive more fine-grained and personalized <span class="emphasis"><em>update alerts</em></span> about fixes that are relevant to the version and features you use, please consider subscribing to <span class="emphasis"><em>MySQL Enterprise</em></span> (a commercial MySQL offering). For more details please see <a href="http://www.mysql.com/products/enterprise" target="_top">http://www.mysql.com/products/enterprise</a>.</p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="literal">NDB</code> storage engine now supports
        <code class="literal">CREATE TABLE</code> statements of arbitrary length.
        (Previously, <code class="literal">CREATE TABLE</code> statements for
        MySQL Cluster tables could contain a maximum of 4096 characters
        only.)
       (<a href="http://bugs.mysql.com/17813" target="_top">Bug#17813</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Added the <code class="option">--nowait-nodes</code> startup option for
        <span><strong class="command">ndbd</strong></span>, making it possible to skip specified
        nodes without waiting for them to start when starting the
        cluster. See
        <a href="mysql-cluster.html#mysql-cluster-ndbd-command-options" title="20.6.5.1. Command Options for ndbd">Section 20.6.5.1, “Command Options for <span><strong class="command">ndbd</strong></span>”</a>.
      </p></li><li><p>
        <span><strong class="command">mysqld_safe</strong></span> no longer checks for a
        <span><strong class="command">mysqld-max</strong></span> binary. Instead,
        <span><strong class="command">mysqld_safe</strong></span> nows checks only for the standard
        <span><strong class="command">mysqld</strong></span> server unless another server binary is
        specified explicitly via <code class="option">--mysqld</code> or
        <code class="option">--mysqld-version</code>. If you previously relied on
        the implicit invocation of <span><strong class="command">mysqld-max</strong></span>, you
        should use an appropriate option now.
       (<a href="http://bugs.mysql.com/17861" target="_top">Bug#17861</a>)</p></li><li><p>
        For partitioned tables, the output of <code class="literal">SHOW TABLE
        STATUS</code> now shows in the <code class="literal">Engine</code>
        column the name of the storage engine used by all partitions for
        the table; in the <code class="literal">Create_options</code> column, the
        output now shows <code class="literal">partitioned</code> for a
        partitioned table. This change also affects the values shown in
        the corresponding columns of the
        <code class="literal">INFORMATION_SCHEMA.TABLES</code> table.
       (<a href="http://bugs.mysql.com/17631" target="_top">Bug#17631</a>)</p></li><li><p>
        <code class="literal">SHOW PLUGIN</code> was renamed to <code class="literal">SHOW
        PLUGINS</code>. <code class="literal">SHOW PLUGIN</code> now is
        deprecated and generates a warning.
       (<a href="http://bugs.mysql.com/17112" target="_top">Bug#17112</a>)</p></li><li><p>
        Large file support was re-enabled for the MySQL server binary
        for the AIX 5.2 platform.
       (<a href="http://bugs.mysql.com/13571" target="_top">Bug#13571</a>)</p></li><li><p>
        Binary MySQL distributions now include a
        <span><strong class="command">mysqld-max</strong></span> server, in addition to the usual
        <span><strong class="command">mysqld</strong></span> optimized server and the
        <span><strong class="command">mysqld-debug</strong></span> debugging server.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Fix</strong></span>: 
        Invalid arguments to
        <a href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a> caused a server
        crash. Thanks to Jean-David Maillefer for discovering and
        reporting this problem to the Debian project and to Christian
        Hammers from the Debian Team for notifying us of it.
       (<a href="http://bugs.mysql.com/20729" target="_top">Bug#20729</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-3469" target="_top">CVE-2006-3469</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">BLOB</code> columns did not work correctly with
        user-partitioned <code class="literal">NDB</code> tables.
       (<a href="http://bugs.mysql.com/16796" target="_top">Bug#16796</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An uninitialized internal variable could lead to unexpected
        results.
       (<a href="http://bugs.mysql.com/18831" target="_top">Bug#18831</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">TRUNCATE</code> did not reset the
        <code class="literal">AUTO_INCREMENT</code> counter for
        <code class="literal">MyISAM</code> tables when issued inside a stored
        procedure.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This bug did not affect <code class="literal">InnoDB</code> tables.
        </p><p>
          In addition, <code class="literal">TRUNCATE</code> does not reset the
          <code class="literal">AUTO_INCREMENT</code> counter for
          <code class="literal">NDB</code> tables regardless of when it is called.
        </p></div><p>(<a href="http://bugs.mysql.com/14945" target="_top">Bug#14945</a>)</p><p>See also <a href="http://bugs.mysql.com/18864" target="_top">Bug#18864</a></p></li><li><p>
        For full-text searches in boolean mode, and when a full-text
        parser plugin was used, a
        <code class="literal">MYSQL_FTPARSER_PARAM::ftparser_state</code> could
        have been corrupted by recursive calls to the plugin.
       (<a href="http://bugs.mysql.com/18836" target="_top">Bug#18836</a>)</p></li><li><p>
        <code class="literal">mysql_reconnect()</code> sent a <code class="literal">SET
        NAMES</code> statement to the server, even for pre-4.1
        servers that do not understand the statement.
       (<a href="http://bugs.mysql.com/18830" target="_top">Bug#18830</a>)</p></li><li><p>
        A query against a partitioned table using <code class="literal">WHERE
        <em class="replaceable"><code>col</code></em> IS NULL</code> could produce
        incorrect results given the following conditions:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            The table had partitions and subpartitions
          </p></li><li><p>
            The partitioning function depended on a single column
            <em class="replaceable"><code>col</code></em> of one of the MySQL integer
            types
          </p></li><li><p>
            The partitioning function was not monotonically increasing
          </p></li></ul></div><p>
        The same issue could cause the server to crash when run in debug
        mode.
       (<a href="http://bugs.mysql.com/18659" target="_top">Bug#18659</a>)</p></li><li><p>
        Partition pruning did not work properly for some kinds of
        partitioning and subpartitioning, with certain
        <code class="literal">WHERE</code> clauses. (Partitions and subpartitions
        that should have been marked as used were not so marked.) The
        error could manifest as incorrect content in <code class="literal">EXPLAIN
        PARTITIONS</code> output as well as missing rows in the
        results of affected queries.
       (<a href="http://bugs.mysql.com/18558" target="_top">Bug#18558</a>)</p></li><li><p>
        Building the server using
        <code class="option">--with-example-storage-engine</code> failed to enable
        the <code class="literal">EXAMPLE</code> storage engine in the server.
       (<a href="http://bugs.mysql.com/18464" target="_top">Bug#18464</a>)</p></li><li><p>
        If <code class="literal">InnoDB</code> encountered a
        <code class="literal">HA_ERR_LOCK_TABLE_FULL</code> error and rolled back
        a transaction, the transaction was still written to the binary
        log.
       (<a href="http://bugs.mysql.com/18283" target="_top">Bug#18283</a>)</p></li><li><p>
        Complex queries with nested joins could cause a server crash.
       (<a href="http://bugs.mysql.com/18279" target="_top">Bug#18279</a>)</p></li><li><p>
        <a href="functions.html#function_count"><code class="literal">COUNT(*)</code></a> on a
        <code class="literal">MyISAM</code> table could return different results
        for the base table and a view on the base table.
       (<a href="http://bugs.mysql.com/18237" target="_top">Bug#18237</a>)</p></li><li><p>
        <a href="functions.html#function_extract"><code class="literal">EXTRACT(QUARTER FROM
        <em class="replaceable"><code>date</code></em>)</code></a> returned unexpected
        results.
       (<a href="http://bugs.mysql.com/18100" target="_top">Bug#18100</a>)</p></li><li><p>
        Queries using <code class="literal">WHERE ... IS NULL</code> returned
        incorrect results from partitioned tables.
       (<a href="http://bugs.mysql.com/18070" target="_top">Bug#18070</a>)</p></li><li><p>
        Partition pruning did not perform correctly with partitions on
        <code class="literal">NULL</code>, and could potentially crash the server.
       (<a href="http://bugs.mysql.com/18053" target="_top">Bug#18053</a>)</p></li><li><p>
        <code class="literal">MEDIUMINT</code> columns were not handled in the
        same way as other column types by partition pruning.
      </p><p>
        Partition pruning would sometimes use inappropriate columns in
        preforming queries.
      </p><p>
        Both of these issues were rectified as part of the same bugfix.
       (<a href="http://bugs.mysql.com/18025" target="_top">Bug#18025</a>)</p></li><li><p>
        For tables created in a MySQL 4.1 installation upgraded to MySQL
        5.0 and up, multiple-table updates could update only the first
        matching row.
       (<a href="http://bugs.mysql.com/16281" target="_top">Bug#16281</a>)</p></li><li><p>
        For <span><strong class="command">mysql.server</strong></span>, if the
        <code class="option">basedir</code> option was specified after
        <code class="option">datadir</code> in an option file, the setting for
        <code class="literal">datadir</code> was ignored and assumed to be located
        under <code class="literal">basedir</code>.
       (<a href="http://bugs.mysql.com/16240" target="_top">Bug#16240</a>)</p></li><li><p>
        Triggers created in one version of the server could not be
        dropped after upgrading to a newer version.
       (<a href="http://bugs.mysql.com/15921" target="_top">Bug#15921</a>)</p></li><li><p>
        <a href="functions.html#function_cast"><code class="literal">CAST(<em class="replaceable"><code>double</code></em> AS
        SIGNED INT)</code></a> for large
        <em class="replaceable"><code>double</code></em> values outside the signed
        integer range truncated the result to be within range, but the
        result sometimes had the wrong sign, and no warning was
        generated.
       (<a href="http://bugs.mysql.com/15098" target="_top">Bug#15098</a>)</p></li><li><p>
        Quoted values could not be used for partition option values.
       (<a href="http://bugs.mysql.com/13520" target="_top">Bug#13520</a>)</p></li><li><p>
        Delimited identifiers could not be used in defining partitions.
       (<a href="http://bugs.mysql.com/13433" target="_top">Bug#13433</a>)</p></li><li><p>
        <span><strong class="command">mysql_config</strong></span> returned incorrect libraries on
        <code class="literal">x86_64</code> systems.
       (<a href="http://bugs.mysql.com/13158" target="_top">Bug#13158</a>)</p></li><li><p>
        The server was always built as though
        <code class="option">--with-extra-charsets=complex</code> had been
        specified.
       (<a href="http://bugs.mysql.com/12076" target="_top">Bug#12076</a>)</p></li><li><p>
        The table had partitions and subpartitions
      </p></li><li><p>
        The partitioning function was not monotonically increasing
      </p></li><li><p>
        The partitioning function depended on a single column
        <em class="replaceable"><code>col</code></em> of one of the MySQL integer types
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-8"></a>C.1.22. Changes in  MySQL 5.1.8 (Not released)</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        This was an internal release only, and no binaries were
        published.
      </p></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Cluster Replication</strong></span>: <span class="bold"><strong>Incompatible Change</strong></span>: 
        The <code class="literal">cluster_replication</code> database has been
        renamed to <code class="literal">cluster</code>. This will effect
        replication between MySQL Clusters where one cluster is running
        MySQL 5.1.8 or later, and the other is running MySQL 5.1.7 or
        earlier. See
        <a href="mysql-cluster.html#mysql-cluster-replication" title="20.11. MySQL Cluster Replication">Section 20.11, “MySQL Cluster Replication”</a>, and
        especially
        <a href="mysql-cluster.html#mysql-cluster-replication-schema" title="20.11.4. Cluster Replication Schema and Tables">Section 20.11.4, “Cluster Replication Schema and Tables”</a>.
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The semantics of <code class="literal">ALTER TABLE
        <em class="replaceable"><code>t</code></em>
        ENGINE=<em class="replaceable"><code>X</code></em>;</code> for partitioned
        tables is changed, and now means that the storage engine used
        for table <em class="replaceable"><code>t</code></em> is changed to
        <em class="replaceable"><code>X</code></em>.
      </p><p>
        The previous statement formerly (prior to MySQL 5.1.8) meant
        that all partitioning was removed from the table. In order to
        remove the partitioning of a table, the syntax <code class="literal">ALTER
        TABLE <em class="replaceable"><code>t</code></em> REMOVE
        PARTITIONING;</code> is introduced. The <code class="literal">REMOVE
        PARTITIONING</code> option can be used in combination with
        existing <code class="literal">ALTER TABLE</code> options such as those
        employed for adding or dropping columns or indexes.
       (<a href="http://bugs.mysql.com/17754" target="_top">Bug#17754</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        For purposes of determining placement, <code class="literal">RANGE</code>
        partitioning now treats <code class="literal">NULL</code> as less than any
        other value. (Formerly, <code class="literal">NULL</code> was treated as
        equal to zero.) See
        <a href="partitioning.html#partitioning-handling-nulls" title="21.2.6. How MySQL Partitioning Handles NULL Values">Section 21.2.6, “How MySQL Partitioning Handles <code class="literal">NULL</code> Values”</a>.
       (<a href="http://bugs.mysql.com/15447" target="_top">Bug#15447</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The stability of <code class="literal">CREATE</code> and
        <code class="literal">DROP</code> operations on <code class="literal">NDB</code>
        tables containing <code class="literal">BLOB</code> columns has been
        improved.
       (<a href="http://bugs.mysql.com/17761" target="_top">Bug#17761</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="literal">NDBCLUSTER</code> storage engine now supports
        <code class="literal">INSERT IGNORE</code> and <code class="literal">REPLACE</code>
        statements. Previously, these statements failed with an error.
       (<a href="http://bugs.mysql.com/17431" target="_top">Bug#17431</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        You can now have only one log file group at any one time. See
        <a href="sql-syntax.html#create-logfile-group" title="12.1.8. CREATE LOGFILE GROUP Syntax">Section 12.1.8, “<code class="literal">CREATE LOGFILE GROUP</code> Syntax”</a>.
       (<a href="http://bugs.mysql.com/16386" target="_top">Bug#16386</a>)</p></li><li><p>
        Builds for Windows, Linux, and Unix (except AIX) platforms now
        have SSL support enabled, in the server as well as in the client
        libraries. Because part of the SSL code is written in C++, this
        does introduce dependencies on the system's C++ runtime
        libraries in several cases, depending on compiler specifics.
       (<a href="http://bugs.mysql.com/18195" target="_top">Bug#18195</a>)</p></li><li><p>
        Partition pruning was made more stable, particularly in cases
        involving queries using tests for <code class="literal">NULL</code> values
        in the <code class="literal">WHERE</code> clause against subpartitioned
        tables which were partitioned by <code class="literal">LIST(
        <em class="replaceable"><code>some_function</code></em>(<em class="replaceable"><code>col1</code></em>,
        ... ,<em class="replaceable"><code>colN</code></em>) )</code>.
       (<a href="http://bugs.mysql.com/17891" target="_top">Bug#17891</a>)</p></li><li><p>
        The output of <code class="literal">SHOW CREATE EVENT</code> no longer
        qualifies the event name with the name of the schem to which the
        event belongs.
       (<a href="http://bugs.mysql.com/17714" target="_top">Bug#17714</a>)</p></li><li><p>
        The deprecated constructs in the following table now generate
        warnings. You should not employ them in new applications, as
        they are likely to be removed in a future version of MySQL. Use
        the equivalents shown in the table's second column instead. For
        the same reason, existing applications that depend on the
        deprecated constructs should be converted to make use of the
        current equivalents as soon as possible.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Deprecated / Obsolete</strong></span>:</td><td><span class="bold"><strong>Current /
              Preferred</strong></span>:</td></tr><tr><td><code class="literal">@@table_type</code>

              </td><td><code class="literal">@@storage_engine</code>

              </td></tr><tr><td><code class="literal">@@log_bin_trust_routine_creators</code>

              </td><td><code class="literal">@@log_bin_trust_function_creators</code>

              </td></tr><tr><td><code class="literal">TIMESTAMP(<em class="replaceable"><code>N</code></em>)</code>

              </td><td>See <a href="functions.html#date-and-time-functions" title="11.6. Date and Time Functions">Section 11.6, “Date and Time Functions”</a>.</td></tr><tr><td><code class="literal">TYPE=</code>

              </td><td><code class="literal">ENGINE=</code>

              </td></tr><tr><td><code class="literal">BACKUP TABLE</code>

              </td><td><span><strong class="command">mysqldump</strong></span>,
                <span><strong class="command">mysqlhotcopy</strong></span>, or MySQL Administrator</td></tr><tr><td><code class="literal">RESTORE TABLE</code>, <code class="literal">LOAD TABLE FROM
                  MASTER</code>

              </td><td><span><strong class="command">mysqldump</strong></span>, <span><strong class="command">mysql</strong></span>, or
                MySQL Administrator</td></tr><tr><td><code class="literal">SHOW TABLE TYPES</code>

              </td><td><code class="literal">SHOW [STORAGE] ENGINES</code>

              </td></tr><tr><td><code class="literal">SHOW INNODB STATUS</code>

              </td><td><code class="literal">SHOW ENGINE INNODB STATUS</code>

              </td></tr><tr><td><code class="literal">SHOW MUTEX STATUS</code>

              </td><td><code class="literal">SHOW ENGINE INNODB MUTEX</code>

              </td></tr><tr><td><code class="literal">SHOW BDB LOGS</code>, <code class="literal">SHOW
                LOGS</code>

              </td><td><code class="literal">SHOW ENGINE BDB LOGS</code>

              </td></tr></tbody></table></div><p>
        <code class="literal">SHOW BDB LOGS</code> and <code class="literal">SHOW
        LOGS</code> are removed as of MySQL 5.1.12, and the other
        deprecated items shown in the table are removed as of MySQL
        5.2.5.
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p><b><code class="literal">TYPE</code> vs <code class="literal">ENGINE</code>

          . </b>
            In order not to break legacy applications, support for
            <code class="literal">TYPE = <em class="replaceable"><code>engine_name</code></em>
            </code> — deprecated since MySQL 4.0 — has
            been restored, but now generates a warning.
          </p><p>
          <span class="emphasis"><em>Beginning with MySQL 5.2.5, <code class="literal">TYPE =
          <em class="replaceable"><code>engine_name</code></em></code> will no
          longer be available and will produce a syntax
          error</em></span>.
        </p><p>
          <span class="emphasis"><em>You should not use <code class="literal">TYPE</code> in any
          new applications, and you should immediately begin conversion
          of existing applications to use the <code class="literal">ENGINE =
          <em class="replaceable"><code>engine_name</code></em></code> syntax
          instead</em></span>.
        </p></div><p>(<a href="http://bugs.mysql.com/17501" target="_top">Bug#17501</a>)</p></li><li><p>
        Temporary tables may no longer be partitioned.
       (<a href="http://bugs.mysql.com/17497" target="_top">Bug#17497</a>)</p></li><li><p>
        More specific error messages are now given when attempting to
        create an excessive number of partitions or subpartitions.
        (Previously, no distinction was made between an excessive number
        of partitions and an excessive number of subpartitions.)
       (<a href="http://bugs.mysql.com/17393" target="_top">Bug#17393</a>)</p></li><li><p>
        Added the <code class="option">--events</code> option to
        <span><strong class="command">mysqldump</strong></span> to enable events to be included in
        the dump output.
       (<a href="http://bugs.mysql.com/16853" target="_top">Bug#16853</a>)</p></li><li><p>
        For an event having no <code class="literal">STARTS</code> time specified
        when it was created, the <code class="literal">mysql.event</code> table's
        <code class="literal">start</code> column now displays the creation time
        rather than <code class="literal">NULL</code>.
      </p><p>
        In addition, both the <code class="literal">SHOW EVENTS</code> statement's
        <code class="literal">Starts</code> column and the
        <code class="literal">STARTS</code> column of the
        <code class="literal">INFORMATION_SCHEMA.EVENTS</code> table are now empty
        rather than <code class="literal">NULL</code> when
        <code class="literal">STARTS</code> was not used in the <code class="literal">CREATE
        EVENT</code> statement.
       (<a href="http://bugs.mysql.com/16537" target="_top">Bug#16537</a>)</p></li><li><p>
        Event names are now case-insenstive. That is (for example), you
        cannot have events with the names <code class="literal">Myevent</code> and
        <code class="literal">MyEvent</code> belonging to the same database and
        definer.
       (<a href="http://bugs.mysql.com/16415" target="_top">Bug#16415</a>)</p></li><li><p>
        Description of the <code class="literal">EVENT</code> privilege has been
        changed to <code class="literal">To create, alter, drop, and execute
        events</code>.
       (<a href="http://bugs.mysql.com/16412" target="_top">Bug#16412</a>)</p></li><li><p>
        <code class="literal">MICROSECOND</code> intervals are no longer allowed
        for events.
       (<a href="http://bugs.mysql.com/16411" target="_top">Bug#16411</a>)</p></li><li><p>
        Events no longer support times past the end of the Unix epoch.
        (Formerly, such dates were interpreted as being at the beginning
        of the Unix epoch.)
       (<a href="http://bugs.mysql.com/16396" target="_top">Bug#16396</a>)</p></li><li><p>
        The XPath <code class="literal">last()</code> function is now
        implemented for use with
        <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a>.
       (<a href="http://bugs.mysql.com/16318" target="_top">Bug#16318</a>)</p></li><li><p>
        The <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> function with
        <code class="literal">contains()</code> now uses the SQL collation in
        making comparisons. Perviously, comparisons were always binary
        (that is, case-sensitive).
       (<a href="http://bugs.mysql.com/16316" target="_top">Bug#16316</a>)</p></li><li><p>
        Triggers from older servers that included no
        <code class="literal">DEFINER</code> clause in the trigger definition now
        execute with the privileges of the invoker (which on the slave
        is the slave SQL thread). Previously, replication slaves could
        not replicate such triggers.
       (<a href="http://bugs.mysql.com/16266" target="_top">Bug#16266</a>)</p></li><li><p>
        Names of subpartitions must now be unique for an entire table,
        and not merely within the same partition.
       (<a href="http://bugs.mysql.com/15408" target="_top">Bug#15408</a>)</p></li><li><p>
        Added the <code class="option">--sysdate-is-now</code> option to
        <span><strong class="command">mysqld</strong></span> to enable
        <a href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a> to be treated
        as an alias for
        <a href="functions.html#function_now"><code class="literal">NOW()</code></a>. See
        <a href="functions.html#date-and-time-functions" title="11.6. Date and Time Functions">Section 11.6, “Date and Time Functions”</a>.
       (<a href="http://bugs.mysql.com/15101" target="_top">Bug#15101</a>)</p></li><li><p>
        <code class="filename">mysqldump</code> now surrounds the
        <code class="literal">DEFINER</code>, <code class="literal">SQL SECURITY
        DEFINER</code> and <code class="literal">WITH CHECK OPTION</code>
        clauses of a <code class="literal">CREATE VIEW</code> statement with
        "not in version" comments to prevent errors in earlier
        versions of MySQL.
       (<a href="http://bugs.mysql.com/14871" target="_top">Bug#14871</a>)</p></li><li><p>
        The <code class="literal">mysql_ping</code> function will now retry if
        the <code class="literal">reconnect</code> flag is set and error
        <code class="literal">CR_SERVER_LOST</code> is encountered during the
        first attempt to ping the server.
       (<a href="http://bugs.mysql.com/14057" target="_top">Bug#14057</a>)</p></li><li><p>
        The <code class="filename">mysqltest</code> utility now converts all
        <code class="literal">CR/LF</code> combinations to <code class="literal">LF</code>
        to allow test cases intended for Windows to work properly on
        UNIX-like systems.
       (<a href="http://bugs.mysql.com/13809" target="_top">Bug#13809</a>)</p></li><li><p>
        The output from <code class="literal">SHOW CREATE TABLE</code> is more
        consistent about using uppercase for keywords. Data types still
        are in lowercase.
       (<a href="http://bugs.mysql.com/10460" target="_top">Bug#10460</a>)</p></li><li><p>
        The client API now attempts to reconnect using TCP/IP if the
        <code class="literal">reconnect</code> flag is set, as is the case with
        sockets.
       (<a href="http://bugs.mysql.com/2845" target="_top">Bug#2845</a>)</p></li><li><p>
        The <code class="literal">binlog_format</code> system variable now can be
        set to a third format, <code class="literal">MIXED</code>, as described in
        <a href="replication.html#replication-formats" title="19.1.2. Replication Formats">Section 19.1.2, “Replication Formats”</a>.
      </p></li><li><p>
        The syntax for <code class="literal">CREATE PROCEDURE</code> and
        <code class="literal">CREATE FUNCTION</code> statements now includes a
        <code class="literal">DEFINER</code> clause. The
        <code class="literal">DEFINER</code> value specifies the security context
        to be used when checking access privileges at routine invocation
        time if the routine has the <code class="literal">SQL SECURITY
        DEFINER</code> characteristic. See
        <a href="stored-procedures.html#create-procedure" title="23.2.2. CREATE PROCEDURE and CREATE
        FUNCTION Syntax">Section 23.2.2, “<code class="literal">CREATE PROCEDURE</code> and <code class="literal">CREATE
        FUNCTION</code> Syntax”</a>, for more
        information.
      </p><p>
        When <span><strong class="command">mysqldump</strong></span> is invoked with the
        <code class="option">--routines</code> option, it now dumps the
        <code class="literal">DEFINER</code> value for stored routines.
      </p></li><li><p>
        The <code class="literal">binlog_format</code> system variable now is
        dynamic and can be changed at runtime, as described in
        <a href="replication.html#replication-formats" title="19.1.2. Replication Formats">Section 19.1.2, “Replication Formats”</a>.
      </p></li><li><p>
        A slave server may now switch the replication format
        automatically. This happens when the server is running in either
        <code class="literal">STATEMENT</code> or <code class="literal">MIXED</code> format
        and encounters a row in the binary log that is written in
        <code class="literal">ROW</code> logging format. In that case, the slave
        switches to row-based replication temporarily for that event,
        and switches back to the previous format afterwards.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        Trying to insert a value into a nonexistent
        <code class="literal">LIST</code> partition of an <code class="literal">NDB</code>
        table would cause the server to crash.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Beginning with MySQL 5.1.12, user-defined partitioning types
          other than <code class="literal">KEY</code> or <code class="literal">LINEAR
          KEY</code> were disabled for <code class="literal">NDB</code> tables.
        </p></div><p>(<a href="http://bugs.mysql.com/17763" target="_top">Bug#17763</a>)</p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        A repeated <code class="literal">SELECT</code> on a partitioned table that
        used the <code class="literal">NDB</code> storage engine could cause the
        server to crash.
       (<a href="http://bugs.mysql.com/17390" target="_top">Bug#17390</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Attempting to restart a node with dropped events still pending
        would fail.
       (<a href="http://bugs.mysql.com/18491" target="_top">Bug#18491</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Two <span><strong class="command">mysqld</strong></span> processes starting at the same
        time could cause a race condition.
       (<a href="http://bugs.mysql.com/18472" target="_top">Bug#18472</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A timeout in the handling of an <code class="literal">ABORT</code>
        condition with more that 32 operations could yield a node
        failure.
       (<a href="http://bugs.mysql.com/18414" target="_top">Bug#18414</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Two <span><strong class="command">mysqld</strong></span> processes did not synchronise
        <code class="literal">DROP TABLE</code> binary log events correctly.
       (<a href="http://bugs.mysql.com/18395" target="_top">Bug#18395</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A node restart immediately following a <code class="literal">CREATE
        TABLE</code> would fail.
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          This fix supports 2-node Clusters only.
        </p></div><p>(<a href="http://bugs.mysql.com/18385" target="_top">Bug#18385</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In event of a node failure during a rollback, a
        “<span class="quote">false</span>” lock could be established on the backup for
        that node, which lock could not be removed without restarting
        the node.
       (<a href="http://bugs.mysql.com/18352" target="_top">Bug#18352</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When multiple node restarts were attempted without allowing each
        restart to complete, the error message returned was
        <span class="errortext">Array index out of bounds</span> rather than
        <span class="errortext">Too many crashed replicas</span>.
       (<a href="http://bugs.mysql.com/18349" target="_top">Bug#18349</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The cluster created a crashed replica of a table having an
        ordered index — or when logging was not enabled, of a
        table having a table or unique index — leading to a crash
        of the cluster following 8 successive restarts.
       (<a href="http://bugs.mysql.com/18298" target="_top">Bug#18298</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Issuing a <code class="literal">DROP LOGFILE GROUP</code> statement would
        cause <span><strong class="command">ndbd</strong></span> processes to crash if MySQL had
        been compiled with <span><strong class="command">gcc4</strong></span>.
       (<a href="http://bugs.mysql.com/18295" target="_top">Bug#18295</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">auto_increment</code> values were not propagated
        correctly in statement-based replication.
       (<a href="http://bugs.mysql.com/18208" target="_top">Bug#18208</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When replacing a failed master node, the replacement node could
        cause the cluster to crash from a buffer overflow if it had an
        excessively large amount of data to write to the cluster log.
       (<a href="http://bugs.mysql.com/18118" target="_top">Bug#18118</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Memory was mistakenly freed for <code class="literal">NdbRecAttr</code>
        objects during addition of an index while replicating the
        cluster, which could cause <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/18106" target="_top">Bug#18106</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Insufficient <code class="literal">StringBuffer</code> memory when
        attempting to create a trigger caused the server to crash.
       (<a href="http://bugs.mysql.com/18101" target="_top">Bug#18101</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Variable-length columns used as primary keys were not handled
        correctly.
       (<a href="http://bugs.mysql.com/18075" target="_top">Bug#18075</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Row-based replication could fail with tables using
        <code class="literal">VARCHAR</code> columns for primary keys and having
        <code class="literal">BLOB</code> columns.
       (<a href="http://bugs.mysql.com/18067" target="_top">Bug#18067</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">CREATE UNIQUE INDEX</code> on a column containing
        non-unique data could cause one or more <span><strong class="command">ndbd</strong></span>
        nodes to hang or crash.
       (<a href="http://bugs.mysql.com/18040" target="_top">Bug#18040</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Node recovery of tables with <code class="literal">VARCHAR</code> columns
        using character sets was inconsistent, which could cause a
        number of issues, including the data nodes failing to restart
        and <code class="literal">ALTER TABLE</code> statements to hang.
       (<a href="http://bugs.mysql.com/18026" target="_top">Bug#18026</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A <code class="literal">SELECT ... ORDER BY</code> query on an explicitly
        partitioned Cluster table with no explicit indexes would crash
        the server.
       (<a href="http://bugs.mysql.com/17899" target="_top">Bug#17899</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">ALTER TABLE ... ADD INDEX</code> failed with
        <span class="errortext">ERROR 756: Index on disk column is not
        supported</span> when run against a Disk Data table having
        a primary key.
       (<a href="http://bugs.mysql.com/17888" target="_top">Bug#17888</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In some cases, a single <span><strong class="command">ndbd</strong></span> node failed
        following a system restart.
       (<a href="http://bugs.mysql.com/17854" target="_top">Bug#17854</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        (Replication): The binary log on the secondary master was not
        being set up correctly following a table rename.
       (<a href="http://bugs.mysql.com/17838" target="_top">Bug#17838</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A simultaneous <code class="literal">RENAME</code> of several tables was
        logged multiple times.
       (<a href="http://bugs.mysql.com/17827" target="_top">Bug#17827</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Trying to perform a <code class="literal">DELETE</code> from an
        <code class="literal">NDB</code> table following a <code class="literal">LOCK
        TABLES</code> caused the <span><strong class="command">ndbd</strong></span> processes to
        hang.
       (<a href="http://bugs.mysql.com/17812" target="_top">Bug#17812</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Trying to update very large partitioned tables using the
        <code class="literal">NDB</code> storage engine sometimes caused the
        server to crash.
       (<a href="http://bugs.mysql.com/17806" target="_top">Bug#17806</a>, <a href="http://bugs.mysql.com/16385" target="_top">Bug#16385</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Using <code class="literal">ALTER TABLE ... ADD PARTITION</code> on a
        table partitioned by <code class="literal">LIST</code> would cause the
        client to hang.
       (<a href="http://bugs.mysql.com/17701" target="_top">Bug#17701</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        With a single replica, transactions waiting in the log
        synchronisation queue were not being restarted, causing them to
        be aborted.
       (<a href="http://bugs.mysql.com/17536" target="_top">Bug#17536</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">ALTER TABLE</code> on a partitioned
        <code class="literal">NDB</code> table could cause the server to crash.
       (<a href="http://bugs.mysql.com/17499" target="_top">Bug#17499</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">DELETE</code> operations on <code class="literal">NDB</code>
        tables could cause memory leaks.
       (<a href="http://bugs.mysql.com/16874" target="_top">Bug#16874</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Some query cache statistics were not always correctly reported
        for Cluster tables.
       (<a href="http://bugs.mysql.com/16795" target="_top">Bug#16795</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Restarting nodes were allowed to start and join the cluster too
        early.
       (<a href="http://bugs.mysql.com/16772" target="_top">Bug#16772</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">UNDO_BUFFER_SIZE</code> was limited to 17 MB.
       (<a href="http://bugs.mysql.com/16657" target="_top">Bug#16657</a>, <a href="http://bugs.mysql.com/17890" target="_top">Bug#17890</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Inserting and deleting <code class="literal">BLOB</code> column values
        while a backup was in process could cause data nodes to shut
        down.
       (<a href="http://bugs.mysql.com/14028" target="_top">Bug#14028</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        <code class="literal">CREATE UNIQUE INDEX</code> failed with
        <span class="errortext">Error 4243: Index not found</span>.
       (<a href="http://bugs.mysql.com/18039" target="_top">Bug#18039</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        It was not possible to create more than 9 tablespaces.
       (<a href="http://bugs.mysql.com/16913" target="_top">Bug#16913</a>)</p></li><li><p>
        Replication of data stored in a partitioned table would cause
        slave servers to issue a assertion and terminate.
       (<a href="http://bugs.mysql.com/18436" target="_top">Bug#18436</a>)</p></li><li><p>
        A <code class="literal">SELECT ... ORDER BY ...</code> from a view defined
        using a function could crash the server. An example of such a
        view is <code class="literal">CREATE VIEW v1 AS SELECT SQRT(c1) FROM
        t1</code>.
       (<a href="http://bugs.mysql.com/18386" target="_top">Bug#18386</a>)</p></li><li><p>
        The server would crash when <code class="literal">SHOW STATUS</code> was
        called on a server linked with <code class="literal">yaSSL</code>.
       (<a href="http://bugs.mysql.com/18310" target="_top">Bug#18310</a>)</p></li><li><p>
        The <code class="literal">ExtractValue()</code> function did not return
        an error when passed an invalid XPath string.
       (<a href="http://bugs.mysql.com/18172" target="_top">Bug#18172</a>)</p></li><li><p>
        Using the <code class="literal">position()</code> function in the XPath
        argument to <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a>
        crashed the server.
       (<a href="http://bugs.mysql.com/18171" target="_top">Bug#18171</a>)</p></li><li><p>
        <code class="literal">REPAIR TABLE</code>, <code class="literal">OPTIMIZE
        TABLE</code>, and <code class="literal">ALTER TABLE</code> operations
        on transactional tables (or on tables of any type on Windows)
        could corrupt triggers associated with those tables.
       (<a href="http://bugs.mysql.com/18153" target="_top">Bug#18153</a>)</p></li><li><p>
        Connecting to a server with a UCS2 default character set with a
        client using a non-UCS2 character set crashed the server.
       (<a href="http://bugs.mysql.com/18004" target="_top">Bug#18004</a>)</p></li><li><p>
        Using <code class="literal">ALTER TABLE ... REBUILD PARTITION</code>
        without specifying the name of the partition caused the server
        to crash, rather than reporting a syntax error.
       (<a href="http://bugs.mysql.com/17947" target="_top">Bug#17947</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE ... REBUILD PARTITION</code> with no
        partition name specified would crash the server.
       (<a href="http://bugs.mysql.com/17940" target="_top">Bug#17940</a>)</p></li><li><p>
        A query with a <code class="literal">WHERE
        <em class="replaceable"><code>date_column</code></em> &gt;
        <em class="replaceable"><code>date_value</code></em></code> condition failed
        on a table partitioned by <code class="literal">RANGE</code>.
       (<a href="http://bugs.mysql.com/17894" target="_top">Bug#17894</a>)</p></li><li><p>
        Renaming and adding a new column to a partitioned table in the
        same <code class="literal">ALTER TABLE</code> statement caused the server
        to crash.
       (<a href="http://bugs.mysql.com/17772" target="_top">Bug#17772</a>)</p></li><li><p>
        <code class="literal">MyISAM</code>: Performing a bulk insert on a table
        referenced by a trigger would crash the table.
       (<a href="http://bugs.mysql.com/17764" target="_top">Bug#17764</a>)</p></li><li><p>
        Using triggers with partitioned <code class="literal">InnoDB</code> tables
        led to incorrect results.
       (<a href="http://bugs.mysql.com/17744" target="_top">Bug#17744</a>)</p></li><li><p>
        Updating a view that filters certain rows to set a filtered out
        row to be included in the table caused infinite loop. For
        example, if the view has a WHERE clause of <code class="literal">salary &gt;
        100</code> then issuing an UPDATE statement of <code class="literal">SET
        salary = 200 WHERE id = 10</code>, caused an infinite loop.
       (<a href="http://bugs.mysql.com/17726" target="_top">Bug#17726</a>)</p></li><li><p>
        A security enhancement in Visual Studio 8 could cause a MySQL
        debug server compiled with it to hang when running
        <code class="literal">SELECT</code> queries against partitioned tables.
       (<a href="http://bugs.mysql.com/17722" target="_top">Bug#17722</a>)</p></li><li><p>
        The <code class="literal">EXAMPLE</code> storage engine did not work on
        Windows.
       (<a href="http://bugs.mysql.com/17721" target="_top">Bug#17721</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE ... REORGANIZE PARTITION</code> failed
        with <span class="errortext">Error on rename of
        <em class="replaceable"><code>filename</code></em> ...</span> on Windows.
       (<a href="http://bugs.mysql.com/17720" target="_top">Bug#17720</a>)</p></li><li><p>
        The MySQL server could crash with out of memory errors when
        performing aggregate functions on a <code class="literal">DECIMAL</code>
        column.
       (<a href="http://bugs.mysql.com/17602" target="_top">Bug#17602</a>)</p></li><li><p>
        <code class="literal">NULL</code> values were written to the
        <code class="literal">mysql.slow_log</code> table incorrectly.
       (<a href="http://bugs.mysql.com/17600" target="_top">Bug#17600</a>)</p></li><li><p>
        <span><strong class="command">mysql_fix_privilege_tables</strong></span> did not create the
        <code class="literal">mysql.plugin</code> table.
       (<a href="http://bugs.mysql.com/17568" target="_top">Bug#17568</a>)</p></li><li><p>
        Improper checking of binary log statements could result in a
        server crash.
       (<a href="http://bugs.mysql.com/17457" target="_top">Bug#17457</a>)</p></li><li><p>
        Rpeated invocations of a stored procedure containing a
        <code class="literal">SHOW CREATE EVENT</code> statement would result in
        the error <span class="errortext">Packets out of order</span>.
       (<a href="http://bugs.mysql.com/17403" target="_top">Bug#17403</a>)</p></li><li><p>
        For <code class="literal">FEDERATED</code> tables, a
        <code class="literal">SELECT</code> statement with an <code class="literal">ORDER
        BY</code> clause did not return rows in the proper order.
       (<a href="http://bugs.mysql.com/17377" target="_top">Bug#17377</a>)</p></li><li><p>
        <code class="literal">SELECT ... WHERE <em class="replaceable"><code>column</code></em> LIKE
        'A%'</code>, when <em class="replaceable"><code>column</code></em> had a key
        and used the <code class="literal">latin2_czech_cs</code> collation,
        caused the wrong number of rows to be returned.
       (<a href="http://bugs.mysql.com/17374" target="_top">Bug#17374</a>)</p></li><li><p>
        Calling <code class="literal">CREATE TABLE</code> or <code class="literal">ALTER
        TABLE</code> twice on a partitioned table in a stored
        procedure or a prepared statement resulted in errors and
        sometimes server crashes.
       (<a href="http://bugs.mysql.com/17290" target="_top">Bug#17290</a>)</p></li><li><p>
        Checks for permissions on database operations could be performed
        in a case-insensitive manner (a user with permissions on
        database <code class="literal">MYDATABASE</code> could by accident get
        permissions on database <code class="literal">myDataBase</code>), if the
        privilege data were still cached from a previous check.
       (<a href="http://bugs.mysql.com/17279" target="_top">Bug#17279</a>)</p></li><li><p>
        Stored procedures that call UDFs and pass local string variables
        caused server crashes.
       (<a href="http://bugs.mysql.com/17261" target="_top">Bug#17261</a>)</p></li><li><p>
        A problem with <code class="literal">NULL</code>s and interval mapping
        sometimes caused incorrect results or crashes when trying to use
        less-than searches on partitioned tables.
       (<a href="http://bugs.mysql.com/17173" target="_top">Bug#17173</a>)</p></li><li><p>
        Attempting to add a new partition to a table partitioned by a
        unique key would cause an <span class="errortext">Out of memory</span>
        error.
       (<a href="http://bugs.mysql.com/17169" target="_top">Bug#17169</a>)</p></li><li><p>
        Creating a table with the same name as the mapped name of
        another table caused a server crash. For example, if MySQL maps
        the table name <code class="literal">txu#P#p1</code> to
        <code class="literal">txu@0023P@0023p1</code> on disk, creating another
        table named <code class="literal">txu@0023P@0023p1</code> crashed the
        server.
       (<a href="http://bugs.mysql.com/17142" target="_top">Bug#17142</a>)</p></li><li><p>
        Trying to add a partition to a table having subpartitions could
        crash the server.
       (<a href="http://bugs.mysql.com/17140" target="_top">Bug#17140</a>)</p></li><li><p>
        Use of <code class="literal">TRUNCATE TABLE</code> for a
        <code class="literal">TEMPORARY</code> table on a master server was
        propagated to slaves properly, but slaves did not decrement the
        <code class="literal">Slave_open_temp_tables</code> counter properly.
       (<a href="http://bugs.mysql.com/17137" target="_top">Bug#17137</a>)</p></li><li><p>
        Attempting to use a conflicting <code class="literal">VALUES</code> clause
        in <code class="literal">ALTER TABLE ... ADD PARTITION</code> caused the
        server to crash. An example of such a conflicting clause would
        be that uses <code class="literal">VALUES LESS THAN
        (<em class="replaceable"><code>constant</code></em>)</code> (which indicates
        a range) with a table that is partitioned by
        <code class="literal">LIST</code>.
       (<a href="http://bugs.mysql.com/17127" target="_top">Bug#17127</a>)</p></li><li><p>
        A failed <code class="literal">ALTER TABLE ... ADD PRIMARY KEY</code> on a
        partitioned table would result in bad table metadata and could
        possibly crash the server.
       (<a href="http://bugs.mysql.com/17097" target="_top">Bug#17097</a>)</p></li><li><p>
        Stored routine names longer than 64 characters were silently
        truncated. Now the limit is properly enforced and an error
        occurs.
       (<a href="http://bugs.mysql.com/17015" target="_top">Bug#17015</a>)</p></li><li><p>
        Cursors in stored routines could cause a server crash.
       (<a href="http://bugs.mysql.com/16887" target="_top">Bug#16887</a>)</p></li><li><p>
        Triggers created without <code class="literal">BEGIN</code> and
        <code class="literal">END</code> clauses resulted in “<span class="quote">You have an
        error in your SQL syntax</span>” errors when dumping and
        replaying a binary log.
       (<a href="http://bugs.mysql.com/16878" target="_top">Bug#16878</a>)</p></li><li><p>
        Using <code class="literal">ALTER TABLE</code> to increase the length of a
        <code class="literal">BINARY(<em class="replaceable"><code>M</code></em>)</code> column
        caused column values to be padded with spaces rather than
        <code class="literal">0x00</code> bytes.
       (<a href="http://bugs.mysql.com/16857" target="_top">Bug#16857</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE ... COALESCE PARTITION</code> failed
        with an <span class="errortext">Out of Memory</span> error.
       (<a href="http://bugs.mysql.com/16810" target="_top">Bug#16810</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE ... ADD COLUMN ... AFTER ...</code>
        failed when used on partitioned tables.
       (<a href="http://bugs.mysql.com/16806" target="_top">Bug#16806</a>)</p></li><li><p>
        If the server was started with the
        <code class="option">--skip-grant-tables</code> option, it was impossible
        to create a trigger or a view without explicitly specifying a
        <code class="literal">DEFINER</code> clause.
       (<a href="http://bugs.mysql.com/16777" target="_top">Bug#16777</a>)</p></li><li><p>
        In a highly concurrent environment, a server crash or deadlock
        could result from execution of a statement that used stored
        functions or activated triggers coincident with alteration of
        the tables used by these functions or triggers.
       (<a href="http://bugs.mysql.com/16593" target="_top">Bug#16593</a>)</p></li><li><p>
        Clients compiled from source with the
        <code class="option">--without-readline</code> did not save command history
        from session to session.
       (<a href="http://bugs.mysql.com/16557" target="_top">Bug#16557</a>)</p></li><li><p>
        Using <code class="literal">ORDER BY <em class="replaceable"><code>intvar</code></em>
        </code> within a stored procedure (where
        <em class="replaceable"><code>intvar</code></em> is an integer variable or
        expression) would crash the server.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The use of an integer <em class="replaceable"><code>i</code></em> in an
          <code class="literal">ORDER BY <em class="replaceable"><code>i</code></em></code>
          clause for sorting the result by the
          <em class="replaceable"><code>i</code></em> <sup>th</sup>
          column is deprecated (and non-standard). It should
          <span class="emphasis"><em>not</em></span> be used in new applications. See
          <a href="sql-syntax.html#select" title="12.2.7. SELECT Syntax">Section 12.2.7, “<code class="literal">SELECT</code> Syntax”</a>.
        </p></div><p>(<a href="http://bugs.mysql.com/16474" target="_top">Bug#16474</a>)</p></li><li><p>
        Slow queries executed by scheduled events were not being written
        to the slow query log.
       (<a href="http://bugs.mysql.com/16426" target="_top">Bug#16426</a>)</p></li><li><p>
        <code class="literal">INSERT</code> statements executed by scheduled
        events were not written to the general log.
       (<a href="http://bugs.mysql.com/16413" target="_top">Bug#16413</a>)</p></li><li><p>
        Repeated invocations of a stored procedure containing a
        <code class="literal">CREATE EVENT</code> or <code class="literal">ALTER
        EVENT</code> statement would crash the server.
       (<a href="http://bugs.mysql.com/16408" target="_top">Bug#16408</a>)</p></li><li><p>
        Names of subpartitions were not displayed in the output of
        <code class="literal">SHOW CREATE TABLE</code>.
       (<a href="http://bugs.mysql.com/16370" target="_top">Bug#16370</a>)</p></li><li><p>
        The <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> function
        would not accept expressions which matched element names
        containing an underscore character.
       (<a href="http://bugs.mysql.com/16320" target="_top">Bug#16320</a>)</p></li><li><p>
        The <code class="literal">self()</code> XPath function was not handled
        correcty by <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a>.
       (<a href="http://bugs.mysql.com/16315" target="_top">Bug#16315</a>)</p></li><li><p>
        The <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> function
        allowed the use of the <code class="literal">!</code> character in
        identifiers by ignoring the illegal character. This is now
        correctly reported as a syntax error.
       (<a href="http://bugs.mysql.com/16313" target="_top">Bug#16313</a>)</p></li><li><p>
        Slave servers would retry the execution of an SQL statement an
        infinite number of times, ignoring the value
        <code class="literal">SLAVE_TRANSACTION_RETRIES</code> when using the NDB
        engine.
       (<a href="http://bugs.mysql.com/16228" target="_top">Bug#16228</a>)</p></li><li><p>
        A memory leak caused warnings on slaves for certain statements
        that executed without warning on the master.
       (<a href="http://bugs.mysql.com/16175" target="_top">Bug#16175</a>)</p></li><li><p>
        The <code class="literal">DEFINER</code> value for stored routines was not
        replicated.
       (<a href="http://bugs.mysql.com/15963" target="_top">Bug#15963</a>)</p></li><li><p>
        No error was reported when subpartitions were defined for a
        non-subpartitioned table.
       (<a href="http://bugs.mysql.com/15961" target="_top">Bug#15961</a>)</p></li><li><p>
        Character set conversion of string constants for
        <code class="literal">UNION</code> of constant and table column was not
        done when it was safe to do so.
       (<a href="http://bugs.mysql.com/15949" target="_top">Bug#15949</a>)</p></li><li><p>
        The <a href="apis.html#mysql-close" title="29.2.3.5. mysql_close()"><code class="literal">mysql_close()</code></a> C API
        function leaked handles for shared-memory connections on
        Windows.
       (<a href="http://bugs.mysql.com/15846" target="_top">Bug#15846</a>)</p></li><li><p>
        A <code class="literal">SELECT</code> using a function against a nested
        view would crash the server.
       (<a href="http://bugs.mysql.com/15683" target="_top">Bug#15683</a>)</p></li><li><p>
        Setting up subpartitions on at least one but not all the
        partitions of a partitioned table caused the server to crash.
       (<a href="http://bugs.mysql.com/15407" target="_top">Bug#15407</a>)</p></li><li><p>
        During conversion from one character set to
        <code class="literal">ucs2</code>, multi-byte characters with no
        <code class="literal">ucs2</code> equivalent were converted to multiple
        characters, rather than to <code class="literal">0x003F QUESTION
        MARK</code>.
       (<a href="http://bugs.mysql.com/15375" target="_top">Bug#15375</a>)</p></li><li><p>
        <code class="literal">CREATE TABLE ... PARTITION ... AS SELECT ...</code>
        would cause the server to crash.
       (<a href="http://bugs.mysql.com/15336" target="_top">Bug#15336</a>)</p></li><li><p>
        When attempting to insert a <code class="literal">0</code> into a
        <code class="literal">LIST</code>-partitioned table that had no value-list
        containing <code class="literal">0</code>, no error was reported.
       (<a href="http://bugs.mysql.com/15253" target="_top">Bug#15253</a>)</p></li><li><p>
        <code class="literal">SELECT COUNT(*)</code> for a
        <code class="literal">MyISAM</code> table could return different results
        depending on whether an index was used.
       (<a href="http://bugs.mysql.com/14980" target="_top">Bug#14980</a>)</p></li><li><p>
        Stored routines that contained only a single statement were not
        written properly to the dumpfile when using
        <code class="filename">mysqldump</code>.
       (<a href="http://bugs.mysql.com/14857" target="_top">Bug#14857</a>)</p></li><li><p>
        Execution of a stored function or trigger which inserted data
        into a table while running concurrent selects on the same table
        could result in storing incorrect data in the query cache.
       (<a href="http://bugs.mysql.com/14767" target="_top">Bug#14767</a>)</p></li><li><p>
        Naming a partition using the characters
        <span class="bold"><strong>Ç</strong></span> or
        <span class="bold"><strong>ç</strong></span> (“<span class="quote">c-cedilla</span>”;
        Unicode <code class="literal">00C7</code> or <code class="literal">00E7</code>) made
        unreadable the table containing the partition.
       (<a href="http://bugs.mysql.com/14527" target="_top">Bug#14527</a>)</p></li><li><p>
        Searches on indexed columns of partitioned tables failed to find
        all matching rows following updates of the indexed columns.
       (<a href="http://bugs.mysql.com/14526" target="_top">Bug#14526</a>)</p></li><li><p>
        Creating a partition which depends on an expression containing a
        column using the UTF8 character set would cause the server to
        crash.
       (<a href="http://bugs.mysql.com/14367" target="_top">Bug#14367</a>)</p></li><li><p>
        On Linux, creation of table partitions failed within a stored
        procedure.
       (<a href="http://bugs.mysql.com/14363" target="_top">Bug#14363</a>)</p></li><li><p>
        Invoking more than once a prepared statement that creates a
        partitioned table would crash the server.
       (<a href="http://bugs.mysql.com/14350" target="_top">Bug#14350</a>)</p></li><li><p>
        The <code class="literal">RENAME TABLE</code> statement did not move
        triggers to the new table.
       (<a href="http://bugs.mysql.com/13525" target="_top">Bug#13525</a>)</p></li><li><p>
        The server would execute stored routines that had a non-existent
        definer.
       (<a href="http://bugs.mysql.com/13198" target="_top">Bug#13198</a>)</p></li><li><p>
        The length of a <code class="literal">VARCHAR()</code> column that used
        the <code class="literal">utf8</code> character set would increase each
        time the table was re-created in a stored procedure or prepared
        statement, eventually causing the <code class="literal">CREATE
        TABLE</code> statement to fail.
       (<a href="http://bugs.mysql.com/13134" target="_top">Bug#13134</a>)</p></li><li><p>
        Loading of UDFs in a statically linked MySQL caused a server
        crash. UDF loading is now blocked if the MySQL server is
        statically linked.
       (<a href="http://bugs.mysql.com/11835" target="_top">Bug#11835</a>)</p></li><li><p>
        Setting the <code class="literal">myisam_repair_threads</code> system
        variable to a value larger than 1 could cause corruption of
        large <code class="literal">MyISAM</code> tables.
       (<a href="http://bugs.mysql.com/11527" target="_top">Bug#11527</a>)</p></li><li><p>
        Issuing <code class="literal">GRANT EXECUTE</code> on a procedure would
        display any warnings related to the creation of the procedure.
       (<a href="http://bugs.mysql.com/7787" target="_top">Bug#7787</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-7"></a>C.1.23. Changes in  MySQL 5.1.7 (27 February 2006)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The <code class="literal">mysql_stmt_attr_get()</code> C API function
        now returns a boolean rather than an unsigned int for
        <code class="literal">STMT_ATTR_UPDATE_MAX_LENGTH</code>.
       (<a href="http://bugs.mysql.com/16144" target="_top">Bug#16144</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Due to a change in the naming scheme for partitioning and
        subpartitioning files, it is not possible for the server to read
        partitioned tables created in previous MySQL versions.
        Attempting to read pre-5.1.6 partitioned tables with a MySQL
        5.1.7 or later server now generates a suitable warning message.
      </p><p>
        Two possible workarounds are:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              </p><div class="orderedlist"><ol type="1"><li><p>
                    Create a non-partitioned table with the same table
                    schema using a standard <code class="literal">CREATE
                    TABLE</code> statement (that is, with no
                    partitioning clauses)
                  </p></li><li><p>
                    Issue a <code class="literal">SELECT INTO</code> to copy the
                    data into the non-partitioned table before the
                    upgrade
                  </p></li></ol></div><p>
              Following the upgrade, you can partition the new table
              using <code class="literal">ALTER TABLE ... PARTITION BY ...</code>.
            </p></li><li><p>
              Alternatively, you can dump the table using
              <span><strong class="command">mysqldump</strong></span> prior to upgrading and reload
              it afterwards with <code class="literal">LOAD DATA</code>.
            </p></li></ul></div><p>
        In either case, you should drop the pre-5.1.6 partitioned tables
        before upgrading to 5.1.6 or later.
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          If any partitioned tables that were created prior to MySQL
          5.1.6 are present following an upgrade to MySQL 5.1.6 or
          later, it is also not possible to read from the
          <code class="literal">INFORMATION_SCHEMA.PARTITIONS</code> table, nor
          will you be able to drop those tables or the database or
          databases in which they are located. In this event, you must:
          </p><div class="orderedlist"><ol type="1"><li><p>
                Shut down <span><strong class="command">mysqld</strong></span>
              </p></li><li><p>
                Manually delete the table, partition, and (if any)
                subpartition files
              </p></li><li><p>
                Restart the MySQL Server
              </p></li></ol></div><p>
        </p></div><p>(<a href="http://bugs.mysql.com/13437" target="_top">Bug#13437</a>, <a href="http://bugs.mysql.com/16695" target="_top">Bug#16695</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        <code class="literal">TYPE = <em class="replaceable"><code>engine_name</code></em>
        </code> is no longer accepted as a synonym for the
        <code class="literal">ENGINE = <em class="replaceable"><code>engine_name</code></em>
        </code> table option. (<code class="literal">TYPE</code> has been
        deprecated since MySQL 4.0.)
      </p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Attempting to <code class="literal">SELECT ... FROM
        INFORMATION_SCHEMA.FILES</code> now raises a warning in the
        event that the cluster has crashed.
       (<a href="http://bugs.mysql.com/17087" target="_top">Bug#17087</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Status messages have been added to
        <span><strong class="command">ndb_restore</strong></span> to enable users to know that data
        files for Disk Data are being created.
       (<a href="http://bugs.mysql.com/16873" target="_top">Bug#16873</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        It is now possible to replicate <code class="literal">NDB</code> tables
        having no explicit primary key. See
        <a href="mysql-cluster.html#mysql-cluster-replication" title="20.11. MySQL Cluster Replication">Section 20.11, “MySQL Cluster Replication”</a>.
      </p></li><li><p>
        Creator privileges are now checked for all events before
        execution.
       (<a href="http://bugs.mysql.com/17289" target="_top">Bug#17289</a>)</p></li><li><p>
        <code class="literal">CREATE EVENT</code>, <code class="literal">DROP EVENT</code>,
        and <code class="literal">ALTER EVENT</code> statements are not allowed in
        triggers.
       (<a href="http://bugs.mysql.com/16410" target="_top">Bug#16410</a>)</p></li><li><p>
        The SQL mode in effect at the time an event is created or
        altered is recorded and used during event execution.
       (<a href="http://bugs.mysql.com/16407" target="_top">Bug#16407</a>)</p></li><li><p>
        New <code class="literal">charset</code> command added to
        <span><strong class="command">mysql</strong></span> command-line client. By typing
        <code class="literal">charset <em class="replaceable"><code>name</code></em></code> or
        <code class="literal">\C <em class="replaceable"><code>name</code></em></code> (such as
        <code class="literal">\C UTF8</code>), the client character set can be
        changed without reconnecting.
       (<a href="http://bugs.mysql.com/16217" target="_top">Bug#16217</a>)</p></li><li><p>
        Added the <code class="option">--wait-timeout</code> option to
        <span><strong class="command">mysqlmanager</strong></span> to allow configuration of the
        timeout for dropping an inactive connection, and increased the
        default timeout from 30 seconds to 28,800 seconds (8 hours).
       (<a href="http://bugs.mysql.com/15980" target="_top">Bug#15980</a>, <a href="http://bugs.mysql.com/12674" target="_top">Bug#12674</a>)</p></li><li><p>
        All subpartitions within a given partitioned table are now
        guaranteed to have unique names.
       (<a href="http://bugs.mysql.com/15408" target="_top">Bug#15408</a>)</p></li><li><p>
        <span><strong class="command">mysqlimport</strong></span> now has a
        <code class="option">--use-threads=<em class="replaceable"><code>N</code></em></code>
        option for loading data files in parallel using
        <em class="replaceable"><code>N</code></em> threads.
      </p></li><li><p>
        Added the <code class="option">--check-upgrade</code> to
        <span><strong class="command">mysqlcheck</strong></span> that invokes <code class="literal">CHECK
        TABLE</code> with the <code class="literal">FOR UPGRADE</code> option.
        Added the <code class="option">--fix-db-names</code> and
        <code class="option">--fix-table-names</code> options to
        <span><strong class="command">mysqlcheck</strong></span>.
      </p></li><li><p>
        Added the <code class="literal">RENAME DATABASE</code> statement.
      </p></li><li><p>
        Added the <code class="literal">PROCESSLIST</code> table to
        <code class="literal">INFORMATION_SCHEMA</code>.
      </p></li><li><p>
        Added the <code class="literal">FOR UPGRADE</code> option for the
        <code class="literal">CHECK TABLE</code> statement. This option checks
        whether tables are incompatible with the current version of
        MySQL Server.
      </p></li><li><p>
        In row-based replication, when executing a Rows_log_event, the
        associated table was locked, the rows applied and the lock
        released. This did not work since there are storage engines that
        count locks and perform an autocommit when the number of locks
        reach zero. Now we ensure that all table maps come before all
        <code class="literal">ROWS</code> events in a statement.
      </p></li><li><p>
        Removed the <code class="literal">have_isam</code> and
        <code class="literal">have_raid</code> system variables.
      </p></li><li><p>
        Several changes were made to make upgrades easier:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Added the <span><strong class="command">mysql_upgrade</strong></span> program that
            checks all tables for incompatibilities with the current
            version of MySQL Server and repairs them if necessary. This
            program should be run for each MySQL upgrade (rather than
            <span><strong class="command">mysql_fix_privilege_tables</strong></span>). See
            <a href="programs.html#mysql-upgrade" title="4.4.8. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.8, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
          </p></li><li><p>
            Added the <code class="literal">FOR UPGRADE</code> option for the
            <code class="literal">CHECK TABLE</code> statement. This option checks
            whether tables are incompatible with the current version of
            MySQL Server.
          </p></li><li><p>
            Added the <code class="option">--check-upgrade</code> to
            <span><strong class="command">mysqlcheck</strong></span> that invokes <code class="literal">CHECK
            TABLE</code> with the <code class="literal">FOR UPGRADE</code>
            option. Added the <code class="option">--fix-db-names</code> and
            <code class="option">--fix-table-names</code> options to
            <span><strong class="command">mysqlcheck</strong></span>.
          </p></li></ul></div></li><li><p>
        Added the <span><strong class="command">mysql_upgrade</strong></span> program that checks
        all tables for incompatibilities with the current version of
        MySQL Server and repairs them if necessary. This program should
        be run for each MySQL upgrade (rather than
        <span><strong class="command">mysql_fix_privilege_tables</strong></span>). See
        <a href="programs.html#mysql-upgrade" title="4.4.8. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.8, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
      </p></li><li><p>
        Added the <code class="literal">IN NATURAL LANGUAGE MODE</code> and
        <code class="literal">IN NATURAL LANGUAGE MODE WITH QUERY EXPANSION</code>
        modifiers for full-text searches. See
        <a href="functions.html#fulltext-search" title="11.8. Full-Text Search Functions">Section 11.8, “Full-Text Search Functions”</a>.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Creating <code class="literal">NDB</code> tables containing
        <code class="literal">BLOB</code> columns but no primary key caused
        unpredictable behavior.
       (<a href="http://bugs.mysql.com/17559" target="_top">Bug#17559</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Inserting the output of
        <a href="functions.html#function_repeat"><code class="literal">REPEAT('<em class="replaceable"><code>some_string</code></em>',
        <em class="replaceable"><code>some_int</code></em>)</code></a> into a
        <code class="literal">BLOB</code> column resulted in the error
        <span class="errortext">Invalid blob attributes or invalid blob parts
        table</span>.
       (<a href="http://bugs.mysql.com/17505" target="_top">Bug#17505</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">ndbd</strong></span> restarts could sometimes fail due to
        incorrect memory access.
       (<a href="http://bugs.mysql.com/17417" target="_top">Bug#17417</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Sharing of table names containing special characters between
        multiple SQL nodes was not handled correctly when binary logging
        was enabled (a timeout error resulted).
       (<a href="http://bugs.mysql.com/17415" target="_top">Bug#17415</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Table definitions were not shared between multiple SQL nodes in
        a cluster without binary logging being enabled.
       (<a href="http://bugs.mysql.com/17414" target="_top">Bug#17414</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Cluster log file paths were truncated to 128 characters. They
        may now be as long as <code class="literal">MAX_PATH</code> (the maximum
        path length permitted by the operating system).
       (<a href="http://bugs.mysql.com/17411" target="_top">Bug#17411</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">SHOW CREATE TABLE</code> would fail when run against
        a table created in a different session.
       (<a href="http://bugs.mysql.com/17340" target="_top">Bug#17340</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Following multiple forced shutdowns and restarts of data nodes,
        <code class="literal">DROP DATABASE</code> could fail.
       (<a href="http://bugs.mysql.com/17325" target="_top">Bug#17325</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="literal">REDO</code> log would become corrupted (and thus
        unreadable) in some circumstances, due to a failure in the query
        handler.
       (<a href="http://bugs.mysql.com/17295" target="_top">Bug#17295</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An <code class="literal">UPDATE</code> with an inner join failed to match
        any records if both tables in the join did not have a primary
        key.
       (<a href="http://bugs.mysql.com/17257" target="_top">Bug#17257</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A <code class="literal">DELETE</code> with a join in the
        <code class="literal">WHERE</code> clause failed to retrieve any records
        if both tables in the join did not have a primary key.
       (<a href="http://bugs.mysql.com/17249" target="_top">Bug#17249</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">CREATE TEMPORARY TABLE</code> of a Cluster table
        would fail with an <span class="errortext">Unsupported</span> error or
        crash the server.
       (<a href="http://bugs.mysql.com/17210" target="_top">Bug#17210</a>, <a href="http://bugs.mysql.com/16552" target="_top">Bug#16552</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The storage engine did not allow views to be updated.
       (<a href="http://bugs.mysql.com/17206" target="_top">Bug#17206</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        When attempting to import data into an <code class="literal">NDB</code>
        table using <code class="literal">LOAD DATA INFILE</code>, the server
        would hang in the event of a duplicate key error.
       (<a href="http://bugs.mysql.com/17154" target="_top">Bug#17154</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        In some cases, <code class="literal">LOAD DATA INFILE</code> did not load
        all data into <code class="literal">NDB</code> tables.
       (<a href="http://bugs.mysql.com/17081" target="_top">Bug#17081</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">CREATE TABLE <em class="replaceable"><code>new_tbl</code></em> LIKE
        <em class="replaceable"><code>old_tbl</code></em>;</code> failed when
        <em class="replaceable"><code>old_tbl</code></em> used the
        <code class="literal">NDB</code> storage engine.
       (<a href="http://bugs.mysql.com/17005" target="_top">Bug#17005</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        An unhandled resources issue could cause node failure with a
        <code class="literal">DELETE FROM TABLE</code> affecting thousands of
        rows.
       (<a href="http://bugs.mysql.com/16492" target="_top">Bug#16492</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">UNIQUE</code> keys in Cluster tables were limited to
        225 bytes in length.
       (<a href="http://bugs.mysql.com/15918" target="_top">Bug#15918</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">REPLACE</code> failed when attempting to update a
        primary key value in a Cluster table.
       (<a href="http://bugs.mysql.com/14007" target="_top">Bug#14007</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        No error message was generated for setting
        <code class="literal">NoOfFragmentLogFiles</code> too low.
       (<a href="http://bugs.mysql.com/13966" target="_top">Bug#13966</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        No error message was generated for setting
        <code class="literal">MaxNoOfAttributes</code> too low.
       (<a href="http://bugs.mysql.com/13965" target="_top">Bug#13965</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Performing large numbers of data manipulation statements on
        cluster tables using Disk Data could lead to a server crash.
      </p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        In some cases, a cluster using Disk Data tables could not be
        restarted following a normal shutdown.
       (<a href="http://bugs.mysql.com/16872" target="_top">Bug#16872</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Row-based replication was not set up correctly if a backup was
        already in progress. For example, connecting a
        <span><strong class="command">mysqld</strong></span> instance to a cluster which was being
        backed up would result in the message <span class="errortext">NDB: skipping
        setup table <em class="replaceable"><code>tbl_name</code></em></span>
        being written to the error log.
       (<a href="http://bugs.mysql.com/17459" target="_top">Bug#17459</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Row-based replication of a cluster failed to take
        <code class="option">--binlog_ignore_db settings</code> into account.
       (<a href="http://bugs.mysql.com/17188" target="_top">Bug#17188</a>)</p></li><li><p><span class="bold"><strong>Cluster Replication</strong></span>: 
        Cluster tables not having an explicit primary key could not be
        replicated.
       (<a href="http://bugs.mysql.com/14541" target="_top">Bug#14541</a>)</p></li><li><p>
        Column counts were encoded incorrectly in the binary log for
        row-based logging format.
       (<a href="http://bugs.mysql.com/17678" target="_top">Bug#17678</a>)</p></li><li><p>
        Data truncations on non-<code class="literal">UNIQUE</code> indexes could
        crash <code class="literal">InnoDB</code> when using multi-byte character
        sets.
       (<a href="http://bugs.mysql.com/17530" target="_top">Bug#17530</a>)</p></li><li><p>
        An <code class="literal">ALTER DATABASE</code> statement on a replication
        master crashed the slaves.
       (<a href="http://bugs.mysql.com/17521" target="_top">Bug#17521</a>)</p></li><li><p>
        Execution times for scheduled events were not calculated
        correctly: the last execution time was used as a base rather
        than the actual start time.
       (<a href="http://bugs.mysql.com/17494" target="_top">Bug#17494</a>)</p></li><li><p>
        Creating an event and using a whitespace character other than
        space following the <code class="literal">DO</code> keyword caused a
        server crash.
       (<a href="http://bugs.mysql.com/17453" target="_top">Bug#17453</a>)</p></li><li><p>
        Partitioning with certain <code class="literal">SUBPARTITION BY
        HASH</code> clauses caused an error when querying for a
        partitioned column using an <a href="functions.html#operator_is-null"><code class="literal">IS
        NULL</code></a> comparison.
       (<a href="http://bugs.mysql.com/17430" target="_top">Bug#17430</a>, <a href="http://bugs.mysql.com/17432" target="_top">Bug#17432</a>)</p></li><li><p>
        Race conditions between event creation, dropping, and execution
        could result in a server crash or hang.
       (<a href="http://bugs.mysql.com/17373" target="_top">Bug#17373</a>)</p></li><li><p>
        Trying to create a partitioned table with more than 32
        attributes failed.
       (<a href="http://bugs.mysql.com/17179" target="_top">Bug#17179</a>)</p></li><li><p>
        Attempting to add a new partition to a table partitioned by a
        unique key would cause an <span class="errortext">Out of memory</span>
        error.
       (<a href="http://bugs.mysql.com/17169" target="_top">Bug#17169</a>)</p></li><li><p>
        <span><strong class="command">myisam_ftdump</strong></span> did not work for
        <code class="literal">FULLTEXT</code> indexes associated with a parser
        plugin.
       (<a href="http://bugs.mysql.com/17116" target="_top">Bug#17116</a>)</p></li><li><p>
        On Windows platforms, some attempts to create partitioned tables
        from the command line would cause the <code class="literal">mysql</code>
        client to hang.
       (<a href="http://bugs.mysql.com/17082" target="_top">Bug#17082</a>)</p></li><li><p>
        A <code class="literal">SELECT</code> from the last partition of a
        subpartitioned table having a <code class="literal">UNIQUE KEY</code>
        could crash the MySQL Server.
       (<a href="http://bugs.mysql.com/16907" target="_top">Bug#16907</a>)</p></li><li><p>
        Statements that contained Unicode characters were not logged to
        the log tables correctly.
       (<a href="http://bugs.mysql.com/16905" target="_top">Bug#16905</a>)</p></li><li><p>
        A <code class="literal">SELECT</code> on a subpartitioned table having a
        multiple-column <code class="literal">PRIMARY</code> or <code class="literal">UNIQUE
        KEY</code>, and whose partitioning function used only the
        first column of the key, could cause <span><strong class="command">mysqld</strong></span>
        to crash.
       (<a href="http://bugs.mysql.com/16901" target="_top">Bug#16901</a>)</p></li><li><p>
        A <code class="literal">RETURN</code> statement within a trigger caused a
        server crash. <code class="literal">RETURN</code> now is disallowed within
        triggers. To exit immediately, use <code class="literal">LEAVE</code>.
       (<a href="http://bugs.mysql.com/16829" target="_top">Bug#16829</a>)</p></li><li><p>
        Using <code class="literal">REPLACE INTO</code> on a partitioned table
        having a primary key would crash the server in the event of a
        duplicate key error.
       (<a href="http://bugs.mysql.com/16782" target="_top">Bug#16782</a>)</p></li><li><p>
        <code class="literal">DROP TABLE</code> would sometimes fail on a table
        having subpartitions that used the default storage engine.
       (<a href="http://bugs.mysql.com/16775" target="_top">Bug#16775</a>)</p></li><li><p>
        If the query optimizer transformed a <code class="literal">GROUP BY</code>
        clause in a subquery, it did not also transform the
        <code class="literal">HAVING</code> clause if there was one, producing
        incorrect results.
       (<a href="http://bugs.mysql.com/16603" target="_top">Bug#16603</a>)</p></li><li><p>
        Querying the <code class="literal">INFORMATION_SCHEMA.PARTITIONS</code>
        table on a non-max server caused a server crash. This also
        happened following the creation of a table with a very large
        number (hundreds) of partitions.
       (<a href="http://bugs.mysql.com/16591" target="_top">Bug#16591</a>, <a href="http://bugs.mysql.com/17141" target="_top">Bug#17141</a>)</p></li><li><p>
        For a transaction that used <code class="literal">MyISAM</code> and
        <code class="literal">InnoDB</code> tables, interruption of the
        transaction due to a dropped connection on a master server
        caused slaves to lose synchrony.
       (<a href="http://bugs.mysql.com/16559" target="_top">Bug#16559</a>)</p></li><li><p>
        <code class="literal">SHOW CREATE EVENT</code> displayed no output.
       (<a href="http://bugs.mysql.com/16423" target="_top">Bug#16423</a>)</p></li><li><p>
        <code class="literal">DROP DATABASE</code> did not drop events for the
        database.
       (<a href="http://bugs.mysql.com/16406" target="_top">Bug#16406</a>)</p></li><li><p>
        The <code class="filename">mysql_fix_privilege_tables.sql</code> script
        did not properly initialize the <code class="literal">Event_priv</code>
        column to <code class="literal">'Y'</code> for those accounts that should
        have the <code class="literal">EVENT</code> privilege.
       (<a href="http://bugs.mysql.com/16400" target="_top">Bug#16400</a>)</p></li><li><p>
        <code class="literal">SELECT</code> with <code class="literal">GROUP BY</code> on a
        view could cause a server crash.
       (<a href="http://bugs.mysql.com/16382" target="_top">Bug#16382</a>)</p></li><li><p>
        MySQL server dropped client connection for certain
        <code class="literal">SELECT</code> statements against views defined that
        used <code class="literal">MERGE</code> algorithm.
       (<a href="http://bugs.mysql.com/16260" target="_top">Bug#16260</a>)</p></li><li><p>
        Using an XPath expression containing <code class="literal">=</code> with
        <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> caused the server
        to crash.
       (<a href="http://bugs.mysql.com/16242" target="_top">Bug#16242</a>)</p></li><li><p>
        When used with the
        <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> function, an
        XPath expression having no leading “<span class="quote"> <code class="literal">/</code>
        </span>” character would crash the server.
       (<a href="http://bugs.mysql.com/16234" target="_top">Bug#16234</a>)</p></li><li><p>
        Using <code class="literal">GROUP BY</code> on column used in
        <code class="literal">WHERE</code> clause could cause empty set to be
        returned.
       (<a href="http://bugs.mysql.com/16203" target="_top">Bug#16203</a>)</p></li><li><p>
        <a href="functions.html#function_cast"><code class="literal">CAST(... AS TIME)</code></a> operations
        returned different results when using versus not using
        prepared-statement protocol.
       (<a href="http://bugs.mysql.com/15805" target="_top">Bug#15805</a>)</p></li><li><p>
        The <code class="literal">SELECT</code> privilege was required for
        triggers that performed no selects.
       (<a href="http://bugs.mysql.com/15196" target="_top">Bug#15196</a>)</p></li><li><p>
        The <code class="literal">UPDATE</code> privilege was required for
        triggers that performed no updates.
       (<a href="http://bugs.mysql.com/15166" target="_top">Bug#15166</a>)</p></li><li><p>
        A statement containing <code class="literal">GROUP BY</code> and
        <code class="literal">HAVING</code> clauses could return incorrect results
        when the <code class="literal">HAVING</code> clause contained logic that
        returned <code class="literal">FALSE</code> for every row.
       (<a href="http://bugs.mysql.com/14927" target="_top">Bug#14927</a>)</p></li><li><p>
        Killing a long-running query containing a subquery could cause a
        server crash.
       (<a href="http://bugs.mysql.com/14851" target="_top">Bug#14851</a>)</p></li><li><p>
        Previously, a stored function invocation was written to the
        binary log as <code class="literal">DO
        <em class="replaceable"><code>func_name</code></em>()</code> if the
        invocation changes data and occurs within a non-logged
        statement, or if the function invokes a stored procedure that
        produces an error. These invocations now are logged as
        <code class="literal">SELECT <em class="replaceable"><code>func_name</code></em>()</code>
        instead for better control over error code checking (slave
        servers could stop due to detecting a different error than
        occurred on the master).
       (<a href="http://bugs.mysql.com/14769" target="_top">Bug#14769</a>)</p></li><li><p>
        <a href="functions.html#function_substring-index"><code class="literal">SUBSTRING_INDEX()</code></a> could yield
        inconsistent results when applied with the same arguments to
        consecutive rows in a query.
       (<a href="http://bugs.mysql.com/14676" target="_top">Bug#14676</a>)</p></li><li><p>
        <code class="literal">SET sql_mode = <em class="replaceable"><code>N</code></em></code>,
        where <em class="replaceable"><code>N</code></em> &gt; 31, did not work
        properly.
       (<a href="http://bugs.mysql.com/13897" target="_top">Bug#13897</a>)</p></li><li><p>
        <code class="literal">SHOW CREATE TABLE</code> produced extraneous spaces
        following the keywords “<span class="quote"> <code class="literal">PRIMARY KEY</code>
        </span>”.
       (<a href="http://bugs.mysql.com/13883" target="_top">Bug#13883</a>)</p></li><li><p>
        <code class="literal">BIT</code> fields were not properly handled when
        using row-based replication.
       (<a href="http://bugs.mysql.com/13418" target="_top">Bug#13418</a>)</p></li><li><p>
        <code class="literal">InnoDB</code> could display an incorrect error
        message for a cascading update.
       (<a href="http://bugs.mysql.com/9680" target="_top">Bug#9680</a>)</p></li><li><p>
        <code class="literal">CHECKSUM TABLE</code> returned different values for
        <code class="literal">MyISAM</code> tables depending on whether the
        <code class="literal">QUICK</code> or <code class="literal">EXTENDED</code> option
        was used.
       (<a href="http://bugs.mysql.com/8841" target="_top">Bug#8841</a>)</p></li><li><p>
        <code class="literal">SET TRANSACTION ISOLATION LEVEL</code> acted like
        <code class="literal">SET SESSION TRANSACTION ISOLATION LEVEL</code>. That
        is, it set the isolation level for longer than the next
        transaction.
       (<a href="http://bugs.mysql.com/7955" target="_top">Bug#7955</a>)</p></li><li><p>
        Repeated invocation of <code class="literal">my_init()</code> and
        <code class="literal">my_end()</code> caused corruption of character set
        data and connection failure.
       (<a href="http://bugs.mysql.com/6536" target="_top">Bug#6536</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-6"></a>C.1.24. Changes in  MySQL 5.1.6 (01 February 2006)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Words with apostrophes are now matched in a FULLTEXT search
        against non-apostrophe words (for example, a search for
        <code class="literal">Jerry</code> will match against the term
        <code class="literal">Jerry's</code>). Users upgrading to this version
        must issue <code class="literal">REPAIR TABLE ... QUICK</code> statements
        for tables containing <code class="literal">FULLTEXT</code> indexes.
       (<a href="http://bugs.mysql.com/14194" target="_top">Bug#14194</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        This release introduces the <code class="literal">TRIGGER</code>
        privilege. Previously, the <code class="literal">SUPER</code> privilege
        was needed to create or drop triggers. Now those operations
        require the <code class="literal">TRIGGER</code> privilege. This is a
        security improvement because you no longer need to grant users
        the <code class="literal">SUPER</code> privilege to enable them to create
        triggers. However, the requirement that the account named in a
        trigger's <code class="literal">DEFINER</code> clause must have the
        <code class="literal">SUPER</code> privilege has changed to a requirement
        for the <code class="literal">TRIGGER</code> privilege. After upgrading,
        be sure to update your grant tables as described in
        <a href="programs.html#mysql-fix-privilege-tables" title="4.4.4. mysql_fix_privilege_tables — Upgrade MySQL System Tables">Section 4.4.4, “<span><strong class="command">mysql_fix_privilege_tables</strong></span> — Upgrade MySQL System Tables”</a>. This
        process assigns the <code class="literal">TRIGGER</code> privilege to all
        accounts that had the <code class="literal">SUPER</code> privilege. (After
        updating, you might also consider whether any of those accounts
        no longer need <code class="literal">SUPER</code>.) If you fail to update
        the grant tables, triggers may fail when activated.
       (<a href="http://bugs.mysql.com/9142" target="_top">Bug#9142</a>)</p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Before MySQL 5.1.6, the server writes general query log and slow
        query log entries to log files. As of MySQL 5.1.6, the server's
        logging capabilities for these logs are more flexible. Log
        entries can be written to log files (as before) or to the
        <code class="literal">general_log</code> and <code class="literal">slow_log</code>
        tables in the <code class="literal">mysql</code> database. If logging is
        enabled, either or both destinations can be selected. The
        <code class="option">--log-output</code> option controls the destination or
        destinations of log output. See
        <a href="server-administration.html#log-tables" title="5.2.1. Selecting General Query and Slow Query Log Output Destinations">Section 5.2.1, “Selecting General Query and Slow Query Log Output Destinations”</a>.
      </p><p>
        If logging is enabled, the default destination now is to log to
        tables, which differs from earlier versions. If you had the
        server configured for logging to log files formerly, use
        <code class="option">--log-output=FILE</code> to preserve this behavior
        after an upgrade to MySQL 5.1.6 or higher.
      </p></li><li><p><span class="bold"><strong>Important Change</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: <span class="bold"><strong>Replication</strong></span>: 
        Replication between MySQL Clusters is now supported. It is now
        also possible to replicate between a MySQL Cluster and a
        non-cluster database. See
        <a href="mysql-cluster.html#mysql-cluster-replication" title="20.11. MySQL Cluster Replication">Section 20.11, “MySQL Cluster Replication”</a>, for more
        information.
      </p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Added the <code class="literal">ndb_extra_logging</code> system variable.
      </p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="literal">NDB</code> storage engine now supports the
        <code class="literal">CREATE INDEX</code> and <code class="literal">DROP
        INDEX</code> statements.
      </p></li><li><p><span class="bold"><strong>Packaging</strong></span>: 
        MySQL 5.1.6 introduces some changes to distribution packaging:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Distributions include both a <span><strong class="command">mysqld</strong></span>
            optimized server and <span><strong class="command">mysqld-debug</strong></span>
            debugging server. There is no separate debug distribution.
          </p></li><li><p>
            There is no longer a <span><strong class="command">mysqld-max</strong></span> server.
            (Note: This changed in MySQL 5.1.9: The
            <span><strong class="command">mysqld-max</strong></span> server also is included in
            binary distributions.)
          </p></li><li><p>
            Server binaries no longer are stripped, except for RPM
            distributions.
          </p></li><li><p>
            Binary distributions for Unix and Unix-like systems no
            longer include <span><strong class="command">safe_mysqld</strong></span> as a link to
            <span><strong class="command">mysqld_safe</strong></span>.
            <span><strong class="command">safe_mysqld</strong></span> has been deprecated since
            MySQL 4.0 and now is removed.
          </p></li></ul></div></li><li><p>
        The <span><strong class="command">mysqldump</strong></span> utility now supports an option
        for dumping tablespaces. Use <code class="option">-Y</code> or
        <code class="option">--all-tablespaces</code> to enable this functionality.
       (<a href="http://bugs.mysql.com/16753" target="_top">Bug#16753</a>)</p></li><li><p>
        Partition support is not an “<span class="quote">engine</span>”, but it was
        included in the output of <code class="literal">SHOW ENGINES</code>. Now
        it is not. The <code class="literal">have_partition_engine</code> variable
        was renamed to <code class="literal">have_partitioning</code>.
       (<a href="http://bugs.mysql.com/14355" target="_top">Bug#14355</a>, <a href="http://bugs.mysql.com/16718" target="_top">Bug#16718</a>)</p></li><li><p>
        <code class="literal">ANALYZE TABLE</code> is now supported for
        partitioned tables.
       (<a href="http://bugs.mysql.com/13441" target="_top">Bug#13441</a>)</p></li><li><p>
        Added the <code class="option">--use-threads</code> option for
        <span><strong class="command">mysqlslap</strong></span>.
      </p></li><li><p>
        Queries against partitioned tables can now take advantage of
        partition pruning. In some cases, this can result in query
        execution that is an order of magnitude faster than the same
        query against a non-partitioned version of the same table.
      </p></li><li><p>
        There is no longer a <span><strong class="command">mysqld-max</strong></span> server.
        (Note: This changed in MySQL 5.1.9: The
        <span><strong class="command">mysqld-max</strong></span> server also is included in binary
        distributions.)
      </p></li><li><p>
        Added the <code class="literal">FILES</code> table to
        <code class="literal">INFORMATION_SCHEMA</code>.
      </p></li><li><p>
        Binary distributions for Unix and Unix-like systems no longer
        include <span><strong class="command">safe_mysqld</strong></span> as a link to
        <span><strong class="command">mysqld_safe</strong></span>. <span><strong class="command">safe_mysqld</strong></span>
        has been deprecated since MySQL 4.0 and now is removed.
      </p></li><li><p>
        Special characters in database and table identifiers now are
        encoded when creating the corresponding directory names and
        filenames. This relaxes the restrictions on the characters that
        can appear in identifiers. See
        <a href="language-structure.html#identifier-mapping" title="8.2.3. Mapping of Identifiers to Filenames">Section 8.2.3, “Mapping of Identifiers to Filenames”</a>.
      </p></li><li><p>
        Added the <code class="literal">event_scheduler</code> system variable.
      </p></li><li><p>
        MySQL 5.1.6 introduces the <em class="firstterm">Event
        Scheduler</em> which allows one to schedule statements
        for execution at predetermined times. Events can be transient
        (one-time-only) or recurrent at regular intervals, and may
        execute queries and statements permitted in stored routines,
        including compound statements.
      </p><p>
        Events can be altered after creation, and dropped when no longer
        needed.
      </p><p>
        Information about scheduled events can be obtained using the
        statements <code class="literal">SHOW EVENTS</code> and <code class="literal">SHOW
        CREATE EVENT</code>, or by querying the
        <code class="literal">INFORMATION_SCHEMA.EVENTS</code> table. All of these
        are available beginning in MySQL 5.1.6.
      </p><p>
        Users must have the <code class="literal">EVENT</code> privilege (also
        added in 5.1.6) to create events.
      </p><p>
        For more information, see <a href="events.html" title="Chapter 25. Event Scheduler">Chapter 25, <i>Event Scheduler</i></a>.
      </p></li><li><p>
        Distributions include both a <span><strong class="command">mysqld</strong></span> optimized
        server and <span><strong class="command">mysqld-debug</strong></span> debugging server.
        There is no separate debug distribution.
      </p></li><li><p>
        Server binaries no longer are stripped, except for RPM
        distributions.
      </p></li><li><p>
        The <code class="literal">ARCHIVE</code> storage engine now supports the
        <code class="literal">AUTO_INCREMENT</code> column attribute and the
        <code class="literal">AUTO_INCREMENT</code> table option.
        <a href="storage-engines.html#archive-storage-engine" title="13.10. The ARCHIVE Storage Engine">Section 13.10, “The <code class="literal">ARCHIVE</code> Storage Engine”</a>.
      </p></li><li><p>
        Server plugins can register their own status variables to be
        displayed by the <code class="literal">SHOW STATUS</code> statement.
      </p></li><li><p>
        Added the <code class="literal">PARTITIONS</code> table to
        <code class="literal">INFORMATION_SCHEMA</code>.
      </p></li><li><p>
        Added the <code class="literal">EVENTS</code> table to
        <code class="literal">INFORMATION_SCHEMA</code>.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">NDB</code> leaked disk space when performing
        repeated <code class="literal">INSERT</code> or <code class="literal">DELETE</code>
        statements.
       (<a href="http://bugs.mysql.com/16771" target="_top">Bug#16771</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <span><strong class="command">ndb_delete_all</strong></span> ran out of memory when
        processing tables containing <code class="literal">BLOB</code> columns.
       (<a href="http://bugs.mysql.com/16693" target="_top">Bug#16693</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Trying to import too many dumped tables requiring resources
        beyond those allocated in the cluster configuration file caused
        the server to crash instead of reporting an insufficient
        resources error.
       (<a href="http://bugs.mysql.com/16455" target="_top">Bug#16455</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        A <code class="literal">BIT</code> column whose offset and length totaled
        32 caused the cluster to crash.
       (<a href="http://bugs.mysql.com/16125" target="_top">Bug#16125</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="literal">ndb_autodiscover</code> test failed sporadically
        due to a node not being permitted to connect to the cluster.
       (<a href="http://bugs.mysql.com/15619" target="_top">Bug#15619</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">NDB</code> returned an incorrect <span class="errortext">Can't
        find file error</span> for OS error 24; this has been
        changed to <span class="errortext">Too many open files</span>.
       (<a href="http://bugs.mysql.com/15020" target="_top">Bug#15020</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">CREATE TABLESPACE</code> statements were incorrectly
        parsed on 64-bit platforms. (<code class="literal">INITIAL SIZE
        <em class="replaceable"><code>size</code></em></code> worked, but
        <code class="literal">INITIAL SIZE = <em class="replaceable"><code>size</code></em>
        </code> failed.)
       (<a href="http://bugs.mysql.com/13556" target="_top">Bug#13556</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Using <span><strong class="command">mysqldump</strong></span> to obtain a dump of a
        partitioned table employing the <code class="literal">NDB</code> storage
        engine produced a non-functional table creation statement.
       (<a href="http://bugs.mysql.com/13155" target="_top">Bug#13155</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        Tablespaces created using parameters with relatively low values
        (10 MB or less) produced filesizes much smaller than expected.
       (<a href="http://bugs.mysql.com/16742" target="_top">Bug#16742</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        <code class="literal">NDB</code> returned the wrong error when the
        tablespace on disk was full.
       (<a href="http://bugs.mysql.com/16738" target="_top">Bug#16738</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        The error message generated by a failed <code class="literal">ADD
        UNDOFILE</code> did not provide any reasons for the failure.
       (<a href="http://bugs.mysql.com/16267" target="_top">Bug#16267</a>)</p></li><li><p><span class="bold"><strong>Disk Data</strong></span>: 
        <code class="literal">DROP LOGFILE GROUP</code> corrupted the cluster file
        system and caused <span><strong class="command">ndbd</strong></span> to fail when running
        more than one node on the same system.
       (<a href="http://bugs.mysql.com/16193" target="_top">Bug#16193</a>)</p></li><li><p><span class="bold"><strong>Cluster API</strong></span>: 
        Upon the completion of a scan where a key request remained
        outstanding on the primary replica and a starting node died, the
        scan did not terminate. This caused incomplete error handling
        for the failed node.
       (<a href="http://bugs.mysql.com/15908" target="_top">Bug#15908</a>)</p></li><li><p>
        When the fulltext search parser plugin returned more words than
        half of the length (in bytes) of the query string, the server
        would crash.
       (<a href="http://bugs.mysql.com/16722" target="_top">Bug#16722</a>)</p></li><li><p>
        An indexing error sometimes caused values to be assigned to the
        wrong <code class="literal">RANGE</code> partition.
       (<a href="http://bugs.mysql.com/16684" target="_top">Bug#16684</a>)</p></li><li><p>
        An <code class="literal">INSERT</code> statement in a stored procedure
        corrupted the binary log.
       (<a href="http://bugs.mysql.com/16621" target="_top">Bug#16621</a>)</p></li><li><p>
        Trying to add more than one partition in a single <code class="literal">ALTER
        TABLE ... ADD PARTITION</code> statement caused the server to
        crash.
       (<a href="http://bugs.mysql.com/16534" target="_top">Bug#16534</a>)</p></li><li><p>
        Parallel builds occasionally failed on Solaris.
       (<a href="http://bugs.mysql.com/16282" target="_top">Bug#16282</a>)</p></li><li><p>
        Inserting a negative value into an integer column used as the
        partitioning key for a table partitioned by
        <code class="literal">HASH</code> could cause the server to crash.
       (<a href="http://bugs.mysql.com/15968" target="_top">Bug#15968</a>)</p></li><li><p>
        Creating a partitioned table using a storage engine other than
        the session default storage engine caused the server to crash.
       (<a href="http://bugs.mysql.com/15966" target="_top">Bug#15966</a>)</p></li><li><p>
        The error message for specifying values for which no partition
        exists returned wrong values on certain platforms.
       (<a href="http://bugs.mysql.com/15910" target="_top">Bug#15910</a>)</p></li><li><p>
        Specifying a value for <code class="option">--tmpdir</code> without a
        trailing slash had unpredictable results.
       (<a href="http://bugs.mysql.com/15904" target="_top">Bug#15904</a>)</p></li><li><p>
        <a href="functions.html#function_str-to-date"><code class="literal">STR_TO_DATE(1,NULL)</code></a> caused a
        server crash.
       (<a href="http://bugs.mysql.com/15828" target="_top">Bug#15828</a>, <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-3081" target="_top">CVE-2006-3081</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE ... ADD PARTITIONS</code> on a table
        with one partition crashed the server.
       (<a href="http://bugs.mysql.com/15820" target="_top">Bug#15820</a>)</p></li><li><p>
        The <code class="literal">mysql_real_connect()</code> C API function
        incorrectly reset the <code class="literal">MYSQL_OPT_RECONNECT</code>
        option to its default value.
       (<a href="http://bugs.mysql.com/15719" target="_top">Bug#15719</a>)</p></li><li><p>
        In some cases the query optimizer did not properly perform
        multiple joins where inner joins followed left joins, resulting
        in corrupted result sets.
       (<a href="http://bugs.mysql.com/15633" target="_top">Bug#15633</a>)</p></li><li><p>
        Certain permission management statements could create a
        <code class="literal">NULL</code> hostname for a user, resulting in a
        server crash.
       (<a href="http://bugs.mysql.com/15598" target="_top">Bug#15598</a>)</p></li><li><p>
        Improper memory handling for stored routine variables could
        cause memory overruns and binary log corruption.
       (<a href="http://bugs.mysql.com/15588" target="_top">Bug#15588</a>)</p></li><li><p>
        The absence of a table in the left part of a left or right join
        was not checked prior to name resolution, which resulted in a
        server crash.
       (<a href="http://bugs.mysql.com/15538" target="_top">Bug#15538</a>)</p></li><li><p>
        An <code class="literal">ALTER TABLE ... PARTITION BY ...</code> statement
        did not have any effect.
       (<a href="http://bugs.mysql.com/15523" target="_top">Bug#15523</a>)</p></li><li><p>
        Using <code class="literal">RANGE</code> partitioning with a
        <a href="functions.html#operator_case"><code class="literal">CASE</code></a> expression as
        the partitioning function would cause records to be placed in
        the wrong partition.
       (<a href="http://bugs.mysql.com/15393" target="_top">Bug#15393</a>)</p></li><li><p>
        Certain subqueries where the inner query was the result of a
        aggregate function would return different results with MySQL
        5.1 than with MySQL 4.1.
      </p><p>
        Subselects could also return wrong results when the query cache
        and grouping were involved.
       (<a href="http://bugs.mysql.com/15347" target="_top">Bug#15347</a>)</p></li><li><p>
        Attempting to insert data into a partitioned table that used the
        <code class="literal">BLACKHOLE</code> storage engine caused
        <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/14524" target="_top">Bug#14524</a>)</p></li><li><p>
        A <code class="literal">FULLTEXT</code> query in a prepared statement
        could result in unexpected behavior.
       (<a href="http://bugs.mysql.com/14496" target="_top">Bug#14496</a>)</p></li><li><p>
        With a table partitioned by <code class="literal">LIST</code>, inserting a
        value which was smaller than any value shown in the partitioning
        value-lists could cause the server to crash.
       (<a href="http://bugs.mysql.com/14365" target="_top">Bug#14365</a>)</p></li><li><p>
        The <code class="literal">DATA DIRECTORY</code> and <code class="literal">INDEX
        DIRECTORY</code> clauses of a <code class="literal">CREATE TABLE</code>
        statement involving partitions did not work.
       (<a href="http://bugs.mysql.com/14354" target="_top">Bug#14354</a>)</p></li><li><p>
        <code class="literal">SHOW CREATE TABLE</code> did not display the
        <code class="literal">PARTITIONS</code> clause for tables partitioned by
        <code class="literal">HASH</code> or <code class="literal">KEY</code>.
       (<a href="http://bugs.mysql.com/14327" target="_top">Bug#14327</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE ... DROP PARTITION</code> would truncate
        all <code class="literal">DATE</code> column values in the table's
        remaining partitions to <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/13644" target="_top">Bug#13644</a>)</p></li><li><p>
        <code class="literal">ALTER TABLE ... ADD PARTITION</code> could crash the
        server or cause an <span class="errortext">Out of memory</span> error in
        some circumstances.
       (<a href="http://bugs.mysql.com/13447" target="_top">Bug#13447</a>)</p></li><li><p>
        The server would allow foreign keys to be declared in the
        definition of a partitioned table despite the fact that
        partitioned tables do not support foreign keys (see
        <a href="partitioning.html#partitioning-limitations" title="21.5. Restrictions and Limitations on Partitioning">Section 21.5, “Restrictions and Limitations on Partitioning”</a>).
       (<a href="http://bugs.mysql.com/13446" target="_top">Bug#13446</a>)</p></li><li><p>
        A <code class="literal">SELECT</code> from a key-partitioned table with a
        multi-column key could cause the server to crash.
       (<a href="http://bugs.mysql.com/13445" target="_top">Bug#13445</a>)</p></li><li><p>
        Issuing a <code class="literal">TRUNCATE</code> statement twice in
        succession on the same partitioned table would cause the server
        to crash.
       (<a href="http://bugs.mysql.com/13442" target="_top">Bug#13442</a>)</p></li><li><p>
        Using a <code class="literal">REPLACE</code> statement on a partitioned
        table caused the server to crash.
       (<a href="http://bugs.mysql.com/13440" target="_top">Bug#13440</a>)</p></li><li><p>
        Using an identifier rather than a literal integer value in the
        <code class="literal">LESS THAN</code> clause of a range-partitioned table
        could cause the server to crash and corruption of tables.
       (<a href="http://bugs.mysql.com/13439" target="_top">Bug#13439</a>)</p></li><li><p>
        Using <code class="literal">ENGINE=...</code> within a
        <code class="literal">PARTITION</code> clause could cause the server to
        crash.
       (<a href="http://bugs.mysql.com/13438" target="_top">Bug#13438</a>)</p></li><li><p>
        <code class="literal">CREATE TABLE ... LIKE</code> did not work if the
        table whose schema was to be copied was a partitoned table.
       (<a href="http://bugs.mysql.com/13435" target="_top">Bug#13435</a>)</p></li><li><p>
        Multi-byte path names for <code class="literal">LOAD DATA</code> and
        <code class="literal">SELECT ... INTO OUTFILE</code> caused errors. Added
        the <code class="literal">character_set_filesystem</code> system variable,
        which controls the interpretation of string literals that refer
        to filenames.
       (<a href="http://bugs.mysql.com/12448" target="_top">Bug#12448</a>)</p></li><li><p>
        Temporary table aliasing did not work inside stored functions.
       (<a href="http://bugs.mysql.com/12198" target="_top">Bug#12198</a>)</p></li><li><p>
        Using the <code class="literal">TRUNCATE()</code> function with a
        negative number for the second argument on a
        <code class="literal">BIGINT</code> column returned incorrect results.
       (<a href="http://bugs.mysql.com/8461" target="_top">Bug#8461</a>)</p></li><li><p>
        Certain Japanese table names were not properly saved during a
        <code class="literal">CREATE TABLE</code> statement.
       (<a href="http://bugs.mysql.com/3906" target="_top">Bug#3906</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-5"></a>C.1.25. Changes in  MySQL 5.1.5 (10 January 2006)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Added the <code class="option">--port-open-timeout</code> option to
        <span><strong class="command">mysqld</strong></span> to control how many seconds the server
        should wait for the TCP/IP port to become free if it cannot be
        opened.
       (<a href="http://bugs.mysql.com/15591" target="_top">Bug#15591</a>)</p></li><li><p>
        Added the <code class="option">--create-schema</code>,
        <code class="option">--lock-directory</code>,
        <code class="option">--number-of-queries</code>,
        <code class="option">--only-print</code>,
        <code class="option">--preserve-schema</code>, and <code class="option">--slave</code>
        options for <span><strong class="command">mysqlslap</strong></span>.
      </p></li><li><p>
        Added the <code class="option">--base64-output</code> option to
        <span><strong class="command">mysqlbinlog</strong></span> to print all binary log entries
        using base64 encoding. This is for debugging only. Logs produced
        using this option should not be applied on production systems.
      </p></li><li><p>
        Added the <code class="literal">INFORMATION_SCHEMA PLUGINS</code> table
        and the <code class="literal">SHOW PLUGIN</code> statement.
      </p></li><li><p>
        Added the <code class="literal">binlog_format</code> system variable that
        controls whether to use row-based or statement-based binary
        logging. Added the <code class="option">--binlog-format</code> and
        <code class="option">--binlog-row-event-max-size</code> server options for
        binary logging control. See
        <a href="replication.html#replication-formats" title="19.1.2. Replication Formats">Section 19.1.2, “Replication Formats”</a>.
      </p></li><li><p>
        Two new Hungarian collations are included:
        <code class="literal">utf8_hungarian_ci</code> and
        <code class="literal">ucs2_hungarian_ci</code>. These support the correct
        sort order for Hungarian vowels. However, they do not support
        the correct order for sorting Hungarian consonant contractions;
        we expect to fix this issue in a future release.
      </p></li><li><p>
        Plugins now can have status variables that are displayed in the
        output from <code class="literal">SHOW STATUS</code>. See
        <a href="extending-mysql.html#plugin-writing" title="31.2.3. Writing Plugins">Section 31.2.3, “Writing Plugins”</a>.
      </p></li><li><p>
        Added the <code class="literal">INFORMATION_SCHEMA ENGINES</code> table.
      </p></li><li><p>
        Added the XML functions
        <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> and
        <a href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a>.
        <a href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> returns the
        content of a fragment of XML matching a given XPath expression.
        <a href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a> replaces the element
        selected from a fragment of XML by an XPath expression supplied
        by the user with a second XML fragment (also user-supplied), and
        returns the modified XML. See <a href="functions.html#xml-functions" title="11.10. XML Functions">Section 11.10, “XML Functions”</a>.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">INSERT DELAYED</code> caused
        <span><strong class="command">mysqld</strong></span> to crash.
       (<a href="http://bugs.mysql.com/16095" target="_top">Bug#16095</a>)</p></li><li><p>
        The <code class="option">--plugin_dir</code> option was not working.
        Specifying the parser name for fulltext also did not work
        correctly.
       (<a href="http://bugs.mysql.com/16068" target="_top">Bug#16068</a>)</p></li><li><p>
        Attempting to insert into a table partitioned by
        <code class="literal">LIST</code> a value less than any specified in one
        of the table's partition definitions resulted in a server crash.
        In such cases, <span><strong class="command">mysqld</strong></span> now returns
        <span class="errortext">ERROR 1500 (HY000): Table has no partition for value
        <em class="replaceable"><code>v</code></em> </span> , where
        <em class="replaceable"><code>v</code></em> is the out-of-range value.
       (<a href="http://bugs.mysql.com/15819" target="_top">Bug#15819</a>)</p></li><li><p>
        Issuing a <code class="literal">DROP USER</code> command could cause some
        users to encounter a <code class="literal">
        <em class="replaceable"><code>hostname</code></em> is not allowed to connect to
        this MySQL server</code> error.
       (<a href="http://bugs.mysql.com/15775" target="_top">Bug#15775</a>)</p></li><li><p>
        The output of <span><strong class="command">mysqldump --triggers</strong></span> did not
        contain the <code class="literal">DEFINER</code> clause in dumped trigger
        definitions.
       (<a href="http://bugs.mysql.com/15110" target="_top">Bug#15110</a>)</p></li><li><p>
        The output of <code class="literal">SHOW TRIGGERS</code> contained
        extraneous whitespace.
       (<a href="http://bugs.mysql.com/15103" target="_top">Bug#15103</a>)</p></li><li><p>
        Creating a trigger caused a server crash if the table or trigger
        database was not known because no default database had been
        selected.
       (<a href="http://bugs.mysql.com/14863" target="_top">Bug#14863</a>)</p></li><li><p>
        <code class="literal">InnoDB</code>: Comparison of indexed
        <code class="literal">VARCHAR CHARACTER SET ucs2 COLLATE ucs2_bin</code>
        columns using <code class="literal">LIKE</code> could fail.
       (<a href="http://bugs.mysql.com/14583" target="_top">Bug#14583</a>)</p></li><li><p>
        A <code class="literal">COMMIT</code> statement followed by a
        <code class="literal">ALTER TABLE</code> statement on a BDB table caused
        server crash.
       (<a href="http://bugs.mysql.com/14212" target="_top">Bug#14212</a>)</p></li><li><p>
        An <code class="literal">INSERT ... SELECT</code> statement between tables
        in a <code class="literal">MERGE</code> set can return errors when
        statement involves insert into child table from merge table or
        vice-versa.
       (<a href="http://bugs.mysql.com/5390" target="_top">Bug#5390</a>)</p></li><li><p>
        <code class="literal">InnoDB</code>: An <code class="literal">UPDATE</code>
        statement with no index column in the <code class="literal">WHERE</code>
        condition locked all the rows in the table.
       (<a href="http://bugs.mysql.com/3300" target="_top">Bug#3300</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-4"></a>C.1.26. Changes in  MySQL 5.1.4 (21 December 2005)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Added the <code class="option">--server-id</code> option to
        <span><strong class="command">mysqlbinlog</strong></span> to enable only those events
        created by the server having the given server ID to be
        extracted.
       (<a href="http://bugs.mysql.com/15485" target="_top">Bug#15485</a>)</p></li><li><p>
        It is now possible to build the server such that
        <code class="literal">MyISAM</code> tables can support up to 128 keys
        rather than the standard 64. This can be done by configuring the
        build using the option
        <code class="option">--with-max-indexes=<em class="replaceable"><code>N</code></em>
        </code>, where <em class="replaceable"><code>N</code></em>≤128 is the
        maximum number of indexes to permit per table.
       (<a href="http://bugs.mysql.com/10932" target="_top">Bug#10932</a>)</p></li><li><p>
        Added the <code class="literal">myisam_use_mmap</code> system variable.
      </p></li><li><p>
        Added the <code class="option">--bdb-data-direct</code> and
        <code class="option">--bdb-log-direct</code> server options.
      </p></li><li><p>
        Added the <span><strong class="command">mysqlslap</strong></span> program, which is
        designed to emulate client load for a MySQL server and report
        the timing of each stage. It works as if multiple clients are
        accessing the server.
      </p></li><li><p>
        The bundled <code class="literal">BDB</code> library was upgraded to
        version 4.4.16.
      </p></li><li><p>
        Added the <code class="literal">cp1250_polish_ci</code> collation for the
        <code class="literal">cp1250</code> character set.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        The <code class="option">--ndb</code> option for <span><strong class="command">perror</strong></span>
        did not function.
       (<a href="http://bugs.mysql.com/15486" target="_top">Bug#15486</a>)</p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        Using <code class="literal">ORDER BY
        <em class="replaceable"><code>primary_key_column</code></em></code> when
        selecting from a table having the primary key on a
        <code class="literal">VARCHAR</code> column caused a forced shutdown of
        the cluster.
       (<a href="http://bugs.mysql.com/15240" target="_top">Bug#15240</a>, <a href="http://bugs.mysql.com/15682" target="_top">Bug#15682</a>, <a href="http://bugs.mysql.com/14828" target="_top">Bug#14828</a>, <a href="http://bugs.mysql.com/15517" target="_top">Bug#15517</a>)</p></li><li><p>
        Server could not be built on default Debian systems with BDB
        enabled.
       (<a href="http://bugs.mysql.com/15734" target="_top">Bug#15734</a>)</p></li><li><p>
        <code class="literal">SHOW ENGINES</code> output showed the
        <code class="literal">FEDERATED</code> engine as
        <code class="literal">DISABLED</code> even for builds with
        <code class="literal">FEDERATED</code> support.
       (<a href="http://bugs.mysql.com/15559" target="_top">Bug#15559</a>)</p></li><li><p>
        <code class="literal">BDB</code>: A <code class="literal">DELETE</code>,
        <code class="literal">INSERT</code>, or <code class="literal">UPDATE</code> of a
        <code class="literal">BDB</code> table could cause the server to crash
        where the query contained a subquery using an index read.
       (<a href="http://bugs.mysql.com/15536" target="_top">Bug#15536</a>)</p></li><li><p>
        It was not possible to reorganize a partition reusing a
        discarded partition name.
      </p><p>
        Now, for example, you can create a table such as this one:
      </p><pre class="programlisting">CREATE TABLE t1 (a INT) 
    PARTITION BY RANGE (a) (
      PARTITION p0 VALUES LESS THAN (10),
      PARTITION p1 VALUES LESS THAN (20),
      PARTITION p2 VALUES LESS THAN MAXVALUE
    );
</pre><p>
        and then repartition it as shown here:
      </p><pre class="programlisting">ALTER TABLE t1 REORGANIZE PARTITION p2 INTO (
    PARTITION p2 VALUES LESS THAN (30)
);
</pre><p>
        Previously, attempting to do so would produce the error
        <span class="errortext">All partitions must have unique names in the
        table</span> .
       (<a href="http://bugs.mysql.com/15521" target="_top">Bug#15521</a>)</p></li><li><p>
        The <code class="literal">BLACKHOLE</code> storage engine did not handle
        transactions properly: Rolled-back transactions were written to
        the binary log. Now they ae not.
       (<a href="http://bugs.mysql.com/15406" target="_top">Bug#15406</a>)</p></li><li><p>
        A left join on a column that having a <code class="literal">NULL</code>
        value could cause the server to crash.
       (<a href="http://bugs.mysql.com/15268" target="_top">Bug#15268</a>)</p></li><li><p>
        Selecting from a view processed with the temptable algorithm
        caused a server crash if the query cache was enabled.
       (<a href="http://bugs.mysql.com/15119" target="_top">Bug#15119</a>)</p></li><li><p>
        Creating a view that referenced a stored function that selected
        from a view caused a crash upon selection from the view.
       (<a href="http://bugs.mysql.com/15096" target="_top">Bug#15096</a>)</p></li><li><p>
        Multiple-table update operations were counting updates and not
        updated rows. As a result, if a row had several updates it was
        counted several times for the “<span class="quote">rows matched</span>” value
        but updated only once.
       (<a href="http://bugs.mysql.com/15028" target="_top">Bug#15028</a>)</p></li><li><p>
        <a href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a> returned an
        incorrect result after <code class="literal">EXECUTE</code> of a prepared
        statement.
       (<a href="http://bugs.mysql.com/14956" target="_top">Bug#14956</a>)</p></li><li><p>
        <code class="literal">ANALYZE TABLE</code> did not properly update table
        statistics for a <code class="literal">MyISAM</code> table with a
        <code class="literal">FULLTEXT</code> index containing stopwords, so a
        subsequent <code class="literal">ANALYZE TABLE</code> would not recognize
        the table as having already been analyzed.
       (<a href="http://bugs.mysql.com/14902" target="_top">Bug#14902</a>)</p></li><li><p>
        Creating a view within a stored procedure could result in an out
        of memory error or a server crash.
       (<a href="http://bugs.mysql.com/14885" target="_top">Bug#14885</a>)</p></li><li><p>
        <code class="literal">SELECT</code> queries that began with an opening
        parenthesis were not being placed in the query cache.
       (<a href="http://bugs.mysql.com/14652" target="_top">Bug#14652</a>)</p></li><li><p>
        Space truncation was being ignored when inserting into
        <code class="literal">BINARY</code> or <code class="literal">VARBINARY</code>
        columns. Now space truncation results in a warning, or an error
        in strict mode.
       (<a href="http://bugs.mysql.com/14299" target="_top">Bug#14299</a>)</p></li><li><p>
        The maximum value of <code class="literal">MAX_ROWS</code> was handled
        incorrectly on 64-bit systems.
       (<a href="http://bugs.mysql.com/14155" target="_top">Bug#14155</a>)</p></li><li><p>
        For binary string data types, <span><strong class="command">mysqldump
        --hex-blob</strong></span> produced an illegal output value of
        <code class="literal">0x</code> rather than <code class="literal">''</code>.
       (<a href="http://bugs.mysql.com/13318" target="_top">Bug#13318</a>)</p></li><li><p>
        Some comparisons for the <a href="functions.html#function_in"><code class="literal">IN()</code></a>
        operator were inconsistent with equivalent comparisons for the
        <code class="literal">=</code> operator.
       (<a href="http://bugs.mysql.com/12612" target="_top">Bug#12612</a>)</p></li><li><p>
        Attempts to assign <code class="literal">NULL</code> to a <code class="literal">NOT
        NULL</code> column in strict mode now result in a message of
        <code class="literal">Column '<em class="replaceable"><code>col_name</code></em>' cannot be
        null</code>, rather than <code class="literal">Column set to default
        value; NULL supplied to NOT NULL column
        '<em class="replaceable"><code>col_name</code></em>' at row
        <em class="replaceable"><code>n</code></em></code>.
       (<a href="http://bugs.mysql.com/11491" target="_top">Bug#11491</a>)</p></li><li><p>
        <code class="literal">SHOW CREATE DATABASE</code> was sometimes refused
        when the client had privileges for the database.
       (<a href="http://bugs.mysql.com/9785" target="_top">Bug#9785</a>)</p></li><li><p>
        Invalid casts to <code class="literal">DATE</code> values now result in a
        message of <code class="literal">Incorrect datetime value</code>, rather
        than <code class="literal">Truncated incorrect datetime value</code>.
       (<a href="http://bugs.mysql.com/8294" target="_top">Bug#8294</a>)</p></li><li><p>
        <span><strong class="command">mysql</strong></span> ignored the
        <code class="literal">MYSQL_TCP_PORT</code> environment variable.
       (<a href="http://bugs.mysql.com/5792" target="_top">Bug#5792</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-3"></a>C.1.27. Changes in  MySQL 5.1.3 (29 November 2005)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Plugin API</strong></span>: <span class="bold"><strong>Incompatible Change</strong></span>: 
        MySQL 5.1 adds support for a very flexible plugin API that
        enables loading and unloading of various components at runtime,
        without restarting the server. Although the work on this is not
        finished yet, <span class="emphasis"><em>plugin full-text parsers</em></span> are
        a first step in this direction. This allows users to implement
        their own input filter on the indexed text, enabling full-text
        search capability on arbitrary data such as PDF files or other
        document formats. A pre-parser full-text plugin performs the
        actual parsing and extraction of the text and hands it over to
        the built-in MySQL full-text search. (Author: Sergey Vojtovich)
      </p><p>
        The plugin API requires the <code class="literal">mysql.plugin</code>
        table. When upgrading from an older version of MySQL, you should
        run the <span><strong class="command">mysql_fix_privilege_tables</strong></span> command to
        create this table. See
        <a href="programs.html#mysql-fix-privilege-tables" title="4.4.4. mysql_fix_privilege_tables — Upgrade MySQL System Tables">Section 4.4.4, “<span><strong class="command">mysql_fix_privilege_tables</strong></span> — Upgrade MySQL System Tables”</a>.
      </p><p>
        Plugins are installed in the directory named by the
        <code class="literal">plugin_dir</code> system variable. This variable
        also controls the location from which the server loads
        user-defined functions (UDFs), which is a change from earlier
        versions of MySQL. That is, all UDF library files now must be
        installed in the plugin directory. When upgrading from an older
        version of MySQL, you must migrate your UDF files to the plugin
        directory.
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Renamed the <code class="literal">table_cache</code> system variable to
        <code class="literal">table_open_cache</code>. Any scripts that refer to
        <code class="literal">table_cache</code> should be updated to use the new
        name.
      </p></li><li><p><span class="bold"><strong>MySQL Cluster</strong></span>: 
        <code class="literal">VARCHAR</code> columns used in MySQL Cluster tables
        are now variable-sized; that is, they now only allocate as much
        space as required to store the data. Previously, a
        <code class="literal">VARCHAR(<em class="replaceable"><code>n</code></em>)</code> column
        allocated n+2 bytes (aligned to 4 bytes), regardless of whether
        the actual inserted value required that much space. (In other
        words, a <code class="literal">VARCHAR</code> column always required the
        same, fixed, amount of storage as a <code class="literal">CHAR</code>
        column of the same size.)
      </p></li><li><p><span class="bold"><strong>Partitioning</strong></span>: 
        allows distributing portions of individual tables across a
        filesystem, according to rules which can be set when the table
        is created. In effect, different portions of a table are stored
        as separate tables in different locations, but from the user
        point of view, the partitioned table is still a single table.
        See <a href="partitioning.html" title="Chapter 21. Partitioning">Chapter 21, <i>Partitioning</i></a>, for further
        information on this functionality. (Author: Mikael Ronström)
      </p></li><li><p>
        <a href="functions.html#function_rand"><code class="literal">RAND()</code></a> no longer allows
        non-constant initializers. (Prior to MySQL 5.1.3, the effect of
        non-constant initializers is undefined.)
       (<a href="http://bugs.mysql.com/6172" target="_top">Bug#6172</a>)</p></li><li><p>
        Added the <code class="literal">table_definition_cache</code> system
        variable. If you use a large number of tables, you can create a
        large table definition cache to speed up opening of tables. The
        table definition cache takes less space and does not use file
        descriptors, unlike the normal table cache.
      </p></li><li><p>
        <code class="literal">SET <em class="replaceable"><code>instance_name</code></em>.
        <em class="replaceable"><code>option_name</code></em>=<em class="replaceable"><code>option_value</code></em>
        </code> sets an option to the specified value and writes it
        to the config file See <a href="programs.html#instance-manager" title="4.6.9. mysqlmanager — The MySQL Instance Manager">Section 4.6.9, “<span><strong class="command">mysqlmanager</strong></span> — The MySQL Instance Manager”</a>, for
        more details on these new commands. (Author: Petr Chardin)
      </p></li><li><p>
        <code class="literal">SHOW <em class="replaceable"><code>instance_name</code></em> LOG
        FILES</code> provides a listing of all log files used by the
        instance. (Author: Petr Chardin)
      </p></li><li><p>
        Added the <code class="literal">SHOW AUTHORS</code> statement.
      </p></li><li><p>
        Fast <code class="literal">ALTER TABLE</code>: Operations that change only
        table metadata and not table data do not require a temporary
        table to be used, which improves performance. For example,
        renaming a column changes only the <code class="filename">.frm</code>
        file and no longer uses a temporary table.
      </p></li><li><p>
        <span class="bold"><strong>The Instance Manager (IM)</strong></span> now
        has some additional functionality:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">SHOW <em class="replaceable"><code>instance_name</code></em> LOG
              FILES</code> provides a listing of all log files used
              by the instance. (Author: Petr Chardin)
            </p></li><li><p>
              <code class="literal">SHOW <em class="replaceable"><code>instance_name</code></em> LOG
              {ERROR | SLOW | GENERAL} <em class="replaceable"><code>size</code></em>
              </code> retrieves a part of the specified log file.
              (Author: Petr Chardin)
            </p></li><li><p>
              <code class="literal">SET <em class="replaceable"><code>instance_name</code></em>.
              <em class="replaceable"><code>option_name</code></em>=<em class="replaceable"><code>option_value</code></em>
              </code> sets an option to the specified value and
              writes it to the config file See
              <a href="programs.html#instance-manager" title="4.6.9. mysqlmanager — The MySQL Instance Manager">Section 4.6.9, “<span><strong class="command">mysqlmanager</strong></span> — The MySQL Instance Manager”</a>, for more details on
              these new commands. (Author: Petr Chardin)
            </p></li></ul></div><p>
      </p></li><li><p>
        <code class="literal">SHOW <em class="replaceable"><code>instance_name</code></em> LOG
        {ERROR | SLOW | GENERAL} <em class="replaceable"><code>size</code></em>
        </code> retrieves a part of the specified log file. (Author:
        Petr Chardin)
      </p></li><li><p>
        Added the <code class="literal">SHOW FUNCTION CODE</code> and
        <code class="literal">SHOW PROCEDURE CODE</code> statements (available
        only for servers that have been built with debugging support).
        See <a href="sql-syntax.html#show-procedure-code" title="12.5.5.26. SHOW PROCEDURE CODE and SHOW FUNCTION
        CODE Syntax">Section 12.5.5.26, “<code class="literal">SHOW PROCEDURE CODE</code> and <code class="literal">SHOW FUNCTION
        CODE</code> Syntax”</a>.
      </p></li><li><p>
        The performance of boolean full-text searches (using the
        “<span class="quote">+</span>” Operator) has been improved. See
        <a href="functions.html#fulltext-search" title="11.8. Full-Text Search Functions">Section 11.8, “Full-Text Search Functions”</a>, for more details
        about full-text searching. (Author: Sergey Vojtovich)
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">RESET MASTER</code> failed to delete log files on
        Windows. One consequence of this change is that server opens the
        general query and slow log files in shared mode, so now they can
        be renamed while the server has them open (something not true in
        previous versions).
       (<a href="http://bugs.mysql.com/13377" target="_top">Bug#13377</a>)</p></li><li><p>
        Set functions could not be aggregated in outer subqueries.
       (<a href="http://bugs.mysql.com/12762" target="_top">Bug#12762</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-2"></a>C.1.28. Changes in  MySQL 5.1.2 (Not released)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Added the <code class="literal">bdb_cache_parts</code> and
        <code class="literal">bdb_region_size</code> system variables, and allowed
        <code class="literal">bdb_cache_size</code> to be larger than 4GB on
        systems that support it.
       (<a href="http://bugs.mysql.com/14895" target="_top">Bug#14895</a>)</p></li><li><p>
        Added <code class="literal">MAXLOCKS</code>, <code class="literal">MINLOCKS</code>,
        <code class="literal">MAXWRITE</code>, and <code class="literal">MINWRITE</code> as
        allowable values of the <code class="option">--bdb-lock-detect</code>
        option.
       (<a href="http://bugs.mysql.com/14876" target="_top">Bug#14876</a>)</p></li><li><p>
        Added <code class="option">--replace</code> to
        <span><strong class="command">mysqldump</strong></span>. This option uses <code class="literal">REPLACE
        INTO</code>, rather than <code class="literal">INSERT INTO</code>, when
        writing the dumpfile.
      </p></li><li><p>
        Added <code class="literal">Transactions</code>, <code class="literal">XA</code>,
        and <code class="literal">Savepoints</code> columns to <code class="literal">SHOW
        ENGINES</code> output.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Foreign keys were not properly enforced in
        <code class="literal">TEMPORARY</code> tables. Foreign keys now are
        disallowed in <code class="literal">TEMPORARY</code> tables.
       (<a href="http://bugs.mysql.com/12084" target="_top">Bug#12084</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-5-1-1"></a>C.1.29. Changes in  MySQL 5.1.1 (Not released)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Partitioning</strong></span>: <span class="bold"><strong>MySQL Cluster</strong></span>: 
        Specifying the wrong nodegroup in a <code class="literal">CREATE
        TABLE</code> statement using partitioning would lead to the
        table name being locked after the statement failed (that is, the
        table name could not be re-used).
       (<a href="http://bugs.mysql.com/12114" target="_top">Bug#12114</a>)</p></li><li><p>
        Using <code class="literal">ORDER BY</code> in a query with a partitioned
        table on a 64-bit operating system could crash the server.
       (<a href="http://bugs.mysql.com/12116" target="_top">Bug#12116</a>)</p></li><li><p>
        Performing a <code class="literal">CREATE TABLE</code> statement with a
        <code class="literal">PARTITION BY</code> clause in a prepared statement
        could crash a server running in debug mode.
       (<a href="http://bugs.mysql.com/12097" target="_top">Bug#12097</a>)</p></li><li><p>
        When two threads competed for the same table, a deadlock could
        occur if one thread also had a lock on another table through
        <code class="literal">LOCK TABLES</code> and the thread was attempting to
        remove the table in some manner while the other thread tried to
        place locks on both tables.
       (<a href="http://bugs.mysql.com/10600" target="_top">Bug#10600</a>)</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="myodbc-news"></a>C.2. MySQL Connector/ODBC (MyODBC) Change History</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#myodbc-news-5-1-5">C.2.1. Changes in  MySQL Connector/ODBC 5.1.5 (18 August 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-1-4">C.2.2. Changes in  MySQL Connector/ODBC 5.1.4 (15 April 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-1-3">C.2.3. Changes in  MySQL Connector/ODBC 5.1.3 (26 March 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-1-2">C.2.4. Changes in  MySQL Connector/ODBC 5.1.2 (13 February 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-1-1">C.2.5. Changes in  MySQL Connector/ODBC 5.1.1 (13 December 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-1-0">C.2.6. Changes in  MySQL Connector/ODBC 5.1.0 (10 September 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-12">C.2.7. Changes in  MySQL Connector/ODBC 5.0.12 (Never released)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-11">C.2.8. Changes in  MySQL Connector/ODBC 5.0.11 (31 January 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-10">C.2.9. Changes in  MySQL Connector/ODBC 5.0.10 (14 December 2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-9">C.2.10. Changes in  MySQL Connector/ODBC 5.0.9 (22 November 2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-8">C.2.11. Changes in  MySQL Connector/ODBC 5.0.8 (17 November 2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-7">C.2.12. Changes in  MySQL Connector/ODBC 5.0.7 (08 November 2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-6">C.2.13. Changes in  MySQL Connector/ODBC 5.0.6 (03 November 2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-5">C.2.14. Changes in  MySQL Connector/ODBC 5.0.5 (17 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-3">C.2.15. Changes in Connector/ODBC 5.0.3 (Connector/ODBC 5.0 Alpha 3) (20 June
      2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-2">C.2.16. Changes in Connector/ODBC 5.0.2 (Never released)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-5-0-1">C.2.17. Changes in Connector/ODBC 5.0.1 (Connector/ODBC 5.0 Alpha 2) (05 June
      2006)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-26">C.2.18. Changes in  MySQL Connector/ODBC 3.51.26 (07 July 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-25">C.2.19. Changes in  MySQL Connector/ODBC 3.51.25 (11 April 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-24">C.2.20. Changes in  MySQL Connector/ODBC 3.51.24 (14 March 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-23">C.2.21. Changes in  MySQL Connector/ODBC 3.51.23 (09 January 2008)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-22">C.2.22. Changes in  MySQL Connector/ODBC 3.51.22 (13 November 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-21">C.2.23. Changes in  MySQL Connector/ODBC 3.51.21 (08 October 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-20">C.2.24. Changes in  MySQL Connector/ODBC 3.51.20 (10 September 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-19">C.2.25. Changes in  MySQL Connector/ODBC 3.51.19 (10 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-18">C.2.26. Changes in  MySQL Connector/ODBC 3.51.18 (08 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-17">C.2.27. Changes in  MySQL Connector/ODBC 3.51.17 (14 July 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-16">C.2.28. Changes in  MySQL Connector/ODBC 3.51.16 (14 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-15">C.2.29. Changes in  MySQL Connector/ODBC 3.51.15 (07 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-14">C.2.30. Changes in  MySQL Connector/ODBC 3.51.14 (08 March 2007)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-13">C.2.31. Changes in  MySQL Connector/ODBC 3.51.13 (Never released)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-12">C.2.32. Changes in  MySQL Connector/ODBC 3.51.12 (11 Febrauary 2005)</a></span></dt><dt><span class="section"><a href="news.html#myodbc-news-3-51-11">C.2.33. Changes in  MySQL Connector/ODBC 3.51.11 (28 January 2005)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-1-5"></a>C.2.1. Changes in  MySQL Connector/ODBC 5.1.5 (18 August 2008)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        ODBC <code class="literal">TIMESTAMP</code> string format is not handled
        properly by the MyODBC driver. When passing a
        <code class="literal">TIMESTAMP</code> or <code class="literal">DATE</code> to
        MyODBC, in the ODBC format: {d &lt;date&gt;} or {ts
        &lt;timestamp&gt;}, the string that represents this is copied
        once into the SQL statement, and then added again, as an escaped
        string.
       (<a href="http://bugs.mysql.com/37342" target="_top">Bug#37342</a>)</p></li><li><p>
        <code class="literal">SQLDriverConnect</code> does not return
        <code class="literal">SQL_NO_DATA</code> on cancel. The ODBC documentation
        specifies that this method should return
        <code class="literal">SQL_NO_DATA</code> when the user cancels the dialog
        to connect. The connector, however, returns
        <code class="literal">SQL_ERROR</code>.
       (<a href="http://bugs.mysql.com/36293" target="_top">Bug#36293</a>)</p></li><li><p>
        Assigning a string longer than 67 characters to the
        <code class="literal">TableType</code> parameter resulted in a buffer
        overrun when the <code class="literal">SQLTables()</code> function was
        called.
       (<a href="http://bugs.mysql.com/36275" target="_top">Bug#36275</a>)</p></li><li><p>
        The ODBC connector randomly uses logon information stored in
        <code class="literal">odbc-profile</code>, or prompts the user for
        connection information and ignores any settings stored in
        <code class="literal">odbc-profile</code>.
       (<a href="http://bugs.mysql.com/36203" target="_top">Bug#36203</a>)</p></li><li><p>
        After having successfully established a connection, a crash
        occurs when calling <code class="literal">SQLProcedures()</code>
        followed by <code class="literal">SQLFreeStmt()</code>, using the ODBC C
        API.
       (<a href="http://bugs.mysql.com/36069" target="_top">Bug#36069</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-1-4"></a>C.2.2. Changes in  MySQL Connector/ODBC 5.1.4 (15 April 2008)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Wrong result obtained when using <code class="literal">sum()</code> on a
        <code class="literal">decimal(8,2)</code> field type.
       (<a href="http://bugs.mysql.com/35920" target="_top">Bug#35920</a>)</p></li><li><p>
        The driver installer could not create a new DSN if many other
        drivers were already installed.
       (<a href="http://bugs.mysql.com/35776" target="_top">Bug#35776</a>)</p></li><li><p>
        The <code class="literal">SQLColAttribute()</code> function returned
        <code class="literal">SQL_TRUE</code> when querying the
        <code class="literal">SQL_DESC_FIXED_PREC_SCALE (SQL_COLUMN_MONEY)</code>
        attribute of a <code class="literal">DECIMAL</code> column. Previously,
        the correct value of <code class="literal">SQL_FALSE</code> was returned;
        this is now again the case.
       (<a href="http://bugs.mysql.com/35581" target="_top">Bug#35581</a>)</p></li><li><p>
        On Linux, <code class="literal">SQLGetDiagRec()</code> returned
        <code class="literal">SQL_SUCCESS</code> in cases when it should have
        returned <code class="literal">SQL_NO_DATA</code>.
       (<a href="http://bugs.mysql.com/33910" target="_top">Bug#33910</a>)</p></li><li><p>
        The driver crashes ODBC Administrator on attempting to add a new
        DSN.
       (<a href="http://bugs.mysql.com/32057" target="_top">Bug#32057</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-1-3"></a>C.2.3. Changes in  MySQL Connector/ODBC 5.1.3 (26 March 2008)</h3></div></div></div><p>Platform specific notes:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Important Change</strong></span>: 
        You must uninstall previous 5.1.x editions of Connector/ODBC
        before installing the new version.
      </p></li><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        The installer for 64-bit Windows installs both the 32-bit and
        64-bit driver. Please note that Microsoft does not yet supply a
        64-bit bridge from ADO to ODBC.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Important Change</strong></span>: 
        In previous versions, the SSL certificate would automatically be
        verified when used as part of the Connector/ODBC connection. The
        default mode is now to ignore the verificate of certificates. To
        enforce verification of the SSL certificate during connection,
        use the <code class="option">SSLVERIFY</code> DSN parameter, setting the
        value to 1.
       (<a href="http://bugs.mysql.com/29955" target="_top">Bug#29955</a>, <a href="http://bugs.mysql.com/34648" target="_top">Bug#34648</a>)</p></li><li><p>
        Inserting characters to a UTF8 table using surrogate pairs would
        fail and insert invalid data.
       (<a href="http://bugs.mysql.com/34672" target="_top">Bug#34672</a>)</p></li><li><p>
        Installation of Connector/ODBC would fail because it was unable
        to uninstall a previous installed version. The file being
        requested would match an older release version than any
        installed version of the connector.
       (<a href="http://bugs.mysql.com/34522" target="_top">Bug#34522</a>)</p></li><li><p>
        Using <code class="literal">SqlGetData</code> in combination with
        <code class="literal">SQL_C_WCHAR</code> would return overlapping data.
       (<a href="http://bugs.mysql.com/34429" target="_top">Bug#34429</a>)</p></li><li><p>
        Descriptor records were not cleared correctly when calling
        <code class="literal">SQLFreeStmt(SQL_UNBIND)</code>.
       (<a href="http://bugs.mysql.com/34271" target="_top">Bug#34271</a>)</p></li><li><p>
        The dropdown selection for databases on a server when creating a
        DSN was too small. The list size now automatically adjusts up to
        a maximum size of 20 potential databases.
       (<a href="http://bugs.mysql.com/33918" target="_top">Bug#33918</a>)</p></li><li><p>
        Microsoft Access would be unable to use
        <code class="literal">DBEngine.RegisterDatabase</code> to create a DSN
        using the Connector/ODBC driver.
       (<a href="http://bugs.mysql.com/33825" target="_top">Bug#33825</a>)</p></li><li><p>
        Connector/ODBC erroneously reported that it supported the
        <code class="literal">CAST()</code> and <code class="literal">CONVERT()</code> ODBC
        functions for parsing values in SQL statements, which could lead
        to bad SQL generation during a query.
       (<a href="http://bugs.mysql.com/33808" target="_top">Bug#33808</a>)</p></li><li><p>
        Using a linked table in Access 2003 where the table has a
        <code class="literal">BIGINT</code> column as the first column in the
        table, and is configured as the primary key, shows
        <code class="literal">#DELETED</code> for all rows of the table.
       (<a href="http://bugs.mysql.com/24535" target="_top">Bug#24535</a>)</p></li><li><p>
        Updating a <code class="literal">RecordSet</code> when the query involves
        a <code class="literal">BLOB</code> field would fail.
       (<a href="http://bugs.mysql.com/19065" target="_top">Bug#19065</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-1-2"></a>C.2.4. Changes in  MySQL Connector/ODBC 5.1.2 (13 February 2008)</h3></div></div></div><p>
        MySQL Connector/ODBC 5.1.2-beta, a new version of the ODBC
        driver for the MySQL database management system, has been
        released. This release is the second beta (feature-complete)
        release of the new 5.1 series and is suitable for use with any
        MySQL server version since MySQL 4.1, including MySQL 5.0, 5.1,
        and 6.0. (It will not work with 4.0 or earlier releases.)
      </p><p>
        Keep in mind that this is a beta release, and as with any other
        pre-production release, caution should be taken when installing
        on production level systems or systems with critical data.
      </p><p>Platform specific notes:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        The installer for 64-bit Windows installs both the 32-bit and
        64-bit driver. Please note that Microsoft does not yet supply a
        64-bit bridge from ADO to ODBC.
      </p></li><li><p>
        Due to differences with the installation process used on Windows
        and potential registry corruption, it is recommended that
        uninstall any existing versions of Connector/ODBC 5.1.x before
        upgrading.
      </p><p>See also <a href="http://bugs.mysql.com/34571" target="_top">Bug#34571</a></p></li></ul></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Explicit descriptors are implemented.
       (<a href="http://bugs.mysql.com/32064" target="_top">Bug#32064</a>)</p></li><li><p>
        A full implementation of SQLForeignKeys based on the information
        available from INFORMATION_SCHEMA in 5.0 and later versions of
        the server has been implemented.
      </p></li><li><p>
        Changed <code class="literal">SQL_ATTR_PARAMSET_SIZE</code> to return an
        error until support for it is implemented.
      </p></li><li><p>
        Disabled <code class="literal">MYSQL_OPT_SSL_VERIFY_SERVER_CERT</code>
        when using an SSL connection.
      </p></li><li><p>
        <code class="literal">SQLForeignKeys</code> uses
        <code class="literal">INFORMATION_SCHEMA</code> when it is available on
        the server, which allows more complete information to be
        returned.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="option">SSLCIPHER</code> option would be incorrectly
        recorded within the SSL configuration on Windows.
       (<a href="http://bugs.mysql.com/33897" target="_top">Bug#33897</a>)</p></li><li><p>
        Within the GUI interface, when connecting to a MySQL server on a
        non-standard port, the connection test within the GUI would
        fail. The issue was related to incorrect parsing of numeric
        values within the DSN when the option was not configured as the
        last parameter within the DSN.
       (<a href="http://bugs.mysql.com/33822" target="_top">Bug#33822</a>)</p></li><li><p>
        Specifying a non-existent database name within the GUI dialog
        would result in an empty list, not an error.
       (<a href="http://bugs.mysql.com/33615" target="_top">Bug#33615</a>)</p></li><li><p>
        When deleting rows from a static cursor, the cursor position
        would be incorrectly reported.
       (<a href="http://bugs.mysql.com/33388" target="_top">Bug#33388</a>)</p></li><li><p>
        <code class="literal">SQLGetInfo()</code> reported characters for
        <code class="literal">SQL_SPECIAL_CHARACTERS</code> that were not encoded
        correctly.
       (<a href="http://bugs.mysql.com/33130" target="_top">Bug#33130</a>)</p></li><li><p>
        Retrieving data from a <code class="literal">BLOB</code> column would fail
        within <code class="literal">SQLGetData</code>when the target data type
        was <code class="literal">SQL_C_WCHAR</code> due to incorrect handling of
        the character buffer.
       (<a href="http://bugs.mysql.com/32684" target="_top">Bug#32684</a>)</p></li><li><p>
        Renaming an existing DSN entry would create a new entry with the
        new name without deleting the old entry.
       (<a href="http://bugs.mysql.com/31165" target="_top">Bug#31165</a>)</p></li><li><p>
        Reading a <code class="literal">TEXT</code> column that had been used to
        store UTF8 data would result in the wrong information being
        returned during a query.
       (<a href="http://bugs.mysql.com/28617" target="_top">Bug#28617</a>)</p></li><li><p>
        <code class="literal">SQLForeignKeys</code> would return an empty string
        for the schema columns instead of <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/19923" target="_top">Bug#19923</a>)</p></li><li><p>
        When accessing column data,
        <code class="literal">FLAG_COLUMN_SIZE_S32</code> did not limit the octet
        length or display size reported for fields, causing problems
        with Microsoft Visual FoxPro.
      </p><p>
        The list of ODBC functions that could have caused failures in
        Microsoft software when retrieving the length of
        <code class="literal">LONGBLOB</code> or <code class="literal">LONGTEXT</code>
        columns includes:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">SQLColumns</code>
            </p></li><li><p>
              <code class="literal">SQLColAttribute</code>
            </p></li><li><p>
              <code class="literal">SQLColAttributes</code>
            </p></li><li><p>
              <code class="literal">SQLDescribeCol</code>
            </p></li><li><p>
              <code class="literal">SQLSpecialColumns</code> (theoretically can
              have the same problem)
            </p></li></ul></div><p>
       (<a href="http://bugs.mysql.com/12805" target="_top">Bug#12805</a>, <a href="http://bugs.mysql.com/30890" target="_top">Bug#30890</a>)</p></li><li><p>
        Dynamic cursors on statements with parameters were not
        supported.
       (<a href="http://bugs.mysql.com/11846" target="_top">Bug#11846</a>)</p></li><li><p>
        Evaluating a simple numeric expression when using the OLEDB for
        ODBC provider and ADO would return an error, instead of the
        result.
       (<a href="http://bugs.mysql.com/10128" target="_top">Bug#10128</a>)</p></li><li><p>
        Adding or updating a row using <code class="literal">SQLSetPos()</code>
        on a result set with aliased columns would fail.
       (<a href="http://bugs.mysql.com/6157" target="_top">Bug#6157</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-1-1"></a>C.2.5. Changes in  MySQL Connector/ODBC 5.1.1 (13 December 2007)</h3></div></div></div><p>
        MySQL Connector/ODBC 5.1.1-beta, a new version of the ODBC
        driver for the MySQL database management system, has been
        released. This release is the first beta (feature-complete)
        release of the new 5.1 series and is suitable for use with any
        MySQL server version since MySQL 4.1, including MySQL 5.0, 5.1,
        and 6.0. (It will not work with 4.0 or earlier releases.)
      </p><p>
        Keep in mind that this is a beta release, and as with any other
        pre-production release, caution should be taken when installing
        on production level systems or systems with critical data.
      </p><p>
        Includes changes from
        <a href="news.html#myodbc-news-3-51-21" title="C.2.23. Changes in  MySQL Connector/ODBC 3.51.21 (08 October 2007)">Connector/ODBC
        3.51.21</a> and
        <a href="news.html#myodbc-news-3-51-22" title="C.2.22. Changes in  MySQL Connector/ODBC 3.51.22 (13 November 2007)">3.51.22</a>.
      </p><p>
        Built using MySQL 5.0.52.
      </p><p>Platform specific notes:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        The installer for 64-bit Windows installs both the 32-bit and
        64-bit driver. Please note that Microsoft does not yet supply a
        64-bit bridge from ADO to ODBC.
      </p></li><li><p>
        Due to differences with the installation process used on Windows
        and potential registry corruption, it is recommended that
        uninstall any existing versions of Connector/ODBC 5.1.x before
        upgrading.
      </p><p>See also <a href="http://bugs.mysql.com/34571" target="_top">Bug#34571</a></p></li></ul></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Replaced myodbc3i (now myodbc-installer) with Connector/ODBC 5.0
        version.
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Removed monitor (myodbc3m) and dsn-editor (myodbc3c).
      </p></li><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Disallow <code class="literal">SET NAMES</code> in initial statement and
        in executed statements.
      </p></li><li><p>
        A wrapper for the
        <code class="literal">SQLGetPrivateProfileStringW()</code> function,
        which is required for Unicode support, has been created. This
        function is missing from the unixODBC driver manager.
       (<a href="http://bugs.mysql.com/32685" target="_top">Bug#32685</a>)</p></li><li><p>
        Added MSI installer for Windows 64-bit.
       (<a href="http://bugs.mysql.com/31510" target="_top">Bug#31510</a>)</p></li><li><p>
        Implemented support for <code class="literal">SQLCancel()</code>.
       (<a href="http://bugs.mysql.com/15601" target="_top">Bug#15601</a>)</p></li><li><p>
        Added support for <code class="literal">SQL_NUMERIC_STRUCT</code>.
       (<a href="http://bugs.mysql.com/3028" target="_top">Bug#3028</a>, <a href="http://bugs.mysql.com/24920" target="_top">Bug#24920</a>)</p></li><li><p>
        Removed non-threadsafe configuration of the driver. The driver
        is now always built against the threadsafe version of libmysql.
      </p></li><li><p>
        Implemented native Windows setup library
      </p></li><li><p>
        Replaced the internal library which handles creation and loading
        of DSN information. The new library, which was originally a part
        of Connector/ODBC 5.0, supports Unicode option values.
      </p></li><li><p>
        The Windows installer now places files in a subdirectory of the
        <code class="filename">Program Files</code> directory instead of the
        Windows system directory.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="literal">SET NAMES</code> statement has been disabled
        because it causes problems in the ODBC driver when determining
        the current client character set.
       (<a href="http://bugs.mysql.com/32596" target="_top">Bug#32596</a>)</p></li><li><p>
        <code class="literal">SQLDescribeColW</code> returned UTF-8 column as
        <code class="literal">SQL_VARCHAR</code> instead of
        <code class="literal">SQL_WVARCHAR</code>.
       (<a href="http://bugs.mysql.com/32161" target="_top">Bug#32161</a>)</p></li><li><p>
        ADO was unable to open record set using dynamic cursor.
       (<a href="http://bugs.mysql.com/32014" target="_top">Bug#32014</a>)</p></li><li><p>
        ADO applications would not open a <code class="literal">RecordSet</code>
        that contained a <code class="literal">DECIMAL</code> field.
       (<a href="http://bugs.mysql.com/31720" target="_top">Bug#31720</a>)</p></li><li><p>
        Memory usage would increase considerably.
       (<a href="http://bugs.mysql.com/31115" target="_top">Bug#31115</a>)</p></li><li><p>
        SQL statements are limited to 64KB.
       (<a href="http://bugs.mysql.com/30983" target="_top">Bug#30983</a>, <a href="http://bugs.mysql.com/30984" target="_top">Bug#30984</a>)</p></li><li><p>
        <code class="literal">SQLSetPos</code> with <code class="literal">SQL_DELETE</code>
        advances dynamic cursor incorrectly.
       (<a href="http://bugs.mysql.com/29765" target="_top">Bug#29765</a>)</p></li><li><p>
        Using an ODBC prepared statement with bound columns would
        produce an empty result set when called immediately after
        inserting a row into a table.
       (<a href="http://bugs.mysql.com/29239" target="_top">Bug#29239</a>)</p></li><li><p>
        ADO Not possible to update a client side cursor.
       (<a href="http://bugs.mysql.com/27961" target="_top">Bug#27961</a>)</p></li><li><p>
        Recordset <code class="literal">Update()</code> fails when using
        <code class="literal">adUseClient</code> cursor.
       (<a href="http://bugs.mysql.com/26985" target="_top">Bug#26985</a>)</p></li><li><p>
        Connector/ODBC would fail to connect to the server if the
        password contained certain characters, including the semicolon
        and other punctuation marks.
       (<a href="http://bugs.mysql.com/16178" target="_top">Bug#16178</a>)</p></li><li><p>
        Fixed <code class="literal">SQL_ATTR_PARAM_BIND_OFFSET</code>, and fixed
        row offsets to work with updatable cursors.
      </p></li><li><p>
        <code class="literal">SQLSetConnectAttr()</code> did not clear previous
        errors, possibly confusing <code class="literal">SQLError()</code>.
      </p></li><li><p>
        <code class="literal">SQLError()</code> incorrectly cleared the error
        information, making it unavailable from subsequent calls to
        <code class="literal">SQLGetDiagRec()</code>.
      </p></li><li><p>
        NULL pointers passed to <code class="literal">SQLGetInfo()</code> could
        result in a crash.
      </p></li><li><p>
        <code class="literal">SQL_ODBC_SQL_CONFORMANCE</code> was not handled by
        <code class="literal">SQLGetInfo()</code>.
      </p></li><li><p>
        <code class="literal">SQLCopyDesc()</code> did not correctly copy all
        records.
      </p></li><li><p>
        Diagnostics were not correctly cleared on connection and
        environment handles.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-1-0"></a>C.2.6. Changes in  MySQL Connector/ODBC 5.1.0 (10 September 2007)</h3></div></div></div><p>
        This release is the first of the new 5.1 series and is suitable
        for use with any MySQL server version since MySQL 4.1, including
        MySQL 5.0, 5.1, and 6.0. (It will not work with 4.0 or earlier
        releases.)
      </p><p>
        Keep in mind that this is a alpha release, and as with any other
        pre-production release, caution should be taken when installing
        on production level systems or systems with critical data. Not
        all of the features planned for the final Connector/ODBC 5.1
        release are implemented.
      </p><p>
        Functionality is based on Connector/ODBC 3.51.20.
      </p><p>Platform specific notes:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        There are no installer packages for Microsoft Windows x64
        Edition.
      </p></li><li><p>
        Due to differences with the installation process used on Windows
        and potential registry corruption, it is recommended that
        uninstall any existing versions of Connector/ODBC 5.1.x before
        upgrading.
      </p><p>See also <a href="http://bugs.mysql.com/34571" target="_top">Bug#34571</a></p></li></ul></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Added support for Unicode functions
        (<code class="literal">SQLConnectW</code>, etc).
      </p></li><li><p>
        Added descriptor support (<code class="literal">SQLGetDescField</code>,
        <code class="literal">SQLGetDescRec</code>, etc).
      </p></li><li><p>
        Added support for <code class="literal">SQL_C_WCHAR</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-0-12"></a>C.2.7. Changes in  MySQL Connector/ODBC 5.0.12 (Never released)</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Development on Connector/ODBC 5.0.x has ceased. New features
          and functionality will be incorporated into Connector/ODBC
          5.1. See <a href="connectors.html#connector-odbc-roadmap" title="30.1.2.1. Connector/ODBC Roadmap">Section 30.1.2.1, “Connector/ODBC Roadmap”</a>.
        </p></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Inserting <code class="literal">NULL</code> values into a
        <code class="literal">DATETIME</code> column from Access reports an error.
       (<a href="http://bugs.mysql.com/27896" target="_top">Bug#27896</a>)</p></li><li><p>
        Tables with <code class="literal">TEXT</code> columns would be incorrectly
        identified, returning an <code class="literal">Unknown SQL type -
        65535</code> error.
       (<a href="http://bugs.mysql.com/20127" target="_top">Bug#20127</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-0-11"></a>C.2.8. Changes in  MySQL Connector/ODBC 5.0.11 (31 January 2007)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Added support for ODBC v2 statement options using attributes.
      </p></li><li><p>
        Driver now builds and is partially tested under Linux with the
        iODBC driver manager.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Connection string parsing for DSN-less connections could fail to
        identify some parameters.
       (<a href="http://bugs.mysql.com/25316" target="_top">Bug#25316</a>)</p></li><li><p>
        Updates of <code class="literal">MEMO</code> or <code class="literal">TEXT</code>
        columns from within Microsoft Access would fail.
       (<a href="http://bugs.mysql.com/25263" target="_top">Bug#25263</a>)</p></li><li><p>
        Transaction support has been added and tested.
       (<a href="http://bugs.mysql.com/25045" target="_top">Bug#25045</a>)</p></li><li><p>
        Internal function, <code class="literal">my_setpos_delete_ignore()</code>
        could cause a crash.
       (<a href="http://bugs.mysql.com/22796" target="_top">Bug#22796</a>)</p></li><li><p>
        Fixed occasional mis-handling of the
        <code class="literal">SQL_NUMERIC_C</code> type.
      </p></li><li><p>
        Fixed the binding of certain integer types.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-0-10"></a>C.2.9. Changes in  MySQL Connector/ODBC 5.0.10 (14 December 2006)</h3></div></div></div><p>
        Connector/ODBC 5.0.10 is the sixth BETA release.
      </p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Significant performance improvement when retrieving large text
        fields in pieces using <code class="literal">SQLGetData()</code> with a
        buffer smaller than the whole data. Mainly used in Access when
        fetching very large text fields.
       (<a href="http://bugs.mysql.com/24876" target="_top">Bug#24876</a>)</p></li><li><p>
        Added initial unicode support in data and metadata.
       (<a href="http://bugs.mysql.com/24837" target="_top">Bug#24837</a>)</p></li><li><p>
        Added initial support for removing braces when calling stored
        procedures and retrieving result sets from procedure calls.
       (<a href="http://bugs.mysql.com/24485" target="_top">Bug#24485</a>)</p></li><li><p>
        Added loose handling of retrieving some diagnostic data.
       (<a href="http://bugs.mysql.com/15782" target="_top">Bug#15782</a>)</p></li><li><p>
        Added wide-string type info for
        <code class="literal">SQLGetTypeInfo()</code>.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Editing DSN no longer crashes ODBC data source administrator.
       (<a href="http://bugs.mysql.com/24675" target="_top">Bug#24675</a>)</p></li><li><p>
        String query parameters are new escaped correctly.
       (<a href="http://bugs.mysql.com/19078" target="_top">Bug#19078</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-0-9"></a>C.2.10. Changes in  MySQL Connector/ODBC 5.0.9 (22 November 2006)</h3></div></div></div><p>
        Connector/ODBC 5.0.9 is the fifth BETA release.
      </p><p>
        This is an implementation and testing release, and is not
        designed for use within a production environment.
      </p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Added support for column binding as SQL_NUMBERIC_STRUCT.
      </p></li><li><p>
        Added recognition of <code class="literal">SQL_C_SHORT</code> and
        <code class="literal">SQL_C_TINYINT</code> as C types.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed wildcard handling of and listing of catalogs and tables in
        <code class="literal">SQLTables</code>.
      </p></li><li><p>
        Added limit of display size when requested via
        <code class="literal">SQLColAttribute</code>/<code class="literal">SQL_DESC_DISPLAY_SIZE</code>.
      </p></li><li><p>
        Fixed buffer length return for SQLDriverConnect.
      </p></li><li><p>
        ODBC v2 behaviour in driver now supports ODBC v3 date/time types
        (since DriverManager maps them).
      </p></li><li><p>
        Catch use of <code class="literal">SQL_ATTR_PARAMSET_SIZE</code> and
        report error until we fully support.
      </p></li><li><p>
        Fixed statistics to fail if it couldn't be completed.
      </p></li><li><p>
        Corrected retrieval multiple field types bit and blob/text.
      </p></li><li><p>
        Fixed SQLGetData to clear the NULL indicator correctly during
        multiple calls.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-0-8"></a>C.2.11. Changes in  MySQL Connector/ODBC 5.0.8 (17 November 2006)</h3></div></div></div><p>
        Connector/ODBC 5.0.8 is the fourth BETA release.
      </p><p>
        This is an implementation and testing release, and is not
        designed for use within a production environment.
      </p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Also made <code class="literal">SQL_DESC_NAME</code> only fill in the name
        if there was a data pointer given, otherwise just the length.
      </p></li><li><p>
        Fixed display size to be length if max length isn’t available.
      </p></li><li><p>
        Made distinction between
        <code class="literal">CHAR</code>/<code class="literal">BINARY</code> (and VAR
        versions).
      </p></li><li><p>
        Wildcards now support escaped chars and underscore matching
        (needed to link tables with underscores in access).
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed binding using <code class="literal">SQL_C_LONG</code>.
      </p></li><li><p>
        Fixed using wrong pointer for
        <code class="literal">SQL_MAX_DRIVER_CONNECTIONS</code> in
        <code class="literal">SQLGetInfo</code>.
      </p></li><li><p>
        Set default return to <code class="literal">SQL_SUCCESS</code> if nothing
        is done for <code class="literal">SQLSpecialColumns</code>.
      </p></li><li><p>
        Fixed MDiagnostic to use correct v2/v3 error codes.
      </p></li><li><p>
        Allow SQLDescribeCol to be called to retrieve the length of the
        column name, but not the name itself.
      </p></li><li><p>
        Length now used when handling bind parameter (needed in
        particular for <code class="literal">SQL_WCHAR</code>) - this enables
        updating char data in MS Access.
      </p></li><li><p>
        Updated retrieval of descriptor fields to use the right pointer
        types.
      </p></li><li><p>
        Fixed hanlding of numeric pointers in SQLColAttribute.
      </p></li><li><p>
        Fixed type returned for <code class="literal">MYSQL_TYPE_LONG</code> to
        <code class="literal">SQL_INTEGER</code> instead of
        <code class="literal">SQL_TINYINT</code>.
      </p></li><li><p>
        Fix size return from <code class="literal">SQLDescribeCol</code>.
      </p></li><li><p>
        Fixed string length to chars, not bytes, returned by
        SQLGetDiagRec.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-0-7"></a>C.2.12. Changes in  MySQL Connector/ODBC 5.0.7 (08 November 2006)</h3></div></div></div><p>
        Connector/ODBC 5.0.7 is the third BETA release.
      </p><p>
        This is an implementation and testing release, and is not
        designed for use within a production environment.
      </p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Added support for <code class="literal">SQLStatistics</code> to
        <code class="literal">MYODBCShell</code>.
      </p></li><li><p>
        Improved trace/log.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        SQLBindParameter now handles <code class="literal">SQL_C_DEFAULT</code>.
      </p></li><li><p>
        Corrected incorrect column index within
        <code class="literal">SQLStatistics</code>. Many more tables can now be
        linked into MS Access.
      </p></li><li><p>
        Fixed <code class="literal">SQLDescribeCol</code> returning column name
        length in bytes rather than chars.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-0-6"></a>C.2.13. Changes in  MySQL Connector/ODBC 5.0.6 (03 November 2006)</h3></div></div></div><p>
        Connector/ODBC 5.0.6 is the second BETA release.
      </p><p>
        This is an implementation and testing release, and is not
        designed for use within a production environment.
      </p><p>Features, limitations and notes on this release</p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/ODBC supports both <code class="literal">User</code> and
        <code class="literal">System</code> DSNs.
      </p></li><li><p>
        Installation is provided in the form of a standard Microsoft
        System Installer (MSI).
      </p></li><li><p>
        You no longer have to have Connector/ODBC 3.51 installed before
        installing this version.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        You no longer have to have Connector/ODBC 3.51 installed before
        installing this version.
      </p></li><li><p>
        Connector/ODBC supports both <code class="literal">User</code> and
        <code class="literal">System</code> DSNs.
      </p></li><li><p>
        Installation is provided in the form of a standard Microsoft
        System Installer (MSI).
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-0-5"></a>C.2.14. Changes in  MySQL Connector/ODBC 5.0.5 (17 October 2006)</h3></div></div></div><p>
        Connector/ODBC 5.0.5 is the first BETA release.
      </p><p>
        This is an implementation and testing release, and is not
        designed for use within a production environment.
      </p><p>
        You no longer have to have Connector/ODBC 3.51 installed before
        installing this version.
      </p><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        You no longer have to have Connector/ODBC 3.51 installed before
        installing this version.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-0-3"></a>C.2.15. Changes in Connector/ODBC 5.0.3 (Connector/ODBC 5.0 Alpha 3) (20 June
      2006)</h3></div></div></div><p>
      This is an implementation and testing release, and is not designed
      for use within a production environment.
    </p><p>
      Features, limitations and notes on this release:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The following ODBC API functions have been added in this
          release:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">SQLBindParameter</code>
            </p></li><li><p>
              <code class="literal">SQLBindCol</code>
            </p></li></ul></div></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-0-2"></a>C.2.16. Changes in Connector/ODBC 5.0.2 (Never released)</h3></div></div></div><p>
      Connector/ODBC 5.0.2 was an internal implementation and testing
      release.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-5-0-1"></a>C.2.17. Changes in Connector/ODBC 5.0.1 (Connector/ODBC 5.0 Alpha 2) (05 June
      2006)</h3></div></div></div><p>
      Features, limitations and notes on this release:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Connector/ODBC 5.0 is Unicode aware.
        </p></li><li><p>
          Connector/ODBC is currently limited to basic applications. ADO
          applications and Microsoft Office are not supported.
        </p></li><li><p>
          Connector/ODBC must be used with a Driver Manager.
        </p></li><li><p>
          The following ODBC API functions are implemented:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">SQLAllocHandle</code>
            </p></li><li><p>
              <code class="literal">SQLCloseCursor</code>
            </p></li><li><p>
              <code class="literal">SQLColAttribute</code>
            </p></li><li><p>
              <code class="literal">SQLColumns</code>
            </p></li><li><p>
              <code class="literal">SQLConnect</code>
            </p></li><li><p>
              <code class="literal">SQLCopyDesc</code>
            </p></li><li><p>
              <code class="literal">SQLDisconnect</code>
            </p></li><li><p>
              <code class="literal">SQLExecDirect</code>
            </p></li><li><p>
              <code class="literal">SQLExecute</code>
            </p></li><li><p>
              <code class="literal">SQLFetch</code>
            </p></li><li><p>
              <code class="literal">SQLFreeHandle</code>
            </p></li><li><p>
              <code class="literal">SQLFreeStmt</code>
            </p></li><li><p>
              <code class="literal">SQLGetConnectAttr</code>
            </p></li><li><p>
              <code class="literal">SQLGetData</code>
            </p></li><li><p>
              <code class="literal">SQLGetDescField</code>
            </p></li><li><p>
              <code class="literal">SQLGetDescRec</code>
            </p></li><li><p>
              <code class="literal">SQLGetDiagField</code>
            </p></li><li><p>
              <code class="literal">SQLGetDiagRec</code>
            </p></li><li><p>
              <code class="literal">SQLGetEnvAttr</code>
            </p></li><li><p>
              <code class="literal">SQLGetFunctions</code>
            </p></li><li><p>
              <code class="literal">SQLGetStmtAttr</code>
            </p></li><li><p>
              <code class="literal">SQLGetTypeInfo</code>
            </p></li><li><p>
              <code class="literal">SQLNumResultCols</code>
            </p></li><li><p>
              <code class="literal">SQLPrepare</code>
            </p></li><li><p>
              <code class="literal">SQLRowcount</code>
            </p></li><li><p>
              <code class="literal">SQLTables</code>
            </p></li></ul></div><p>
          The following ODBC API function are implemented, but not yet
          support all the available attributes/options:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">SQLSetConnectAttr</code>
            </p></li><li><p>
              <code class="literal">SQLSetDescField</code>
            </p></li><li><p>
              <code class="literal">SQLSetDescRec</code>
            </p></li><li><p>
              <code class="literal">SQLSetEnvAttr</code>
            </p></li><li><p>
              <code class="literal">SQLSetStmtAttr</code>
            </p></li></ul></div></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-26"></a>C.2.18. Changes in  MySQL Connector/ODBC 3.51.26 (07 July 2008)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        There is a new connection option,
        <code class="literal">FLAG_NO_BINARY_RESULT</code>. When set this option
        disables charset 63 for columns with an empty
        <code class="literal">org_table</code>.
       (<a href="http://bugs.mysql.com/29402" target="_top">Bug#29402</a>)</p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        When an <code class="classname">ADOConnection</code> is created and
        attempts to open a schema with
        <code class="methodname">ADOConnection.OpenSchema</code> an access
        violation occurs in <code class="literal">myodbc3.dll</code>.
       (<a href="http://bugs.mysql.com/30770" target="_top">Bug#30770</a>)</p></li><li><p>
        When <code class="literal">SHOW CREATE TABLE</code> was invoked and then
        the field values read, the result was truncated and unusable if
        the table had many rows and indexes.
       (<a href="http://bugs.mysql.com/24131" target="_top">Bug#24131</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-25"></a>C.2.19. Changes in  MySQL Connector/ODBC 3.51.25 (11 April 2008)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="literal">SQLColAttribute()</code> function returned
        <code class="literal">SQL_TRUE</code> when querying the
        <code class="literal">SQL_DESC_FIXED_PREC_SCALE (SQL_COLUMN_MONEY)</code>
        attribute of a <code class="literal">DECIMAL</code> column. Previously,
        the correct value of <code class="literal">SQL_FALSE</code> was returned;
        this is now again the case.
       (<a href="http://bugs.mysql.com/35581" target="_top">Bug#35581</a>)</p></li><li><p>
        The driver crashes ODBC Administrator on attempting to add a new
        DSN.
       (<a href="http://bugs.mysql.com/32057" target="_top">Bug#32057</a>)</p></li><li><p>
        When accessing column data,
        <code class="literal">FLAG_COLUMN_SIZE_S32</code> did not limit the octet
        length or display size reported for fields, causing problems
        with Microsoft Visual FoxPro.
      </p><p>
        The list of ODBC functions that could have caused failures in
        Microsoft software when retrieving the length of
        <code class="literal">LONGBLOB</code> or <code class="literal">LONGTEXT</code>
        columns includes:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">SQLColumns</code>
            </p></li><li><p>
              <code class="literal">SQLColAttribute</code>
            </p></li><li><p>
              <code class="literal">SQLColAttributes</code>
            </p></li><li><p>
              <code class="literal">SQLDescribeCol</code>
            </p></li><li><p>
              <code class="literal">SQLSpecialColumns</code> (theoretically can
              have the same problem)
            </p></li></ul></div><p>
       (<a href="http://bugs.mysql.com/12805" target="_top">Bug#12805</a>, <a href="http://bugs.mysql.com/30890" target="_top">Bug#30890</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-24"></a>C.2.20. Changes in  MySQL Connector/ODBC 3.51.24 (14 March 2008)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Security Enhancement</strong></span>: 
        Accessing a parameer with the type of
        <code class="literal">SQL_C_CHAR</code>, but with a numeric type and a
        length of zero, the parameter marker would get stropped from the
        query. In addition, an SQL injection was possible if the
        parameter value had a non-zero length and was not numeric, the
        text would be inserted verbatim.
       (<a href="http://bugs.mysql.com/34575" target="_top">Bug#34575</a>)</p></li><li><p><span class="bold"><strong>Important Change</strong></span>: 
        In previous versions, the SSL certificate would automatically be
        verified when used as part of the Connector/ODBC connection. The
        default mode is now to ignore the verificate of certificates. To
        enforce verification of the SSL certificate during connection,
        use the <code class="option">SSLVERIFY</code> DSN parameter, setting the
        value to 1.
       (<a href="http://bugs.mysql.com/29955" target="_top">Bug#29955</a>, <a href="http://bugs.mysql.com/34648" target="_top">Bug#34648</a>)</p></li><li><p>
        When using ADO, the count of parameters in a query would always
        return zero.
       (<a href="http://bugs.mysql.com/33298" target="_top">Bug#33298</a>)</p></li><li><p>
        Using tables with a single quote or other non-standard
        characters in the table or column names through ODBC would fail.
       (<a href="http://bugs.mysql.com/32989" target="_top">Bug#32989</a>)</p></li><li><p>
        When using Crystal Reports, table and column names would be
        truncated to 21 characters, and truncated columns in tables
        where the truncated name was the duplicated would lead to only a
        single column being displayed.
       (<a href="http://bugs.mysql.com/32864" target="_top">Bug#32864</a>)</p></li><li><p>
        <code class="literal">SQLExtendedFetch()</code> and
        <code class="literal">SQLFetchScroll()</code> ignored the rowset size if
        the <code class="literal">Don't cache result</code> DSN option was set.
       (<a href="http://bugs.mysql.com/32420" target="_top">Bug#32420</a>)</p></li><li><p>
        When using the ODBC <code class="literal">SQL_TXN_READ_COMMITTED</code>
        option, 'dirty' records would be read from tables as if the
        option had not been applied.
       (<a href="http://bugs.mysql.com/31959" target="_top">Bug#31959</a>)</p></li><li><p>
        When creating a System DSN using the ODBC Administrator on Mac
        OS X, a User DSN would be created instead. The root cause is a
        problem with the iODBC driver manager used on Mac OS X. The fix
        works around this issue.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          ODBC Administrator may still be unable to register a System
          DSN unless the <code class="filename">/Library/ODBC/odbc.ini</code>
          file has the correct permissions. You should ensure that the
          file is writable by the <code class="literal">admin</code> group.
        </p></div><p>(<a href="http://bugs.mysql.com/31495" target="_top">Bug#31495</a>)</p></li><li><p>
        Calling <code class="literal">SQLFetch</code> or
        <code class="literal">SQLFetchScroll</code> would return negative data
        lengths when using <code class="literal">SQL_C_WCHAR</code>.
       (<a href="http://bugs.mysql.com/31220" target="_top">Bug#31220</a>)</p></li><li><p>
        <code class="literal">SQLSetParam()</code> caused memory allocation errors
        due to driver manager's mapping of deprecated functions (buffer
        length -1).
       (<a href="http://bugs.mysql.com/29871" target="_top">Bug#29871</a>)</p></li><li><p>
        Static cursor was unable to be used through ADO when dynamic
        cursors were enabled.
       (<a href="http://bugs.mysql.com/27351" target="_top">Bug#27351</a>)</p></li><li><p>
        Using <code class="literal">connection.Execute</code> to create a record
        set based on a table without declaring the cmd option as
        <code class="literal">adCmdTable</code> will fail when communicating with
        versions of MySQL 5.0.37 and higher. The issue is related to the
        way that <code class="literal">SQLSTATE</code> is returned when ADO tries
        to confirm the existence of the target object.
       (<a href="http://bugs.mysql.com/27158" target="_top">Bug#27158</a>)</p></li><li><p>
        Updating a <code class="literal">RecordSet</code> when the query involves
        a <code class="literal">BLOB</code> field would fail.
       (<a href="http://bugs.mysql.com/19065" target="_top">Bug#19065</a>)</p></li><li><p>
        With some connections to MySQL databases using Connector/ODBC,
        the connection would mistakenly report 'user cancelled' for
        accesses to the database information.
       (<a href="http://bugs.mysql.com/16653" target="_top">Bug#16653</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-23"></a>C.2.21. Changes in  MySQL Connector/ODBC 3.51.23 (09 January 2008)</h3></div></div></div><p>Platform specific notes:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        There are no installer packages for Microsoft Windows x64
        Edition.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/ODBC would incorrectly return
        <code class="literal">SQL_SUCCESS</code> when checking for distributed
        transaction support.
       (<a href="http://bugs.mysql.com/32727" target="_top">Bug#32727</a>)</p></li><li><p>
        When using unixODBC or directly linked applications where the
        thread level is set to less than 3 (within
        <code class="filename">odbcinst.ini</code>), a thread synchronization
        issue would lead to an application crash. This was because
        <code class="literal">SQLAllocStmt()</code> and
        <code class="literal">SQLFreeStmt()</code> did not synchronize access to
        the list of statements associated with a connection.
       (<a href="http://bugs.mysql.com/32587" target="_top">Bug#32587</a>)</p></li><li><p>
        Cleaning up environment handles in multithread environments
        could result in a five (or more) second delay.
       (<a href="http://bugs.mysql.com/32366" target="_top">Bug#32366</a>)</p></li><li><p>
        Renaming an existing DSN entry would create a new entry with the
        new name without deleting the old entry.
       (<a href="http://bugs.mysql.com/31165" target="_top">Bug#31165</a>)</p></li><li><p>
        Setting the default database using the
        <code class="option">DefaultDatabase</code> property of an ADO
        <code class="literal">Connection</code> object would fail with the error
        <code class="literal">Provider does not support this property</code>. The
        <code class="literal">SQLGetInfo()</code> returned the wrong value for
        <code class="literal">SQL_DATABASE_NAME</code> when no database was
        selected.
       (<a href="http://bugs.mysql.com/3780" target="_top">Bug#3780</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-22"></a>C.2.22. Changes in  MySQL Connector/ODBC 3.51.22 (13 November 2007)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The workaround for this bug was removed due to the fixes in
        MySQL Server 5.0.48 and 5.1.21.
      </p><p>This regression was introduced by <a href="http://bugs.mysql.com/10491" target="_top">Bug#10491</a></p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="literal">English</code> locale would be used when
        formatting floating point values. The <code class="literal">C</code>
        locale is now used for these values.
       (<a href="http://bugs.mysql.com/32294" target="_top">Bug#32294</a>)</p></li><li><p>
        When accessing information about supported operations, the
        driver would return incorrect information about the support for
        <code class="literal">UNION</code>.
       (<a href="http://bugs.mysql.com/32253" target="_top">Bug#32253</a>)</p></li><li><p>
        Unsigned integer values greater than the maximum value of a
        signed integer would be handled incorrectly.
       (<a href="http://bugs.mysql.com/32171" target="_top">Bug#32171</a>)</p></li><li><p>
        The wrong result was returned by <code class="literal">SQLGetData()</code>
        when the data was an empty string and a zero-sized buffer was
        specified.
       (<a href="http://bugs.mysql.com/30958" target="_top">Bug#30958</a>)</p></li><li><p>
        Added the <code class="literal">FLAG_COLUMN_SIZE_S32</code> option to
        limit the reported column size to a signed 32-bit integer. This
        option is automatically enabled for ADO applications to provide
        a work around for a bug in ADO.
       (<a href="http://bugs.mysql.com/13776" target="_top">Bug#13776</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-21"></a>C.2.23. Changes in  MySQL Connector/ODBC 3.51.21 (08 October 2007)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        When using a rowset/cursor and add a new row with a number of
        fields, subsequent rows with fewer fields will include the
        original fields from the previous row in the final
        <code class="literal">INSERT</code> statement.
       (<a href="http://bugs.mysql.com/31246" target="_top">Bug#31246</a>)</p></li><li><p>
        Uninitiated memory could be used when C/ODBC internally calls
        <code class="literal">SQLGetFunctions()</code>.
       (<a href="http://bugs.mysql.com/31055" target="_top">Bug#31055</a>)</p></li><li><p>
        The wrong <code class="literal">SQL_DESC_LITERAL_PREFIX</code> would be
        returned for date/time types.
       (<a href="http://bugs.mysql.com/31009" target="_top">Bug#31009</a>)</p></li><li><p>
        The wrong <code class="literal">COLUMN_SIZE</code> would be returned by
        <code class="literal">SQLGetTypeInfo</code> for the TIME columns
        (<code class="literal">SQL_TYPE_TIME</code>).
       (<a href="http://bugs.mysql.com/30939" target="_top">Bug#30939</a>)</p></li><li><p>
        Clicking outside the character set selection box when
        configuring a new DSN could cause the wrong character set to be
        selected.
       (<a href="http://bugs.mysql.com/30568" target="_top">Bug#30568</a>)</p></li><li><p>
        Not specifying a user in the DSN dialog would raise a warning
        even though the parameter is optional.
       (<a href="http://bugs.mysql.com/30499" target="_top">Bug#30499</a>)</p></li><li><p>
        <code class="literal">SQLSetParam()</code> caused memory allocation errors
        due to driver manager's mapping of deprecated functions (buffer
        length -1).
       (<a href="http://bugs.mysql.com/29871" target="_top">Bug#29871</a>)</p></li><li><p>
        When using ADO, a column marked as
        <code class="literal">AUTO_INCREMENT</code> could incorrectly report that
        the column allowed <code class="literal">NULL</code> values. This was dur
        to an issue with <code class="literal">NULLABLE</code> and
        <code class="literal">IS_NULLABLE</code> return values from the call to
        <code class="literal">SQLColumns()</code>.
       (<a href="http://bugs.mysql.com/26108" target="_top">Bug#26108</a>)</p></li><li><p>
        Connector/ODBC would return the wrong the error code when the
        server disconnects the active connection because the configured
        <code class="literal">wait_timeout</code> has expired. Previously it would
        return <code class="literal">HY000</code>. Connector/ODBC now correctly
        returns an <code class="literal">SQLSTATE</code> of
        <code class="literal">08S01</code>.
       (<a href="http://bugs.mysql.com/3456" target="_top">Bug#3456</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-20"></a>C.2.24. Changes in  MySQL Connector/ODBC 3.51.20 (10 September 2007)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Using <code class="literal">FLAG_NO_PROMPT</code> doesn't suppress the
        dialogs normally handled by <code class="literal">SQLDriverConnect</code>.
       (<a href="http://bugs.mysql.com/30840" target="_top">Bug#30840</a>)</p></li><li><p>
        The specified length of the username and authentication
        parameters to <code class="literal">SQLConnect()</code> were not being
        honored.
       (<a href="http://bugs.mysql.com/30774" target="_top">Bug#30774</a>)</p></li><li><p>
        The wrong column size was returned for binary data.
       (<a href="http://bugs.mysql.com/30547" target="_top">Bug#30547</a>)</p></li><li><p>
        <code class="literal">SQLGetData()</code> will now always return
        <code class="literal">SQL_NO_DATA_FOUND</code> on second call when no data
        left, even if requested size is 0.
       (<a href="http://bugs.mysql.com/30520" target="_top">Bug#30520</a>)</p></li><li><p>
        <code class="literal">SQLGetConnectAttr()</code> did not reflect the
        connection state correctly.
       (<a href="http://bugs.mysql.com/14639" target="_top">Bug#14639</a>)</p></li><li><p>
        Removed checkbox in setup dialog for
        <code class="literal">FLAG_FIELD_LENGTH</code> (identified as
        <code class="literal">Don't Optimize Column Width</code> within the GUI
        dialog), which was removed from the driver in 3.51.18.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-19"></a>C.2.25. Changes in  MySQL Connector/ODBC 3.51.19 (10 August 2007)</h3></div></div></div><p>
        Connector/ODBC 3.51.19 fixes a specific issue with the 3.51.18
        release. For a list of changes in the 3.51.18 release, see
        <a href="news.html#myodbc-news-3-51-18" title="C.2.26. Changes in  MySQL Connector/ODBC 3.51.18 (08 August 2007)">Section C.2.26, “Changes in  MySQL Connector/ODBC 3.51.18 (08 August 2007)”</a>.
      </p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Because of <a href="http://bugs.mysql.com/10491" target="_top">Bug#10491</a> in the server, character string results
        were sometimes incorrectly identified as
        <code class="literal">SQL_VARBINARY</code>. Until this server bug is
        corrected, the driver will identify all variable-length strings
        as <code class="literal">SQL_VARCHAR</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-18"></a>C.2.26. Changes in  MySQL Connector/ODBC 3.51.18 (08 August 2007)</h3></div></div></div><p>Platform specific notes:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        Binary packages for Sun Solaris are now available as
        <code class="literal">PKG</code> packages.
      </p></li><li><p>
        Binary packages as disk images with installers are now available
        for Mac OS X.
      </p></li><li><p>
        A binary package without an installer is available for Microsoft
        Windows x64 Edition. There are no installer packages for
        Microsoft Windows x64 Edition.
      </p></li></ul></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        The <code class="option">FLAG_DEBUG</code> option was removed.
      </p></li><li><p>
        When connecting to a specific database when using a DSN, the
        system tables from the <code class="literal">mysql</code> database are no
        longer also available. Previously, tables from the mysql
        database (catalog) were listed as <code class="literal">SYSTEM
        TABLES</code> by <code class="literal">SQLTables()</code> even when a
        different catalog was being queried.
       (<a href="http://bugs.mysql.com/28662" target="_top">Bug#28662</a>)</p></li><li><p>
        Installed for Mac OS X has been re-instated. The installer
        registers the driver at a system (not user) level and makes it
        possible to create both user and system DSNs using the
        Connector/ODBC driver. The installer also fixes the situation
        where the necessary drivers would bge installed local to the
        user, not globally.
       (<a href="http://bugs.mysql.com/15326" target="_top">Bug#15326</a>, <a href="http://bugs.mysql.com/10444" target="_top">Bug#10444</a>)</p></li><li><p>
        Connector/ODBC now supports batched statements. In order to
        enable cached statement support you must switch enable the
        batched statement option
        (<code class="literal">FLAG_MULTI_STATEMENTS</code>, 67108864, or
        <span class="guilabel">Allow multiple statements</span> within a GUI
        configuration). Be aware that batched statements create an
        increased chance of SQL injection attacks and you must ensure
        that your application protects against this scenario.
       (<a href="http://bugs.mysql.com/7445" target="_top">Bug#7445</a>)</p></li><li><p>
        The <code class="literal">SQL_ATTR_ROW_BIND_OFFSET_PTR</code> is now
        supported for row bind offsets.
       (<a href="http://bugs.mysql.com/6741" target="_top">Bug#6741</a>)</p></li><li><p>
        The <code class="literal">TRACE</code> and <code class="literal">TRACEFILE</code>
        DSN options have been removed. Use the ODBC driver manager trace
        options instead.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        When using a table with multiple <code class="literal">TIMESTAMP</code>
        columns, the final <code class="literal">TIMESTAMP</code> column within
        the table definition would not be updateable. Note that there is
        still a limitation in MySQL server regarding multiple
        <code class="literal">TIMESTAMP</code> columns . (<a href="http://bugs.mysql.com/9927" target="_top">Bug#9927</a>)
       (<a href="http://bugs.mysql.com/30081" target="_top">Bug#30081</a>)</p></li><li><p>
        Fixed an issue where the <span><strong class="command">myodbc3i</strong></span> would
        update the the user ODBC configuration file
        (<code class="filename">~/Library/ODBC/odbcinst.ini</code>) instead of
        the system <code class="filename">/Library/ODBC/odbcinst.ini</code>. This
        was caused because <span><strong class="command">myodbc3i</strong></span> was not honouring
        the <code class="literal">s</code> and <code class="literal">u</code> modifiers for
        the <code class="option">-d</code> command-line option.
       (<a href="http://bugs.mysql.com/29964" target="_top">Bug#29964</a>)</p></li><li><p>
        Getting table metadata (through the
        <code class="literal">SQLColumns()</code> would fail, returning a bad
        table definition to calling applications.
       (<a href="http://bugs.mysql.com/29888" target="_top">Bug#29888</a>)</p></li><li><p>
        <code class="literal">DATETIME</code> column types would return
        <code class="literal">FALSE</code> in place of
        <code class="literal">SQL_SUCCESS</code> when requesting the column type
        information.
       (<a href="http://bugs.mysql.com/28657" target="_top">Bug#28657</a>)</p></li><li><p>
        The <code class="literal">SQL_COLUMN_TYPE</code>,
        <code class="literal">SQL_COLUMN_DISPLAY</code> and
        <code class="literal">SQL_COLUMN_PRECISION</code> values would be returned
        incorrectly by <code class="literal">SQLColumns()</code>,
        <code class="literal">SQLDescribeCol()</code> and
        <code class="literal">SQLColAttribute()</code> when accessing character
        columns, especially those generated through
        <code class="literal">concat()</code>. The lengths returned should now
        conform to the ODBC specification. The
        <code class="literal">FLAG_FIELD_LENGTH</code> option no longer has any
        affect on the results returned.
       (<a href="http://bugs.mysql.com/27862" target="_top">Bug#27862</a>)</p></li><li><p>
        Obtaining the length of a column when using a character set for
        the connection of <code class="literal">utf8</code> would result in the
        length being returned incorrectly.
       (<a href="http://bugs.mysql.com/19345" target="_top">Bug#19345</a>)</p></li><li><p>
        The <code class="literal">SQLColumns()</code> function could return
        incorrect information about <code class="literal">TIMESTAMP</code>
        columns, indicating that the field was not nullable.
       (<a href="http://bugs.mysql.com/14414" target="_top">Bug#14414</a>)</p></li><li><p>
        The <code class="literal">SQLColumns()</code> function could return
        incorrect information about <code class="literal">AUTO_INCREMENT</code>
        columns, indicating that the field was not nullable.
       (<a href="http://bugs.mysql.com/14407" target="_top">Bug#14407</a>)</p></li><li><p>
        A binary package without an installer is available for Microsoft
        Windows x64 Edition. There are no installer packages for
        Microsoft Windows x64 Edition.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        <code class="literal">BIT(n)</code> columns are now treated as
        <code class="literal">SQL_BIT</code> data where <code class="literal">n = 1</code>
        and binary data where <code class="literal">n &gt; 1</code>.
      </p></li><li><p>
        The wrong value from <code class="literal">SQL_DESC_LITERAL_SUFFIX</code>
        was returned for binary fields.
      </p></li><li><p>
        The <code class="literal">SQL_DATETIME_SUB</code> column in SQLColumns()
        was not correctly set for date and time types.
      </p></li><li><p>
        The value for <code class="literal">SQL_DESC_FIXED_PREC_SCALE</code> was
        not returned correctly for values in MySQL 5.0 and later.
      </p></li><li><p>
        The wrong value for <code class="literal">SQL_DESC_TYPE</code> was
        returned for date and time types.
      </p></li><li><p>
        <code class="literal">SQLConnect()</code> and
        <code class="literal">SQLDriverConnect()</code> were rewritten to
        eliminate duplicate code and ensure all options were supported
        using both connection methods.
        <code class="literal">SQLDriverConnect()</code> now only requires the
        setup library to be present when the call requires it.
      </p></li><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        Binary packages as disk images with installers are now available
        for Mac OS X.
      </p></li><li><p>
        Binary packages for Sun Solaris are now available as
        <code class="literal">PKG</code> packages.
      </p></li><li><p>
        The wrong value for <code class="literal">DECIMAL_DIGITS</code> in
        <code class="literal">SQLColumns()</code> was reported for
        <code class="literal">FLOAT</code> and <code class="literal">DOUBLE</code> fields,
        as well as the wrong value for the scale parameter to
        <code class="literal">SQLDescribeCol()</code>, and the
        <code class="literal">SQL_DESC_SCALE</code> attribute from
        <code class="literal">SQLColAttribute()</code>.
      </p></li><li><p>
        The <code class="literal">SQL_DATA_TYPE</code> column in
        <code class="literal">SQLColumns()</code> results did not report the
        correct value for date and time types.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-17"></a>C.2.27. Changes in  MySQL Connector/ODBC 3.51.17 (14 July 2007)</h3></div></div></div><p>Platform specific notes:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        Binary packages for Sun Solaris are now available as
        <code class="literal">PKG</code> packages.
      </p></li><li><p>
        Binary packages as disk images with installers are now available
        for Mac OS X.
      </p></li><li><p>
        A binary package without an installer is available for Microsoft
        Windows x64 Edition. There are no installer packages for
        Microsoft Windows x64 Edition.
      </p></li></ul></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        It is now possible to specify a different character set as part
        of the DSN or connection string. This must be used instead of
        the <code class="literal">SET NAMES</code> statement. You can also
        configure the character set value from the GUI configuration.
       (<a href="http://bugs.mysql.com/9498" target="_top">Bug#9498</a>, <a href="http://bugs.mysql.com/6667" target="_top">Bug#6667</a>)</p></li><li><p>
        Fixed calling convention ptr and wrong free in
        <span><strong class="command">myodbc3i</strong></span>, and fixed the null terminating (was
        only one, not two) when writing DSN to string.
      </p></li><li><p>
        Dis-allow NULL ptr for null indicator when calling SQLGetData()
        if value is null. Now returns SQL_ERROR w/state 22002.
      </p></li><li><p>
        The setup library has been split into its own RPM package, to
        allow installing the driver itself with no GUI dependencies.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">myodbc3i</code> did not correctly format driver
        info, which could cause the installation to fail.
       (<a href="http://bugs.mysql.com/29709" target="_top">Bug#29709</a>)</p></li><li><p>
        Connector/ODBC crashed with Crystal Reports due to a rproblem
        with <code class="literal">SQLProcedures()</code>.
       (<a href="http://bugs.mysql.com/28316" target="_top">Bug#28316</a>)</p></li><li><p>
        Fixed a problem where the GUI would crash when configuring or
        removing a System or User DSN.
       (<a href="http://bugs.mysql.com/27315" target="_top">Bug#27315</a>)</p></li><li><p>
        Fixed error handling of out-of-memory and bad connections in
        catalog functions. This might raise errors in code paths that
        had ignored them in the past.
       (<a href="http://bugs.mysql.com/26934" target="_top">Bug#26934</a>)</p></li><li><p>
        For a stored procedure that returns multiple result sets,
        Connector/ODBC returned only the first result set.
       (<a href="http://bugs.mysql.com/16817" target="_top">Bug#16817</a>)</p></li><li><p>
        Calling <code class="literal">SQLGetDiagField</code> with
        <code class="literal">RecNumber 0, DiagIdentifier NOT 0</code> returned
        <code class="literal">SQL_ERROR</code>, preventing access to diagnostic
        header fields.
       (<a href="http://bugs.mysql.com/16224" target="_top">Bug#16224</a>)</p></li><li><p>
        Added a new DSN option
        (<code class="literal">FLAG_ZERO_DATE_TO_MIN</code>) to retrieve
        <code class="literal">XXXX-00-00</code> dates as the minimum allowed ODBC
        date (<code class="literal">XXXX-01-01</code>). Added another option
        (<code class="literal">FLAG_MIN_DATE_TO_ZERO</code>) to mirror this but
        for bound parameters. <code class="literal">FLAG_MIN_DATE_TO_ZERO</code>
        only changes <code class="literal">0000-01-01</code> to
        <code class="literal">0000-00-00</code>.
       (<a href="http://bugs.mysql.com/13766" target="_top">Bug#13766</a>)</p></li><li><p>
        If there was more than one unique key on a table, the correct
        fields were not used in handling <code class="literal">SQLSetPos()</code>.
       (<a href="http://bugs.mysql.com/10563" target="_top">Bug#10563</a>)</p></li><li><p>
        When inserting a large <code class="literal">BLOB</code> field,
        Connector/ODBC would crash due to a memory allocation error.
       (<a href="http://bugs.mysql.com/10562" target="_top">Bug#10562</a>)</p></li><li><p>
        The driver was using
        <code class="literal">mysql_odbc_escape_string()</code>, which does not
        handle the <code class="literal">NO_BACKSLASH_ESCAPES</code> SQL mode. Now
        it uses
        <a href="apis.html#mysql-real-escape-string" title="29.2.3.53. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>,
        which does.
       (<a href="http://bugs.mysql.com/9498" target="_top">Bug#9498</a>)</p></li><li><p>
        <code class="literal">SQLColumns()</code> did not handle many of its
        parameters correctly, which could lead to incorrect results. The
        table name argument was not handled as a pattern value, and most
        arguments were not escaped correctly when they contained
        non-alphanumeric characters.
       (<a href="http://bugs.mysql.com/8860" target="_top">Bug#8860</a>)</p></li><li><p>
        There are no binary packages for Microsoft Windows x64 Edition.
      </p></li><li><p>
        There is no binary package for Mac OS X on 64-bit PowerPC
        because Apple does not currently provide a 64-bit PowerPC
        version of iODBC.
      </p></li><li><p>
        Correctly return error if <code class="literal">SQLBindCol</code> is
        called with an invalid column.
      </p></li><li><p>
        Fixed possible crash if <code class="literal">SQLBindCol()</code> was not
        called before <code class="literal">SQLSetPos()</code>.
      </p></li><li><p>
        The Mac OS X binary packages are only provided as tarballs,
        there is no installer.
      </p></li><li><p>
        The binary packages for Sun Solaris are only provided as
        tarballs, not the PKG format.
      </p></li><li><p>
        The HP-UX 11.23 IA64 binary package does not include the GUI
        bits because of problems building Qt on that platform.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-16"></a>C.2.28. Changes in  MySQL Connector/ODBC 3.51.16 (14 June 2007)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/ODBC now supports using SSL for communication. This is
        not yet exposed in the setup GUI, but must be enabled through
        configuration files or the DSN.
       (<a href="http://bugs.mysql.com/12918" target="_top">Bug#12918</a>)</p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Calls to SQLNativeSql() could cause stack corruption due to an
        incorrect pointer cast.
       (<a href="http://bugs.mysql.com/28758" target="_top">Bug#28758</a>)</p></li><li><p>
        Using curors on results sets with multi-column keys could select
        the wrong value.
       (<a href="http://bugs.mysql.com/28255" target="_top">Bug#28255</a>)</p></li><li><p>
        <code class="literal">SQLForeignKeys</code> does not escape
        <code class="literal">_</code> and <code class="literal">%</code> in the table name
        arguments.
       (<a href="http://bugs.mysql.com/27723" target="_top">Bug#27723</a>)</p></li><li><p>
        When using stored procedures, making a <code class="literal">SELECT</code>
        or second stored procedure call after an initial stored
        procedure call, the second statement will fail.
       (<a href="http://bugs.mysql.com/27544" target="_top">Bug#27544</a>)</p></li><li><p>
        SQLTables() did not distinguish tables from views.
       (<a href="http://bugs.mysql.com/23031" target="_top">Bug#23031</a>)</p></li><li><p>
        Data in <code class="literal">TEXT</code> columns would fail to be read
        correctly.
       (<a href="http://bugs.mysql.com/16917" target="_top">Bug#16917</a>)</p></li><li><p>
        Specifying strings as parameters using the
        <code class="literal">adBSTR</code> or <code class="literal">adVarWChar</code>
        types, (<code class="literal">SQL_WVARCHAR</code> and
        <code class="literal">SQL_WLONGVARCHAR</code>) would be incorrectly
        quoted.
       (<a href="http://bugs.mysql.com/16235" target="_top">Bug#16235</a>)</p></li><li><p>
        SQL_WVARCHAR and SQL_WLONGVARCHAR parameters were not properly
        quoted and escaped.
       (<a href="http://bugs.mysql.com/16235" target="_top">Bug#16235</a>)</p></li><li><p>
        Using <code class="literal">BETWEEN</code> with date values, the wrong
        results could be returned.
       (<a href="http://bugs.mysql.com/15773" target="_top">Bug#15773</a>)</p></li><li><p>
        When using the <code class="literal">Don't Cache Results</code> (option
        value <code class="literal">1048576</code>) with Microsoft Access, the
        connection will fail using DAO/VisualBasic.
       (<a href="http://bugs.mysql.com/4657" target="_top">Bug#4657</a>)</p></li><li><p>
        Return values from <code class="literal">SQLTables()</code> may be
        truncated. (Bugs #22797)
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-15"></a>C.2.29. Changes in  MySQL Connector/ODBC 3.51.15 (07 May 2007)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/ODBC would incorrectly claim to support
        <code class="literal">SQLProcedureColumns</code> (by returning true when
        queried about <code class="literal">SQLPROCEDURECOLUMNS</code> with
        <code class="literal">SQLGetFunctions</code>), but this functionality is
        not supported.
       (<a href="http://bugs.mysql.com/27591" target="_top">Bug#27591</a>)</p></li><li><p>
        An incorrect transaction isolation level may not be returned
        when accessing the connection attributes.
       (<a href="http://bugs.mysql.com/27589" target="_top">Bug#27589</a>)</p></li><li><p>
        Adding a new DSN with the <code class="literal">myodbc3i</code> utility
        under AIX would fail.
       (<a href="http://bugs.mysql.com/27220" target="_top">Bug#27220</a>)</p></li><li><p>
        When inserting data using bulk statements (through
        <code class="literal">SQLBulkOperations</code>), the indicators for all
        rows within the insert would not updated correctly.
       (<a href="http://bugs.mysql.com/24306" target="_top">Bug#24306</a>)</p></li><li><p>
        Using <code class="literal">SQLProcedures</code> does not return the
        database name within the returned resultset.
       (<a href="http://bugs.mysql.com/23033" target="_top">Bug#23033</a>)</p></li><li><p>
        The <code class="literal">SQLTransact()</code> function did not support an
        empty connection handle.
       (<a href="http://bugs.mysql.com/21588" target="_top">Bug#21588</a>)</p></li><li><p>
        Using <code class="literal">SQLDriverConnect</code> instead of
        <code class="literal">SQLConnect</code> could cause later operations to
        fail.
       (<a href="http://bugs.mysql.com/7912" target="_top">Bug#7912</a>)</p></li><li><p>
        When using blobs and parameter replacement in a statement with
        <code class="literal">WHERE CURSOR OF</code>, the SQL is truncated.
       (<a href="http://bugs.mysql.com/5853" target="_top">Bug#5853</a>)</p></li><li><p>
        Connector/ODBC would return too many foreign key results when
        accessing tables with similar names.
       (<a href="http://bugs.mysql.com/4518" target="_top">Bug#4518</a>)</p></li><li><p></p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-14"></a>C.2.30. Changes in  MySQL Connector/ODBC 3.51.14 (08 March 2007)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Use of <code class="literal">SQL_ATTR_CONNECTION_TIMEOUT</code> on the
        server has now been disabled. If you attempt to set this
        attribute on your connection the
        <code class="literal">SQL_SUCCESS_WITH_INFO</code> will be returned, with
        an error number/string of <code class="literal">HYC00: Optional feature not
        supported</code>.
       (<a href="http://bugs.mysql.com/19823" target="_top">Bug#19823</a>)</p></li><li><p>
        Added auto is null option to Connector/ODBC option parameters.
       (<a href="http://bugs.mysql.com/10910" target="_top">Bug#10910</a>)</p></li><li><p>
        Added auto-reconnect option to Connector/ODBC option parameters.
      </p></li><li><p>
        Added support for the <code class="literal">HENV</code> handlers in
        <code class="literal">SQLEndTran()</code>.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        On 64-bit systems, some types would be incorrectly returned.
       (<a href="http://bugs.mysql.com/26024" target="_top">Bug#26024</a>)</p></li><li><p>
        When retrieving <code class="literal">TIME</code> columns, C/ODBC would
        incorrectly interpret the type of the string and could interpret
        it as a <code class="literal">DATE</code> type instead.
       (<a href="http://bugs.mysql.com/25846" target="_top">Bug#25846</a>)</p></li><li><p>
        Connector/ODBC may insert the wrong parameter values when using
        prepared statements under 64-bit Linux.
       (<a href="http://bugs.mysql.com/22446" target="_top">Bug#22446</a>)</p></li><li><p>
        Using Connector/ODBC, with <code class="literal">SQLBindCol</code> and
        binding the length to the return value from
        <code class="literal">SQL_LEN_DATA_AT_EXEC</code> fails with a memory
        allocation error.
       (<a href="http://bugs.mysql.com/20547" target="_top">Bug#20547</a>)</p></li><li><p>
        Using <code class="literal">DataAdapter</code>, Connector/ODBC may
        continually consume memory when reading the same records within
        a loop (Windows Server 2003 SP1/SP2 only).
       (<a href="http://bugs.mysql.com/20459" target="_top">Bug#20459</a>)</p></li><li><p>
        When retrieving data from columns that have been compressed
        using <code class="literal">COMPRESS()</code>, the retrieved data would be
        truncated to 8KB.
       (<a href="http://bugs.mysql.com/20208" target="_top">Bug#20208</a>)</p></li><li><p>
        The ODBC driver name and version number were incorrectly
        reported by the driver.
       (<a href="http://bugs.mysql.com/19740" target="_top">Bug#19740</a>)</p></li><li><p>
        A string format exception would be raised when using iODBC,
        Connector/ODBC and the embedded MySQL server.
       (<a href="http://bugs.mysql.com/16535" target="_top">Bug#16535</a>)</p></li><li><p>
        The <code class="literal">SQLDriverConnect()</code> ODBC method did not
        work with recent Connector/ODBC releases.
       (<a href="http://bugs.mysql.com/12393" target="_top">Bug#12393</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-13"></a>C.2.31. Changes in  MySQL Connector/ODBC 3.51.13 (Never released)</h3></div></div></div><p>
        Connector/ODBC 3.51.13 was an internal implementation and
        testing release.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-12"></a>C.2.32. Changes in  MySQL Connector/ODBC 3.51.12 (11 Febrauary 2005)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        N/A
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Using stored procedures with ADO, where the
        <code class="literal">CommantType</code> has been set correctly to
        <code class="literal">adCmdStoredProc</code>, calls to stored procedures
        would fail.
       (<a href="http://bugs.mysql.com/15635" target="_top">Bug#15635</a>)</p></li><li><p>
        File DSNs could not be saved.
       (<a href="http://bugs.mysql.com/12019" target="_top">Bug#12019</a>)</p></li><li><p>
        <code class="literal">SQLColumns()</code> returned no information for
        tables that had a column named using a reserved word.
       (<a href="http://bugs.mysql.com/9539" target="_top">Bug#9539</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="myodbc-news-3-51-11"></a>C.2.33. Changes in  MySQL Connector/ODBC 3.51.11 (28 January 2005)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">mysql_list_dbcolumns()</code> and
        <code class="literal">insert_fields()</code> were retrieving all rows from
        a table. Fixed the queries generated by these functions to
        return no rows.
       (<a href="http://bugs.mysql.com/8198" target="_top">Bug#8198</a>)</p></li><li><p>
        <code class="literal">SQLGetTypoInfo()</code> returned
        <code class="literal">tinyblob</code> for <code class="literal">SQL_VARBINARY</code>
        and nothing for <code class="literal">SQL_BINARY</code>. Fixed to return
        <code class="literal">varbinary</code> for
        <code class="literal">SQL_VARBINARY</code>, <code class="literal">binary</code> for
        <code class="literal">SQL_BINARY</code>, and <code class="literal">longblob</code>
        for <code class="literal">SQL_LONGVARBINARY</code>.
       (<a href="http://bugs.mysql.com/8138" target="_top">Bug#8138</a>)</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="connector-net-news"></a>C.3. MySQL Connector/NET Change History</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#connector-net-news-5-3-0">C.3.1. Changes in  MySQL Connector/NET 5.3.0 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-3">C.3.2. Changes in  MySQL Connector/NET 5.2.3 (19 August 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-2">C.3.3. Changes in  MySQL Connector/NET 5.2.2 (12 May 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-1">C.3.4. Changes in  MySQL Connector/NET 5.2.1 (27 February 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-2-0">C.3.5. Changes in  MySQL Connector/NET 5.2.0 (11 February 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-7">C.3.6. Changes in  MySQL Connector/NET 5.1.7 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-6">C.3.7. Changes in  MySQL Connector/NET 5.1.6 (12 May 2008)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-5">C.3.8. Changes in  MySQL Connector/NET 5.1.5 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-4">C.3.9. Changes in  MySQL Connector/NET 5.1.4 (20 November 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-3">C.3.10. Changes in  MySQL Connector/NET 5.1.3 (21 September 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-2">C.3.11. Changes in  MySQL Connector/NET 5.1.2 (18 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-1">C.3.12. Changes in  MySQL Connector/NET 5.1.1 (23 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-1-0">C.3.13. Changes in  MySQL Connector/NET 5.1.0 (01 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-10">C.3.14. Changes in  MySQL Connector/NET 5.0.10 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-9">C.3.15. Changes in  MySQL Connector/NET 5.0.9 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-8">C.3.16. Changes in  MySQL Connector/NET 5.0.8 (21 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-7">C.3.17. Changes in  MySQL Connector/NET 5.0.7 (18 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-6">C.3.18. Changes in  MySQL Connector/NET 5.0.6 (22 March 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-5">C.3.19. Changes in  MySQL Connector/NET 5.0.5 (07 March 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-4">C.3.20. Changes in  MySQL Connector/NET 5.0.4 (Not released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-3">C.3.21. Changes in  MySQL Connector/NET 5.0.3 (05 January 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-2">C.3.22. Changes in  MySQL Connector/NET 5.0.2 (06 November 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-1">C.3.23. Changes in  MySQL Connector/NET 5.0.1 (01 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-5-0-0">C.3.24. Changes in  MySQL Connector/NET 5.0.0 (08 August 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-11">C.3.25. Changes in  MySQL Connector/NET 1.0.11 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-10">C.3.26. Changes in  MySQL Connector/NET 1.0.10 (24 August 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-9">C.3.27. Changes in  MySQL Connector/NET 1.0.9 (02 February 2007)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-8">C.3.28. Changes in  MySQL Connector/NET 1.0.8 (20 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-7">C.3.29. Changes in  MySQL Connector/NET 1.0.7 (21 November 2005)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-6">C.3.30. Changes in  MySQL Connector/NET 1.0.6 (03 October 2005)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-5">C.3.31. Changes in  MySQL Connector/NET 1.0.5 (29 August 2005)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-4">C.3.32. Changes in  MySQL Connector/NET 1.0.4 (20 January 2005)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-3">C.3.33. Changes in  MySQL Connector/NET 1.0.3 (12 October 2004)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-2">C.3.34. Changes in  MySQL Connector/NET 1.0.2 (15 November 2004)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-1">C.3.35. Changes in  MySQL Connector/NET 1.0.1 (27 October 2004)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-1-0-0">C.3.36. Changes in  MySQL Connector/NET 1.0.0 (01 September 2004)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-0-9-0">C.3.37. Changes in MySQL Connector/NET Version 0.9.0 (30 August 2004)</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-76">C.3.38. Changes in MySQL Connector/NET Version 0.76</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-75">C.3.39. Changes in MySQL Connector/NET Version 0.75</a></span></dt><dt><span class="section"><a href="news.html#connector-net-0-74">C.3.40. Changes in MySQL Connector/NET Version 0.74</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-71">C.3.41. Changes in MySQL Connector/NET Version 0.71</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-70">C.3.42. Changes in MySQL Connector/NET Version 0.70</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-68">C.3.43. Changes in MySQL Connector/NET Version 0.68</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-65">C.3.44. Changes in MySQL Connector/NET Version 0.65</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-60">C.3.45. Changes in MySQL Connector/NET Version 0.60</a></span></dt><dt><span class="section"><a href="news.html#connector-net-news-0-50">C.3.46. Changes in MySQL Connector/NET Version 0.50</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-3-0"></a>C.3.1. Changes in  MySQL Connector/NET 5.3.0 (Not yet released)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Possible overflow in
        <code class="methodname">MySqlPacket.ReadLong()</code>.
       (<a href="http://bugs.mysql.com/36997" target="_top">Bug#36997</a>)</p></li><li><p>
        The <code class="methodname">TokenizeSql</code> method was adding query
        overhead and causing high CPU utilization for larger queries.
       (<a href="http://bugs.mysql.com/36836" target="_top">Bug#36836</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-2-3"></a>C.3.2. Changes in  MySQL Connector/NET 5.2.3 (19 August 2008)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Error string was returned after a 28000 second
        <code class="literal">wait_timeout</code>. This has been changed to
        generate a <code class="literal">ConnectionState.Closed</code> event.
       (<a href="http://bugs.mysql.com/38119" target="_top">Bug#38119</a>)</p></li><li><p>
        Changed how the procedure schema collection is retrieved. If the
        connection string contains “<span class="quote"><code class="literal">use procedure
        bodies=true</code></span>” then a <code class="literal">SELECT</code>
        is performed on the <code class="literal">mysql.proc</code> table
        directly, as this is up to 50 times faster than the current
        Information Schema implementation. If the connection string
        contains “<span class="quote"><code class="literal">use procedure
        bodies=false</code></span>”, then the Information Schema
        collection is queried.
       (<a href="http://bugs.mysql.com/36694" target="_top">Bug#36694</a>)</p></li><li><p>
        Changed how the procedure schema collection is retrieved. If
        <code class="literal">use procedure bodies=true</code> then the
        <code class="literal">mysql.proc</code> table is selected directly as this
        is up to 50 times faster than the current
        <code class="literal">information_schema</code> implementation. If
        <code class="literal">use procedure bodies=false</code>, then the
        <code class="literal">information_schema</code> collection is queried.
       (<a href="http://bugs.mysql.com/36694" target="_top">Bug#36694</a>)</p></li><li><p>
        String escaping functionality has been moved from the
        <code class="classname">MySqlString</code> class to the
        <code class="classname">MySqlHelper</code> class, where it can be
        accessed by the <code class="methodname">EscapeString</code> method.
       (<a href="http://bugs.mysql.com/36205" target="_top">Bug#36205</a>)</p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        There was a short circuit evaluation error in the
        <code class="methodname">MySqlCommand.CheckState()</code> method. When
        the statement <code class="literal">connection == null</code> was true a
        <code class="classname">NullReferenceException</code> was thrown and not
        the expected <code class="classname">InvalidOperationException</code>.
       (<a href="http://bugs.mysql.com/38276" target="_top">Bug#38276</a>)</p></li><li><p>
        The provider did not silently create the user if the user did
        not exist.
       (<a href="http://bugs.mysql.com/38243" target="_top">Bug#38243</a>)</p></li><li><p>
        Executing a command that resulted in a fatal exception did not
        close the connection.
       (<a href="http://bugs.mysql.com/37991" target="_top">Bug#37991</a>)</p></li><li><p>
        When a prepared insert query is run that contains an
        <code class="literal">UNSIGNED TINYINT</code> in the parameter list, the
        complete query and data that should be inserted is corrupted and
        no error is thrown.
       (<a href="http://bugs.mysql.com/37968" target="_top">Bug#37968</a>)</p></li><li><p>
        In a .NET application MySQL Connector/NET modifies the
        connection string so that it contains several occurrences of the
        same option with different values. This is illustrated by the
        example that follows.
      </p><p>
        The original connection string:
      </p><pre class="programlisting">  host=localhost;database=test;uid=*****;pwd=*****;
  connect timeout=25; auto enlist=false;pooling=false;</pre><p>
        The connection string after after closing
        <code class="classname">MySqlDataReader</code>:
      </p><pre class="programlisting">  host=localhost;database=test;uid=*****;pwd=*****;
  connect timeout=25;auto enlist=false;pooling=false; 
  Allow User Variables=True;Allow User Variables=False;
  Allow User Variables=True;Allow User Variables=False;</pre><p>(<a href="http://bugs.mysql.com/37955" target="_top">Bug#37955</a>)</p></li><li><p>
        Unnecessary network traffic was generated for the normal case
        where the web provider schema was up to date.
       (<a href="http://bugs.mysql.com/37469" target="_top">Bug#37469</a>)</p></li><li><p>
        <code class="methodname">MySqlReader.GetOrdinal()</code> performance
        enhancements break existing functionality.
       (<a href="http://bugs.mysql.com/37239" target="_top">Bug#37239</a>)</p></li><li><p>
        The <code class="literal">autogenerateschema</code> option produced tables
        with incorrect collations.
       (<a href="http://bugs.mysql.com/36444" target="_top">Bug#36444</a>)</p></li><li><p>
        <code class="methodname">GetSchema</code> did not work correctly when
        querying for a collection, if using a non-English locale.
       (<a href="http://bugs.mysql.com/35459" target="_top">Bug#35459</a>)</p></li><li><p>
        When reading back a stored double or single value using the .NET
        provider, the value had less precision than the one stored.
       (<a href="http://bugs.mysql.com/33322" target="_top">Bug#33322</a>)</p></li><li><p>
        Using the MySQL Visual Studio plugin and a MySQL 4.1 server,
        certain field types (<code class="literal">ENUM</code>) would not be
        identified correctly. Also, when looking for tables, the plugin
        would list all tables matching a wildcard pattern of the
        database name supplied in the connection string, instead of only
        tables within the specified database.
       (<a href="http://bugs.mysql.com/30603" target="_top">Bug#30603</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-2-2"></a>C.3.3. Changes in  MySQL Connector/NET 5.2.2 (12 May 2008)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Product documentation incorrectly stated '?' is the preferred
        parameter marker.
       (<a href="http://bugs.mysql.com/37349" target="_top">Bug#37349</a>)</p></li><li><p>
        An incorrect value for a bit field would returned in a multi-row
        query if a preceding value for the field returned
        <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/36313" target="_top">Bug#36313</a>)</p></li><li><p>
        Tables with <code class="literal">GEOMETRY</code> field types would return
        an unknown datatype exception.
       (<a href="http://bugs.mysql.com/36081" target="_top">Bug#36081</a>)</p></li><li><p>
        When using the <code class="literal">MySQLProfileProvider</code>, setting
        profile details and then reading back saved data would result in
        the default values being returned instead of the updated values.
       (<a href="http://bugs.mysql.com/36000" target="_top">Bug#36000</a>)</p></li><li><p>
        When creating a connection, setting the
        <code class="literal">ConnectionString</code> property of
        <code class="literal">MySqlConnection</code> to <code class="literal">NULL</code>
        would throw an exception.
       (<a href="http://bugs.mysql.com/35619" target="_top">Bug#35619</a>)</p></li><li><p>
        The <code class="methodname">DbCommandBuilder.QuoteIdentifer</code>
        method was not implemented.
       (<a href="http://bugs.mysql.com/35492" target="_top">Bug#35492</a>)</p></li><li><p>
        When using encrypted passwords, the
        <code class="literal">GetPassword()</code> function would return the wrong
        string.
       (<a href="http://bugs.mysql.com/35336" target="_top">Bug#35336</a>)</p></li><li><p>
        An error would be raised when calling
        <code class="literal">GetPassword()</code> with a <code class="literal">NULL</code>
        value.
       (<a href="http://bugs.mysql.com/35332" target="_top">Bug#35332</a>)</p></li><li><p>
        When retreiving data where a field has been identified as
        containing a GUID value, the incorrect value would be returned
        when a previous row contained a <code class="literal">NULL</code> value
        for that field.
       (<a href="http://bugs.mysql.com/35041" target="_top">Bug#35041</a>)</p></li><li><p>
        Using the <code class="literal">TableAdapter Wizard</code> would fail when
        generating commands that used stored procedures due to the
        change in supported parameter characters.
       (<a href="http://bugs.mysql.com/34941" target="_top">Bug#34941</a>)</p></li><li><p>
        When creating a new stored procedured, the new parameter code
        which allows the use of the <code class="literal">@</code> symbol would
        interfere with the specification of a
        <code class="literal">DEFINER</code>.
       (<a href="http://bugs.mysql.com/34940" target="_top">Bug#34940</a>)</p></li><li><p>
        When using <code class="literal">SqlDataSource</code> to open a
        connection, the connection would not automatically be closed
        when access had completed.
       (<a href="http://bugs.mysql.com/34460" target="_top">Bug#34460</a>)</p></li><li><p>
        There was a high level of contention in the connection pooling
        code that could lead to delays when opening connections and
        submitting queries. The connection pooling code has been
        modified to try and limit the effects of the contention issue.
       (<a href="http://bugs.mysql.com/34001" target="_top">Bug#34001</a>)</p></li><li><p>
        Using the <code class="literal">TableAdaptor</code> wizard in combination
        with a suitable <code class="literal">SELECT</code> statement, only the
        associated <code class="literal">INSERT</code> statement would also be
        created, rather than the required <code class="literal">DELETE</code> and
        <code class="literal">UPDATE</code> statements.
       (<a href="http://bugs.mysql.com/31338" target="_top">Bug#31338</a>)</p></li><li><p>
        Fixed problem in datagrid code related to creating a new table.
        This problem may have been introduced with .NET 2.0 SP1.
      </p></li><li><p>
        Fixed profile provider that would throw an exception if you were
        updating a profile that already existed.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-2-1"></a>C.3.4. Changes in  MySQL Connector/NET 5.2.1 (27 February 2008)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        When using the provider to generate or update users and
        passwords, the password checking algorithm would not validate
        the password strength or requirements correctly.
       (<a href="http://bugs.mysql.com/34792" target="_top">Bug#34792</a>)</p></li><li><p>
        When executing statements that used stored procedures and
        functions, the new parameter code could fail to identify the
        correct parameter format.
       (<a href="http://bugs.mysql.com/34699" target="_top">Bug#34699</a>)</p></li><li><p>
        The installer would fail to the DDEX provider binary if the
        Visual Studio 2005 component was not selected. The result would
        lead to Connector/NET not loading properly when using the
        interface to a MySQL server within Visual Studio.
       (<a href="http://bugs.mysql.com/34674" target="_top">Bug#34674</a>)</p></li><li><p>
        A number issues were identified in the case, connection and
        scema areas of the code for
        <code class="literal">MembershipProvider</code>,
        <code class="literal">RoleProvider</code>,
        <code class="literal">ProfileProvider</code>.
       (<a href="http://bugs.mysql.com/34495" target="_top">Bug#34495</a>)</p></li><li><p>
        When using web providers, the Connector/NET would check the
        schema and cache the application id, even when the connection
        string had been set. The effect would be to break the memvership
        provider list.
       (<a href="http://bugs.mysql.com/34451" target="_top">Bug#34451</a>)</p></li><li><p>
        Attempting to use an isolation level other than the default with
        a transaction scope would use the default isolation level.
       (<a href="http://bugs.mysql.com/34448" target="_top">Bug#34448</a>)</p></li><li><p>
        When altering a stored procedure within Visual Studio, the
        parameters to the procedure could be lost.
       (<a href="http://bugs.mysql.com/34359" target="_top">Bug#34359</a>)</p></li><li><p>
        A race condition could occur within the procedure cache
        resulting the cache contents overflowing beyond the configured
        cache size.
       (<a href="http://bugs.mysql.com/34338" target="_top">Bug#34338</a>)</p></li><li><p>
        Fixed problem with Visual Studio 2008 integration that caused
        pop-up menus on server explorer nodes to not function
      </p></li><li><p>
        The provider code has been updated to fix a number of
        outstanding issues.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-2-0"></a>C.3.5. Changes in  MySQL Connector/NET 5.2.0 (11 February 2008)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Performing <code class="literal">GetValue()</code> on a field
        <code class="literal">TINYINT(1)</code> returned a
        <code class="literal">BOOLEAN</code>. While not a bug, this caused
        problems in software that expected an <code class="literal">INT</code> to
        be returned. A new connection string option <code class="literal">Treat Tiny
        As Boolean</code> has been added with a default value of
        <code class="literal">true</code>. If set to <code class="literal">false</code> the
        provider will treat <code class="literal">TINYINT(1)</code> as
        <code class="literal">INT</code>.
       (<a href="http://bugs.mysql.com/34052" target="_top">Bug#34052</a>)</p></li><li><p>
        Added support for <code class="literal">DbDataAdapter</code>
        <code class="literal">UpdateBatchSize</code>. Batching is fully supported
        including collapsing inserts down into the multi-value form if
        possible.
      </p></li><li><p>
        DDEX provider now works under Visual Studio 2008 beta 2.
      </p></li><li><p>
        Added ClearPool and ClearAllPools features.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Some speed improvements have been implemented in the
        <code class="literal">TokenizeSql</code> process used to identify elements
        of SQL statements.
       (<a href="http://bugs.mysql.com/34220" target="_top">Bug#34220</a>)</p></li><li><p>
        When accessing tables from different databases within the same
        <code class="literal">TransactionScope</code>, the same user/password
        combination would be used for each database connection.
        Connector/NET does not handle multiple connections within the
        same transaction scope. An error is now returned if you attempt
        this process, instead of using the incorrect authorization
        information.
       (<a href="http://bugs.mysql.com/34204" target="_top">Bug#34204</a>)</p></li><li><p>
        The status of connections reported through the state change
        handler was not being updated correctly.
       (<a href="http://bugs.mysql.com/34082" target="_top">Bug#34082</a>)</p></li><li><p>
        Incorporated some connection string cache optimizations sent to
        us by Maxim Mass.
       (<a href="http://bugs.mysql.com/34000" target="_top">Bug#34000</a>)</p></li><li><p>
        In an open connection where the server had disconnected
        unexpectedly, the status information of the connection would not
        be updated properly.
       (<a href="http://bugs.mysql.com/33909" target="_top">Bug#33909</a>)</p></li><li><p>
        Data cached from the connection string could return invalid
        information because the internal routines were not using
        case-sensitive semantics. This lead to updated connection string
        options not being recognized if they were of a different case
        than the existing cached values.
       (<a href="http://bugs.mysql.com/31433" target="_top">Bug#31433</a>)</p></li><li><p>
        Column name metadata was not using the character set as deifned
        within the connection string being used.
       (<a href="http://bugs.mysql.com/31185" target="_top">Bug#31185</a>)</p></li><li><p>
        Memory usage could increase and decrease significantly when
        updating or inserting a large number of rows.
       (<a href="http://bugs.mysql.com/31090" target="_top">Bug#31090</a>)</p></li><li><p>
        Commands executed from within the state change handeler would
        fail with a <code class="literal">NULL</code> exception.
       (<a href="http://bugs.mysql.com/30964" target="_top">Bug#30964</a>)</p></li><li><p>
        When running a stored procedure multiple times on the same
        connection, the memory usage could increase indefinitely.
       (<a href="http://bugs.mysql.com/30116" target="_top">Bug#30116</a>)</p></li><li><p>
        Using compression in the MySQL connection with Connector/NET
        would be slower than using native (uncompressed) communication.
       (<a href="http://bugs.mysql.com/27865" target="_top">Bug#27865</a>)</p></li><li><p>
        The <code class="literal">MySqlDbType.Datetime</code> has been replaced
        with <code class="literal">MySqlDbType.DateTime</code>. The old format has
        been obsoleted.
       (<a href="http://bugs.mysql.com/26344" target="_top">Bug#26344</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-1-7"></a>C.3.6. Changes in  MySQL Connector/NET 5.1.7 (Not yet released)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        There was a short circuit evaluation error in the
        <code class="methodname">MySqlCommand.CheckState()</code> method. When
        the statement <code class="literal">connection == null</code> was true a
        <code class="classname">NullReferenceException</code> was thrown and not
        the expected <code class="classname">InvalidOperationException</code>.
       (<a href="http://bugs.mysql.com/38276" target="_top">Bug#38276</a>)</p></li><li><p>
        Executing a command that resulted in a fatal exception did not
        close the connection.
       (<a href="http://bugs.mysql.com/37991" target="_top">Bug#37991</a>)</p></li><li><p>
        In a .NET application MySQL Connector/NET modifies the
        connection string so that it contains several occurrences of the
        same option with different values. This is illustrated by the
        example that follows.
      </p><p>
        The original connection string:
      </p><pre class="programlisting">  host=localhost;database=test;uid=*****;pwd=*****;
  connect timeout=25; auto enlist=false;pooling=false;</pre><p>
        The connection string after after closing
        <code class="classname">MySqlDataReader</code>:
      </p><pre class="programlisting">  host=localhost;database=test;uid=*****;pwd=*****;
  connect timeout=25;auto enlist=false;pooling=false; 
  Allow User Variables=True;Allow User Variables=False;
  Allow User Variables=True;Allow User Variables=False;</pre><p>(<a href="http://bugs.mysql.com/37955" target="_top">Bug#37955</a>)</p></li><li><p>
        As <code class="classname">MySqlDbType.DateTime</code> is not available
        in <code class="literal">VB.Net</code> the warning <span class="errortext">The datetime
        enum value is obsolete</span> was always shown during
        compilation.
       (<a href="http://bugs.mysql.com/37406" target="_top">Bug#37406</a>)</p></li><li><p>
        An unknown <code class="literal">MySqlErrorCode</code> was encountered
        when opening a connection with an incorrect password.
       (<a href="http://bugs.mysql.com/37398" target="_top">Bug#37398</a>)</p></li><li><p>
        Documentation incorrectly stated that “<span class="quote">the DataColumn
        class in .NET 1.0 and 1.1 does not allow columns with type of
        UInt16, UInt32, or UInt64 to be autoincrement columns</span>”.
       (<a href="http://bugs.mysql.com/37350" target="_top">Bug#37350</a>)</p></li><li><p>
        <code class="classname">SemaphoreFullException</code> is generated when
        application is closed.
       (<a href="http://bugs.mysql.com/36688" target="_top">Bug#36688</a>)</p></li><li><p>
        <code class="methodname">GetSchema</code> did not work correctly when
        querying for a collection, if using a non-English locale.
       (<a href="http://bugs.mysql.com/35459" target="_top">Bug#35459</a>)</p></li><li><p>
        When reading back a stored double or single value using the .NET
        provider, the value had less precision than the one stored.
       (<a href="http://bugs.mysql.com/33322" target="_top">Bug#33322</a>)</p></li><li><p>
        Using the MySQL Visual Studio plugin and a MySQL 4.1 server,
        certain field types (<code class="literal">ENUM</code>) would not be
        identified correctly. Also, when looking for tables, the plugin
        would list all tables matching a wildcard pattern of the
        database name supplied in the connection string, instead of only
        tables within the specified database.
       (<a href="http://bugs.mysql.com/30603" target="_top">Bug#30603</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-1-6"></a>C.3.7. Changes in  MySQL Connector/NET 5.1.6 (12 May 2008)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        When creating a connection pool, specifying an invalid IP
        address will cause the entire application to crash, instead of
        providing an exception.
       (<a href="http://bugs.mysql.com/36432" target="_top">Bug#36432</a>)</p></li><li><p>
        An incorrect value for a bit field would returned in a multi-row
        query if a preceding value for the field returned
        <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/36313" target="_top">Bug#36313</a>)</p></li><li><p>
        The <code class="literal">MembershipProvider</code> will raise an
        exception when the connection string is configured with
        <code class="literal">enablePasswordRetrival = true</code> and
        <code class="literal">RequireQuestionAndAnswer = false</code>.
       (<a href="http://bugs.mysql.com/36159" target="_top">Bug#36159</a>)</p></li><li><p>
        When calling <code class="literal">GetNumberOfUsersOnline</code> an
        exception is raised on the submitted query due to a missing
        parameter.
       (<a href="http://bugs.mysql.com/36157" target="_top">Bug#36157</a>)</p></li><li><p>
        Tables with <code class="literal">GEOMETRY</code> field types would return
        an unknown datatype exception.
       (<a href="http://bugs.mysql.com/36081" target="_top">Bug#36081</a>)</p></li><li><p>
        When creating a connection, setting the
        <code class="literal">ConnectionString</code> property of
        <code class="literal">MySqlConnection</code> to <code class="literal">NULL</code>
        would throw an exception.
       (<a href="http://bugs.mysql.com/35619" target="_top">Bug#35619</a>)</p></li><li><p>
        The <code class="methodname">DbCommandBuilder.QuoteIdentifer</code>
        method was not implemented.
       (<a href="http://bugs.mysql.com/35492" target="_top">Bug#35492</a>)</p></li><li><p>
        When using <code class="literal">SqlDataSource</code> to open a
        connection, the connection would not automatically be closed
        when access had completed.
       (<a href="http://bugs.mysql.com/34460" target="_top">Bug#34460</a>)</p></li><li><p>
        Attempting to use an isolation level other than the default with
        a transaction scope would use the default isolation level.
       (<a href="http://bugs.mysql.com/34448" target="_top">Bug#34448</a>)</p></li><li><p>
        When altering a stored procedure within Visual Studio, the
        parameters to the procedure could be lost.
       (<a href="http://bugs.mysql.com/34359" target="_top">Bug#34359</a>)</p></li><li><p>
        A race condition could occur within the procedure cache
        resulting the cache contents overflowing beyond the configured
        cache size.
       (<a href="http://bugs.mysql.com/34338" target="_top">Bug#34338</a>)</p></li><li><p>
        Using the <code class="literal">TableAdaptor</code> wizard in combination
        with a suitable <code class="literal">SELECT</code> statement, only the
        associated <code class="literal">INSERT</code> statement would also be
        created, rather than the required <code class="literal">DELETE</code> and
        <code class="literal">UPDATE</code> statements.
       (<a href="http://bugs.mysql.com/31338" target="_top">Bug#31338</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-1-5"></a>C.3.8. Changes in  MySQL Connector/NET 5.1.5 (Not yet released)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Performing <code class="literal">GetValue()</code> on a field
        <code class="literal">TINYINT(1)</code> returned a
        <code class="literal">BOOLEAN</code>. While not a bug, this caused
        problems in software that expected an <code class="literal">INT</code> to
        be returned. A new connection string option <code class="literal">Treat Tiny
        As Boolean</code> has been added with a default value of
        <code class="literal">true</code>. If set to <code class="literal">false</code> the
        provider will treat <code class="literal">TINYINT(1)</code> as
        <code class="literal">INT</code>.
       (<a href="http://bugs.mysql.com/34052" target="_top">Bug#34052</a>)</p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Some speed improvements have been implemented in the
        <code class="literal">TokenizeSql</code> process used to identify elements
        of SQL statements.
       (<a href="http://bugs.mysql.com/34220" target="_top">Bug#34220</a>)</p></li><li><p>
        When accessing tables from different databases within the same
        <code class="literal">TransactionScope</code>, the same user/password
        combination would be used for each database connection.
        Connector/NET does not handle multiple connections within the
        same transaction scope. An error is now returned if you attempt
        this process, instead of using the incorrect authorization
        information.
       (<a href="http://bugs.mysql.com/34204" target="_top">Bug#34204</a>)</p></li><li><p>
        The status of connections reported through the state change
        handler was not being updated correctly.
       (<a href="http://bugs.mysql.com/34082" target="_top">Bug#34082</a>)</p></li><li><p>
        Incorporated some connection string cache optimizations sent to
        us by Maxim Mass.
       (<a href="http://bugs.mysql.com/34000" target="_top">Bug#34000</a>)</p></li><li><p>
        In an open connection where the server had disconnected
        unexpectedly, the status information of the connection would not
        be updated properly.
       (<a href="http://bugs.mysql.com/33909" target="_top">Bug#33909</a>)</p></li><li><p>
        Connector/NET would fail to compile properly with
        <span><strong class="command">nant</strong></span>.
       (<a href="http://bugs.mysql.com/33508" target="_top">Bug#33508</a>)</p></li><li><p>
        Problem with membership provider would mean that
        <code class="literal">FindUserByEmail</code> would fail with a
        <code class="literal">MySqlException</code> because it was trying to add a
        second parameter with the same name as the first.
       (<a href="http://bugs.mysql.com/33347" target="_top">Bug#33347</a>)</p></li><li><p>
        Using compression in the MySQL connection with Connector/NET
        would be slower than using native (uncompressed) communication.
       (<a href="http://bugs.mysql.com/27865" target="_top">Bug#27865</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-1-4"></a>C.3.9. Changes in  MySQL Connector/NET 5.1.4 (20 November 2007)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Setting the size of a string parameter after the value could
        cause an exception.
       (<a href="http://bugs.mysql.com/32094" target="_top">Bug#32094</a>)</p></li><li><p>
        Creation of parameter objects with non-input direction using a
        constructor would fail. This was cause by some old legacy code
        preventing their use.
       (<a href="http://bugs.mysql.com/32093" target="_top">Bug#32093</a>)</p></li><li><p>
        A date string could be returned incorrectly by
        <code class="literal">MySqlDataTime.ToString()</code> when the date
        returned by MySQL was <code class="literal">0000-00-00 00:00:00</code>.
       (<a href="http://bugs.mysql.com/32010" target="_top">Bug#32010</a>)</p></li><li><p>
        A syntax error in a set of batch statements could leave the data
        adapter in a state that appears hung.
       (<a href="http://bugs.mysql.com/31930" target="_top">Bug#31930</a>)</p></li><li><p>
        Installing over a failed uninstall of a previous version could
        result in multiple clients being registered in the
        <code class="literal">machine.config</code>. This would prevent certain
        aspects of the MySQL connection within Visual Studio to work
        properly.
       (<a href="http://bugs.mysql.com/31731" target="_top">Bug#31731</a>)</p></li><li><p>
        Connector/NET would incorrectly report success when enlisting in
        a distributed transaction, although distributed transactions are
        not supported.
       (<a href="http://bugs.mysql.com/31703" target="_top">Bug#31703</a>)</p></li><li><p>
        Data cached from the connection string could return invalid
        information because the internal routines were not using
        case-sensitive semantics. This lead to updated connection string
        options not being recognized if they were of a different case
        than the existing cached values.
       (<a href="http://bugs.mysql.com/31433" target="_top">Bug#31433</a>)</p></li><li><p>
        Trying to use a connection that was not open could return an
        ambiguous and misleading error message.
       (<a href="http://bugs.mysql.com/31262" target="_top">Bug#31262</a>)</p></li><li><p>
        Column name metadata was not using the character set as deifned
        within the connection string being used.
       (<a href="http://bugs.mysql.com/31185" target="_top">Bug#31185</a>)</p></li><li><p>
        Memory usage could increase and decrease significantly when
        updating or inserting a large number of rows.
       (<a href="http://bugs.mysql.com/31090" target="_top">Bug#31090</a>)</p></li><li><p>
        Commands executed from within the state change handeler would
        fail with a <code class="literal">NULL</code> exception.
       (<a href="http://bugs.mysql.com/30964" target="_top">Bug#30964</a>)</p></li><li><p>
        Extracting data through XML functions within a query returns the
        data as <code class="literal">System.Byte[]</code>. This was due to
        Connector/NET incorrectly identifying <code class="literal">BLOB</code>
        fields as binary, rather than text.
       (<a href="http://bugs.mysql.com/30233" target="_top">Bug#30233</a>)</p></li><li><p>
        When running a stored procedure multiple times on the same
        connection, the memory usage could increase indefinitely.
       (<a href="http://bugs.mysql.com/30116" target="_top">Bug#30116</a>)</p></li><li><p>
        Column types with only 1-bit (such as <code class="literal">BOOLEAN</code>
        and <code class="literal">TINYINT(1)</code> were not returned as boolean
        fields.
       (<a href="http://bugs.mysql.com/27959" target="_top">Bug#27959</a>)</p></li><li><p>
        When accessing certain statements, the command would timeout
        before the command completed. Because this cannot always be
        controlled through the individual command timeout options, a
        <code class="literal">default command timeout</code> has been added to the
        connection string options.
       (<a href="http://bugs.mysql.com/27958" target="_top">Bug#27958</a>)</p></li><li><p>
        The server error code was not updated in the
        <code class="literal">Data[]</code> hash, which prevented
        <code class="literal">DbProviderFactory</code> users from accessing the
        server error code.
       (<a href="http://bugs.mysql.com/27436" target="_top">Bug#27436</a>)</p></li><li><p>
        The <code class="literal">MySqlDbType.Datetime</code> has been replaced
        with <code class="literal">MySqlDbType.DateTime</code>. The old format has
        been obsoleted.
       (<a href="http://bugs.mysql.com/26344" target="_top">Bug#26344</a>)</p></li><li><p>
        Changing the connection string of a connection to one that
        changes the parameter marker after the connection had been
        assigned to a command but before the connection is opened could
        cause parameters to not be found.
       (<a href="http://bugs.mysql.com/13991" target="_top">Bug#13991</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-1-3"></a>C.3.10. Changes in  MySQL Connector/NET 5.1.3 (21 September 2007)</h3></div></div></div><p class="release-level">
        This is a new Beta development release, fixing recently
        discovered bugs.
      </p><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        An incorrect <code class="literal">ConstraintException</code> could be
        raised on an <code class="literal">INSERT</code> when adding rows to a
        table with a multiple-column unique key index.
       (<a href="http://bugs.mysql.com/30204" target="_top">Bug#30204</a>)</p></li><li><p>
        A <code class="literal">DATE</code> field would be updated with a
        date/time value, causing a
        <code class="literal">MySqlDataAdapter.Update()</code> exception.
       (<a href="http://bugs.mysql.com/30077" target="_top">Bug#30077</a>)</p></li><li><p>
        The Saudi Hijri calendar was not supported.
       (<a href="http://bugs.mysql.com/29931" target="_top">Bug#29931</a>)</p></li><li><p>
        Calling <code class="literal">SHOW CREATE PROCEDURE</code> for routines
        with a hyphen in the catalog name produced a syntax error.
       (<a href="http://bugs.mysql.com/29526" target="_top">Bug#29526</a>)</p></li><li><p>
        Connecting to a MySQL server earlier than version 4.1 would
        raise a <code class="literal">NullException</code>.
       (<a href="http://bugs.mysql.com/29476" target="_top">Bug#29476</a>)</p></li><li><p>
        The availability of a MySQL server would not be reset when using
        pooled connections (<code class="literal">pooling=true</code>). This would
        lead to the server being reported as unavailable, even if the
        server become available while the application was still running.
       (<a href="http://bugs.mysql.com/29409" target="_top">Bug#29409</a>)</p></li><li><p>
        A <code class="literal">FormatException</code> error would be raised if a
        parameter had not been found, instead of
        <code class="literal">Resources.ParameterMustBeDefined</code>.
       (<a href="http://bugs.mysql.com/29312" target="_top">Bug#29312</a>)</p></li><li><p>
        An exception would be thrown when using the Manage Role
        functionality within the web administrator to assign a role to a
        user.
       (<a href="http://bugs.mysql.com/29236" target="_top">Bug#29236</a>)</p></li><li><p>
        Using the membership/role providers when
        <code class="literal">validationKey</code> or
        <code class="literal">decryptionKey</code> parameters are set to
        <code class="literal">AutoGenerate</code>, an exception would be raised
        when accessing the corresponding values.
       (<a href="http://bugs.mysql.com/29235" target="_top">Bug#29235</a>)</p></li><li><p>
        Certain operations would not check the
        <code class="literal">UsageAdvisor</code> setting, causing log messages
        from the Usage Advisor even when it was disabled.
       (<a href="http://bugs.mysql.com/29124" target="_top">Bug#29124</a>)</p></li><li><p>
        Using the same connection string multiple times would result in
        <code class="literal">Database=<em class="replaceable"><code>dbname</code></em></code>
        appearing multiple times in the resulting string.
       (<a href="http://bugs.mysql.com/29123" target="_top">Bug#29123</a>)</p></li><li><p>
        <span class="emphasis"><em>Visual Studio Plugin</em></span>: Adding a new query
        based on a stored procedure that uses the
        <code class="literal">SELECT</code> statement would terminate the
        query/TableAdapter wizard.
       (<a href="http://bugs.mysql.com/29098" target="_top">Bug#29098</a>)</p></li><li><p>
        Using <code class="literal">TransactionScope</code> would cause an
        <code class="literal">InvalidOperationException</code>.
       (<a href="http://bugs.mysql.com/28709" target="_top">Bug#28709</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-1-2"></a>C.3.11. Changes in  MySQL Connector/NET 5.1.2 (18 June 2007)</h3></div></div></div><p class="release-level">
        This is a new Beta development release, fixing recently
        discovered bugs.
      </p><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Log messages would be truncated to 300 bytes.
       (<a href="http://bugs.mysql.com/28706" target="_top">Bug#28706</a>)</p></li><li><p>
        Creating a user would fail due to the application name being set
        incorrectly.
       (<a href="http://bugs.mysql.com/28648" target="_top">Bug#28648</a>)</p></li><li><p>
        <span class="emphasis"><em>Visual Studio Plugin</em></span>: Adding a new query
        based on a stored procedure that used a
        <code class="literal">UPDATE</code>, <code class="literal">INSERT</code> or
        <code class="literal">DELETE</code> statement would terminate the
        query/TableAdapter wizard.
       (<a href="http://bugs.mysql.com/28536" target="_top">Bug#28536</a>)</p></li><li><p>
        <span class="emphasis"><em>Visual Studio Plugin</em></span>: Query Builder would
        fail to show <code class="literal">TINYTEXT</code> columns, and any
        columns listed after a <code class="literal">TINYTEXT</code> column
        correctly.
       (<a href="http://bugs.mysql.com/28437" target="_top">Bug#28437</a>)</p></li><li><p>
        Accessing the results from a large query when using data
        compression in the connection would fail to return all the data.
       (<a href="http://bugs.mysql.com/28204" target="_top">Bug#28204</a>)</p></li><li><p>
        <span class="emphasis"><em>Visual Studio Plugin</em></span>: Update commands would
        not be generated correctly when using the TableAdapter wizard.
       (<a href="http://bugs.mysql.com/26347" target="_top">Bug#26347</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-1-1"></a>C.3.12. Changes in  MySQL Connector/NET 5.1.1 (23 May 2007)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Running the statement <code class="literal">SHOW PROCESSLIST</code> would
        return columns as byte arrays instead of native columns.
       (<a href="http://bugs.mysql.com/28448" target="_top">Bug#28448</a>)</p></li><li><p>
        Installation of the Connector/NET on Windows would fail if
        VisualStudio had not already been installed.
       (<a href="http://bugs.mysql.com/28260" target="_top">Bug#28260</a>)</p></li><li><p>
        Connector/NET would look for the wrong table when executing
        <code class="literal">User.IsRole().</code>
       (<a href="http://bugs.mysql.com/28251" target="_top">Bug#28251</a>)</p></li><li><p>
        Building a connection string within a tight loop would show slow
        peformance.
       (<a href="http://bugs.mysql.com/28167" target="_top">Bug#28167</a>)</p></li><li><p>
        The <code class="literal">UNSIGNED</code> flag for parameters in a stored
        procedure would be ignored when using
        <code class="literal">MySqlCommandBuilder</code> to obtain the parameter
        information.
       (<a href="http://bugs.mysql.com/27679" target="_top">Bug#27679</a>)</p></li><li><p>
        Using <code class="literal">MySQLDataAdapter.FillSchema()</code> on a
        stored procedure would raise an exception: <code class="literal">Invalid
        attempt to access a field before calling Read()</code>.
       (<a href="http://bugs.mysql.com/27668" target="_top">Bug#27668</a>)</p></li><li><p>
        <code class="literal">DATETIME</code> fields from versions of MySQL
        bgefore 4.1 would be incorrectly parsed, resulting in a
        exception.
       (<a href="http://bugs.mysql.com/23342" target="_top">Bug#23342</a>)</p></li><li><p>
        Fixed password property on
        <code class="literal">MySqlConnectionStringBuilder</code> to use
        <code class="literal">PasswordPropertyText</code> attribute. This causes
        dots to show instead of actual password text.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-1-0"></a>C.3.13. Changes in  MySQL Connector/NET 5.1.0 (01 May 2007)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Now compiles for .NET CF 2.0.
      </p></li><li><p>
        Rewrote stored procedure parsing code using a new SQL tokenizer.
        Really nasty procedures including nested comments are now
        supported.
      </p></li><li><p>
        GetSchema will now report objects relative to the currently
        selected database. What this means is that passing in null as a
        database restriction will report objects on the currently
        selected database only.
      </p></li><li><p>
        Added Membership and Role provider contributed by Sean Wright
        (thanks!).
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-0-10"></a>C.3.14. Changes in  MySQL Connector/NET 5.0.10 (Not yet released)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Executing a command that resulted in a fatal exception did not
        close the connection.
       (<a href="http://bugs.mysql.com/37991" target="_top">Bug#37991</a>)</p></li><li><p>
        When a prepared insert query is run that contains an
        <code class="literal">UNSIGNED TINYINT</code> in the parameter list, the
        complete query and data that should be inserted is corrupted and
        no error is thrown.
       (<a href="http://bugs.mysql.com/37968" target="_top">Bug#37968</a>)</p></li><li><p>
        In a .NET application MySQL Connector/NET modifies the
        connection string so that it contains several occurrences of the
        same option with different values. This is illustrated by the
        example that follows.
      </p><p>
        The original connection string:
      </p><pre class="programlisting">  host=localhost;database=test;uid=*****;pwd=*****;
  connect timeout=25; auto enlist=false;pooling=false;</pre><p>
        The connection string after after closing
        <code class="classname">MySqlDataReader</code>:
      </p><pre class="programlisting">  host=localhost;database=test;uid=*****;pwd=*****;
  connect timeout=25;auto enlist=false;pooling=false; 
  Allow User Variables=True;Allow User Variables=False;
  Allow User Variables=True;Allow User Variables=False;</pre><p>(<a href="http://bugs.mysql.com/37955" target="_top">Bug#37955</a>)</p></li><li><p>
        When creating a connection pool, specifying an invalid IP
        address will cause the entire application to crash, instead of
        providing an exception.
       (<a href="http://bugs.mysql.com/36432" target="_top">Bug#36432</a>)</p></li><li><p>
        <code class="methodname">GetSchema</code> did not work correctly when
        querying for a collection, if using a non-English locale.
       (<a href="http://bugs.mysql.com/35459" target="_top">Bug#35459</a>)</p></li><li><p>
        When reading back a stored double or single value using the .NET
        provider, the value had less precision than the one stored.
       (<a href="http://bugs.mysql.com/33322" target="_top">Bug#33322</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-0-9"></a>C.3.15. Changes in  MySQL Connector/NET 5.0.9 (Not yet released)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The <code class="methodname">DbCommandBuilder.QuoteIdentifer</code>
        method was not implemented.
       (<a href="http://bugs.mysql.com/35492" target="_top">Bug#35492</a>)</p></li><li><p>
        Setting the size of a string parameter after the value could
        cause an exception.
       (<a href="http://bugs.mysql.com/32094" target="_top">Bug#32094</a>)</p></li><li><p>
        Creation of parameter objects with non-input direction using a
        constructor would fail. This was cause by some old legacy code
        preventing their use.
       (<a href="http://bugs.mysql.com/32093" target="_top">Bug#32093</a>)</p></li><li><p>
        A date string could be returned incorrectly by
        <code class="literal">MySqlDataTime.ToString()</code> when the date
        returned by MySQL was <code class="literal">0000-00-00 00:00:00</code>.
       (<a href="http://bugs.mysql.com/32010" target="_top">Bug#32010</a>)</p></li><li><p>
        A syntax error in a set of batch statements could leave the data
        adapter in a state that appears hung.
       (<a href="http://bugs.mysql.com/31930" target="_top">Bug#31930</a>)</p></li><li><p>
        Installing over a failed uninstall of a previous version could
        result in multiple clients being registered in the
        <code class="literal">machine.config</code>. This would prevent certain
        aspects of the MySQL connection within Visual Studio to work
        properly.
       (<a href="http://bugs.mysql.com/31731" target="_top">Bug#31731</a>)</p></li><li><p>
        Data cached from the connection string could return invalid
        information because the internal routines were not using
        case-sensitive semantics. This lead to updated connection string
        options not being recognized if they were of a different case
        than the existing cached values.
       (<a href="http://bugs.mysql.com/31433" target="_top">Bug#31433</a>)</p></li><li><p>
        Column name metadata was not using the character set as deifned
        within the connection string being used.
       (<a href="http://bugs.mysql.com/31185" target="_top">Bug#31185</a>)</p></li><li><p>
        Memory usage could increase and decrease significantly when
        updating or inserting a large number of rows.
       (<a href="http://bugs.mysql.com/31090" target="_top">Bug#31090</a>)</p></li><li><p>
        Commands executed from within the state change handeler would
        fail with a <code class="literal">NULL</code> exception.
       (<a href="http://bugs.mysql.com/30964" target="_top">Bug#30964</a>)</p></li><li><p>
        When running a stored procedure multiple times on the same
        connection, the memory usage could increase indefinitely.
       (<a href="http://bugs.mysql.com/30116" target="_top">Bug#30116</a>)</p></li><li><p>
        The server error code was not updated in the
        <code class="literal">Data[]</code> hash, which prevented
        <code class="literal">DbProviderFactory</code> users from accessing the
        server error code.
       (<a href="http://bugs.mysql.com/27436" target="_top">Bug#27436</a>)</p></li><li><p>
        Changing the connection string of a connection to one that
        changes the parameter marker after the connection had been
        assigned to a command but before the connection is opened could
        cause parameters to not be found.
       (<a href="http://bugs.mysql.com/13991" target="_top">Bug#13991</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-0-8"></a>C.3.16. Changes in  MySQL Connector/NET 5.0.8 (21 August 2007)</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This version introduces a new installer technology.
        </p></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Extracting data through XML functions within a query returns the
        data as <code class="literal">System.Byte[]</code>. This was due to
        Connector/NET incorrectly identifying <code class="literal">BLOB</code>
        fields as binary, rather than text.
       (<a href="http://bugs.mysql.com/30233" target="_top">Bug#30233</a>)</p></li><li><p>
        An incorrect <code class="literal">ConstraintException</code> could be
        raised on an <code class="literal">INSERT</code> when adding rows to a
        table with a multiple-column unique key index.
       (<a href="http://bugs.mysql.com/30204" target="_top">Bug#30204</a>)</p></li><li><p>
        A <code class="literal">DATE</code> field would be updated with a
        date/time value, causing a
        <code class="literal">MySqlDataAdapter.Update()</code> exception.
       (<a href="http://bugs.mysql.com/30077" target="_top">Bug#30077</a>)</p></li><li><p>
        Fixed bug where Connector/Net was hand building some date time
        patterns rather than using the patterns provided under
        CultureInfo. This caused problems with some calendars that do
        not support the same ranges as Gregorian..
       (<a href="http://bugs.mysql.com/29931" target="_top">Bug#29931</a>)</p></li><li><p>
        Calling <code class="literal">SHOW CREATE PROCEDURE</code> for routines
        with a hyphen in the catalog name produced a syntax error.
       (<a href="http://bugs.mysql.com/29526" target="_top">Bug#29526</a>)</p></li><li><p>
        The availability of a MySQL server would not be reset when using
        pooled connections (<code class="literal">pooling=true</code>). This would
        lead to the server being reported as unavailable, even if the
        server become available while the application was still running.
       (<a href="http://bugs.mysql.com/29409" target="_top">Bug#29409</a>)</p></li><li><p>
        A <code class="literal">FormatException</code> error would be raised if a
        parameter had not been found, instead of
        <code class="literal">Resources.ParameterMustBeDefined</code>.
       (<a href="http://bugs.mysql.com/29312" target="_top">Bug#29312</a>)</p></li><li><p>
        Certain operations would not check the
        <code class="literal">UsageAdvisor</code> setting, causing log messages
        from the Usage Advisor even when it was disabled.
       (<a href="http://bugs.mysql.com/29124" target="_top">Bug#29124</a>)</p></li><li><p>
        Using the same connection string multiple times would result in
        <code class="literal">Database=<em class="replaceable"><code>dbname</code></em></code>
        appearing multiple times in the resulting string.
       (<a href="http://bugs.mysql.com/29123" target="_top">Bug#29123</a>)</p></li><li><p>
        Log messages would be truncated to 300 bytes.
       (<a href="http://bugs.mysql.com/28706" target="_top">Bug#28706</a>)</p></li><li><p>
        Accessing the results from a large query when using data
        compression in the connection will fail to return all the data.
       (<a href="http://bugs.mysql.com/28204" target="_top">Bug#28204</a>)</p></li><li><p>
        Fixed problem where
        <code class="literal">MySqlConnection.BeginTransaction</code> checked the
        drivers status var before checking if the connection was open.
        The result was that the driver could report an invalid condition
        on a previously opened connection.
      </p></li><li><p>
        Fixed problem where we were not closing prepared statement
        handles when commands are disposed. This could lead to using up
        all prepared statement handles on the server.
      </p></li><li><p>
        Fixed the database schema collection so that it works on servers
        that are not properly respecting the
        <code class="literal">lower_case_table_names</code> setting.
      </p></li><li><p>
        Fixed problem where any attempt to not read all the records
        returned from a select where each row of the select is greater
        than 1024 bytes would hang the driver.
      </p></li><li><p>
        Fixed problem where a command timing out just after it actually
        finished would cause an exception to be thrown on the command
        timeout thread which would then be seen as an unhandled
        exception.
      </p></li><li><p>
        Fixed some serious issues with command timeout and cancel that
        could present as exceptions about thread ownership. The issue
        was that not all queries cancel the same. Some produce
        resultsets while others don't. ExecuteReader had to be changed
        to check for this.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-0-7"></a>C.3.17. Changes in  MySQL Connector/NET 5.0.7 (18 May 2007)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Running the statement <code class="literal">SHOW PROCESSLIST</code> would
        return columns as byte arrays instead of native columns.
       (<a href="http://bugs.mysql.com/28448" target="_top">Bug#28448</a>)</p></li><li><p>
        Building a connection string within a tight loop would show slow
        peformance.
       (<a href="http://bugs.mysql.com/28167" target="_top">Bug#28167</a>)</p></li><li><p>
        Using logging (with the <code class="literal">logging=true</code>
        parameter to the connection string) would not generate a log
        file.
       (<a href="http://bugs.mysql.com/27765" target="_top">Bug#27765</a>)</p></li><li><p>
        The <code class="literal">UNSIGNED</code> flag for parameters in a stored
        procedure would be ignored when using
        <code class="literal">MySqlCommandBuilder</code> to obtain the parameter
        information.
       (<a href="http://bugs.mysql.com/27679" target="_top">Bug#27679</a>)</p></li><li><p>
        Using <code class="literal">MySQLDataAdapter.FillSchema()</code> on a
        stored procedure would raise an exception: <code class="literal">Invalid
        attempt to access a field before calling Read()</code>.
       (<a href="http://bugs.mysql.com/27668" target="_top">Bug#27668</a>)</p></li><li><p>
        If you close an open connection with an active transaction, the
        transaction is not automatically rolled back.
       (<a href="http://bugs.mysql.com/27289" target="_top">Bug#27289</a>)</p></li><li><p>
        When cloning an open
        <code class="literal">MySqlClient.MySqlConnection</code> with the
        <code class="option">Persist Security Info=False</code> option set, the
        cloned connection is not usable because the security information
        has not been cloned.
       (<a href="http://bugs.mysql.com/27269" target="_top">Bug#27269</a>)</p></li><li><p>
        Enlisting a null transaction would affect the current connection
        object, such that further enlistment operations to the
        transaction are not possible.
       (<a href="http://bugs.mysql.com/26754" target="_top">Bug#26754</a>)</p></li><li><p>
        Attempting to change the the <code class="literal">Connection
        Protocol</code> property within a
        <code class="literal">PropertyGrid</code> control would raise an
        exception.
       (<a href="http://bugs.mysql.com/26472" target="_top">Bug#26472</a>)</p></li><li><p>
        The <code class="literal">characterset</code> property would not be
        identified during a connection (also affected Visual Studion
        Plugin).
       (<a href="http://bugs.mysql.com/26147" target="_top">Bug#26147</a>, <a href="http://bugs.mysql.com/27240" target="_top">Bug#27240</a>)</p></li><li><p>
        The <code class="literal">CreateFormat</code> column of the
        <code class="literal">DataTypes</code> collection did not contain a format
        specification for creating a new column type.
       (<a href="http://bugs.mysql.com/25947" target="_top">Bug#25947</a>)</p></li><li><p>
        <code class="literal">DATETIME</code> fields from versions of MySQL
        bgefore 4.1 would be incorrectly parsed, resulting in a
        exception.
       (<a href="http://bugs.mysql.com/23342" target="_top">Bug#23342</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-0-6"></a>C.3.18. Changes in  MySQL Connector/NET 5.0.6 (22 March 2007)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Publisher listed in "Add/Remove Programs" is not
        consistent with other MySQL products.
       (<a href="http://bugs.mysql.com/27253" target="_top">Bug#27253</a>)</p></li><li><p>
        <code class="literal">DESCRIBE ....</code> SQL statement returns byte
        arrays rather than data on MySQL versions older than 4.1.15.
       (<a href="http://bugs.mysql.com/27221" target="_top">Bug#27221</a>)</p></li><li><p>
        <code class="literal">cmd.Parameters.RemoveAt("Id")</code> will
        cause an error if the last item is requested.
       (<a href="http://bugs.mysql.com/27187" target="_top">Bug#27187</a>)</p></li><li><p>
        <code class="literal">MySqlParameterCollection</code> and parameters added
        with <code class="literal">Insert</code> method can not be retrieved later
        using <code class="literal">ParameterName</code>.
       (<a href="http://bugs.mysql.com/27135" target="_top">Bug#27135</a>)</p></li><li><p>
        Exception thrown when using large values in
        <code class="literal">UInt64</code> parameters.
       (<a href="http://bugs.mysql.com/27093" target="_top">Bug#27093</a>)</p></li><li><p>
        MySQL Visual Studio Plugin 1.1.2 does not work with
        Connector/Net 5.0.5.
       (<a href="http://bugs.mysql.com/26960" target="_top">Bug#26960</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-0-5"></a>C.3.19. Changes in  MySQL Connector/NET 5.0.5 (07 March 2007)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Reverted behavior that required parameter names to start with
        the parameter marker. We apologize for this back and forth but
        we mistakenly changed the behavior to not match what
        <code class="literal">SqlClient</code> supports. We now support using
        either syntax for adding parameters however we also respond
        exactly like <code class="literal">SqlClient</code> in that if you ask for
        the index of a parameter using a syntax different from when you
        added the parameter, the result will be -1.
      </p></li><li><p>
        Assembly now properly appears in the Visual Studio 2005
        Add/Remove Reference dialog.
      </p></li><li><p>
        Fixed problem that prevented use of
        <code class="literal">SchemaOnly</code> or <code class="literal">SingleRow</code>
        command behaviors with stored procedures or prepared statements.
      </p></li><li><p>
        Added <code class="literal">MySqlParameterCollection.AddWithValue</code>
        and marked the <code class="literal">Add(name, value)</code> method as
        obsolete.
      </p></li><li><p>
        Return parameters created with DeriveParameters now have the
        name <code class="literal">RETURN_VALUE</code>.
      </p></li><li><p>
        Fixed problem with parameter name hashing where the hashes were
        not getting updated when parameters were removed from the
        collection.
      </p></li><li><p>
        Fixed problem with calling stored functions when a return
        parameter was not given.
      </p></li><li><p>
        Added <code class="literal">Use Procedure Bodies</code> connection string
        option to allow calling procedures without using procedure
        metadata.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">MySqlConnection.GetSchema</code> fails with
        <code class="literal">NullReferenceException</code> for Foreign Keys.
       (<a href="http://bugs.mysql.com/26660" target="_top">Bug#26660</a>)</p></li><li><p>
        Connector/NET would fail to install under Windows Vista.
       (<a href="http://bugs.mysql.com/26430" target="_top">Bug#26430</a>)</p></li><li><p>
        Opening a connection would be slow due to hostname lookup.
       (<a href="http://bugs.mysql.com/26152" target="_top">Bug#26152</a>)</p></li><li><p>
        Incorrect values/formats would be applied when the
        <code class="literal">OldSyntax</code> connection string option was used.
       (<a href="http://bugs.mysql.com/25950" target="_top">Bug#25950</a>)</p></li><li><p>
        Registry would be incorrectly populated with installation
        locations.
       (<a href="http://bugs.mysql.com/25928" target="_top">Bug#25928</a>)</p></li><li><p>
        Times with negative values would be returned incorrectly.
       (<a href="http://bugs.mysql.com/25912" target="_top">Bug#25912</a>)</p></li><li><p>
        Returned data types of a <code class="literal">DataTypes</code> collection
        do not contain the right correctl CLR Datatype.
       (<a href="http://bugs.mysql.com/25907" target="_top">Bug#25907</a>)</p></li><li><p>
        <code class="literal">GetSchema</code> and <code class="literal">DataTypes</code>
        would throw an exception due to an incorrect table name.
       (<a href="http://bugs.mysql.com/25906" target="_top">Bug#25906</a>)</p></li><li><p>
        <code class="literal">MySqlConnection</code> throws an exception when
        connecting to MySQL v4.1.7.
       (<a href="http://bugs.mysql.com/25726" target="_top">Bug#25726</a>)</p></li><li><p>
        <code class="literal">SELECT</code> did not work correctly when using a
        <code class="literal">WHERE</code> clause containing a UTF-8 string.
       (<a href="http://bugs.mysql.com/25651" target="_top">Bug#25651</a>)</p></li><li><p>
        When closing and then re-opening a connection to a database, the
        character set specification is lost.
       (<a href="http://bugs.mysql.com/25614" target="_top">Bug#25614</a>)</p></li><li><p>
        Filling a table schema through a stored procedure triggers a
        runtime error.
       (<a href="http://bugs.mysql.com/25609" target="_top">Bug#25609</a>)</p></li><li><p>
        <code class="literal">BINARY</code> and <code class="literal">VARBINARY</code>
        columns would be returned as a string, not binary, datatype.
       (<a href="http://bugs.mysql.com/25605" target="_top">Bug#25605</a>)</p></li><li><p>
        A critical <code class="literal">ConnectionPool</code> error would result
        in repeated <code class="literal">System.NullReferenceException</code>.
       (<a href="http://bugs.mysql.com/25603" target="_top">Bug#25603</a>)</p></li><li><p>
        The <code class="literal">UpdateRowSource.FirstReturnedRecord</code>
        method does not work.
       (<a href="http://bugs.mysql.com/25569" target="_top">Bug#25569</a>)</p></li><li><p>
        When connecting to a MySQL Server earlier than version 4.1, the
        connection would hang when reading data.
       (<a href="http://bugs.mysql.com/25458" target="_top">Bug#25458</a>)</p></li><li><p>
        Using <code class="literal">ExecuteScalar()</code> with more than one
        query, where one query fails, will hang the connection.
       (<a href="http://bugs.mysql.com/25443" target="_top">Bug#25443</a>)</p></li><li><p>
        When a <code class="literal">MySqlConversionException</code> is raised on
        a remote object, the client application would receive a
        <code class="literal">SerializationException</code> instead.
       (<a href="http://bugs.mysql.com/24957" target="_top">Bug#24957</a>)</p></li><li><p>
        When connecting to a server, the return code from the connection
        could be zero, even though the hostname was incorrect.
       (<a href="http://bugs.mysql.com/24802" target="_top">Bug#24802</a>)</p></li><li><p>
        High CPU utilization would be experienced when there is no idle
        connection waiting when using pooled connections through
        <code class="literal">MySqlPool.GetConnection</code>.
       (<a href="http://bugs.mysql.com/24373" target="_top">Bug#24373</a>)</p></li><li><p>
        Connector/NET would not compile properly when used with Mono
        1.2.
       (<a href="http://bugs.mysql.com/24263" target="_top">Bug#24263</a>)</p></li><li><p>
        Applications would crash when calling with
        <code class="literal">CommandType</code> set to
        <code class="literal">StoredProcedure</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-0-4"></a>C.3.20. Changes in  MySQL Connector/NET 5.0.4 (Not released)</h3></div></div></div><p class="release-level">
        This is a new Beta development release, fixing recently
        discovered bugs.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-0-3"></a>C.3.21. Changes in  MySQL Connector/NET 5.0.3 (05 January 2007)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Usage Advisor has been implemented. The Usage Advisor checks
        your queries and will report if you are using the connection
        inefficiently.
      </p></li><li><p>
        PerfMon hooks have been added to monitor the stored procedure
        cache hits and misses.
      </p></li><li><p>
        The <code class="literal">MySqlCommand</code> object now supports
        asynchronous query methods. This is implemented useg the
        <code class="literal">BeginExecuteNonQuery</code> and
        <code class="literal">EndExecuteNonQuery</code> methods.
      </p></li><li><p>
        Metadata from storaed procedures and stored function execution
        are cached.
      </p></li><li><p>
        The <code class="literal">CommandBuilder.DeriveParameters</code> function
        has been updated to the procedure cache.
      </p></li><li><p>
        The <code class="literal">ViewColumns</code> <code class="literal">GetSchema</code>
        collection has been updated.
      </p></li><li><p>
        Improved speed and performance by re-architecting certain
        sections of the code.
      </p></li><li><p>
        Support for the embedded server and client library have been
        removed from this release. Support will be added back to a later
        release.
      </p></li><li><p>
        The ShapZipLib library has been replaced with the deflate
        support provided within .NET 2.0.
      </p></li><li><p>
        SSL support has been updated.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Additional text added to error message
       (<a href="http://bugs.mysql.com/25178" target="_top">Bug#25178</a>)</p></li><li><p>
        An exception would be raised, or the process would hang, if
        <code class="literal">SELECT</code> privileges on a database were not
        granted and a stored procedure was used.
       (<a href="http://bugs.mysql.com/25033" target="_top">Bug#25033</a>)</p></li><li><p>
        When adding parameter objects to a command object, if the
        parameter direction is set to <code class="literal">ReturnValue</code>
        before the parameter is added to the command object then when
        the command is executed it throws an error.
       (<a href="http://bugs.mysql.com/25013" target="_top">Bug#25013</a>)</p></li><li><p>
        Using <code class="literal">Driver.IsTooOld()</code> would return the
        wrong value.
       (<a href="http://bugs.mysql.com/24661" target="_top">Bug#24661</a>)</p></li><li><p>
        When using a <code class="literal">DbNull.Value</code> as the value for a
        parameter value, and then later setting a specific value type,
        the command would fail with an exception because the wrong type
        was implied from the <code class="literal">DbNull.Value</code>.
       (<a href="http://bugs.mysql.com/24565" target="_top">Bug#24565</a>)</p></li><li><p>
        Stored procedure executions are not thread safe.
       (<a href="http://bugs.mysql.com/23905" target="_top">Bug#23905</a>)</p></li><li><p>
        Deleting a connection to a disconnected server when using the
        Visual Studio Plugin would cause an assertion failure.
       (<a href="http://bugs.mysql.com/23687" target="_top">Bug#23687</a>)</p></li><li><p>
        Nested transactions (which are unsupported)do not raise an error
        or warning.
       (<a href="http://bugs.mysql.com/22400" target="_top">Bug#22400</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-0-2"></a>C.3.22. Changes in  MySQL Connector/NET 5.0.2 (06 November 2006)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        An <code class="literal">Ignore Prepare</code> option has been added to
        the connection string options. If enabled, prepared statements
        will be disabled application-wide. The default for this option
        is true.
      </p></li><li><p>
        Implemented a stored procedure cache. By default, the connector
        caches the metadata for the last 25 procedures that are seen.
        You can change the numbver of procedures that are cacheds by
        using the <code class="literal">procedure cache</code> connection string.
      </p></li><li><p>
        <span class="bold"><strong>Important change:</strong></span> Due to a
        number of issues with the use of server-side prepared
        statements, Connector/NET 5.0.2 has disabled their use by
        default. The disabling of server-side prepared statements does
        not affect the operation of the connector in any way.
      </p><p>
        To enable server-side prepared statements you must add the
        following configuration property to your connector string
        properties:
      </p><pre class="programlisting">ignore prepare=false</pre><p>
        The default value of this property is true.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        One system where IPv6 was enabled, Connector/NET would
        incorrectly resolve hostnames.
       (<a href="http://bugs.mysql.com/23758" target="_top">Bug#23758</a>)</p></li><li><p>
        Column names with accented characters were not parsed properly
        causing malformed column names in result sets.
       (<a href="http://bugs.mysql.com/23657" target="_top">Bug#23657</a>)</p></li><li><p>
        An exception would be thrown when calling
        <code class="literal">GetSchemaTable</code> and <code class="literal">fields</code>
        was null.
       (<a href="http://bugs.mysql.com/23538" target="_top">Bug#23538</a>)</p></li><li><p>
        A <code class="literal">System.FormatException</code> exception would be
        raised when invoking a stored procedure with an
        <code class="literal">ENUM</code> input parameter.
       (<a href="http://bugs.mysql.com/23268" target="_top">Bug#23268</a>)</p></li><li><p>
        During installation, an antivirus error message would be raised
        (indicating a malicious script problem).
       (<a href="http://bugs.mysql.com/23245" target="_top">Bug#23245</a>)</p></li><li><p>
        Creating a connection through the Server Explorer when using the
        Visual Studio Plugin would fail. The installer for the Visual
        Studio Plugin has been updated to ensure that Connector/NET
        5.0.2 must be installed.
       (<a href="http://bugs.mysql.com/23071" target="_top">Bug#23071</a>)</p></li><li><p>
        Using Windows Vista (RC2) as a non-privileged user would raise a
        <code class="literal">Registry key 'Global' access denied</code>.
       (<a href="http://bugs.mysql.com/22882" target="_top">Bug#22882</a>)</p></li><li><p>
        Within Mono, using the <code class="literal">PreparedStatement</code>
        interface could result in an error due to a
        <code class="literal">BitArray</code> copying error.
       (<a href="http://bugs.mysql.com/18186" target="_top">Bug#18186</a>)</p></li><li><p>
        Connector/NET did not work as a data source for the
        <code class="literal">SqlDataSource</code> object used by ASP.NET 2.0.
       (<a href="http://bugs.mysql.com/16126" target="_top">Bug#16126</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-0-1"></a>C.3.23. Changes in  MySQL Connector/NET 5.0.1 (01 October 2006)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/NET on a Tukish operating system, may fail to execute
        certain SQL statements correctly.
       (<a href="http://bugs.mysql.com/22452" target="_top">Bug#22452</a>)</p></li><li><p>
        Starting a transaction on a connection created by
        <code class="literal">MySql.Data.MySqlClient.MySqlClientFactory</code>,
        using <code class="literal">BeginTransaction</code> without specifying an
        isolation level, causes the SQL statement to fail with a syntax
        error.
       (<a href="http://bugs.mysql.com/22042" target="_top">Bug#22042</a>)</p></li><li><p>
        The <code class="literal">MySqlexception</code> class is now derived from
        the <code class="literal">DbException</code> class.
       (<a href="http://bugs.mysql.com/21874" target="_top">Bug#21874</a>)</p></li><li><p>
        The <code class="literal">#</code> would not be accepted within
        column/table names, even though it was valid.
       (<a href="http://bugs.mysql.com/21521" target="_top">Bug#21521</a>)</p></li><li><p>
        You can now install the Connector/NET MSI package from the
        command line using the <code class="literal">/passive</code>,
        <code class="literal">/quiet</code>, <code class="literal">/q</code> options.
       (<a href="http://bugs.mysql.com/19994" target="_top">Bug#19994</a>)</p></li><li><p>
        Submitting an empty string to a command object through
        <code class="literal">prepare</code> raises an
        <code class="literal">System.IndexOutOfRangeException</code>, rather than
        a Connector/Net exception.
       (<a href="http://bugs.mysql.com/18391" target="_top">Bug#18391</a>)</p></li><li><p>
        Using <code class="literal">ExecuteScalar</code> with a datetime field,
        where the value of the field is "0000-00-00 00:00:00",
        a <code class="literal">MySqlConversionException</code> exception would be
        raised.
       (<a href="http://bugs.mysql.com/11991" target="_top">Bug#11991</a>)</p></li><li><p>
        An <code class="literal">MySql.Data.Types.MySqlConversionException</code>
        would be raised when trying to update a row that contained a
        date field, where the date field contained a zero value
        (0000-00-00 00:00:00).
       (<a href="http://bugs.mysql.com/9619" target="_top">Bug#9619</a>)</p></li><li><p>
        Executing multiple queries as part of a transaction returns
        <code class="literal">There is already an openDataReader associated with this
        Connection which must be closed first</code>.
       (<a href="http://bugs.mysql.com/7248" target="_top">Bug#7248</a>)</p></li><li><p>
        Incorrect field/data lengths could be returned for
        <code class="literal">VARCHAR</code> UTF8 columns. Bug (#14592)
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-5-0-0"></a>C.3.24. Changes in  MySQL Connector/NET 5.0.0 (08 August 2006)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Replaced use of ICSharpCode with .NET 2.0 internal deflate
        support.
      </p></li><li><p>
        Refactored test suite to test all protocols in a single pass.
      </p></li><li><p>
        Added usage advisor warnings for requesting column values by the
        wrong type.
      </p></li><li><p>
        Reimplemented PacketReader/PacketWriter support into
        <code class="classname">MySqlStream</code> class.
      </p></li><li><p>
        Reworked connection string classes to be simpler and faster.
      </p></li><li><p>
        Added procedure metadata caching.
      </p></li><li><p>
        Added internal implemention of SHA1 so we don't have to
        distribute the OpenNetCF on mobile devices.
      </p></li><li><p>
        Implemented <code class="classname">MySqlClientFactory</code> class.
      </p></li><li><p>
        Added perfmon hooks for stored procedure cache hits and misses.
      </p></li><li><p>
        Implemented classes and interfaces for ADO.Net 2.0 support.
      </p></li><li><p>
        Added Async query methods.
      </p></li><li><p>
        Implemented Usage Advisor.
      </p></li><li><p>
        Completely refactored how column values are handled to avoid
        boxing in some cases.
      </p></li><li><p>
        Implemented <code class="classname">MySqlConnectionBuilder</code> class.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        CommandText: Question mark in comment line is being parsed as a
        parameter.
       (<a href="http://bugs.mysql.com/6214" target="_top">Bug#6214</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-1-0-11"></a>C.3.25. Changes in  MySQL Connector/NET 1.0.11 (Not yet released)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Attempting to utilize MySQL Connector .Net version 1.0.10 throws
        a fatal exception under Mono when pooling is enabled.
       (<a href="http://bugs.mysql.com/33682" target="_top">Bug#33682</a>)</p></li><li><p>
        Setting the size of a string parameter after the value could
        cause an exception.
       (<a href="http://bugs.mysql.com/32094" target="_top">Bug#32094</a>)</p></li><li><p>
        Creation of parameter objects with non-input direction using a
        constructor would fail. This was cause by some old legacy code
        preventing their use.
       (<a href="http://bugs.mysql.com/32093" target="_top">Bug#32093</a>)</p></li><li><p>
        Memory usage could increase and decrease significantly when
        updating or inserting a large number of rows.
       (<a href="http://bugs.mysql.com/31090" target="_top">Bug#31090</a>)</p></li><li><p>
        Commands executed from within the state change handeler would
        fail with a <code class="literal">NULL</code> exception.
       (<a href="http://bugs.mysql.com/30964" target="_top">Bug#30964</a>)</p></li><li><p>
        Extracting data through XML functions within a query returns the
        data as <code class="literal">System.Byte[]</code>. This was due to
        Connector/NET incorrectly identifying <code class="literal">BLOB</code>
        fields as binary, rather than text.
       (<a href="http://bugs.mysql.com/30233" target="_top">Bug#30233</a>)</p></li><li><p>
        Using compression in the MySQL connection with Connector/NET
        would be slower than using native (uncompressed) communication.
       (<a href="http://bugs.mysql.com/27865" target="_top">Bug#27865</a>)</p></li><li><p>
        Changing the connection string of a connection to one that
        changes the parameter marker after the connection had been
        assigned to a command but before the connection is opened could
        cause parameters to not be found.
       (<a href="http://bugs.mysql.com/13991" target="_top">Bug#13991</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-1-0-10"></a>C.3.26. Changes in  MySQL Connector/NET 1.0.10 (24 August 2007)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        An incorrect <code class="literal">ConstraintException</code> could be
        raised on an <code class="literal">INSERT</code> when adding rows to a
        table with a multiple-column unique key index.
       (<a href="http://bugs.mysql.com/30204" target="_top">Bug#30204</a>)</p></li><li><p>
        The availability of a MySQL server would not be reset when using
        pooled connections (<code class="literal">pooling=true</code>). This would
        lead to the server being reported as unavailable, even if the
        server become available while the application was still running.
       (<a href="http://bugs.mysql.com/29409" target="_top">Bug#29409</a>)</p></li><li><p>
        Publisher listed in "Add/Remove Programs" is not
        consistent with other MySQL products.
       (<a href="http://bugs.mysql.com/27253" target="_top">Bug#27253</a>)</p></li><li><p>
        <code class="literal">MySqlParameterCollection</code> and parameters added
        with <code class="literal">Insert</code> method can not be retrieved later
        using <code class="literal">ParameterName</code>.
       (<a href="http://bugs.mysql.com/27135" target="_top">Bug#27135</a>)</p></li><li><p>
        <code class="literal">BINARY</code> and <code class="literal">VARBINARY</code>
        columns would be returned as a string, not binary, datatype.
       (<a href="http://bugs.mysql.com/25605" target="_top">Bug#25605</a>)</p></li><li><p>
        A critical <code class="literal">ConnectionPool</code> error would result
        in repeated <code class="literal">System.NullReferenceException</code>.
       (<a href="http://bugs.mysql.com/25603" target="_top">Bug#25603</a>)</p></li><li><p>
        When a <code class="literal">MySqlConversionException</code> is raised on
        a remote object, the client application would receive a
        <code class="literal">SerializationException</code> instead.
       (<a href="http://bugs.mysql.com/24957" target="_top">Bug#24957</a>)</p></li><li><p>
        High CPU utilization would be experienced when there is no idle
        connection waiting when using pooled connections through
        <code class="literal">MySqlPool.GetConnection</code>.
       (<a href="http://bugs.mysql.com/24373" target="_top">Bug#24373</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-1-0-9"></a>C.3.27. Changes in  MySQL Connector/NET 1.0.9 (02 February 2007)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The ICSharpCode ZipLib is no longer used by the Connector, and
        is no longer distributed with it.
      </p></li><li><p>
        <span class="bold"><strong>Important change:</strong></span> Binaries for
        .NET 1.0 are no longer supplied with this release. If you need
        support for .NET 1.0, you must build from source.
      </p></li><li><p>
        Improved <code class="literal">CommandBuilder.DeriveParameters</code> to
        first try and use the procedure cache before querying for the
        stored procedure metadata. Return parameters created with
        <code class="literal">DeriveParameters</code> now have the name
        <code class="literal">RETURN_VALUE</code>.
      </p></li><li><p>
        An <code class="literal">Ignore Prepare</code> option has been added to
        the connection string options. If enabled, prepared statements
        will be disabled application-wide. The default for this option
        is true.
      </p></li><li><p>
        Implemented a stored procedure cache. By default, the connector
        caches the metadata for the last 25 procedures that are seen.
        You can change the numbver of procedures that are cacheds by
        using the <code class="literal">procedure cache</code> connection string.
      </p></li><li><p>
        <span class="bold"><strong>Important change:</strong></span> Due to a
        number of issues with the use of server-side prepared
        statements, Connector/NET 5.0.2 has disabled their use by
        default. The disabling of server-side prepared statements does
        not affect the operation of the connector in any way.
      </p><p>
        To enable server-side prepared statements you must add the
        following configuration property to your connector string
        properties:
      </p><pre class="programlisting">ignore prepare=false</pre><p>
        The default value of this property is true.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Times with negative values would be returned incorrectly.
       (<a href="http://bugs.mysql.com/25912" target="_top">Bug#25912</a>)</p></li><li><p>
        <code class="literal">MySqlConnection</code> throws a
        <code class="literal">NullReferenceException</code> and
        <code class="literal">ArgumentNullException</code> when connecting to
        MySQL v4.1.7.
       (<a href="http://bugs.mysql.com/25726" target="_top">Bug#25726</a>)</p></li><li><p>
        <code class="literal">SELECT</code> did not work correctly when using a
        <code class="literal">WHERE</code> clause containing a UTF-8 string.
       (<a href="http://bugs.mysql.com/25651" target="_top">Bug#25651</a>)</p></li><li><p>
        When closing and then re-opening a connection to a database, the
        character set specification is lost.
       (<a href="http://bugs.mysql.com/25614" target="_top">Bug#25614</a>)</p></li><li><p>
        Trying to fill a table schema through a stored procedure
        triggers a runtime error.
       (<a href="http://bugs.mysql.com/25609" target="_top">Bug#25609</a>)</p></li><li><p>
        Using <code class="literal">ExecuteScalar()</code> with more than one
        query, where one query fails, will hang the connection.
       (<a href="http://bugs.mysql.com/25443" target="_top">Bug#25443</a>)</p></li><li><p>
        Additional text added to error message.
       (<a href="http://bugs.mysql.com/25178" target="_top">Bug#25178</a>)</p></li><li><p>
        When adding parameter objects to a command object, if the
        parameter direction is set to <code class="literal">ReturnValue</code>
        before the parameter is added to the command object then when
        the command is executed it throws an error.
       (<a href="http://bugs.mysql.com/25013" target="_top">Bug#25013</a>)</p></li><li><p>
        When connecting to a server, the return code from the connection
        could be zero, even though the hostname was incorrect.
       (<a href="http://bugs.mysql.com/24802" target="_top">Bug#24802</a>)</p></li><li><p>
        Using <code class="literal">Driver.IsTooOld()</code> would return the
        wrong value.
       (<a href="http://bugs.mysql.com/24661" target="_top">Bug#24661</a>)</p></li><li><p>
        When using a <code class="literal">DbNull.Value</code> as the value for a
        parameter value, and then later setting a specific value type,
        the command would fail with an exception because the wrong type
        was implied from the <code class="literal">DbNull.Value</code>.
       (<a href="http://bugs.mysql.com/24565" target="_top">Bug#24565</a>)</p></li><li><p>
        Stored procedure executions are not thread safe.
       (<a href="http://bugs.mysql.com/23905" target="_top">Bug#23905</a>)</p></li><li><p>
        The <code class="literal">CommandBuilder</code> would mistakenly add
        insert parameters for a table column with auto incrementation
        enabled.
       (<a href="http://bugs.mysql.com/23862" target="_top">Bug#23862</a>)</p></li><li><p>
        One system where IPv6 was enabled, Connector/NET would
        incorrectly resolve hostnames.
       (<a href="http://bugs.mysql.com/23758" target="_top">Bug#23758</a>)</p></li><li><p>
        Nested transactions do not raise an error or warning.
       (<a href="http://bugs.mysql.com/22400" target="_top">Bug#22400</a>)</p></li><li><p>
        An <code class="literal">System.OverflowException</code> would be raised
        when accessing a varchar field over 255 bytes. Bug (#23749)
      </p></li><li><p>
        Within Mono, using the <code class="literal">PreparedStatement</code>
        interface could result in an error due to a
        <code class="literal">BitArray</code> copying error. (Bug 18186)
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-1-0-8"></a>C.3.28. Changes in  MySQL Connector/NET 1.0.8 (20 October 2006)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Stored procedures are now cached.
      </p></li><li><p>
        The method for retrieving stored procedured metadata has been
        changed so that users without <code class="literal">SELECT</code>
        privileges on the <code class="literal">mysql.proc</code> table can use a
        stored procedure.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/NET on a Tukish operating system, may fail to execute
        certain SQL statements correctly.
       (<a href="http://bugs.mysql.com/22452" target="_top">Bug#22452</a>)</p></li><li><p>
        The <code class="literal">#</code> would not be accepted within
        column/table names, even though it was valid.
       (<a href="http://bugs.mysql.com/21521" target="_top">Bug#21521</a>)</p></li><li><p>
        Calling <code class="methodname">Close</code> on a connection after
        calling a stored procedure would trigger a
        <code class="literal">NullReferenceException</code>.
       (<a href="http://bugs.mysql.com/20581" target="_top">Bug#20581</a>)</p></li><li><p>
        You can now install the Connector/NET MSI package from the
        command line using the <code class="literal">/passive</code>,
        <code class="literal">/quiet</code>, <code class="literal">/q</code> options.
       (<a href="http://bugs.mysql.com/19994" target="_top">Bug#19994</a>)</p></li><li><p>
        The DiscoverParameters function would fail when a stored
        procedure used a <code class="literal">NUMERIC</code> parameter type.
       (<a href="http://bugs.mysql.com/19515" target="_top">Bug#19515</a>)</p></li><li><p>
        When running a query that included a date comparison, a
        DateReader error would be raised.
       (<a href="http://bugs.mysql.com/19481" target="_top">Bug#19481</a>)</p></li><li><p>
        <code class="literal">IDataRecord.GetString</code> would raise
        <code class="literal">NullPointerException</code> for null values in
        returned rows. Method now throws
        <code class="literal">SqlNullValueException</code>.
       (<a href="http://bugs.mysql.com/19294" target="_top">Bug#19294</a>)</p></li><li><p>
        Parameter substitution in queries where the order of parameters
        and table fields did not match would substitute incorrect
        values.
       (<a href="http://bugs.mysql.com/19261" target="_top">Bug#19261</a>)</p></li><li><p>
        Submitting an empty string to a command object through
        <code class="literal">prepare</code> raises an
        <code class="literal">System.IndexOutOfRangeException</code>, rather than
        a Connector/Net exception.
       (<a href="http://bugs.mysql.com/18391" target="_top">Bug#18391</a>)</p></li><li><p>
        An exception would be raised when using an output parameter to a
        <code class="literal">System.String</code> value.
       (<a href="http://bugs.mysql.com/17814" target="_top">Bug#17814</a>)</p></li><li><p>
        CHAR type added to MySqlDbType.
       (<a href="http://bugs.mysql.com/17749" target="_top">Bug#17749</a>)</p></li><li><p>
        A <code class="literal">SELECT</code> query on a table with a date with a
        value of <code class="literal">'0000-00-00'</code> would hang the
        application.
       (<a href="http://bugs.mysql.com/17736" target="_top">Bug#17736</a>)</p></li><li><p>
        The CommandBuilder ignored Unsigned flag at Parameter creation.
       (<a href="http://bugs.mysql.com/17375" target="_top">Bug#17375</a>)</p></li><li><p>
        When working with multiple threads, character set initialization
        would generate errors.
       (<a href="http://bugs.mysql.com/17106" target="_top">Bug#17106</a>)</p></li><li><p>
        When using an unsigned 64-bit integer in a stored procedure, the
        unsigned bit would be lost stored.
       (<a href="http://bugs.mysql.com/16934" target="_top">Bug#16934</a>)</p></li><li><p>
        <code class="literal">DataReader</code> would show the value of the
        previous row (or last row with non-null data) if the current row
        contained a <code class="literal">datetime</code> field with a null value.
       (<a href="http://bugs.mysql.com/16884" target="_top">Bug#16884</a>)</p></li><li><p>
        Unsigned data types were not properly supported.
       (<a href="http://bugs.mysql.com/16788" target="_top">Bug#16788</a>)</p></li><li><p>
        The connection string parser did not allow single or double
        quotes in the password.
       (<a href="http://bugs.mysql.com/16659" target="_top">Bug#16659</a>)</p></li><li><p>
        The <code class="literal">MySqlDateTime</code> class did not contain
        constructors.
       (<a href="http://bugs.mysql.com/15112" target="_top">Bug#15112</a>)</p></li><li><p>
        Called <code class="literal">MySqlCommandBuilder.DeriveParameters</code>
        for a stored procedure that has no paramers would cause an
        application crash.
       (<a href="http://bugs.mysql.com/15077" target="_top">Bug#15077</a>)</p></li><li><p>
        Using <code class="literal">ExecuteScalar</code> with a datetime field,
        where the value of the field is "0000-00-00 00:00:00",
        a <code class="literal">MySqlConversionException</code> exception would be
        raised.
       (<a href="http://bugs.mysql.com/11991" target="_top">Bug#11991</a>)</p></li><li><p>
        An <code class="literal">MySql.Data.Types.MySqlConversionException</code>
        would be raised when trying to update a row that contained a
        date field, where the date field contained a zero value
        (0000-00-00 00:00:00).
       (<a href="http://bugs.mysql.com/9619" target="_top">Bug#9619</a>)</p></li><li><p>
        When using <code class="literal">MySqlDataAdapter</code>, connections to a
        MySQL server may remain open and active, even though the use of
        the connection has been completed and the data received.
       (<a href="http://bugs.mysql.com/8131" target="_top">Bug#8131</a>)</p></li><li><p>
        Executing multiple queries as part of a transaction returns
        <code class="literal">There is already an openDataReader associated with this
        Connection which must be closed first</code>.
       (<a href="http://bugs.mysql.com/7248" target="_top">Bug#7248</a>)</p></li><li><p>
        Incorrect field/data lengths could be returned for
        <code class="literal">VARCHAR</code> UTF8 columns. Bug (#14592)
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-1-0-7"></a>C.3.29. Changes in  MySQL Connector/NET 1.0.7 (21 November 2005)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Unsigned <code class="literal">tinyint</code> (NET byte) would lead to and
        incorrectly determined parameter type from the parameter value.
       (<a href="http://bugs.mysql.com/18570" target="_top">Bug#18570</a>)</p></li><li><p>
        A <code class="literal">#42000Query was empty</code> exception occurred
        when executing a query built with
        <code class="literal">MySqlCommandBuilder</code>, if the query string
        ended with a semicolon.
       (<a href="http://bugs.mysql.com/14631" target="_top">Bug#14631</a>)</p></li><li><p>
        The parameter collection object's <code class="literal">Add()</code>
        method added parameters to the list without first checking to
        see whether they already existed. Now it updates the value of
        the existing parameter object if it exists.
       (<a href="http://bugs.mysql.com/13927" target="_top">Bug#13927</a>)</p></li><li><p>
        Added support for the <code class="literal">cp932</code> character set.
       (<a href="http://bugs.mysql.com/13806" target="_top">Bug#13806</a>)</p></li><li><p>
        Calling a stored procedure where a parameter contained special
        characters (such as <code class="literal">'@'</code>) would produce an
        exception. Note that <code class="literal">ANSI_QUOTES</code> had to be
        enabled to make this possible.
       (<a href="http://bugs.mysql.com/13753" target="_top">Bug#13753</a>)</p></li><li><p>
        The <code class="literal">Ping()</code> method did not update the
        <code class="literal">State</code> property of the
        <code class="literal">Connection</code> object.
       (<a href="http://bugs.mysql.com/13658" target="_top">Bug#13658</a>)</p></li><li><p>
        Implemented the
        <code class="literal">MySqlCommandBuilder.DeriveParameters</code> method
        that is used to discover the parameters for a stored procedure.
       (<a href="http://bugs.mysql.com/13632" target="_top">Bug#13632</a>)</p></li><li><p>
        A statement that contained multiple references to the same
        parameter could not be prepared.
       (<a href="http://bugs.mysql.com/13541" target="_top">Bug#13541</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-1-0-6"></a>C.3.30. Changes in  MySQL Connector/NET 1.0.6 (03 October 2005)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/NET 1.0.5 could not connect on Mono.
       (<a href="http://bugs.mysql.com/13345" target="_top">Bug#13345</a>)</p></li><li><p>
        Serializing a parameter failed if the first value passed in was
        <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/13276" target="_top">Bug#13276</a>)</p></li><li><p>
        Field names that contained the following characters caused
        errors: <code class="literal">()%&lt;&gt;/</code>
       (<a href="http://bugs.mysql.com/13036" target="_top">Bug#13036</a>)</p></li><li><p>
        The <code class="literal">nant</code> build sequence had problems.
       (<a href="http://bugs.mysql.com/12978" target="_top">Bug#12978</a>)</p></li><li><p>
        The Connector/NET 1.0.5 installer would not install alongside
        Connector/NET 1.0.4.
       (<a href="http://bugs.mysql.com/12835" target="_top">Bug#12835</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-1-0-5"></a>C.3.31. Changes in  MySQL Connector/NET 1.0.5 (29 August 2005)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/NET could not connect to MySQL 4.1.14.
       (<a href="http://bugs.mysql.com/12771" target="_top">Bug#12771</a>)</p></li><li><p>
        With multiple hosts in the connection string, Connector/NET
        would not connect to the last host in the list.
       (<a href="http://bugs.mysql.com/12628" target="_top">Bug#12628</a>)</p></li><li><p>
        The <code class="literal">ConnectionString</code> property could not be
        set when a <code class="literal">MySqlConnection</code> object was added
        with the designer.
       (<a href="http://bugs.mysql.com/12551" target="_top">Bug#12551</a>, <a href="http://bugs.mysql.com/8724" target="_top">Bug#8724</a>)</p></li><li><p>
        The <code class="literal">cp1250</code> character set was not supported.
       (<a href="http://bugs.mysql.com/11621" target="_top">Bug#11621</a>)</p></li><li><p>
        A call to a stored procedure caused an exception if the stored
        procedure had no parameters.
       (<a href="http://bugs.mysql.com/11542" target="_top">Bug#11542</a>)</p></li><li><p>
        Certain malformed queries would trigger a <code class="literal">Connection
        must be valid and open</code> error message.
       (<a href="http://bugs.mysql.com/11490" target="_top">Bug#11490</a>)</p></li><li><p>
        Trying to use a stored procedure when
        <code class="literal">Connection.Database</code> was not populated
        generated an exception.
       (<a href="http://bugs.mysql.com/11450" target="_top">Bug#11450</a>)</p></li><li><p>
        Connector/NET interpreted the new decimal data type as a byte
        array.
       (<a href="http://bugs.mysql.com/11294" target="_top">Bug#11294</a>)</p></li><li><p>
        Added support to call a stored function from Connector/NET.
       (<a href="http://bugs.mysql.com/10644" target="_top">Bug#10644</a>)</p></li><li><p>
        Connection could fail when .NET thread pool had no available
        worker threads.
       (<a href="http://bugs.mysql.com/10637" target="_top">Bug#10637</a>)</p></li><li><p>
        Calling <code class="literal">MySqlConnection.clone</code> when a
        connection string had not yet been set on the original
        connection would generate an error.
       (<a href="http://bugs.mysql.com/10281" target="_top">Bug#10281</a>)</p></li><li><p>
        Decimal parameters caused syntax errors.
       (<a href="http://bugs.mysql.com/10152" target="_top">Bug#10152</a>, <a href="http://bugs.mysql.com/11550" target="_top">Bug#11550</a>, <a href="http://bugs.mysql.com/10486" target="_top">Bug#10486</a>)</p></li><li><p>
        Parameters were not recognized when they were separated by
        linefeeds.
       (<a href="http://bugs.mysql.com/9722" target="_top">Bug#9722</a>)</p></li><li><p>
        The <code class="literal">MySqlCommandBuilder</code> class could not
        handle queries that referenced tables in a database other than
        the default database.
       (<a href="http://bugs.mysql.com/8382" target="_top">Bug#8382</a>)</p></li><li><p>
        Trying to read a <code class="literal">TIMESTAMP</code> column generated
        an exception.
       (<a href="http://bugs.mysql.com/7951" target="_top">Bug#7951</a>)</p></li><li><p>
        Connector/NET could not work properly with certain regional
        settings. (WL#8228)
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-1-0-4"></a>C.3.32. Changes in  MySQL Connector/NET 1.0.4 (20 January 2005)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">MySqlReader.GetInt32</code> throws exception if
        column is unsigned.
       (<a href="http://bugs.mysql.com/7755" target="_top">Bug#7755</a>)</p></li><li><p>
        Quote character \222 not quoted in
        <code class="literal">EscapeString</code>.
       (<a href="http://bugs.mysql.com/7724" target="_top">Bug#7724</a>)</p></li><li><p>
        GetBytes is working no more.
       (<a href="http://bugs.mysql.com/7704" target="_top">Bug#7704</a>)</p></li><li><p>
        <code class="literal">MySqlDataReader.GetString(index)</code> returns
        non-Null value when field is <code class="literal">Null</code>.
       (<a href="http://bugs.mysql.com/7612" target="_top">Bug#7612</a>)</p></li><li><p>
        Clone method bug in <code class="literal">MySqlCommand</code>.
       (<a href="http://bugs.mysql.com/7478" target="_top">Bug#7478</a>)</p></li><li><p>
        Problem with Multiple resultsets.
       (<a href="http://bugs.mysql.com/7436" target="_top">Bug#7436</a>)</p></li><li><p>
        <code class="literal">MySqlAdapter.Fill</code> method throws error message
        <code class="literal">Non-negative number required</code>.
       (<a href="http://bugs.mysql.com/7345" target="_top">Bug#7345</a>)</p></li><li><p>
        <code class="literal">MySqlCommand.Connection</code> returns an
        IDbConnection.
       (<a href="http://bugs.mysql.com/7258" target="_top">Bug#7258</a>)</p></li><li><p>
        Calling prepare causing exception.
       (<a href="http://bugs.mysql.com/7243" target="_top">Bug#7243</a>)</p></li><li><p>
        Fixed problem with shared memory connections.
      </p></li><li><p>
        Added or filled out several more topics in the API reference
        documentation.
      </p></li><li><p>
        Fixed another small problem with prepared statements.
      </p></li><li><p>
        Fixed problem that causes named pipes to not work with some blob
        functionality.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-1-0-3"></a>C.3.33. Changes in  MySQL Connector/NET 1.0.3 (12 October 2004)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Invalid query string when using inout parameters
       (<a href="http://bugs.mysql.com/7133" target="_top">Bug#7133</a>)</p></li><li><p>
        Inserting <code class="literal">DateTime</code> causes
        <code class="literal">System.InvalidCastException</code> to be thrown.
       (<a href="http://bugs.mysql.com/7132" target="_top">Bug#7132</a>)</p></li><li><p>
        <code class="literal">MySqlDateTime</code> in Datatables sorting by Text,
        not Date.
       (<a href="http://bugs.mysql.com/7032" target="_top">Bug#7032</a>)</p></li><li><p>
        Exception stack trace lost when re-throwing exceptions.
       (<a href="http://bugs.mysql.com/6983" target="_top">Bug#6983</a>)</p></li><li><p>
        Errors in parsing stored procedure parameters.
       (<a href="http://bugs.mysql.com/6902" target="_top">Bug#6902</a>)</p></li><li><p>
        InvalidCast when using <code class="literal">DATE_ADD</code>-function.
       (<a href="http://bugs.mysql.com/6879" target="_top">Bug#6879</a>)</p></li><li><p>
        Int64 Support in <code class="literal">MySqlCommand</code> Parameters.
       (<a href="http://bugs.mysql.com/6863" target="_top">Bug#6863</a>)</p></li><li><p>
        Test suite fails with MySQL 4.0 because of case sensitivity of
        table names.
       (<a href="http://bugs.mysql.com/6831" target="_top">Bug#6831</a>)</p></li><li><p>
        <code class="literal">MySqlDataReader.GetChar(int i)</code> throws
        <code class="literal">IndexOutOfRange</code> exception.
       (<a href="http://bugs.mysql.com/6770" target="_top">Bug#6770</a>)</p></li><li><p>
        Integer "out" parameter from stored procedure returned
        as string.
       (<a href="http://bugs.mysql.com/6668" target="_top">Bug#6668</a>)</p></li><li><p>
        An Open Connection has been Closed by the Host System.
       (<a href="http://bugs.mysql.com/6634" target="_top">Bug#6634</a>)</p></li><li><p>
        Fixed Invalid character set index: 200.
       (<a href="http://bugs.mysql.com/6547" target="_top">Bug#6547</a>)</p></li><li><p>
        Connections now do not have to give a database on the connection
        string.
      </p></li><li><p>
        Installer now includes options to install into GAC and create
        <span class="guimenu">Start Menu</span> items.
      </p></li><li><p>
        Fixed major problem with detecting null values when using
        prepared statements.
      </p></li><li><p>
        Fixed problem where multiple resultsets having different numbers
        of columns would cause a problem.
      </p></li><li><p>
        Added <code class="literal">ServerThread</code> property to
        <code class="literal">MySqlConnection</code> to expose server thread id.
      </p></li><li><p>
        Added Ping method to <code class="literal">MySqlConnection</code>.
      </p></li><li><p>
        Changed the name of the test suite to
        <code class="filename">MySql.Data.Tests.dll</code>.
      </p></li><li><p>
        Now <code class="literal">SHOW COLLATION</code> is used upon connection to
        retrieve the full list of charset ids.
      </p></li><li><p>
        Made MySQL the default named pipe name.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-1-0-2"></a>C.3.34. Changes in  MySQL Connector/NET 1.0.2 (15 November 2004)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed Objects not being disposed
       (<a href="http://bugs.mysql.com/6649" target="_top">Bug#6649</a>)</p></li><li><p>
        Fixed Charset-map for UCS-2
       (<a href="http://bugs.mysql.com/6541" target="_top">Bug#6541</a>)</p></li><li><p>
        Fixed Zero date "0000-00-00" is returned wrong when
        filling Dataset
       (<a href="http://bugs.mysql.com/6429" target="_top">Bug#6429</a>)</p></li><li><p>
        Fixed double type handling in MySqlParameter(string
        parameterName, object value)
       (<a href="http://bugs.mysql.com/6428" target="_top">Bug#6428</a>)</p></li><li><p>
        Fixed Installation directory ignored using custom installation
       (<a href="http://bugs.mysql.com/6329" target="_top">Bug#6329</a>)</p></li><li><p>
        Fixed #HY000 Illegal mix of collations
        (latin1_swedish_ci,IMPLICIT) and (utf8_general_
       (<a href="http://bugs.mysql.com/6322" target="_top">Bug#6322</a>)</p></li><li><p>
        Added the TableEditor CS and VB sample
      </p></li><li><p>
        Added charset connection string option
      </p></li><li><p>
        Fixed problem with MySqlBinary where string values could not be
        used to update extended text columns
      </p></li><li><p>
        Provider is now using character set specified by server as
        default
      </p></li><li><p>
        Updated the installer to include the new samples
      </p></li><li><p>
        Fixed problem where setting command text leaves the command in a
        prepared state
      </p></li><li><p>
        Fixed Long inserts take very long time (Bu #5453)
      </p></li><li><p>
        Fixed problem where calling stored procedures might cause an
        "Illegal mix of collations" problem.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-1-0-1"></a>C.3.35. Changes in  MySQL Connector/NET 1.0.1 (27 October 2004)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed IndexOutOfBounds when reading BLOB with DataReader with
        GetString(index)
       (<a href="http://bugs.mysql.com/6230" target="_top">Bug#6230</a>)</p></li><li><p>
        Fixed GetBoolean returns wrong values
       (<a href="http://bugs.mysql.com/6227" target="_top">Bug#6227</a>)</p></li><li><p>
        Fixed Method TokenizeSql() uses only a limited set of valid
        characters for parameters
       (<a href="http://bugs.mysql.com/6217" target="_top">Bug#6217</a>)</p></li><li><p>
        Fixed NET Connector source missing resx files
       (<a href="http://bugs.mysql.com/6216" target="_top">Bug#6216</a>)</p></li><li><p>
        Fixed System.OverflowException when using YEAR datatype
       (<a href="http://bugs.mysql.com/6036" target="_top">Bug#6036</a>)</p></li><li><p>
        Fixed MySqlDateTime sets IsZero property on all subseq.records
        after first zero found
       (<a href="http://bugs.mysql.com/6006" target="_top">Bug#6006</a>)</p></li><li><p>
        Fixed serializing of floating point parameters (double, numeric,
        single, decimal)
       (<a href="http://bugs.mysql.com/5900" target="_top">Bug#5900</a>)</p></li><li><p>
        Fixed missing Reference in DbType setter
       (<a href="http://bugs.mysql.com/5897" target="_top">Bug#5897</a>)</p></li><li><p>
        Fixed Parsing the ';' char
       (<a href="http://bugs.mysql.com/5876" target="_top">Bug#5876</a>)</p></li><li><p>
        Fixed DBNull Values causing problems with retrieving/updating
        queries.
       (<a href="http://bugs.mysql.com/5798" target="_top">Bug#5798</a>)</p></li><li><p>
        IsNullable error
       (<a href="http://bugs.mysql.com/5796" target="_top">Bug#5796</a>)</p></li><li><p>
        Fixed problem where MySqlParameterCollection.Add() would throw
        unclear exception when given a null value
       (<a href="http://bugs.mysql.com/5621" target="_top">Bug#5621</a>)</p></li><li><p>
        Fixed construtor initialize problems in MySqlCommand()
       (<a href="http://bugs.mysql.com/5613" target="_top">Bug#5613</a>)</p></li><li><p>
        Fixed Yet Another "object reference not set to an instance
        of an object"
       (<a href="http://bugs.mysql.com/5496" target="_top">Bug#5496</a>)</p></li><li><p>
        Fixed Can't display Chinese correctly
       (<a href="http://bugs.mysql.com/5288" target="_top">Bug#5288</a>)</p></li><li><p>
        Fixed MySqlDataReader and 'show tables from ...' behavior
       (<a href="http://bugs.mysql.com/5256" target="_top">Bug#5256</a>)</p></li><li><p>
        Fixed problem in PacketReader where it could try to allocate the
        wrong buffer size in EnsureCapacity
      </p></li><li><p>
        Fixed problem where using old syntax while using the interfaces
        caused problems
      </p></li><li><p>
        Fixed <a href="http://bugs.mysql.com/5458" target="_top">Bug#5458</a> Calling GetChars on a longtext column throws an
        exception
      </p></li><li><p>
        Added test case for resetting the command text on a prepared
        command
      </p></li><li><p>
        Fixed <a href="http://bugs.mysql.com/5388" target="_top">Bug#5388</a> DataReader reports all rows as NULL if one row
        is NULL
      </p></li><li><p>
        Fixed problem where connection lifetime on the connect string
        was not being respected
      </p></li><li><p>
        Fixed <a href="http://bugs.mysql.com/5602" target="_top">Bug#5602</a> Possible bug in MySqlParameter(string, object)
        constructor
      </p></li><li><p>
        Field buffers being reused to decrease memory allocations and
        increase speed
      </p></li><li><p>
        Fixed <a href="http://bugs.mysql.com/5392" target="_top">Bug#5392</a> MySqlCommand sees "?" as parameters in
        string literals
      </p></li><li><p>
        Added Aggregate function test (wasn't really a bug)
      </p></li><li><p>
        Using PacketWriter instead of Packet for writing to streams
      </p></li><li><p>
        Implemented SequentialAccess
      </p></li><li><p>
        Fixed problem with ConnectionInternal where a key might be added
        more than once
      </p></li><li><p>
        Fixed Russian character support as well
      </p></li><li><p>
        Fixed <a href="http://bugs.mysql.com/5474" target="_top">Bug#5474</a> cannot run a stored procedure populating
        mysqlcommand.parameters
      </p></li><li><p>
        Fixed problem where connector was not issuing a CMD_QUIT before
        closing the socket
      </p></li><li><p>
        Fixed problem where Min Pool Size was not being respected
      </p></li><li><p>
        Refactored compression code into CompressedStream to clean up
        NativeDriver
      </p></li><li><p>
        CP1252 is now used for Latin1 only when the server is 4.1.2 and
        later
      </p></li><li><p>
        Fixed <a href="http://bugs.mysql.com/5469" target="_top">Bug#5469</a> Setting DbType throws NullReferenceException
      </p></li><li><p>
        Virtualized driver subsystem so future releases could easily
        support client or embedded server support
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-1-0-0"></a>C.3.36. Changes in  MySQL Connector/NET 1.0.0 (01 September 2004)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Thai encoding not correctly supported.
       (<a href="http://bugs.mysql.com/3889" target="_top">Bug#3889</a>)</p></li><li><p>
        Bumped version number to 1.0.0 for beta 1 release.
      </p></li><li><p>
        Removed all of the XML comment warnings.
      </p></li><li><p>
        Added <code class="filename">COPYING.rtf</code> file for use in
        installer.
      </p></li><li><p>
        Updated many of the test cases.
      </p></li><li><p>
        Fixed problem with using compression.
      </p></li><li><p>
        Removed some last references to ByteFX.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-0-9-0"></a>C.3.37. Changes in MySQL Connector/NET Version 0.9.0 (30 August 2004)</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Added test fixture for prepared statements.
        </p></li><li><p>
          All type classes now implement a
          <code class="literal">SerializeBinary</code> method for sending their
          data to a <code class="literal">PacketWriter</code>.
        </p></li><li><p>
          Added <code class="literal">PacketWriter</code> class that will enable
          future low-memory large object handling.
        </p></li><li><p>
          Fixed many small bugs in running prepared statements and
          stored procedures.
        </p></li><li><p>
          Changed command so that an exception will not be thrown in
          executing a stored procedure with parameters in old syntax
          mode.
        </p></li><li><p>
          <code class="literal">SingleRow</code> behavior now working right even
          with limit.
        </p></li><li><p>
          <code class="literal">GetBytes</code> now only works on binary columns.
        </p></li><li><p>
          Logger now truncates long sql commands so blob columns don't
          blow out our log.
        </p></li><li><p>
          host and database now have a default value of "" unless
          otherwise set.
        </p></li><li><p>
          Connection Timeout seems to be ignored. (<a href="http://bugs.mysql.com/5214" target="_top">Bug#5214</a>)
        </p></li><li><p>
          Added test case for bug# 5051: GetSchema not working
          correctly.
        </p></li><li><p>
          Fixed problem where <code class="literal">GetSchema</code> would return
          false for <code class="literal">IsUnique</code> when the column is key.
        </p></li><li><p>
          <code class="literal">MySqlDataReader GetXXX</code> methods now using
          the field level <code class="literal">MySqlValue</code> object and not
          performing conversions.
        </p></li><li><p>
          <code class="literal">DataReader</code> returning
          <code class="literal">NULL</code> for time column. (<a href="http://bugs.mysql.com/5097" target="_top">Bug#5097</a>)
        </p></li><li><p>
          Added test case for <code class="literal">LOAD DATA LOCAL INFILE</code>.
        </p></li><li><p>
          Added replacetext custom nant task.
        </p></li><li><p>
          Added <code class="literal">CommandBuilderTest</code> fixture.
        </p></li><li><p>
          Added Last One Wins feature to
          <code class="literal">CommandBuilder</code>.
        </p></li><li><p>
          Fixed persist security info case problem.
        </p></li><li><p>
          Fixed <code class="literal">GetBool</code> so that 1, true, "true", and
          "yes" all count as true.
        </p></li><li><p>
          Make parameter mark configurable.
        </p></li><li><p>
          Added the "old syntax" connection string parameter to allow
          use of @ parameter marker.
        </p></li><li><p>
          <code class="literal">MySqlCommandBuilder</code>. (<a href="http://bugs.mysql.com/4658" target="_top">Bug#4658</a>)
        </p></li><li><p>
          <code class="literal">ByteFX.MySqlClient</code> caches passwords if
          <code class="literal">Persist Security Info</code> is false. (<a href="http://bugs.mysql.com/4864" target="_top">Bug#4864</a>)
        </p></li><li><p>
          Updated license banner in all source files to include FLOSS
          exception.
        </p></li><li><p>
          Added new .Types namespace and implementations for most
          current MySql types.
        </p></li><li><p>
          Added <code class="literal">MySqlField41</code> as a subclass of
          <code class="literal">MySqlField</code>.
        </p></li><li><p>
          Changed many classes to now use the new .Types types.
        </p></li><li><p>
          Changed type <code class="literal">enum int</code> to
          <code class="literal">Int32</code>, <code class="literal">short</code> to
          <code class="literal">Int16</code>, and <code class="literal">bigint</code> to
          <code class="literal">Int64</code>.
        </p></li><li><p>
          Added dummy types <code class="literal">UInt16</code>,
          <code class="literal">UInt32</code>, and <code class="literal">UInt64</code> to
          allow an unsigned parameter to be made.
        </p></li><li><p>
          Connections are now reset when they are pulled from the
          connection pool.
        </p></li><li><p>
          Refactored auth code in driver so it can be used for both auth
          and reset.
        </p></li><li><p>
          Added <code class="literal">UserReset</code> test in
          <code class="filename">PoolingTests.cs</code>.
        </p></li><li><p>
          Connections are now reset using
          <code class="literal">COM_CHANGE_USER</code> when pulled from the pool.
        </p></li><li><p>
          Implemented <code class="literal">SingleResultSet</code> behavior.
        </p></li><li><p>
          Implemented support of unicode.
        </p></li><li><p>
          Added char set mappings for utf-8 and ucs-2.
        </p></li><li><p>
          Time fields overflow using bytefx .net mysql driver (<a href="http://bugs.mysql.com/4520" target="_top">Bug#4520</a>)
        </p></li><li><p>
          Modified time test in data type test fixture to check for time
          spans where hours &gt; 24.
        </p></li><li><p>
          Wrong string with backslash escaping in
          <code class="literal">ByteFx.Data.MySqlClient.MySqlParameter</code>.
          (<a href="http://bugs.mysql.com/4505" target="_top">Bug#4505</a>)
        </p></li><li><p>
          Added code to Parameter test case TestQuoting to test for
          backslashes.
        </p></li><li><p>
          <code class="literal">MySqlCommandBuilder</code> fails with multi-word
          column names. (<a href="http://bugs.mysql.com/4486" target="_top">Bug#4486</a>)
        </p></li><li><p>
          Fixed bug in <code class="literal">TokenizeSql</code> where underscore
          would terminate character capture in parameter name.
        </p></li><li><p>
          Added test case for spaces in column names.
        </p></li><li><p>
          <code class="literal">MySqlDataReader.GetBytes</code> don't works
          correctly. (<a href="http://bugs.mysql.com/4324" target="_top">Bug#4324</a>)
        </p></li><li><p>
          Added <code class="literal">GetBytes()</code> test case to
          <code class="literal">DataReader</code> test fixture.
        </p></li><li><p>
          Now reading all server variables in
          <code class="literal">InternalConnection.Configure</code> into
          <code class="literal">Hashtable</code>.
        </p></li><li><p>
          Now using <code class="literal">string[]</code> for index map in
          <code class="literal">CharSetMap</code>.
        </p></li><li><p>
          Added CRInSQL test case for carriage returns in SQL.
        </p></li><li><p>
          Setting maxPacketSize to default value in
          <code class="literal">Driver.ctor</code>.
        </p></li><li><p>
          Setting <code class="literal">MySqlDbType</code> on a parameter doesn't
          set generic type. (<a href="http://bugs.mysql.com/4442" target="_top">Bug#4442</a>)
        </p></li><li><p>
          Removed obsolete data types <code class="literal">Long</code> and
          <code class="literal">LongLong</code>.
        </p></li><li><p>
          Overflow exception thrown when using "use pipe" on connection
          string. (<a href="http://bugs.mysql.com/4071" target="_top">Bug#4071</a>)
        </p></li><li><p>
          Changed "use pipe" keyword to "pipe name" or just "pipe".
        </p></li><li><p>
          Allow reading multiple resultsets from a single query.
        </p></li><li><p>
          Added flags attribute to <code class="literal">ServerStatusFlags</code>
          enum.
        </p></li><li><p>
          Changed name of <code class="literal">ServerStatus</code> enum to
          <code class="literal">ServerStatusFlags</code>.
        </p></li><li><p>
          Inserted data row doesn't update properly.
        </p></li><li><p>
          Error processing show create table. (<a href="http://bugs.mysql.com/4074" target="_top">Bug#4074</a>)
        </p></li><li><p>
          Change <code class="literal">Packet.ReadLenInteger</code> to
          <code class="literal">ReadPackedLong</code> and added
          <code class="literal">packet.ReadPackedInteger</code> that always reads
          integers packed with 2,3,4.
        </p></li><li><p>
          Added <code class="literal">syntax.cs</code> test fixture to test
          various SQL syntax bugs.
        </p></li><li><p>
          Improper handling of time values. Now time value of 00:00:00
          is not treated as null. (<a href="http://bugs.mysql.com/4149" target="_top">Bug#4149</a>)
        </p></li><li><p>
          Moved all test suite files into <code class="literal">TestSuite</code>
          folder.
        </p></li><li><p>
          Fixed bug where null column would move the result packet
          pointer backward.
        </p></li><li><p>
          Added new nant build script.
        </p></li><li><p>
          Clear tablename so it will be regen'ed properly during the
          next <code class="literal">GenerateSchema</code>. (<a href="http://bugs.mysql.com/3917" target="_top">Bug#3917</a>)
        </p></li><li><p>
          <code class="literal">GetValues</code> was always returning zero and was
          also always trying to copy all fields rather than respecting
          the size of the array passed in. (<a href="http://bugs.mysql.com/3915" target="_top">Bug#3915</a>)
        </p></li><li><p>
          Implemented shared memory access protocol.
        </p></li><li><p>
          Implemented prepared statements for MySQL 4.1.
        </p></li><li><p>
          Implemented stored procedures for MySQL 5.0.
        </p></li><li><p>
          Renamed <code class="literal">MySqlInternalConnection</code> to
          <code class="literal">InternalConnection</code>.
        </p></li><li><p>
          SQL is now parsed as chars, fixes problems with other
          languages.
        </p></li><li><p>
          Added logging and allow batch connection string options.
        </p></li><li><p>
          <code class="literal">RowUpdating</code> event not set when setting the
          <code class="literal">DataAdapter</code> property. (<a href="http://bugs.mysql.com/3888" target="_top">Bug#3888</a>)
        </p></li><li><p>
          Fixed bug in char set mapping.
        </p></li><li><p>
          Implemented 4.1 authentication.
        </p></li><li><p>
          Improved open/auth code in driver.
        </p></li><li><p>
          Improved how connection bits are set during connection.
        </p></li><li><p>
          Database name is now passed to server during initial
          handshake.
        </p></li><li><p>
          Changed namespace for client to
          <code class="literal">MySql.Data.MySqlClient</code>.
        </p></li><li><p>
          Changed assembly name of client to
          <code class="filename">MySql.Data.dll</code>.
        </p></li><li><p>
          Changed license text in all source files to GPL.
        </p></li><li><p>
          Added the <code class="filename">MySqlClient.build</code> Nant file.
        </p></li><li><p>
          Removed the mono batch files.
        </p></li><li><p>
          Moved some of the unused files into notused folder so nant
          build file can use wildcards.
        </p></li><li><p>
          Implemented shared memory access.
        </p></li><li><p>
          Major revamp in code structure.
        </p></li><li><p>
          Prepared statements now working for MySql 4.1.1 and later.
        </p></li><li><p>
          Finished implementing auth for 4.0, 4.1.0, and 4.1.1.
        </p></li><li><p>
          Changed namespace from
          <code class="literal">MySQL.Data.MySQLClient</code> back to
          <code class="literal">MySql.Data.MySqlClient</code>.
        </p></li><li><p>
          Fixed bug in <code class="literal">CharSetMapping</code> where it was
          trying to use text names as ints.
        </p></li><li><p>
          Changed namespace to
          <code class="literal">MySQL.Data.MySQLClient</code>.
        </p></li><li><p>
          Integrated auth changes from UC2004.
        </p></li><li><p>
          Fixed bug where calling any of the GetXXX methods on a
          datareader before or after reading data would not throw the
          appropriate exception (thanks Luca Morelli).
        </p></li><li><p>
          Added <code class="literal">TimeSpan</code> code in parameter.cs to
          properly serialize a timespan object to mysql time format
          (thanks Gianluca Colombo).
        </p></li><li><p>
          Added <code class="literal">TimeStamp</code> to parameter serialization
          code. Prevented <code class="literal">DataAdatper</code> updates from
          working right (thanks Michael King).
        </p></li><li><p>
          Fixed a misspelling in <code class="filename">MySqlHelper.cs</code>
          (thanks Patrick Kristiansen).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-76"></a>C.3.38. Changes in MySQL Connector/NET Version 0.76</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Driver now using charset number given in handshake to create
          encoding.
        </p></li><li><p>
          Changed command editor to point to
          <code class="literal">MySqlClient.Design</code>.
        </p></li><li><p>
          Fixed bug in <code class="literal">Version.isAtLeast</code>.
        </p></li><li><p>
          Changed <code class="literal">DBConnectionString</code> to support
          changes done to <code class="literal">MySqlConnectionString</code>.
        </p></li><li><p>
          Removed <code class="literal">SqlCommandEditor</code> and
          <code class="literal">DataAdapterPreviewDialog</code>.
        </p></li><li><p>
          Using new long return values in many places.
        </p></li><li><p>
          Integrated new <code class="literal">CompressedStream</code> class.
        </p></li><li><p>
          Changed <code class="literal">ConnectionString</code> and added
          attributes to allow it to be used in
          <code class="literal">MySqlClient.Design</code>.
        </p></li><li><p>
          Changed <code class="filename">packet.cs</code> to support newer
          lengths in <code class="literal">ReadLenInteger</code>.
        </p></li><li><p>
          Changed other classes to use new properties and fields of
          <code class="literal">MySqlConnectionString</code>.
        </p></li><li><p>
          <code class="literal">ConnectionInternal</code> is now using PING to see
          whether the server is alive.
        </p></li><li><p>
          Moved toolbox bitmaps into resource folder.
        </p></li><li><p>
          Changed <code class="filename">field.cs</code> to allow values to come
          directly from row buffer.
        </p></li><li><p>
          Changed to use the new driver.Send syntax.
        </p></li><li><p>
          Using a new packet queueing system.
        </p></li><li><p>
          Started work handling the "broken" compression packet
          handling.
        </p></li><li><p>
          Fixed bug in <code class="literal">StreamCreator</code> where failure to
          connect to a host would continue to loop infinitly (thanks
          Kevin Casella).
        </p></li><li><p>
          Improved connectstring handling.
        </p></li><li><p>
          Moved designers into Pro product.
        </p></li><li><p>
          Removed some old commented out code from
          <code class="filename">command.cs</code>.
        </p></li><li><p>
          Fixed a problem with compression.
        </p></li><li><p>
          Fixed connection object where an exception throw prior to the
          connection opening would not leave the connection in the
          connecting state (thanks Chris Cline).
        </p></li><li><p>
          Added GUID support.
        </p></li><li><p>
          Fixed sequence out of order bug (thanks Mark Reay).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-75"></a>C.3.39. Changes in MySQL Connector/NET Version 0.75</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Enum values now supported as parameter values (thanks Philipp
          Sumi).
        </p></li><li><p>
          Year datatype now supported.
        </p></li><li><p>
          Fixed compression.
        </p></li><li><p>
          Fixed bug where a parameter with a <code class="literal">TimeSpan</code>
          as the value would not serialize properly.
        </p></li><li><p>
          Fixed bug where default constructor would not set default
          connection string values.
        </p></li><li><p>
          Added some XML comments to some members.
        </p></li><li><p>
          Work to fix/improve compression handling.
        </p></li><li><p>
          Improved <code class="literal">ConnectionString</code> handling so that
          it better matches the standard set by
          <code class="literal">SqlClient</code>.
        </p></li><li><p>
          A <code class="literal">MySqlException</code> is now thrown if a
          username is not included in the connection string.
        </p></li><li><p>
          Localhost is now used as the default if not specified on the
          connection string.
        </p></li><li><p>
          An exception is now thrown if an attempt is made to set the
          connection string while the connection is open.
        </p></li><li><p>
          Small changes to <code class="literal">ConnectionString</code> docs.
        </p></li><li><p>
          Removed <code class="literal">MultiHostStream</code> and
          <code class="literal">MySqlStream</code>. Replaced it with
          <code class="filename">Common/StreamCreator</code>.
        </p></li><li><p>
          Added support for Use Pipe connection string value.
        </p></li><li><p>
          Added Platform class for easier access to platform utility
          functions.
        </p></li><li><p>
          Fixed small pooling bug where new connection was not getting
          created after <code class="literal">IsAlive</code> fails.
        </p></li><li><p>
          Added <code class="filename">Platform.cs</code> and
          <code class="filename">StreamCreator.cs</code>.
        </p></li><li><p>
          Fixed <code class="filename">Field.cs</code> to properly handle 4.1
          style timestamps.
        </p></li><li><p>
          Changed <code class="literal">Common.Version</code> to
          <code class="literal">Common.DBVersion</code> to avoid name conflict.
        </p></li><li><p>
          Fixed <code class="filename">field.cs</code> so that text columns
          return the right field type.
        </p></li><li><p>
          Added <code class="literal">MySqlError</code> class to provide some
          reference for error codes (thanks Geert Veenstra).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-0-74"></a>C.3.40. Changes in MySQL Connector/NET Version 0.74</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Added Unix socket support (thanks Mohammad DAMT).
        </p></li><li><p>
          Only calling <code class="literal">Thread.Sleep</code> when no data is
          available.
        </p></li><li><p>
          Improved escaping of quote characters in parameter data.
        </p></li><li><p>
          Removed misleading comments from
          <code class="filename">parameter.cs</code>.
        </p></li><li><p>
          Fixed pooling bug.
        </p></li><li><p>
          Fixed <code class="literal">ConnectionString</code> editor dialog
          (thanks marco p (pomarc)).
        </p></li><li><p>
          <code class="literal">UserId</code> now supported in connection strings
          (thanks Jeff Neeley).
        </p></li><li><p>
          Attempting to create a parameter that is not input throws an
          exception (thanks Ryan Gregg).
        </p></li><li><p>
          Added much documentation.
        </p></li><li><p>
          Checked in new <code class="literal">MultiHostStream</code> capability.
          Big thanks to Dan Guisinger for this. he originally submitted
          the code and idea of supporting multiple machines on the
          connect string.
        </p></li><li><p>
          Added a lot of documentation.
        </p></li><li><p>
          Fixed speed issue with 0.73.
        </p></li><li><p>
          Changed to Thread.Sleep(0) in MySqlDataStream to help optimize
          the case where it doesn't need to wait (thanks Todd German).
        </p></li><li><p>
          Prepopulating the idlepools to <code class="literal">MinPoolSize</code>.
        </p></li><li><p>
          Fixed <code class="literal">MySqlPool</code> deadlock condition as well
          as stupid bug where CreateNewPooledConnection was not ever
          adding new connections to the pool. Also fixed
          <code class="literal">MySqlStream.ReadBytes</code> and
          <code class="literal">ReadByte</code> to not use
          <code class="literal">TicksPerSecond</code> which does not appear to
          always be right. (thanks Matthew J. Peddlesden)
        </p></li><li><p>
          Fix for precision and scale (thanks Matthew J. Peddlesden).
        </p></li><li><p>
          Added <code class="literal">Thread.Sleep(1)</code> to stream reading
          methods to be more cpu friendly (thanks Sean McGinnis).
        </p></li><li><p>
          Fixed problem where <code class="literal">ExecuteReader</code> would
          sometime return null (thanks Lloyd Dupont).
        </p></li><li><p>
          Fixed major bug with null field handling (thanks Naucki).
        </p></li><li><p>
          Enclosed queries for <code class="literal">max_allowed_packet</code> and
          <code class="literal">characterset</code> inside try catch (and set
          defaults).
        </p></li><li><p>
          Fixed problem where socket was not getting closed properly
          (thanks Steve!).
        </p></li><li><p>
          Fixed problem where <code class="literal">ExecuteNonQuery</code> was not
          always returning the right value.
        </p></li><li><p>
          Fixed <code class="literal">InternalConnection</code> to not use
          <code class="literal">@@session.max_allowed_packet</code> but use
          <code class="literal">@@max_allowed_packet</code>. (Thanks Miguel)
        </p></li><li><p>
          Added many new XML doc lines.
        </p></li><li><p>
          Fixed sql parsing to not send empty queries (thanks Rory).
        </p></li><li><p>
          Fixed problem where the reader was not unpeeking the packet on
          close.
        </p></li><li><p>
          Fixed problem where user variables were not being handled
          (thanks Sami Vaaraniemi).
        </p></li><li><p>
          Fixed loop checking in the MySqlPool (thanks Steve M. Brown)
        </p></li><li><p>
          Fixed <code class="literal">ParameterCollection.Add</code> method to
          match <code class="literal">SqlClient</code> (thanks Joshua Mouch).
        </p></li><li><p>
          Fixed <code class="literal">ConnectionString</code> parsing to handle no
          and yes for boolean and not lowercase values (thanks Naucki).
        </p></li><li><p>
          Added <code class="literal">InternalConnection</code> class, changes to
          pooling.
        </p></li><li><p>
          Implemented Persist Security Info.
        </p></li><li><p>
          Added <code class="filename">security.cs</code> and
          <code class="filename">version.cs</code> to project
        </p></li><li><p>
          Fixed <code class="literal">DateTime</code> handling in
          <code class="filename">Parameter.cs</code> (thanks Burkhard
          Perkens-Golomb).
        </p></li><li><p>
          Fixed parameter serialization where some types would throw a
          cast exception.
        </p></li><li><p>
          Fixed <code class="literal">DataReader</code> to convert all returned
          values to prevent casting errors (thanks Keith Murray).
        </p></li><li><p>
          Added code to <code class="literal">Command.ExecuteReader</code> to
          return null if the initial SQL statement throws an exception
          (thanks Burkhard Perkens-Golomb).
        </p></li><li><p>
          Fixed <code class="literal">ExecuteScalar</code> bug introduced with
          restructure.
        </p></li><li><p>
          Restructure to allow for <code class="literal">LOCAL DATA INFILE</code>
          and better sequencing of packets.
        </p></li><li><p>
          Fixed several bugs related to restructure.
        </p></li><li><p>
          Early work done to support more secure passwords in Mysql 4.1.
          Old passwords in 4.1 not supported yet.
        </p></li><li><p>
          Parameters appearing after system parameters are now handled
          correctly (Adam M. (adammil)).
        </p></li><li><p>
          Strings can now be assigned directly to blob fields (Adam M.).
        </p></li><li><p>
          Fixed float parameters (thanks Pent).
        </p></li><li><p>
          Improved Parameter constructor and
          <code class="literal">ParameterCollection.Add</code> methods to better
          match SqlClient (thanks Joshua Mouch).
        </p></li><li><p>
          Corrected <code class="literal">Connection.CreateCommand</code> to
          return a <code class="literal">MySqlCommand</code> type.
        </p></li><li><p>
          Fixed connection string designer dialog box problem (thanks
          Abraham Guyt).
        </p></li><li><p>
          Fixed problem with sending commands not always reading the
          response packet (thanks Joshua Mouch).
        </p></li><li><p>
          Fixed parameter serialization where some blobs types were not
          being handled (thanks Sean McGinnis).
        </p></li><li><p>
          Removed spurious <code class="literal">MessageBox.show</code> from
          <code class="literal">DataReader</code> code (thanks Joshua Mouch).
        </p></li><li><p>
          Fixed a nasty bug in the split sql code (thanks everyone!).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-71"></a>C.3.41. Changes in MySQL Connector/NET Version 0.71</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed bug in <code class="literal">MySqlStream</code> where too much
          data could attempt to be read (thanks Peter Belbin)
        </p></li><li><p>
          Implemented <code class="literal">HasRows</code> (thanks Nash Pherson).
        </p></li><li><p>
          Fixed bug where tables with more than 252 columns cause an
          exception (thanks Joshua Kessler).
        </p></li><li><p>
          Fixed bug where SQL statements ending in ; would cause a
          problem (thanks Shane Krueger).
        </p></li><li><p>
          Fixed bug in driver where error messages were getting
          truncated by 1 character (thanks Shane Krueger).
        </p></li><li><p>
          Made <code class="literal">MySqlException</code> serializable (thanks
          Mathias Hasselmann).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-70"></a>C.3.42. Changes in MySQL Connector/NET Version 0.70</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Updated some of the character code pages to be more accurate.
        </p></li><li><p>
          Fixed problem where readers could be opened on connections
          that had readers open.
        </p></li><li><p>
          Moved test to separate assembly
          <code class="literal">MySqlClientTests</code>.
        </p></li><li><p>
          Fixed stupid problem in driver with sequence out of order
          (Thanks Peter Belbin).
        </p></li><li><p>
          Added some pipe tests.
        </p></li><li><p>
          Increased default max pool size to 50.
        </p></li><li><p>
          Compiles with Mono 0-24.
        </p></li><li><p>
          Fixed connection and data reader dispose problems.
        </p></li><li><p>
          Added <code class="literal">String</code> datatype handling to parameter
          serialization.
        </p></li><li><p>
          Fixed sequence problem in driver that occurred after thrown
          exception (thanks Burkhard Perkens-Golomb).
        </p></li><li><p>
          Added support for <code class="literal">CommandBehavior.SingleRow</code>
          to <code class="literal">DataReader</code>.
        </p></li><li><p>
          Fixed command sql processing so quotes are better handled
          (thanks Theo Spears).
        </p></li><li><p>
          Fixed parsing of double, single, and decimal values to account
          for non-English separators. You still have to use the right
          syntax if you using hard coded sql, but if you use parameters
          the code will convert floating point types to use '.'
          appropriately internal both into the server and out.
        </p></li><li><p>
          Added <code class="literal">MySqlStream</code> class to simplify
          timeouts and driver coding.
        </p></li><li><p>
          Fixed <code class="literal">DataReader</code> so that it is closed
          properly when the associated connection is closed. [thanks
          smishra]
        </p></li><li><p>
          Made client more SqlClient compliant so that DataReaders have
          to be closed before the connection can be used to run another
          command.
        </p></li><li><p>
          Improved <code class="literal">DBNull.Value</code> handling in the
          fields.
        </p></li><li><p>
          Added several unit tests.
        </p></li><li><p>
          Fixed <code class="literal">MySqlException</code> base class.
        </p></li><li><p>
          Improved driver coding
        </p></li><li><p>
          Fixed bug where NextResult was returning false on the last
          resultset.
        </p></li><li><p>
          Added more tests for MySQL.
        </p></li><li><p>
          Improved casting problems by equating unsigned 32bit values to
          Int64 and unsigned 16bit values to Int32, and so forth.
        </p></li><li><p>
          Added new constructor for <code class="literal">MySqlParameter</code>
          for (name, type, size, srccol)
        </p></li><li><p>
          Fixed bug in <code class="literal">MySqlDataReader</code> where it
          didn't check for null fieldlist before returning field count.
        </p></li><li><p>
          Started adding <code class="literal">MySqlClient</code> unit tests
          (added <code class="filename">MySqlClient/Tests</code> folder and some
          test cases).
        </p></li><li><p>
          Fixed some things in Connection String handling.
        </p></li><li><p>
          Moved <code class="literal">INIT_DB</code> to
          <code class="literal">MySqlPool</code>. I may move it again, this is in
          preparation of the conference.
        </p></li><li><p>
          Fixed bug inside <code class="literal">CommandBuilder</code> that
          prevented inserts from happening properly.
        </p></li><li><p>
          Reworked some of the internals so that all three execute
          methods of Command worked properly.
        </p></li><li><p>
          Fixed many small bugs found during benchmarking.
        </p></li><li><p>
          The first cut of <code class="literal">CoonectionPooling</code> is
          working. "min pool size" and "max pool size" are respected.
        </p></li><li><p>
          Work to enable multiple resultsets to be returned.
        </p></li><li><p>
          Character sets are handled much more intelligently now. The
          driver queries MySQL at startup for the default character set.
          That character set is then used for conversions if that code
          page can be loaded. If not, then the default code page for the
          current OS is used.
        </p></li><li><p>
          Added code to save the inferred type in the name,value
          constructor of <code class="literal">Parameter</code>.
        </p></li><li><p>
          Also, inferred type if value of null parameter is changed
          using <code class="literal">Value</code> property.
        </p></li><li><p>
          Converted all files to use proper Camel case. MySQL is now
          MySql in all files. PgSQL is now PgSql.
        </p></li><li><p>
          Added attribute to PgSql code to prevent designer from trying
          to show.
        </p></li><li><p>
          Added <code class="literal">MySQLDbType</code> property to Parameter
          object and added proper conversion code to convert from
          <code class="literal">DbType</code> to <code class="literal">MySQLDbType</code>).
        </p></li><li><p>
          Removed unused <code class="literal">ObjectToString</code> method from
          <code class="filename">MySQLParameter.cs</code>.
        </p></li><li><p>
          Fixed <code class="literal">Add(..)</code> method in
          <code class="literal">ParameterCollection</code> so that it doesn't use
          <code class="literal">Add(name, value)</code> instead.
        </p></li><li><p>
          Fixed <code class="literal">IndexOf</code> and
          <code class="literal">Contains</code> in
          <code class="literal">ParameterCollection</code> to be aware that
          parameter names are now stored without @.
        </p></li><li><p>
          Fixed <code class="literal">Command.ConvertSQLToBytes</code> so it only
          allows characters that can be in MySQL variable names.
        </p></li><li><p>
          Fixed <code class="literal">DataReader</code> and
          <code class="literal">Field</code> so that blob fields read their data
          from <code class="filename">Field.cs</code> and
          <code class="literal">GetBytes</code> works right.
        </p></li><li><p>
          Added simple query builder editor to
          <code class="literal">CommandText</code> property of
          <code class="literal">MySQLCommand</code>.
        </p></li><li><p>
          Fixed <code class="literal">CommandBuilder</code> and
          <code class="literal">Parameter</code> serialization to account for
          Parameters not storing @ in their names.
        </p></li><li><p>
          Removed <code class="literal">MySQLFieldType</code> enum from Field.cs.
          Now using <code class="literal">MySQLDbType</code> enum.
        </p></li><li><p>
          Added <code class="literal">Designer</code> attribute to several classes
          to prevent designer view when using VS.Net.
        </p></li><li><p>
          Fixed Initial catalog typo in
          <code class="literal">ConnectionString</code> designer.
        </p></li><li><p>
          Removed 3 parameter constructor for
          <code class="literal">MySQLParameter</code> that conflicted with (name,
          type, value).
        </p></li><li><p>
          Changed <code class="literal">MySQLParameter</code> so
          <code class="literal">paramName</code> is now stored without leading @
          (this fixed null inserts when using designer).
        </p></li><li><p>
          Changed <code class="literal">TypeConverter</code> for
          <code class="literal">MySQLParameter</code> to use the constructor with
          all properties.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-68"></a>C.3.43. Changes in MySQL Connector/NET Version 0.68</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed sequence issue in driver.
        </p></li><li><p>
          Added <code class="literal">DbParametersEditor</code> to make parameter
          editing more like <code class="literal">SqlClient</code>.
        </p></li><li><p>
          Fixed <code class="literal">Command</code> class so that parameters can
          be edited using the designer
        </p></li><li><p>
          Update connection string designer to support <code class="literal">Use
          Compression</code> flag.
        </p></li><li><p>
          Fixed string encoding so that European characters will work
          correctly.
        </p></li><li><p>
          Creating base classes to aid in building new data providers.
        </p></li><li><p>
          Added support for UID key in connection string.
        </p></li><li><p>
          Field, parameter, command now using DBNull.Value instead of
          null.
        </p></li><li><p>
          <code class="literal">CommandBuilder</code> using
          <code class="literal">DBNull.Value</code>.
        </p></li><li><p>
          <code class="literal">CommandBuilder</code> now builds insert command
          correctly when an auto_insert field is not present.
        </p></li><li><p>
          Field now uses typeof keyword to return
          <code class="literal">System.Types</code> (performance).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-65"></a>C.3.44. Changes in MySQL Connector/NET Version 0.65</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">MySQLCommandBuilder</code> now implemented.
        </p></li><li><p>
          Transaction support now implemented (not all table types
          support this).
        </p></li><li><p>
          <code class="literal">GetSchemaTable</code> fixed to not use xsd (for
          Mono).
        </p></li><li><p>
          Driver is now Mono-compatible.
        </p></li><li><p>
          TIME data type now supported.
        </p></li><li><p>
          More work to improve Timestamp data type handling.
        </p></li><li><p>
          Changed signatures of all classes to match corresponding
          <code class="literal">SqlClient</code> classes.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-60"></a>C.3.45. Changes in MySQL Connector/NET Version 0.60</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Protocol compression using SharpZipLib (www.icsharpcode.net).
        </p></li><li><p>
          Named pipes on Windows now working properly.
        </p></li><li><p>
          Work done to improve <code class="literal">Timestamp</code> data type
          handling.
        </p></li><li><p>
          Implemented <code class="literal">IEnumerable</code> on
          <code class="literal">DataReader</code> so <code class="literal">DataGrid</code>
          would work.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="connector-net-news-0-50"></a>C.3.46. Changes in MySQL Connector/NET Version 0.50</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Speed increased dramatically by removing bugging network sync
          code.
        </p></li><li><p>
          Driver no longer buffers rows of data (more ADO.Net
          compliant).
        </p></li><li><p>
          Conversion bugs related to <code class="literal">TIMESTAMP</code> and
          <code class="literal">DATETIME</code> fields fixed.
        </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="vstudio-plugin-news"></a>C.4. MySQL Visual Studio Plugin Change History</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-3">C.4.1. Changes in  MySQL Visual Studio Plugin 1.0.3 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-2">C.4.2. Changes in  MySQL Visual Studio Plugin 1.0.2 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-1">C.4.3. Changes in  MySQL Visual Studio Plugin 1.0.1 (4 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#vstudio-plugin-news-1-0-0">C.4.4. Changes in  MySQL Visual Studio Plugin 1.0.0 (4 October 2006)</a></span></dt></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
      As of Connector/NET 5.1.2 (14 June 2007), the Visual Studion
      Plugin is part of the main Connector/NET package. For the change
      history for the Visual Studio Plugin, see
      <a href="news.html#connector-net-news" title="C.3. MySQL Connector/NET Change History">Section C.3, “MySQL Connector/NET Change History”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="vstudio-plugin-news-1-0-3"></a>C.4.1. Changes in  MySQL Visual Studio Plugin 1.0.3 (Not yet released)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Running queries based on a stored procedure would cause the data
        set designer to terminate. (Bugs #26364)
      </p></li><li><p>
        DataSet wizard would show all tables instead of only the tables
        available within the selected database. (Bugs #26348)
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="vstudio-plugin-news-1-0-2"></a>C.4.2. Changes in  MySQL Visual Studio Plugin 1.0.2 (Not yet released)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The Add Connection dialog of the Server Explorer would freeze
        when accessing databases with capitalized characters in their
        name.
       (<a href="http://bugs.mysql.com/24875" target="_top">Bug#24875</a>)</p></li><li><p>
        Creating a connection through the Server Explorer when using the
        Visual Studio Plugin would fail. The installer for the Visual
        Studio Plugin has been updated to ensure that Connector/NET
        5.0.2 must be installed.
       (<a href="http://bugs.mysql.com/23071" target="_top">Bug#23071</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="vstudio-plugin-news-1-0-1"></a>C.4.3. Changes in  MySQL Visual Studio Plugin 1.0.1 (4 October 2006)</h3></div></div></div><p>
        This is a bug fix release to resolve an incompatibility issue
        with Connector/NET 5.0.1.
      </p><p>
        It is critical that this release only be used with Connector/NET
        5.0.1. After installing Connector/NET 5.0.1, you will need to
        make a small change in your machine.config file. This file
        should be located at
        <code class="filename">%win%\Microsoft.Net\Framework\v2.0.50727\CONFIG\machine.config</code>
        (<code class="literal">%win%</code> should be the location of your Windows
        folder). Near the bottom of the file you will see a line like
        this:
      </p><pre class="programlisting">&lt;add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient"
description=".Net Framework Data Provider for MySQL"
type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data"/&gt;</pre><p>
        It needs to be changed to be like this:
      </p><pre class="programlisting">&lt;add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient"
description=".Net Framework Data Provider for MySQL"
type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data,
Version=5.0.1.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d"/&gt;
 </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="vstudio-plugin-news-1-0-0"></a>C.4.4. Changes in  MySQL Visual Studio Plugin 1.0.0 (4 October 2006)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Ability to work with MySQL objects (tables, views, stored
        procedures, etc) from within Server Explorer.
      </p></li><li><p>
        DDEX (Data Designer Extensibility) compatibility.
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="cj-news"></a>C.5. MySQL Connector/J Change History</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#cj-news-5-1">C.5.1. Changes in MySQL Connector/J 5.1.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0">C.5.2. Changes in MySQL Connector/J 5.0.x</a></span></dt><dt><span class="section"><a href="news.html#cg-news-3-1">C.5.3. Changes in MySQL Connector/J 3.1.x</a></span></dt><dt><span class="section"><a href="news.html#cg-news-3-0">C.5.4. Changes in MySQL Connector/J 3.0.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0">C.5.5. Changes in MySQL Connector/J 2.0.x</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-2b">C.5.6. Changes in MySQL Connector/J 1.2b (04 July 1999)</a></span></dt><dt><span class="section"><a href="news.html#cg-news-1-0">C.5.7. Changes in MySQL Connector/J 1.2.x and lower</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-news-5-1"></a>C.5.1. Changes in MySQL Connector/J 5.1.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#cj-news-5-1-7">C.5.1.1. Changes in  MySQL Connector/J 5.1.7 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-6">C.5.1.2. Changes in  MySQL Connector/J 5.1.6 (07 March 2008)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-5">C.5.1.3. Changes in  MySQL Connector/J 5.1.5 (09 October 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-4">C.5.1.4. Changes in  MySQL Connector/J 5.1.4 (Not Released)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-3">C.5.1.5. Changes in  MySQL Connector/J 5.1.3 (10 September 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-2">C.5.1.6. Changes in  MySQL Connector/J 5.1.2 (29 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-1">C.5.1.7. Changes in  MySQL Connector/J 5.1.1 (22 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-1-0">C.5.1.8. Changes in  MySQL Connector/J 5.1.0 (11 April 2007)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-7"></a>C.5.1.1. Changes in  MySQL Connector/J 5.1.7 (Not yet released)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Incorrect result is returned from
        <code class="literal">isAfterLast()</code> in streaming
        <code class="literal">ResultSet</code> when using
        <code class="literal">setFetchSize(Integer.MIN_VALUE)</code>.
       (<a href="http://bugs.mysql.com/35170" target="_top">Bug#35170</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-6"></a>C.5.1.2. Changes in  MySQL Connector/J 5.1.6 (07 March 2008)</h4></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Multiple result sets were not supported when using streaming
        mode to return data. Both normal statements and the resul sets
        from stored procedures now return multiple results sets, with
        the exception of result sets using registered
        <code class="literal">OUTPUT</code> paramaters.
       (<a href="http://bugs.mysql.com/33678" target="_top">Bug#33678</a>)</p></li><li><p>
        XAConnections and datasources have been updated to the JDBC-4.0
        standard.
      </p></li><li><p>
        The profiler event handling has been made extensible via the
        <code class="option">profilerEventHandler</code> connection property.
      </p></li><li><p>
        Add the <code class="literal">verifyServerCertificate</code> propery. If
        set to "false" the driver will not verify the server's
        certificate when <code class="literal">useSSL</code> is set to "true"
      </p><p>
        When using this feature, the keystore parameters should be
        specified by the <code class="literal">clientCertificateKeyStore*</code>
        properties, rather than system properties, as the JSSE doesn't
        it straightforward to have a non-verifying trust store and the
        "default" key store.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="methodname">DatabaseMetaData.getColumns()</code> returns
        incorrect <code class="literal">COLUMN_SIZE</code> value for
        <code class="literal">SET</code> column.
       (<a href="http://bugs.mysql.com/36830" target="_top">Bug#36830</a>)</p></li><li><p>
        When trying to read <code class="classname">Time</code> values like
        “<span class="quote">00:00:00</span>” with
        <code class="methodname">ResultSet.getTime(int)</code> an exception is
        thrown.
       (<a href="http://bugs.mysql.com/36051" target="_top">Bug#36051</a>)</p></li><li><p>
        JDBC connection URL parameters is ignored when using
        <code class="literal">MysqlConnectionPoolDataSource</code>.
       (<a href="http://bugs.mysql.com/35810" target="_top">Bug#35810</a>)</p></li><li><p>
        When <code class="literal">useServerPrepStmts=true</code> and slow query
        logging is enabled, the connector throws a
        <code class="classname">NullPointerException</code> when it encounters a
        slow query.
       (<a href="http://bugs.mysql.com/35666" target="_top">Bug#35666</a>)</p></li><li><p>
        When using the keyword “<span class="quote">loadbalance</span>” in the
        connection string and trying to perform load balancing between
        two databases, the driver appears to hang.
       (<a href="http://bugs.mysql.com/35660" target="_top">Bug#35660</a>)</p></li><li><p>
        JDBC data type getter method was changed to accept only column
        name, whereas previously it accepted column label.
       (<a href="http://bugs.mysql.com/35610" target="_top">Bug#35610</a>)</p></li><li><p>
        Prepared statements from pooled connections caused a
        <code class="classname">NullPointerException</code> when
        <code class="methodname">closed()</code> under JDBC-4.0.
       (<a href="http://bugs.mysql.com/35489" target="_top">Bug#35489</a>)</p></li><li><p>
        In calling a stored function returning a
        <code class="literal">bigint</code>, an exception is encountered
        beginning:
</p><pre class="programlisting">java.sql.SQLException: java.lang.NumberFormatException: For input string:</pre><p>
        followed by the text of the stored function starting after the
        argument list.
       (<a href="http://bugs.mysql.com/35199" target="_top">Bug#35199</a>)</p></li><li><p>
        The JDBC driver uses a different method for evaluating column
        names in
        <code class="methodname">resultsetmetadata.getColumnName()</code> and
        when looking for a column in
        <code class="methodname">resultset.getObject(columnName)</code>. This
        causes Hibernate to fail in queries where the two methods yield
        different results, for example in queries that use alias names:
      </p><pre class="programlisting">SELECT column AS aliasName from table</pre><p>(<a href="http://bugs.mysql.com/35150" target="_top">Bug#35150</a>)</p></li><li><p>
        <code class="literal">MysqlConnectionPoolDataSource</code> does not
        support <code class="literal">ReplicationConnection</code>. Notice that we
        implemented <code class="literal">com.mysql.jdbc.Connection</code> for
        <code class="literal">ReplicationConnection</code>, however, only
        accessors from ConnectionProperties are implemented (not the
        mutators), and they return values from the currently active
        connection. All other methods from
        <code class="literal">com.mysql.jdbc.Connection</code> are implemented,
        and operate on the currently active connection, with the
        exception of <code class="literal">resetServerState()</code> and
        <code class="literal">changeUser()</code>.
       (<a href="http://bugs.mysql.com/34937" target="_top">Bug#34937</a>)</p></li><li><p>
        <code class="literal">ResultSet.getTimestamp()</code> returns incorrect
        values for month/day of <code class="literal">TIMESTAMP</code>s when using
        server-side prepared statements (not enabled by default).
       (<a href="http://bugs.mysql.com/34913" target="_top">Bug#34913</a>)</p></li><li><p>
        <code class="classname">RowDataStatic</code> does't always set the
        metadata in <code class="classname">ResultSetRow</code>, which can lead
        to failures when unpacking <code class="literal">DATE</code>,
        <code class="literal">TIME</code>, <code class="literal">DATETIME</code> and
        <code class="literal">TIMESTAMP</code> types when using absolute,
        relative, and previous result set navigation methods.
       (<a href="http://bugs.mysql.com/34762" target="_top">Bug#34762</a>)</p></li><li><p>
        When calling <code class="literal">isValid()</code> on an active
        connection, if the timeout is non-zero then the
        <code class="literal">Connection</code> is invalidated even if the
        <code class="literal">Connection</code> is valid.
       (<a href="http://bugs.mysql.com/34703" target="_top">Bug#34703</a>)</p></li><li><p>
        It was not possible to truncate a <code class="literal">BLOB</code> using
        <code class="literal">Blog.truncate()</code> when using 0 as an argument.
       (<a href="http://bugs.mysql.com/34677" target="_top">Bug#34677</a>)</p></li><li><p>
        When using a cursor fetch for a statement, the internal prepared
        statement could cause a memory leak until the connection was
        closed. The internal prepared statement is now deleted when the
        corresponding result set is closed.
       (<a href="http://bugs.mysql.com/34518" target="_top">Bug#34518</a>)</p></li><li><p>
        When retrieving the column type name of a geometry field, the
        driver would return <code class="literal">UNKNOWN</code> instead of
        <code class="literal">GEOMETRY</code>.
       (<a href="http://bugs.mysql.com/34194" target="_top">Bug#34194</a>)</p></li><li><p>
        Statements with batched values do not return correct values for
        <code class="literal">getGeneratedKeys()</code> when
        <code class="option">rewriteBatchedStatements</code> is set to
        <code class="literal">true</code>, and the statement has an <code class="literal">ON
        DUPLICATE KEY UPDATE</code> clause.
       (<a href="http://bugs.mysql.com/34093" target="_top">Bug#34093</a>)</p></li><li><p>
        The internal class
        <code class="classname">ResultSetInternalMethods</code> referenced the
        non-public class
        <code class="classname">com.mysql.jdbc.CachedResultSetMetaData</code>.
       (<a href="http://bugs.mysql.com/33823" target="_top">Bug#33823</a>)</p></li><li><p>
        A <code class="literal">NullPointerException</code> could be raised when
        using client-side prepared statements and enabled the prepared
        statement cache using the <code class="option">cachePrepStmts</code>.
       (<a href="http://bugs.mysql.com/33734" target="_top">Bug#33734</a>)</p></li><li><p>
        Using server side cursors and cursor fetch, the table metadata
        information would return the data type name instead of the
        column name.
       (<a href="http://bugs.mysql.com/33594" target="_top">Bug#33594</a>)</p></li><li><p>
        <code class="methodname">ResultSet.getTimestamp()</code> would throw a
        <code class="literal">NullPointerException</code> instead of a
        <code class="literal">SQLException</code> when called on an empty
        <code class="literal">ResultSet</code>.
       (<a href="http://bugs.mysql.com/33162" target="_top">Bug#33162</a>)</p></li><li><p>
        Load balancing connection using best response time would
        incorrectly "stick" to hosts that were down when the connection
        was first created.
      </p><p>
        We solve this problem with a black list that is used during the
        picking of new hosts. If the black list ends up including all
        configured hosts, the driver will retry for a configurable
        number of times (the <code class="option">retriesAllDown</code>
        configuration property, with a default of 120 times), sleeping
        250ms between attempts to pick a new connection.
      </p><p>
        We've also went ahead and made the balancing strategy
        extensible. To create a new strategy, implement the interface
        <code class="classname">com.mysql.jdbc.BalanceStrategy</code> (which
        also includes our standard "extension" interface), and tell the
        driver to use it by passing in the class name via the
        <code class="option">loadBalanceStrategy</code> configuration property.
       (<a href="http://bugs.mysql.com/32877" target="_top">Bug#32877</a>)</p></li><li><p>
        During a Daylight Savings Time (DST) switchover, there was no
        way to store two timestamp/datetime values , as the hours end up
        being the same when sent as the literal that MySQL requires.
      </p><p>
        Note that to get this scenario to work with MySQL (since it
        doesn't support per-value timezones), you need to configure your
        server (or session) to be in UTC, and tell the driver not to use
        the legacy date/time code by setting
        <code class="literal">useLegacyDatetimeCode</code> to "false". This will
        cause the driver to always convert to/from the server and client
        timezone consistently.
      </p><p>
        This bug fix also fixes <a href="http://bugs.mysql.com/15604" target="_top">Bug#15604</a>, by adding entirely new
        date/time handling code that can be switched on by
        <code class="option">useLegacyDatetimeCode</code> being set to "false" as a
        JDBC configuration property. For Connector/J 5.1.x, the default
        is "true", in trunk and beyond it will be "false" (i.e. the old
        date/time handling code will be deprecated)
       (<a href="http://bugs.mysql.com/32577" target="_top">Bug#32577</a>, <a href="http://bugs.mysql.com/15604" target="_top">Bug#15604</a>)</p></li><li><p>
        When unpacking rows directly, we don't hand off error message
        packets to the internal method which decodes them correctly, so
        no exception is raised, and the driver than hangs trying to read
        rows that aren't there. This tends to happen when calling stored
        procedures, as normal SELECTs won't have an error in this spot
        in the protocol unless an I/O error occurs.
       (<a href="http://bugs.mysql.com/32246" target="_top">Bug#32246</a>)</p></li><li><p>
        When using a connection from
        <code class="classname">ConnectionPoolDataSource</code>, some
        <code class="literal">Connection.prepareStatement()</code> methods would
        return null instead of the prepared statement.
       (<a href="http://bugs.mysql.com/32101" target="_top">Bug#32101</a>)</p></li><li><p>
        Using <code class="literal">CallableStatement.setNull()</code> on a
        stored function would throw an
        <code class="literal">ArrayIndexOutOfBounds</code> exception when setting
        the last parameter to null.
       (<a href="http://bugs.mysql.com/31823" target="_top">Bug#31823</a>)</p></li><li><p>
        <code class="classname">MysqlValidConnectionChecker</code> doesn't
        properly handle connections created using
        <code class="classname">ReplicationConnection</code>.
       (<a href="http://bugs.mysql.com/31790" target="_top">Bug#31790</a>)</p></li><li><p>
        Retrieving the server version information for an active
        connection could return invalid information if the default
        character encoding on the host was not ASCII compatible.
       (<a href="http://bugs.mysql.com/31192" target="_top">Bug#31192</a>)</p></li><li><p>
        Further fixes have been made to this bug in the event that a
        node is non-responsive. Connector/J will now try a different
        random node instead of waiting for the node to recover before
        continuing.
       (<a href="http://bugs.mysql.com/31053" target="_top">Bug#31053</a>)</p></li><li><p>
        <code class="literal">ResultSet</code> returned by
        <code class="literal">Statement.getGeneratedKeys()</code> is not closed
        automatically when statement that created it is closed.
       (<a href="http://bugs.mysql.com/30508" target="_top">Bug#30508</a>)</p></li><li><p>
        <code class="literal">DatabaseMetadata.getColumns()</code> doesn't
        return the correct column names if the connection character
        isn't UTF-8. A bug in MySQL server compounded the issue, but was
        fixed within the MySQL 5.0 release cycle. The fix includes
        changes to all the sections of the code that access the server
        metadata.
       (<a href="http://bugs.mysql.com/20491" target="_top">Bug#20491</a>)</p></li><li><p>
        Fixed <code class="methodname">ResultSetMetadata.getColumnName()</code>
        for result sets returned from
        <code class="methodname">Statement.getGeneratedKeys()</code> - it was
        returning null instead of "GENERATED_KEY" as in 5.0.x.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-5"></a>C.5.1.3. Changes in  MySQL Connector/J 5.1.5 (09 October 2007)</h4></div></div></div><p>The following     features are new, compared to the 5.0 series of Connector/J</p><div class="itemizedlist"><ul type="disc"><li><p>
        Support for JDBC-4.0 <code class="literal">NCHAR</code>,
        <code class="literal">NVARCHAR</code> and <code class="literal">NCLOB</code> types.
      </p></li><li><p>
        JDBC-4.0 support for setting per-connection client information
        (which can be viewed in the comments section of a query via
        <code class="literal">SHOW PROCESSLIST</code> on a MySQL server, or can be
        extended to support custom persistence of the information via a
        public interface).
      </p></li><li><p>
        Support for JDBC-4.0 XML processing via JAXP interfaces to DOM,
        SAX and StAX.
      </p></li><li><p>
        JDBC-4.0 standardized unwrapping to interfaces that include
        vendor extensions.
      </p></li></ul></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Added <code class="literal">autoSlowLog</code> configuration property,
        overrides <code class="literal">slowQueryThreshold*</code> properties,
        driver determines slow queries by those that are slower than 5 *
        stddev of the mean query time (outside the 96% percentile).
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        When a connection is in read-only mode, queries that are wrapped
        in parentheses were incorrectly identified DML statements.
       (<a href="http://bugs.mysql.com/28256" target="_top">Bug#28256</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-4"></a>C.5.1.4. Changes in  MySQL Connector/J 5.1.4 (Not Released)</h4></div></div></div><p>
        Only released internally.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-3"></a>C.5.1.5. Changes in  MySQL Connector/J 5.1.3 (10 September 2007)</h4></div></div></div><p>The following     features are new, compared to the 5.0 series of Connector/J</p><div class="itemizedlist"><ul type="disc"><li><p>
        Support for JDBC-4.0 <code class="literal">NCHAR</code>,
        <code class="literal">NVARCHAR</code> and <code class="literal">NCLOB</code> types.
      </p></li><li><p>
        JDBC-4.0 support for setting per-connection client information
        (which can be viewed in the comments section of a query via
        <code class="literal">SHOW PROCESSLIST</code> on a MySQL server, or can be
        extended to support custom persistence of the information via a
        public interface).
      </p></li><li><p>
        Support for JDBC-4.0 XML processing via JAXP interfaces to DOM,
        SAX and StAX.
      </p></li><li><p>
        JDBC-4.0 standardized unwrapping to interfaces that include
        vendor extensions.
      </p></li></ul></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Connector/J now connects using an initial character set of
        <code class="literal">utf-8</code> solely for the purpose of
        authentication to allow user names or database names in any
        character set to be used in the JDBC connection URL.
       (<a href="http://bugs.mysql.com/29853" target="_top">Bug#29853</a>)</p></li><li><p>
        Added two configuration parameters:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">blobsAreStrings</code> — Should the driver
            always treat BLOBs as Strings. Added specifically to work
            around dubious metadata returned by the server for
            <code class="literal">GROUP BY</code> clauses. Defaults to false.
          </p></li><li><p>
            <code class="literal">functionsNeverReturnBlobs</code> — Should
            the driver always treat data from functions returning
            <code class="literal">BLOBs</code> as Strings. Added specifically to
            work around dubious metadata returned by the server for
            <code class="literal">GROUP BY</code> clauses. Defaults to false.
          </p></li></ul></div></li><li><p>
        Setting <code class="option">rewriteBatchedStatements</code> to
        <code class="literal">true</code> now causes CallableStatements with
        batched arguments to be re-written in the form "CALL (...); CALL
        (...); ..." to send the batch in as few client-server round
        trips as possible.
      </p></li><li><p>
        The driver now picks appropriate internal row representation
        (whole row in one buffer, or individual byte[]s for each column
        value) depending on heuristics, including whether or not the row
        has <code class="literal">BLOB</code> or <code class="literal">TEXT</code> types and
        the overall row-size. The threshold for row size that will cause
        the driver to use a buffer rather than individual byte[]s is
        configured by the configuration property
        <code class="option">largeRowSizeThreshold</code>, which has a default
        value of 2KB.
      </p></li><li><p>
        The data (and how it's stored) for <code class="literal">ResultSet</code>
        rows are now behind an interface which allows us (in some cases)
        to allocate less memory per row, in that for "streaming" result
        sets, we re-use the packet used to read rows, since only one row
        at a time is ever active.
      </p></li><li><p>
        Added experimental support for statement "interceptors" via the
        <code class="literal">com.mysql.jdbc.StatementInterceptor</code>
        interface, examples are in
        <code class="filename">com/mysql/jdbc/interceptors</code>. Implement this
        interface to be placed "in between" query execution, so that it
        can be influenced (currently experimental).
      </p></li><li><p>
        The driver will automatically adjust the server session variable
        <code class="literal">net_write_timeout</code> when it determines its been
        asked for a "streaming" result, and resets it to the previous
        value when the result set has been consumed. (The configuration
        property is named
        <code class="option">netTimeoutForStreamingResults</code>, with a unit of
        seconds, the value '0' means the driver will not try and adjust
        this value).
      </p></li><li><p>
        JDBC-4.0 ease-of-development features including
        auto-registration with the <code class="literal">DriverManager</code> via
        the service provider mechanism, standardized Connection validity
        checks and categorized <code class="literal">SQLExceptions</code> based on
        recoverability/retry-ability and class of the underlying error.
      </p></li><li><p>
        <code class="literal">Statement.setQueryTimeout()</code>s now affect the
        entire batch for batched statements, rather than the individual
        statements that make up the batch.
      </p></li><li><p>
        Errors encountered during
        <code class="literal">Statement</code>/<code class="literal">PreparedStatement</code>/<code class="literal">CallableStatement.executeBatch()</code>
        when <code class="literal">rewriteBatchStatements</code> has been set to
        <code class="literal">true</code> now return
        <code class="literal">BatchUpdateExceptions</code> according to the
        setting of <code class="literal">continueBatchOnError</code>.
      </p><p>
        If <code class="literal">continueBatchOnError</code> is set to
        <code class="literal">true</code>, the update counts for the "chunk" that
        were sent as one unit will all be set to
        <code class="literal">EXECUTE_FAILED</code>, but the driver will attempt
        to process the remainder of the batch. You can determine which
        "chunk" failed by looking at the update counts returned in the
        <code class="literal">BatchUpdateException</code>.
      </p><p>
        If <code class="literal">continueBatchOnError</code> is set to "false",
        the update counts returned will contain all updates up-to and
        including the failed "chunk", with all counts for the failed
        "chunk" set to <code class="literal">EXECUTE_FAILED</code>.
      </p><p>
        Since MySQL doesn't return multiple error codes for
        multiple-statements, or for multi-value
        <code class="literal">INSERT</code>/<code class="literal">REPLACE</code>, it is the
        application's responsibility to handle determining which item(s)
        in the "chunk" actually failed.
      </p></li><li><p>
        New methods on com.mysql.jdbc.Statement:
        <code class="literal">setLocalInfileInputStream()</code> and
        <code class="literal">getLocalInfileInputStream()</code>:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">setLocalInfileInputStream()</code> sets an
            <code class="literal">InputStream</code> instance that will be used to
            send data to the MySQL server for a <code class="literal">LOAD DATA LOCAL
            INFILE</code> statement rather than a
            <code class="literal">FileInputStream</code> or
            <code class="literal">URLInputStream</code> that represents the path
            given as an argument to the statement.
          </p><p>
            This stream will be read to completion upon execution of a
            <code class="literal">LOAD DATA LOCAL INFILE</code> statement, and
            will automatically be closed by the driver, so it needs to
            be reset before each call to <code class="literal">execute*()</code>
            that would cause the MySQL server to request data to fulfill
            the request for <code class="literal">LOAD DATA LOCAL INFILE</code>.
          </p><p>
            If this value is set to <code class="literal">NULL</code>, the driver
            will revert to using a <code class="literal">FileInputStream</code> or
            <code class="literal">URLInputStream</code> as required.
          </p></li><li><p>
            <code class="literal">getLocalInfileInputStream()</code> returns the
            <code class="literal">InputStream</code> instance that will be used to
            send data in response to a <code class="literal">LOAD DATA LOCAL
            INFILE</code> statement.
          </p><p>
            This method returns <code class="literal">NULL</code> if no such
            stream has been set via
            <code class="literal">setLocalInfileInputStream()</code>.
          </p></li></ul></div></li><li><p>
        Setting <code class="option">useBlobToStoreUTF8OutsideBMP</code> to
        <code class="literal">true</code> tells the driver to treat
        <code class="literal">[MEDIUM/LONG]BLOB</code> columns as
        <code class="literal">[LONG]VARCHAR</code> columns holding text encoded in
        UTF-8 that has characters outside the BMP (4-byte encodings),
        which MySQL server can't handle natively.
      </p><p>
        Set <code class="option">utf8OutsideBmpExcludedColumnNamePattern</code> to
        a regex so that column names matching the given regex will still
        be treated as <code class="literal">BLOBs</code> The regex must follow the
        patterns used for the <code class="literal">java.util.regex</code>package.
        The default is to exclude no columns, and include all columns.
      </p><p>
        Set <code class="option">utf8OutsideBmpIncludedColumnNamePattern</code> to
        specify exclusion rules to
        utf8OutsideBmpExcludedColumnNamePattern". The regex must follow
        the patterns used for the <code class="literal">java.util.regex</code>
        package.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">setObject(int, Object, int, int)</code> delegate in
        PreparedStatmentWrapper delegates to wrong method.
       (<a href="http://bugs.mysql.com/30892" target="_top">Bug#30892</a>)</p></li><li><p>
        NPE with null column values when
        <code class="option">padCharsWithSpace</code> is set to true.
       (<a href="http://bugs.mysql.com/30851" target="_top">Bug#30851</a>)</p></li><li><p>
        Collation on <code class="literal">VARBINARY</code> column types would be
        misidentified. A fix has been added, but this fix only works for
        MySQL server versions 5.0.25 and newer, since earlier versions
        didn't consistently return correct metadata for functions, and
        thus results from subqueries and functions were
        indistinguishable from each other, leading to type-related bugs.
       (<a href="http://bugs.mysql.com/30664" target="_top">Bug#30664</a>)</p></li><li><p>
        An <code class="literal">ArithmeticException</code> or
        <code class="literal">NullPointerException</code> would be raised when the
        batch had zero members and
        <code class="literal">rewriteBatchedStatements=true</code> when
        <code class="literal">addBatch()</code> was never called, or
        <code class="literal">executeBatch()</code> was called immediately after
        <code class="literal">clearBatch()</code>.
       (<a href="http://bugs.mysql.com/30550" target="_top">Bug#30550</a>)</p></li><li><p>
        Closing a load-balanced connection would cause a
        <code class="literal">ClassCastException</code>.
       (<a href="http://bugs.mysql.com/29852" target="_top">Bug#29852</a>)</p></li><li><p>
        Connection checker for JBoss didn't use same method parameters
        via reflection, causing connections to always seem
        "bad".
       (<a href="http://bugs.mysql.com/29106" target="_top">Bug#29106</a>)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getTypeInfo()</code> for the types
        <code class="literal">DECIMAL</code> and <code class="literal">NUMERIC</code> will
        return a precision of 254 for server versions older than 5.0.3,
        64 for versions 5.0.3-5.0.5 and 65 for versions newer than
        5.0.5.
       (<a href="http://bugs.mysql.com/28972" target="_top">Bug#28972</a>)</p></li><li><p>
        <code class="literal">CallableStatement.executeBatch()</code> doesn't work
        when connection property
        <code class="option">noAccessToProcedureBodies</code> has been set to
        <code class="literal">true</code>.
      </p><p>
        The fix involves changing the behavior of
        <code class="option">noAccessToProcedureBodies</code>,in that the driver
        will now report all paramters as "IN" paramters but allow
        callers to call registerOutParameter() on them without throwing
        an exception.
       (<a href="http://bugs.mysql.com/28689" target="_top">Bug#28689</a>)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getColumns()</code> doesn't contain
        <code class="literal">SCOPE_*</code> or
        <code class="literal">IS_AUTOINCREMENT</code> columns.
       (<a href="http://bugs.mysql.com/27915" target="_top">Bug#27915</a>)</p></li><li><p>
        Schema objects with identifiers other than the connection
        character aren't retrieved correctly in
        <code class="literal">ResultSetMetadata</code>.
       (<a href="http://bugs.mysql.com/27867" target="_top">Bug#27867</a>)</p></li><li><p>
        <code class="literal">Connection.getServerCharacterEncoding()</code>
        doesn't work for servers with version &gt;= 4.1.
       (<a href="http://bugs.mysql.com/27182" target="_top">Bug#27182</a>)</p></li><li><p>
        The automated SVN revisions in
        <code class="literal">DBMD.getDriverVersion()</code>. The SVN revision of
        the directory is now inserted into the version information
        during the build.
       (<a href="http://bugs.mysql.com/21116" target="_top">Bug#21116</a>)</p></li><li><p>
        Specifying a "validation query" in your connection pool that
        starts with "/* ping */" _exactly_ will cause the driver to
        instead send a ping to the server and return a fake result set
        (much lighter weight), and when using a ReplicationConnection or
        a LoadBalancedConnection, will send the ping across all active
        connections.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-2"></a>C.5.1.6. Changes in  MySQL Connector/J 5.1.2 (29 June 2007)</h4></div></div></div><p class="release-level">
        This is a new Beta development release, fixing recently
        discovered bugs.
      </p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Setting the configuration property
        <code class="literal">rewriteBatchedStatements</code> to
        <code class="literal">true</code> will now cause the driver to rewrite
        batched prepared statements with more than 3 parameter sets in a
        batch into multi-statements (separated by ";") if they
        are not plain (that is, without <code class="literal">SELECT</code> or
        <code class="literal">ON DUPLICATE KEY UPDATE</code> clauses)
        <code class="literal">INSERT</code> or <code class="literal">REPLACE</code>
        statements.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-1"></a>C.5.1.7. Changes in  MySQL Connector/J 5.1.1 (22 June 2007)</h4></div></div></div><p class="release-level">
        This is a new Alpha development release, adding new features and
        fixing recently discovered bugs.
      </p><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Incompatible Change</strong></span>: 
        Pulled vendor-extension methods of <code class="literal">Connection</code>
        implementation out into an interface to support
        <code class="literal">java.sql.Wrapper</code> functionality from
        <code class="literal">ConnectionPoolDataSource</code>. The vendor
        extensions are javadoc'd in the
        <code class="literal">com.mysql.jdbc.Connection</code> interface.
      </p><p>
        For those looking further into the driver implementation, it is
        not an API that is used for plugability of implementations
        inside our driver (which is why there are still references to
        <code class="literal">ConnectionImpl</code> throughout the code).
      </p><p>
        We've also added server and client
        <code class="literal">prepareStatement()</code> methods that cover all of
        the variants in the JDBC API.
      </p><p>
        <code class="literal">Connection.serverPrepare(String)</code> has been
        re-named to
        <code class="literal">Connection.serverPrepareStatement()</code> for
        consistency with
        <code class="literal">Connection.clientPrepareStatement()</code>.
      </p></li><li><p>
        Row navigation now causes any streams/readers open on the result
        set to be closed, as in some cases we're reading directly from a
        shared network packet and it will be overwritten by the
        "next" row.
      </p></li><li><p>
        Made it possible to retrieve prepared statement parameter
        bindings (to be used in
        <code class="literal">StatementInterceptors</code>, primarily).
      </p></li><li><p>
        Externalized the descriptions of connection properties.
      </p></li><li><p>
        The data (and how it's stored) for <code class="literal">ResultSet</code>
        rows are now behind an interface which allows us (in some cases)
        to allocate less memory per row, in that for
        "streaming" result sets, we re-use the packet used to
        read rows, since only one row at a time is ever active.
      </p></li><li><p>
        Similar to <code class="literal">Connection</code>, we pulled out vendor
        extensions to <code class="literal">Statement</code> into an interface
        named <code class="literal">com.mysql.Statement</code>, and moved the
        <code class="literal">Statement</code> class into
        <code class="literal">com.mysql.StatementImpl</code>. The two methods
        (javadoc'd in <code class="literal">com.mysql.Statement</code> are
        <code class="literal">enableStreamingResults()</code>, which already
        existed, and <code class="literal">disableStreamingResults()</code> which
        sets the statement instance back to the fetch size and result
        set type it had before
        <code class="literal">enableStreamingResults()</code> was called.
      </p></li><li><p>
        Driver now picks appropriate internal row representation (whole
        row in one buffer, or individual byte[]s for each column value)
        depending on heuristics, including whether or not the row has
        <code class="literal">BLOB</code> or <code class="literal">TEXT</code> types and the
        overall row-size. The threshold for row size that will cause the
        driver to use a buffer rather than individual byte[]s is
        configured by the configuration property
        <code class="literal">largeRowSizeThreshold</code>, which has a default
        value of 2KB.
      </p></li><li><p>
        Added experimental support for statement
        "interceptors" via the
        <code class="literal">com.mysql.jdbc.StatementInterceptor</code>
        interface, examples are in
        <code class="filename">com/mysql/jdbc/interceptors</code>.
      </p><p>
        Implement this interface to be placed "in between"
        query execution, so that you can influence it. (currently
        experimental).
      </p><p>
        <code class="literal">StatementInterceptors</code> are
        "chainable" when configured by the user, the results
        returned by the "current" interceptor will be passed
        on to the next on in the chain, from left-to-right order, as
        specified by the user in the JDBC configuration property
        <code class="literal">statementInterceptors</code>.
      </p></li><li><p>
        See the sources (fully javadoc'd) for
        <code class="literal">com.mysql.jdbc.StatementInterceptor</code> for more
        details until we iron out the API and get it documented in the
        manual.
      </p></li><li><p>
        Setting <code class="literal">rewriteBatchedStatements</code> to
        <code class="literal">true</code> now causes
        <code class="literal">CallableStatements</code> with batched arguments to
        be re-written in the form <code class="literal">CALL (...); CALL (...);
        ...</code> to send the batch in as few client-server round
        trips as possible.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-1-0"></a>C.5.1.8. Changes in  MySQL Connector/J 5.1.0 (11 April 2007)</h4></div></div></div><p>
        This is the first public alpha release of the current
        Connector/J 5.1 development branch, providing an insight to
        upcoming features. Although some of these are still under
        development, this release includes the following new features
        and changes (in comparison to the current Connector/J 5.0
        production release):
      </p><p>
        <span class="bold"><strong>Important change:</strong></span> Due to a
        number of issues with the use of server-side prepared
        statements, Connector/J 5.0.5 has disabled their use by default.
        The disabling of server-side prepared statements does not affect
        the operation of the connector in any way.
      </p><p>
        To enable server-side prepared statements you must add the
        following configuration property to your connector string:
      </p><pre class="programlisting">useServerPrepStmts=true</pre><p>
        The default value of this property is <code class="literal">false</code>
        (that is, Connector/J does not use server-side prepared
        statements).
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The disabling of server-side prepared statements does not
          affect the operation of the connector. However, if you use the
          <code class="literal">useTimezone=true</code> connection option and use
          client-side prepared statements (instead of server-side
          prepared statements) you should also set
          <code class="literal">useSSPSCompatibleTimezoneShift=true</code>.
        </p></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Refactored <code class="literal">CommunicationsException</code> into a
        JDBC-3.0 version, and a JDBC-4.0 version (which extends
        <code class="literal">SQLRecoverableException</code>, now that it exists).
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This change means that if you were catching
          <code class="literal">com.mysql.jdbc.CommunicationsException</code> in
          your applications instead of looking at the SQLState class of
          <code class="literal">08</code>, and are moving to Java 6 (or newer),
          you need to change your imports to that exception to be
          <code class="literal">com.mysql.jdbc.exceptions.jdbc4.CommunicationsException</code>,
          as the old class will not be instantiated for communications
          link-related errors under Java 6.
        </p></div></li><li><p>
        Added support for JDBC-4.0 categorized
        <code class="literal">SQLExceptions</code>.
      </p></li><li><p>
        Added support for JDBC-4.0's <code class="literal">NCLOB</code>, and
        <code class="literal">NCHAR</code>/<code class="literal">NVARCHAR</code> types.
      </p></li><li><p>
        <code class="literal">com.mysql.jdbc.java6.javac</code> — full path
        to your Java-6 <span><strong class="command">javac</strong></span> executable
      </p></li><li><p>
        Added support for JDBC-4.0's SQLXML interfaces.
      </p></li><li><p>
        Re-worked Ant buildfile to build JDBC-4.0 classes separately, as
        well as support building under Eclipse (since Eclipse can't
        mix/match JDKs).
      </p><p>
        To build, you must set <code class="literal">JAVA_HOME</code> to
        J2SDK-1.4.2 or Java-5, and set the following properties on your
        Ant command line:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">com.mysql.jdbc.java6.javac</code> — full
            path to your Java-6 <span><strong class="command">javac</strong></span> executable
          </p></li><li><p>
            <code class="literal">com.mysql.jdbc.java6.rtjar</code> — full
            path to your Java-6 <code class="filename">rt.jar</code> file
          </p></li></ul></div></li><li><p>
        New feature — driver will automatically adjust session
        variable <code class="literal">net_write_timeout</code> when it determines
        it has been asked for a "streaming" result, and resets
        it to the previous value when the result set has been consumed.
        (configuration property is named
        <code class="literal">netTimeoutForStreamingResults</code> value and has a
        unit of seconds, the value <code class="literal">0</code> means the driver
        will not try and adjust this value).
      </p></li><li><p>
        Added support for JDBC-4.0's client information. The backend
        storage of information provided via
        <code class="literal">Connection.setClientInfo()</code> and retrieved by
        <code class="literal">Connection.getClientInfo()</code> is pluggable by
        any class that implements the
        <code class="literal">com.mysql.jdbc.JDBC4ClientInfoProvider</code>
        interface and has a no-args constructor.
      </p><p>
        The implementation used by the driver is configured using the
        <code class="literal">clientInfoProvider</code> configuration property
        (with a default of value of
        <code class="literal">com.mysql.jdbc.JDBC4CommentClientInfoProvider</code>,
        an implementation which lists the client information as a
        comment prepended to every query sent to the server).
      </p><p>
        This functionality is only available when using Java-6 or newer.
      </p></li><li><p>
        <code class="literal">com.mysql.jdbc.java6.rtjar</code> — full path
        to your Java-6 <code class="filename">rt.jar</code> file
      </p></li><li><p>
        Added support for JDBC-4.0's <code class="literal">Wrapper</code>
        interface.
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-news-5-0"></a>C.5.2. Changes in MySQL Connector/J 5.0.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#cj-news-5-0-8">C.5.2.1. Changes in  MySQL Connector/J 5.0.8 (09 October 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-7">C.5.2.2. Changes in  MySQL Connector/J 5.0.7 (20 July 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-6">C.5.2.3. Changes in  MySQL Connector/J 5.0.6 (15 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-5">C.5.2.4. Changes in  MySQL Connector/J 5.0.5 (02 March 2007)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-4">C.5.2.5. Changes in  MySQL Connector/J 5.0.4 (20 October 2006)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-3">C.5.2.6. Changes in  MySQL Connector/J 5.0.3 (26 July 2006)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-2">C.5.2.7. Changes in  MySQL Connector/J 5.0.2 (11 July 2006)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-1">C.5.2.8. Changes in  MySQL Connector/J 5.0.1 (Not Released)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-5-0-0">C.5.2.9. Changes in  MySQL Connector/J 5.0.0 (22 December 2005)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-8"></a>C.5.2.1. Changes in  MySQL Connector/J 5.0.8 (09 October 2007)</h4></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">blobsAreStrings</code> — Should the driver
        always treat BLOBs as Strings. Added specifically to work around
        dubious metadata returned by the server for <code class="literal">GROUP
        BY</code> clauses. Defaults to false.
      </p></li><li><p>
        Added two configuration parameters:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">blobsAreStrings</code> — Should the driver
            always treat BLOBs as Strings. Added specifically to work
            around dubious metadata returned by the server for
            <code class="literal">GROUP BY</code> clauses. Defaults to false.
          </p></li><li><p>
            <code class="literal">functionsNeverReturnBlobs</code> — Should
            the driver always treat data from functions returning
            <code class="literal">BLOBs</code> as Strings. Added specifically to
            work around dubious metadata returned by the server for
            <code class="literal">GROUP BY</code> clauses. Defaults to false.
          </p></li></ul></div></li><li><p>
        <code class="literal">functionsNeverReturnBlobs</code> — Should the
        driver always treat data from functions returning
        <code class="literal">BLOBs</code> as Strings. Added specifically to work
        around dubious metadata returned by the server for
        <code class="literal">GROUP BY</code> clauses. Defaults to false.
      </p></li><li><p>
        XAConnections now start in auto-commit mode (as per JDBC-4.0
        specification clarification).
      </p></li><li><p>
        Driver will now fall back to sane defaults for
        <code class="literal">max_allowed_packet</code> and
        <code class="literal">net_buffer_length</code> if the server reports them
        incorrectly (and will log this situation at
        <code class="literal">WARN</code> level, since it's actually an error
        condition).
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Connections established using URLs of the form
        <code class="literal">jdbc:mysql:loadbalance://</code> weren't doing
        failover if they tried to connect to a MySQL server that was
        down. The driver now attempts connections to the next "best"
        (depending on the load balance strategy in use) server, and
        continues to attempt connecting to the next "best" server every
        250 milliseconds until one is found that is up and running or 5
        minutes has passed.
      </p><p>
        If the driver gives up, it will throw the last-received
        <code class="literal">SQLException</code>.
       (<a href="http://bugs.mysql.com/31053" target="_top">Bug#31053</a>)</p></li><li><p>
        <code class="literal">setObject(int, Object, int, int)</code> delegate in
        PreparedStatmentWrapper delegates to wrong method.
       (<a href="http://bugs.mysql.com/30892" target="_top">Bug#30892</a>)</p></li><li><p>
        NPE with null column values when
        <code class="option">padCharsWithSpace</code> is set to true.
       (<a href="http://bugs.mysql.com/30851" target="_top">Bug#30851</a>)</p></li><li><p>
        Collation on <code class="literal">VARBINARY</code> column types would be
        misidentified. A fix has been added, but this fix only works for
        MySQL server versions 5.0.25 and newer, since earlier versions
        didn't consistently return correct metadata for functions, and
        thus results from subqueries and functions were
        indistinguishable from each other, leading to type-related bugs.
       (<a href="http://bugs.mysql.com/30664" target="_top">Bug#30664</a>)</p></li><li><p>
        An <code class="literal">ArithmeticException</code> or
        <code class="literal">NullPointerException</code> would be raised when the
        batch had zero members and
        <code class="literal">rewriteBatchedStatements=true</code> when
        <code class="literal">addBatch()</code> was never called, or
        <code class="literal">executeBatch()</code> was called immediately after
        <code class="literal">clearBatch()</code>.
       (<a href="http://bugs.mysql.com/30550" target="_top">Bug#30550</a>)</p></li><li><p>
        Closing a load-balanced connection would cause a
        <code class="literal">ClassCastException</code>.
       (<a href="http://bugs.mysql.com/29852" target="_top">Bug#29852</a>)</p></li><li><p>
        Connection checker for JBoss didn't use same method parameters
        via reflection, causing connections to always seem
        "bad".
       (<a href="http://bugs.mysql.com/29106" target="_top">Bug#29106</a>)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getTypeInfo()</code> for the types
        <code class="literal">DECIMAL</code> and <code class="literal">NUMERIC</code> will
        return a precision of 254 for server versions older than 5.0.3,
        64 for versions 5.0.3-5.0.5 and 65 for versions newer than
        5.0.5.
       (<a href="http://bugs.mysql.com/28972" target="_top">Bug#28972</a>)</p></li><li><p>
        <code class="literal">CallableStatement.executeBatch()</code> doesn't work
        when connection property
        <code class="option">noAccessToProcedureBodies</code> has been set to
        <code class="literal">true</code>.
      </p><p>
        The fix involves changing the behavior of
        <code class="option">noAccessToProcedureBodies</code>,in that the driver
        will now report all paramters as "IN" paramters but allow
        callers to call registerOutParameter() on them without throwing
        an exception.
       (<a href="http://bugs.mysql.com/28689" target="_top">Bug#28689</a>)</p></li><li><p>
        When a connection is in read-only mode, queries that are wrapped
        in parentheses were incorrectly identified DML statements.
       (<a href="http://bugs.mysql.com/28256" target="_top">Bug#28256</a>)</p></li><li><p>
        <code class="literal">UNSIGNED</code> types not reported via
        <code class="literal">DBMD.getTypeInfo()</code>, and capitalization of
        type names is not consistent between
        <code class="literal">DBMD.getColumns()</code>,
        <code class="literal">RSMD.getColumnTypeName()</code> and
        <code class="literal">DBMD.getTypeInfo()</code>.
      </p><p>
        This fix also ensures that the precision of <code class="literal">UNSIGNED
        MEDIUMINT</code> and <code class="literal">UNSIGNED BIGINT</code> is
        reported correctly via <code class="literal">DBMD.getColumns()</code>.
       (<a href="http://bugs.mysql.com/27916" target="_top">Bug#27916</a>)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getColumns()</code> doesn't contain
        <code class="literal">SCOPE_*</code> or
        <code class="literal">IS_AUTOINCREMENT</code> columns.
       (<a href="http://bugs.mysql.com/27915" target="_top">Bug#27915</a>)</p></li><li><p>
        Schema objects with identifiers other than the connection
        character aren't retrieved correctly in
        <code class="literal">ResultSetMetadata</code>.
       (<a href="http://bugs.mysql.com/27867" target="_top">Bug#27867</a>)</p></li><li><p>
        Cached metadata with
        <code class="literal">PreparedStatement.execute()</code> throws
        <code class="literal">NullPointerException</code>.
       (<a href="http://bugs.mysql.com/27412" target="_top">Bug#27412</a>)</p></li><li><p>
        <code class="literal">Connection.getServerCharacterEncoding()</code>
        doesn't work for servers with version &gt;= 4.1.
       (<a href="http://bugs.mysql.com/27182" target="_top">Bug#27182</a>)</p></li><li><p>
        The automated SVN revisions in
        <code class="literal">DBMD.getDriverVersion()</code>. The SVN revision of
        the directory is now inserted into the version information
        during the build.
       (<a href="http://bugs.mysql.com/21116" target="_top">Bug#21116</a>)</p></li><li><p>
        Specifying a "validation query" in your connection pool that
        starts with "/* ping */" _exactly_ will cause the driver to
        instead send a ping to the server and return a fake result set
        (much lighter weight), and when using a ReplicationConnection or
        a LoadBalancedConnection, will send the ping across all active
        connections.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-7"></a>C.5.2.2. Changes in  MySQL Connector/J 5.0.7 (20 July 2007)</h4></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The driver will now automatically set
        <code class="literal">useServerPrepStmts</code> to <code class="literal">true</code>
        when <code class="literal">useCursorFetch</code> has been set to
        <code class="literal">true</code>, since the feature requires server-side
        prepared statements in order to function.
      </p></li><li><p>
        <code class="literal">tcpKeepAlive</code> - Should the driver set
        SO_KEEPALIVE (default <code class="literal">true</code>)?
      </p></li><li><p>
        Give more information in EOFExceptions thrown out of MysqlIO
        (how many bytes the driver expected to read, how many it
        actually read, say that communications with the server were
        unexpectedly lost).
      </p></li><li><p>
        Driver detects when it is running in a ColdFusion MX server
        (tested with version 7), and uses the configuration bundle
        <code class="literal">coldFusion</code>, which sets
        <code class="literal">useDynamicCharsetInfo</code> to
        <code class="literal">false</code> (see previous entry), and sets
        <code class="literal">useLocalSessionState</code> and autoReconnect to
        <code class="literal">true</code>.
      </p></li><li><p>
        <code class="literal">tcpNoDelay</code> - Should the driver set
        SO_TCP_NODELAY (disabling the Nagle Algorithm, default
        <code class="literal">true</code>)?
      </p></li><li><p>
        Added configuration property
        <code class="literal">slowQueryThresholdNanos</code> - if
        <code class="literal">useNanosForElapsedTime</code> is set to
        <code class="literal">true</code>, and this property is set to a non-zero
        value the driver will use this threshold (in nanosecond units)
        to determine if a query was slow, instead of using millisecond
        units.
      </p></li><li><p>
        <code class="literal">tcpRcvBuf</code> - Should the driver set SO_RCV_BUF
        to the given value? The default value of '0', means use the
        platform default value for this property.
      </p></li><li><p>
        Setting <code class="literal">useDynamicCharsetInfo</code> to
        <code class="literal">false</code> now causes driver to use static lookups
        for collations as well (makes
        ResultSetMetadata.isCaseSensitive() much more efficient, which
        leads to performance increase for ColdFusion, which calls this
        method for every column on every table it sees, it appears).
      </p></li><li><p>
        Added configuration properties to allow tuning of TCP/IP socket
        parameters:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">tcpNoDelay</code> - Should the driver set
            SO_TCP_NODELAY (disabling the Nagle Algorithm, default
            <code class="literal">true</code>)?
          </p></li><li><p>
            <code class="literal">tcpKeepAlive</code> - Should the driver set
            SO_KEEPALIVE (default <code class="literal">true</code>)?
          </p></li><li><p>
            <code class="literal">tcpRcvBuf</code> - Should the driver set
            SO_RCV_BUF to the given value? The default value of '0',
            means use the platform default value for this property.
          </p></li><li><p>
            <code class="literal">tcpSndBuf</code> - Should the driver set
            SO_SND_BUF to the given value? The default value of '0',
            means use the platform default value for this property.
          </p></li><li><p>
            <code class="literal">tcpTrafficClass</code> - Should the driver set
            traffic class or type-of-service fields? See the
            documentation for java.net.Socket.setTrafficClass() for more
            information.
          </p></li></ul></div></li><li><p>
        Setting the configuration parameter
        <code class="literal">useCursorFetch</code> to <code class="literal">true</code> for
        MySQL-5.0+ enables the use of cursors that allow Connector/J to
        save memory by fetching result set rows in chunks (where the
        chunk size is set by calling setFetchSize() on a Statement or
        ResultSet) by using fully-materialized cursors on the server.
      </p></li><li><p>
        <code class="literal">tcpSndBuf</code> - Should the driver set SO_SND_BUF
        to the given value? The default value of '0', means use the
        platform default value for this property.
      </p></li><li><p>
        <code class="literal">tcpTrafficClass</code> - Should the driver set
        traffic class or type-of-service fields? See the documentation
        for java.net.Socket.setTrafficClass() for more information.
      </p></li><li><p>
        Added new debugging functionality - Setting configuration
        property
        <code class="literal">includeInnodbStatusInDeadlockExceptions</code> to
        <code class="literal">true</code> will cause the driver to append the
        output of <code class="literal">SHOW ENGINE INNODB STATUS</code> to
        deadlock-related exceptions, which will enumerate the current
        locks held inside InnoDB.
      </p></li><li><p>
        Added configuration property
        <code class="literal">useNanosForElapsedTime</code> - for
        profiling/debugging functionality that measures elapsed time,
        should the driver try to use nanoseconds resolution if available
        (requires JDK &gt;= 1.5)?
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If <code class="literal">useNanosForElapsedTime</code> is set to
          <code class="literal">true</code>, and this property is set to
          "0" (or left default), then elapsed times will still
          be measured in nanoseconds (if possible), but the slow query
          threshold will be converted from milliseconds to nanoseconds,
          and thus have an upper bound of approximately 2000
          milliseconds (as that threshold is represented as an integer,
          not a long).
        </p></div></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Don't send any file data in response to LOAD DATA LOCAL INFILE
        if the feature is disabled at the client side. This is to
        prevent a malicious server or man-in-the-middle from asking the
        client for data that the client is not expecting. Thanks to Jan
        Kneschke for discovering the exploit and Andrey
        "Poohie" Hristov, Konstantin Osipov and Sergei
        Golubchik for discussions about implications and possible fixes.
       (<a href="http://bugs.mysql.com/29605" target="_top">Bug#29605</a>)</p></li><li><p>
        Parser in client-side prepared statements runs to end of
        statement, rather than end-of-line for '#' comments. Also added
        support for '--' single-line comments.
       (<a href="http://bugs.mysql.com/28956" target="_top">Bug#28956</a>)</p></li><li><p>
        Parser in client-side prepared statements eats character
        following '/' if it's not a multi-line comment.
       (<a href="http://bugs.mysql.com/28851" target="_top">Bug#28851</a>)</p></li><li><p>
        PreparedStatement.getMetaData() for statements containing
        leading one-line comments is not returned correctly.
      </p><p>
        As part of this fix, we also overhauled detection of DML for
        <code class="literal">executeQuery()</code> and <code class="literal">SELECT</code>s
        for <code class="literal">executeUpdate()</code> in plain and prepared
        statements to be aware of the same types of comments.
       (<a href="http://bugs.mysql.com/28469" target="_top">Bug#28469</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-6"></a>C.5.2.3. Changes in  MySQL Connector/J 5.0.6 (15 May 2007)</h4></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Added an experimental load-balanced connection designed for use
        with SQL nodes in a MySQL Cluster/NDB environment (This is not
        for master-slave replication. For that, we suggest you look at
        <code class="literal">ReplicationConnection</code> or
        <code class="literal">lbpool</code>).
      </p><p>
        If the JDBC URL starts with
        <code class="literal">jdbc:mysql:loadbalance://host-1,host-2,...host-n</code>,
        the driver will create an implementation of
        <code class="literal">java.sql.Connection</code> that load balances
        requests across a series of MySQL JDBC connections to the given
        hosts, where the balancing takes place after transaction commit.
      </p><p>
        Therefore, for this to work (at all), you must use transactions,
        even if only reading data.
      </p><p>
        Physical connections to the given hosts will not be created
        until needed.
      </p><p>
        The driver will invalidate connections that it detects have had
        communication errors when processing a request. A new connection
        to the problematic host will be attempted the next time it is
        selected by the load balancing algorithm.
      </p><p>
        There are two choices for load balancing algorithms, which may
        be specified by the <code class="literal">loadBalanceStrategy</code> JDBC
        URL configuration property:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">random</code> — the driver will pick a
            random host for each request. This tends to work better than
            round-robin, as the randomness will somewhat account for
            spreading loads where requests vary in response time, while
            round-robin can sometimes lead to overloaded nodes if there
            are variations in response times across the workload.
          </p></li><li><p>
            <code class="literal">bestResponseTime</code> — the driver will
            route the request to the host that had the best response
            time for the previous transaction.
          </p></li></ul></div></li><li><p>
        <code class="literal">bestResponseTime</code> — the driver will
        route the request to the host that had the best response time
        for the previous transaction.
      </p></li><li><p>
        Added configuration property
        <code class="literal">padCharsWithSpace</code> (defaults to
        <code class="literal">false</code>). If set to <code class="literal">true</code>,
        and a result set column has the <code class="literal">CHAR</code> type and
        the value does not fill the amount of characters specified in
        the DDL for the column, the driver will pad the remaining
        characters with space (for ANSI compliance).
      </p></li><li><p>
        When <code class="literal">useLocalSessionState</code> is set to
        <code class="literal">true</code> and connected to a MySQL-5.0 or later
        server, the JDBC driver will now determine whether an actual
        <code class="literal">commit</code> or <code class="literal">rollback</code>
        statement needs to be sent to the database when
        <code class="literal">Connection.commit()</code> or
        <code class="literal">Connection.rollback()</code> is called.
      </p><p>
        This is especially helpful for high-load situations with
        connection pools that always call
        <code class="literal">Connection.rollback()</code> on connection
        check-in/check-out because it avoids a round-trip to the server.
      </p></li><li><p>
        Added configuration property
        <code class="literal">useDynamicCharsetInfo</code>. If set to
        <code class="literal">false</code> (the default), the driver will use a
        per-connection cache of character set information queried from
        the server when necessary, or when set to
        <code class="literal">true</code>, use a built-in static mapping that is
        more efficient, but isn't aware of custom character sets or
        character sets implemented after the release of the JDBC driver.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This only affects the <code class="literal">padCharsWithSpace</code>
          configuration property and the
          <code class="literal">ResultSetMetaData.getColumnDisplayWidth()</code>
          method.
        </p></div></li><li><p>
        New configuration property,
        <code class="literal">enableQueryTimeouts</code> (default
        <code class="literal">true</code>).
      </p><p>
        When enabled, query timeouts set via
        <code class="literal">Statement.setQueryTimeout()</code> use a shared
        <code class="literal">java.util.Timer</code> instance for scheduling. Even
        if the timeout doesn't expire before the query is processed,
        there will be memory used by the <code class="literal">TimerTask</code>
        for the given timeout which won't be reclaimed until the time
        the timeout would have expired if it hadn't been cancelled by
        the driver. High-load environments might want to consider
        disabling this functionality. (this configuration property is
        part of the <code class="literal">maxPerformance</code> configuration
        bundle).
      </p></li><li><p>
        Give better error message when "streaming" result
        sets, and the connection gets clobbered because of exceeding
        <code class="literal">net_write_timeout</code> on the server.
      </p></li><li><p>
        <code class="literal">random</code> — the driver will pick a random
        host for each request. This tends to work better than
        round-robin, as the randomness will somewhat account for
        spreading loads where requests vary in response time, while
        round-robin can sometimes lead to overloaded nodes if there are
        variations in response times across the workload.
      </p></li><li><p>
        <code class="literal">com.mysql.jdbc.[NonRegistering]Driver</code> now
        understands URLs of the format
        <code class="literal">jdbc:mysql:replication://</code> and
        <code class="literal">jdbc:mysql:loadbalance://</code> which will create a
        ReplicationConnection (exactly like when using
        <code class="literal">[NonRegistering]ReplicationDriver</code>) and an
        experimental load-balanced connection designed for use with SQL
        nodes in a MySQL Cluster/NDB environment, respectively.
      </p><p>
        In an effort to simplify things, we're working on deprecating
        multiple drivers, and instead specifying different core behavior
        based upon JDBC URL prefixes, so watch for
        <code class="literal">[NonRegistering]ReplicationDriver</code> to
        eventually disappear, to be replaced with
        <code class="literal">com.mysql.jdbc[NonRegistering]Driver</code> with the
        new URL prefix.
      </p></li><li><p>
        Fixed issue where a failed-over connection would let an
        application call <code class="literal">setReadOnly(false)</code>, when
        that call should be ignored until the connection is reconnected
        to a writable master unless <code class="literal">failoverReadOnly</code>
        had been set to <code class="literal">false</code>.
      </p></li><li><p>
        Driver will now use <code class="literal">INSERT INTO ... VALUES
        (DEFAULT)</code>form of statement for updatable result sets
        for <code class="literal">ResultSet.insertRow()</code>, rather than
        pre-populating the insert row with values from
        <code class="literal">DatabaseMetaData.getColumns()</code>(which results
        in a <code class="literal">SHOW FULL COLUMNS</code> on the server for
        every result set). If an application requires access to the
        default values before <code class="literal">insertRow()</code> has been
        called, the JDBC URL should be configured with
        <code class="literal">populateInsertRowWithDefaultValues</code> set to
        <code class="literal">true</code>.
      </p><p>
        This fix specifically targets performance issues with ColdFusion
        and the fact that it seems to ask for updatable result sets no
        matter what the application does with them.
      </p></li><li><p>
        More intelligent initial packet sizes for the "shared"
        packets are used (512 bytes, rather than 16K), and initial
        packets used during handshake are now sized appropriately as to
        not require reallocation.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        More useful error messages are generated when the driver thinks
        a result set is not updatable. (Thanks to Ashley Martens for the
        patch).
       (<a href="http://bugs.mysql.com/28085" target="_top">Bug#28085</a>)</p></li><li><p>
        <code class="literal">Connection.getTransactionIsolation()</code> uses
        "<code class="literal">SHOW VARIABLES LIKE</code>" which is very
        inefficient on MySQL-5.0+ servers.
       (<a href="http://bugs.mysql.com/27655" target="_top">Bug#27655</a>)</p></li><li><p>
        Fixed issue where calling <code class="literal">getGeneratedKeys()</code>
        on a prepared statement after calling
        <code class="literal">execute()</code> didn't always return the generated
        keys (<code class="literal">executeUpdate()</code> worked fine however).
       (<a href="http://bugs.mysql.com/27655" target="_top">Bug#27655</a>)</p></li><li><p>
        <code class="literal">CALL /* ... */
        <em class="replaceable"><code>some_proc</code></em>()</code> doesn't work.
        As a side effect of this fix, you can now use <code class="literal">/*
        */</code> and <code class="literal">#</code> comments when preparing
        statements using client-side prepared statement emulation.
      </p><p>
        If the comments happen to contain parameter markers
        (<code class="literal">?</code>), they will be treated as belonging to the
        comment (that is, not recognized) rather than being a parameter
        of the statement.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The statement when sent to the server will contain the
          comments as-is, they're not stripped during the process of
          preparing the <code class="literal">PreparedStatement</code> or
          <code class="literal">CallableStatement</code>.
        </p></div><p>(<a href="http://bugs.mysql.com/27400" target="_top">Bug#27400</a>)</p></li><li><p>
        <code class="literal">ResultSet.get*()</code> with a column index &lt; 1
        returns misleading error message.
       (<a href="http://bugs.mysql.com/27317" target="_top">Bug#27317</a>)</p></li><li><p>
        Using <code class="literal">ResultSet.get*()</code> with a column index
        less than 1 returns a misleading error message.
       (<a href="http://bugs.mysql.com/27317" target="_top">Bug#27317</a>)</p></li><li><p>
        Comments in DDL of stored procedures/functions confuse procedure
        parser, and thus metadata about them can not be created, leading
        to inability to retrieve said metadata, or execute procedures
        that have certain comments in them.
       (<a href="http://bugs.mysql.com/26959" target="_top">Bug#26959</a>)</p></li><li><p>
        Fast date/time parsing doesn't take into account
        <code class="literal">00:00:00</code> as a legal value.
       (<a href="http://bugs.mysql.com/26789" target="_top">Bug#26789</a>)</p></li><li><p>
        <code class="literal">PreparedStatement</code> is not closed in
        <code class="literal">BlobFromLocator.getBytes()</code>.
       (<a href="http://bugs.mysql.com/26592" target="_top">Bug#26592</a>)</p></li><li><p>
        When the configuration property
        <code class="literal">useCursorFetch</code> was set to
        <code class="literal">true</code>, sometimes server would return new, more
        exact metadata during the execution of the server-side prepared
        statement that enables this functionality, which the driver
        ignored (using the original metadata returned during
        <code class="literal">prepare()</code>), causing corrupt reading of data
        due to type mismatch when the actual rows were returned.
       (<a href="http://bugs.mysql.com/26173" target="_top">Bug#26173</a>)</p></li><li><p>
        <code class="literal">CallableStatements</code> with
        <code class="literal">OUT/INOUT</code> parameters that are
        "binary" (<code class="literal">BLOB</code>,
        <code class="literal">BIT</code>, <code class="literal">(VAR)BINARY</code>,
        <code class="literal">JAVA_OBJECT</code>) have extra 7 bytes.
       (<a href="http://bugs.mysql.com/25715" target="_top">Bug#25715</a>)</p></li><li><p>
        Whitespace surrounding storage/size specifiers in stored
        procedure parameters declaration causes
        <code class="literal">NumberFormatException</code> to be thrown when
        calling stored procedure on JDK-1.5 or newer, as the Number
        classes in JDK-1.5+ are whitespace intolerant.
       (<a href="http://bugs.mysql.com/25624" target="_top">Bug#25624</a>)</p></li><li><p>
        Client options not sent correctly when using SSL, leading to
        stored procedures not being able to return results. Thanks to
        Don Cohen for the bug report, testcase and patch.
       (<a href="http://bugs.mysql.com/25545" target="_top">Bug#25545</a>)</p></li><li><p>
        <code class="literal">Statement.setMaxRows()</code> is not effective on
        result sets materialized from cursors.
       (<a href="http://bugs.mysql.com/25517" target="_top">Bug#25517</a>)</p></li><li><p>
        <code class="literal">BIT(&gt; 1)</code> is returned as
        <code class="literal">java.lang.String</code> from
        <code class="literal">ResultSet.getObject()</code> rather than
        <code class="literal">byte[]</code>.
       (<a href="http://bugs.mysql.com/25328" target="_top">Bug#25328</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-5"></a>C.5.2.4. Changes in  MySQL Connector/J 5.0.5 (02 March 2007)</h4></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Usage Advisor will now issue warnings for result sets with large
        numbers of rows. You can configure the trigger value by using
        the <code class="literal">resultSetSizeThreshold</code> parameter, which
        has a default value of 100.
      </p></li><li><p>
        The <code class="literal">rewriteBatchedStatements</code> feature can now
        be used with server-side prepared statements.
      </p></li><li><p>
        <span class="bold"><strong>Important change:</strong></span> Due to a
        number of issues with the use of server-side prepared
        statements, Connector/J 5.0.5 has disabled their use by default.
        The disabling of server-side prepared statements does not affect
        the operation of the connector in any way.
      </p><p>
        To enable server-side prepared statements you must add the
        following configuration property to your connector string:
      </p><pre class="programlisting">useServerPrepStmts=true</pre><p>
        The default value of this property is <code class="literal">false</code>
        (that is, Connector/J does not use server-side prepared
        statements).
      </p></li><li><p>
        Improved speed of <code class="literal">datetime</code> parsing for
        ResultSets that come from plain or non-server-side prepared
        statements. You can enable old implementation with
        <code class="literal">useFastDateParsing=false</code> as a configuration
        parameter.
      </p></li><li><p>
        Usage Advisor now detects empty results sets and does not report
        on columns not referenced in those empty sets.
      </p></li><li><p>
        Fixed logging of XA commands sent to server, it's now
        configurable via <code class="literal">logXaCommands</code> property
        (defaults to <code class="literal">false</code>).
      </p></li><li><p>
        Added configuration property
        <code class="literal">localSocketAddress</code>,which is the hostname or
        IP address given to explicitly configure the interface that the
        driver will bind the client side of the TCP/IP connection to
        when connecting.
      </p></li><li><p>
        We've added a new configuration option
        <code class="literal">treatUtilDateAsTimestamp</code>, which is
        <code class="literal">false</code> by default, as (1) We already had
        specific behavior to treat java.util.Date as a
        java.sql.Timestamp because it's useful to many folks, and (2)
        that behavior will very likely be required for drivers
        JDBC-post-4.0.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Connection property <code class="literal">socketFactory</code> wasn't
        exposed via correctly named mutator/accessor, causing data
        source implementations that use JavaBean naming conventions to
        set properties to fail to set the property (and in the case of
        SJAS, fail silently when trying to set this parameter).
       (<a href="http://bugs.mysql.com/26326" target="_top">Bug#26326</a>)</p></li><li><p>
        A query execution which timed out did not always throw a
        <code class="literal">MySQLTimeoutException</code>.
       (<a href="http://bugs.mysql.com/25836" target="_top">Bug#25836</a>)</p></li><li><p>
        Storing a <code class="literal">java.util.Date</code> object in a
        <code class="literal">BLOB</code> column would not be serialized correctly
        during <code class="literal">setObject</code>.
       (<a href="http://bugs.mysql.com/25787" target="_top">Bug#25787</a>)</p></li><li><p>
        Timer instance used for
        <code class="literal">Statement.setQueryTimeout()</code> created
        per-connection, rather than per-VM, causing memory leak.
       (<a href="http://bugs.mysql.com/25514" target="_top">Bug#25514</a>)</p></li><li><p>
        <code class="literal">EscapeProcessor</code> gets confused by multiple
        backslashes. We now push the responsibility of syntax errors
        back on to the server for most escape sequences.
       (<a href="http://bugs.mysql.com/25399" target="_top">Bug#25399</a>)</p></li><li><p>
        <code class="literal">INOUT</code> parameters in
        <code class="literal">CallableStatements</code> get doubly-escaped.
       (<a href="http://bugs.mysql.com/25379" target="_top">Bug#25379</a>)</p></li><li><p>
        When using the <code class="literal">rewriteBatchedStatements</code>
        connection option with
        <code class="literal">PreparedState.executeBatch()</code> an internal
        memory leak would occur.
       (<a href="http://bugs.mysql.com/25073" target="_top">Bug#25073</a>)</p></li><li><p>
        Fixed issue where field-level for metadata from
        <code class="literal">DatabaseMetaData</code> when using
        <code class="literal">INFORMATION_SCHEMA</code> didn't have references to
        current connections, sometimes leading to Null Pointer
        Exceptions (NPEs) when introspecting them via
        <code class="literal">ResultSetMetaData</code>.
       (<a href="http://bugs.mysql.com/25073" target="_top">Bug#25073</a>)</p></li><li><p>
        <code class="literal">StringUtils.indexOfIgnoreCaseRespectQuotes()</code>
        isn't case-insensitive on the first character of the target.
        This bug also affected
        <code class="literal">rewriteBatchedStatements</code> functionality when
        prepared statements did not use uppercase for the
        <code class="literal">VALUES</code> clause.
       (<a href="http://bugs.mysql.com/25047" target="_top">Bug#25047</a>)</p></li><li><p>
        Client-side prepared statement parser gets confused by in-line
        comments <code class="literal">/*...*/</code> and therefore cannot rewrite
        batch statements or reliably detect the type of statements when
        they are used.
       (<a href="http://bugs.mysql.com/25025" target="_top">Bug#25025</a>)</p></li><li><p>
        Results sets from <code class="literal">UPDATE</code> statements that are
        part of multi-statement queries would cause an
        <code class="literal">SQLException</code> error, "Result is from
        UPDATE".
       (<a href="http://bugs.mysql.com/25009" target="_top">Bug#25009</a>)</p></li><li><p>
        Specifying <code class="literal">US-ASCII</code> as the character set in a
        connection to a MySQL 4.1 or newer server does not map
        correctly.
       (<a href="http://bugs.mysql.com/24840" target="_top">Bug#24840</a>)</p></li><li><p>
        Using <code class="literal">DatabaseMetaData.getSQLKeywords()</code> does
        not return a all of the of the reserved keywords for the current
        MySQL version. Current implementation returns the list of
        reserved words for MySQL 5.1, and does not distinguish between
        versions.
       (<a href="http://bugs.mysql.com/24794" target="_top">Bug#24794</a>)</p></li><li><p>
        Calling <code class="literal">Statement.cancel()</code> could result in a
        Null Pointer Exception (NPE).
       (<a href="http://bugs.mysql.com/24721" target="_top">Bug#24721</a>)</p></li><li><p>
        Using <code class="literal">setFetchSize()</code> breaks prepared
        <code class="literal">SHOW</code> and other commands.
       (<a href="http://bugs.mysql.com/24360" target="_top">Bug#24360</a>)</p></li><li><p>
        Calendars and timezones are now lazily instantiated when
        required.
       (<a href="http://bugs.mysql.com/24351" target="_top">Bug#24351</a>)</p></li><li><p>
        Using <code class="literal">DATETIME</code> columns would result in time
        shifts when <code class="literal">useServerPrepStmts</code> was true. The
        reason was due to different behavior when using client-side
        compared to server-side prepared statements and the
        <code class="literal">useJDBCCompliantTimezoneShift</code> option. This is
        now fixed if moving from server-side prepared statements to
        client-side prepared statements by setting
        <code class="literal">useSSPSCompatibleTimezoneShift</code> to
        <code class="literal">true</code>, as the driver can't tell if this is a
        new deployment that never used server-side prepared statements,
        or if it is an existing deployment that is switching to
        client-side prepared statements from server-side prepared
        statements.
       (<a href="http://bugs.mysql.com/24344" target="_top">Bug#24344</a>)</p></li><li><p>
        Connector/J now returns a better error message when server
        doesn't return enough information to determine stored
        procedure/function parameter types.
       (<a href="http://bugs.mysql.com/24065" target="_top">Bug#24065</a>)</p></li><li><p>
        A connection error would occur when connecting to a MySQL server
        with certain character sets. Some collations/character sets
        reported as "unknown" (specifically
        <code class="literal">cias</code> variants of existing character sets),
        and inability to override the detected server character set.
       (<a href="http://bugs.mysql.com/23645" target="_top">Bug#23645</a>)</p></li><li><p>
        Inconsistency between <code class="literal">getSchemas</code> and
        <code class="literal">INFORMATION_SCHEMA</code>.
       (<a href="http://bugs.mysql.com/23304" target="_top">Bug#23304</a>)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getSchemas()</code> doesn't return
        a <code class="literal">TABLE_CATALOG</code> column.
       (<a href="http://bugs.mysql.com/23303" target="_top">Bug#23303</a>)</p></li><li><p>
        When using a JDBC connection URL that is malformed, the
        <code class="literal">NonRegisteringDriver.getPropertyInfo</code> method
        will throw a Null Pointer Exception (NPE).
       (<a href="http://bugs.mysql.com/22628" target="_top">Bug#22628</a>)</p></li><li><p>
        Some exceptions thrown out of
        <code class="literal">StandardSocketFactory</code> were needlessly
        wrapped, obscuring their true cause, especially when using
        socket timeouts.
       (<a href="http://bugs.mysql.com/21480" target="_top">Bug#21480</a>)</p></li><li><p>
        When using a server-side prepared statement the driver would
        send timestamps to the server using nanoseconds instead of
        milliseconds.
       (<a href="http://bugs.mysql.com/21438" target="_top">Bug#21438</a>)</p></li><li><p>
        When using server-side prepared statements and timestamp
        columns, value would be incorrectly populated (with nanoseconds,
        not microseconds).
       (<a href="http://bugs.mysql.com/21438" target="_top">Bug#21438</a>)</p></li><li><p>
        <code class="literal">ParameterMetaData</code> throws
        <code class="literal">NullPointerException</code> when prepared SQL has a
        syntax error. Added
        <code class="literal">generateSimpleParameterMetadata</code> configuration
        property, which when set to <code class="literal">true</code> will
        generate metadata reflecting <code class="literal">VARCHAR</code> for
        every parameter (the default is <code class="literal">false</code>, which
        will cause an exception to be thrown if no parameter metadata
        for the statement is actually available).
       (<a href="http://bugs.mysql.com/21267" target="_top">Bug#21267</a>)</p></li><li><p>
        Fixed an issue where <code class="literal">XADataSources</code> couldn't
        be bound into JNDI, as the <code class="literal">DataSourceFactory</code>
        didn't know how to create instances of them.
      </p></li></ul></div><p>Other changes:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Avoid static synchronized code in JVM class libraries for
        dealing with default timezones.
      </p></li><li><p>
        Performance enhancement of initial character set configuration,
        driver will only send commands required to configure connection
        character set session variables if the current values on the
        server do not match what is required.
      </p></li><li><p>
        Re-worked stored procedure parameter parser to be more robust.
        Driver no longer requires <code class="literal">BEGIN</code> in stored
        procedure definition, but does have requirement that if a stored
        function begins with a label directly after the
        "returns" clause, that the label is not a quoted
        identifier.
      </p></li><li><p>
        Throw exceptions encountered during timeout to thread calling
        <code class="literal">Statement.execute*()</code>, rather than
        <code class="literal">RuntimeException</code>.
      </p></li><li><p>
        Changed cached result set metadata (when using
        <code class="literal">cacheResultSetMetadata=true</code>) to be cached
        per-connection rather than per-statement as previously
        implemented.
      </p></li><li><p>
        Reverted back to internal character conversion routines for
        single-byte character sets, as the ones internal to the JVM are
        using much more CPU time than our internal implementation.
      </p></li><li><p>
        When extracting foreign key information from <code class="literal">SHOW
        CREATE TABLE</code> in <code class="literal">DatabaseMetaData</code>,
        ignore exceptions relating to tables being missing (which could
        happen for cross-reference or imported-key requests, as the list
        of tables is generated first, then iterated).
      </p></li><li><p>
        Fixed some Null Pointer Exceptions (NPEs) when cached metadata
        was used with <code class="literal">UpdatableResultSets</code>.
      </p></li><li><p>
        Take <code class="literal">localSocketAddress</code> property into account
        when creating instances of
        <code class="literal">CommunicationsException</code> when the underyling
        exception is a <code class="literal">java.net.BindException</code>, so
        that a friendlier error message is given with a little internal
        diagnostics.
      </p></li><li><p>
        Fixed cases where <code class="literal">ServerPreparedStatements</code>
        weren't using cached metadata when
        <code class="literal">cacheResultSetMetadata=true</code> was used.
      </p></li><li><p>
        Use a <code class="literal">java.util.TreeMap</code> to map column names
        to ordinal indexes for <code class="literal">ResultSet.findColumn()</code>
        instead of a HashMap. This allows us to have case-insensitive
        lookups (required by the JDBC specification) without resorting
        to the many transient object instances needed to support this
        requirement with a normal <code class="literal">HashMap</code> with either
        case-adjusted keys, or case-insensitive keys. (In the worst case
        scenario for lookups of a 1000 column result set, TreeMaps are
        about half as fast wall-clock time as a HashMap, however in
        normal applications their use gives many orders of magnitude
        reduction in transient object instance creation which pays off
        later for CPU usage in garbage collection).
      </p></li><li><p>
        When using cached metadata, skip field-level metadata packets
        coming from the server, rather than reading them and discarding
        them without creating <code class="literal">com.mysql.jdbc.Field</code>
        instances.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-4"></a>C.5.2.5. Changes in  MySQL Connector/J 5.0.4 (20 October 2006)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        DBMD.getColumns() does not return expected COLUMN_SIZE for the
        SET type, now returns length of largest possible set
        disregarding whitespace or the "," delimitters to be
        consistent with the ODBC driver.
       (<a href="http://bugs.mysql.com/22613" target="_top">Bug#22613</a>)</p></li><li><p>
        Added new _ci collations to CharsetMapping - utf8_unicode_ci not
        working.
       (<a href="http://bugs.mysql.com/22456" target="_top">Bug#22456</a>)</p></li><li><p>
        Driver was using milliseconds for Statement.setQueryTimeout()
        when specification says argument is to be in seconds.
       (<a href="http://bugs.mysql.com/22359" target="_top">Bug#22359</a>)</p></li><li><p>
        Workaround for server crash when calling stored procedures via a
        server-side prepared statement (driver now detects
        prepare(stored procedure) and substitutes client-side prepared
        statement).
       (<a href="http://bugs.mysql.com/22297" target="_top">Bug#22297</a>)</p></li><li><p>
        Driver issues truncation on write exception when it shouldn't
        (due to sending big decimal incorrectly to server with
        server-side prepared statement).
       (<a href="http://bugs.mysql.com/22290" target="_top">Bug#22290</a>)</p></li><li><p>
        Newlines causing whitespace to span confuse procedure parser
        when getting parameter metadata for stored procedures.
       (<a href="http://bugs.mysql.com/22024" target="_top">Bug#22024</a>)</p></li><li><p>
        When using information_schema for metadata, COLUMN_SIZE for
        getColumns() is not clamped to range of java.lang.Integer as is
        the case when not using information_schema, thus leading to a
        truncation exception that isn't present when not using
        information_schema.
       (<a href="http://bugs.mysql.com/21544" target="_top">Bug#21544</a>)</p></li><li><p>
        Column names don't match metadata in cases where server doesn't
        return original column names (column functions) thus breaking
        compatibility with applications that expect 1-1 mappings between
        findColumn() and rsmd.getColumnName(), usually manifests itself
        as "Can't find column ('')" exceptions.
       (<a href="http://bugs.mysql.com/21379" target="_top">Bug#21379</a>)</p></li><li><p>
        Driver now sends numeric 1 or 0 for client-prepared statement
        <code class="literal">setBoolean()</code> calls instead of '1' or '0'.
      </p></li><li><p>
        Fixed configuration property
        <code class="literal">jdbcCompliantTruncation</code> was not being used
        for reads of result set values.
      </p></li><li><p>
        DatabaseMetaData correctly reports <code class="literal">true</code> for
        <code class="literal">supportsCatalog*()</code> methods.
      </p></li><li><p>
        Driver now supports <code class="literal">{call sp}</code> (without
        "()" if procedure has no arguments).
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-3"></a>C.5.2.6. Changes in  MySQL Connector/J 5.0.3 (26 July 2006)</h4></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Added configuration option
        <code class="literal">noAccessToProcedureBodies</code> which will cause
        the driver to create basic parameter metadata for
        <code class="literal">CallableStatements</code> when the user does not
        have access to procedure bodies via <code class="literal">SHOW CREATE
        PROCEDURE</code> or selecting from
        <code class="literal">mysql.proc</code> instead of throwing an exception.
        The default value for this option is <code class="literal">false</code>
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed <code class="literal">Statement.cancel()</code> causes
        <code class="literal">NullPointerException</code> if underlying connection
        has been closed due to server failure.
       (<a href="http://bugs.mysql.com/20650" target="_top">Bug#20650</a>)</p></li><li><p>
        If the connection to the server has been closed due to a server
        failure, then the cleanup process will call <code class="literal">
        Statement.cancel()</code>, triggering a
        <code class="literal">NullPointerException</code>, even though there is no
        active connection.
       (<a href="http://bugs.mysql.com/20650" target="_top">Bug#20650</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-2"></a>C.5.2.7. Changes in  MySQL Connector/J 5.0.2 (11 July 2006)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">MysqlXaConnection.recover(int flags)</code> now
        allows combinations of
        <code class="literal">XAResource.TMSTARTRSCAN</code> and
        <code class="literal">TMENDRSCAN</code>. To simulate the
        “<span class="quote">scanning</span>” nature of the interface, we return all
        prepared XIDs for <code class="literal">TMSTARTRSCAN</code>, and no new
        XIDs for calls with <code class="literal">TMNOFLAGS</code>, or
        <code class="literal">TMENDRSCAN</code> when not in combination with
        <code class="literal">TMSTARTRSCAN</code>. This change was made for API
        compliance, as well as integration with IBM WebSphere's
        transaction manager.
       (<a href="http://bugs.mysql.com/20242" target="_top">Bug#20242</a>)</p></li><li><p>
        Fixed <code class="literal">MysqlValidConnectionChecker</code> for JBoss
        doesn't work with <code class="literal">MySQLXADataSources</code>.
       (<a href="http://bugs.mysql.com/20242" target="_top">Bug#20242</a>)</p></li><li><p>
        Added connection/datasource property
        <code class="literal">pinGlobalTxToPhysicalConnection</code> (defaults to
        <code class="literal">false</code>). When set to <code class="literal">true</code>,
        when using <code class="literal">XAConnections</code>, the driver ensures
        that operations on a given XID are always routed to the same
        physical connection. This allows the
        <code class="literal">XAConnection</code> to support <code class="literal">XA START ...
        JOIN</code> after <code class="literal">XA END</code> has been called,
        and is also a workaround for transaction managers that don't
        maintain thread affinity for a global transaction (most either
        always maintain thread affinity, or have it as a configuration
        option).
       (<a href="http://bugs.mysql.com/20242" target="_top">Bug#20242</a>)</p></li><li><p>
        Better caching of character set converters (per-connection) to
        remove a bottleneck for multibyte character sets.
       (<a href="http://bugs.mysql.com/20242" target="_top">Bug#20242</a>)</p></li><li><p>
        Fixed <code class="literal">ConnectionProperties</code> (and thus some
        subclasses) are not serializable, even though some J2EE
        containers expect them to be.
       (<a href="http://bugs.mysql.com/19169" target="_top">Bug#19169</a>)</p></li><li><p>
        Fixed driver fails on non-ASCII platforms. The driver was
        assuming that the platform character set would be a superset of
        MySQL's <code class="literal">latin1</code> when doing the handshake for
        authentication, and when reading error messages. We now use
        Cp1252 for all strings sent to the server during the handshake
        phase, and a hard-coded mapping of the
        <code class="literal">language</code> systtem variable to the character
        set that is used for error messages.
       (<a href="http://bugs.mysql.com/18086" target="_top">Bug#18086</a>)</p></li><li><p>
        Fixed can't use <code class="literal">XAConnection</code> for local
        transactions when no global transaction is in progress.
       (<a href="http://bugs.mysql.com/17401" target="_top">Bug#17401</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-1"></a>C.5.2.8. Changes in  MySQL Connector/J 5.0.1 (Not Released)</h4></div></div></div><p>
        Not released due to a packaging error
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-0"></a>C.5.2.9. Changes in  MySQL Connector/J 5.0.0 (22 December 2005)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Added support for Connector/MXJ integration via url subprotocol
        <code class="literal">jdbc:mysql:mxj://...</code>.
       (<a href="http://bugs.mysql.com/14729" target="_top">Bug#14729</a>)</p></li><li><p>
        Idle timeouts cause <code class="literal">XAConnections</code> to whine
        about rolling themselves back.
       (<a href="http://bugs.mysql.com/14729" target="_top">Bug#14729</a>)</p></li><li><p>
        When fix for <a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a> was merged from 3.1.12, added
        functionality for <code class="literal">CallableStatement</code>'s
        parameter metadata to return correct information for
        <code class="literal">.getParameterClassName()</code>.
       (<a href="http://bugs.mysql.com/14729" target="_top">Bug#14729</a>)</p></li><li><p>
        Added service-provider entry to
        <code class="filename">META-INF/services/java.sql.Driver</code> for
        JDBC-4.0 support.
       (<a href="http://bugs.mysql.com/14729" target="_top">Bug#14729</a>)</p></li><li><p>
        Fuller synchronization of <code class="literal">Connection</code> to avoid
        deadlocks when using multithreaded frameworks that multithread a
        single connection (usually not recommended, but the JDBC spec
        allows it anyways), part of fix to <a href="http://bugs.mysql.com/14972" target="_top">Bug#14972</a>).
       (<a href="http://bugs.mysql.com/14729" target="_top">Bug#14729</a>)</p></li><li><p>
        Moved all <code class="literal">SQLException</code> constructor usage to a
        factory in <code class="literal">SQLError</code> (ground-work for JDBC-4.0
        <code class="literal">SQLState</code>-based exception classes).
       (<a href="http://bugs.mysql.com/14729" target="_top">Bug#14729</a>)</p></li><li><p>
        Removed Java5-specific calls to <code class="literal">BigDecimal</code>
        constructor (when result set value is <code class="literal">''</code>,
        <code class="literal">(int)0</code> was being used as an argument
        indirectly via method return value. This signature doesn't exist
        prior to Java5.)
       (<a href="http://bugs.mysql.com/14729" target="_top">Bug#14729</a>)</p></li><li><p>
        Implementation of <code class="literal">Statement.cancel()</code> and
        <code class="literal">Statement.setQueryTimeout()</code>. Both require
        MySQL-5.0.0 or newer server, require a separate connection to
        issue the <code class="literal">KILL QUERY</code> statement, and in the
        case of <code class="literal">setQueryTimeout()</code> creates an
        additional thread to handle the timeout functionality.
      </p><p>
        Note: Failures to cancel the statement for
        <code class="literal">setQueryTimeout()</code> may manifest themselves as
        <code class="literal">RuntimeExceptions</code> rather than failing
        silently, as there is currently no way to unblock the thread
        that is executing the query being cancelled due to timeout
        expiration and have it throw the exception instead.
       (<a href="http://bugs.mysql.com/14729" target="_top">Bug#14729</a>)</p></li><li><p>
        Return "[VAR]BINARY" for
        <code class="literal">RSMD.getColumnTypeName()</code> when that is
        actually the type, and it can be distinguished (MySQL-4.1 and
        newer).
       (<a href="http://bugs.mysql.com/14729" target="_top">Bug#14729</a>)</p></li><li><p>
        Attempt detection of the MySQL type <code class="literal">BINARY</code>
        (it's an alias, so this isn't always reliable), and use the
        <code class="literal">java.sql.Types.BINARY</code> type mapping for it.
      </p></li><li><p>
        Added unit tests for <code class="literal">XADatasource</code>, as well as
        friendlier exceptions for XA failures compared to the
        "stock" <code class="literal">XAException</code> (which has no
        messages).
      </p></li><li><p>
        If the connection <code class="literal">useTimezone</code> is set to
        <code class="literal">true</code>, then also respect time zone conversions
        in escape-processed string literals (for example,
        <code class="literal">"{ts ...}"</code> and <code class="literal">"{t
        ...}"</code>).
      </p></li><li><p>
        Don't allow <code class="literal">.setAutoCommit(true)</code>, or
        <code class="literal">.commit()</code> or <code class="literal">.rollback()</code>
        on an XA-managed connection as per the JDBC specification.
      </p></li><li><p>
        <code class="literal">XADataSource</code> implemented (ported from 3.2
        branch which won't be released as a product). Use
        <code class="literal">com.mysql.jdbc.jdbc2.optional.MysqlXADataSource</code>
        as your datasource class name in your application server to
        utilize XA transactions in MySQL-5.0.10 and newer.
      </p></li><li><p>
        Moved <code class="filename">-bin-g.jar</code> file into separate
        <code class="filename">debug</code> subdirectory to avoid confusion.
      </p></li><li><p>
        Return original column name for
        <code class="literal">RSMD.getColumnName()</code> if the column was
        aliased, alias name for <code class="literal">.getColumnLabel()</code> (if
        aliased), and original table name for
        <code class="literal">.getTableName()</code>. Note this only works for
        MySQL-4.1 and newer, as older servers don't make this
        information available to clients.
      </p></li><li><p>
        Setting <code class="literal">useJDBCCompliantTimezoneShift=true</code>
        (it's not the default) causes the driver to use GMT for
        <span class="emphasis"><em>all</em></span>
        <code class="literal">TIMESTAMP</code>/<code class="literal">DATETIME</code> time
        zones, and the current VM time zone for any other type that
        refers to time zones. This feature can not be used when
        <code class="literal">useTimezone=true</code> to convert between server
        and client time zones.
      </p></li><li><p>
        <code class="literal">PreparedStatement.setString()</code> didn't work
        correctly when <code class="literal">sql_mode</code> on server contained
        <code class="literal">NO_BACKSLASH_ESCAPES</code> and no characters that
        needed escaping were present in the string.
      </p></li><li><p>
        Add one level of indirection of internal representation of
        <code class="literal">CallableStatement</code> parameter metadata to avoid
        class not found issues on JDK-1.3 for
        <code class="literal">ParameterMetadata</code> interface (which doesn't
        exist prior to JDBC-3.0).
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cg-news-3-1"></a>C.5.3. Changes in MySQL Connector/J 3.1.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#cj-news-3-1-15">C.5.3.1. Changes in  MySQL Connector/J 3.1.15 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-14">C.5.3.2. Changes in  MySQL Connector/J 3.1.14 (10-19-2006)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-13">C.5.3.3. Changes in  MySQL Connector/J 3.1.13 (26 May 2006)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-12">C.5.3.4. Changes in  MySQL Connector/J 3.1.12 (30 November 2005)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-11">C.5.3.5. Changes in  MySQL Connector/J 3.1.11 (07 October 2005)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-10">C.5.3.6. Changes in  MySQL Connector/J 3.1.10 (23 June 2005)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-9">C.5.3.7. Changes in  MySQL Connector/J 3.1.9 (22 June 2005)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-8">C.5.3.8. Changes in  MySQL Connector/J 3.1.8 (14 April 2005)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-7">C.5.3.9. Changes in  MySQL Connector/J 3.1.7 (18 February 2005)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-6">C.5.3.10. Changes in  MySQL Connector/J 3.1.6 (23 December 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-5">C.5.3.11. Changes in  MySQL Connector/J 3.1.5 (02 December 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-4">C.5.3.12. Changes in  MySQL Connector/J 3.1.4 (04 September 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-3">C.5.3.13. Changes in  MySQL Connector/J 3.1.3 (07 July 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-2">C.5.3.14. Changes in  MySQL Connector/J 3.1.2 (09 June 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-1">C.5.3.15. Changes in  MySQL Connector/J 3.1.1 (14 February 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-1-0">C.5.3.16. Changes in  MySQL Connector/J 3.1.0 (18 February 2003)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-15"></a>C.5.3.1. Changes in  MySQL Connector/J 3.1.15 (Not yet released)</h4></div></div></div><p>
        <span class="bold"><strong>Important change:</strong></span> Due to a
        number of issues with the use of server-side prepared
        statements, Connector/J 5.0.5 has disabled their use by default.
        The disabling of server-side prepared statements does not affect
        the operation of the connector in any way.
      </p><p>
        To enable server-side prepared statements you must add the
        following configuration property to your connector string:
      </p><pre class="programlisting">useServerPrepStmts=true</pre><p>
        The default value of this property is <code class="literal">false</code>
        (that is, Connector/J does not use server-side prepared
        statements).
      </p><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Specifying <code class="literal">US-ASCII</code> as the character set in a
        connection to a MySQL 4.1 or newer server does not map
        correctly.
       (<a href="http://bugs.mysql.com/24840" target="_top">Bug#24840</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-14"></a>C.5.3.2. Changes in  MySQL Connector/J 3.1.14 (10-19-2006)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Check and store value for continueBatchOnError property in
        constructor of Statements, rather than when executing batches,
        so that Connections closed out from underneath statements don't
        cause NullPointerExceptions when it's required to check this
        property.
       (<a href="http://bugs.mysql.com/22290" target="_top">Bug#22290</a>)</p></li><li><p>
        Fixed <a href="http://bugs.mysql.com/18258" target="_top">Bug#18258</a> - DatabaseMetaData.getTables(), columns() with
        bad catalog parameter threw exception rather than return empty
        result set (as required by spec).
       (<a href="http://bugs.mysql.com/22290" target="_top">Bug#22290</a>)</p></li><li><p>
        Driver now sends numeric 1 or 0 for client-prepared statement
        setBoolean() calls instead of '1' or '0'.
       (<a href="http://bugs.mysql.com/22290" target="_top">Bug#22290</a>)</p></li><li><p>
        Fixed bug where driver would not advance to next host if
        roundRobinLoadBalance=true and the last host in the list is
        down.
       (<a href="http://bugs.mysql.com/22290" target="_top">Bug#22290</a>)</p></li><li><p>
        Driver issues truncation on write exception when it shouldn't
        (due to sending big decimal incorrectly to server with
        server-side prepared statement).
       (<a href="http://bugs.mysql.com/22290" target="_top">Bug#22290</a>)</p></li><li><p>
        Fixed bug when calling stored functions, where parameters
        weren't numbered correctly (first parameter is now the return
        value, subsequent parameters if specified start at index
        "2").
       (<a href="http://bugs.mysql.com/22290" target="_top">Bug#22290</a>)</p></li><li><p>
        Removed logger autodetection altogether, must now specify logger
        explicitly if you want to use a logger other than one that logs
        to STDERR.
       (<a href="http://bugs.mysql.com/21207" target="_top">Bug#21207</a>)</p></li><li><p>
        DDriver throws NPE when tracing prepared statements that have
        been closed (in asSQL()).
       (<a href="http://bugs.mysql.com/21207" target="_top">Bug#21207</a>)</p></li><li><p>
        ResultSet.getSomeInteger() doesn't work for BIT(&gt;1).
       (<a href="http://bugs.mysql.com/21062" target="_top">Bug#21062</a>)</p></li><li><p>
        Escape of quotes in client-side prepared statements parsing not
        respected. Patch covers more than bug report, including
        NO_BACKSLASH_ESCAPES being set, and stacked quote characters
        forms of escaping (that is, '' or "").
       (<a href="http://bugs.mysql.com/20888" target="_top">Bug#20888</a>)</p></li><li><p>
        Fixed can't pool server-side prepared statements, exception
        raised when re-using them.
       (<a href="http://bugs.mysql.com/20687" target="_top">Bug#20687</a>)</p></li><li><p>
        Fixed Updatable result set that contains a BIT column fails when
        server-side prepared statements are used.
       (<a href="http://bugs.mysql.com/20485" target="_top">Bug#20485</a>)</p></li><li><p>
        Fixed updatable result set throws ClassCastException when there
        is row data and moveToInsertRow() is called.
       (<a href="http://bugs.mysql.com/20479" target="_top">Bug#20479</a>)</p></li><li><p>
        Fixed ResultSet.getShort() for UNSIGNED TINYINT returns
        incorrect values when using server-side prepared statements.
       (<a href="http://bugs.mysql.com/20306" target="_top">Bug#20306</a>)</p></li><li><p>
        ReplicationDriver does not always round-robin load balance
        depending on URL used for slaves list.
       (<a href="http://bugs.mysql.com/19993" target="_top">Bug#19993</a>)</p></li><li><p>
        Fixed calling toString() on ResultSetMetaData for
        driver-generated (that is, from DatabaseMetaData method calls,
        or from getGeneratedKeys()) result sets would raise a
        NullPointerException.
       (<a href="http://bugs.mysql.com/19993" target="_top">Bug#19993</a>)</p></li><li><p>
        Connection fails to localhost when using timeout and IPv6 is
        configured.
       (<a href="http://bugs.mysql.com/19726" target="_top">Bug#19726</a>)</p></li><li><p>
        ResultSet.getFloatFromString() can't retrieve values near
        Float.MIN/MAX_VALUE.
       (<a href="http://bugs.mysql.com/18880" target="_top">Bug#18880</a>)</p></li><li><p>
        Fixed memory leak with profileSQL=true.
       (<a href="http://bugs.mysql.com/16987" target="_top">Bug#16987</a>)</p></li><li><p>
        Fixed NullPointerException in MysqlDataSourceFactory due to
        Reference containing RefAddrs with null content.
       (<a href="http://bugs.mysql.com/16791" target="_top">Bug#16791</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-13"></a>C.5.3.3. Changes in  MySQL Connector/J 3.1.13 (26 May 2006)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">Fixed PreparedStatement.setObject(int, Object,
        int)</code> doesn't respect scale of BigDecimals.
       (<a href="http://bugs.mysql.com/19615" target="_top">Bug#19615</a>)</p></li><li><p>
        Fixed <code class="literal">ResultSet.wasNull()</code> returns incorrect
        value when extracting native string from server-side prepared
        statement generated result set.
       (<a href="http://bugs.mysql.com/19282" target="_top">Bug#19282</a>)</p></li><li><p>
        Fixed invalid classname returned for
        <code class="literal">ResultSetMetaData.getColumnClassName()</code> for
        <code class="literal">BIGINT type</code>.
       (<a href="http://bugs.mysql.com/19282" target="_top">Bug#19282</a>)</p></li><li><p>
        Fixed case where driver wasn't reading server status correctly
        when fetching server-side prepared statement rows, which in some
        cases could cause warning counts to be off, or multiple result
        sets to not be read off the wire.
       (<a href="http://bugs.mysql.com/19282" target="_top">Bug#19282</a>)</p></li><li><p>
        Fixed data truncation and <code class="literal">getWarnings()</code> only
        returns last warning in set.
       (<a href="http://bugs.mysql.com/18740" target="_top">Bug#18740</a>)</p></li><li><p>
        Fixed aliased column names where length of name &gt; 251 are
        corrupted.
       (<a href="http://bugs.mysql.com/18554" target="_top">Bug#18554</a>)</p></li><li><p>
        Improved performance of retrieving
        <code class="literal">BigDecimal</code>, <code class="literal">Time</code>,
        <code class="literal">Timestamp</code> and <code class="literal">Date</code> values
        from server-side prepared statements by creating fewer
        short-lived instances of <code class="literal">Strings</code> when the
        native type is not an exact match for the requested type.
       (<a href="http://bugs.mysql.com/18496" target="_top">Bug#18496</a>)</p></li><li><p>
        Added performance feature, re-writing of batched executes for
        <code class="literal">Statement.executeBatch()</code> (for all DML
        statements) and
        <code class="literal">PreparedStatement.executeBatch()</code> (for INSERTs
        with VALUE clauses only). Enable by using
        "rewriteBatchedStatements=true" in your JDBC URL.
       (<a href="http://bugs.mysql.com/18041" target="_top">Bug#18041</a>)</p></li><li><p>
        Fixed issue where server-side prepared statements don't cause
        truncation exceptions to be thrown when truncation happens.
       (<a href="http://bugs.mysql.com/18041" target="_top">Bug#18041</a>)</p></li><li><p>
        Fixed
        <code class="literal">CallableStatement.registerOutParameter()</code> not
        working when some parameters pre-populated. Still waiting for
        feedback from JDBC experts group to determine what correct
        parameter count from <code class="literal">getMetaData()</code> should be,
        however.
       (<a href="http://bugs.mysql.com/17898" target="_top">Bug#17898</a>)</p></li><li><p>
        Fixed calling <code class="literal">clearParameters()</code> on a closed
        prepared statement causes NPE.
       (<a href="http://bugs.mysql.com/17587" target="_top">Bug#17587</a>)</p></li><li><p>
        Map "latin1" on MySQL server to CP1252 for MySQL &gt;
        4.1.0.
       (<a href="http://bugs.mysql.com/17587" target="_top">Bug#17587</a>)</p></li><li><p>
        Added additional accessor and mutator methods on
        ConnectionProperties so that DataSource users can use same
        naming as regular URL properties.
       (<a href="http://bugs.mysql.com/17587" target="_top">Bug#17587</a>)</p></li><li><p>
        Fixed <code class="literal">ResultSet.wasNull()</code> not always reset
        correctly for booleans when done via conversion for server-side
        prepared statements.
       (<a href="http://bugs.mysql.com/17450" target="_top">Bug#17450</a>)</p></li><li><p>
        Fixed <code class="literal">Statement.getGeneratedKeys()</code> throws
        <code class="literal">NullPointerException</code> when no query has been
        processed.
       (<a href="http://bugs.mysql.com/17099" target="_top">Bug#17099</a>)</p></li><li><p>
        Fixed updatable result set doesn't return
        <code class="literal">AUTO_INCREMENT</code> values for
        <code class="literal">insertRow()</code> when multiple column primary keys
        are used. (the driver was checking for the existence of
        single-column primary keys and an autoincrement value &gt; 0
        instead of a straightforward
        <code class="literal">isAutoIncrement()</code> check).
       (<a href="http://bugs.mysql.com/16841" target="_top">Bug#16841</a>)</p></li><li><p>
        <code class="literal">DBMD.getColumns()</code> returns wrong type for
        <code class="literal">BIT</code>.
       (<a href="http://bugs.mysql.com/15854" target="_top">Bug#15854</a>)</p></li><li><p>
        <code class="filename">lib-nodist</code> directory missing from package
        breaks out-of-box build.
       (<a href="http://bugs.mysql.com/15676" target="_top">Bug#15676</a>)</p></li><li><p>
        Fixed issue with <code class="literal">ReplicationConnection</code>
        incorrectly copying state, doesn't transfer connection context
        correctly when transitioning between the same read-only states.
       (<a href="http://bugs.mysql.com/15570" target="_top">Bug#15570</a>)</p></li><li><p>
        No "dos" character set in MySQL &gt; 4.1.0.
       (<a href="http://bugs.mysql.com/15544" target="_top">Bug#15544</a>)</p></li><li><p>
        <code class="literal">INOUT</code> parameter does not store
        <code class="literal">IN</code> value.
       (<a href="http://bugs.mysql.com/15464" target="_top">Bug#15464</a>)</p></li><li><p>
        <code class="literal">PreparedStatement.setObject()</code> serializes
        <code class="literal">BigInteger</code> as object, rather than sending as
        numeric value (and is thus not complementary to
        <code class="literal">.getObject()</code> on an <code class="literal">UNSIGNED
        LONG</code> type).
       (<a href="http://bugs.mysql.com/15383" target="_top">Bug#15383</a>)</p></li><li><p>
        Fixed issue where driver was unable to initialize character set
        mapping tables. Removed reliance on
        <code class="literal">.properties</code> files to hold this information,
        as it turns out to be too problematic to code around class
        loader hierarchies that change depending on how an application
        is deployed. Moved information back into the
        <code class="literal">CharsetMapping</code> class.
       (<a href="http://bugs.mysql.com/14938" target="_top">Bug#14938</a>)</p></li><li><p>
        Exception thrown for new decimal type when using updatable
        result sets.
       (<a href="http://bugs.mysql.com/14609" target="_top">Bug#14609</a>)</p></li><li><p>
        Driver now aware of fix for <code class="literal">BIT</code> type metadata
        that went into MySQL-5.0.21 for server not reporting length
        consistently .
       (<a href="http://bugs.mysql.com/13601" target="_top">Bug#13601</a>)</p></li><li><p>
        Added support for Apache Commons logging, use
        "com.mysql.jdbc.log.CommonsLogger" as the value for
        the "logger" configuration property.
       (<a href="http://bugs.mysql.com/13469" target="_top">Bug#13469</a>)</p></li><li><p>
        Fixed driver trying to call methods that don't exist on older
        and newer versions of Log4j. The fix is not trying to
        auto-detect presence of log4j, too many different incompatible
        versions out there in the wild to do this reliably.
      </p><p>
        If you relied on autodetection before, you will need to add
        "logger=com.mysql.jdbc.log.Log4JLogger" to your JDBC
        URL to enable Log4J usage, or alternatively use the new
        "CommonsLogger" class to take care of this.
       (<a href="http://bugs.mysql.com/13469" target="_top">Bug#13469</a>)</p></li><li><p>
        LogFactory now prepends "com.mysql.jdbc.log" to log
        class name if it can't be found as-specified. This allows you to
        use "short names" for the built-in log factories, for
        example "logger=CommonsLogger" instead of
        "logger=com.mysql.jdbc.log.CommonsLogger".
       (<a href="http://bugs.mysql.com/13469" target="_top">Bug#13469</a>)</p></li><li><p>
        <code class="literal">ResultSet.getShort()</code> for <code class="literal">UNSIGNED
        TINYINT</code> returned wrong values.
       (<a href="http://bugs.mysql.com/11874" target="_top">Bug#11874</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-12"></a>C.5.3.4. Changes in  MySQL Connector/J 3.1.12 (30 November 2005)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Process escape tokens in
        <code class="literal">Connection.prepareStatement(...)</code>. You can
        disable this behavior by setting the JDBC URL configuration
        property <code class="literal">processEscapeCodesForPrepStmts</code> to
        <code class="literal">false</code>.
       (<a href="http://bugs.mysql.com/15141" target="_top">Bug#15141</a>)</p></li><li><p>
        Usage advisor complains about unreferenced columns, even though
        they've been referenced.
       (<a href="http://bugs.mysql.com/15065" target="_top">Bug#15065</a>)</p></li><li><p>
        Driver incorrectly closes streams passed as arguments to
        <code class="literal">PreparedStatements</code>. Reverts to legacy
        behavior by setting the JDBC configuration property
        <code class="literal">autoClosePStmtStreams</code> to
        <code class="literal">true</code> (also included in the 3-0-Compat
        configuration “<span class="quote">bundle</span>”).
       (<a href="http://bugs.mysql.com/15024" target="_top">Bug#15024</a>)</p></li><li><p>
        Deadlock while closing server-side prepared statements from
        multiple threads sharing one connection.
       (<a href="http://bugs.mysql.com/14972" target="_top">Bug#14972</a>)</p></li><li><p>
        Unable to initialize character set mapping tables (due to J2EE
        classloader differences).
       (<a href="http://bugs.mysql.com/14938" target="_top">Bug#14938</a>)</p></li><li><p>
        Escape processor replaces quote character in quoted string with
        string delimiter.
       (<a href="http://bugs.mysql.com/14909" target="_top">Bug#14909</a>)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getColumns()</code> doesn't return
        <code class="literal">TABLE_NAME</code> correctly.
       (<a href="http://bugs.mysql.com/14815" target="_top">Bug#14815</a>)</p></li><li><p>
        <code class="literal">storesMixedCaseIdentifiers()</code> returns
        <code class="literal">false</code>
       (<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)</p></li><li><p>
        <code class="literal">storesLowerCaseIdentifiers()</code> returns
        <code class="literal">true</code>
       (<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)</p></li><li><p>
        <code class="literal">storesMixedCaseQuotedIdentifiers()</code> returns
        <code class="literal">false</code>
       (<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)</p></li><li><p>
        <code class="literal">storesMixedCaseQuotedIdentifiers()</code> returns
        <code class="literal">true</code>
       (<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)</p></li><li><p>
        If <code class="literal">lower_case_table_names=0</code> (on server):
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">storesLowerCaseIdentifiers()</code> returns
            <code class="literal">false</code>
          </p></li><li><p>
            <code class="literal">storesLowerCaseQuotedIdentifiers()</code>
            returns <code class="literal">false</code>
          </p></li><li><p>
            <code class="literal">storesMixedCaseIdentifiers()</code> returns
            <code class="literal">true</code>
          </p></li><li><p>
            <code class="literal">storesMixedCaseQuotedIdentifiers()</code>
            returns <code class="literal">true</code>
          </p></li><li><p>
            <code class="literal">storesUpperCaseIdentifiers()</code> returns
            <code class="literal">false</code>
          </p></li><li><p>
            <code class="literal">storesUpperCaseQuotedIdentifiers()</code>
            returns <code class="literal">true</code>
          </p></li></ul></div><p>(<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)</p></li><li><p>
        <code class="literal">storesUpperCaseIdentifiers()</code> returns
        <code class="literal">false</code>
       (<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)</p></li><li><p>
        <code class="literal">storesUpperCaseQuotedIdentifiers()</code> returns
        <code class="literal">true</code>
       (<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)</p></li><li><p>
        If <code class="literal">lower_case_table_names=1</code> (on server):
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">storesLowerCaseIdentifiers()</code> returns
            <code class="literal">true</code>
          </p></li><li><p>
            <code class="literal">storesLowerCaseQuotedIdentifiers()</code>
            returns <code class="literal">true</code>
          </p></li><li><p>
            <code class="literal">storesMixedCaseIdentifiers()</code> returns
            <code class="literal">false</code>
          </p></li><li><p>
            <code class="literal">storesMixedCaseQuotedIdentifiers()</code>
            returns <code class="literal">false</code>
          </p></li><li><p>
            <code class="literal">storesUpperCaseIdentifiers()</code> returns
            <code class="literal">false</code>
          </p></li><li><p>
            <code class="literal">storesUpperCaseQuotedIdentifiers()</code>
            returns <code class="literal">true</code>
          </p></li></ul></div><p>(<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)</p></li><li><p>
        <code class="literal">storesLowerCaseQuotedIdentifiers()</code> returns
        <code class="literal">true</code>
       (<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)</p></li><li><p>
        Fixed <code class="literal">DatabaseMetaData.stores*Identifiers()</code>:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            If <code class="literal">lower_case_table_names=0</code> (on server):
          </p><div class="itemizedlist"><ul type="square"><li><p>
                <code class="literal">storesLowerCaseIdentifiers()</code> returns
                <code class="literal">false</code>
              </p></li><li><p>
                <code class="literal">storesLowerCaseQuotedIdentifiers()</code>
                returns <code class="literal">false</code>
              </p></li><li><p>
                <code class="literal">storesMixedCaseIdentifiers()</code> returns
                <code class="literal">true</code>
              </p></li><li><p>
                <code class="literal">storesMixedCaseQuotedIdentifiers()</code>
                returns <code class="literal">true</code>
              </p></li><li><p>
                <code class="literal">storesUpperCaseIdentifiers()</code> returns
                <code class="literal">false</code>
              </p></li><li><p>
                <code class="literal">storesUpperCaseQuotedIdentifiers()</code>
                returns <code class="literal">true</code>
              </p></li></ul></div></li><li><p>
            If <code class="literal">lower_case_table_names=1</code> (on server):
          </p><div class="itemizedlist"><ul type="square"><li><p>
                <code class="literal">storesLowerCaseIdentifiers()</code> returns
                <code class="literal">true</code>
              </p></li><li><p>
                <code class="literal">storesLowerCaseQuotedIdentifiers()</code>
                returns <code class="literal">true</code>
              </p></li><li><p>
                <code class="literal">storesMixedCaseIdentifiers()</code> returns
                <code class="literal">false</code>
              </p></li><li><p>
                <code class="literal">storesMixedCaseQuotedIdentifiers()</code>
                returns <code class="literal">false</code>
              </p></li><li><p>
                <code class="literal">storesUpperCaseIdentifiers()</code> returns
                <code class="literal">false</code>
              </p></li><li><p>
                <code class="literal">storesUpperCaseQuotedIdentifiers()</code>
                returns <code class="literal">true</code>
              </p></li></ul></div></li></ul></div><p>(<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)</p></li><li><p>
        <code class="literal">storesMixedCaseIdentifiers()</code> returns
        <code class="literal">true</code>
       (<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)</p></li><li><p>
        <code class="literal">storesLowerCaseQuotedIdentifiers()</code> returns
        <code class="literal">false</code>
       (<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)</p></li><li><p>
        Java type conversion may be incorrect for
        <code class="literal">MEDIUMINT</code>.
       (<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)</p></li><li><p>
        <code class="literal">storesLowerCaseIdentifiers()</code> returns
        <code class="literal">false</code>
       (<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)</p></li><li><p>
        Added configuration property
        <code class="literal">useGmtMillisForDatetimes</code> which when set to
        <code class="literal">true</code> causes
        <code class="literal">ResultSet.getDate()</code>,
        <code class="literal">.getTimestamp()</code> to return correct
        millis-since GMT when <code class="literal">.getTime()</code> is called on
        the return value (currently default is <code class="literal">false</code>
        for legacy behavior).
       (<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)</p></li><li><p>
        Extraneous sleep on <code class="literal">autoReconnect</code>.
       (<a href="http://bugs.mysql.com/13775" target="_top">Bug#13775</a>)</p></li><li><p>
        Reconnect during middle of <code class="literal">executeBatch()</code>
        should not occur if <code class="literal">autoReconnect</code> is enabled.
       (<a href="http://bugs.mysql.com/13255" target="_top">Bug#13255</a>)</p></li><li><p>
        <code class="literal">maxQuerySizeToLog</code> is not respected. Added
        logging of bound values for <code class="literal">execute()</code> phase
        of server-side prepared statements when
        <code class="literal">profileSQL=true</code> as well.
       (<a href="http://bugs.mysql.com/13048" target="_top">Bug#13048</a>)</p></li><li><p>
        OpenOffice expects
        <code class="literal">DBMD.supportsIntegrityEnhancementFacility()</code>
        to return <code class="literal">true</code> if foreign keys are supported
        by the datasource, even though this method also covers support
        for check constraints, which MySQL <span class="emphasis"><em>doesn't</em></span>
        have. Setting the configuration property
        <code class="literal">overrideSupportsIntegrityEnhancementFacility</code>
        to <code class="literal">true</code> causes the driver to return
        <code class="literal">true</code> for this method.
       (<a href="http://bugs.mysql.com/12975" target="_top">Bug#12975</a>)</p></li><li><p>
        Added <code class="literal">com.mysql.jdbc.testsuite.url.default</code>
        system property to set default JDBC url for testsuite (to speed
        up bug resolution when I'm working in Eclipse).
       (<a href="http://bugs.mysql.com/12975" target="_top">Bug#12975</a>)</p></li><li><p>
        <code class="literal">logSlowQueries</code> should give better info.
       (<a href="http://bugs.mysql.com/12230" target="_top">Bug#12230</a>)</p></li><li><p>
        Don't increase timeout for failover/reconnect.
       (<a href="http://bugs.mysql.com/6577" target="_top">Bug#6577</a>)</p></li><li><p>
        Fixed client-side prepared statement bug with embedded
        <code class="literal">?</code> characters inside quoted identifiers (it
        was recognized as a placeholder, when it was not).
      </p></li><li><p>
        Don't allow <code class="literal">executeBatch()</code> for
        <code class="literal">CallableStatements</code> with registered
        <code class="literal">OUT</code>/<code class="literal">INOUT</code> parameters (JDBC
        compliance).
      </p></li><li><p>
        Fall back to platform-encoding for
        <code class="literal">URLDecoder.decode()</code> when parsing driver URL
        properties if the platform doesn't have a two-argument version
        of this method.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-11"></a>C.5.3.5. Changes in  MySQL Connector/J 3.1.11 (07 October 2005)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        The configuration property <code class="literal">sessionVariables</code>
        now allows you to specify variables that start with the
        “<span class="quote"><code class="literal">@</code></span>” sign.
       (<a href="http://bugs.mysql.com/13453" target="_top">Bug#13453</a>)</p></li><li><p>
        URL configuration parameters don't allow
        “<span class="quote"><code class="literal">&amp;</code></span>” or
        “<span class="quote"><code class="literal">=</code></span>” in their values. The JDBC
        driver now parses configuration parameters as if they are
        encoded using the application/x-www-form-urlencoded format as
        specified by <code class="literal">java.net.URLDecoder</code>
        (<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/net/URLDecoder.html" target="_top">http://java.sun.com/j2se/1.5.0/docs/api/java/net/URLDecoder.html</a>).
      </p><p>
        If the “<span class="quote"><code class="literal">%</code></span>” character is present
        in a configuration property, it must now be represented as
        <code class="literal">%25</code>, which is the encoded form of
        “<span class="quote"><code class="literal">%</code></span>” when using
        application/x-www-form-urlencoded encoding.
       (<a href="http://bugs.mysql.com/13453" target="_top">Bug#13453</a>)</p></li><li><p>
        Workaround for <a href="http://bugs.mysql.com/13374" target="_top">Bug#13374</a>:
        <code class="literal">ResultSet.getStatement()</code> on closed result set
        returns <code class="literal">NULL</code> (as per JDBC 4.0 spec, but not
        backward-compatible). Set the connection property
        <code class="literal">retainStatementAfterResultSetClose</code> to
        <code class="literal">true</code> to be able to retrieve a
        <code class="literal">ResultSet</code>'s statement after the
        <code class="literal">ResultSet</code> has been closed via
        <code class="literal">.getStatement()</code> (the default is
        <code class="literal">false</code>, to be JDBC-compliant and to reduce the
        chance that code using JDBC leaks <code class="literal">Statement</code>
        instances).
       (<a href="http://bugs.mysql.com/13277" target="_top">Bug#13277</a>)</p></li><li><p>
        <code class="literal">ResultSetMetaData</code> from
        <code class="literal">Statement.getGeneratedKeys()</code> caused a
        <code class="literal">NullPointerException</code> to be thrown whenever a
        method that required a connection reference was called.
       (<a href="http://bugs.mysql.com/13277" target="_top">Bug#13277</a>)</p></li><li><p>
        Backport of <code class="literal">VAR[BINARY|CHAR] [BINARY]</code> types
        detection from 5.0 branch.
       (<a href="http://bugs.mysql.com/13277" target="_top">Bug#13277</a>)</p></li><li><p>
        Fixed <code class="literal">NullPointerException</code> when converting
        <code class="literal">catalog</code> parameter in many
        <code class="literal">DatabaseMetaDataMethods</code> to
        <code class="literal">byte[]</code>s (for the result set) when the
        parameter is <code class="literal">null</code>. (<code class="literal">null</code>
        isn't technically allowed by the JDBC specification, but we've
        historically allowed it).
       (<a href="http://bugs.mysql.com/13277" target="_top">Bug#13277</a>)</p></li><li><p>
        Backport of <code class="literal">Field</code> class,
        <code class="literal">ResultSetMetaData.getColumnClassName()</code>, and
        <code class="literal">ResultSet.getObject(int)</code> changes from 5.0
        branch to fix behavior surrounding <code class="literal">VARCHAR
        BINARY</code>/<code class="literal">VARBINARY</code> and related types.
       (<a href="http://bugs.mysql.com/13277" target="_top">Bug#13277</a>)</p></li><li><p>
        Read response in <code class="literal">MysqlIO.sendFileToServer()</code>,
        even if the local file can't be opened, otherwise next query
        issued will fail, because it's reading the response to the empty
        <code class="literal">LOAD DATA INFILE</code> packet sent to the server.
       (<a href="http://bugs.mysql.com/13277" target="_top">Bug#13277</a>)</p></li><li><p>
        When <code class="literal">gatherPerfMetrics</code> is enabled for servers
        older than 4.1.0, a <code class="literal">NullPointerException</code> is
        thrown from the constructor of <code class="literal">ResultSet</code> if
        the query doesn't use any tables.
       (<a href="http://bugs.mysql.com/13043" target="_top">Bug#13043</a>)</p></li><li><p>
        <code class="literal">java.sql.Types.OTHER</code> returned for
        <code class="literal">BINARY</code> and <code class="literal">VARBINARY</code>
        columns when using
        <code class="literal">DatabaseMetaData.getColumns()</code>.
       (<a href="http://bugs.mysql.com/12970" target="_top">Bug#12970</a>)</p></li><li><p>
        <code class="literal">ServerPreparedStatement.getBinding()</code> now
        checks if the statement is closed before attempting to reference
        the list of parameter bindings, to avoid throwing a
        <code class="literal">NullPointerException</code>.
       (<a href="http://bugs.mysql.com/12970" target="_top">Bug#12970</a>)</p></li><li><p>
        Tokenizer for <code class="literal">=</code> in URL properties was causing
        <code class="literal">sessionVariables=....</code> to be parameterized
        incorrectly.
       (<a href="http://bugs.mysql.com/12753" target="_top">Bug#12753</a>)</p></li><li><p>
        <code class="literal">cp1251</code> incorrectly mapped to
        <code class="literal">win1251</code> for servers newer than 4.0.x.
       (<a href="http://bugs.mysql.com/12752" target="_top">Bug#12752</a>)</p></li><li><p>
        <code class="literal">getExportedKeys()</code>
       (<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)</p></li><li><p>
        Specifying a catalog works as stated in the API docs.
       (<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)</p></li><li><p>
        Specifying <code class="literal">NULL</code> means that catalog will not
        be used to filter the results (thus all databases will be
        searched), unless you've set
        <code class="literal">nullCatalogMeansCurrent=true</code> in your JDBC URL
        properties.
       (<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)</p></li><li><p>
        <code class="literal">getIndexInfo()</code>
       (<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)</p></li><li><p>
        <code class="literal">getProcedures()</code> (and thus indirectly
        <code class="literal">getProcedureColumns()</code>)
       (<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)</p></li><li><p>
        <code class="literal">getImportedKeys()</code>
       (<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)</p></li><li><p>
        Specifying <code class="literal">""</code> means
        “<span class="quote">current</span>” catalog, even though this isn't quite
        JDBC spec compliant, it's there for legacy users.
       (<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)</p></li><li><p>
        <code class="literal">getCrossReference()</code>
       (<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)</p></li><li><p>
        Added <code class="literal">Connection.isMasterConnection()</code> for
        clients to be able to determine if a multi-host master/slave
        connection is connected to the first host in the list.
       (<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)</p></li><li><p>
        <code class="literal">getColumns()</code>
       (<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)</p></li><li><p>
        Handling of catalog argument in
        <code class="literal">DatabaseMetaData.getIndexInfo()</code>, which also
        means changes to the following methods in
        <code class="literal">DatabaseMetaData</code>:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">getBestRowIdentifier()</code>
          </p></li><li><p>
            <code class="literal">getColumns()</code>
          </p></li><li><p>
            <code class="literal">getCrossReference()</code>
          </p></li><li><p>
            <code class="literal">getExportedKeys()</code>
          </p></li><li><p>
            <code class="literal">getImportedKeys()</code>
          </p></li><li><p>
            <code class="literal">getIndexInfo()</code>
          </p></li><li><p>
            <code class="literal">getPrimaryKeys()</code>
          </p></li><li><p>
            <code class="literal">getProcedures()</code> (and thus indirectly
            <code class="literal">getProcedureColumns()</code>)
          </p></li><li><p>
            <code class="literal">getTables()</code>
          </p></li></ul></div><p>
        The <code class="literal">catalog</code> argument in all of these methods
        now behaves in the following way:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            Specifying <code class="literal">NULL</code> means that catalog will
            not be used to filter the results (thus all databases will
            be searched), unless you've set
            <code class="literal">nullCatalogMeansCurrent=true</code> in your JDBC
            URL properties.
          </p></li><li><p>
            Specifying <code class="literal">""</code> means
            “<span class="quote">current</span>” catalog, even though this isn't quite
            JDBC spec compliant, it's there for legacy users.
          </p></li><li><p>
            Specifying a catalog works as stated in the API docs.
          </p></li><li><p>
            Made <code class="literal">Connection.clientPrepare()</code> available
            from “<span class="quote">wrapped</span>” connections in the
            <code class="literal">jdbc2.optional</code> package (connections built
            by <code class="literal">ConnectionPoolDataSource</code> instances).
          </p></li></ul></div><p>(<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)</p></li><li><p>
        <code class="literal">getBestRowIdentifier()</code>
       (<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)</p></li><li><p>
        Made <code class="literal">Connection.clientPrepare()</code> available
        from “<span class="quote">wrapped</span>” connections in the
        <code class="literal">jdbc2.optional</code> package (connections built by
        <code class="literal">ConnectionPoolDataSource</code> instances).
       (<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)</p></li><li><p>
        <code class="literal">getTables()</code>
       (<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)</p></li><li><p>
        <code class="literal">getPrimaryKeys()</code>
       (<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)</p></li><li><p>
        <code class="literal">Connection.prepareCall()</code> is database name
        case-sensitive (on Windows systems).
       (<a href="http://bugs.mysql.com/12417" target="_top">Bug#12417</a>)</p></li><li><p>
        <code class="literal">explainSlowQueries</code> hangs with server-side
        prepared statements.
       (<a href="http://bugs.mysql.com/12229" target="_top">Bug#12229</a>)</p></li><li><p>
        Properties shared between master and slave with replication
        connection.
       (<a href="http://bugs.mysql.com/12218" target="_top">Bug#12218</a>)</p></li><li><p>
        Geometry types not handled with server-side prepared statements.
       (<a href="http://bugs.mysql.com/12104" target="_top">Bug#12104</a>)</p></li><li><p>
        <code class="literal">maxPerformance.properties</code> mis-spells
        “<span class="quote">elideSetAutoCommits</span>”.
       (<a href="http://bugs.mysql.com/11976" target="_top">Bug#11976</a>)</p></li><li><p>
        <code class="literal">ReplicationConnection</code> won't switch to slave,
        throws “<span class="quote">Catalog can't be null</span>” exception.
       (<a href="http://bugs.mysql.com/11879" target="_top">Bug#11879</a>)</p></li><li><p>
        <code class="literal">Pstmt.setObject(...., Types.BOOLEAN)</code> throws
        exception.
       (<a href="http://bugs.mysql.com/11798" target="_top">Bug#11798</a>)</p></li><li><p>
        Escape tokenizer doesn't respect stacked single quotes for
        escapes.
       (<a href="http://bugs.mysql.com/11797" target="_top">Bug#11797</a>)</p></li><li><p>
        <code class="literal">GEOMETRY</code> type not recognized when using
        server-side prepared statements.
       (<a href="http://bugs.mysql.com/11797" target="_top">Bug#11797</a>)</p></li><li><p>
        Foreign key information that is quoted is parsed incorrectly
        when <code class="literal">DatabaseMetaData</code> methods use that
        information.
       (<a href="http://bugs.mysql.com/11781" target="_top">Bug#11781</a>)</p></li><li><p>
        The <code class="literal">sendBlobChunkSize</code> property is now clamped
        to <code class="literal">max_allowed_packet</code> with consideration of
        stream buffer size and packet headers to avoid
        <code class="literal">PacketTooBigExceptions</code> when
        <code class="literal">max_allowed_packet</code> is similar in size to the
        default <code class="literal">sendBlobChunkSize</code> which is 1M.
       (<a href="http://bugs.mysql.com/11781" target="_top">Bug#11781</a>)</p></li><li><p>
        <code class="literal">CallableStatement.clearParameters()</code> now
        clears resources associated with
        <code class="literal">INOUT</code>/<code class="literal">OUTPUT</code> parameters as
        well as <code class="literal">INPUT</code> parameters.
       (<a href="http://bugs.mysql.com/11781" target="_top">Bug#11781</a>)</p></li><li><p>
        Fixed regression caused by fix for <a href="http://bugs.mysql.com/11552" target="_top">Bug#11552</a> that caused driver
        to return incorrect values for unsigned integers when those
        integers where within the range of the positive signed type.
       (<a href="http://bugs.mysql.com/11663" target="_top">Bug#11663</a>)</p></li><li><p>
        Moved source code to Subversion repository.
       (<a href="http://bugs.mysql.com/11663" target="_top">Bug#11663</a>)</p></li><li><p>
        Incorrect generation of testcase scripts for server-side
        prepared statements.
       (<a href="http://bugs.mysql.com/11663" target="_top">Bug#11663</a>)</p></li><li><p>
        Fixed statements generated for testcases missing
        <code class="literal">;</code> for “<span class="quote">plain</span>” statements.
       (<a href="http://bugs.mysql.com/11629" target="_top">Bug#11629</a>)</p></li><li><p>
        Spurious <code class="literal">!</code> on console when character encoding
        is <code class="literal">utf8</code>.
       (<a href="http://bugs.mysql.com/11629" target="_top">Bug#11629</a>)</p></li><li><p>
        <code class="literal">StringUtils.getBytes()</code> doesn't work when
        using multi-byte character encodings and a length in
        <span class="emphasis"><em>characters</em></span> is specified.
       (<a href="http://bugs.mysql.com/11614" target="_top">Bug#11614</a>)</p></li><li><p>
        <code class="literal">DBMD.storesLower/Mixed/UpperIdentifiers()</code>
        reports incorrect values for servers deployed on Windows.
       (<a href="http://bugs.mysql.com/11575" target="_top">Bug#11575</a>)</p></li><li><p>
        Reworked <code class="literal">Field</code> class,
        <code class="literal">*Buffer</code>, and <code class="literal">MysqlIO</code> to be
        aware of field lengths &gt;
        <code class="literal">Integer.MAX_VALUE</code>.
       (<a href="http://bugs.mysql.com/11498" target="_top">Bug#11498</a>)</p></li><li><p>
        Escape processor didn't honor strings demarcated with double
        quotes.
       (<a href="http://bugs.mysql.com/11498" target="_top">Bug#11498</a>)</p></li><li><p>
        Updated <code class="literal">DBMD.supportsCorrelatedQueries()</code> to
        return <code class="literal">true</code> for versions &gt; 4.1,
        <code class="literal">supportsGroupByUnrelated()</code> to return
        <code class="literal">true</code> and
        <code class="literal">getResultSetHoldability()</code> to return
        <code class="literal">HOLD_CURSORS_OVER_COMMIT</code>.
       (<a href="http://bugs.mysql.com/11498" target="_top">Bug#11498</a>)</p></li><li><p>
        Lifted restriction of changing streaming parameters with
        server-side prepared statements. As long as
        <code class="literal">all</code> streaming parameters were set before
        execution, <code class="literal">.clearParameters()</code> does not have
        to be called. (due to limitation of client/server protocol,
        prepared statements can not reset
        <span class="emphasis"><em>individual</em></span> stream data on the server side).
       (<a href="http://bugs.mysql.com/11498" target="_top">Bug#11498</a>)</p></li><li><p>
        <code class="literal">ResultSet.moveToCurrentRow()</code> fails to work
        when preceded by a call to
        <code class="literal">ResultSet.moveToInsertRow()</code>.
       (<a href="http://bugs.mysql.com/11190" target="_top">Bug#11190</a>)</p></li><li><p>
        <code class="literal">VARBINARY</code> data corrupted when using
        server-side prepared statements and
        <code class="literal">.setBytes()</code>.
       (<a href="http://bugs.mysql.com/11115" target="_top">Bug#11115</a>)</p></li><li><p>
        <code class="literal">Statement.getWarnings()</code> fails with NPE if
        statement has been closed.
       (<a href="http://bugs.mysql.com/10630" target="_top">Bug#10630</a>)</p></li><li><p>
        Only get <code class="literal">char[]</code> from SQL in
        <code class="literal">PreparedStatement.ParseInfo()</code> when needed.
       (<a href="http://bugs.mysql.com/10630" target="_top">Bug#10630</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-10"></a>C.5.3.6. Changes in  MySQL Connector/J 3.1.10 (23 June 2005)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Initial implemention of <code class="literal">ParameterMetadata</code> for
        <code class="literal">PreparedStatement.getParameterMetadata()</code>.
        Only works fully for <code class="literal">CallableStatements</code>, as
        current server-side prepared statements return every parameter
        as a <code class="literal">VARCHAR</code> type.
      </p></li><li><p>
        Fixed connecting without a database specified raised an
        exception in <code class="literal">MysqlIO.changeDatabaseTo()</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-9"></a>C.5.3.7. Changes in  MySQL Connector/J 3.1.9 (22 June 2005)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Production package doesn't include JBoss integration classes.
       (<a href="http://bugs.mysql.com/11411" target="_top">Bug#11411</a>)</p></li><li><p>
        Removed nonsensical “<span class="quote">costly type conversion</span>”
        warnings when using usage advisor.
       (<a href="http://bugs.mysql.com/11411" target="_top">Bug#11411</a>)</p></li><li><p>
        Fixed <code class="literal">PreparedStatement.setClob()</code> not
        accepting <code class="literal">null</code> as a parameter.
       (<a href="http://bugs.mysql.com/11360" target="_top">Bug#11360</a>)</p></li><li><p>
        Connector/J dumping query into <code class="literal">SQLException</code>
        twice.
       (<a href="http://bugs.mysql.com/11360" target="_top">Bug#11360</a>)</p></li><li><p>
        <code class="literal">autoReconnect</code> ping causes exception on
        connection startup.
       (<a href="http://bugs.mysql.com/11259" target="_top">Bug#11259</a>)</p></li><li><p>
        <code class="literal">Connection.setCatalog()</code> is now aware of the
        <code class="literal">useLocalSessionState</code> configuration property,
        which when set to <code class="literal">true</code> will prevent the
        driver from sending <code class="literal">USE ...</code> to the server if
        the requested catalog is the same as the current catalog.
       (<a href="http://bugs.mysql.com/11115" target="_top">Bug#11115</a>)</p></li><li><p>
        <code class="literal">3-0-Compat</code> — Compatibility with
        Connector/J 3.0.x functionality
       (<a href="http://bugs.mysql.com/11115" target="_top">Bug#11115</a>)</p></li><li><p>
        <code class="literal">maxPerformance</code> — maximum performance
        without being reckless
       (<a href="http://bugs.mysql.com/11115" target="_top">Bug#11115</a>)</p></li><li><p>
        <code class="literal">solarisMaxPerformance</code> — maximum
        performance for Solaris, avoids syscalls where it can
       (<a href="http://bugs.mysql.com/11115" target="_top">Bug#11115</a>)</p></li><li><p>
        Added <code class="literal">maintainTimeStats</code> configuration
        property (defaults to <code class="literal">true</code>), which tells the
        driver whether or not to keep track of the last query time and
        the last successful packet sent to the server's time. If set to
        <code class="literal">false</code>, removes two syscalls per query.
       (<a href="http://bugs.mysql.com/11115" target="_top">Bug#11115</a>)</p></li><li><p>
        <code class="literal">VARBINARY</code> data corrupted when using
        server-side prepared statements and
        <code class="literal">ResultSet.getBytes()</code>.
       (<a href="http://bugs.mysql.com/11115" target="_top">Bug#11115</a>)</p></li><li><p>
        Added the following configuration bundles, use one or many via
        the <code class="literal">useConfigs</code> configuration property:
      </p><div class="itemizedlist"><ul type="circle"><li><p>
            <code class="literal">maxPerformance</code> — maximum
            performance without being reckless
          </p></li><li><p>
            <code class="literal">solarisMaxPerformance</code> — maximum
            performance for Solaris, avoids syscalls where it can
          </p></li><li><p>
            <code class="literal">3-0-Compat</code> — Compatibility with
            Connector/J 3.0.x functionality
          </p></li></ul></div><p>(<a href="http://bugs.mysql.com/11115" target="_top">Bug#11115</a>)</p></li><li><p>
        Try to handle <code class="literal">OutOfMemoryErrors</code> more
        gracefully. Although not much can be done, they will in most
        cases close the connection they happened on so that further
        operations don't run into a connection in some unknown state.
        When an OOM has happened, any further operations on the
        connection will fail with a “<span class="quote">Connection closed</span>”
        exception that will also list the OOM exception as the reason
        for the implicit connection close event.
       (<a href="http://bugs.mysql.com/10850" target="_top">Bug#10850</a>)</p></li><li><p>
        Setting <code class="literal">cachePrepStmts=true</code> now causes the
        <code class="literal">Connection</code> to also cache the check the driver
        performs to determine if a prepared statement can be server-side
        or not, as well as caches server-side prepared statements for
        the lifetime of a connection. As before, the
        <code class="literal">prepStmtCacheSize</code> parameter controls the size
        of these caches.
       (<a href="http://bugs.mysql.com/10850" target="_top">Bug#10850</a>)</p></li><li><p>
        Don't send <code class="literal">COM_RESET_STMT</code> for each execution
        of a server-side prepared statement if it isn't required.
       (<a href="http://bugs.mysql.com/10850" target="_top">Bug#10850</a>)</p></li><li><p>
        0-length streams not sent to server when using server-side
        prepared statements.
       (<a href="http://bugs.mysql.com/10850" target="_top">Bug#10850</a>)</p></li><li><p>
        Driver detects if you're running MySQL-5.0.7 or later, and does
        not scan for <code class="literal">LIMIT ?[,?]</code> in statements being
        prepared, as the server supports those types of queries now.
       (<a href="http://bugs.mysql.com/10850" target="_top">Bug#10850</a>)</p></li><li><p>
        Reorganized directory layout. Sources now are in
        <code class="filename">src</code> folder. Don't pollute parent directory
        when building, now output goes to <code class="filename">./build</code>,
        distribution goes to <code class="filename">./dist</code>.
       (<a href="http://bugs.mysql.com/10496" target="_top">Bug#10496</a>)</p></li><li><p>
        Added support/bug hunting feature that generates
        <code class="filename">.sql</code> test scripts to
        <code class="literal">STDERR</code> when
        <code class="literal">autoGenerateTestcaseScript</code> is set to
        <code class="literal">true</code>.
       (<a href="http://bugs.mysql.com/10496" target="_top">Bug#10496</a>)</p></li><li><p>
        <code class="literal">SQLException</code> is thrown when using property
        <code class="literal">characterSetResults</code> with
        <code class="literal">cp932</code> or <code class="literal">eucjpms</code>.
       (<a href="http://bugs.mysql.com/10496" target="_top">Bug#10496</a>)</p></li><li><p>
        The datatype returned for <code class="literal">TINYINT(1)</code> columns
        when <code class="literal">tinyInt1isBit=true</code> (the default) can be
        switched between <code class="literal">Types.BOOLEAN</code> and
        <code class="literal">Types.BIT</code> using the new configuration
        property <code class="literal">transformedBitIsBoolean</code>, which
        defaults to <code class="literal">false</code>. If set to
        <code class="literal">false</code> (the default),
        <code class="literal">DatabaseMetaData.getColumns()</code> and
        <code class="literal">ResultSetMetaData.getColumnType()</code> will return
        <code class="literal">Types.BOOLEAN</code> for
        <code class="literal">TINYINT(1)</code> columns. If
        <code class="literal">true</code>, <code class="literal">Types.BOOLEAN</code> will
        be returned instead. Regardless of this configuration property,
        if <code class="literal">tinyInt1isBit</code> is enabled, columns with the
        type <code class="literal">TINYINT(1)</code> will be returned as
        <code class="literal">java.lang.Boolean</code> instances from
        <code class="literal">ResultSet.getObject(...)</code>, and
        <code class="literal">ResultSetMetaData.getColumnClassName()</code> will
        return <code class="literal">java.lang.Boolean</code>.
       (<a href="http://bugs.mysql.com/10485" target="_top">Bug#10485</a>)</p></li><li><p>
        <code class="literal">SQLException</code> thrown when retrieving
        <code class="literal">YEAR(2)</code> with
        <code class="literal">ResultSet.getString()</code>. The driver will now
        always treat <code class="literal">YEAR</code> types as
        <code class="literal">java.sql.Dates</code> and return the correct values
        for <code class="literal">getString()</code>. Alternatively, the
        <code class="literal">yearIsDateType</code> connection property can be set
        to <code class="literal">false</code> and the values will be treated as
        <code class="literal">SHORT</code>s.
       (<a href="http://bugs.mysql.com/10485" target="_top">Bug#10485</a>)</p></li><li><p>
        Driver doesn't support <code class="literal">{?=CALL(...)}</code> for
        calling stored functions. This involved adding support for
        function retrieval to
        <code class="literal">DatabaseMetaData.getProcedures()</code> and
        <code class="literal">getProcedureColumns()</code> as well.
       (<a href="http://bugs.mysql.com/10310" target="_top">Bug#10310</a>)</p></li><li><p>
        Unsigned <code class="literal">SMALLINT</code> treated as signed for
        <code class="literal">ResultSet.getInt()</code>, fixed all cases for
        <code class="literal">UNSIGNED</code> integer values and server-side
        prepared statements, as well as
        <code class="literal">ResultSet.getObject()</code> for <code class="literal">UNSIGNED
        TINYINT</code>.
       (<a href="http://bugs.mysql.com/10156" target="_top">Bug#10156</a>)</p></li><li><p>
        Made <code class="literal">ServerPreparedStatement.asSql()</code> work
        correctly so auto-explain functionality would work with
        server-side prepared statements.
       (<a href="http://bugs.mysql.com/10155" target="_top">Bug#10155</a>)</p></li><li><p>
        Double quotes not recognized when parsing client-side prepared
        statements.
       (<a href="http://bugs.mysql.com/10155" target="_top">Bug#10155</a>)</p></li><li><p>
        Made JDBC2-compliant wrappers public in order to allow access to
        vendor extensions.
       (<a href="http://bugs.mysql.com/10155" target="_top">Bug#10155</a>)</p></li><li><p>
        <code class="literal">DatabaseMetaData.supportsMultipleOpenResults()</code>
        now returns <code class="literal">true</code>. The driver has supported
        this for some time, DBMD just missed that fact.
       (<a href="http://bugs.mysql.com/10155" target="_top">Bug#10155</a>)</p></li><li><p>
        Cleaned up logging of profiler events, moved code to dump a
        profiler event as a string to
        <code class="literal">com.mysql.jdbc.log.LogUtils</code> so that third
        parties can use it.
       (<a href="http://bugs.mysql.com/10155" target="_top">Bug#10155</a>)</p></li><li><p>
        Made <code class="literal">enableStreamingResults()</code> visible on
        <code class="literal">com.mysql.jdbc.jdbc2.optional.StatementWrapper</code>.
       (<a href="http://bugs.mysql.com/10155" target="_top">Bug#10155</a>)</p></li><li><p>
        Actually write manifest file to correct place so it ends up in
        the binary jar file.
       (<a href="http://bugs.mysql.com/10144" target="_top">Bug#10144</a>)</p></li><li><p>
        Added <code class="literal">createDatabaseIfNotExist</code> property
        (default is <code class="literal">false</code>), which will cause the
        driver to ask the server to create the database specified in the
        URL if it doesn't exist. You must have the appropriate
        privileges for database creation for this to work.
       (<a href="http://bugs.mysql.com/10144" target="_top">Bug#10144</a>)</p></li><li><p>
        Memory leak in <code class="literal">ServerPreparedStatement</code> if
        <code class="literal">serverPrepare()</code> fails.
       (<a href="http://bugs.mysql.com/10144" target="_top">Bug#10144</a>)</p></li><li><p>
        <code class="literal">com.mysql.jdbc.PreparedStatement.ParseInfo</code>
        does unnecessary call to <code class="literal">toCharArray()</code>.
       (<a href="http://bugs.mysql.com/9064" target="_top">Bug#9064</a>)</p></li><li><p>
        Driver now correctly uses CP932 if available on the server for
        Windows-31J, CP932 and MS932 java encoding names, otherwise it
        resorts to SJIS, which is only a close approximation. Currently
        only MySQL-5.0.3 and newer (and MySQL-4.1.12 or .13, depending
        on when the character set gets backported) can reliably support
        any variant of CP932.
      </p></li><li><p>
        Overhaul of character set configuration, everything now lives in
        a properties file.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-8"></a>C.5.3.8. Changes in  MySQL Connector/J 3.1.8 (14 April 2005)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Should accept <code class="literal">null</code> for catalog (meaning use
        current) in DBMD methods, even though it's not JDBC-compliant
        for legacy's sake. Disable by setting connection property
        <code class="literal">nullCatalogMeansCurrent</code> to
        <code class="literal">false</code> (which will be the default value in C/J
        3.2.x).
       (<a href="http://bugs.mysql.com/9917" target="_top">Bug#9917</a>)</p></li><li><p>
        Fixed driver not returning <code class="literal">true</code> for
        <code class="literal">-1</code> when
        <code class="literal">ResultSet.getBoolean()</code> was called on result
        sets returned from server-side prepared statements.
       (<a href="http://bugs.mysql.com/9778" target="_top">Bug#9778</a>)</p></li><li><p>
        Added a <code class="filename">Manifest.MF</code> file with
        implementation information to the <code class="filename">.jar</code>
        file.
       (<a href="http://bugs.mysql.com/9778" target="_top">Bug#9778</a>)</p></li><li><p>
        More tests in <code class="literal">Field.isOpaqueBinary()</code> to
        distinguish opaque binary (that is, fields with type
        <code class="literal">CHAR(n)</code> and <code class="literal">CHARACTER SET
        BINARY</code>) from output of various scalar and aggregate
        functions that return strings.
       (<a href="http://bugs.mysql.com/9778" target="_top">Bug#9778</a>)</p></li><li><p>
        <code class="literal">DBMD.getTables()</code> shouldn't return tables if
        views are asked for, even if the database version doesn't
        support views.
       (<a href="http://bugs.mysql.com/9778" target="_top">Bug#9778</a>)</p></li><li><p>
        Should accept <code class="literal">null</code> for name patterns in DBMD
        (meaning “<span class="quote"><code class="literal">%</code></span>”), even though it
        isn't JDBC compliant, for legacy's sake. Disable by setting
        connection property <code class="literal">nullNamePatternMatchesAll</code>
        to <code class="literal">false</code> (which will be the default value in
        C/J 3.2.x).
       (<a href="http://bugs.mysql.com/9769" target="_top">Bug#9769</a>)</p></li><li><p>
        Then fallback to our <code class="literal">STDERR</code> logging.
       (<a href="http://bugs.mysql.com/9704" target="_top">Bug#9704</a>)</p></li><li><p>
        The performance metrics feature now gathers information about
        number of tables referenced in a SELECT.
       (<a href="http://bugs.mysql.com/9704" target="_top">Bug#9704</a>)</p></li><li><p>
        The logging system is now automatically configured. If the value
        has been set by the user, via the URL property
        <code class="literal">logger</code> or the system property
        <code class="literal">com.mysql.jdbc.logger</code>, then use that,
        otherwise, autodetect it using the following steps:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Log4j, if it's available,
          </p></li><li><p>
            Then JDK1.4 logging,
          </p></li><li><p>
            Then fallback to our <code class="literal">STDERR</code> logging.
          </p></li></ol></div><p>(<a href="http://bugs.mysql.com/9704" target="_top">Bug#9704</a>)</p></li><li><p>
        Then JDK1.4 logging,
       (<a href="http://bugs.mysql.com/9704" target="_top">Bug#9704</a>)</p></li><li><p>
        Log4j, if it's available,
       (<a href="http://bugs.mysql.com/9704" target="_top">Bug#9704</a>)</p></li><li><p>
        <code class="literal">Statement.getMoreResults()</code> could throw NPE
        when existing result set was <code class="literal">.close()</code>d.
       (<a href="http://bugs.mysql.com/9704" target="_top">Bug#9704</a>)</p></li><li><p>
        Stored procedures with <code class="literal">DECIMAL</code> parameters
        with storage specifications that contained
        “<span class="quote"><code class="literal">,</code></span>” in them would fail.
       (<a href="http://bugs.mysql.com/9682" target="_top">Bug#9682</a>)</p></li><li><p>
        <code class="literal">PreparedStatement.setObject(int, Object, int type, int
        scale)</code> now uses scale value for
        <code class="literal">BigDecimal</code> instances.
       (<a href="http://bugs.mysql.com/9682" target="_top">Bug#9682</a>)</p></li><li><p>
        Added support for the c3p0 connection pool's
        (<a href="http://c3p0.sf.net/" target="_top">http://c3p0.sf.net/</a>) validation/connection
        checker interface which uses the lightweight
        <code class="literal">COM_PING</code> call to the server if available. To
        use it, configure your c3p0 connection pool's
        <code class="literal">connectionTesterClassName</code> property to use
        <code class="literal">com.mysql.jdbc.integration.c3p0.MysqlConnectionTester</code>.
       (<a href="http://bugs.mysql.com/9320" target="_top">Bug#9320</a>)</p></li><li><p>
        <code class="literal">PreparedStatement.getMetaData()</code> inserts blank
        row in database under certain conditions when not using
        server-side prepared statements.
       (<a href="http://bugs.mysql.com/9320" target="_top">Bug#9320</a>)</p></li><li><p>
        Better detection of <code class="literal">LIMIT</code> inside/outside of
        quoted strings so that the driver can more correctly determine
        whether a prepared statement can be prepared on the server or
        not.
       (<a href="http://bugs.mysql.com/9320" target="_top">Bug#9320</a>)</p></li><li><p>
        <code class="literal">Connection.canHandleAsPreparedStatement()</code> now
        makes “<span class="quote">best effort</span>” to distinguish
        <code class="literal">LIMIT</code> clauses with placeholders in them from
        ones without in order to have fewer false positives when
        generating work-arounds for statements the server cannot
        currently handle as server-side prepared statements.
       (<a href="http://bugs.mysql.com/9320" target="_top">Bug#9320</a>)</p></li><li><p>
        Fixed <code class="filename">build.xml</code> to not compile
        <code class="literal">log4j</code> logging if <code class="literal">log4j</code> not
        available.
       (<a href="http://bugs.mysql.com/9320" target="_top">Bug#9320</a>)</p></li><li><p>
        Added finalizers to <code class="literal">ResultSet</code> and
        <code class="literal">Statement</code> implementations to be JDBC
        spec-compliant, which requires that if not explicitly closed,
        these resources should be closed upon garbage collection.
       (<a href="http://bugs.mysql.com/9319" target="_top">Bug#9319</a>)</p></li><li><p>
        Stored procedures with same name in different databases confuse
        the driver when it tries to determine parameter counts/types.
       (<a href="http://bugs.mysql.com/9319" target="_top">Bug#9319</a>)</p></li><li><p>
        A continuation of <a href="http://bugs.mysql.com/8868" target="_top">Bug#8868</a>, where functions used in queries
        that should return non-string types when resolved by temporary
        tables suddenly become opaque binary strings (work-around for
        server limitation). Also fixed fields with type of
        <code class="literal">CHAR(n) CHARACTER SET BINARY</code> to return
        correct/matching classes for
        <code class="literal">RSMD.getColumnClassName()</code> and
        <code class="literal">ResultSet.getObject()</code>.
       (<a href="http://bugs.mysql.com/9236" target="_top">Bug#9236</a>)</p></li><li><p>
        Cannot use <code class="literal">UTF-8</code> for characterSetResults
        configuration property.
       (<a href="http://bugs.mysql.com/9206" target="_top">Bug#9206</a>)</p></li><li><p>
        <code class="literal">PreparedStatement.addBatch()</code> doesn't work
        with server-side prepared statements and streaming
        <code class="literal">BINARY</code> data.
       (<a href="http://bugs.mysql.com/9040" target="_top">Bug#9040</a>)</p></li><li><p>
        <code class="literal">ServerPreparedStatements</code> now correctly
        “<span class="quote">stream</span>”
        <code class="literal">BLOB</code>/<code class="literal">CLOB</code> data to the
        server. You can configure the threshold chunk size using the
        JDBC URL property <code class="literal">blobSendChunkSize</code> (the
        default is 1MB).
       (<a href="http://bugs.mysql.com/8868" target="_top">Bug#8868</a>)</p></li><li><p>
        <a href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a> queries returned
        as <code class="literal">BLOB</code>s from <code class="literal">getObject()</code>.
       (<a href="http://bugs.mysql.com/8868" target="_top">Bug#8868</a>)</p></li><li><p>
        Server-side session variables can be preset at connection time
        by passing them as a comma-delimited list for the connection
        property <code class="literal">sessionVariables</code>.
       (<a href="http://bugs.mysql.com/8868" target="_top">Bug#8868</a>)</p></li><li><p>
        <code class="literal">BlobFromLocator</code> now uses correct identifier
        quoting when generating prepared statements.
       (<a href="http://bugs.mysql.com/8868" target="_top">Bug#8868</a>)</p></li><li><p>
        Fixed regression in <code class="literal">ping()</code> for users using
        <code class="literal">autoReconnect=true</code>.
       (<a href="http://bugs.mysql.com/8868" target="_top">Bug#8868</a>)</p></li><li><p>
        Check for empty strings (<code class="literal">''</code>) when converting
        <code class="literal">CHAR</code>/<code class="literal">VARCHAR</code> column data
        to numbers, throw exception if
        <code class="literal">emptyStringsConvertToZero</code> configuration
        property is set to <code class="literal">false</code> (for
        backward-compatibility with 3.0, it is now set to
        <code class="literal">true</code> by default, but will most likely default
        to <code class="literal">false</code> in 3.2).
       (<a href="http://bugs.mysql.com/8803" target="_top">Bug#8803</a>)</p></li><li><p>
        <code class="literal">DATA_TYPE</code> column from
        <code class="literal">DBMD.getBestRowIdentifier()</code> causes
        <code class="literal">ArrayIndexOutOfBoundsException</code> when accessed
        (and in fact, didn't return any value).
       (<a href="http://bugs.mysql.com/8803" target="_top">Bug#8803</a>)</p></li><li><p>
        <code class="literal">DBMD.supportsMixedCase*Identifiers()</code> returns
        wrong value on servers running on case-sensitive filesystems.
       (<a href="http://bugs.mysql.com/8800" target="_top">Bug#8800</a>)</p></li><li><p>
        <code class="literal">DBMD.supportsResultSetConcurrency()</code> not
        returning <code class="literal">true</code> for forward-only/read-only
        result sets (we obviously support this).
       (<a href="http://bugs.mysql.com/8792" target="_top">Bug#8792</a>)</p></li><li><p>
        Fixed <code class="literal">ResultSet.getTime()</code> on a
        <code class="literal">NULL</code> value for server-side prepared
        statements throws NPE.
      </p></li><li><p>
        Made <code class="literal">Connection.ping()</code> a public method.
      </p></li><li><p>
        Added support for new precision-math <code class="literal">DECIMAL</code>
        type in MySQL 5.0.3 and up.
      </p></li><li><p>
        Fixed <code class="literal">DatabaseMetaData.getTables()</code> returning
        views when they were not asked for as one of the requested table
        types.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-7"></a>C.5.3.9. Changes in  MySQL Connector/J 3.1.7 (18 February 2005)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">PreparedStatements</code> not creating streaming
        result sets.
       (<a href="http://bugs.mysql.com/8487" target="_top">Bug#8487</a>)</p></li><li><p>
        Don't pass <code class="literal">NULL</code> to
        <code class="literal">String.valueOf()</code> in
        <code class="literal">ResultSet.getNativeConvertToString()</code>, as it
        stringifies it (that is, returns <code class="literal">null</code>), which
        is not correct for the method in question.
       (<a href="http://bugs.mysql.com/8487" target="_top">Bug#8487</a>)</p></li><li><p>
        Fixed NPE in <code class="literal">ResultSet.realClose()</code> when using
        usage advisor and result set was already closed.
       (<a href="http://bugs.mysql.com/8428" target="_top">Bug#8428</a>)</p></li><li><p>
        <code class="literal">ResultSet.getString()</code> doesn't maintain format
        stored on server, bug fix only enabled when
        <code class="literal">noDatetimeStringSync</code> property is set to
        <code class="literal">true</code> (the default is
        <code class="literal">false</code>).
       (<a href="http://bugs.mysql.com/8428" target="_top">Bug#8428</a>)</p></li><li><p>
        Added support for <code class="literal">BIT</code> type in MySQL-5.0.3.
        The driver will treat <code class="literal">BIT(1-8)</code> as the JDBC
        standard <code class="literal">BIT</code> type (which maps to
        <code class="literal">java.lang.Boolean</code>), as the server does not
        currently send enough information to determine the size of a
        bitfield when &lt; 9 bits are declared.
        <code class="literal">BIT(&gt;9)</code> will be treated as
        <code class="literal">VARBINARY</code>, and will return
        <code class="literal">byte[]</code> when <code class="literal">getObject()</code> is
        called.
       (<a href="http://bugs.mysql.com/8424" target="_top">Bug#8424</a>)</p></li><li><p>
        Added <code class="literal">useLocalSessionState</code> configuration
        property, when set to <code class="literal">true</code> the JDBC driver
        trusts that the application is well-behaved and only sets
        autocommit and transaction isolation levels using the methods
        provided on <code class="literal">java.sql.Connection</code>, and
        therefore can manipulate these values in many cases without
        incurring round-trips to the database server.
       (<a href="http://bugs.mysql.com/8424" target="_top">Bug#8424</a>)</p></li><li><p>
        Added <code class="literal">enableStreamingResults()</code> to
        <code class="literal">Statement</code> for connection pool implementations
        that check <code class="literal">Statement.setFetchSize()</code> for
        specification-compliant values. Call
        <code class="literal">Statement.setFetchSize(&gt;=0)</code> to disable the
        streaming results for that statement.
       (<a href="http://bugs.mysql.com/8424" target="_top">Bug#8424</a>)</p></li><li><p>
        <code class="literal">ResultSet.getBigDecimal()</code> throws exception
        when rounding would need to occur to set scale. The driver now
        chooses a rounding mode of “<span class="quote">half up</span>” if
        non-rounding <code class="literal">BigDecimal.setScale()</code> fails.
       (<a href="http://bugs.mysql.com/8424" target="_top">Bug#8424</a>)</p></li><li><p>
        Fixed synchronization issue with
        <code class="literal">ServerPreparedStatement.serverPrepare()</code> that
        could cause deadlocks/crashes if connection was shared between
        threads.
       (<a href="http://bugs.mysql.com/8096" target="_top">Bug#8096</a>)</p></li><li><p>
        Emulated locators corrupt binary data when using server-side
        prepared statements.
       (<a href="http://bugs.mysql.com/8096" target="_top">Bug#8096</a>)</p></li><li><p>
        Infinite recursion when “<span class="quote">falling back</span>” to master in
        failover configuration.
       (<a href="http://bugs.mysql.com/7952" target="_top">Bug#7952</a>)</p></li><li><p>
        Disable multi-statements (if enabled) for MySQL-4.1 versions
        prior to version 4.1.10 if the query cache is enabled, as the
        server returns wrong results in this configuration.
       (<a href="http://bugs.mysql.com/7952" target="_top">Bug#7952</a>)</p></li><li><p>
        Removed <code class="literal">dontUnpackBinaryResults</code>
        functionality, the driver now always stores results from
        server-side prepared statements as is from the server and
        unpacks them on demand.
       (<a href="http://bugs.mysql.com/7952" target="_top">Bug#7952</a>)</p></li><li><p>
        Fixed duplicated code in
        <code class="literal">configureClientCharset()</code> that prevented
        <code class="literal">useOldUTF8Behavior=true</code> from working
        properly.
       (<a href="http://bugs.mysql.com/7952" target="_top">Bug#7952</a>)</p></li><li><p>
        Added <code class="literal">holdResultsOpenOverStatementClose</code>
        property (default is <code class="literal">false</code>), that keeps
        result sets open over statement.close() or new execution on same
        statement (suggested by Kevin Burton).
       (<a href="http://bugs.mysql.com/7715" target="_top">Bug#7715</a>)</p></li><li><p>
        Detect new <code class="literal">sql_mode</code> variable in string form
        (it used to be integer) and adjust quoting method for strings
        appropriately.
       (<a href="http://bugs.mysql.com/7715" target="_top">Bug#7715</a>)</p></li><li><p>
        Timestamps converted incorrectly to strings with server-side
        prepared statements and updatable result sets.
       (<a href="http://bugs.mysql.com/7715" target="_top">Bug#7715</a>)</p></li><li><p>
        Timestamp key column data needed <code class="literal">_binary</code>
        stripped for <code class="literal">UpdatableResultSet.refreshRow()</code>.
       (<a href="http://bugs.mysql.com/7686" target="_top">Bug#7686</a>)</p></li><li><p>
        Choose correct “<span class="quote">direction</span>” to apply time
        adjustments when both client and server are in GMT time zone
        when using <code class="literal">ResultSet.get(..., cal)</code> and
        <code class="literal">PreparedStatement.set(...., cal)</code>.
       (<a href="http://bugs.mysql.com/4718" target="_top">Bug#4718</a>)</p></li><li><p>
        Remove <code class="literal">_binary</code> introducer from parameters
        used as in/out parameters in
        <code class="literal">CallableStatement</code>.
       (<a href="http://bugs.mysql.com/4718" target="_top">Bug#4718</a>)</p></li><li><p>
        Always return <code class="literal">byte[]</code>s for output parameters
        registered as <code class="literal">*BINARY</code>.
       (<a href="http://bugs.mysql.com/4718" target="_top">Bug#4718</a>)</p></li><li><p>
        By default, the driver now scans SQL you are preparing via all
        variants of <code class="literal">Connection.prepareStatement()</code> to
        determine if it is a supported type of statement to prepare on
        the server side, and if it is not supported by the server, it
        instead prepares it as a client-side emulated prepared
        statement. You can disable this by passing
        <code class="literal">emulateUnsupportedPstmts=false</code> in your JDBC
        URL.
       (<a href="http://bugs.mysql.com/4718" target="_top">Bug#4718</a>)</p></li><li><p>
        Added <code class="literal">dontTrackOpenResources</code> option (default
        is <code class="literal">false</code>, to be JDBC compliant), which helps
        with memory use for non-well-behaved apps (that is, applications
        that don't close <code class="literal">Statement</code> objects when they
        should).
       (<a href="http://bugs.mysql.com/4718" target="_top">Bug#4718</a>)</p></li><li><p>
        Send correct value for “<span class="quote">boolean</span>”
        <code class="literal">true</code> to server for
        <code class="literal">PreparedStatement.setObject(n, "true",
        Types.BIT)</code>.
       (<a href="http://bugs.mysql.com/4718" target="_top">Bug#4718</a>)</p></li><li><p>
        Fixed bug with Connection not caching statements from
        <code class="literal">prepareStatement()</code> when the statement wasn't
        a server-side prepared statement.
       (<a href="http://bugs.mysql.com/4718" target="_top">Bug#4718</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-6"></a>C.5.3.10. Changes in  MySQL Connector/J 3.1.6 (23 December 2004)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">DBMD.getProcedures()</code> doesn't respect catalog
        parameter.
       (<a href="http://bugs.mysql.com/7026" target="_top">Bug#7026</a>)</p></li><li><p>
        Fixed hang on <code class="literal">SocketInputStream.read()</code> with
        <code class="literal">Statement.setMaxRows()</code> and multiple result
        sets when driver has to truncate result set directly, rather
        than tacking a <code class="literal">LIMIT
        <em class="replaceable"><code>n</code></em></code> on the end of it.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-5"></a>C.5.3.11. Changes in  MySQL Connector/J 3.1.5 (02 December 2004)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Use 1MB packet for sending file for <code class="literal">LOAD DATA LOCAL
        INFILE</code> if that is &lt;
        <code class="literal">max_allowed_packet</code> on server.
       (<a href="http://bugs.mysql.com/6537" target="_top">Bug#6537</a>)</p></li><li><p>
        <code class="literal">SUM()</code> on <code class="literal">DECIMAL</code> with
        server-side prepared statement ignores scale if zero-padding is
        needed (this ends up being due to conversion to
        <code class="literal">DOUBLE</code> by server, which when converted to a
        string to parse into <code class="literal">BigDecimal</code>, loses all
        “<span class="quote">padding</span>” zeros).
       (<a href="http://bugs.mysql.com/6537" target="_top">Bug#6537</a>)</p></li><li><p>
        Use
        <code class="literal">DatabaseMetaData.getIdentifierQuoteString()</code>
        when building DBMD queries.
       (<a href="http://bugs.mysql.com/6537" target="_top">Bug#6537</a>)</p></li><li><p>
        Use our own implementation of buffered input streams to get
        around blocking behavior of
        <code class="literal">java.io.BufferedInputStream</code>. Disable this
        with <code class="literal">useReadAheadInput=false</code>.
       (<a href="http://bugs.mysql.com/6399" target="_top">Bug#6399</a>)</p></li><li><p>
        Make auto-deserialization of
        <code class="literal">java.lang.Objects</code> stored in
        <code class="literal">BLOB</code> columns configurable via
        <code class="literal">autoDeserialize</code> property (defaults to
        <code class="literal">false</code>).
       (<a href="http://bugs.mysql.com/6399" target="_top">Bug#6399</a>)</p></li><li><p>
        <code class="literal">ResultSetMetaData.getColumnDisplaySize()</code>
        returns incorrect values for multi-byte charsets.
       (<a href="http://bugs.mysql.com/6399" target="_top">Bug#6399</a>)</p></li><li><p>
        Re-work <code class="literal">Field.isOpaqueBinary()</code> to detect
        <code class="literal">CHAR(<em class="replaceable"><code>n</code></em>) CHARACTER SET
        BINARY</code> to support fixed-length binary fields for
        <code class="literal">ResultSet.getObject()</code>.
       (<a href="http://bugs.mysql.com/6399" target="_top">Bug#6399</a>)</p></li><li><p>
        Failing to connect to the server when one of the addresses for
        the given host name is IPV6 (which the server does not yet bind
        on). The driver now loops through <span class="emphasis"><em>all</em></span> IP
        addresses for a given host, and stops on the first one that
        <code class="literal">accepts()</code> a
        <code class="literal">socket.connect()</code>.
       (<a href="http://bugs.mysql.com/6348" target="_top">Bug#6348</a>)</p></li><li><p>
        Removed unwanted new <code class="literal">Throwable()</code> in
        <code class="literal">ResultSet</code> constructor due to bad merge
        (caused a new object instance that was never used for every
        result set created). Found while profiling for <a href="http://bugs.mysql.com/6359" target="_top">Bug#6359</a>.
       (<a href="http://bugs.mysql.com/6225" target="_top">Bug#6225</a>)</p></li><li><p>
        <code class="literal">ServerSidePreparedStatement</code> allocating
        short-lived objects unnecessarily.
       (<a href="http://bugs.mysql.com/6225" target="_top">Bug#6225</a>)</p></li><li><p>
        Use null-safe-equals for key comparisons in updatable result
        sets.
       (<a href="http://bugs.mysql.com/6225" target="_top">Bug#6225</a>)</p></li><li><p>
        Fixed too-early creation of <code class="literal">StringBuffer</code> in
        <code class="literal">EscapeProcessor.escapeSQL()</code>, also return
        <code class="literal">String</code> when escaping not needed (to avoid
        unnecessary object allocations). Found while profiling for <a href="http://bugs.mysql.com/6359" target="_top">Bug#6359</a>.
       (<a href="http://bugs.mysql.com/6225" target="_top">Bug#6225</a>)</p></li><li><p>
        <code class="literal">UNSIGNED BIGINT</code> unpacked incorrectly from
        server-side prepared statement result sets.
       (<a href="http://bugs.mysql.com/5729" target="_top">Bug#5729</a>)</p></li><li><p>
        Added experimental configuration property
        <code class="literal">dontUnpackBinaryResults</code>, which delays
        unpacking binary result set values until they're asked for, and
        only creates object instances for non-numerical values (it is
        set to <code class="literal">false</code> by default). For some
        usecase/jvm combinations, this is friendlier on the garbage
        collector.
       (<a href="http://bugs.mysql.com/5706" target="_top">Bug#5706</a>)</p></li><li><p>
        Don't throw exceptions for
        <code class="literal">Connection.releaseSavepoint()</code>.
       (<a href="http://bugs.mysql.com/5706" target="_top">Bug#5706</a>)</p></li><li><p>
        Inefficient detection of pre-existing string instances in
        <code class="literal">ResultSet.getNativeString()</code>.
       (<a href="http://bugs.mysql.com/5706" target="_top">Bug#5706</a>)</p></li><li><p>
        Use a per-session <code class="literal">Calendar</code> instance by
        default when decoding dates from
        <code class="literal">ServerPreparedStatements</code> (set to old, less
        performant behavior by setting property
        <code class="literal">dynamicCalendars=true</code>).
       (<a href="http://bugs.mysql.com/5706" target="_top">Bug#5706</a>)</p></li><li><p>
        Fixed batched updates with server prepared statements weren't
        looking if the types had changed for a given batched set of
        parameters compared to the previous set, causing the server to
        return the error “<span class="quote">Wrong arguments to
        mysql_stmt_execute()</span>”.
       (<a href="http://bugs.mysql.com/5235" target="_top">Bug#5235</a>)</p></li><li><p>
        Handle case when string representation of timestamp contains
        trailing “<span class="quote"><code class="literal">.</code></span>” with no numbers
        following it.
       (<a href="http://bugs.mysql.com/5235" target="_top">Bug#5235</a>)</p></li><li><p>
        Server-side prepared statements did not honor
        <code class="literal">zeroDateTimeBehavior</code> property, and would
        cause class-cast exceptions when using
        <code class="literal">ResultSet.getObject()</code>, as the all-zero string
        was always returned.
       (<a href="http://bugs.mysql.com/5235" target="_top">Bug#5235</a>)</p></li><li><p>
        Fix comparisons made between string constants and dynamic
        strings that are converted with either
        <code class="literal">toUpperCase()</code> or
        <code class="literal">toLowerCase()</code> to use
        <code class="literal">Locale.ENGLISH</code>, as some locales
        “<span class="quote">override</span>” case rules for English. Also use
        <code class="literal">StringUtils.indexOfIgnoreCase()</code> instead of
        <code class="literal">.toUpperCase().indexOf()</code>, avoids creating a
        very short-lived transient <code class="literal">String</code> instance.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-4"></a>C.5.3.12. Changes in  MySQL Connector/J 3.1.4 (04 September 2004)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed <code class="literal">ServerPreparedStatement</code> to read
        prepared statement metadata off the wire, even though it's
        currently a placeholder instead of using
        <code class="literal">MysqlIO.clearInputStream()</code> which didn't work
        at various times because data wasn't available to read from the
        server yet. This fixes sporadic errors users were having with
        <code class="literal">ServerPreparedStatements</code> throwing
        <code class="literal">ArrayIndexOutOfBoundExceptions</code>.
       (<a href="http://bugs.mysql.com/5032" target="_top">Bug#5032</a>)</p></li><li><p>
        Added three ways to deal with all-zero datetimes when reading
        them from a <code class="literal">ResultSet</code>:
        <code class="literal">exception</code> (the default), which throws an
        <code class="literal">SQLException</code> with an SQLState of
        <code class="literal">S1009</code>; <code class="literal">convertToNull</code>,
        which returns <code class="literal">NULL</code> instead of the date; and
        <code class="literal">round</code>, which rounds the date to the nearest
        closest value which is <code class="literal">'0001-01-01'</code>.
       (<a href="http://bugs.mysql.com/5032" target="_top">Bug#5032</a>)</p></li><li><p>
        The driver is more strict about truncation of numerics on
        <code class="literal">ResultSet.get*()</code>, and will throw an
        <code class="literal">SQLException</code> when truncation is detected. You
        can disable this by setting
        <code class="literal">jdbcCompliantTruncation</code> to
        <code class="literal">false</code> (it is enabled by default, as this
        functionality is required for JDBC compliance).
       (<a href="http://bugs.mysql.com/5032" target="_top">Bug#5032</a>)</p></li><li><p>
        You can now use URLs in <code class="literal">LOAD DATA LOCAL
        INFILE</code> statements, and the driver will use Java's
        built-in handlers for retreiving the data and sending it to the
        server. This feature is not enabled by default, you must set the
        <code class="literal">allowUrlInLocalInfile</code> connection property to
        <code class="literal">true</code>.
       (<a href="http://bugs.mysql.com/5032" target="_top">Bug#5032</a>)</p></li><li><p>
        <code class="literal">ResultSet.getObject()</code> doesn't return type
        <code class="literal">Boolean</code> for pseudo-bit types from prepared
        statements on 4.1.x (shortcut for avoiding extra type conversion
        when using binary-encoded result sets obscured test in
        <code class="literal">getObject()</code> for “<span class="quote">pseudo</span>” bit
        type).
       (<a href="http://bugs.mysql.com/5032" target="_top">Bug#5032</a>)</p></li><li><p>
        Use <code class="literal">com.mysql.jdbc.Message</code>'s classloader when
        loading resource bundle, should fix sporadic issues when the
        caller's classloader can't locate the resource bundle.
       (<a href="http://bugs.mysql.com/5032" target="_top">Bug#5032</a>)</p></li><li><p>
        <code class="literal">ServerPreparedStatements</code> dealing with return
        of <code class="literal">DECIMAL</code> type don't work.
       (<a href="http://bugs.mysql.com/5012" target="_top">Bug#5012</a>)</p></li><li><p>
        Track packet sequence numbers if
        <code class="literal">enablePacketDebug=true</code>, and throw an
        exception if packets received out-of-order.
       (<a href="http://bugs.mysql.com/4689" target="_top">Bug#4689</a>)</p></li><li><p>
        <code class="literal">ResultSet.wasNull()</code> does not work for
        primatives if a previous <code class="literal">null</code> was returned.
       (<a href="http://bugs.mysql.com/4689" target="_top">Bug#4689</a>)</p></li><li><p>
        Optimized integer number parsing, enable “<span class="quote">old</span>”
        slower integer parsing using JDK classes via
        <code class="literal">useFastIntParsing=false</code> property.
       (<a href="http://bugs.mysql.com/4642" target="_top">Bug#4642</a>)</p></li><li><p>
        Added <code class="literal">useOnlyServerErrorMessages</code> property,
        which causes message text in exceptions generated by the server
        to only contain the text sent by the server (as opposed to the
        SQLState's “<span class="quote">standard</span>” description, followed by the
        server's error message). This property is set to
        <code class="literal">true</code> by default.
       (<a href="http://bugs.mysql.com/4642" target="_top">Bug#4642</a>)</p></li><li><p>
        <code class="literal">ServerPreparedStatement.execute*()</code> sometimes
        threw <code class="literal">ArrayIndexOutOfBoundsException</code> when
        unpacking field metadata.
       (<a href="http://bugs.mysql.com/4642" target="_top">Bug#4642</a>)</p></li><li><p>
        Connector/J 3.1.3 beta does not handle integers correctly
        (caused by changes to support unsigned reads in
        <code class="literal">Buffer.readInt()</code> -&gt;
        <code class="literal">Buffer.readShort()</code>).
       (<a href="http://bugs.mysql.com/4510" target="_top">Bug#4510</a>)</p></li><li><p>
        Added support in <code class="literal">DatabaseMetaData.getTables()</code>
        and <code class="literal">getTableTypes()</code> for views, which are now
        available in MySQL server 5.0.x.
       (<a href="http://bugs.mysql.com/4510" target="_top">Bug#4510</a>)</p></li><li><p>
        <code class="literal">ResultSet.getObject()</code> returns wrong type for
        strings when using prepared statements.
       (<a href="http://bugs.mysql.com/4482" target="_top">Bug#4482</a>)</p></li><li><p>
        Calling <code class="literal">MysqlPooledConnection.close()</code> twice
        (even though an application error), caused NPE. Fixed.
       (<a href="http://bugs.mysql.com/4482" target="_top">Bug#4482</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-3"></a>C.5.3.13. Changes in  MySQL Connector/J 3.1.3 (07 July 2004)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Support new time zone variables in MySQL-4.1.3 when
        <code class="literal">useTimezone=true</code>.
       (<a href="http://bugs.mysql.com/4311" target="_top">Bug#4311</a>)</p></li><li><p>
        Error in retrieval of <code class="literal">mediumint</code> column with
        prepared statements and binary protocol.
       (<a href="http://bugs.mysql.com/4311" target="_top">Bug#4311</a>)</p></li><li><p>
        Support for unsigned numerics as return types from prepared
        statements. This also causes a change in
        <code class="literal">ResultSet.getObject()</code> for the <code class="literal">bigint
        unsigned</code> type, which used to return
        <code class="literal">BigDecimal</code> instances, it now returns
        instances of <code class="literal">java.lang.BigInteger</code>.
       (<a href="http://bugs.mysql.com/4311" target="_top">Bug#4311</a>)</p></li><li><p>
        Externalized more messages (on-going effort).
       (<a href="http://bugs.mysql.com/4119" target="_top">Bug#4119</a>)</p></li><li><p>
        Null bitmask sent for server-side prepared statements was
        incorrect.
       (<a href="http://bugs.mysql.com/4119" target="_top">Bug#4119</a>)</p></li><li><p>
        Added constants for MySQL error numbers (publicly accessible,
        see <code class="literal">com.mysql.jdbc.MysqlErrorNumbers</code>), and
        the ability to generate the mappings of vendor error codes to
        SQLStates that the driver uses (for documentation purposes).
       (<a href="http://bugs.mysql.com/4119" target="_top">Bug#4119</a>)</p></li><li><p>
        Added packet debuging code (see the
        <code class="literal">enablePacketDebug</code> property documentation).
       (<a href="http://bugs.mysql.com/4119" target="_top">Bug#4119</a>)</p></li><li><p>
        Use SQL Standard SQL states by default, unless
        <code class="literal">useSqlStateCodes</code> property is set to
        <code class="literal">false</code>.
       (<a href="http://bugs.mysql.com/4119" target="_top">Bug#4119</a>)</p></li><li><p>
        Mangle output parameter names for
        <code class="literal">CallableStatements</code> so they will not clash
        with user variable names.
      </p></li><li><p>
        Added support for <code class="literal">INOUT</code> parameters in
        <code class="literal">CallableStatements</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-2"></a>C.5.3.14. Changes in  MySQL Connector/J 3.1.2 (09 June 2004)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Don't enable server-side prepared statements for server version
        5.0.0 or 5.0.1, as they aren't compatible with the '4.1.2+'
        style that the driver uses (the driver expects information to
        come back that isn't there, so it hangs).
       (<a href="http://bugs.mysql.com/3804" target="_top">Bug#3804</a>)</p></li><li><p>
        <code class="literal">getWarnings()</code> returns
        <code class="literal">SQLWarning</code> instead of
        <code class="literal">DataTruncation</code>.
       (<a href="http://bugs.mysql.com/3804" target="_top">Bug#3804</a>)</p></li><li><p>
        <code class="literal">getProcedureColumns()</code> doesn't work with
        wildcards for procedure name.
       (<a href="http://bugs.mysql.com/3540" target="_top">Bug#3540</a>)</p></li><li><p>
        <code class="literal">getProcedures()</code> does not return any
        procedures in result set.
       (<a href="http://bugs.mysql.com/3539" target="_top">Bug#3539</a>)</p></li><li><p>
        Fixed <code class="literal">DatabaseMetaData.getProcedures()</code> when
        run on MySQL-5.0.0 (output of <code class="literal">SHOW PROCEDURE
        STATUS</code> changed between 5.0.0 and 5.0.1.
       (<a href="http://bugs.mysql.com/3520" target="_top">Bug#3520</a>)</p></li><li><p>
        Added <code class="literal">connectionCollation</code> property to cause
        driver to issue <code class="literal">set collation_connection=...</code>
        query on connection init if default collation for given charset
        is not appropriate.
       (<a href="http://bugs.mysql.com/3520" target="_top">Bug#3520</a>)</p></li><li><p>
        <code class="literal">DBMD.getSQLStateType()</code> returns incorrect
        value.
       (<a href="http://bugs.mysql.com/3520" target="_top">Bug#3520</a>)</p></li><li><p>
        Correctly map output parameters to position given in
        <code class="literal">prepareCall()</code> versus. order implied during
        <code class="literal">registerOutParameter()</code>.
       (<a href="http://bugs.mysql.com/3146" target="_top">Bug#3146</a>)</p></li><li><p>
        Cleaned up detection of server properties.
       (<a href="http://bugs.mysql.com/3146" target="_top">Bug#3146</a>)</p></li><li><p>
        Correctly detect initial character set for servers &gt;= 4.1.0.
       (<a href="http://bugs.mysql.com/3146" target="_top">Bug#3146</a>)</p></li><li><p>
        Support placeholder for parameter metadata for server &gt;=
        4.1.2.
       (<a href="http://bugs.mysql.com/3146" target="_top">Bug#3146</a>)</p></li><li><p>
        Added <code class="literal">gatherPerformanceMetrics</code> property,
        along with properties to control when/where this info gets
        logged (see docs for more info).
      </p></li><li><p>
        Fixed case when no parameters could cause a
        <code class="literal">NullPointerException</code> in
        <code class="literal">CallableStatement.setOutputParameters()</code>.
      </p></li><li><p>
        Enabled callable statement caching via
        <code class="literal">cacheCallableStmts</code> property.
      </p></li><li><p>
        Fixed sending of split packets for large queries, enabled nio
        ability to send large packets as well.
      </p></li><li><p>
        Added <code class="literal">.toString()</code> functionality to
        <code class="literal">ServerPreparedStatement</code>, which should help if
        you're trying to debug a query that is a prepared statement (it
        shows SQL as the server would process).
      </p></li><li><p>
        Added <code class="literal">logSlowQueries</code> property, along with
        <code class="literal">slowQueriesThresholdMillis</code> property to
        control when a query should be considered “<span class="quote">slow.</span>”
      </p></li><li><p>
        Removed wrapping of exceptions in
        <code class="literal">MysqlIO.changeUser()</code>.
      </p></li><li><p>
        Fixed stored procedure parameter parsing info when size was
        specified for a parameter (for example,
        <code class="literal">char()</code>, <code class="literal">varchar()</code>).
      </p></li><li><p>
        <code class="literal">ServerPreparedStatements</code> weren't actually
        de-allocating server-side resources when
        <code class="literal">.close()</code> was called.
      </p></li><li><p>
        Fixed case when no output parameters specified for a stored
        procedure caused a bogus query to be issued to retrieve out
        parameters, leading to a syntax error from the server.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-1"></a>C.5.3.15. Changes in  MySQL Connector/J 3.1.1 (14 February 2004)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Use DocBook version of docs for shipped versions of drivers.
       (<a href="http://bugs.mysql.com/2671" target="_top">Bug#2671</a>)</p></li><li><p>
        <code class="literal">NULL</code> fields were not being encoded correctly
        in all cases in server-side prepared statements.
       (<a href="http://bugs.mysql.com/2671" target="_top">Bug#2671</a>)</p></li><li><p>
        Fixed rare buffer underflow when writing numbers into buffers
        for sending prepared statement execution requests.
       (<a href="http://bugs.mysql.com/2671" target="_top">Bug#2671</a>)</p></li><li><p>
        Fixed <code class="literal">ConnectionProperties</code> that weren't
        properly exposed via accessors, cleaned up
        <code class="literal">ConnectionProperties</code> code.
       (<a href="http://bugs.mysql.com/2623" target="_top">Bug#2623</a>)</p></li><li><p>
        Class-cast exception when using scrolling result sets and
        server-side prepared statements.
       (<a href="http://bugs.mysql.com/2623" target="_top">Bug#2623</a>)</p></li><li><p>
        Merged unbuffered input code from 3.0.
       (<a href="http://bugs.mysql.com/2623" target="_top">Bug#2623</a>)</p></li><li><p>
        Enabled streaming of result sets from server-side prepared
        statements.
       (<a href="http://bugs.mysql.com/2606" target="_top">Bug#2606</a>)</p></li><li><p>
        Server-side prepared statements were not returning datatype
        <code class="literal">YEAR</code> correctly.
       (<a href="http://bugs.mysql.com/2606" target="_top">Bug#2606</a>)</p></li><li><p>
        Fixed charset conversion issue in
        <code class="literal">getTables()</code>.
       (<a href="http://bugs.mysql.com/2502" target="_top">Bug#2502</a>)</p></li><li><p>
        Implemented multiple result sets returned from a statement or
        stored procedure.
       (<a href="http://bugs.mysql.com/2502" target="_top">Bug#2502</a>)</p></li><li><p>
        Implemented <code class="literal">Connection.prepareCall()</code>, and
        <code class="literal">DatabaseMetaData</code>.
        <code class="literal">getProcedures()</code> and
        <code class="literal">getProcedureColumns()</code>.
       (<a href="http://bugs.mysql.com/2359" target="_top">Bug#2359</a>)</p></li><li><p>
        Merged prepared statement caching, and
        <code class="literal">.getMetaData()</code> support from 3.0 branch.
       (<a href="http://bugs.mysql.com/2359" target="_top">Bug#2359</a>)</p></li><li><p>
        Fixed off-by-1900 error in some cases for years in
        <code class="literal">TimeUtil.fastDate</code>/<code class="literal">TimeCreate()</code>
        when unpacking results from server-side prepared statements.
       (<a href="http://bugs.mysql.com/2359" target="_top">Bug#2359</a>)</p></li><li><p>
        Reset <code class="literal">long binary</code> parameters in
        <code class="literal">ServerPreparedStatement</code> when
        <code class="literal">clearParameters()</code> is called, by sending
        <code class="literal">COM_RESET_STMT</code> to the server.
       (<a href="http://bugs.mysql.com/2359" target="_top">Bug#2359</a>)</p></li><li><p>
        <code class="literal">NULL</code> values for numeric types in binary
        encoded result sets causing
        <code class="literal">NullPointerExceptions</code>.
       (<a href="http://bugs.mysql.com/2359" target="_top">Bug#2359</a>)</p></li><li><p>
        Display where/why a connection was implicitly closed (to aid
        debugging).
       (<a href="http://bugs.mysql.com/1673" target="_top">Bug#1673</a>)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getColumns()</code> is not
        returning correct column ordinal info for
        non-<code class="literal">'%'</code> column name patterns.
       (<a href="http://bugs.mysql.com/1673" target="_top">Bug#1673</a>)</p></li><li><p>
        Fixed <code class="literal">NullPointerException</code> in
        <code class="literal">ServerPreparedStatement.setTimestamp()</code>, as
        well as year and month descrepencies in
        <code class="literal">ServerPreparedStatement.setTimestamp()</code>,
        <code class="literal">setDate()</code>.
       (<a href="http://bugs.mysql.com/1673" target="_top">Bug#1673</a>)</p></li><li><p>
        Added ability to have multiple database/JVM targets for
        compliance and regression/unit tests in
        <code class="filename">build.xml</code>.
       (<a href="http://bugs.mysql.com/1673" target="_top">Bug#1673</a>)</p></li><li><p>
        Fixed sending of queries larger than 16M.
       (<a href="http://bugs.mysql.com/1673" target="_top">Bug#1673</a>)</p></li><li><p>
        Merged fix of datatype mapping from MySQL type
        <code class="literal">FLOAT</code> to
        <code class="literal">java.sql.Types.REAL</code> from 3.0 branch.
       (<a href="http://bugs.mysql.com/1673" target="_top">Bug#1673</a>)</p></li><li><p>
        Fixed NPE and year/month bad conversions when accessing some
        datetime functionality in
        <code class="literal">ServerPreparedStatements</code> and their resultant
        result sets.
       (<a href="http://bugs.mysql.com/1673" target="_top">Bug#1673</a>)</p></li><li><p>
        Added named and indexed input/output parameter support to
        <code class="literal">CallableStatement</code>. MySQL-5.0.x or newer.
       (<a href="http://bugs.mysql.com/1673" target="_top">Bug#1673</a>)</p></li><li><p>
        <code class="literal">CommunicationsException</code> implemented, that
        tries to determine why communications was lost with a server,
        and displays possible reasons when
        <code class="literal">.getMessage()</code> is called.
       (<a href="http://bugs.mysql.com/1673" target="_top">Bug#1673</a>)</p></li><li><p>
        Detect collation of column for
        <code class="literal">RSMD.isCaseSensitive()</code>.
       (<a href="http://bugs.mysql.com/1673" target="_top">Bug#1673</a>)</p></li><li><p>
        Optimized <code class="literal">Buffer.readLenByteArray()</code> to return
        shared empty byte array when length is 0.
      </p></li><li><p>
        Fix support for table aliases when checking for all primary keys
        in <code class="literal">UpdatableResultSet</code>.
      </p></li><li><p>
        Unpack “<span class="quote">unknown</span>” data types from server prepared
        statements as <code class="literal">Strings</code>.
      </p></li><li><p>
        Implemented <code class="literal">Statement.getWarnings()</code> for
        MySQL-4.1 and newer (using <code class="literal">SHOW WARNINGS</code>).
      </p></li><li><p>
        Ensure that warnings are cleared before executing queries on
        prepared statements, as-per JDBC spec (now that we support
        warnings).
      </p></li><li><p>
        Correctly initialize datasource properties from JNDI Refs,
        including explicitly specified URLs.
      </p></li><li><p>
        Implemented long data (Blobs, Clobs, InputStreams, Readers) for
        server prepared statements.
      </p></li><li><p>
        Deal with 0-length tokens in <code class="literal">EscapeProcessor</code>
        (caused by callable statement escape syntax).
      </p></li><li><p>
        <code class="literal">DatabaseMetaData</code> now reports
        <code class="literal">supportsStoredProcedures()</code> for MySQL versions
        &gt;= 5.0.0
      </p></li><li><p>
        Support for
        <a href="apis.html#mysql-change-user" title="29.2.3.3. mysql_change_user()"><code class="literal">mysql_change_user()</code></a>. See the
        <code class="literal">changeUser()</code> method in
        <code class="literal">com.mysql.jdbc.Connection</code>.
      </p></li><li><p>
        Removed <code class="literal">useFastDates</code> connection property.
      </p></li><li><p>
        Support for NIO. Use <code class="literal">useNIO=true</code> on platforms
        that support NIO.
      </p></li><li><p>
        Check for closed connection on delete/update/insert row
        operations in <code class="literal">UpdatableResultSet</code>.
      </p></li><li><p>
        Support for transaction savepoints (MySQL &gt;= 4.0.14 or
        4.1.1).
      </p></li><li><p>
        Support “<span class="quote">old</span>” <code class="literal">profileSql</code>
        capitalization in <code class="literal">ConnectionProperties</code>. This
        property is deprecated, you should use
        <code class="literal">profileSQL</code> if possible.
      </p></li><li><p>
        Fixed character encoding issues when converting bytes to ASCII
        when MySQL doesn't provide the character set, and the JVM is set
        to a multi-byte encoding (usually affecting retrieval of numeric
        values).
      </p></li><li><p>
        Centralized setting of result set type and concurrency.
      </p></li><li><p>
        Fixed bug with <code class="literal">UpdatableResultSets</code> not using
        client-side prepared statements.
      </p></li><li><p>
        Default result set type changed to
        <code class="literal">TYPE_FORWARD_ONLY</code> (JDBC compliance).
      </p></li><li><p>
        Fixed <code class="literal">IllegalAccessError</code> to
        <code class="literal">Calendar.getTimeInMillis()</code> in
        <code class="literal">DateTimeValue</code> (for JDK &lt; 1.4).
      </p></li><li><p>
        Allow contents of <code class="literal">PreparedStatement.setBlob()</code>
        to be retained between calls to <code class="literal">.execute*()</code>.
      </p></li><li><p>
        Fixed stack overflow in
        <code class="literal">Connection.prepareCall()</code> (bad merge).
      </p></li><li><p>
        Refactored how connection properties are set and exposed as
        <code class="literal">DriverPropertyInfo</code> as well as
        <code class="literal">Connection</code> and <code class="literal">DataSource</code>
        properties.
      </p></li><li><p>
        Reduced number of methods called in average query to be more
        efficient.
      </p></li><li><p>
        Prepared <code class="literal">Statements</code> will be re-prepared on
        auto-reconnect. Any errors encountered are postponed until first
        attempt to re-execute the re-prepared statement.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-0"></a>C.5.3.16. Changes in  MySQL Connector/J 3.1.0 (18 February 2003)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Added <code class="literal">useServerPrepStmts</code> property (default
        <code class="literal">false</code>). The driver will use server-side
        prepared statements when the server version supports them (4.1
        and newer) when this property is set to <code class="literal">true</code>.
        It is currently set to <code class="literal">false</code> by default until
        all bind/fetch functionality has been implemented. Currently
        only DML prepared statements are implemented for 4.1 server-side
        prepared statements.
      </p></li><li><p>
        Added <code class="literal">requireSSL</code> property.
      </p></li><li><p>
        Track open <code class="literal">Statements</code>, close all when
        <code class="literal">Connection.close()</code> is called (JDBC
        compliance).
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cg-news-3-0"></a>C.5.4. Changes in MySQL Connector/J 3.0.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#cj-news-3-0-17">C.5.4.1. Changes in  MySQL Connector/J 3.0.17 (23 June 2005)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-16">C.5.4.2. Changes in  MySQL Connector/J 3.0.16 (15 November 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-15">C.5.4.3. Changes in  MySQL Connector/J 3.0.15 (04 September 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-14">C.5.4.4. Changes in  MySQL Connector/J 3.0.14 (28 May 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-13">C.5.4.5. Changes in  MySQL Connector/J 3.0.13 (27 May 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-12">C.5.4.6. Changes in  MySQL Connector/J 3.0.12 (18 May 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-11">C.5.4.7. Changes in  MySQL Connector/J 3.0.11 (19 February 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-10">C.5.4.8. Changes in  MySQL Connector/J 3.0.10 (13 January 2004)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-9">C.5.4.9. Changes in  MySQL Connector/J 3.0.9 (07 October 2003)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-8">C.5.4.10. Changes in  MySQL Connector/J 3.0.8 (23 May 2003)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-7">C.5.4.11. Changes in  MySQL Connector/J 3.0.7 (08 April 2003)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-6">C.5.4.12. Changes in  MySQL Connector/J 3.0.6 (18 February 2003)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-5">C.5.4.13. Changes in  MySQL Connector/J 3.0.5 (22 January 2003)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-4">C.5.4.14. Changes in  MySQL Connector/J 3.0.4 (06 January 2003)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-3">C.5.4.15. Changes in  MySQL Connector/J 3.0.3 (17 December 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-2">C.5.4.16. Changes in  MySQL Connector/J 3.0.2 (08 November 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-1">C.5.4.17. Changes in  MySQL Connector/J 3.0.1 (21 September 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-3-0-0">C.5.4.18. Changes in  MySQL Connector/J 3.0.0 (31 July 2002)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-17"></a>C.5.4.1. Changes in  MySQL Connector/J 3.0.17 (23 June 2005)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Workaround for server <a href="http://bugs.mysql.com/9098" target="_top">Bug#9098</a>: Default values of
        <code class="literal">CURRENT_*</code> for <code class="literal">DATE</code>,
        <code class="literal">TIME</code>, <code class="literal">DATETIME</code>, and
        <code class="literal">TIMESTAMP</code> columns can't be distinguished from
        <code class="literal">string</code> values, so
        <code class="literal">UpdatableResultSet.moveToInsertRow()</code>
        generates bad SQL for inserting default values.
       (<a href="http://bugs.mysql.com/8812" target="_top">Bug#8812</a>)</p></li><li><p>
        <code class="literal">NON_UNIQUE</code> column from
        <code class="literal">DBMD.getIndexInfo()</code> returned inverted value.
       (<a href="http://bugs.mysql.com/8812" target="_top">Bug#8812</a>)</p></li><li><p>
        <code class="literal">EUCKR</code> charset is sent as <code class="literal">SET NAMES
        euc_kr</code> which MySQL-4.1 and newer doesn't understand.
       (<a href="http://bugs.mysql.com/8629" target="_top">Bug#8629</a>)</p></li><li><p>
        Added support for the <code class="literal">EUC_JP_Solaris</code>
        character encoding, which maps to a MySQL encoding of
        <code class="literal">eucjpms</code> (backported from 3.1 branch). This
        only works on servers that support <code class="literal">eucjpms</code>,
        namely 5.0.3 or later.
       (<a href="http://bugs.mysql.com/8629" target="_top">Bug#8629</a>)</p></li><li><p>
        Use hex escapes for
        <code class="literal">PreparedStatement.setBytes()</code> for double-byte
        charsets including “<span class="quote">aliases</span>”
        <code class="literal">Windows-31J</code>, <code class="literal">CP934</code>,
        <code class="literal">MS932</code>.
       (<a href="http://bugs.mysql.com/8629" target="_top">Bug#8629</a>)</p></li><li><p>
        <code class="literal">DatabaseMetaData.supportsSelectForUpdate()</code>
        returns correct value based on server version.
       (<a href="http://bugs.mysql.com/8629" target="_top">Bug#8629</a>)</p></li><li><p>
        Which requires hex escaping of binary data when using multi-byte
        charsets with prepared statements.
       (<a href="http://bugs.mysql.com/8064" target="_top">Bug#8064</a>)</p></li><li><p>
        Fixed duplicated code in
        <code class="literal">configureClientCharset()</code> that prevented
        <code class="literal">useOldUTF8Behavior=true</code> from working
        properly.
       (<a href="http://bugs.mysql.com/7952" target="_top">Bug#7952</a>)</p></li><li><p>
        Backported SQLState codes mapping from Connector/J 3.1, enable
        with <code class="literal">useSqlStateCodes=true</code> as a connection
        property, it defaults to <code class="literal">false</code> in this
        release, so that we don't break legacy applications (it defaults
        to <code class="literal">true</code> starting with Connector/J 3.1).
       (<a href="http://bugs.mysql.com/7686" target="_top">Bug#7686</a>)</p></li><li><p>
        Timestamp key column data needed <code class="literal">_binary</code>
        stripped for <code class="literal">UpdatableResultSet.refreshRow()</code>.
       (<a href="http://bugs.mysql.com/7686" target="_top">Bug#7686</a>)</p></li><li><p>
        <code class="literal">MS932</code>, <code class="literal">SHIFT_JIS</code>, and
        <code class="literal">Windows_31J</code> not recognized as aliases for
        <code class="literal">sjis</code>.
       (<a href="http://bugs.mysql.com/7607" target="_top">Bug#7607</a>)</p></li><li><p>
        Handle streaming result sets with more than 2 billion rows
        properly by fixing wraparound of row number counter.
       (<a href="http://bugs.mysql.com/7601" target="_top">Bug#7601</a>)</p></li><li><p>
        <code class="literal">PreparedStatement.fixDecimalExponent()</code> adding
        extra <code class="literal">+</code>, making number unparseable by MySQL
        server.
       (<a href="http://bugs.mysql.com/7601" target="_top">Bug#7601</a>)</p></li><li><p>
        Escape sequence {fn convert(..., type)} now supports ODBC-style
        types that are prepended by <code class="literal">SQL_</code>.
       (<a href="http://bugs.mysql.com/7601" target="_top">Bug#7601</a>)</p></li><li><p>
        Statements created from a pooled connection were returning
        physical connection instead of logical connection when
        <code class="literal">getConnection()</code> was called.
       (<a href="http://bugs.mysql.com/7316" target="_top">Bug#7316</a>)</p></li><li><p>
        Support new protocol type <code class="literal">MYSQL_TYPE_VARCHAR</code>.
       (<a href="http://bugs.mysql.com/7081" target="_top">Bug#7081</a>)</p></li><li><p>
        Added <code class="literal">useOldUTF8Behavior</code>' configuration
        property, which causes JDBC driver to act like it did with
        MySQL-4.0.x and earlier when the character encoding is
        <code class="literal">utf-8</code> when connected to MySQL-4.1 or newer.
       (<a href="http://bugs.mysql.com/7081" target="_top">Bug#7081</a>)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getIndexInfo()</code> ignored
        <code class="literal">unique</code> parameter.
       (<a href="http://bugs.mysql.com/7081" target="_top">Bug#7081</a>)</p></li><li><p>
        <code class="literal">PreparedStatement.fixDecimalExponent()</code> adding
        extra <code class="literal">+</code>, making number unparseable by MySQL
        server.
       (<a href="http://bugs.mysql.com/7061" target="_top">Bug#7061</a>)</p></li><li><p>
        <code class="literal">PreparedStatements</code> don't encode Big5 (and
        other multi-byte) character sets correctly in static SQL
        strings.
       (<a href="http://bugs.mysql.com/7033" target="_top">Bug#7033</a>)</p></li><li><p>
        Connections starting up failed-over (due to down master) never
        retry master.
       (<a href="http://bugs.mysql.com/6966" target="_top">Bug#6966</a>)</p></li><li><p>
        Adding <code class="literal">CP943</code> to aliases for
        <code class="literal">sjis</code>.
       (<a href="http://bugs.mysql.com/6549" target="_top">Bug#6549</a>, <a href="http://bugs.mysql.com/7607" target="_top">Bug#7607</a>)</p></li><li><p>
        <code class="literal">Timestamp</code>/<code class="literal">Time</code> conversion
        goes in the wrong “<span class="quote">direction</span>” when
        <code class="literal">useTimeZone=true</code> and server time zone differs
        from client time zone.
       (<a href="http://bugs.mysql.com/5874" target="_top">Bug#5874</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-16"></a>C.5.4.2. Changes in  MySQL Connector/J 3.0.16 (15 November 2004)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Made <code class="literal">TINYINT(1)</code> -&gt;
        <code class="literal">BIT</code>/<code class="literal">Boolean</code> conversion
        configurable via <code class="literal">tinyInt1isBit</code> property
        (default <code class="literal">true</code> to be JDBC compliant out of the
        box).
       (<a href="http://bugs.mysql.com/5664" target="_top">Bug#5664</a>)</p></li><li><p>
        Off-by-one bug in
        <code class="literal">Buffer.readString(<em class="replaceable"><code>string</code></em>)</code>.
       (<a href="http://bugs.mysql.com/5664" target="_top">Bug#5664</a>)</p></li><li><p>
        <code class="literal">ResultSet.updateByte()</code> when on insert row
        throws <code class="literal">ArrayOutOfBoundsException</code>.
       (<a href="http://bugs.mysql.com/5664" target="_top">Bug#5664</a>)</p></li><li><p>
        Fixed regression where <code class="literal">useUnbufferedInput</code> was
        defaulting to <code class="literal">false</code>.
       (<a href="http://bugs.mysql.com/5664" target="_top">Bug#5664</a>)</p></li><li><p>
        <code class="literal">ResultSet.getTimestamp()</code> on a column with
        <code class="literal">TIME</code> in it fails.
       (<a href="http://bugs.mysql.com/5664" target="_top">Bug#5664</a>)</p></li><li><p>
        Fixed <code class="literal">DatabaseMetaData.getTypes()</code> returning
        incorrect (this is, non-negative) scale for the
        <code class="literal">NUMERIC</code> type.
       (<a href="http://bugs.mysql.com/5664" target="_top">Bug#5664</a>)</p></li><li><p>
        Only set <code class="literal">character_set_results</code> during
        connection establishment if server version &gt;= 4.1.1.
       (<a href="http://bugs.mysql.com/5664" target="_top">Bug#5664</a>)</p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData.isReadOnly()</code> to
        detect non-writable columns when connected to MySQL-4.1 or
        newer, based on existence of “<span class="quote">original</span>” table and
        column names.
      </p></li><li><p>
        Re-issue character set configuration commands when re-using
        pooled connections and/or
        <code class="literal">Connection.changeUser()</code> when connected to
        MySQL-4.1 or newer.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-15"></a>C.5.4.3. Changes in  MySQL Connector/J 3.0.15 (04 September 2004)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">ResultSet.getMetaData()</code> should not return
        incorrectly initialized metadata if the result set has been
        closed, but should instead throw an
        <code class="literal">SQLException</code>. Also fixed for
        <code class="literal">getRow()</code> and <code class="literal">getWarnings()</code>
        and traversal methods by calling
        <code class="literal">checkClosed()</code> before operating on
        instance-level fields that are nullified during
        <code class="literal">.close()</code>.
       (<a href="http://bugs.mysql.com/5069" target="_top">Bug#5069</a>)</p></li><li><p>
        Use <code class="literal">_binary</code> introducer for
        <code class="literal">PreparedStatement.setBytes()</code> and
        <code class="literal">set*Stream()</code> when connected to MySQL-4.1.x or
        newer to avoid misinterpretation during character conversion.
       (<a href="http://bugs.mysql.com/5069" target="_top">Bug#5069</a>)</p></li><li><p>
        Parse new time zone variables from 4.1.x servers.
       (<a href="http://bugs.mysql.com/5069" target="_top">Bug#5069</a>)</p></li><li><p>
        <code class="literal">ResultSet</code> should release
        <code class="literal">Field[]</code> instance in
        <code class="literal">.close()</code>.
       (<a href="http://bugs.mysql.com/5022" target="_top">Bug#5022</a>)</p></li><li><p>
        <code class="literal">RSMD.getPrecision()</code> returning 0 for
        non-numeric types (should return max length in chars for
        non-binary types, max length in bytes for binary types). This
        fix also fixes mapping of
        <code class="literal">RSMD.getColumnType()</code> and
        <code class="literal">RSMD.getColumnTypeName()</code> for the
        <code class="literal">BLOB</code> types based on the length sent from the
        server (the server doesn't distinguish between
        <code class="literal">TINYBLOB</code>, <code class="literal">BLOB</code>,
        <code class="literal">MEDIUMBLOB</code> or <code class="literal">LONGBLOB</code> at
        the network protocol level).
       (<a href="http://bugs.mysql.com/4880" target="_top">Bug#4880</a>)</p></li><li><p>
        “<span class="quote">Production</span>” is now “<span class="quote">GA</span>” (General
        Availability) in naming scheme of distributions.
       (<a href="http://bugs.mysql.com/4860" target="_top">Bug#4860</a>, <a href="http://bugs.mysql.com/4138" target="_top">Bug#4138</a>)</p></li><li><p>
        <code class="literal">DBMD.getColumns()</code> returns incorrect JDBC type
        for unsigned columns. This affects type mappings for all numeric
        types in the <code class="literal">RSMD.getColumnType()</code> and
        <code class="literal">RSMD.getColumnTypeNames()</code> methods as well, to
        ensure that “<span class="quote">like</span>” types from
        <code class="literal">DBMD.getColumns()</code> match up with what
        <code class="literal">RSMD.getColumnType()</code> and
        <code class="literal">getColumnTypeNames()</code> return.
       (<a href="http://bugs.mysql.com/4860" target="_top">Bug#4860</a>, <a href="http://bugs.mysql.com/4138" target="_top">Bug#4138</a>)</p></li><li><p>
        Calling <code class="literal">.close()</code> twice on a
        <code class="literal">PooledConnection</code> causes NPE.
       (<a href="http://bugs.mysql.com/4808" target="_top">Bug#4808</a>)</p></li><li><p>
        <code class="literal">DOUBLE</code> mapped twice in
        <code class="literal">DBMD.getTypeInfo()</code>.
       (<a href="http://bugs.mysql.com/4742" target="_top">Bug#4742</a>)</p></li><li><p>
        Added FLOSS license exemption.
       (<a href="http://bugs.mysql.com/4742" target="_top">Bug#4742</a>)</p></li><li><p>
        Removed redundant calls to <code class="literal">checkRowPos()</code> in
        <code class="literal">ResultSet</code>.
       (<a href="http://bugs.mysql.com/4334" target="_top">Bug#4334</a>)</p></li><li><p>
        Failover for <code class="literal">autoReconnect</code> not using port
        numbers for any hosts, and not retrying all hosts.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          This required a change to the <code class="literal">SocketFactory</code>
          <code class="literal">connect()</code> method signature, which is now
          <code class="literal">public Socket connect(String host, int portNumber,
          Properties props)</code>; therefore, any third-party socket
          factories will have to be changed to support this signature.
        </p></div><p>(<a href="http://bugs.mysql.com/4334" target="_top">Bug#4334</a>)</p></li><li><p>
        Logical connections created by
        <code class="literal">MysqlConnectionPoolDataSource</code> will now issue
        a <code class="literal">rollback()</code> when they are closed and sent
        back to the pool. If your application server/connection pool
        already does this for you, you can set the
        <code class="literal">rollbackOnPooledClose</code> property to
        <code class="literal">false</code> to avoid the overhead of an extra
        <code class="literal">rollback()</code>.
       (<a href="http://bugs.mysql.com/4334" target="_top">Bug#4334</a>)</p></li><li><p>
        <code class="literal">StringUtils.escapeEasternUnicodeByteStream</code>
        was still broken for GBK.
       (<a href="http://bugs.mysql.com/4010" target="_top">Bug#4010</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-14"></a>C.5.4.4. Changes in  MySQL Connector/J 3.0.14 (28 May 2004)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed URL parsing error.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-13"></a>C.5.4.5. Changes in  MySQL Connector/J 3.0.13 (27 May 2004)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">No Database Selected</code> when using
        <code class="literal">MysqlConnectionPoolDataSource</code>.
       (<a href="http://bugs.mysql.com/3920" target="_top">Bug#3920</a>)</p></li><li><p>
        <code class="literal">PreparedStatement.getGeneratedKeys()</code> method
        returns only 1 result for batched insertions.
       (<a href="http://bugs.mysql.com/3873" target="_top">Bug#3873</a>)</p></li><li><p>
        Using a <code class="literal">MySQLDatasource</code> without server name
        fails.
       (<a href="http://bugs.mysql.com/3848" target="_top">Bug#3848</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-12"></a>C.5.4.6. Changes in  MySQL Connector/J 3.0.12 (18 May 2004)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Inconsistent reporting of data type. The server still doesn't
        return all types for *BLOBs *TEXT correctly, so the driver won't
        return those correctly.
       (<a href="http://bugs.mysql.com/3570" target="_top">Bug#3570</a>)</p></li><li><p>
        <code class="literal">UpdatableResultSet</code> not picking up default
        values for <code class="literal">moveToInsertRow()</code>.
       (<a href="http://bugs.mysql.com/3557" target="_top">Bug#3557</a>)</p></li><li><p>
        Not specifying database in URL caused
        <code class="literal">MalformedURL</code> exception.
       (<a href="http://bugs.mysql.com/3554" target="_top">Bug#3554</a>)</p></li><li><p>
        Auto-convert MySQL encoding names to Java encoding names if used
        for <code class="literal">characterEncoding</code> property.
       (<a href="http://bugs.mysql.com/3554" target="_top">Bug#3554</a>)</p></li><li><p>
        Use <code class="literal">junit.textui.TestRunner</code> for all unit
        tests (to allow them to be run from the command line outside of
        Ant or Eclipse).
       (<a href="http://bugs.mysql.com/3554" target="_top">Bug#3554</a>)</p></li><li><p>
        Added encoding names that are recognized on some JVMs to fix
        case where they were reverse-mapped to MySQL encoding names
        incorrectly.
       (<a href="http://bugs.mysql.com/3554" target="_top">Bug#3554</a>)</p></li><li><p>
        Made <code class="literal">StringRegressionTest</code> 4.1-unicode aware.
       (<a href="http://bugs.mysql.com/3520" target="_top">Bug#3520</a>)</p></li><li><p>
        Fixed regression in
        <code class="literal">PreparedStatement.setString()</code> and eastern
        character encodings.
       (<a href="http://bugs.mysql.com/3520" target="_top">Bug#3520</a>)</p></li><li><p>
        <code class="literal">DBMD.getSQLStateType()</code> returns incorrect
        value.
       (<a href="http://bugs.mysql.com/3520" target="_top">Bug#3520</a>)</p></li><li><p>
        Renamed <code class="literal">StringUtils.escapeSJISByteStream()</code> to
        more appropriate
        <code class="literal">escapeEasternUnicodeByteStream()</code>.
       (<a href="http://bugs.mysql.com/3511" target="_top">Bug#3511</a>)</p></li><li><p>
        <code class="literal">StringUtils.escapeSJISByteStream()</code> not
        covering all eastern double-byte charsets correctly.
       (<a href="http://bugs.mysql.com/3511" target="_top">Bug#3511</a>)</p></li><li><p>
        Return creating statement for <code class="literal">ResultSets</code>
        created by <code class="literal">getGeneratedKeys()</code>.
       (<a href="http://bugs.mysql.com/2957" target="_top">Bug#2957</a>)</p></li><li><p>
        Use <code class="literal">SET character_set_results</code> during
        initialization to allow any charset to be returned to the driver
        for result sets.
       (<a href="http://bugs.mysql.com/2670" target="_top">Bug#2670</a>)</p></li><li><p>
        Don't truncate <code class="literal">BLOB</code> or
        <code class="literal">CLOB</code> values when using
        <code class="literal">setBytes()</code> and/or
        <code class="literal">setBinary/CharacterStream()</code>. .
       (<a href="http://bugs.mysql.com/2670" target="_top">Bug#2670</a>)</p></li><li><p>
        Dynamically configure character set mappings for field-level
        character sets on MySQL-4.1.0 and newer using <code class="literal">SHOW
        COLLATION</code> when connecting.
       (<a href="http://bugs.mysql.com/2670" target="_top">Bug#2670</a>)</p></li><li><p>
        Map <code class="literal">binary</code> character set to
        <code class="literal">US-ASCII</code> to support
        <code class="literal">DATETIME</code> charset recognition for servers
        &gt;= 4.1.2.
       (<a href="http://bugs.mysql.com/2670" target="_top">Bug#2670</a>)</p></li><li><p>
        Use <code class="literal">charsetnr</code> returned during connect to
        encode queries before issuing <code class="literal">SET NAMES</code> on
        MySQL &gt;= 4.1.0.
       (<a href="http://bugs.mysql.com/2670" target="_top">Bug#2670</a>)</p></li><li><p>
        Add helper methods to <code class="literal">ResultSetMetaData</code>
        (<code class="literal">getColumnCharacterEncoding()</code> and
        <code class="literal">getColumnCharacterSet()</code>) to allow end-users
        to see what charset the driver thinks it should be using for the
        column.
       (<a href="http://bugs.mysql.com/2670" target="_top">Bug#2670</a>)</p></li><li><p>
        Only set <code class="literal">character_set_results</code> for MySQL
        &gt;= 4.1.0.
       (<a href="http://bugs.mysql.com/2670" target="_top">Bug#2670</a>)</p></li><li><p>
        Allow <code class="literal">url</code> parameter for
        <code class="literal">MysqlDataSource</code> and
        <code class="literal">MysqlConnectionPool</code>
        <code class="literal">DataSource</code> so that passing of other
        properties is possible from inside appservers.
      </p></li><li><p>
        Don't escape SJIS/GBK/BIG5 when using MySQL-4.1 or newer.
      </p></li><li><p>
        Backport documentation tooling from 3.1 branch.
      </p></li><li><p>
        Added <code class="literal">failOverReadOnly</code> property, to allow
        end-user to configure state of connection (read-only/writable)
        when failed over.
      </p></li><li><p>
        Allow <code class="literal">java.util.Date</code> to be sent in as
        parameter to <code class="literal">PreparedStatement.setObject()</code>,
        converting it to a <code class="literal">Timestamp</code> to maintain full
        precision. .
       (<a href="http://bugs.mysql.com/103" target="_top">Bug#103</a>)</p></li><li><p>
        Add unsigned attribute to
        <code class="literal">DatabaseMetaData.getColumns()</code> output in the
        <code class="literal">TYPE_NAME</code> column.
      </p></li><li><p>
        Map duplicate key and foreign key errors to SQLState of
        <code class="literal">23000</code>.
      </p></li><li><p>
        Backported “<span class="quote">change user</span>” and “<span class="quote">reset server
        state</span>” functionality from 3.1 branch, to allow clients of
        <code class="literal">MysqlConnectionPoolDataSource</code> to reset server
        state on <code class="literal">getConnection()</code> on a pooled
        connection.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-11"></a>C.5.4.7. Changes in  MySQL Connector/J 3.0.11 (19 February 2004)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Return <code class="literal">java.lang.Double</code> for
        <code class="literal">FLOAT</code> type from
        <code class="literal">ResultSetMetaData.getColumnClassName()</code>.
       (<a href="http://bugs.mysql.com/2855" target="_top">Bug#2855</a>)</p></li><li><p>
        Return <code class="literal">[B</code> instead of
        <code class="literal">java.lang.Object</code> for
        <code class="literal">BINARY</code>, <code class="literal">VARBINARY</code> and
        <code class="literal">LONGVARBINARY</code> types from
        <code class="literal">ResultSetMetaData.getColumnClassName()</code> (JDBC
        compliance).
       (<a href="http://bugs.mysql.com/2855" target="_top">Bug#2855</a>)</p></li><li><p>
        Issue connection events on all instances created from a
        <code class="literal">ConnectionPoolDataSource</code>.
       (<a href="http://bugs.mysql.com/2855" target="_top">Bug#2855</a>)</p></li><li><p>
        Return <code class="literal">java.lang.Integer</code> for
        <code class="literal">TINYINT</code> and <code class="literal">SMALLINT</code> types
        from <code class="literal">ResultSetMetaData.getColumnClassName()</code>.
       (<a href="http://bugs.mysql.com/2852" target="_top">Bug#2852</a>)</p></li><li><p>
        Added <code class="literal">useUnbufferedInput</code> parameter, and now
        use it by default (due to JVM issue
        <a href="http://developer.java.sun.com/developer/bugParade/bugs/4401235.html" target="_top">http://developer.java.sun.com/developer/bugParade/bugs/4401235.html</a>)
       (<a href="http://bugs.mysql.com/2578" target="_top">Bug#2578</a>)</p></li><li><p>
        Fixed failover always going to last host in list.
       (<a href="http://bugs.mysql.com/2578" target="_top">Bug#2578</a>)</p></li><li><p>
        Detect <code class="literal">on</code>/<code class="literal">off</code> or
        <code class="literal">1</code>, <code class="literal">2</code>, <code class="literal">3</code>
        form of <code class="literal">lower_case_table_names</code> value on
        server.
       (<a href="http://bugs.mysql.com/2578" target="_top">Bug#2578</a>)</p></li><li><p>
        <code class="literal">AutoReconnect</code> time was growing faster than
        exponentially.
       (<a href="http://bugs.mysql.com/2447" target="_top">Bug#2447</a>)</p></li><li><p>
        Trigger a <code class="literal">SET NAMES utf8</code> when encoding is
        forced to <code class="literal">utf8</code> <span class="emphasis"><em>or</em></span>
        <code class="literal">utf-8</code> via the
        <code class="literal">characterEncoding</code> property. Previously, only
        the Java-style encoding name of <code class="literal">utf-8</code> would
        trigger this.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-10"></a>C.5.4.8. Changes in  MySQL Connector/J 3.0.10 (13 January 2004)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Enable caching of the parsing stage of prepared statements via
        the <code class="literal">cachePrepStmts</code>,
        <code class="literal">prepStmtCacheSize</code>, and
        <code class="literal">prepStmtCacheSqlLimit</code> properties (disabled by
        default).
       (<a href="http://bugs.mysql.com/2006" target="_top">Bug#2006</a>)</p></li><li><p>
        Fixed security exception when used in Applets (applets can't
        read the system property <code class="literal">file.encoding</code> which
        is needed for <code class="literal">LOAD DATA LOCAL INFILE</code>).
       (<a href="http://bugs.mysql.com/2006" target="_top">Bug#2006</a>)</p></li><li><p>
        Speed up parsing of <code class="literal">PreparedStatements</code>, try
        to use one-pass whenever possible.
       (<a href="http://bugs.mysql.com/2006" target="_top">Bug#2006</a>)</p></li><li><p>
        Fixed exception <code class="literal">Unknown character set
        'danish'</code> on connect with JDK-1.4.0
       (<a href="http://bugs.mysql.com/2006" target="_top">Bug#2006</a>)</p></li><li><p>
        Fixed mappings in SQLError to report deadlocks with SQLStates of
        <code class="literal">41000</code>.
       (<a href="http://bugs.mysql.com/2006" target="_top">Bug#2006</a>)</p></li><li><p>
        Removed static synchronization bottleneck from instance factory
        method of <code class="literal">SingleByteCharsetConverter</code>.
       (<a href="http://bugs.mysql.com/2006" target="_top">Bug#2006</a>)</p></li><li><p>
        Removed static synchronization bottleneck from
        <code class="literal">PreparedStatement.setTimestamp()</code>.
       (<a href="http://bugs.mysql.com/2006" target="_top">Bug#2006</a>)</p></li><li><p>
        <code class="literal">ResultSet.findColumn()</code> should use first
        matching column name when there are duplicate column names in
        <code class="literal">SELECT</code> query (JDBC-compliance).
       (<a href="http://bugs.mysql.com/2006" target="_top">Bug#2006</a>)</p></li><li><p>
        <code class="literal">maxRows</code> property would affect internal
        statements, so check it for all statement creation internal to
        the driver, and set to 0 when it is not.
       (<a href="http://bugs.mysql.com/2006" target="_top">Bug#2006</a>)</p></li><li><p>
        Use constants for SQLStates.
       (<a href="http://bugs.mysql.com/2006" target="_top">Bug#2006</a>)</p></li><li><p>
        Map charset <code class="literal">ko18_ru</code> to
        <code class="literal">ko18r</code> when connected to MySQL-4.1.0 or newer.
       (<a href="http://bugs.mysql.com/2006" target="_top">Bug#2006</a>)</p></li><li><p>
        Ensure that <code class="literal">Buffer.writeString()</code> saves room
        for the <code class="literal">\0</code>.
       (<a href="http://bugs.mysql.com/2006" target="_top">Bug#2006</a>)</p></li><li><p>
        <code class="literal">ArrayIndexOutOfBounds</code> when parameter number
        == number of parameters + 1.
       (<a href="http://bugs.mysql.com/1958" target="_top">Bug#1958</a>)</p></li><li><p>
        Connection property <code class="literal">maxRows</code> not honored.
       (<a href="http://bugs.mysql.com/1933" target="_top">Bug#1933</a>)</p></li><li><p>
        Statements being created too many times in
        <code class="literal">DBMD.extractForeignKeyFromCreateTable()</code>.
       (<a href="http://bugs.mysql.com/1925" target="_top">Bug#1925</a>)</p></li><li><p>
        Support escape sequence {fn convert ... }.
       (<a href="http://bugs.mysql.com/1914" target="_top">Bug#1914</a>)</p></li><li><p>
        Implement <code class="literal">ResultSet.updateClob()</code>.
       (<a href="http://bugs.mysql.com/1913" target="_top">Bug#1913</a>)</p></li><li><p>
        Autoreconnect code didn't set catalog upon reconnect if it had
        been changed.
       (<a href="http://bugs.mysql.com/1913" target="_top">Bug#1913</a>)</p></li><li><p>
        <code class="literal">ResultSet.getObject()</code> on
        <code class="literal">TINYINT</code> and <code class="literal">SMALLINT</code>
        columns should return Java type <code class="literal">Integer</code>.
       (<a href="http://bugs.mysql.com/1913" target="_top">Bug#1913</a>)</p></li><li><p>
        Added more descriptive error message <code class="literal">Server
        Configuration Denies Access to DataSource</code>, as well as
        retrieval of message from server.
       (<a href="http://bugs.mysql.com/1913" target="_top">Bug#1913</a>)</p></li><li><p>
        <code class="literal">ResultSetMetaData.isCaseSensitive()</code> returned
        wrong value for
        <code class="literal">CHAR</code>/<code class="literal">VARCHAR</code> columns.
       (<a href="http://bugs.mysql.com/1913" target="_top">Bug#1913</a>)</p></li><li><p>
        Added <code class="literal">alwaysClearStream</code> connection property,
        which causes the driver to always empty any remaining data on
        the input stream before each query.
       (<a href="http://bugs.mysql.com/1913" target="_top">Bug#1913</a>)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getSystemFunction()</code>
        returning bad function <code class="literal">VResultsSion</code>.
       (<a href="http://bugs.mysql.com/1775" target="_top">Bug#1775</a>)</p></li><li><p>
        Foreign Keys column sequence is not consistent in
        <code class="literal">DatabaseMetaData.getImported/Exported/CrossReference()</code>.
       (<a href="http://bugs.mysql.com/1731" target="_top">Bug#1731</a>)</p></li><li><p>
        Fix for <code class="literal">ArrayIndexOutOfBounds</code> exception when
        using <code class="literal">Statement.setMaxRows()</code>.
       (<a href="http://bugs.mysql.com/1695" target="_top">Bug#1695</a>)</p></li><li><p>
        Subsequent call to <code class="literal">ResultSet.updateFoo()</code>
        causes NPE if result set is not updatable.
       (<a href="http://bugs.mysql.com/1630" target="_top">Bug#1630</a>)</p></li><li><p>
        Fix for 4.1.1-style authentication with no password.
       (<a href="http://bugs.mysql.com/1630" target="_top">Bug#1630</a>)</p></li><li><p>
        Cross-database updatable result sets are not checked for
        updatability correctly.
       (<a href="http://bugs.mysql.com/1592" target="_top">Bug#1592</a>)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getColumns()</code> should return
        <code class="literal">Types.LONGVARCHAR</code> for MySQL
        <code class="literal">LONGTEXT</code> type.
       (<a href="http://bugs.mysql.com/1592" target="_top">Bug#1592</a>)</p></li><li><p>
        Fixed regression of
        <code class="literal">Statement.getGeneratedKeys()</code> and
        <code class="literal">REPLACE</code> statements.
       (<a href="http://bugs.mysql.com/1576" target="_top">Bug#1576</a>)</p></li><li><p>
        Barge blobs and split packets not being read correctly.
       (<a href="http://bugs.mysql.com/1576" target="_top">Bug#1576</a>)</p></li><li><p>
        Backported fix for aliased tables and
        <code class="literal">UpdatableResultSets</code> in
        <code class="literal">checkUpdatability()</code> method from 3.1 branch.
       (<a href="http://bugs.mysql.com/1534" target="_top">Bug#1534</a>)</p></li><li><p>
        “<span class="quote">Friendlier</span>” exception message for
        <code class="literal">PacketTooLargeException</code>.
       (<a href="http://bugs.mysql.com/1534" target="_top">Bug#1534</a>)</p></li><li><p>
        Don't count quoted IDs when inside a 'string' in
        <code class="literal">PreparedStatement</code> parsing.
       (<a href="http://bugs.mysql.com/1511" target="_top">Bug#1511</a>)</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-9"></a>C.5.4.9. Changes in  MySQL Connector/J 3.0.9 (07 October 2003)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">ResultSet.get/setString</code> mashing char 127.
       (<a href="http://bugs.mysql.com/1247" target="_top">Bug#1247</a>)</p></li><li><p>
        Added property to “<span class="quote">clobber</span>” streaming results, by
        setting the <code class="literal">clobberStreamingResults</code> property
        to <code class="literal">true</code> (the default is
        <code class="literal">false</code>). This will cause a
        “<span class="quote">streaming</span>” <code class="literal">ResultSet</code> to be
        automatically closed, and any oustanding data still streaming
        from the server to be discarded if another query is executed
        before all the data has been read from the server.
       (<a href="http://bugs.mysql.com/1247" target="_top">Bug#1247</a>)</p></li><li><p>
        Added <code class="literal">com.mysql.jdbc.util.BaseBugReport</code> to
        help creation of testcases for bug reports.
       (<a href="http://bugs.mysql.com/1247" target="_top">Bug#1247</a>)</p></li><li><p>
        Backported authentication changes for 4.1.1 and newer from 3.1
        branch.
       (<a href="http://bugs.mysql.com/1247" target="_top">Bug#1247</a>)</p></li><li><p>
        Made <code class="literal">databaseName</code>,
        <code class="literal">portNumber</code>, and <code class="literal">serverName</code>
        optional parameters for
        <code class="literal">MysqlDataSourceFactory</code>.
       (<a href="http://bugs.mysql.com/1246" target="_top">Bug#1246</a>)</p></li><li><p>
        Optimized <code class="literal">CLOB.setChracterStream()</code>.
       (<a href="http://bugs.mysql.com/1131" target="_top">Bug#1131</a>)</p></li><li><p>
        Fixed <code class="literal">CLOB.truncate()</code>.
       (<a href="http://bugs.mysql.com/1130" target="_top">Bug#1130</a>)</p></li><li><p>
        Fixed deadlock issue with
        <code class="literal">Statement.setMaxRows()</code>.
       (<a href="http://bugs.mysql.com/1099" target="_top">Bug#1099</a>)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getColumns()</code> getting
        confused about the keyword “<span class="quote">set</span>” in character
        columns.
       (<a href="http://bugs.mysql.com/1099" target="_top">Bug#1099</a>)</p></li><li><p>
        Clip +/- INF (to smallest and largest representative values for
        the type in MySQL) and NaN (to 0) for
        <code class="literal">setDouble</code>/<code class="literal">setFloat()</code>, and
        issue a warning on the statement when the server does not
        support +/- INF or NaN.
       (<a href="http://bugs.mysql.com/884" target="_top">Bug#884</a>)</p></li><li><p>
        Don't fire connection closed events when closing pooled
        connections, or on
        <code class="literal">PooledConnection.getConnection()</code> with already
        open connections.
       (<a href="http://bugs.mysql.com/884" target="_top">Bug#884</a>)</p></li><li><p>
        Double-escaping of <code class="literal">'\'</code> when charset is SJIS
        or GBK and <code class="literal">'\'</code> appears in non-escaped input.
       (<a href="http://bugs.mysql.com/879" target="_top">Bug#879</a>)</p></li><li><p>
        When emptying input stream of unused rows for
        “<span class="quote">streaming</span>” result sets, have the current thread
        <code class="literal">yield()</code> every 100 rows in order to not
        monopolize CPU time.
       (<a href="http://bugs.mysql.com/879" target="_top">Bug#879</a>)</p></li><li><p>
        Issue exception on
        <code class="literal">ResultSet.get<em class="replaceable"><code>XXX</code></em>()</code>
        on empty result set (wasn't caught in some cases).
       (<a href="http://bugs.mysql.com/848" target="_top">Bug#848</a>)</p></li><li><p>
        Don't hide messages from exceptions thrown in I/O layers.
       (<a href="http://bugs.mysql.com/848" target="_top">Bug#848</a>)</p></li><li><p>
        Fixed regression in large split-packet handling.
       (<a href="http://bugs.mysql.com/848" target="_top">Bug#848</a>)</p></li><li><p>
        Better diagnostic error messages in exceptions for
        “<span class="quote">streaming</span>” result sets.
       (<a href="http://bugs.mysql.com/848" target="_top">Bug#848</a>)</p></li><li><p>
        Don't change timestamp TZ twice if
        <code class="literal">useTimezone==true</code>.
       (<a href="http://bugs.mysql.com/774" target="_top">Bug#774</a>)</p></li><li><p>
        Don't wrap <code class="literal">SQLExceptions</code> in
        <code class="literal">RowDataDynamic</code>.
       (<a href="http://bugs.mysql.com/688" target="_top">Bug#688</a>)</p></li><li><p>
        Don't try and reset isolation level on reconnect if MySQL
        doesn't support them.
       (<a href="http://bugs.mysql.com/688" target="_top">Bug#688</a>)</p></li><li><p>
        The <code class="literal">insertRow</code> in an
        <code class="literal">UpdatableResultSet</code> is now loaded with the
        default column values when <code class="literal">moveToInsertRow()</code>
        is called.
       (<a href="http://bugs.mysql.com/688" target="_top">Bug#688</a>)</p></li><li><p>
        <code class="literal">DatabaseMetaData.getColumns()</code> wasn't
        returning <code class="literal">NULL</code> for default values that are
        specified as <code class="literal">NULL</code>.
       (<a href="http://bugs.mysql.com/688" target="_top">Bug#688</a>)</p></li><li><p>
        Change default statement type/concurrency to
        <code class="literal">TYPE_FORWARD_ONLY</code> and
        <code class="literal">CONCUR_READ_ONLY</code> (spec compliance).
       (<a href="http://bugs.mysql.com/688" target="_top">Bug#688</a>)</p></li><li><p>
        Fix <code class="literal">UpdatableResultSet</code> to return values for
        <code class="literal">get<em class="replaceable"><code>XXX</code></em>()</code> when on
        insert row.
       (<a href="http://bugs.mysql.com/675" target="_top">Bug#675</a>)</p></li><li><p>
        Support <code class="literal">InnoDB</code> contraint names when
        extracting foreign key information in
        <code class="literal">DatabaseMetaData</code> (implementing ideas from
        Parwinder Sekhon).
       (<a href="http://bugs.mysql.com/664" target="_top">Bug#664</a>, <a href="http://bugs.mysql.com/517" target="_top">Bug#517</a>)</p></li><li><p>
        Backported 4.1 protocol changes from 3.1 branch (server-side SQL
        states, new field information, larger client capability flags,
        connect-with-database, and so forth).
       (<a href="http://bugs.mysql.com/664" target="_top">Bug#664</a>, <a href="http://bugs.mysql.com/517" target="_top">Bug#517</a>)</p></li><li><p>
        <code class="literal">refreshRow</code> didn't work when primary key
        values contained values that needed to be escaped (they ended up
        being doubly escaped).
       (<a href="http://bugs.mysql.com/661" target="_top">Bug#661</a>)</p></li><li><p>
        Fixed <code class="literal">ResultSet.previous()</code> behavior to move
        current position to before result set when on first row of
        result set.
       (<a href="http://bugs.mysql.com/496" target="_top">Bug#496</a>)</p></li><li><p>
        Fixed <code class="literal">Statement</code> and
        <code class="literal">PreparedStatement</code> issuing bogus queries when
        <code class="literal">setMaxRows()</code> had been used and a
        <code class="literal">LIMIT</code> clause was present in the query.
       (<a href="http://bugs.mysql.com/496" target="_top">Bug#496</a>)</p></li><li><p>
        Faster date handling code in <code class="literal">ResultSet</code> and
        <code class="literal">PreparedStatement</code> (no longer uses
        <code class="literal">Date</code> methods that synchronize on static
        calendars).
      </p></li><li><p>
        Fixed test for end of buffer in
        <code class="literal">Buffer.readString()</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-8"></a>C.5.4.10. Changes in  MySQL Connector/J 3.0.8 (23 May 2003)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed SJIS encoding bug, thanks to Naoto Sato.
       (<a href="http://bugs.mysql.com/378" target="_top">Bug#378</a>)</p></li><li><p>
        Fix problem detecting server character set in some cases.
       (<a href="http://bugs.mysql.com/378" target="_top">Bug#378</a>)</p></li><li><p>
        Allow multiple calls to <code class="literal">Statement.close()</code>.
       (<a href="http://bugs.mysql.com/378" target="_top">Bug#378</a>)</p></li><li><p>
        Return correct number of generated keys when using
        <code class="literal">REPLACE</code> statements.
       (<a href="http://bugs.mysql.com/378" target="_top">Bug#378</a>)</p></li><li><p>
        Unicode character 0xFFFF in a string would cause the driver to
        throw an <code class="literal">ArrayOutOfBoundsException</code>. .
       (<a href="http://bugs.mysql.com/378" target="_top">Bug#378</a>)</p></li><li><p>
        Fix row data decoding error when using <span class="emphasis"><em>very</em></span>
        large packets.
       (<a href="http://bugs.mysql.com/378" target="_top">Bug#378</a>)</p></li><li><p>
        Optimized row data decoding.
       (<a href="http://bugs.mysql.com/378" target="_top">Bug#378</a>)</p></li><li><p>
        Issue exception when operating on an already closed prepared
        statement.
       (<a href="http://bugs.mysql.com/378" target="_top">Bug#378</a>)</p></li><li><p>
        Optimized usage of <code class="literal">EscapeProcessor</code>.
       (<a href="http://bugs.mysql.com/378" target="_top">Bug#378</a>)</p></li><li><p>
        Use JVM charset with filenames and <code class="literal">LOAD DATA [LOCAL]
        INFILE</code>.
      </p></li><li><p>
        Fix infinite loop with <code class="literal">Connection.cleanup()</code>.
      </p></li><li><p>
        Changed Ant target <code class="literal">compile-core</code> to
        <code class="literal">compile-driver</code>, and made testsuite
        compilation a separate target.
      </p></li><li><p>
        Fixed result set not getting set for
        <code class="literal">Statement.executeUpdate()</code>, which affected
        <code class="literal">getGeneratedKeys()</code> and
        <code class="literal">getUpdateCount()</code> in some cases.
      </p></li><li><p>
        Return list of generated keys when using multi-value
        <code class="literal">INSERTS</code> with
        <code class="literal">Statement.getGeneratedKeys()</code>.
      </p></li><li><p>
        Allow bogus URLs in <code class="literal">Driver.getPropertyInfo()</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-7"></a>C.5.4.11. Changes in  MySQL Connector/J 3.0.7 (08 April 2003)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed charset issues with database metadata (charset was not
        getting set correctly).
      </p></li><li><p>
        You can now toggle profiling on/off using
        <code class="literal">Connection.setProfileSql(boolean)</code>.
      </p></li><li><p>
        4.1 Column Metadata fixes.
      </p></li><li><p>
        Fixed <code class="literal">MysqlPooledConnection.close()</code> calling
        wrong event type.
      </p></li><li><p>
        Fixed <code class="literal">StringIndexOutOfBoundsException</code> in
        <code class="literal">PreparedStatement.setClob()</code>.
      </p></li><li><p>
        <code class="literal">IOExceptions</code> during a transaction now cause
        the <code class="literal">Connection</code> to be closed.
      </p></li><li><p>
        Remove synchronization from <code class="literal">Driver.connect()</code>
        and <code class="literal">Driver.acceptsUrl()</code>.
      </p></li><li><p>
        Fixed missing conversion for <code class="literal">YEAR</code> type in
        <code class="literal">ResultSetMetaData.getColumnTypeName()</code>.
      </p></li><li><p>
        Updatable <code class="literal">ResultSets</code> can now be created for
        aliased tables/columns when connected to MySQL-4.1 or newer.
      </p></li><li><p>
        Fixed <code class="literal">LOAD DATA LOCAL INFILE</code> bug when file
        &gt; <code class="literal">max_allowed_packet</code>.
      </p></li><li><p>
        Don't pick up indexes that start with <code class="literal">pri</code> as
        primary keys for <code class="literal">DBMD.getPrimaryKeys()</code>.
      </p></li><li><p>
        Ensure that packet size from
        <code class="literal">alignPacketSize()</code> does not exceed
        <code class="literal">max_allowed_packet</code> (JVM bug)
      </p></li><li><p>
        Don't reset <code class="literal">Connection.isReadOnly()</code> when
        autoReconnecting.
      </p></li><li><p>
        Fixed escaping of 0x5c (<code class="literal">'\'</code>) character for
        GBK and Big5 charsets.
      </p></li><li><p>
        Fixed <code class="literal">ResultSet.getTimestamp()</code> when
        underlying field is of type <code class="literal">DATE</code>.
      </p></li><li><p>
        Throw <code class="literal">SQLExceptions</code> when trying to do
        operations on a forcefully closed <code class="literal">Connection</code>
        (that is, when a communication link failure occurs).
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-6"></a>C.5.4.12. Changes in  MySQL Connector/J 3.0.6 (18 February 2003)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Backported 4.1 charset field info changes from Connector/J 3.1.
      </p></li><li><p>
        Fixed <code class="literal">Statement.setMaxRows()</code> to stop sending
        <code class="literal">LIMIT</code> type queries when not needed
        (performance).
      </p></li><li><p>
        Fixed <code class="literal">DBMD.getTypeInfo()</code> and
        <code class="literal">DBMD.getColumns()</code> returning different value
        for precision in <code class="literal">TEXT</code> and
        <code class="literal">BLOB</code> types.
      </p></li><li><p>
        Fixed <code class="literal">SQLExceptions</code> getting swallowed on
        initial connect.
      </p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData</code> to return
        <code class="literal">""</code> when catalog not known. Fixes
        <code class="literal">NullPointerExceptions</code> with Sun's
        <code class="literal">CachedRowSet</code>.
      </p></li><li><p>
        Allow ignoring of warning for “<span class="quote">non transactional
        tables</span>” during rollback (compliance/usability) by setting
        <code class="literal">ignoreNonTxTables</code> property to
        <code class="literal">true</code>.
      </p></li><li><p>
        Clean up <code class="literal">Statement</code> query/method mismatch
        tests (that is, <code class="literal">INSERT</code> not allowed with
        <code class="literal">.executeQuery()</code>).
      </p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData.isWritable()</code> to
        return correct value.
      </p></li><li><p>
        More checks added in <code class="literal">ResultSet</code> traversal
        method to catch when in closed state.
      </p></li><li><p>
        Implemented <code class="literal">Blob.setBytes()</code>. You still need
        to pass the resultant <code class="literal">Blob</code> back into an
        updatable <code class="literal">ResultSet</code> or
        <code class="literal">PreparedStatement</code> to persist the changes,
        because MySQL does not support “<span class="quote">locators</span>”.
      </p></li><li><p>
        Add “<span class="quote">window</span>” of different <code class="literal">NULL</code>
        sorting behavior to
        <code class="literal">DBMD.nullsAreSortedAtStart</code> (4.0.2 to 4.0.10,
        true; otherwise, no).
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-5"></a>C.5.4.13. Changes in  MySQL Connector/J 3.0.5 (22 January 2003)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed <code class="literal">ResultSet.isBeforeFirst()</code> for empty
        result sets.
      </p></li><li><p>
        Added missing <code class="literal">LONGTEXT</code> type to
        <code class="literal">DBMD.getColumns()</code>.
      </p></li><li><p>
        Implemented an empty <code class="literal">TypeMap</code> for
        <code class="literal">Connection.getTypeMap()</code> so that some
        third-party apps work with MySQL (IBM WebSphere 5.0 Connection
        pool).
      </p></li><li><p>
        Added update options for foreign key metadata.
      </p></li><li><p>
        Fixed <code class="literal">Buffer.fastSkipLenString()</code> causing
        <code class="literal">ArrayIndexOutOfBounds</code> exceptions with some
        queries when unpacking fields.
      </p></li><li><p>
        Quote table names in
        <code class="literal">DatabaseMetaData.getColumns()</code>,
        <code class="literal">getPrimaryKeys()</code>,
        <code class="literal">getIndexInfo()</code>,
        <code class="literal">getBestRowIdentifier()</code>.
      </p></li><li><p>
        Retrieve <code class="literal">TX_ISOLATION</code> from database for
        <code class="literal">Connection.getTransactionIsolation()</code> when the
        MySQL version supports it, instead of an instance variable.
      </p></li><li><p>
        Greatly reduce memory required for
        <code class="literal">setBinaryStream()</code> in
        <code class="literal">PreparedStatements</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-4"></a>C.5.4.14. Changes in  MySQL Connector/J 3.0.4 (06 January 2003)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Streamlined character conversion and <code class="literal">byte[]</code>
        handling in <code class="literal">PreparedStatements</code> for
        <code class="literal">setByte()</code>.
      </p></li><li><p>
        Fixed <code class="literal">PreparedStatement.executeBatch()</code>
        parameter overwriting.
      </p></li><li><p>
        Added quoted identifiers to database names for
        <code class="literal">Connection.setCatalog</code>.
      </p></li><li><p>
        Added support for 4.0.8-style large packets.
      </p></li><li><p>
        Reduce memory footprint of <code class="literal">PreparedStatements</code>
        by sharing outbound packet with <code class="literal">MysqlIO</code>.
      </p></li><li><p>
        Added <code class="literal">strictUpdates</code> property to allow control
        of amount of checking for “<span class="quote">correctness</span>” of
        updatable result sets. Set this to <code class="literal">false</code> if
        you want faster updatable result sets and you know that you
        create them from <code class="literal">SELECT</code> statements on tables
        with primary keys and that you have selected all primary keys in
        your query.
      </p></li><li><p>
        Added support for quoted identifiers in
        <code class="literal">PreparedStatement</code> parser.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-3"></a>C.5.4.15. Changes in  MySQL Connector/J 3.0.3 (17 December 2002)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Allow user to alter behavior of <code class="literal">Statement</code>/
        <code class="literal">PreparedStatement.executeBatch()</code> via
        <code class="literal">continueBatchOnError</code> property (defaults to
        <code class="literal">true</code>).
      </p></li><li><p>
        More robust escape tokenizer: Recognize <code class="literal">--</code>
        comments, and allow nested escape sequences (see
        <code class="literal">testsuite.EscapeProcessingTest</code>).
      </p></li><li><p>
        Fixed <code class="literal">Buffer.isLastDataPacket()</code> for 4.1 and
        newer servers.
      </p></li><li><p>
        <code class="literal">NamedPipeSocketFactory</code> now works (only
        intended for Windows), see <code class="filename">README</code> for
        instructions.
      </p></li><li><p>
        Changed <code class="literal">charsToByte</code> in
        <code class="literal">SingleByteCharConverter</code> to be non-static.
      </p></li><li><p>
        Use non-aliased table/column names and database names to fully
        qualify tables and columns in
        <code class="literal">UpdatableResultSet</code> (requires MySQL-4.1 or
        newer).
      </p></li><li><p>
        <code class="literal">LOAD DATA LOCAL INFILE ...</code> now works, if your
        server is configured to allow it. Can be turned off with the
        <code class="literal">allowLoadLocalInfile</code> property (see the
        <code class="filename">README</code>).
      </p></li><li><p>
        Implemented <code class="literal">Connection.nativeSQL()</code>.
      </p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData.getColumnTypeName()</code>
        returning <code class="literal">BLOB</code> for <code class="literal">TEXT</code>
        and <code class="literal">TEXT</code> for <code class="literal">BLOB</code> types.
      </p></li><li><p>
        Fixed charset handling in <code class="literal">Fields.java</code>.
      </p></li><li><p>
        Because of above, implemented
        <code class="literal">ResultSetMetaData.isAutoIncrement()</code> to use
        <code class="literal">Field.isAutoIncrement()</code>.
      </p></li><li><p>
        Substitute <code class="literal">'?'</code> for unknown character
        conversions in single-byte character sets instead of
        <code class="literal">'\0'</code>.
      </p></li><li><p>
        Added <code class="literal">CLIENT_LONG_FLAG</code> to be able to get more
        column flags (<code class="literal">isAutoIncrement()</code> being the
        most important).
      </p></li><li><p>
        Honor <code class="literal">lower_case_table_names</code> when enabled in
        the server when doing table name comparisons in
        <code class="literal">DatabaseMetaData</code> methods.
      </p></li><li><p>
        <code class="literal">DBMD.getImported/ExportedKeys()</code> now handles
        multiple foreign keys per table.
      </p></li><li><p>
        More robust implementation of updatable result sets. Checks that
        <span class="emphasis"><em>all</em></span> primary keys of the table have been
        selected.
      </p></li><li><p>
        Some MySQL-4.1 protocol support (extended field info from
        selects).
      </p></li><li><p>
        Check for connection closed in more
        <code class="literal">Connection</code> methods
        (<code class="literal">createStatement</code>,
        <code class="literal">prepareStatement</code>,
        <code class="literal">setTransactionIsolation</code>,
        <code class="literal">setAutoCommit</code>).
      </p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData.getPrecision()</code>
        returning incorrect values for some floating-point types.
      </p></li><li><p>
        Changed <code class="literal">SingleByteCharConverter</code> to use lazy
        initialization of each converter.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-2"></a>C.5.4.16. Changes in  MySQL Connector/J 3.0.2 (08 November 2002)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Implemented <code class="literal">Clob.setString()</code>.
      </p></li><li><p>
        Added <code class="literal">com.mysql.jdbc.MiniAdmin</code> class, which
        allows you to send <code class="literal">shutdown</code> command to MySQL
        server. This is intended to be used when
        “<span class="quote">embedding</span>” Java and MySQL server together in an
        end-user application.
      </p></li><li><p>
        Added SSL support. See <code class="filename">README</code> for
        information on how to use it.
      </p></li><li><p>
        All <code class="literal">DBMD</code> result set columns describing
        schemas now return <code class="literal">NULL</code> to be more compliant
        with the behavior of other JDBC drivers for other database
        systems (MySQL does not support schemas).
      </p></li><li><p>
        Use <code class="literal">SHOW CREATE TABLE</code> when possible for
        determining foreign key information for
        <code class="literal">DatabaseMetaData</code>. Also allows cascade options
        for <code class="literal">DELETE</code> information to be returned.
      </p></li><li><p>
        Implemented <code class="literal">Clob.setCharacterStream()</code>.
      </p></li><li><p>
        Failover and <code class="literal">autoReconnect</code> work only when the
        connection is in an <code class="literal">autoCommit(false)</code> state,
        in order to stay transaction-safe.
      </p></li><li><p>
        Fixed <code class="literal">DBMD.supportsResultSetConcurrency()</code> so
        that it returns <code class="literal">true</code> for
        <code class="literal">ResultSet.TYPE_SCROLL_INSENSITIVE</code> and
        <code class="literal">ResultSet.CONCUR_READ_ONLY</code> or
        <code class="literal">ResultSet.CONCUR_UPDATABLE</code>.
      </p></li><li><p>
        Implemented <code class="literal">Clob.setAsciiStream()</code>.
      </p></li><li><p>
        Removed duplicate code from
        <code class="literal">UpdatableResultSet</code> (it can be inherited from
        <code class="literal">ResultSet</code>, the extra code for each method to
        handle updatability I thought might someday be necessary has not
        been needed).
      </p></li><li><p>
        Fixed <code class="literal">UnsupportedEncodingException</code> thrown
        when “<span class="quote">forcing</span>” a character encoding via properties.
      </p></li><li><p>
        Fixed incorrect conversion in
        <code class="literal">ResultSet.getLong()</code>.
      </p></li><li><p>
        Implemented <code class="literal">ResultSet.updateBlob()</code>.
      </p></li><li><p>
        Removed some not-needed temporary object creation by smarter use
        of <code class="literal">Strings</code> in
        <code class="literal">EscapeProcessor</code>,
        <code class="literal">Connection</code> and
        <code class="literal">DatabaseMetaData</code> classes.
      </p></li><li><p>
        Escape <code class="literal">0x5c</code> character in strings for the SJIS
        charset.
      </p></li><li><p>
        <code class="literal">PreparedStatement</code> now honors stream lengths
        in setBinary/Ascii/Character Stream() unless you set the
        connection property
        <code class="literal">useStreamLengthsInPrepStmts</code> to
        <code class="literal">false</code>.
      </p></li><li><p>
        Fixed issue with updatable result sets and
        <code class="literal">PreparedStatements</code> not working.
      </p></li><li><p>
        Fixed start position off-by-1 error in
        <code class="literal">Clob.getSubString()</code>.
      </p></li><li><p>
        Added <code class="literal">connectTimeout</code> parameter that allows
        users of JDK-1.4 and newer to specify a maximum time to wait to
        establish a connection.
      </p></li><li><p>
        Fixed various non-ASCII character encoding issues.
      </p></li><li><p>
        Fixed <code class="literal">ResultSet.isLast()</code> for empty result
        sets (should return <code class="literal">false</code>).
      </p></li><li><p>
        Added driver property <code class="literal">useHostsInPrivileges</code>.
        Defaults to <code class="literal">true</code>. Affects whether or not
        <code class="literal">@hostname</code> will be used in
        <code class="literal">DBMD.getColumn/TablePrivileges</code>.
      </p></li><li><p>
        Fixed
        <code class="literal">ResultSet.setFetchDirection(FETCH_UNKNOWN)</code>.
      </p></li><li><p>
        Added <code class="literal">queriesBeforeRetryMaster</code> property that
        specifies how many queries to issue when failed over before
        attempting to reconnect to the master (defaults to 50).
      </p></li><li><p>
        Fixed issue when calling
        <code class="literal">Statement.setFetchSize()</code> when using arbitrary
        values.
      </p></li><li><p>
        Properly restore connection properties when autoReconnecting or
        failing-over, including <code class="literal">autoCommit</code> state, and
        isolation level.
      </p></li><li><p>
        Implemented <code class="literal">Clob.truncate()</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-1"></a>C.5.4.17. Changes in  MySQL Connector/J 3.0.1 (21 September 2002)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Charsets now automatically detected. Optimized code for
        single-byte character set conversion.
      </p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData.isSigned()</code> for
        <code class="literal">TINYINT</code> and <code class="literal">BIGINT</code>.
      </p></li><li><p>
        Fixed <code class="literal">RowDataStatic.getAt()</code> off-by-one bug.
      </p></li><li><p>
        Fixed <code class="literal">ResultSet.getRow()</code> off-by-one bug.
      </p></li><li><p>
        Massive code clean-up to follow Java coding conventions (the
        time had come).
      </p></li><li><p>
        Implemented <code class="literal">ResultSet.getCharacterStream()</code>.
      </p></li><li><p>
        Added limited <code class="literal">Clob</code> functionality
        (<code class="literal">ResultSet.getClob()</code>,
        <code class="literal">PreparedStatemtent.setClob()</code>,
        <code class="literal">PreparedStatement.setObject(Clob)</code>.
      </p></li><li><p>
        <code class="literal">Connection.isClosed()</code> no longer
        “<span class="quote">pings</span>” the server.
      </p></li><li><p>
        <code class="literal">Connection.close()</code> issues
        <code class="literal">rollback()</code> when
        <code class="literal">getAutoCommit()</code> is <code class="literal">false</code>.
      </p></li><li><p>
        Added <code class="literal">socketTimeout</code> parameter to URL.
      </p></li><li><p>
        Added <code class="literal">LOCAL TEMPORARY</code> to table types in
        <code class="literal">DatabaseMetaData.getTableTypes()</code>.
      </p></li><li><p>
        Added <code class="literal">paranoid</code> parameter, which sanitizes
        error messages by removing “<span class="quote">sensitive</span>” information
        from them (such as hostnames, ports, or usernames), as well as
        clearing “<span class="quote">sensitive</span>” data structures when possible.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-0"></a>C.5.4.18. Changes in  MySQL Connector/J 3.0.0 (31 July 2002)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        General source-code cleanup.
      </p></li><li><p>
        The driver now only works with JDK-1.2 or newer.
      </p></li><li><p>
        Fix and sort primary key names in <code class="literal">DBMetaData</code>
        (SF bugs 582086 and 582086).
      </p></li><li><p>
        <code class="literal">ResultSet.getTimestamp()</code> now works for
        <code class="literal">DATE</code> types (SF bug 559134).
      </p></li><li><p>
        Float types now reported as
        <code class="literal">java.sql.Types.FLOAT</code> (SF bug 579573).
      </p></li><li><p>
        Support for streaming (row-by-row) result sets (see
        <code class="filename">README</code>) Thanks to Doron.
      </p></li><li><p>
        Testsuite now uses Junit (which you can get from
        <a href="http://www.junit.org" target="_top">http://www.junit.org</a>.
      </p></li><li><p>
        JDBC Compliance: Passes all tests besides stored procedure
        tests.
      </p></li><li><p>
        <code class="literal">ResultSet.getDate/Time/Timestamp</code> now
        recognizes all forms of invalid values that have been set to all
        zeros by MySQL (SF bug 586058).
      </p></li><li><p>
        Added multi-host failover support (see
        <code class="filename">README</code>).
      </p></li><li><p>
        Repackaging: New driver name is
        <code class="literal">com.mysql.jdbc.Driver</code>, old name still works,
        though (the driver is now provided by MySQL-AB).
      </p></li><li><p>
        Support for large packets (new addition to MySQL-4.0 protocol),
        see <code class="filename">README</code> for more information.
      </p></li><li><p>
        Better checking for closed connections in
        <code class="literal">Statement</code> and
        <code class="literal">PreparedStatement</code>.
      </p></li><li><p>
        Performance improvements in string handling and field metadata
        creation (lazily instantiated) contributed by Alex
        Twisleton-Wykeham-Fiennes.
      </p></li><li><p>
        JDBC-3.0 functionality including
        <code class="literal">Statement/PreparedStatement.getGeneratedKeys()</code>
        and <code class="literal">ResultSet.getURL()</code>.
      </p></li><li><p>
        Overall speed improvements via controlling transient object
        creation in <code class="literal">MysqlIO</code> class when reading
        packets.
      </p></li><li><p>
        <span class="bold"><strong>!!! LICENSE CHANGE !!!</strong></span> The
        driver is now GPL. If you need non-GPL licenses, please contact
        me <code class="literal">&lt;mark@mysql.com&gt;</code>.
      </p></li><li><p>
        Performance enchancements: Driver is now 50–100% faster in
        most situations, and creates fewer temporary objects.
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-news-2-0"></a>C.5.5. Changes in MySQL Connector/J 2.0.x</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#cj-news-2-0-14">C.5.5.1. Changes in  MySQL Connector/J 2.0.14 (16 May 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-13">C.5.5.2. Changes in  MySQL Connector/J 2.0.13 (24 April 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-12">C.5.5.3. Changes in  MySQL Connector/J 2.0.12 (07 April 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-11">C.5.5.4. Changes in  MySQL Connector/J 2.0.11 (27 January 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-10">C.5.5.5. Changes in  MySQL Connector/J 2.0.10 (24 January 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-9">C.5.5.6. Changes in  MySQL Connector/J 2.0.9 (13 January 2002)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-8">C.5.5.7. Changes in  MySQL Connector/J 2.0.8 (25 November 2001)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-7">C.5.5.8. Changes in  MySQL Connector/J 2.0.7 (24 October 2001)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-6">C.5.5.9. Changes in  MySQL Connector/J 2.0.6 (16 June 2001)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-5">C.5.5.10. Changes in  MySQL Connector/J 2.0.5 (13 June 2001)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-3">C.5.5.11. Changes in  MySQL Connector/J 2.0.3 (03 December 2000)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0-1">C.5.5.12. Changes in  MySQL Connector/J 2.0.1 (06 April 2000)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0pre5">C.5.5.13. Changes in MySQL Connector/J 2.0.0pre5 (21 February 2000)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0pre4">C.5.5.14. Changes in MySQL Connector/J 2.0.0pre4 (10 January 2000)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-2-0pre">C.5.5.15. Changes in MySQL Connector/J 2.0.0pre (17 August 1999)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-14"></a>C.5.5.1. Changes in  MySQL Connector/J 2.0.14 (16 May 2002)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">ResultSet.getDouble()</code> now uses code built
        into JDK to be more precise (but slower).
      </p></li><li><p>
        Fixed typo for <code class="literal">relaxAutoCommit</code> parameter.
      </p></li><li><p>
        <code class="literal">LogicalHandle.isClosed()</code> calls through to
        physical connection.
      </p></li><li><p>
        Added SQL profiling (to <code class="literal">STDERR</code>). Set
        <code class="literal">profileSql=true</code> in your JDBC URL. See
        <code class="filename">README</code> for more information.
      </p></li><li><p>
        <code class="literal">PreparedStatement</code> now releases resources on
        <code class="literal">.close()</code>. (SF bug 553268)
      </p></li><li><p>
        More code cleanup.
      </p></li><li><p>
        Quoted identifiers not used if server version does not support
        them. Also, if server started with <code class="option">--ansi</code> or
        <code class="option">--sql-mode=ANSI_QUOTES</code>,
        “<span class="quote"><code class="literal">"</code></span>” will be used as an
        identifier quote character, otherwise
        “<span class="quote"><code class="literal">'</code></span>” will be used.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-13"></a>C.5.5.2. Changes in  MySQL Connector/J 2.0.13 (24 April 2002)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed unicode chars being read incorrectly. (SF bug 541088)
      </p></li><li><p>
        Faster blob escaping for <code class="literal">PrepStmt</code>.
      </p></li><li><p>
        Added <code class="literal">setURL()</code> to
        <code class="literal">MySQLXADataSource</code>. (SF bug 546019)
      </p></li><li><p>
        Added <code class="literal">set</code>/<code class="literal">getPortNumber()</code>
        to <code class="literal">DataSource(s)</code>. (SF bug 548167)
      </p></li><li><p>
        <code class="literal">PreparedStatement.toString()</code> fixed. (SF bug
        534026)
      </p></li><li><p>
        More code cleanup.
      </p></li><li><p>
        Rudimentary version of
        <code class="literal">Statement.getGeneratedKeys()</code> from JDBC-3.0
        now implemented (you need to be using JDK-1.4 for this to work,
        I believe).
      </p></li><li><p>
        <code class="literal">DBMetaData.getIndexInfo()</code> - bad PAGES fixed.
        (SF BUG 542201)
      </p></li><li><p>
        <code class="literal">ResultSetMetaData.getColumnClassName()</code> now
        implemented.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-12"></a>C.5.5.3. Changes in  MySQL Connector/J 2.0.12 (07 April 2002)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed <code class="literal">testsuite.Traversal</code>
        <code class="literal">afterLast()</code> bug, thanks to Igor Lastric.
      </p></li><li><p>
        Added new types to <code class="literal">getTypeInfo()</code>, fixed
        existing types thanks to Al Davis and Kid Kalanon.
      </p></li><li><p>
        Fixed time zone off-by-1-hour bug in
        <code class="literal">PreparedStatement</code> (538286, 528785).
      </p></li><li><p>
        Added identifier quoting to all
        <code class="literal">DatabaseMetaData</code> methods that need them
        (should fix 518108).
      </p></li><li><p>
        Added support for <code class="literal">BIT</code> types (51870) to
        <code class="literal">PreparedStatement</code>.
      </p></li><li><p>
        <code class="literal">ResultSet.insertRow()</code> should now detect
        auto_increment fields in most cases and use that value in the
        new row. This detection will not work in multi-valued keys,
        however, due to the fact that the MySQL protocol does not return
        this information.
      </p></li><li><p>
        Relaxed synchronization in all classes, should fix 520615 and
        520393.
      </p></li><li><p>
        <code class="literal">DataSources</code> - fixed <code class="literal">setUrl</code>
        bug (511614, 525565), wrong datasource class name (532816,
        528767).
      </p></li><li><p>
        Added support for <code class="literal">YEAR</code> type (533556).
      </p></li><li><p>
        Fixes for <code class="literal">ResultSet</code> updatability in
        <code class="literal">PreparedStatement</code>.
      </p></li><li><p>
        <code class="literal">ResultSet</code>: Fixed updatability (values being
        set to <code class="literal">null</code> if not updated).
      </p></li><li><p>
        Added <code class="literal">getTable/ColumnPrivileges()</code> to DBMD
        (fixes 484502).
      </p></li><li><p>
        Added <code class="literal">getIdleFor()</code> method to
        <code class="literal">Connection</code> and
        <code class="literal">MysqlLogicalHandle</code>.
      </p></li><li><p>
        <code class="literal">ResultSet.refreshRow()</code> implemented.
      </p></li><li><p>
        Fixed <code class="literal">getRow()</code> bug (527165) in
        <code class="literal">ResultSet</code>.
      </p></li><li><p>
        General code cleanup.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-11"></a>C.5.5.4. Changes in  MySQL Connector/J 2.0.11 (27 January 2002)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Full synchronization of <code class="literal">Statement.java</code>.
      </p></li><li><p>
        Fixed missing <code class="literal">DELETE_RULE</code> value in
        <code class="literal">DBMD.getImported/ExportedKeys()</code> and
        <code class="literal">getCrossReference()</code>.
      </p></li><li><p>
        More changes to fix <code class="literal">Unexpected end of input
        stream</code> errors when reading <code class="literal">BLOB</code>
        values. This should be the last fix.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-10"></a>C.5.5.5. Changes in  MySQL Connector/J 2.0.10 (24 January 2002)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed null-pointer-exceptions when using
        <code class="literal">MysqlConnectionPoolDataSource</code> with Websphere
        4 (bug 505839).
      </p></li><li><p>
        Fixed spurious <code class="literal">Unexpected end of input stream</code>
        errors in <code class="literal">MysqlIO</code> (bug 507456).
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-9"></a>C.5.5.6. Changes in  MySQL Connector/J 2.0.9 (13 January 2002)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed extra memory allocation in
        <code class="literal">MysqlIO.readPacket()</code> (bug 488663).
      </p></li><li><p>
        Added detection of network connection being closed when reading
        packets (thanks to Todd Lizambri).
      </p></li><li><p>
        Fixed casting bug in <code class="literal">PreparedStatement</code> (bug
        488663).
      </p></li><li><p>
        <code class="literal">DataSource</code> implementations moved to
        <code class="literal">org.gjt.mm.mysql.jdbc2.optional</code> package, and
        (initial) implementations of
        <code class="literal">PooledConnectionDataSource</code> and
        <code class="literal">XADataSource</code> are in place (thanks to Todd
        Wolff for the implementation and testing of
        <code class="literal">PooledConnectionDataSource</code> with IBM WebSphere
        4).
      </p></li><li><p>
        Fixed quoting error with escape processor (bug 486265).
      </p></li><li><p>
        Removed concatenation support from driver (the
        <code class="literal">||</code> operator), as older versions of VisualAge
        seem to be the only thing that use it, and it conflicts with the
        logical <code class="literal">||</code> operator. You will need to start
        <span><strong class="command">mysqld</strong></span> with the <code class="option">--ansi</code> flag
        to use the <code class="literal">||</code> operator as concatenation (bug
        491680).
      </p></li><li><p>
        <span><strong class="command">Ant</strong></span> build was corrupting included
        <code class="filename">jar</code> files, fixed (bug 487669).
      </p></li><li><p>
        Report batch update support through
        <code class="literal">DatabaseMetaData</code> (bug 495101).
      </p></li><li><p>
        Implementation of
        <code class="literal">DatabaseMetaData.getExported/ImportedKeys()</code>
        and <code class="literal">getCrossReference()</code>.
      </p></li><li><p>
        Fixed off-by-one-hour error in
        <code class="literal">PreparedStatement.setTimestamp()</code> (bug
        491577).
      </p></li><li><p>
        Full synchronization on methods modifying instance and
        class-shared references, driver should be entirely thread-safe
        now (please let me know if you have problems).
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-8"></a>C.5.5.7. Changes in  MySQL Connector/J 2.0.8 (25 November 2001)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">XADataSource</code>/<code class="literal">ConnectionPoolDataSource</code>
        code (experimental)
      </p></li><li><p>
        <code class="literal">DatabaseMetaData.getPrimaryKeys()</code> and
        <code class="literal">getBestRowIdentifier()</code> are now more robust in
        identifying primary keys (matches regardless of case or
        abbreviation/full spelling of <code class="literal">Primary Key</code> in
        <code class="literal">Key_type</code> column).
      </p></li><li><p>
        Batch updates now supported (thanks to some inspiration from
        Daniel Rall).
      </p></li><li><p>
        <code class="literal">PreparedStatement.setAnyNumericType()</code> now
        handles positive exponents correctly (adds <code class="literal">+</code>
        so MySQL can understand it).
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-7"></a>C.5.5.8. Changes in  MySQL Connector/J 2.0.7 (24 October 2001)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Character sets read from database if
        <code class="literal">useUnicode=true</code> and
        <code class="literal">characterEncoding</code> is not set. (thanks to
        Dmitry Vereshchagin)
      </p></li><li><p>
        Initial transaction isolation level read from database (if
        avaialable). (thanks to Dmitry Vereshchagin)
      </p></li><li><p>
        Fixed <code class="literal">PreparedStatement</code> generating SQL that
        would end up with syntax errors for some queries.
      </p></li><li><p>
        <code class="literal">PreparedStatement.setCharacterStream()</code> now
        implemented
      </p></li><li><p>
        Captialize type names when
        <code class="literal">captializeTypeNames=true</code> is passed in URL or
        properties (for WebObjects. (thanks to Anjo Krank)
      </p></li><li><p>
        <code class="literal">ResultSet.getBlob()</code> now returns
        <code class="literal">null</code> if column value was
        <code class="literal">null</code>.
      </p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData.getPrecision()</code>
        returning one less than actual on newer versions of MySQL.
      </p></li><li><p>
        Fixed dangling socket problem when in high availability
        (<code class="literal">autoReconnect=true</code>) mode, and finalizer for
        <code class="literal">Connection</code> will close any dangling sockets on
        GC.
      </p></li><li><p>
        Fixed time zone issue in
        <code class="literal">PreparedStatement.setTimestamp()</code>. (thanks to
        Erik Olofsson)
      </p></li><li><p>
        PreparedStatement.setDouble() now uses full-precision doubles
        (reverting a fix made earlier to truncate them).
      </p></li><li><p>
        Fixed
        <code class="literal">DatabaseMetaData.supportsTransactions()</code>, and
        <code class="literal">supportsTransactionIsolationLevel()</code> and
        <code class="literal">getTypeInfo()</code>
        <code class="literal">SQL_DATETIME_SUB</code> and
        <code class="literal">SQL_DATA_TYPE</code> fields not being readable.
      </p></li><li><p>
        Updatable result sets now correctly handle
        <code class="literal">NULL</code> values in fields.
      </p></li><li><p>
        PreparedStatement.setBoolean() will use 1/0 for values if your
        MySQL version is 3.21.23 or higher.
      </p></li><li><p>
        Fixed <code class="literal">ResultSet.isAfterLast()</code> always
        returning <code class="literal">false</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-6"></a>C.5.5.9. Changes in  MySQL Connector/J 2.0.6 (16 June 2001)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed <code class="literal">PreparedStatement</code> parameter checking.
      </p></li><li><p>
        Fixed case-sensitive column names in
        <code class="literal">ResultSet.java</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-5"></a>C.5.5.10. Changes in  MySQL Connector/J 2.0.5 (13 June 2001)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        <code class="literal">ResultSet.insertRow()</code> works now, even if not
        all columns are set (they will be set to
        <code class="literal">NULL</code>).
      </p></li><li><p>
        Added <code class="literal">Byte</code> to
        <code class="literal">PreparedStatement.setObject()</code>.
      </p></li><li><p>
        Fixed data parsing of <code class="literal">TIMESTAMP</code> values with
        2-digit years.
      </p></li><li><p>
        Added <code class="literal">ISOLATION</code> level support to
        <code class="literal">Connection.setIsolationLevel()</code>
      </p></li><li><p>
        <code class="literal">DataBaseMetaData.getCrossReference()</code> no
        longer <code class="literal">ArrayIndexOOB</code>.
      </p></li><li><p>
        <code class="literal">ResultSet.getBoolean()</code> now recognizes
        <code class="literal">-1</code> as <code class="literal">true</code>.
      </p></li><li><p>
        <code class="literal">ResultSet</code> has +/-Inf/inf support.
      </p></li><li><p>
        <code class="literal">getObject()</code> on <code class="literal">ResultSet</code>
        correctly does
        <code class="literal">TINYINT</code>-&gt;<code class="literal">Byte</code> and
        <code class="literal">SMALLINT</code>-&gt;<code class="literal">Short</code>.
      </p></li><li><p>
        Fixed <code class="literal">ResultSetMetaData.getColumnTypeName</code> for
        <code class="literal">TEXT</code>/<code class="literal">BLOB</code>.
      </p></li><li><p>
        Fixed <code class="literal">ArrayIndexOutOfBounds</code> when sending
        large <code class="literal">BLOB</code> queries. (Max size packet was not
        being set)
      </p></li><li><p>
        Fixed NPE on
        <code class="literal">PreparedStatement.executeUpdate()</code> when all
        columns have not been set.
      </p></li><li><p>
        Fixed <code class="literal">ResultSet.getBlob()</code>
        <code class="literal">ArrayIndex</code> out-of-bounds.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-3"></a>C.5.5.11. Changes in  MySQL Connector/J 2.0.3 (03 December 2000)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed composite key problem with updatable result sets.
      </p></li><li><p>
        Faster ASCII string operations.
      </p></li><li><p>
        Fixed off-by-one error in <code class="literal">java.sql.Blob</code>
        implementation code.
      </p></li><li><p>
        Fixed incorrect detection of
        <code class="literal">MAX_ALLOWED_PACKET</code>, so sending large blobs
        should work now.
      </p></li><li><p>
        Added detection of -/+INF for doubles.
      </p></li><li><p>
        Added <code class="literal">ultraDevHack</code> URL parameter, set to
        <code class="literal">true</code> to allow (broken) Macromedia UltraDev to
        use the driver.
      </p></li><li><p>
        Implemented <code class="literal">getBigDecimal()</code> without scale
        component for JDBC2.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-1"></a>C.5.5.12. Changes in  MySQL Connector/J 2.0.1 (06 April 2000)</h4></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Columns that are of type <code class="literal">TEXT</code> now return as
        <code class="literal">Strings</code> when you use
        <code class="literal">getObject()</code>.
      </p></li><li><p>
        Cleaned up exception handling when driver connects.
      </p></li><li><p>
        Fixed <code class="literal">RSMD.isWritable()</code> returning wrong
        value. Thanks to Moritz Maass.
      </p></li><li><p>
        <code class="literal">DatabaseMetaData.getPrimaryKeys()</code> now works
        correctly with respect to <code class="literal">key_seq</code>. Thanks to
        Brian Slesinsky.
      </p></li><li><p>
        Fixed many JDBC-2.0 traversal, positioning bugs, especially with
        respect to empty result sets. Thanks to Ron Smits, Nick Brook,
        Cessar Garcia and Carlos Martinez.
      </p></li><li><p>
        No escape processing is done on
        <code class="literal">PreparedStatements</code> anymore per JDBC spec.
      </p></li><li><p>
        Fixed some issues with updatability support in
        <code class="literal">ResultSet</code> when using multiple primary keys.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0pre5"></a>C.5.5.13. Changes in MySQL Connector/J 2.0.0pre5 (21 February 2000)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixed Bad Handshake problem.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0pre4"></a>C.5.5.14. Changes in MySQL Connector/J 2.0.0pre4 (10 January 2000)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixes to ResultSet for insertRow() - Thanks to Cesar Garcia
          </p></li><li><p>
            Fix to Driver to recognize JDBC-2.0 by loading a JDBC-2.0
            class, instead of relying on JDK version numbers. Thanks to
            John Baker.
          </p></li><li><p>
            Fixed ResultSet to return correct row numbers
          </p></li><li><p>
            Statement.getUpdateCount() now returns rows matched, instead
            of rows actually updated, which is more SQL-92 like.
          </p></li></ul></div><p>
        10-29-99
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Statement/PreparedStatement.getMoreResults() bug fixed.
            Thanks to Noel J. Bergman.
          </p></li><li><p>
            Added Short as a type to PreparedStatement.setObject().
            Thanks to Jeff Crowder
          </p></li><li><p>
            Driver now automagically configures maximum/preferred packet
            sizes by querying server.
          </p></li><li><p>
            Autoreconnect code uses fast ping command if server supports
            it.
          </p></li><li><p>
            Fixed various bugs with respect to packet sizing when
            reading from the server and when alloc'ing to write to the
            server.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0pre"></a>C.5.5.15. Changes in MySQL Connector/J 2.0.0pre (17 August 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Now compiles under JDK-1.2. The driver supports both JDK-1.1
            and JDK-1.2 at the same time through a core set of classes.
            The driver will load the appropriate interface classes at
            runtime by figuring out which JVM version you are using.
          </p></li><li><p>
            Fixes for result sets with all nulls in the first row.
            (Pointed out by Tim Endres)
          </p></li><li><p>
            Fixes to column numbers in SQLExceptions in ResultSet
            (Thanks to Blas Rodriguez Somoza)
          </p></li><li><p>
            The database no longer needs to specified to connect.
            (Thanks to Christian Motschke)
          </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-news-1-2b"></a>C.5.6. Changes in MySQL Connector/J 1.2b (04 July 1999)</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Better Documentation (in progress), in doc/mm.doc/book1.html
        </p></li><li><p>
          DBMD now allows null for a column name pattern (not in spec),
          which it changes to '%'.
        </p></li><li><p>
          DBMD now has correct types/lengths for getXXX().
        </p></li><li><p>
          ResultSet.getDate(), getTime(), and getTimestamp() fixes.
          (contributed by Alan Wilken)
        </p></li><li><p>
          EscapeProcessor now handles \{ \} and { or } inside quotes
          correctly. (thanks to Alik for some ideas on how to fix it)
        </p></li><li><p>
          Fixes to properties handling in Connection. (contributed by
          Juho Tikkala)
        </p></li><li><p>
          ResultSet.getObject() now returns null for NULL columns in the
          table, rather than bombing out. (thanks to Ben Grosman)
        </p></li><li><p>
          ResultSet.getObject() now returns Strings for types from MySQL
          that it doesn't know about. (Suggested by Chris Perdue)
        </p></li><li><p>
          Removed DataInput/Output streams, not needed, 1/2 number of
          method calls per IO operation.
        </p></li><li><p>
          Use default character encoding if one is not specified. This
          is a work-around for broken JVMs, because according to spec,
          EVERY JVM must support "ISO8859_1", but they don't.
        </p></li><li><p>
          Fixed Connection to use the platform character encoding
          instead of "ISO8859_1" if one isn't explicitly set. This fixes
          problems people were having loading the character- converter
          classes that didn't always exist (JVM bug). (thanks to Fritz
          Elfert for pointing out this problem)
        </p></li><li><p>
          Changed MysqlIO to re-use packets where possible to reduce
          memory usage.
        </p></li><li><p>
          Fixed escape-processor bugs pertaining to {} inside quotes.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cg-news-1-0"></a>C.5.7. Changes in MySQL Connector/J 1.2.x and lower</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#cj-news-1-2a">C.5.7.1. Changes in MySQL Connector/J 1.2a (14 April 1999)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-1i">C.5.7.2. Changes in MySQL Connector/J 1.1i (24 March 1999)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-1h">C.5.7.3. Changes in MySQL Connector/J 1.1h (08 March 1999)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-1g">C.5.7.4. Changes in MySQL Connector/J 1.1g (19 February 1999)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-1f">C.5.7.5. Changes in MySQL Connector/J 1.1f (31 December 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-1b">C.5.7.6. Changes in MySQL Connector/J 1.1b (03 November 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-1">C.5.7.7. Changes in MySQL Connector/J 1.1 (02 September 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-1-0">C.5.7.8. Changes in MySQL Connector/J 1.0 (24 August 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-0-9d">C.5.7.9. Changes in MySQL Connector/J 0.9d (04 August 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-0-9">C.5.7.10. Changes in MySQL Connector/J 0.9 (28 July 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-0-8">C.5.7.11. Changes in MySQL Connector/J 0.8 (06 July 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-0-7">C.5.7.12. Changes in MySQL Connector/J 0.7 (01 July 1998)</a></span></dt><dt><span class="section"><a href="news.html#cj-news-0-6">C.5.7.13. Changes in MySQL Connector/J 0.6 (21 May 1998)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-2a"></a>C.5.7.1. Changes in MySQL Connector/J 1.2a (14 April 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixed character-set support for non-Javasoft JVMs (thanks to
            many people for pointing it out)
          </p></li><li><p>
            Fixed ResultSet.getBoolean() to recognize 'y' &amp; 'n' as
            well as '1' &amp; '0' as boolean flags. (thanks to Tim
            Pizey)
          </p></li><li><p>
            Fixed ResultSet.getTimestamp() to give better performance.
            (thanks to Richard Swift)
          </p></li><li><p>
            Fixed getByte() for numeric types. (thanks to Ray Bellis)
          </p></li><li><p>
            Fixed DatabaseMetaData.getTypeInfo() for DATE type. (thanks
            to Paul Johnston)
          </p></li><li><p>
            Fixed EscapeProcessor for "fn" calls. (thanks to Piyush Shah
            at locomotive.org)
          </p></li><li><p>
            Fixed EscapeProcessor to not do extraneous work if there are
            no escape codes. (thanks to Ryan Gustafson)
          </p></li><li><p>
            Fixed Driver to parse URLs of the form
            "jdbc:mysql://host:port" (thanks to Richard Lobb)
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1i"></a>C.5.7.2. Changes in MySQL Connector/J 1.1i (24 March 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixed Timestamps for PreparedStatements
          </p></li><li><p>
            Fixed null pointer exceptions in RSMD and RS
          </p></li><li><p>
            Re-compiled with jikes for valid class files (thanks ms!)
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1h"></a>C.5.7.3. Changes in MySQL Connector/J 1.1h (08 March 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixed escape processor to deal with unmatched { and }
            (thanks to Craig Coles)
          </p></li><li><p>
            Fixed escape processor to create more portable (between
            DATETIME and TIMESTAMP types) representations so that it
            will work with BETWEEN clauses. (thanks to Craig Longman)
          </p></li><li><p>
            MysqlIO.quit() now closes the socket connection. Before,
            after many failed connections some OS's would run out of
            file descriptors. (thanks to Michael Brinkman)
          </p></li><li><p>
            Fixed NullPointerException in Driver.getPropertyInfo.
            (thanks to Dave Potts)
          </p></li><li><p>
            Fixes to MysqlDefs to allow all *text fields to be retrieved
            as Strings. (thanks to Chris at Leverage)
          </p></li><li><p>
            Fixed setDouble in PreparedStatement for large numbers to
            avoid sending scientific notation to the database. (thanks
            to J.S. Ferguson)
          </p></li><li><p>
            Fixed getScale() and getPrecision() in RSMD. (contrib'd by
            James Klicman)
          </p></li><li><p>
            Fixed getObject() when field was DECIMAL or NUMERIC (thanks
            to Bert Hobbs)
          </p></li><li><p>
            DBMD.getTables() bombed when passed a null table-name
            pattern. Fixed. (thanks to Richard Lobb)
          </p></li><li><p>
            Added check for "client not authorized" errors during
            connect. (thanks to Hannes Wallnoefer)
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1g"></a>C.5.7.4. Changes in MySQL Connector/J 1.1g (19 February 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Result set rows are now byte arrays. Blobs and Unicode work
            bidriectonally now. The useUnicode and encoding options are
            implemented now.
          </p></li><li><p>
            Fixes to PreparedStatement to send binary set by
            setXXXStream to be sent untouched to the MySQL server.
          </p></li><li><p>
            Fixes to getDriverPropertyInfo().
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1f"></a>C.5.7.5. Changes in MySQL Connector/J 1.1f (31 December 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Changed all ResultSet fields to Strings, this should allow
            Unicode to work, but your JVM must be able to convert
            between the character sets. This should also make reading
            data from the server be a bit quicker, because there is now
            no conversion from StringBuffer to String.
          </p></li><li><p>
            Changed PreparedStatement.streamToString() to be more
            efficient (code from Uwe Schaefer).
          </p></li><li><p>
            URL parsing is more robust (throws SQL exceptions on errors
            rather than NullPointerExceptions)
          </p></li><li><p>
            PreparedStatement now can convert Strings to Time/Date
            values via setObject() (code from Robert Currey).
          </p></li><li><p>
            IO no longer hangs in Buffer.readInt(), that bug was
            introduced in 1.1d when changing to all byte-arrays for
            result sets. (Pointed out by Samo Login)
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1b"></a>C.5.7.6. Changes in MySQL Connector/J 1.1b (03 November 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixes to DatabaseMetaData to allow both IBM VA and J-Builder
            to work. Let me know how it goes. (thanks to Jac Kersing)
          </p></li><li><p>
            Fix to ResultSet.getBoolean() for NULL strings (thanks to
            Barry Lagerweij)
          </p></li><li><p>
            Beginning of code cleanup, and formatting. Getting ready to
            branch this off to a parallel JDBC-2.0 source tree.
          </p></li><li><p>
            Added "final" modifier to critical sections in MysqlIO and
            Buffer to allow compiler to inline methods for speed.
          </p></li></ul></div><p>
        9-29-98
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            If object references passed to setXXX() in PreparedStatement
            are null, setNull() is automatically called for you. (Thanks
            for the suggestion goes to Erik Ostrom)
          </p></li><li><p>
            setObject() in PreparedStatement will now attempt to write a
            serialized representation of the object to the database for
            objects of Types.OTHER and objects of unknown type.
          </p></li><li><p>
            Util now has a static method readObject() which given a
            ResultSet and a column index will re-instantiate an object
            serialized in the above manner.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1"></a>C.5.7.7. Changes in MySQL Connector/J 1.1 (02 September 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Got rid of "ugly hack" in MysqlIO.nextRow(). Rather than
            catch an exception, Buffer.isLastDataPacket() was fixed.
          </p></li><li><p>
            Connection.getCatalog() and Connection.setCatalog() should
            work now.
          </p></li><li><p>
            Statement.setMaxRows() works, as well as setting by property
            maxRows. Statement.setMaxRows() overrides maxRows set via
            properties or url parameters.
          </p></li><li><p>
            Automatic re-connection is available. Because it has to
            "ping" the database before each query, it is turned off by
            default. To use it, pass in "autoReconnect=true" in the
            connection URL. You may also change the number of reconnect
            tries, and the initial timeout value via "maxReconnects=n"
            (default 3) and "initialTimeout=n" (seconds, default 2)
            parameters. The timeout is an exponential backoff type of
            timeout; for example, if you have initial timeout of 2
            seconds, and maxReconnects of 3, then the driver will
            timeout 2 seconds, 4 seconds, then 16 seconds between each
            re-connection attempt.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-0"></a>C.5.7.8. Changes in MySQL Connector/J 1.0 (24 August 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixed handling of blob data in Buffer.java
          </p></li><li><p>
            Fixed bug with authentication packet being sized too small.
          </p></li><li><p>
            The JDBC Driver is now under the LPGL
          </p></li></ul></div><p>
        8-14-98
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Fixed Buffer.readLenString() to correctly read data for
            BLOBS.
          </p></li><li><p>
            Fixed PreparedStatement.stringToStream to correctly read
            data for BLOBS.
          </p></li><li><p>
            Fixed PreparedStatement.setDate() to not add a day. (above
            fixes thanks to Vincent Partington)
          </p></li><li><p>
            Added URL parameter parsing (?user=... and so forth).
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-0-9d"></a>C.5.7.9. Changes in MySQL Connector/J 0.9d (04 August 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Big news! New package name. Tim Endres from ICE Engineering
            is starting a new source tree for GNU GPL'd Java software.
            He's graciously given me the org.gjt.mm package directory to
            use, so now the driver is in the org.gjt.mm.mysql package
            scheme. I'm "legal" now. Look for more information on Tim's
            project soon.
          </p></li><li><p>
            Now using dynamically sized packets to reduce memory usage
            when sending commands to the DB.
          </p></li><li><p>
            Small fixes to getTypeInfo() for parameters, and so forth.
          </p></li><li><p>
            DatabaseMetaData is now fully implemented. Let me know if
            these drivers work with the various IDEs out there. I've
            heard that they're working with JBuilder right now.
          </p></li><li><p>
            Added JavaDoc documentation to the package.
          </p></li><li><p>
            Package now available in .zip or .tar.gz.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-0-9"></a>C.5.7.10. Changes in MySQL Connector/J 0.9 (28 July 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Implemented getTypeInfo(). Connection.rollback() now throws
            an SQLException per the JDBC spec.
          </p></li><li><p>
            Added PreparedStatement that supports all JDBC API methods
            for PreparedStatement including InputStreams. Please check
            this out and let me know if anything is broken.
          </p></li><li><p>
            Fixed a bug in ResultSet that would break some queries that
            only returned 1 row.
          </p></li><li><p>
            Fixed bugs in DatabaseMetaData.getTables(),
            DatabaseMetaData.getColumns() and
            DatabaseMetaData.getCatalogs().
          </p></li><li><p>
            Added functionality to Statement that allows executeUpdate()
            to store values for IDs that are automatically generated for
            AUTO_INCREMENT fields. Basically, after an executeUpdate(),
            look at the SQLWarnings for warnings like "LAST_INSERTED_ID
            = 'some number', COMMAND = 'your SQL query'". If you are
            using AUTO_INCREMENT fields in your tables and are executing
            a lot of executeUpdate()s on one Statement, be sure to
            clearWarnings() every so often to save memory.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-0-8"></a>C.5.7.11. Changes in MySQL Connector/J 0.8 (06 July 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Split MysqlIO and Buffer to separate classes. Some
            ClassLoaders gave an IllegalAccess error for some fields in
            those two classes. Now mm.mysql works in applets and all
            classloaders. Thanks to Joe Ennis &lt;jce@mail.boone.com&gt;
            for pointing out the problem and working on a fix with me.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-0-7"></a>C.5.7.12. Changes in MySQL Connector/J 0.7 (01 July 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Fixed DatabaseMetadata problems in getColumns() and bug in
            switch statement in the Field constructor. Thanks to Costin
            Manolache &lt;costin@tdiinc.com&gt; for pointing these out.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-0-6"></a>C.5.7.13. Changes in MySQL Connector/J 0.6 (21 May 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Incorporated efficiency changes from Richard Swift
            &lt;Richard.Swift@kanatek.ca&gt; in
            <code class="literal">MysqlIO.java</code> and
            <code class="literal">ResultSet.java</code>:
          </p></li><li><p>
            We're now 15% faster than gwe's driver.
          </p></li><li><p>
            Started working on <code class="literal">DatabaseMetaData</code>.
          </p></li><li><p>
            The following methods are implemented:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <code class="literal">getTables()</code>
              </p></li><li><p>
                <code class="literal">getTableTypes()</code>
              </p></li><li><p>
                <code class="literal">getColumns()</code>
              </p></li><li><p>
                <code class="literal">getCatalogs()</code>
              </p></li></ul></div></li></ul></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="news-connector-mxj"></a>C.6. MySQL Connector/MXJ Change History</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-6">C.6.1. Changes in  MySQL Connector/MXJ 5.0.6 (04 May 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-5">C.6.2. Changes in  MySQL Connector/MXJ 5.0.5 (14 March 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-4">C.6.3. Changes in  MySQL Connector/MXJ 5.0.4 (28 January 2007)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-3">C.6.4. Changes in  MySQL Connector/MXJ 5.0.3 (24 June 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-2">C.6.5. Changes in  MySQL Connector/MXJ 5.0.2 (15 June 2006)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-1">C.6.6. Changes in  MySQL Connector/MXJ 5.0.1 (Never released)</a></span></dt><dt><span class="section"><a href="news.html#news-connector-mxj-5-0-0">C.6.7. Changes in  MySQL Connector/MXJ 5.0.0 (09 December 2005)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-6"></a>C.6.1. Changes in  MySQL Connector/MXJ 5.0.6 (04 May 2007)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Updated internal jar file names to include version information
        and be more consistent with Connector/J jar naming. For example,
        <code class="filename">connector-mxj.jar</code> is now
        <code class="filename">mysql-connector-mxj-${mxj-version}.jar</code>.
      </p></li><li><p>
        Updated commercial license files.
      </p></li><li><p>
        Added copyright notices to some classes which were missing them.
      </p></li><li><p>
        Added <code class="classname">InitializeUser</code> and
        <code class="classname">QueryUtil</code> classes to support new feature.
      </p></li><li><p>
        Added new tests for initial-user &amp; expanded some existing
        tests.
      </p></li><li><p>
        <code class="classname">ConnectorMXJUrlTestExample</code> and
        <code class="classname">ConnectorMXJObjectTestExample</code> now
        demonstrate the initialization of user/password and creating the
        initial database (rather than using "test").
      </p></li><li><p>
        Added new connection property <code class="option">initialize-user</code>
        which, if set to <code class="literal">true</code> will remove the
        default, un-passworded anonymous and root users, and create the
        user/password from the connection url.
      </p></li><li><p>
        Removed obsolete field
        <code class="literal">SimpleMysqldDynamicMBean.lastInvocation</code>.
      </p></li><li><p>
        Clarified code in <code class="literal">DefaultsMap.entrySet()</code>.
      </p></li><li><p>
        Removed obsolete
        <code class="filename">PatchedStandardSocketFactory</code> java file.
      </p></li><li><p>
        Added <code class="literal">main(String[])</code> to
        <code class="filename">com/mysql/management/AllTestsSuite.java</code>.
      </p></li><li><p>
        Errors reading <code class="literal">portFile</code> are now reported
        using <code class="literal">stacktrace(err)</code>, previously
        <code class="literal">System.err</code> was used.
      </p></li><li><p>
        <code class="literal">portFile</code> now contains a new-line to be
        consistent with <code class="literal">pidFile</code>.
      </p></li><li><p>
        Fixed where <code class="methodname">versionString.trim()</code> was
        ignored.
      </p></li><li><p>
        Removed references to <code class="classname">File.deleteOnExit</code>,
        a warning is printed instead.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Changed tests to shutdown mysqld prior to deleting files.
      </p></li><li><p>
        Fixed port file to always be writen to datadir.
      </p></li><li><p>
        Added os.name-os.arch to resource directory mapping properties
        file.
      </p></li><li><p>
        Swapped out commercial binaries for v5.0.40.
      </p></li><li><p>
        Delete <code class="literal">portFile</code> on shutdown.
      </p></li><li><p>
        Moved <code class="literal">platform-map.properties</code> into
        <code class="filename">db-files.jar</code>.
      </p></li><li><p>
        Clarified the startup max wait numbers.
      </p></li><li><p>
        Updated <code class="filename">build.xml</code> in preperation for next
        beta build.
      </p></li><li><p>
        Removed <code class="literal">use-default-architecture</code> property
        replaced.
      </p></li><li><p>
        Added null-check to deal with C/MXJ being loaded by the
        bootstrap classloaders with JVMs for which
        <code class="literal">getClassLoader()</code> returns null.
      </p></li><li><p>
        Added robustness around reading portfile.
      </p></li><li><p>
        Removed <code class="literal">PatchedStandardSocketFactory</code> (fixed
        in Connetor/J 5.0.6).
      </p></li><li><p>
        Refactored duplication from tests and examples to
        <code class="classname">QueryUtil</code>.
      </p></li><li><p>
        Removed obsolete
        <code class="classname">InitializePasswordExample</code>
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-5"></a>C.6.2. Changes in  MySQL Connector/MXJ 5.0.5 (14 March 2007)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Moved <code class="literal">MysqldFactory</code> to main package.
      </p></li><li><p>
        Reformatting: Added newlines some files which did not end in
        them.
      </p></li><li><p>
        Swapped out commercial binaries for v5.0.36.
      </p></li><li><p>
        Found and removed dynamic linking in mysql_kill; updated
        solution.
      </p></li><li><p>
        Changed protected constructor of
        <code class="literal">SimpleMysqldDynamicMBean</code> from taking a
        <code class="literal">MysqldResource</code> to taking a
        <code class="literal">MysqldFactory</code>, in order to lay groundwork for
        addressing BUG discovered by Andrew Rubinger. See:
        <a href="http://forums.mysql.com/read.php?39,143046,143046#msg-143046" target="_top">MySQL
        Forums</a> (Actual testing with JBoss, and filing a bug, is
        still required.)
      </p></li><li><p>
        <code class="filename">build.xml</code>: <code class="literal">usage</code> now
        slightly more verbose; some reformatting.
      </p></li><li><p>
        Now incoporates Reggie Bernett's
        <code class="literal">SafeTerminateProcess</code> and only calls the
        unsafe TerminateProcess as a final last resort.
      </p></li><li><p>
        New windows <code class="filename">kill.exe</code> fixes bug where mysqld
        was being force terminated. Issue reported by bruno haleblian
        and others, see:
        <a href="http://forums.mysql.com/read.php?39,140623,140623#msg-140623" target="_top">MySQL
        Forums</a>.
      </p></li><li><p>
        Replaced <code class="literal">Boolean.parseBoolean</code> with JDK 1.4
        compliant <code class="literal">valueOf</code>.
      </p></li><li><p>
        Changed <code class="literal">connector-mxj.properties</code> default
        mysql version to 5.0.37.
      </p></li><li><p>
        In testing so far mysqld reliably shuts down cleanly much
        faster.
      </p></li><li><p>
        Added testcase to
        <code class="literal">com.mysql.management.jmx.AcceptanceTest</code> which
        demonstrats that <code class="literal">dataDir</code> is a mutable MBean
        property.
      </p></li><li><p>
        Updated <code class="literal">build.xml</code> in prep for next release.
      </p></li><li><p>
        Changed <code class="literal">SimpleMysqldDynamicMBean</code> to create
        <code class="literal">MysqldResource</code> on demand in order to allow
        setting of <code class="filename">datadir</code>. (Rubinger bug
        groundwork).
      </p></li><li><p>
        Clarified the synchronization of
        <code class="literal">MysqldResource</code> methods.
      </p></li><li><p>
        <code class="literal">SIGHUP</code> is replaced with
        <code class="literal">MySQLShutdown&lt;PID&gt;</code> event.
      </p></li><li><p>
        Clarified the immutability of <code class="literal">baseDir</code>,
        <code class="literal">dataDir</code>, <code class="literal">pidFile</code>,
        <code class="literal">portFile</code>.
      </p></li><li><p>
        Added 5.1.15 binaries to the repository.
      </p></li><li><p>
        Removed 5.1.14 binaries from the repository.
      </p></li><li><p>
        Added <code class="literal">getDataDir()</code> to interface
        <code class="literal">MysqldResourceI</code>.
      </p></li><li><p>
        Added 5.1.14 binaries to repository.
      </p></li><li><p>
        Replaced windows <span><strong class="command">kill.exe</strong></span> resource with
        re-written version specific to mysqld.
      </p></li><li><p>
        Added Patched <code class="literal">StandardSocketFactory</code> from
        Connector/J 5-0 HEAD.
      </p></li><li><p>
        Ensured 5.1.14 compatibility.
      </p></li><li><p>
        Swapped out gpl binaries for v5.0.37.
      </p></li><li><p>
        Removed 5.0.22 binaries from the repository.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-4"></a>C.6.3. Changes in  MySQL Connector/MXJ 5.0.4 (28 January 2007)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Allow multiple calls to start server from URL connection on
        non-3306 port.
       (<a href="http://bugs.mysql.com/24004" target="_top">Bug#24004</a>)</p></li><li><p>
        Updated <code class="filename">build.xml</code> to build to handle with
        different gpl and commercial mysld version numbers.
      </p></li><li><p>
        Only populate the options map from the help text if specifically
        requested or in the MBean case.
      </p></li><li><p>
        Introduced property for Linux &amp; WinXX to default to 32bit
        versions.
      </p></li><li><p>
        Swapped out gpl binaries for v5.0.27.
      </p></li><li><p>
        Swapped out commercial binaries for v5.0.32.
      </p></li><li><p>
        Moved mysqld binary resourced into separate jar file NOTICE:
        <code class="literal">CLASSPATH</code> will now need to
        <code class="filename">connector-mxj-db-files.jar</code>.
      </p></li><li><p>
        Minor test robustness improvements.
      </p></li><li><p>
        Moved default version string out of java class into a text
        editable properties file
        (<code class="literal">connector-mxj.properties</code>) in the resources
        directory.
      </p></li><li><p>
        Fixed test to be tollerant of <code class="filename">/tmp</code> being a
        symlink to <code class="filename">/foo/tmp</code>.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-3"></a>C.6.4. Changes in  MySQL Connector/MXJ 5.0.3 (24 June 2006)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Removed unused imports, formatted code, made minor edits to
        tests.
      </p></li><li><p>
        Removed "TeeOutputStream" - no longer needed.
      </p></li><li><p>
        Swapped out the mysqld binaries for MySQL v5.0.22.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-2"></a>C.6.5. Changes in  MySQL Connector/MXJ 5.0.2 (15 June 2006)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Replaced string parsing with JDBC connection attempt for
        determining if a mysqld is "ready for connections"
        <code class="literal">CLASSPATH</code> will now need to include
        Connector/J jar.
      </p></li><li><p>
        "platform" directories replace spaces with underscores
      </p></li><li><p>
        extracted array and list printing to ListToString utility class
      </p></li><li><p>
        Swapped out the mysqld binaries for MySQL v5.0.21
      </p></li><li><p>
        Added trace level logging with Aspect/J.
        <code class="literal">CLASSPATH</code> will now need to include
        <code class="literal">lib/aspectjrt.jar</code>
      </p></li><li><p>
        reformatted code
      </p></li><li><p>
        altered to be "basedir" rather than "port"
        oriented.
      </p></li><li><p>
        help parsing test reflects current help options
      </p></li><li><p>
        insulated users from problems with "." in basedir
      </p></li><li><p>
        swapped out the mysqld binaries for MySQL v5.0.18
      </p></li><li><p>
        Made tests more robust be deleting the /tmp/test-c.mxj directory
        before running tests.
      </p></li><li><p>
        ServerLauncherSocketFactory.shutdown API change: now takes File
        parameter (basedir) instead of port.
      </p></li><li><p>
        socket is now "mysql.sock" in datadir
      </p></li><li><p>
        added ability to specify "mysql-version" as an url
        parameter
      </p></li><li><p>
        Extended timeout for help string parsing, to avoid cases where
        the help text was getting prematurely flushed, and thus
        truncated.
      </p></li><li><p>
        swapped out the mysqld binaries for MySQL v5.0.19
      </p></li><li><p>
        MysqldResource now tied to dataDir as well as basedir (API
        CHANGE)
      </p></li><li><p>
        moved PID file into datadir
      </p></li><li><p>
        ServerLauncherSocketFactory.shutdown now works across JVMs.
      </p></li><li><p>
        extracted splitLines(String) to Str utility class
      </p></li><li><p>
        ServerLauncherSocketFactory.shutdown(port) no longer throws,
        only reports to System.err
      </p></li><li><p>
        ServerLauncherSocketFactory now treats URL parameters in the
        form of <code class="literal">&amp;server.foo=null</code> as
        <code class="literal">serverOptionMap.put("foo", null)</code>
      </p></li><li><p>
        ServerLauncherSocketFactory.shutdown API change: now takes 2
        File parameters (basedir, datadir)
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-1"></a>C.6.6. Changes in  MySQL Connector/MXJ 5.0.1 (Never released)</h3></div></div></div><p>
        This was an internal only release.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="news-connector-mxj-5-0-0"></a>C.6.7. Changes in  MySQL Connector/MXJ 5.0.0 (09 December 2005)</h3></div></div></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Removed HelpOptionsParser's need to reference a MysqldResource.
      </p></li><li><p>
        Reorganized utils into a single "Utils" collaborator.
      </p></li><li><p>
        Minor test tweaks
      </p></li><li><p>
        Altered examples and tests to use new Connector/J 5.0 URL syntax
        for for launching Connector/MXJ ("jdbc:mysql:mxj://")
      </p></li><li><p>
        Swapped out the mysqld binaries for MySQL v5.0.16.
      </p></li><li><p>
        Ditched "ClassUtil" (merged with Str).
      </p></li><li><p>
        Minor refactorings for type casting and exception handling.
      </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-proxy-news"></a>C.7. MySQL Proxy Change History</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="news.html#mysql-proxy-news-0-6-0">C.7.1. Changes in  MySQL Proxy 0.6.0 (Not yet released)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-5-1">C.7.2. Changes in  MySQL Proxy 0.5.1 (30 June 2007)</a></span></dt><dt><span class="section"><a href="news.html#mysql-proxy-news-0-5-0">C.7.3. Changes in  MySQL Proxy 0.5.0 (19 June 2007)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-proxy-news-0-6-0"></a>C.7.1. Changes in  MySQL Proxy 0.6.0 (Not yet released)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        When using read/write splitting and the
        <code class="filename">rw-splitting.lua</code> example script, connecting
        a second user to the proxy returns an error message.
       (<a href="http://bugs.mysql.com/30867" target="_top">Bug#30867</a>)</p></li><li><p>
        Added support in <code class="literal">read_query_result()</code> to
        overwrite the result-set.
      </p></li><li><p>
        Added <code class="option">--no-daemon</code> and
        <code class="option">--pid-file</code>.
      </p></li><li><p>
        Added hooks for <code class="literal">read_auth()</code>,
        <code class="literal">read_handshake()</code> and
        <code class="literal">read_auth_result()</code>.
      </p></li><li><p>
        Added handling of
        <code class="literal">proxy.connection.backend_ndx</code> in
        <code class="literal">connect_server()</code> and
        <code class="literal">read_query()</code> to support read/write
        splitting.
      </p></li><li><p>
        Added support for <code class="literal">proxy.response.packets</code>.
      </p></li><li><p>
        Added testcases.
      </p></li><li><p>
        Added <code class="option">--no-proxy</code> to disable the proxy.
      </p></li><li><p>
        Added support for listening UNIX sockets.
      </p></li><li><p>
        Added a global lua-scope <code class="literal">proxy.global.*</code>.
      </p></li><li><p>
        Added connection pooling.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed assertion on <code class="literal">COM_BINLOG_DUMP</code>.
       (<a href="http://bugs.mysql.com/29764" target="_top">Bug#29764</a>)</p></li><li><p>
        Fixed assertion on result-packets like <code class="literal">[ field-len |
        fields | EOF | ERR ]</code>.
       (<a href="http://bugs.mysql.com/29732" target="_top">Bug#29732</a>)</p></li><li><p>
        Fixed assertion at login with empty password + empty default db.
       (<a href="http://bugs.mysql.com/29719" target="_top">Bug#29719</a>)</p></li><li><p>
        Fixed assertion at <code class="literal">COM_SHUTDOWN</code>.
       (<a href="http://bugs.mysql.com/29719" target="_top">Bug#29719</a>)</p></li><li><p>
        Fixed crash if <code class="literal">proxy.connection</code> is used in
        <code class="literal">connect_server()</code>.
      </p></li><li><p>
        Fixed check for <code class="literal">glib2</code> to require at least
        2.6.0.
      </p></li><li><p>
        Fixed assertion when all backends are down and we try to
        connect.
      </p></li><li><p>
        Fixed connection-stalling if
        <code class="literal">read_query_result()</code> throws an
        <code class="literal">assert()</code>ion.
      </p></li><li><p>
        Fixed len-encoding on <code class="literal">proxy.resulsets</code>.
      </p></li><li><p>
        Fixed compilation on win32.
      </p></li><li><p>
        Fixed assertion when connecting to the MySQL 6.0.1.
      </p></li><li><p>
        Fixed decoding of len-encoded ints for 3-byte notation.
      </p></li><li><p>
        Fixed <code class="literal">inj.resultset.affected_rows</code> on
        <code class="literal">SELECT</code> queries.
      </p></li><li><p>
        Fixed handling of (SQL) <code class="literal">NULL</code> in result-sets.
      </p></li><li><p>
        Fixed mem-leak with <code class="literal">proxy.response.*</code> is used.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-proxy-news-0-5-1"></a>C.7.2. Changes in  MySQL Proxy 0.5.1 (30 June 2007)</h3></div></div></div><p>Functionality added or changed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Added <code class="literal">resultset.affected_rows</code> and
        <code class="literal">resultset.insert_id</code>.
      </p></li><li><p>
        Changed <code class="option">--proxy.profiling</code> to
        <code class="option">--proxy-skip-profiling</code>.
      </p></li><li><p>
        Added missing dependency to
        <code class="literal">libmysqlclient-dev</code> to the INSTALL file.
      </p></li><li><p>
        Added <code class="literal">inj.query_time</code> and
        <code class="literal">inj.response_time</code> into the lua scripts.
      </p></li><li><p>
        Added support for pre-4.1 passwords in a 4.1 connection.
      </p></li><li><p>
        Added script examples for rewriting and injection.
      </p></li><li><p>
        Added <code class="literal">proxy.VERSION</code>.
      </p></li><li><p>
        Added support for UNIX sockets.
      </p></li><li><p>
        Added protection against duplicate resultsets from a script.
      </p></li></ul></div><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Fixed mysql check in configure to die when mysql.h isn't
        detected.
      </p></li><li><p>
        Fixed handling of duplicate ERR on
        <code class="literal">COM_CHANGE_USER</code> in MySQL 5.1.18+.
      </p></li><li><p>
        Fixed compile error with MySQL 4.1.x on missing COM_STMT_*.
      </p></li><li><p>
        Fixed crash on fields &gt; 250 bytes when the resultset is
        inspected.
      </p></li><li><p>
        Fixed warning if <code class="literal">connect_server()</code> is not
        provided.
      </p></li><li><p>
        Fixed assertion when a error occurs at initial script exec time.
      </p></li><li><p>
        Fixed assertion when <code class="literal">read_query_result()</code> is
        not provided when <code class="literal">PROXY_SEND_QUERY</code> is used.
      </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-proxy-news-0-5-0"></a>C.7.3. Changes in  MySQL Proxy 0.5.0 (19 June 2007)</h3></div></div></div><p>
        This is the first beta release.
      </p><p>Bugs fixed:</p><div class="itemizedlist"><ul type="disc"><li><p>
        Added <code class="literal">automake</code>/<code class="literal">autoconf</code>
        support.
      </p></li><li><p>
        Added <code class="literal">cmake</code> support.
      </p></li></ul></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="error-handling.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="restrictions.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Appendix B. Errors, Error Codes, and Common Problems </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Appendix D. Restrictions and Limits</td></tr></table></div></body></html>
