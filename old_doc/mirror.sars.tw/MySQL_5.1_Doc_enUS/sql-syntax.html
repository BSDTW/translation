<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Chapter 12. SQL Statement Syntax</title><link rel="stylesheet" href="mysql-html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="up" href="index.html" title="MySQL 5.1 Reference Manual"><link rel="prev" href="functions.html" title="Chapter 11. Functions and Operators"><link rel="next" href="storage-engines.html" title="Chapter 13. Storage Engines"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 12. SQL Statement Syntax</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="functions.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="storage-engines.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="sql-syntax"></a>Chapter 12. SQL Statement Syntax</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="sql-syntax.html#sql-syntax-data-definition">12.1. Data Definition Statements</a></span></dt><dd><dl><dt><span class="section"><a href="sql-syntax.html#alter-database">12.1.1. <code class="literal">ALTER DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-logfile-group">12.1.2. <code class="literal">ALTER LOGFILE GROUP</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-server">12.1.3. <code class="literal">ALTER SERVER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-table">12.1.4. <code class="literal">ALTER TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-tablespace">12.1.5. <code class="literal">ALTER TABLESPACE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-database">12.1.6. <code class="literal">CREATE DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-index">12.1.7. <code class="literal">CREATE INDEX</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-logfile-group">12.1.8. <code class="literal">CREATE LOGFILE GROUP</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-server">12.1.9. <code class="literal">CREATE SERVER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-table">12.1.10. <code class="literal">CREATE TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-tablespace">12.1.11. <code class="literal">CREATE TABLESPACE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-database">12.1.12. <code class="literal">DROP DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-index">12.1.13. <code class="literal">DROP INDEX</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-logfile-group">12.1.14. <code class="literal">DROP LOGFILE GROUP</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-server">12.1.15. <code class="literal">DROP SERVER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-table">12.1.16. <code class="literal">DROP TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-tablespace">12.1.17. <code class="literal">DROP TABLESPACE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#rename-database">12.1.18. <code class="literal">RENAME DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#rename-table">12.1.19. <code class="literal">RENAME TABLE</code> Syntax</a></span></dt></dl></dd><dt><span class="section"><a href="sql-syntax.html#sql-syntax-data-manipulation">12.2. Data Manipulation Statements</a></span></dt><dd><dl><dt><span class="section"><a href="sql-syntax.html#delete">12.2.1. <code class="literal">DELETE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#do">12.2.2. <code class="literal">DO</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#handler">12.2.3. <code class="literal">HANDLER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#insert">12.2.4. <code class="literal">INSERT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#load-data">12.2.5. <code class="literal">LOAD DATA INFILE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#replace">12.2.6. <code class="literal">REPLACE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#select">12.2.7. <code class="literal">SELECT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#subqueries">12.2.8. Subquery Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#truncate">12.2.9. <code class="literal">TRUNCATE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#update">12.2.10. <code class="literal">UPDATE</code> Syntax</a></span></dt></dl></dd><dt><span class="section"><a href="sql-syntax.html#sql-syntax-utility">12.3. MySQL Utility Statements</a></span></dt><dd><dl><dt><span class="section"><a href="sql-syntax.html#describe">12.3.1. <code class="literal">DESCRIBE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#explain">12.3.2. <code class="literal">EXPLAIN</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#help">12.3.3. <code class="literal">HELP</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#use">12.3.4. <code class="literal">USE</code> Syntax</a></span></dt></dl></dd><dt><span class="section"><a href="sql-syntax.html#sql-syntax-transactions">12.4. MySQL Transactional and Locking Statements</a></span></dt><dd><dl><dt><span class="section"><a href="sql-syntax.html#commit">12.4.1. <code class="literal">START TRANSACTION</code>, <code class="literal">COMMIT</code>, and
      <code class="literal">ROLLBACK</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#cannot-roll-back">12.4.2. Statements That Cannot Be Rolled Back</a></span></dt><dt><span class="section"><a href="sql-syntax.html#implicit-commit">12.4.3. Statements That Cause an Implicit Commit</a></span></dt><dt><span class="section"><a href="sql-syntax.html#savepoints">12.4.4. <code class="literal">SAVEPOINT</code> and <code class="literal">ROLLBACK TO
      SAVEPOINT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#lock-tables">12.4.5. <code class="literal">LOCK TABLES</code> and <code class="literal">UNLOCK TABLES</code>
      Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#set-transaction">12.4.6. <code class="literal">SET TRANSACTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#xa">12.4.7. XA Transactions</a></span></dt></dl></dd><dt><span class="section"><a href="sql-syntax.html#sql-syntax-server-administration">12.5. Database Administration Statements</a></span></dt><dd><dl><dt><span class="section"><a href="sql-syntax.html#account-management-sql">12.5.1. Account Management Statements</a></span></dt><dt><span class="section"><a href="sql-syntax.html#table-maintenance-sql">12.5.2. Table Maintenance Statements</a></span></dt><dt><span class="section"><a href="sql-syntax.html#plugin-sql">12.5.3. Plugin and User-Defined Function Statements</a></span></dt><dt><span class="section"><a href="sql-syntax.html#set-option">12.5.4. <code class="literal">SET</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show">12.5.5. <code class="literal">SHOW</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#other-administrative-sql">12.5.6. Other Administrative Statements</a></span></dt></dl></dd><dt><span class="section"><a href="sql-syntax.html#sql-syntax-replication">12.6. Replication Statements</a></span></dt><dd><dl><dt><span class="section"><a href="sql-syntax.html#replication-master-sql">12.6.1. SQL Statements for Controlling Master Servers</a></span></dt><dt><span class="section"><a href="sql-syntax.html#replication-slave-sql">12.6.2. SQL Statements for Controlling Slave Servers</a></span></dt></dl></dd><dt><span class="section"><a href="sql-syntax.html#sql-syntax-prepared-statements">12.7. SQL Syntax for Prepared Statements</a></span></dt><dd><dl><dt><span class="section"><a href="sql-syntax.html#statement-repreparation">12.7.1. Automatic Prepared Statement Repreparation</a></span></dt></dl></dd></dl></div><p>
    This chapter describes the syntax for most of the SQL statements
    supported by MySQL. Additional statement descriptions can be found
    in the following chapters:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Statements for writing stored routines are covered in
        <a href="stored-procedures.html" title="Chapter 23. Stored Procedures and Functions">Chapter 23, <i>Stored Procedures and Functions</i></a>.
      </p></li><li><p>
        Statements for writing triggers are covered in
        <a href="triggers.html" title="Chapter 24. Triggers">Chapter 24, <i>Triggers</i></a>.
      </p></li><li><p>
        View-related statements are covered in <a href="views.html" title="Chapter 26. Views">Chapter 26, <i>Views</i></a>.
      </p></li><li><p>
        Statements for scheduling events are covered in
        <a href="events.html" title="Chapter 25. Event Scheduler">Chapter 25, <i>Event Scheduler</i></a>.
      </p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql-syntax-data-definition"></a>12.1. Data Definition Statements</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#alter-database">12.1.1. <code class="literal">ALTER DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-logfile-group">12.1.2. <code class="literal">ALTER LOGFILE GROUP</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-server">12.1.3. <code class="literal">ALTER SERVER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-table">12.1.4. <code class="literal">ALTER TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-tablespace">12.1.5. <code class="literal">ALTER TABLESPACE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-database">12.1.6. <code class="literal">CREATE DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-index">12.1.7. <code class="literal">CREATE INDEX</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-logfile-group">12.1.8. <code class="literal">CREATE LOGFILE GROUP</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-server">12.1.9. <code class="literal">CREATE SERVER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-table">12.1.10. <code class="literal">CREATE TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-tablespace">12.1.11. <code class="literal">CREATE TABLESPACE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-database">12.1.12. <code class="literal">DROP DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-index">12.1.13. <code class="literal">DROP INDEX</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-logfile-group">12.1.14. <code class="literal">DROP LOGFILE GROUP</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-server">12.1.15. <code class="literal">DROP SERVER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-table">12.1.16. <code class="literal">DROP TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-tablespace">12.1.17. <code class="literal">DROP TABLESPACE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#rename-database">12.1.18. <code class="literal">RENAME DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#rename-table">12.1.19. <code class="literal">RENAME TABLE</code> Syntax</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="alter-database"></a>12.1.1. <code class="literal">ALTER DATABASE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2183757"></a><a class="indexterm" name="id2183766"></a><a class="indexterm" name="id2183775"></a><a class="indexterm" name="id2183788"></a><a class="indexterm" name="id2183800"></a><a class="indexterm" name="id2183812"></a><pre class="programlisting">ALTER {DATABASE | SCHEMA} [<em class="replaceable"><code>db_name</code></em>]
    <em class="replaceable"><code>alter_specification</code></em> ...
ALTER {DATABASE | SCHEMA} <em class="replaceable"><code>db_name</code></em>
    UPGRADE DATA DIRECTORY NAME

<em class="replaceable"><code>alter_specification</code></em>:
    [DEFAULT] CHARACTER SET [=] <em class="replaceable"><code>charset_name</code></em>
  | [DEFAULT] COLLATE [=] <em class="replaceable"><code>collation_name</code></em>
</pre><p>
      <code class="literal">ALTER DATABASE</code> enables you to change the
      overall characteristics of a database. These characteristics are
      stored in the <code class="filename">db.opt</code> file in the database
      directory. To use <code class="literal">ALTER DATABASE</code>, you need the
      <code class="literal">ALTER</code> privilege on the database. <code class="literal">ALTER
      SCHEMA</code> is a synonym for <code class="literal">ALTER
      DATABASE</code>.
    </p><p>
      The <code class="literal">CHARACTER SET</code> clause changes the default
      database character set. The <code class="literal">COLLATE</code> clause
      changes the default database collation. <a href="internationalization-localization.html#charset" title="9.1. Character Set Support">Section 9.1, “Character Set Support”</a>,
      discusses character set and collation names.
    </p><p>
      You can see what character sets and collations are available
      using, respectively, the <code class="literal">SHOW CHARACTER SET</code> and
      <code class="literal">SHOW COLLATION</code> statements. See
      <a href="sql-syntax.html#show-character-set" title="12.5.5.4. SHOW CHARACTER SET Syntax">Section 12.5.5.4, “<code class="literal">SHOW CHARACTER SET</code> Syntax”</a>, and
      <a href="sql-syntax.html#show-collation" title="12.5.5.5. SHOW COLLATION Syntax">Section 12.5.5.5, “<code class="literal">SHOW COLLATION</code> Syntax”</a>, for more information.
    </p><p>
      The database name can be omitted from the first syntax, in which
      case the statement applies to the default database.
    </p><p>
      The syntax that includes the <code class="literal">UPGRADE DATA DIRECTORY
      NAME</code> clause was added in MySQL 5.1.23. It updates the
      name of the directory associated with the database to use the
      encoding implemented in MySQL 5.1 for mapping database names to
      database directory names (see
      <a href="language-structure.html#identifier-mapping" title="8.2.3. Mapping of Identifiers to Filenames">Section 8.2.3, “Mapping of Identifiers to Filenames”</a>). This clause is for use
      under these conditions:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          It is intended when upgrading MySQL to 5.1 or later from older
          versions.
        </p></li><li><p>
          It is intended to update a database directory name to the
          current encoding format if the name contains special
          characters that need encoding.
        </p></li><li><p>
          The statement is used by <span><strong class="command">mysqlcheck</strong></span> (as
          invoked by <span><strong class="command">mysql_upgrade</strong></span>).
        </p></li></ul></div><p>
      For example,if a database in MySQL 5.0 has a name of
      <code class="literal">a-b-c</code>, the name contains instance of the
      ‘<code class="literal">-</code>’ character. In 5.0, the database
      directory is also named <code class="literal">a-b-c</code>, which is not
      necessarily safe for all filesystems. In MySQL 5.1 and up, the
      same database name is encoded as <code class="literal">a@002db@002dc</code>
      to produce a filesystem-neutral directory name.
    </p><p>
      When a MySQL installation is upgraded to MySQL 5.1 or later from
      an older version,the server displays a name such as
      <code class="literal">a-b-c</code> (which is in the old format) as
      <code class="literal">#mysql50#a-b-c</code>, and you must refer to the name
      using the <code class="literal">#mysql50#</code> prefix. Use
      <code class="literal">UPGRADE DATA DIRECTORY NAME</code> in this case to
      explicitly tell the server to re-encode the database directory
      name to the current encoding format:
    </p><pre class="programlisting">ALTER DATABASE `#mysql50#a-b-c` UPGRADE DATA DIRECTORY NAME;
</pre><p>
      After executing this statement, you can refer to the database as
      <code class="literal">a-b-c</code> without the special
      <code class="literal">#mysql50#</code> prefix.
    </p><p class="mnmas"><b>MySQL Enterprise</b>
        In a production environment, alteration of a database is not a
        common occurrence and may indicate a security breach. Advisors
        provided as part of the MySQL Enterprise Monitor automatically
        alert you when data definition statements are issued. For more
        information, see <a href="advisors.html" target="_top">advisors.html</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="alter-logfile-group"></a>12.1.2. <code class="literal">ALTER LOGFILE GROUP</code> Syntax</h3></div></div></div><a class="indexterm" name="id2184140"></a><pre class="programlisting">ALTER LOGFILE GROUP <em class="replaceable"><code>logfile_group</code></em>
    ADD UNDOFILE '<em class="replaceable"><code>file_name</code></em>'
    [INITIAL_SIZE [=] <em class="replaceable"><code>size</code></em>]
    [WAIT]
    ENGINE [=] <em class="replaceable"><code>engine_name</code></em>
</pre><p>
      This statement adds an <code class="literal">UNDO</code> file named
      '<em class="replaceable"><code>file_name</code></em>' to an existing log file
      group <em class="replaceable"><code>logfile_group</code></em>. An <code class="literal">ALTER
      LOGFILE GROUP</code> statement has one and only one
      <code class="literal">ADD UNDOFILE</code> clause. No <code class="literal">DROP
      UNDOFILE</code> clause is supported.
    </p><p>
      The optional <code class="literal">INITIAL_SIZE</code> parameter sets the
      <code class="literal">UNDO</code> file's initial size in bytes; if not
      specified, the initial size default to <code class="literal">128M</code>
      (128 megabytes). You may optionally follow
      <em class="replaceable"><code>size</code></em> with a one-letter abbreviation for
      an order of magnitude, similar to those used in
      <code class="filename">my.cnf</code>. Generally, this is one of the letters
      <code class="literal">M</code> (for megabytes) or <code class="literal">G</code> (for
      gigabytes).
    </p><p>
      On 32-bit systems, the maximum supported value for
      <code class="literal">INITIAL_SIZE</code> is <code class="literal">4G</code>. (<a href="http://bugs.mysql.com/29186" target="_top">Bug#29186</a>)
    </p><p>
      <code class="literal">WAIT</code> is parsed but otherwise ignored, and so
      has no effect in MySQL 5.1. It is intended for future
      expansion.
    </p><p>
      The <code class="literal">ENGINE</code> parameter (required) determines the
      storage engine which is used by this log file group, with
      <em class="replaceable"><code>engine_name</code></em> being the name of the
      storage engine. In MySQL 5.1, the only accepted values for
      <em class="replaceable"><code>engine_name</code></em> are <code class="literal">NDB</code>
      and <code class="literal">NDBCLUSTER</code>.
    </p><p>
      Here is an example, which assumes that the log file group
      <code class="literal">lg_3</code> has already been created using
      <code class="literal">CREATE LOGFILE GROUP</code> (see
      <a href="sql-syntax.html#create-logfile-group" title="12.1.8. CREATE LOGFILE GROUP Syntax">Section 12.1.8, “<code class="literal">CREATE LOGFILE GROUP</code> Syntax”</a>):
    </p><pre class="programlisting">ALTER LOGFILE GROUP lg_3
    ADD UNDOFILE 'undo_10.dat'
    INITIAL_SIZE=32M
    ENGINE=NDB;
</pre><p>
      When <code class="literal">ALTER LOGFILE GROUP</code> is used with
      <code class="literal">ENGINE = NDB</code>, an <code class="literal">UNDO</code> log
      file is created on each Cluster data node. You can verify that the
      <code class="literal">UNDO</code> files were created and obtain information
      about them by querying the
      <code class="literal">INFORMATION_SCHEMA.FILES</code> table. For example:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT FILE_NAME, LOGFILE_GROUP_NUMBER, EXTRA</code></strong> 
    -&gt; <strong class="userinput"><code>FROM INFORMATION_SCHEMA.FILES</code></strong> 
    -&gt; <strong class="userinput"><code>WHERE LOGFILE_GROUP_NAME = 'lg_3';</code></strong>
+-------------+----------------------+----------------+
| FILE_NAME   | LOGFILE_GROUP_NUMBER | EXTRA          |
+-------------+----------------------+----------------+
| newdata.dat |                    0 | CLUSTER_NODE=3 |
| newdata.dat |                    0 | CLUSTER_NODE=4 |
| undo_10.dat |                   11 | CLUSTER_NODE=3 |
| undo_10.dat |                   11 | CLUSTER_NODE=4 |
+-------------+----------------------+----------------+
4 rows in set (0.01 sec)
</pre><p>
      (See <a href="information-schema.html#files-table" title="27.21. The INFORMATION_SCHEMA FILES Table">Section 27.21, “The <code class="literal">INFORMATION_SCHEMA FILES</code> Table”</a>.)
    </p><p>
      <code class="literal">ALTER LOGFILE GROUP</code> was added in MySQL 5.1.6.
      In MySQL 5.1, it is useful only with Disk Data storage for MySQL
      Cluster. See <a href="mysql-cluster.html#mysql-cluster-disk-data" title="20.12. MySQL Cluster Disk Data Tables">Section 20.12, “MySQL Cluster Disk Data Tables”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="alter-server"></a>12.1.3. <code class="literal">ALTER SERVER</code> Syntax</h3></div></div></div><a class="indexterm" name="id2184442"></a><pre class="programlisting">ALTER SERVER  <em class="replaceable"><code>server_name</code></em>
    OPTIONS (<em class="replaceable"><code>option</code></em> [, <em class="replaceable"><code>option</code></em>] ...)
</pre><p>
      Alters the server information for
      <code class="literal"><em class="replaceable"><code>server_name</code></em></code>,
      adjusting the specified options as per the <code class="literal">CREATE
      SERVER</code> command. See <a href="sql-syntax.html#create-server" title="12.1.9. CREATE SERVER Syntax">Section 12.1.9, “<code class="literal">CREATE SERVER</code> Syntax”</a>. The
      corresponding fields in the <code class="literal">mysql.servers</code> table
      are updated accordingly. This statement requires the
      <code class="literal">SUPER</code> privilege.
    </p><p>
      For example, to update the <code class="literal">USER</code> option:
    </p><pre class="programlisting">ALTER SERVER s OPTIONS (USER 'sally');</pre><p>
      <code class="literal">ALTER SERVER</code> does not cause an automatic
      commit.
    </p><p>
      <code class="literal">ALTER SERVER</code> was added in MySQL 5.1.15.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="alter-table"></a>12.1.4. <code class="literal">ALTER TABLE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2184580"></a><a class="indexterm" name="id2184589"></a><a class="indexterm" name="id2184602"></a><pre class="programlisting">ALTER [ONLINE | OFFLINE] [IGNORE] TABLE <em class="replaceable"><code>tbl_name</code></em>
    <em class="replaceable"><code>alter_specification</code></em> [, <em class="replaceable"><code>alter_specification</code></em>] ...

<em class="replaceable"><code>alter_specification</code></em>:
    <em class="replaceable"><code>table_option</code></em> ...
  | ADD [COLUMN] <em class="replaceable"><code>col_name</code></em> <em class="replaceable"><code>column_definition</code></em>
        [FIRST | AFTER <em class="replaceable"><code>col_name</code></em> ]
  | ADD [COLUMN] (<em class="replaceable"><code>col_name</code></em> <em class="replaceable"><code>column_definition</code></em>,...)
  | ADD {INDEX|KEY} [<em class="replaceable"><code>index_name</code></em>]
        [<em class="replaceable"><code>index_type</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...) [<em class="replaceable"><code>index_option</code></em>] ...
  | ADD [CONSTRAINT [<em class="replaceable"><code>symbol</code></em>]] PRIMARY KEY
        [<em class="replaceable"><code>index_type</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...) [<em class="replaceable"><code>index_option</code></em>] ...
  | ADD [CONSTRAINT [<em class="replaceable"><code>symbol</code></em>]]
        UNIQUE [INDEX|KEY] [<em class="replaceable"><code>index_name</code></em>]
        [<em class="replaceable"><code>index_type</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...) [<em class="replaceable"><code>index_option</code></em>] ...
  | ADD FULLTEXT [INDEX|KEY] [<em class="replaceable"><code>index_name</code></em>]
        (<em class="replaceable"><code>index_col_name</code></em>,...) [<em class="replaceable"><code>index_option</code></em>] ...
  | ADD SPATIAL [INDEX|KEY] [<em class="replaceable"><code>index_name</code></em>]
        (<em class="replaceable"><code>index_col_name</code></em>,...) [<em class="replaceable"><code>index_option</code></em>] ...
  | ADD [CONSTRAINT [<em class="replaceable"><code>symbol</code></em>]]
        FOREIGN KEY [<em class="replaceable"><code>index_name</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...)
        <em class="replaceable"><code>reference_definition</code></em>
  | ALTER [COLUMN] <em class="replaceable"><code>col_name</code></em> {SET DEFAULT <em class="replaceable"><code>literal</code></em> | DROP DEFAULT}
  | CHANGE [COLUMN] <em class="replaceable"><code>old_col_name</code></em> <em class="replaceable"><code>new_col_name</code></em> <em class="replaceable"><code>column_definition</code></em>
        [FIRST|AFTER <em class="replaceable"><code>col_name</code></em>]
  | MODIFY [COLUMN] <em class="replaceable"><code>col_name</code></em> <em class="replaceable"><code>column_definition</code></em>
        [FIRST | AFTER <em class="replaceable"><code>col_name</code></em>]
  | DROP [COLUMN] <em class="replaceable"><code>col_name</code></em>
  | DROP PRIMARY KEY
  | DROP {INDEX|KEY} <em class="replaceable"><code>index_name</code></em>
  | DROP FOREIGN KEY <em class="replaceable"><code>fk_symbol</code></em>
  | DISABLE KEYS
  | ENABLE KEYS
  | RENAME [TO] <em class="replaceable"><code>new_tbl_name</code></em>
  | ORDER BY <em class="replaceable"><code>col_name</code></em> [, <em class="replaceable"><code>col_name</code></em>] ...
  | CONVERT TO CHARACTER SET <em class="replaceable"><code>charset_name</code></em> [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | [DEFAULT] CHARACTER SET [=] <em class="replaceable"><code>charset_name</code></em> [COLLATE [=] <em class="replaceable"><code>collation_name</code></em>]
  | DISCARD TABLESPACE
  | IMPORT TABLESPACE
  | <em class="replaceable"><code>partition_options</code></em>
  | ADD PARTITION (<em class="replaceable"><code>partition_definition</code></em>)
  | DROP PARTITION <em class="replaceable"><code>partition_names</code></em>
  | COALESCE PARTITION <em class="replaceable"><code>number</code></em>
  | REORGANIZE PARTITION <em class="replaceable"><code>partition_names</code></em> INTO (<em class="replaceable"><code>partition_definitions</code></em>)
  | ANALYZE PARTITION <em class="replaceable"><code>partition_names</code></em>
  | CHECK PARTITION <em class="replaceable"><code>partition_names</code></em>
  | OPTIMIZE PARTITION <em class="replaceable"><code>partition_names</code></em>
  | REBUILD PARTITION <em class="replaceable"><code>partition_names</code></em>
  | REPAIR PARTITION <em class="replaceable"><code>partition_names</code></em>
  | REMOVE PARTITIONING

<em class="replaceable"><code>index_col_name</code></em>:
    <em class="replaceable"><code>col_name</code></em> [(<em class="replaceable"><code>length</code></em>)] [ASC | DESC]

<em class="replaceable"><code>index_type</code></em>:
    USING {BTREE | HASH | RTREE}

<em class="replaceable"><code>index_option</code></em>:
    KEY_BLOCK_SIZE [=] <em class="replaceable"><code>value</code></em>
  | <em class="replaceable"><code>index_type</code></em>
  | WITH PARSER <em class="replaceable"><code>parser_name</code></em>
  | COMMENT '<em class="replaceable"><code>string</code></em>'
</pre><p>
      <code class="literal">ALTER TABLE</code> enables you to change the structure
      of an existing table. For example, you can add or delete columns,
      create or destroy indexes, change the type of existing columns, or
      rename columns or the table itself. You can also change the
      comment for the table and type of the table.
    </p><p>
      The syntax for many of the allowable alterations is similar to
      clauses of the <code class="literal">CREATE TABLE</code> statement. See
      <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>, for more information.
    </p><p>
      Some operations may result in warnings if attempted on a table for
      which the storage engine does not support the operation. These
      warnings can be displayed with <code class="literal">SHOW WARNINGS</code>.
      See <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax">Section 12.5.5.37, “<code class="literal">SHOW WARNINGS</code> Syntax”</a>.
    </p><p>
      In most cases, <code class="literal">ALTER TABLE</code> works by making a
      temporary copy of the original table. The alteration is performed
      on the copy, and then the original table is deleted and the new
      one is renamed. While <code class="literal">ALTER TABLE</code> is executing,
      the original table is readable by other clients. Updates and
      writes to the table are stalled until the new table is ready, and
      then are automatically redirected to the new table without any
      failed updates. The temporary table is created in the database
      directory of the new table. This can be different from the
      database directory of the original table if <code class="literal">ALTER
      TABLE</code> is renaming the table to a different database.
    </p><p>
      In some cases, no temporary table is necessary:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Alterations that modify only table metadata and not table data
          can be made immediately by altering the table's
          <code class="filename">.frm</code> file and not touching table
          contents. The following changes are fast alterations that can
          be made this way:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              Renaming a column or index.
            </p></li><li><p>
              Changing the default value of a column.
            </p></li><li><p>
              Changing the definition of an <code class="literal">ENUM</code> or
              <code class="literal">SET</code> column by adding new enumeration or
              set members to the <span class="emphasis"><em>end</em></span> of the list of
              valid member values.
            </p></li></ul></div><p>
          In some cases, an operation such as changing a
          <code class="literal">VARCHAR(10)</code> column to
          <code class="literal">VARCHAR(15)</code> may be immediate, but this
          depends on the storage engine for the table. A change such as
          <code class="literal">VARCHAR(10)</code> to a length greater than 255 is
          not immediate because data values must be modified from using
          one byte to store the length to using two bytes.
        </p></li><li><p>
          If you use <code class="literal">ALTER TABLE
          <em class="replaceable"><code>tbl_name</code></em> RENAME TO
          <em class="replaceable"><code>new_tbl_name</code></em></code> without any
          other options, MySQL simply renames any files that correspond
          to the table <em class="replaceable"><code>tbl_name</code></em>. (You can
          also use the <code class="literal">RENAME TABLE</code> statement to
          rename tables. See <a href="sql-syntax.html#rename-table" title="12.1.19. RENAME TABLE Syntax">Section 12.1.19, “<code class="literal">RENAME TABLE</code> Syntax”</a>.) Any
          privileges granted specifically for the renamed table are not
          migrated to the new name. They must be changed manually.
        </p></li><li><p>
          <code class="literal">ALTER TABLE ... ADD PARTITION</code> creates no
          temporary table except for MySQL Cluster.
          <code class="literal">ADD</code> or <code class="literal">DROP</code> operations
          for <code class="literal">RANGE</code> or <code class="literal">LIST</code>
          partitions are immediate operations or nearly so.
          <code class="literal">ADD</code> or <code class="literal">COALESCE</code>
          operations for <code class="literal">HASH</code> or
          <code class="literal">KEY</code> partitions copy data between changed
          partitions; unless <code class="literal">LINEAR HASH</code> or
          <code class="literal">LINEAR KEY</code> was used, this is much the same
          as creating a new table (although the operation is done
          partition by partition). <code class="literal">REORGANIZE</code>
          operations copy only changed partitions and do not touch
          unchanged ones.
        </p></li></ul></div><p>
      If other cases, MySQL creates a temporary table, even if the data
      wouldn't strictly need to be copied. For <code class="literal">MyISAM</code>
      tables, you can speed up the index re-creation operation (which is
      the slowest part of the alteration process) by setting the
      <code class="literal">myisam_sort_buffer_size</code> system variable to a
      high value.
    </p><p>
      For information on troubleshooting <code class="literal">ALTER TABLE</code>,
      see <a href="error-handling.html#alter-table-problems" title="B.1.7.1. Problems with ALTER TABLE">Section B.1.7.1, “Problems with <code class="literal">ALTER TABLE</code>”</a>.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          To use <code class="literal">ALTER TABLE</code>, you need
          <code class="literal">ALTER</code>, <code class="literal">INSERT</code>, and
          <code class="literal">CREATE</code> privileges for the table.
        </p></li><li><p>
          Beginning with MySQL 5.1.7, <code class="literal">ADD INDEX</code> and
          <code class="literal">DROP INDEX</code> operations are performed online
          when the indexes are on variable-width columns only.
        </p><p>
          The <code class="literal">ONLINE</code> keyword can be used to perform
          online <code class="literal">ADD COLUMN</code>, <code class="literal">ADD
          INDEX</code>, and <code class="literal">DROP INDEX</code> operations
          on <code class="literal">NDB</code> tables beginning with MySQL Cluster
          NDB 6.2.5 and MySQL Cluster NDB 6.3.3, as well as online
          renaming of tables and columns. Online renaming operations
          (but not online adding or dropping of columns or indexes) are
          also supported for <code class="literal">MyISAM</code> tables. Online
          operations are non-copying; that is, they do not require that
          indexes be re-created, and they do not lock the table being
          changed. Such operations do not require single user mode for
          <code class="literal">NDB</code> table alterations made in a cluster
          with multiple API nodes; transactions can continue
          uninterrupted during online DDL operations.
        </p><p>
          The <code class="literal">ONLINE</code> and <code class="literal">OFFLINE</code>
          keywords are supported only in MySQL Cluster NDB 6.2 and 6.3
          (beginning with versions 6.2.5 and 6.3.3). In other versions
          of MySQL (5.1.17 and later):

          </p><div class="orderedlist"><ol type="1"><li><p>
                The server determines automatically whether an
                <code class="literal">ADD INDEX</code> or <code class="literal">DROP
                INDEX</code> operation can be (and is) performed
                online or offline; if the column is of a variable-width
                data type, then the operation is performed online. It is
                not possible to override the server behavior in this
                regard.
              </p></li><li><p>
                Attempting to use the <code class="literal">ONLINE</code> or
                <code class="literal">OFFLINE</code> keyword in an <code class="literal">ALTER
                TABLE</code> statement results in an error.
              </p></li></ol></div><p>
        </p><p><b>Limitations. </b>
            Online <code class="literal">ALTER TABLE</code> operations that add
            columns are subject to the following limitations:

            </p><div class="itemizedlist"><ul type="circle"><li><p>
                  The table to be altered must have an explicit primary
                  key; the hidden primary key created by the
                  <code class="literal">NDB</code> storage engine is not
                  sufficient for this purpose. Columns to be added
                  online must meet the following criteria:
                </p><div class="itemizedlist"><ul type="square"><li><p>
                      Such columns must be dynamic; that is, it must be
                      possible to create them using
                      <code class="literal">COLUMN_FORMAT DYNAMIC</code>.
                    </p></li><li><p>
                      Such columns must be nullable, and not have any
                      explicit default value other than
                      <code class="literal">NULL</code>. Columns added online are
                      automatically created as <code class="literal">DEFAULT
                      NULL</code>, as can be seen here:
                    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (</code></strong>
     &gt;     <strong class="userinput"><code>c1 INT NOT NULL AUTO_INCREMENT PRIMARY KEY</code></strong>
     &gt;     <strong class="userinput"><code>) ENGINE=NDBCLUSTER;</code></strong>
Query OK, 0 rows affected (1.44 sec)

mysql&gt; <strong class="userinput"><code>ALTER ONLINE TABLE t1</code></strong>
     &gt;     <strong class="userinput"><code>ADD COLUMN c2 INT,</code></strong> 
     &gt;     <strong class="userinput"><code>ADD COLUMN c3 INT;</code></strong>
Query OK, 0 rows affected, 2 warnings (0.93 sec)

mysql&gt; <strong class="userinput"><code>SHOW CREATE TABLE t2\G</code></strong>
*************************** 1. row ***************************
       Table: t2
Create Table: CREATE TABLE `t2` (
  `c1` int(11) NOT NULL AUTO_INCREMENT,
  `c2` int(11) DEFAULT NULL,
  `c3` int(11) DEFAULT NULL,
  PRIMARY KEY (`c1`)
) ENGINE=ndbcluster DEFAULT CHARSET=latin1
1 row in set (0.00 sec)
</pre></li><li><p>
                      Columns must be added following any existing
                      columns. If you attempt to add a column online
                      before any existing columns, the statement fails
                      with an error. Trying to add a column online using
                      the <code class="literal">FIRST</code> keyword also fails.
                    </p><p>
                      In addition, existing table columns cannot be
                      reordered online.
                    </p></li><li><p>
                      The storage engine used by the table cannot be
                      changed online.
                    </p></li></ul></div><p>
                  These limitations do not apply to operations that
                  merely rename tables or columns.
                </p><p>
                  If the storage engine supports online <code class="literal">ALTER
                  TABLE</code>, then fixed-format columns will be
                  converted to dynamic when columns are added online, or
                  when indexes are created or dropped online, as shown
                  here:
                </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (c1 INT NOT NULL AUTO_INCREMENT PRIMARY KEY) ENGINE=NDB;</code></strong>
Query OK, 0 rows affected (1.44 sec)

mysql&gt; <strong class="userinput"><code>ALTER ONLINE TABLE t1 ADD COLUMN c2 INT, ADD COLUMN c3 INT;</code></strong>
Query OK, 0 rows affected, 2 warnings (0.93 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+---------+------+---------------------------------------------------------------+
| Level   | Code | Message                                                       |
+---------+------+---------------------------------------------------------------+
| Warning | 1475 | Converted FIXED field to DYNAMIC to enable on-line ADD COLUMN |
| Warning | 1475 | Converted FIXED field to DYNAMIC to enable on-line ADD COLUMN |
+---------+------+---------------------------------------------------------------+
2 rows in set (0.00 sec)
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                    Existing columns, including the table's primary key,
                    need not be dynamic; only the column or columns to
                    be added online must be dynamic.
                  </p></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t2 (</code></strong>
     &gt;     <strong class="userinput"><code>c1 INT NOT NULL AUTO_INCREMENT PRIMARY KEY COLUMN_FORMAT FIXED</code></strong>
     &gt;     <strong class="userinput"><code>) ENGINE=NDB;</code></strong>
Query OK, 0 rows affected (2.10 sec)

mysql&gt; <strong class="userinput"><code>ALTER ONLINE TABLE t2 ADD COLUMN c2 INT;</code></strong>
Query OK, 0 rows affected, 1 warning (0.78 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+---------+------+---------------------------------------------------------------+
| Level   | Code | Message                                                       |
+---------+------+---------------------------------------------------------------+
| Warning | 1475 | Converted FIXED field to DYNAMIC to enable on-line ADD COLUMN |
+---------+------+---------------------------------------------------------------+
1 row in set (0.00 sec)
</pre><p>
                  Columns are not converted from
                  <code class="literal">FIXED</code> to <code class="literal">DYNAMIC</code>
                  column format by renaming operations. For more
                  information about <code class="literal">COLUMN_FORMAT</code>,
                  see <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>.
                </p></li><li><p>
                  Online <code class="literal">DROP COLUMN</code> operations are
                  not supported.
                </p></li><li><p>
                  A given online <code class="literal">ALTER TABLE</code> can use
                  only one of <code class="literal">ADD COLUMN</code>,
                  <code class="literal">ADD INDEX</code>, or <code class="literal">DROP
                  INDEX</code>. One or more columns can be added
                  online in a single statement; only one index may be
                  created or dropped online in a single statement.
                </p></li></ul></div><p>
          </p><p>
          The <code class="literal">KEY</code>, <code class="literal">CONSTRAINT</code>, and
          <code class="literal">IGNORE</code> keywords are supported in
          <code class="literal">ALTER TABLE</code> statements using the
          <code class="literal">ONLINE</code> keyword.
        </p><p>
          The <code class="literal">ONLINE</code> and <code class="literal">OFFLINE</code>
          keywords are also supported in <code class="literal">ALTER TABLE ... CHANGE
          ...</code> statements that rename columns.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            The <code class="literal">CREATE INDEX</code> and <code class="literal">DROP
            INDEX</code> statements also support online operations,
            as well as the <code class="literal">ONLINE</code> and
            <code class="literal">OFFLINE</code> keywords. See
            <a href="sql-syntax.html#create-index" title="12.1.7. CREATE INDEX Syntax">Section 12.1.7, “<code class="literal">CREATE INDEX</code> Syntax”</a>, and
            <a href="sql-syntax.html#drop-index" title="12.1.13. DROP INDEX Syntax">Section 12.1.13, “<code class="literal">DROP INDEX</code> Syntax”</a>, for more information.
          </p></div></li><li><p>
          <code class="literal">IGNORE</code> is a MySQL extension to standard
          SQL. It controls how <code class="literal">ALTER TABLE</code> works if
          there are duplicates on unique keys in the new table or if
          warnings occur when strict mode is enabled. If
          <code class="literal">IGNORE</code> is not specified, the copy is
          aborted and rolled back if duplicate-key errors occur. If
          <code class="literal">IGNORE</code> is specified, only the first row is
          used of rows with duplicates on a unique key, The other
          conflicting rows are deleted. Incorrect values are truncated
          to the closest matching acceptable value.
        </p></li><li><p>
          <em class="replaceable"><code>table_option</code></em> signifies a table
          option of the kind that can be used in the <code class="literal">CREATE
          TABLE</code> statement, such as <code class="literal">ENGINE</code>,
          <code class="literal">AUTO_INCREMENT</code>, or
          <code class="literal">AVG_ROW_LENGTH</code>.
          (<a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>, lists all table options.)
          However, <code class="literal">ALTER TABLE</code> ignores the
          <code class="literal">DATA DIRECTORY</code> and <code class="literal">INDEX
          DIRECTORY</code> table options.
        </p><p>
          For example, to convert a table to be an
          <code class="literal">InnoDB</code> table, use this statement:
        </p><pre class="programlisting">ALTER TABLE t1 ENGINE = InnoDB;
</pre><p>
          The outcome of attempting to change a table's storage engine
          is affected by whether the desired storage engine is available
          and the setting of the
          <code class="literal">NO_ENGINE_SUBSTITUTION</code> SQL mode, as
          described in <a href="server-administration.html#server-sql-mode" title="5.1.7. SQL Modes">Section 5.1.7, “SQL Modes”</a>.
        </p><p>
          As of MySQL 5.1.11, to prevent inadvertent loss of data,
          <code class="literal">ALTER TABLE</code> cannot be used to change the
          storage engine of a table to <code class="literal">MERGE</code> or
          <code class="literal">BLACKHOLE</code>.
        </p><p>
          To change the value of the <code class="literal">AUTO_INCREMENT</code>
          counter to be used for new rows, do this:
        </p><pre class="programlisting">ALTER TABLE t2 AUTO_INCREMENT = <em class="replaceable"><code>value</code></em>;
</pre><p>
          You cannot reset the counter to a value less than or equal to
          any that have already been used. For
          <code class="literal">MyISAM</code>, if the value is less than or equal
          to the maximum value currently in the
          <code class="literal">AUTO_INCREMENT</code> column, the value is reset
          to the current maximum plus one. For
          <code class="literal">InnoDB</code>, <span class="emphasis"><em>if the value is less than
          the current maximum value in the column, no error occurs and
          the current sequence value is not changed.</em></span>
        </p></li><li><p>
          You can issue multiple <code class="literal">ADD</code>,
          <code class="literal">ALTER</code>, <code class="literal">DROP</code>, and
          <code class="literal">CHANGE</code> clauses in a single <code class="literal">ALTER
          TABLE</code> statement, separated by commas. This is a
          MySQL extension to standard SQL, which allows only one of each
          clause per <code class="literal">ALTER TABLE</code> statement. For
          example, to drop multiple columns in a single statement, do
          this:
        </p><pre class="programlisting">ALTER TABLE t2 DROP COLUMN c, DROP COLUMN d;
</pre></li><li><p>
          <code class="literal">CHANGE <em class="replaceable"><code>col_name</code></em></code>,
          <code class="literal">DROP <em class="replaceable"><code>col_name</code></em></code>,
          and <code class="literal">DROP INDEX</code> are MySQL extensions to
          standard SQL.
        </p></li><li><p>
          <code class="literal">MODIFY</code> is an Oracle extension to
          <code class="literal">ALTER TABLE</code>.
        </p></li><li><p>
          The word <code class="literal">COLUMN</code> is optional and can be
          omitted.
        </p></li><li><p>
          <em class="replaceable"><code>column_definition</code></em> clauses use the
          same syntax for <code class="literal">ADD</code> and
          <code class="literal">CHANGE</code> as for <code class="literal">CREATE
          TABLE</code>. See <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>.
        </p></li><li><p>
          You can rename a column using a <code class="literal">CHANGE
          <em class="replaceable"><code>old_col_name</code></em>
          <em class="replaceable"><code>new_col_name</code></em>
          <em class="replaceable"><code>column_definition</code></em></code> clause.
          To do so, specify the old and new column names and the
          definition that the column currently has. For example, to
          rename an <code class="literal">INTEGER</code> column from
          <code class="literal">a</code> to <code class="literal">b</code>, you can do this:
        </p><pre class="programlisting">ALTER TABLE t1 CHANGE a b INTEGER;
</pre><p>
          If you want to change a column's type but not the name,
          <code class="literal">CHANGE</code> syntax still requires an old and new
          column name, even if they are the same. For example:
        </p><pre class="programlisting">ALTER TABLE t1 CHANGE b b BIGINT NOT NULL;
</pre><p>
          You can also use <code class="literal">MODIFY</code> to change a
          column's type without renaming it:
        </p><pre class="programlisting">ALTER TABLE t1 MODIFY b BIGINT NOT NULL;
</pre></li><li><p>
          If you use <code class="literal">CHANGE</code> or
          <code class="literal">MODIFY</code> to shorten a column for which an
          index exists on the column, and the resulting column length is
          less than the index length, MySQL shortens the index
          automatically.
        </p></li><li><p>
          When you change a data type using <code class="literal">CHANGE</code> or
          <code class="literal">MODIFY</code>, MySQL tries to convert existing
          column values to the new type as well as possible.
        </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
            This conversion may result in alteration of data. For
            example, if you shorten a string column, values may be
            truncated. To prevent the operation from succeeding if
            conversions to the new data type would result in loss of
            data, enable strict SQL mode before using <code class="literal">ALTER
            TABLE</code> (see <a href="server-administration.html#server-sql-mode" title="5.1.7. SQL Modes">Section 5.1.7, “SQL Modes”</a>).
          </p></div></li><li><p>
          To add a column at a specific position within a table row, use
          <code class="literal">FIRST</code> or <code class="literal">AFTER
          <em class="replaceable"><code>col_name</code></em></code>. The default is
          to add the column last. You can also use
          <code class="literal">FIRST</code> and <code class="literal">AFTER</code> in
          <code class="literal">CHANGE</code> or <code class="literal">MODIFY</code>
          operations to reorder columns within a table.
        </p></li><li><p>
          <a class="indexterm" name="id2186346"></a>

          <a class="indexterm" name="id2186355"></a>

          <a class="indexterm" name="id2186367"></a>

          <a class="indexterm" name="id2186380"></a>

          <a class="indexterm" name="id2186392"></a>

          <code class="literal">ALTER ... SET DEFAULT</code> or <code class="literal">ALTER ...
          DROP DEFAULT</code> specify a new default value for a
          column or remove the old default value, respectively. If the
          old default is removed and the column can be
          <code class="literal">NULL</code>, the new default is
          <code class="literal">NULL</code>. If the column cannot be
          <code class="literal">NULL</code>, MySQL assigns a default value as
          described in <a href="data-types.html#data-type-defaults" title="10.1.4. Data Type Default Values">Section 10.1.4, “Data Type Default Values”</a>.
        </p></li><li><p>
          <a class="indexterm" name="id2186448"></a>

          <a class="indexterm" name="id2186456"></a>

          <a class="indexterm" name="id2186469"></a>

          <code class="literal">DROP INDEX</code> removes an index. This is a
          MySQL extension to standard SQL. See
          <a href="sql-syntax.html#drop-index" title="12.1.13. DROP INDEX Syntax">Section 12.1.13, “<code class="literal">DROP INDEX</code> Syntax”</a>. If you are unsure of the index
          name, use <code class="literal">SHOW INDEX FROM
          <em class="replaceable"><code>tbl_name</code></em></code>.
        </p></li><li><p>
          If columns are dropped from a table, the columns are also
          removed from any index of which they are a part. If all
          columns that make up an index are dropped, the index is
          dropped as well.
        </p></li><li><p>
          If a table contains only one column, the column cannot be
          dropped. If what you intend is to remove the table, use
          <code class="literal">DROP TABLE</code> instead.
        </p></li><li><p>
          <a class="indexterm" name="id2186530"></a>

          <a class="indexterm" name="id2186539"></a>

          <a class="indexterm" name="id2186551"></a>

          <code class="literal">DROP PRIMARY KEY</code> drops the primary key. If
          there is no primary key, an error occurs.
        </p><a class="indexterm" name="id2186571"></a><a class="indexterm" name="id2186580"></a><p>
          If you add a <code class="literal">UNIQUE INDEX</code> or
          <code class="literal">PRIMARY KEY</code> to a table, it is stored before
          any non-unique index so that MySQL can detect duplicate keys
          as early as possible.
        </p></li><li><p>
          Some storage engines allow you to specify an index type when
          creating an index. The syntax for the
          <em class="replaceable"><code>index_type</code></em> specifier is
          <code class="literal">USING <em class="replaceable"><code>type_name</code></em></code>.
          For details about <code class="literal">USING</code>, see
          <a href="sql-syntax.html#create-index" title="12.1.7. CREATE INDEX Syntax">Section 12.1.7, “<code class="literal">CREATE INDEX</code> Syntax”</a>. Before MySQL 5.1.10,
          <code class="literal">USING</code> can be given only before the index
          column list. As of 5.1.10, the preferred position is after the
          column list. Use of the option before the column list will no
          longer be recognized as of MySQL 5.3.
        </p><p>
          <em class="replaceable"><code>index_option</code></em> values specify
          additional options for an index. <code class="literal">USING</code> is
          one such option. For details about allowable
          <em class="replaceable"><code>index_option</code></em> values, see
          <a href="sql-syntax.html#create-index" title="12.1.7. CREATE INDEX Syntax">Section 12.1.7, “<code class="literal">CREATE INDEX</code> Syntax”</a>.
        </p></li><li><p>
          After an <code class="literal">ALTER TABLE</code> statement, it may be
          necessary to run <code class="literal">ANALYZE TABLE</code> to update
          index cardinality information. See
          <a href="sql-syntax.html#show-index" title="12.5.5.20. SHOW INDEX Syntax">Section 12.5.5.20, “<code class="literal">SHOW INDEX</code> Syntax”</a>.
        </p></li><li><p>
          <a class="indexterm" name="id2186696"></a>

          <code class="literal">ORDER BY</code> enables you to create the new
          table with the rows in a specific order. Note that the table
          does not remain in this order after inserts and deletes. This
          option is useful primarily when you know that you are mostly
          to query the rows in a certain order most of the time. By
          using this option after major changes to the table, you might
          be able to get higher performance. In some cases, it might
          make sorting easier for MySQL if the table is in order by the
          column that you want to order it by later.
        </p><p>
          <code class="literal">ORDER BY</code> syntax allows for one or more
          column names to be specified for sorting, each of which
          optionally can be followed by <code class="literal">ASC</code> or
          <code class="literal">DESC</code> to indicate ascending or descending
          sort order, respectively. The default is ascending order. Only
          column names are allowed as sort criteria; arbitrary
          expressions are not allowed.
        </p><p>
          <code class="literal">ORDER BY</code> does not make sense for
          <code class="literal">InnoDB</code> tables that contain a user-defined
          clustered index (<code class="literal">PRIMARY KEY</code> or
          <code class="literal">NOT NULL UNIQUE</code> index).
          <code class="literal">InnoDB</code> always orders table rows according
          to such an index if one is present.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            When used on a partitioned table, <code class="literal">ALTER TABLE ...
            ORDER BY</code> orders rows within each partition only.
          </p></div></li><li><p>
          <a class="indexterm" name="id2186794"></a>

          <a class="indexterm" name="id2186802"></a>

          <a class="indexterm" name="id2186815"></a>

          If you use <code class="literal">ALTER TABLE</code> on a
          <code class="literal">MyISAM</code> table, all non-unique indexes are
          created in a separate batch (as for <code class="literal">REPAIR
          TABLE</code>). This should make <code class="literal">ALTER
          TABLE</code> much faster when you have many indexes.
        </p><p>
          This feature can be activated explicitly for a
          <code class="literal">MyISAM</code> table. <code class="literal">ALTER TABLE ...
          DISABLE KEYS</code> tells MySQL to stop updating non-unique
          indexes. <code class="literal">ALTER TABLE ... ENABLE KEYS</code> then
          should be used to re-create missing indexes. MySQL does this
          with a special algorithm that is much faster than inserting
          keys one by one, so disabling keys before performing bulk
          insert operations should give a considerable speedup. Using
          <code class="literal">ALTER TABLE ... DISABLE KEYS</code> requires the
          <code class="literal">INDEX</code> privilege in addition to the
          privileges mentioned earlier.
        </p><p>
          While the non-unique indexes are disabled, they are ignored
          for statements such as <code class="literal">SELECT</code> and
          <code class="literal">EXPLAIN</code> that otherwise would use them.
        </p><p>
          <code class="literal">ENABLE KEYS</code> and <code class="literal">DISABLE
          KEYS</code> were not supported for partitioned tables prior
          to MySQL 5.1.11.
        </p></li><li><p>
          If <code class="literal">ALTER TABLE</code> for an
          <code class="literal">InnoDB</code> table results in changes to column
          values (for example, because a column is truncated),
          <code class="literal">InnoDB</code>'s <code class="literal">FOREIGN KEY</code>
          constraint checks do not notice possible violations caused by
          changing the values.
        </p></li><li><p>
          <a class="indexterm" name="id2186961"></a>

          <a class="indexterm" name="id2186970"></a>

          The <code class="literal">FOREIGN KEY</code> and
          <code class="literal">REFERENCES</code> clauses are supported by the
          <code class="literal">InnoDB</code> storage engine, which implements
          <code class="literal">ADD [CONSTRAINT [<em class="replaceable"><code>symbol</code></em>]]
          FOREIGN KEY (...) REFERENCES ... (...)</code>. See
          <a href="storage-engines.html#innodb-foreign-key-constraints" title="13.5.6.4. FOREIGN KEY Constraints">Section 13.5.6.4, “<code class="literal">FOREIGN KEY</code> Constraints”</a>. For other
          storage engines, the clauses are parsed but ignored. The
          <code class="literal">CHECK</code> clause is parsed but ignored by all
          storage engines. See <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>. The
          reason for accepting but ignoring syntax clauses is for
          compatibility, to make it easier to port code from other SQL
          servers, and to run applications that create tables with
          references. See <a href="introduction.html#differences-from-ansi" title="1.8.5. MySQL Differences from Standard SQL">Section 1.8.5, “MySQL Differences from Standard SQL”</a>.
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
            The inline <code class="literal">REFERENCES</code> specifications
            where the references are defined as part of the column
            specification are silently ignored by
            <code class="literal">InnoDB</code>. InnoDB only accepts
            <code class="literal">REFERENCES</code> clauses defined as part of a
            separate <code class="literal">FOREIGN KEY</code> specification.
          </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Partitioned tables do not support foreign keys. See
            <a href="partitioning.html#partitioning-limitations" title="21.5. Restrictions and Limitations on Partitioning">Section 21.5, “Restrictions and Limitations on Partitioning”</a>, for more
            information.
          </p></div></li><li><p>
          <a class="indexterm" name="id2187081"></a>

          <a class="indexterm" name="id2187090"></a>

          <a class="indexterm" name="id2187103"></a>

          <code class="literal">InnoDB</code> supports the use of <code class="literal">ALTER
          TABLE</code> to drop foreign keys:
        </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>tbl_name</code></em> DROP FOREIGN KEY <em class="replaceable"><code>fk_symbol</code></em>;
</pre><p>
          For more information, see
          <a href="storage-engines.html#innodb-foreign-key-constraints" title="13.5.6.4. FOREIGN KEY Constraints">Section 13.5.6.4, “<code class="literal">FOREIGN KEY</code> Constraints”</a>.
        </p></li><li><p>
          You cannot add a foreign key and drop a foreign key in
          separate clauses of a single <code class="literal">ALTER TABLE</code>
          statement. You must use separate statements.
        </p></li><li><p>
          <a class="indexterm" name="id2187169"></a>

          <a class="indexterm" name="id2187178"></a>

          For an <code class="literal">InnoDB</code> table that is created with
          its own tablespace in an <code class="filename">.ibd</code> file, that
          file can be discarded and imported. To discard the
          <code class="filename">.ibd</code> file, use this statement:
        </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>tbl_name</code></em> DISCARD TABLESPACE;
</pre><p>
          This deletes the current <code class="filename">.ibd</code> file, so be
          sure that you have a backup first. Attempting to access the
          table while the tablespace file is discarded results in an
          error.
        </p><p>
          To import the backup <code class="filename">.ibd</code> file back into
          the table, copy it into the database directory, and then issue
          this statement:
        </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>tbl_name</code></em> IMPORT TABLESPACE;
</pre><p>
          See <a href="storage-engines.html#multiple-tablespaces" title="13.5.3.1. Using Per-Table Tablespaces">Section 13.5.3.1, “Using Per-Table Tablespaces”</a>.
        </p></li><li><p>
          Pending <code class="literal">INSERT DELAYED</code> statements are lost
          if a table is write locked and <code class="literal">ALTER TABLE</code>
          is used to modify the table structure.
        </p></li><li><p>
          <a class="indexterm" name="id2187281"></a>

          If you want to change the table default character set and all
          character columns (<code class="literal">CHAR</code>,
          <code class="literal">VARCHAR</code>, <code class="literal">TEXT</code>) to a new
          character set, use a statement like this:
        </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>tbl_name</code></em> CONVERT TO CHARACTER SET <em class="replaceable"><code>charset_name</code></em>;
</pre><p>
          For a column that has a data type of
          <code class="literal">VARCHAR</code> or one of the
          <code class="literal">TEXT</code> types, <code class="literal">CONVERT TO CHARACTER
          SET</code> will change the data type as necessary to ensure
          that the new column is long enough to store as many characters
          as the original column. For example, a <code class="literal">TEXT</code>
          column has two length bytes, which store the byte-length of
          values in the column, up to a maximum of 65,535. For a
          <code class="literal">latin1</code> <code class="literal">TEXT</code> column, each
          character requires a single byte, so the column can store up
          to 65,535 characters. If the column is converted to
          <code class="literal">utf8</code>, each character might require up to
          three bytes, for a maximum possible length of 3 × 65,535
          = 196,605 bytes. That length will not fit in a
          <code class="literal">TEXT</code> column's length bytes, so MySQL will
          convert the data type to <code class="literal">MEDIUMTEXT</code>, which
          is the smallest string type for which the length bytes can
          record a value of 196,605. Similarly, a
          <code class="literal">VARCHAR</code> column might be converted to
          <code class="literal">MEDIUMTEXT</code>.
        </p><p>
          To avoid data type changes of the type just described, do not
          use <code class="literal">CONVERT TO CHARACTER SET</code>. Instead, use
          <code class="literal">MODIFY</code> to change individual columns. For
          example:
        </p><pre class="programlisting">ALTER TABLE t MODIFY latin1_text_col TEXT CHARACTER SET utf8;
ALTER TABLE t MODIFY latin1_varchar_col VARCHAR(<em class="replaceable"><code>M</code></em>) CHARACTER SET utf8;
</pre><p>
          If you specify <code class="literal">CONVERT TO CHARACTER SET
          binary</code>, the <code class="literal">CHAR</code>,
          <code class="literal">VARCHAR</code>, and <code class="literal">TEXT</code>
          columns are converted to their corresponding binary string
          types (<code class="literal">BINARY</code>,
          <code class="literal">VARBINARY</code>, <code class="literal">BLOB</code>). This
          means that the columns no longer will have a character set and
          a subsequent <code class="literal">CONVERT TO</code> operation will not
          apply to them.
        </p><p>
          If <em class="replaceable"><code>charset_name</code></em> is
          <code class="literal">DEFAULT</code>, the database character set is
          used.
        </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
            The <code class="literal">CONVERT TO</code> operation converts column
            values between the character sets. This is
            <span class="emphasis"><em>not</em></span> what you want if you have a column
            in one character set (like <code class="literal">latin1</code>) but
            the stored values actually use some other, incompatible
            character set (like <code class="literal">utf8</code>). In this case,
            you have to do the following for each such column:
          </p><pre class="programlisting">ALTER TABLE t1 CHANGE c1 c1 BLOB;
ALTER TABLE t1 CHANGE c1 c1 TEXT CHARACTER SET utf8;
</pre><p>
            The reason this works is that there is no conversion when
            you convert to or from <code class="literal">BLOB</code> columns.
          </p></div><p>
          To change only the <span class="emphasis"><em>default</em></span> character set
          for a table, use this statement:
        </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>tbl_name</code></em> DEFAULT CHARACTER SET <em class="replaceable"><code>charset_name</code></em>;
</pre><p>
          The word <code class="literal">DEFAULT</code> is optional. The default
          character set is the character set that is used if you do not
          specify the character set for columns that you add to a table
          later (for example, with <code class="literal">ALTER TABLE ... ADD
          column</code>).
        </p></li><li><p>
          A number of partitioning-related extensions to <code class="literal">ALTER
          TABLE</code> were added in MySQL 5.1.5. These can be used
          with partitioned tables for repartitioning, for adding,
          dropping, merging, and splitting partitions, and for
          performing partitioning maintenance.
        </p><p>
          Simply using a <em class="replaceable"><code>partition_options</code></em>
          clause with <code class="literal">ALTER TABLE</code> on a partitioned
          table repartitions the table according to the partitioning
          scheme defined by the
          <em class="replaceable"><code>partition_options</code></em>. This clause
          always begins with <code class="literal">PARTITION BY</code>, and
          follows the same syntax and other rules as apply to the
          <em class="replaceable"><code>partition_options</code></em> clause for
          <code class="literal">CREATE TABLE</code> (see
          <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>, for more detailed
          information), and can also be used to partition an existing
          table that is not already partitioned. For example, consider a
          (non-partitioned) table defined as shown here:
        </p><pre class="programlisting">CREATE TABLE t1 (
    id INT,
    year_col INT
);
</pre><p>
          This table can be partitioned by <code class="literal">HASH</code>,
          using the <code class="literal">id</code> column as the partitioning
          key, into 8 partitions by means of this statement:
        </p><pre class="programlisting">ALTER TABLE t1
    PARTITION BY HASH(id)
    PARTITIONS 8;
</pre><p>
          The table that results from using an <code class="literal">ALTER TABLE ...
          PARTITION BY</code> statement must follow the same rules as
          one created using <code class="literal">CREATE TABLE ... PARTITION
          BY</code>. This includes the rules governing the
          relationship between any unique keys (including any primary
          key) that the table might have, and the column or columns used
          in the partitioning expression, as discussed in
          <a href="partitioning.html#partitioning-limitations-partitioning-keys-unique-keys" title="21.5.1. Partitioning Keys, Primary Keys, and Unique Keys">Section 21.5.1, “Partitioning Keys, Primary Keys, and Unique Keys”</a>.
          The <code class="literal">CREATE TABLE ... PARTITION BY</code> rules for
          specifying the number of partitions also apply to
          <code class="literal">ALTER TABLE ... PARTITION BY</code>.
        </p><p>
          <code class="literal">ALTER TABLE ... PARTITION BY</code> became
          available in MySQL 5.1.6.
        </p><p>
          The <em class="replaceable"><code>partition_definition</code></em> clause for
          <code class="literal">ALTER TABLE ADD PARTITION</code> supports the same
          options as the clause of the same name for the <code class="literal">CREATE
          TABLE</code> statement. (See
          <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>, for the syntax and
          description.) Suppose that you have the partitioned table
          created as shown here:
        </p><pre class="programlisting">CREATE TABLE t1 (
    id INT,
    year_col INT
)
PARTITION BY RANGE (year_col) (
    PARTITION p0 VALUES LESS THAN (1991),
    PARTITION p1 VALUES LESS THAN (1995),
    PARTITION p2 VALUES LESS THAN (1999)
);
</pre><p>
          You can add a new partition <code class="literal">p3</code> to this
          table for storing values less than <code class="literal">2002</code> as
          follows:
        </p><pre class="programlisting">ALTER TABLE t1 ADD PARTITION (PARTITION p3 VALUES LESS THAN (2002));
</pre><p>
          <code class="literal">DROP PARTITION</code> can be used to drop one or
          more <code class="literal">RANGE</code> or <code class="literal">LIST</code>
          partitions. This statement cannot be used with
          <code class="literal">HASH</code> or <code class="literal">KEY</code> partitions;
          instead, use <code class="literal">COALESCE PARTITION</code> (see
          below). Any data that was stored in the dropped partitions
          named in the <em class="replaceable"><code>partition_names</code></em> list
          is discarded. For example, given the table
          <code class="literal">t1</code> defined previously, you can drop the
          partitions named <code class="literal">p0</code> and
          <code class="literal">p1</code> as shown here:
        </p><pre class="programlisting">ALTER TABLE t1 DROP PARTITION p0, p1;
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            <code class="literal">DROP PARTITION</code> does not work with tables
            that use the <code class="literal">NDBCLUSTER</code> storage engine.
            See <a href="partitioning.html#partitioning-management-range-list" title="21.3.1. Management of RANGE and LIST
        Partitions">Section 21.3.1, “Management of <code class="literal">RANGE</code> and <code class="literal">LIST</code>
        Partitions”</a>,
            and <a href="mysql-cluster.html#mysql-cluster-limitations" title="20.14. Known Limitations of MySQL Cluster">Section 20.14, “Known Limitations of MySQL Cluster”</a>.
          </p></div><p>
          <code class="literal">ADD PARTITION</code> and <code class="literal">DROP
          PARTITION</code> do not currently support <code class="literal">IF [NOT]
          EXISTS</code>. It is also not possible to rename a
          partition or a partitioned table. Instead, if you wish to
          rename a partition, you must drop and re-create the partition;
          if you wish to rename a partitioned table, you must instead
          drop all partitions, rename the table, and then add back the
          partitions that were dropped.
        </p><p>
          <code class="literal">COALESCE PARTITION</code> can be used with a table
          that is partitioned by <code class="literal">HASH</code> or
          <code class="literal">KEY</code> to reduce the number of partitions by
          <em class="replaceable"><code>number</code></em>. Suppose that you have
          created table <code class="literal">t2</code> using the following
          definition:
        </p><pre class="programlisting">CREATE TABLE t2 (
    name VARCHAR (30),
    started DATE
)
PARTITION BY HASH( YEAR(started) )
PARTITIONS 6;
</pre><p>
          You can reduce the number of partitions used by
          <code class="literal">t2</code> from 6 to 4 using the following
          statement:
        </p><pre class="programlisting">ALTER TABLE t2 COALESCE PARTITION 2;
</pre><p>
          The data contained in the last
          <em class="replaceable"><code>number</code></em> partitions will be merged
          into the remaining partitions. In this case, partitions 4 and
          5 will be merged into the first 4 partitions (the partitions
          numbered 0, 1, 2, and 3).
        </p><p>
          To change some but not all the partitions used by a
          partitioned table, you can use <code class="literal">REORGANIZE
          PARTITION</code>. This statement can be used in several
          ways:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              To merge a set of partitions into a single partition. This
              can be done by naming several partitions in the
              <em class="replaceable"><code>partition_names</code></em> list and
              supplying a single definition for
              <em class="replaceable"><code>partition_definition</code></em>.
            </p></li><li><p>
              To split an existing partition into several partitions.
              You can accomplish this by naming a single partition for
              <em class="replaceable"><code>partition_names</code></em> and providing
              multiple <em class="replaceable"><code>partition_definitions</code></em>.
            </p></li><li><p>
              To change the ranges for a subset of partitions defined
              using <code class="literal">VALUES LESS THAN</code> or the value
              lists for a subset of partitions defined using
              <code class="literal">VALUES IN</code>.
            </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            For partitions that have not been explicitly named, MySQL
            automatically provides the default names
            <code class="literal">p0</code>, <code class="literal">p1</code>,
            <code class="literal">p2</code>, and so on. As of MySQL 5.1.7, the
            same is true with regard to subpartitions.
          </p></div><p>
          For more detailed information about and examples of
          <code class="literal">ALTER TABLE ... REORGANIZE PARTITION</code>
          statements, see <a href="partitioning.html#partitioning-management" title="21.3. Partition Management">Section 21.3, “Partition Management”</a>.
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
            Only a single <code class="literal">PARTITION BY</code>, <code class="literal">ADD
            PARTITION</code>, <code class="literal">DROP PARTITION</code>,
            <code class="literal">REORGANIZE PARTITION</code>, or
            <code class="literal">COALESCE PARTITION</code> clause can be used in
            a given <code class="literal">ALTER TABLE</code> statement.
          </p></div></li><li><p>
          Several additional options were introduced in MySQL 5.1.5 for
          providing partition maintenance and repair functionality
          analogous to that implemented for non-partitioned tables by
          statements such as <code class="literal">CHECK TABLE</code> and
          <code class="literal">REPAIR TABLE</code> (which are
          <span class="emphasis"><em>not</em></span> supported for partitioned tables).
          These include <code class="literal">ANALYZE PARTITION</code>,
          <code class="literal">CHECK PARTITION</code>, <code class="literal">OPTIMIZE
          PARTITION</code>, <code class="literal">REBUILD PARTITION</code>, and
          <code class="literal">REPAIR PARTITION</code>. Each of these options
          takes a <em class="replaceable"><code>partition_names</code></em> clause
          consisting of one or more names of partitions, separated by
          commas. The partitions must already exist in the table to be
          altered. For more information and examples, see
          <a href="partitioning.html#partitioning-maintenance" title="21.3.3. Maintenance of Partitions">Section 21.3.3, “Maintenance of Partitions”</a>.
        </p><p>
          The <code class="literal">ANALYZE PARTITION</code>, <code class="literal">CHECK
          PARTITION</code>, <code class="literal">OPTIMIZE PARTITION</code>,
          and <code class="literal">REPAIR PARTITION</code> options were removed
          in MySQL 5.1.24.
        </p></li><li><p>
          <code class="literal">REMOVE PARTITIONING</code> was introduced in MySQL
          5.1.8 for the purpose of removing a table's partitioning
          without otherwise affecting the table or its data.
          (Previously, this was done using the <code class="literal">ENGINE
          </code> option.) This option can be combined with other
          <code class="literal">ALTER TABLE</code> options such as those used to
          add, drop, or rename drop columns or indexes.
        </p></li><li><p>
          In MySQL 5.1.7 and earlier, using the
          <code class="literal">ENGINE</code> option with <code class="literal">ALTER
          TABLE</code> caused any partitioning that a table might
          have had to be removed. Beginning with MySQL 5.1.8, this
          option merely changes the storage engine used by the table and
          no longer affects partitioning in any way.
        </p></li></ul></div><a class="indexterm" name="id2188238"></a><p>
      With the <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> C API
      function, you can find out how many rows were copied, and (when
      <code class="literal">IGNORE</code> is used) how many rows were deleted due
      to duplication of unique key values. See
      <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()">Section 29.2.3.35, “<code class="literal">mysql_info()</code>”</a>.
    </p><p>
      Here are some examples that show uses of <code class="literal">ALTER
      TABLE</code>. Begin with a table <code class="literal">t1</code> that is
      created as shown here:
    </p><pre class="programlisting">CREATE TABLE t1 (a INTEGER,b CHAR(10));
</pre><p>
      To rename the table from <code class="literal">t1</code> to
      <code class="literal">t2</code>:
    </p><pre class="programlisting">ALTER TABLE t1 RENAME t2;
</pre><p>
      To change column <code class="literal">a</code> from
      <code class="literal">INTEGER</code> to <code class="literal">TINYINT NOT NULL</code>
      (leaving the name the same), and to change column
      <code class="literal">b</code> from <code class="literal">CHAR(10)</code> to
      <code class="literal">CHAR(20)</code> as well as renaming it from
      <code class="literal">b</code> to <code class="literal">c</code>:
    </p><pre class="programlisting">ALTER TABLE t2 MODIFY a TINYINT NOT NULL, CHANGE b c CHAR(20);
</pre><p>
      To add a new <code class="literal">TIMESTAMP</code> column named
      <code class="literal">d</code>:
    </p><pre class="programlisting">ALTER TABLE t2 ADD d TIMESTAMP;
</pre><p>
      To add an index on column <code class="literal">d</code> and a
      <code class="literal">UNIQUE</code> index on column <code class="literal">a</code>:
    </p><pre class="programlisting">ALTER TABLE t2 ADD INDEX (d), ADD UNIQUE (a);
</pre><p>
      To remove column <code class="literal">c</code>:
    </p><pre class="programlisting">ALTER TABLE t2 DROP COLUMN c;
</pre><p>
      To add a new <code class="literal">AUTO_INCREMENT</code> integer column
      named <code class="literal">c</code>:
    </p><pre class="programlisting">ALTER TABLE t2 ADD c INT UNSIGNED NOT NULL AUTO_INCREMENT,
  ADD PRIMARY KEY (c);
</pre><p>
      Note that we indexed <code class="literal">c</code> (as a <code class="literal">PRIMARY
      KEY</code>) because <code class="literal">AUTO_INCREMENT</code> columns
      must be indexed, and also that we declare <code class="literal">c</code> as
      <code class="literal">NOT NULL</code> because primary key columns cannot be
      <code class="literal">NULL</code>.
    </p><p>
      When you add an <code class="literal">AUTO_INCREMENT</code> column, column
      values are filled in with sequence numbers automatically. For
      <code class="literal">MyISAM</code> tables, you can set the first sequence
      number by executing <code class="literal">SET
      INSERT_ID=<em class="replaceable"><code>value</code></em></code> before
      <code class="literal">ALTER TABLE</code> or by using the
      <code class="literal">AUTO_INCREMENT=<em class="replaceable"><code>value</code></em></code>
      table option. See <a href="server-administration.html#server-session-variables" title="5.1.4. Session System Variables">Section 5.1.4, “Session System Variables”</a>.
    </p><p>
      With <code class="literal">MyISAM</code> tables, if you do not change the
      <code class="literal">AUTO_INCREMENT</code> column, the sequence number is
      not affected. If you drop an <code class="literal">AUTO_INCREMENT</code>
      column and then add another <code class="literal">AUTO_INCREMENT</code>
      column, the numbers are resequenced beginning with 1.
    </p><p>
      When replication is used, adding an
      <code class="literal">AUTO_INCREMENT</code> column to a table might not
      produce the same ordering of the rows on the slave and the master.
      This occurs because the order in which the rows are numbered
      depends on the specific storage engine used for the table and the
      order in which the rows were inserted. If it is important to have
      the same order on the master and slave, the rows must be ordered
      before assigning an <code class="literal">AUTO_INCREMENT</code> number.
      Assuming that you want to add an <code class="literal">AUTO_INCREMENT</code>
      column to the table <code class="literal">t1</code>, the following
      statements produce a new table <code class="literal">t2</code> identical to
      <code class="literal">t1</code> but with an
      <code class="literal">AUTO_INCREMENT</code> column:
    </p><pre class="programlisting">CREATE TABLE t2 (id INT AUTO_INCREMENT PRIMARY KEY) 
SELECT * FROM t1 ORDER BY col1, col2;
</pre><p>
      This assumes that the table <code class="literal">t1</code> has columns
      <code class="literal">col1</code> and <code class="literal">col2</code>.
    </p><p>
      This set of statements will also produce a new table
      <code class="literal">t2</code> identical to <code class="literal">t1</code>, with the
      addition of an <code class="literal">AUTO_INCREMENT</code> column:
    </p><pre class="programlisting">CREATE TABLE t2 LIKE t1;
ALTER TABLE T2 ADD id INT AUTO_INCREMENT PRIMARY KEY;
INSERT INTO t2 SELECT * FROM t1 ORDER BY col1, col2;
</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        To guarantee the same ordering on both master and slave,
        <span class="emphasis"><em>all</em></span> columns of <code class="literal">t1</code> must
        be referenced in the <code class="literal">ORDER BY</code> clause.
      </p></div><p>
      Regardless of the method used to create and populate the copy
      having the <code class="literal">AUTO_INCREMENT</code> column, the final
      step is to drop the original table and then rename the copy:
    </p><pre class="programlisting">DROP t1;
ALTER TABLE t2 RENAME t1;
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="alter-tablespace"></a>12.1.5. <code class="literal">ALTER TABLESPACE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2188725"></a><pre class="programlisting">ALTER TABLESPACE <em class="replaceable"><code>tablespace_name</code></em>
    {ADD|DROP} DATAFILE '<em class="replaceable"><code>file_name</code></em>'
    [INITIAL_SIZE [=] <em class="replaceable"><code>size</code></em>]
    [WAIT]
    ENGINE [=] <em class="replaceable"><code>engine_name</code></em>
</pre><p>
      This statement can be used either to add a new data file, or to
      drop a data file from a tablespace.
    </p><p>
      The <code class="literal">ADD DATAFILE</code> variant allows you to specify
      an initial size using an <code class="literal">INITIAL_SIZE</code> clause,
      where <em class="replaceable"><code>size</code></em> is measured in bytes; the
      default value is <code class="literal">128M</code> (128 megabytes). You may
      optionally follow this integer value with a one-letter
      abbreviation for an order of magnitude, similar to those used in
      <code class="filename">my.cnf</code>. Generally, this is one of the letters
      <code class="literal">M</code> (for megabytes) or <code class="literal">G</code> (for
      gigabytes).
    </p><p>
      On 32-bit systems, the maximum supported value for
      <code class="literal">INITIAL_SIZE</code> is <code class="literal">4G</code>. (<a href="http://bugs.mysql.com/29186" target="_top">Bug#29186</a>)
    </p><p>
      Once a data file has been created, its size cannot be changed;
      however, you can add more data files to the tablespace using
      additional <code class="literal">ALTER TABLESPACE ... ADD DATAFILE</code>
      statements.
    </p><p>
      Using <code class="literal">DROP DATAFILE</code> with <code class="literal">ALTER
      TABLESPACE</code> drops the data file
      '<em class="replaceable"><code>file_name</code></em>' from the tablespace. This
      file must already have been added to the tablespace using
      <code class="literal">CREATE TABLESPACE</code> or <code class="literal">ALTER
      TABLESPACE</code>; otherwise an error will result.
    </p><p>
      Both <code class="literal">ALTER TABLESPACE ... ADD DATAFILE</code> and
      <code class="literal">ALTER TABLESPACE ... DROP DATAFILE</code> require an
      <code class="literal">ENGINE</code> clause which specifies the storage
      engine used by the tablespace. In MySQL 5.1, the only accepted
      values for <em class="replaceable"><code>engine_name</code></em> are
      <code class="literal">NDB</code> and <code class="literal">NDBCLUSTER</code>.
    </p><p>
      <code class="literal">WAIT</code> is parsed but otherwise ignored, and so
      has no effect in MySQL 5.1. It is intended for future
      expansion.
    </p><p>
      When <code class="literal">ALTER TABLESPACE ... ADD DATAFILE</code> is used
      with <code class="literal">ENGINE = NDB</code>, a data file is created on
      each Cluster data node. You can verify that the data files were
      created and obtain information about them by querying the
      <code class="literal">INFORMATION_SCHEMA.FILES</code> table. For example,
      the following query shows all data files belonging to the
      tablespace named <code class="literal">newts</code>:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LOGFILE_GROUP_NAME, FILE_NAME, EXTRA</code></strong> 
    -&gt; <strong class="userinput"><code>FROM INFORMATION_SCHEMA.FILES</code></strong>
    -&gt; <strong class="userinput"><code>WHERE TABLESPACE_NAME = 'newts' AND FILE_TYPE = 'DATAFILE';</code></strong>
+--------------------+--------------+----------------+
| LOGFILE_GROUP_NAME | FILE_NAME    | EXTRA          |
+--------------------+--------------+----------------+
| lg_3               | newdata.dat  | CLUSTER_NODE=3 |
| lg_3               | newdata.dat  | CLUSTER_NODE=4 |
| lg_3               | newdata2.dat | CLUSTER_NODE=3 |
| lg_3               | newdata2.dat | CLUSTER_NODE=4 |
+--------------------+--------------+----------------+
2 rows in set (0.03 sec)
</pre><p>
      See <a href="information-schema.html#files-table" title="27.21. The INFORMATION_SCHEMA FILES Table">Section 27.21, “The <code class="literal">INFORMATION_SCHEMA FILES</code> Table”</a>.
    </p><p>
      <code class="literal">ALTER TABLESPACE</code> was added in MySQL 5.1.6. In
      MySQL 5.1, it is useful only with Disk Data storage for MySQL
      Cluster. See <a href="mysql-cluster.html#mysql-cluster-disk-data" title="20.12. MySQL Cluster Disk Data Tables">Section 20.12, “MySQL Cluster Disk Data Tables”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="create-database"></a>12.1.6. <code class="literal">CREATE DATABASE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2189040"></a><a class="indexterm" name="id2189049"></a><a class="indexterm" name="id2189058"></a><a class="indexterm" name="id2189071"></a><a class="indexterm" name="id2189083"></a><a class="indexterm" name="id2189095"></a><pre class="programlisting">CREATE {DATABASE | SCHEMA} [IF NOT EXISTS] <em class="replaceable"><code>db_name</code></em>
    [<em class="replaceable"><code>create_specification</code></em>] ...

<em class="replaceable"><code>create_specification</code></em>:
    [DEFAULT] CHARACTER SET [=] <em class="replaceable"><code>charset_name</code></em>
  | [DEFAULT] COLLATE [=] <em class="replaceable"><code>collation_name</code></em>
</pre><p>
      <code class="literal">CREATE DATABASE</code> creates a database with the
      given name. To use this statement, you need the
      <code class="literal">CREATE</code> privilege for the database.
      <code class="literal">CREATE SCHEMA</code> is a synonym for <code class="literal">CREATE
      DATABASE</code>.
    </p><p>
      An error occurs if the database exists and you did not specify
      <code class="literal">IF NOT EXISTS</code>.
    </p><p>
      <em class="replaceable"><code>create_specification</code></em> options specify
      database characteristics. Database characteristics are stored in
      the <code class="filename">db.opt</code> file in the database directory.
      The <code class="literal">CHARACTER SET</code> clause specifies the default
      database character set. The <code class="literal">COLLATE</code> clause
      specifies the default database collation.
      <a href="internationalization-localization.html#charset" title="9.1. Character Set Support">Section 9.1, “Character Set Support”</a>, discusses character set and collation
      names.
    </p><p>
      A database in MySQL is implemented as a directory containing files
      that correspond to tables in the database. Because there are no
      tables in a database when it is initially created, the
      <code class="literal">CREATE DATABASE</code> statement creates only a
      directory under the MySQL data directory and the
      <code class="filename">db.opt</code> file. Rules for allowable database
      names are given in <a href="language-structure.html#identifiers" title="8.2. Schema Object Names">Section 8.2, “Schema Object Names”</a>. If a database
      name contains special characters, the name for the database
      directory contains encoded versions of those characters as
      described in <a href="language-structure.html#identifier-mapping" title="8.2.3. Mapping of Identifiers to Filenames">Section 8.2.3, “Mapping of Identifiers to Filenames”</a>.
    </p><p>
      If you manually create a directory under the data directory (for
      example, with <span><strong class="command">mkdir</strong></span>), the server considers it a
      database directory and it shows up in the output of <code class="literal">SHOW
      DATABASES</code>.
    </p><a class="indexterm" name="id2189274"></a><p>
      You can also use the <span><strong class="command">mysqladmin</strong></span> program to
      create databases. See <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server">Section 4.5.2, “<span><strong class="command">mysqladmin</strong></span> — Client for Administering a MySQL Server”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="create-index"></a>12.1.7. <code class="literal">CREATE INDEX</code> Syntax</h3></div></div></div><a class="indexterm" name="id2189311"></a><a class="indexterm" name="id2189320"></a><a class="indexterm" name="id2189328"></a><a class="indexterm" name="id2189341"></a><pre class="programlisting">CREATE [ONLINE|OFFLINE] [UNIQUE|FULLTEXT|SPATIAL] INDEX <em class="replaceable"><code>index_name</code></em>
    [<em class="replaceable"><code>index_type</code></em>]
    ON <em class="replaceable"><code>tbl_name</code></em> (<em class="replaceable"><code>index_col_name</code></em>,...)
    [<em class="replaceable"><code>index_option</code></em>] ...

<em class="replaceable"><code>index_col_name</code></em>:
    <em class="replaceable"><code>col_name</code></em> [(<em class="replaceable"><code>length</code></em>)] [ASC | DESC]

<em class="replaceable"><code>index_type</code></em>:
    USING {BTREE | HASH | RTREE}

<em class="replaceable"><code>index_option</code></em>:
    KEY_BLOCK_SIZE [=] <em class="replaceable"><code>value</code></em>
  | <em class="replaceable"><code>index_type</code></em>
  | WITH PARSER <em class="replaceable"><code>parser_name</code></em>
</pre><p>
      <code class="literal">CREATE INDEX</code> is mapped to an <code class="literal">ALTER
      TABLE</code> statement to create indexes. See
      <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax">Section 12.1.4, “<code class="literal">ALTER TABLE</code> Syntax”</a>. <code class="literal">CREATE INDEX</code>
      cannot be used to create a <code class="literal">PRIMARY KEY</code>; use
      <code class="literal">ALTER TABLE</code> instead. For more information about
      indexes, see <a href="optimization.html#mysql-indexes" title="7.4.5. How MySQL Uses Indexes">Section 7.4.5, “How MySQL Uses Indexes”</a>.
    </p><p>
      Normally, you create all indexes on a table at the time the table
      itself is created with <code class="literal">CREATE TABLE</code>. See
      <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>. <code class="literal">CREATE INDEX</code>
      enables you to add indexes to existing tables.
    </p><p>
      A column list of the form <code class="literal">(col1,col2,...)</code>
      creates a multiple-column index. Index values are formed by
      concatenating the values of the given columns.
    </p><p>
      Indexes can be created that use only the leading part of column
      values, using
      <code class="literal"><em class="replaceable"><code>col_name</code></em>(<em class="replaceable"><code>length</code></em>)</code>
      syntax to specify an index prefix length:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Prefixes can be specified for <code class="literal">CHAR</code>,
          <code class="literal">VARCHAR</code>, <code class="literal">BINARY</code>, and
          <code class="literal">VARBINARY</code> columns.
        </p></li><li><p>
          <code class="literal">BLOB</code> and <code class="literal">TEXT</code> columns
          also can be indexed, but a prefix length
          <span class="emphasis"><em>must</em></span> be given.
        </p></li><li><p>
          Prefix lengths are given in characters for non-binary string
          types and in bytes for binary string types. That is, index
          entries consist of the first <em class="replaceable"><code>length</code></em>
          characters of each column value for <code class="literal">CHAR</code>,
          <code class="literal">VARCHAR</code>, and <code class="literal">TEXT</code>
          columns, and the first <em class="replaceable"><code>length</code></em> bytes
          of each column value for <code class="literal">BINARY</code>,
          <code class="literal">VARBINARY</code>, and <code class="literal">BLOB</code>
          columns.
        </p></li><li><p>
          For spatial columns, prefix values cannot be given, as
          described later in this section.
        </p></li></ul></div><p>
      The statement shown here creates an index using the first 10
      characters of the <code class="literal">name</code> column:
    </p><pre class="programlisting">CREATE INDEX part_of_name ON customer (name(10));
</pre><p>
      If names in the column usually differ in the first 10 characters,
      this index should not be much slower than an index created from
      the entire <code class="literal">name</code> column. Also, using column
      prefixes for indexes can make the index file much smaller, which
      could save a lot of disk space and might also speed up
      <code class="literal">INSERT</code> operations.
    </p><p>
      Prefix lengths are storage engine-dependent (for example, a prefix
      can be up to 1000 bytes long for <code class="literal">MyISAM</code> tables,
      767 bytes for <code class="literal">InnoDB</code> tables). Note that prefix
      limits are measured in bytes, whereas the prefix length in
      <code class="literal">CREATE INDEX</code> statements is interpreted as
      number of characters for non-binary data types
      (<code class="literal">CHAR</code>, <code class="literal">VARCHAR</code>,
      <code class="literal">TEXT</code>). Take this into account when specifying a
      prefix length for a column that uses a multi-byte character set.
      For example, <code class="literal">utf8</code> columns require up to three
      index bytes per character.
    </p><p>
      Beginning with MySQL 5.1.7, indexes on variable-width columns are
      created online; that is, creating the indexes does not require any
      copying or locking of the table. This is done automatically by the
      server whenever it determines that it is possible to do so; you do
      not have to use any special SQL syntax or server options to cause
      it to happen.
    </p><p>
      In standard MySQL 5.1 releases, it is not possible to
      override the server when it determines that an index is to be
      created online. In MySQL Cluster, beginning with MySQL Cluster NDB
      6.2.5 and MySQL Cluster NDB 6.3.3, you can create indexes offline
      (which causes the table to be locked) using the
      <code class="literal">OFFLINE</code> keyword. The rules and limitations
      governing online <code class="literal">CREATE OFFLINE INDEX</code> and
      <code class="literal">CREATE ONLINE INDEX</code> are the same as for
      <code class="literal">ALTER OFFLINE TABLE ... ADD INDEX</code> and
      <code class="literal">ALTER ONLINE TABLE ... ADD INDEX</code>. You cannot
      cause the online creation of an index that would normally be
      created offline by using the <code class="literal">ONLINE</code> keyword (if
      it is not possible to perform the <code class="literal">CREATE INDEX</code>
      operation online, then the <code class="literal">ONLINE</code> keyword is
      ignored). For more information, see <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax">Section 12.1.4, “<code class="literal">ALTER TABLE</code> Syntax”</a>.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The <code class="literal">ONLINE</code> and <code class="literal">OFFLINE</code>
        keywords are available only in MySQL Cluster NDB 6.2 and MySQL
        Cluster NDB 6.3 releases beginning with versions 6.2.5 and
        6.3.3, respectively; attempting to use them in earlier MySQL
        Cluster NDB 6.2 or 6.3 releases, standard MySQL 5.1 releases, or
        MySQL Cluster NDB 6.1 releases results in a syntax error.
      </p></div><p>
      A <code class="literal">UNIQUE</code> index creates a constraint such that
      all values in the index must be distinct. An error occurs if you
      try to add a new row with a key value that matches an existing
      row. For all engines, a <code class="literal">UNIQUE</code> index allows
      multiple <code class="literal">NULL</code> values for columns that can
      contain <code class="literal">NULL</code>. If you specify a prefix value for
      a column in a <code class="literal">UNIQUE</code> index, the column values
      must be unique within the prefix.
    </p><p class="mnmas"><b>MySQL Enterprise</b>
        Lack of proper indexes can greatly reduce performance. Subscribe
        to the MySQL Enterprise Monitor for notification of inefficient
        use of indexes. For more information, see
        <a href="advisors.html" target="_top">advisors.html</a>.
      </p><p>
      <code class="literal">FULLTEXT</code> indexes are supported only for
      <code class="literal">MyISAM</code> tables and can include only
      <code class="literal">CHAR</code>, <code class="literal">VARCHAR</code>, and
      <code class="literal">TEXT</code> columns. Indexing always happens over the
      entire column; column prefix indexing is not supported and any
      prefix length is ignored if specified. See
      <a href="functions.html#fulltext-search" title="11.8. Full-Text Search Functions">Section 11.8, “Full-Text Search Functions”</a>, for details of operation.
    </p><p>
      The <code class="literal">MyISAM</code>, <code class="literal">InnoDB</code>,
      <code class="literal">NDB</code>, <code class="literal">BDB</code>, and
      <code class="literal">ARCHIVE</code> storage engines support spatial columns
      such as (<code class="literal">POINT</code> and <code class="literal">GEOMETRY</code>.
      (<a href="spatial-extensions.html" title="Chapter 22. Spatial Extensions">Chapter 22, <i>Spatial Extensions</i></a>, describes the spatial data
      types.) However, support for spatial column indexing varies among
      engines. Spatial and non-spatial indexes are available according
      to the following rules.
    </p><p>
      Spatial indexes (created using <code class="literal">SPATIAL INDEX</code>):
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Available only for <code class="literal">MyISAM</code> tables.
          Specifying a <code class="literal">SPATIAL INDEX</code> for other
          storage engines results in an error.
        </p></li><li><p>
          Indexed columns must be <code class="literal">NOT NULL</code>.
        </p></li><li><p>
          In MySQL 5.1, column prefix lengths are
          prohibited. The full width of each column is indexed.
        </p></li></ul></div><p>
      Non-spatial indexes (created with <code class="literal">INDEX</code>,
      <code class="literal">UNIQUE</code>, or <code class="literal">PRIMARY KEY</code>):
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Allowed for any storage engine that supports spatial columns
          except <code class="literal">ARCHIVE</code>.
        </p></li><li><p>
          Columns can be <code class="literal">NULL</code> unless the index is a
          primary key.
        </p></li><li><p>
          For each spatial column in a non-<code class="literal">SPATIAL</code>
          index except <code class="literal">POINT</code> columns, a column prefix
          length must be specified. (This is the same requirement as for
          indexed <code class="literal">BLOB</code> columns.) The prefix length is
          given in bytes.
        </p></li><li><p>
          The index type for a non-<code class="literal">SPATIAL</code> index
          depends on the storage engine. Currently, B-tree is used.
        </p></li></ul></div><p>
      In MySQL 5.1:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          You can add an index on a column that can have
          <code class="literal">NULL</code> values only if you are using the
          <code class="literal">MyISAM</code>, <code class="literal">InnoDB</code>, or
          <code class="literal">MEMORY</code> storage engine.
        </p></li><li><p>
          You can add an index on a <code class="literal">BLOB</code> or
          <code class="literal">TEXT</code> column only if you are using the
          <code class="literal">MyISAM</code>, or <code class="literal">InnoDB</code>
          storage engine.
        </p></li></ul></div><p>
      An <em class="replaceable"><code>index_col_name</code></em> specification can end
      with <code class="literal">ASC</code> or <code class="literal">DESC</code>. These
      keywords are allowed for future extensions for specifying
      ascending or descending index value storage. Currently, they are
      parsed but ignored; index values are always stored in ascending
      order.
    </p><p>
      As of MySQL 5.1.10, index options can be given following the index
      column list. An <em class="replaceable"><code>index_option</code></em> value can
      be any of the following:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">KEY_BLOCK_SIZE [=]
          <em class="replaceable"><code>value</code></em></code>
        </p><p>
          This option provides a hint to the storage engine about the
          size in bytes to use for index key blocks. The engine is
          allowed to change the value if necessary. A value of 0
          indicates that the default value should be used.
        </p></li><li><p>
          <em class="replaceable"><code>index_type</code></em>
        </p><p>
          Some storage engines allow you to specify an index type when
          creating an index. The allowable index type values supported
          by different storage engines are shown in the following table.
          Where multiple index types are listed, the first one is the
          default when no index type specifier is given.
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Storage Engine</strong></span></td><td><span class="bold"><strong>Allowable Index Types</strong></span></td></tr><tr><td><code class="literal">MyISAM</code></td><td><code class="literal">BTREE</code>, <code class="literal">RTREE</code></td></tr><tr><td><code class="literal">InnoDB</code></td><td><code class="literal">BTREE</code></td></tr><tr><td><code class="literal">MEMORY</code>/<code class="literal">HEAP</code></td><td><code class="literal">HASH</code>, <code class="literal">BTREE</code></td></tr><tr><td><code class="literal">NDB</code></td><td><code class="literal">HASH</code>, <code class="literal">BTREE</code> (see note in text)</td></tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            <code class="literal">BTREE</code> indexes are implemented by the
            <code class="literal">NDBCLUSTER</code> storage engine as T-tree
            indexes.
          </p><p>
            For indexes on <code class="literal">NDBCLUSTER</code> table columns,
            the <code class="literal">USING</code> clause can be specified only
            for a unique index or primary key. In such cases, the
            <code class="literal">USING HASH</code> clause prevents the creation
            of an implicit ordered index. Without <code class="literal">USING
            HASH</code>, a statement defining a unique index or
            primary key automatically results in the creation of a
            <code class="literal">HASH</code> index in addition to the ordered
            index, both of which index the same set of columns.
          </p></div><p>
          The <code class="literal">RTREE</code> index type is allowable only for
          <code class="literal">SPATIAL</code> indexes.
        </p><p>
          If you specify an index type that is not legal for a given
          storage engine, but there is another index type available that
          the engine can use without affecting query results, the engine
          uses the available type.
        </p><p>
          Examples:
        </p><pre class="programlisting">CREATE TABLE lookup (id INT) ENGINE = MEMORY;
CREATE INDEX id_index USING BTREE ON lookup (id);
</pre><p>
          <code class="literal">TYPE <em class="replaceable"><code>type_name</code></em></code>
          is recognized as a synonym for <code class="literal">USING
          <em class="replaceable"><code>type_name</code></em></code>. However,
          <code class="literal">USING</code> is the preferred form.
        </p><p>
          Before MySQL 5.1.10, this option can be given only before the
          <code class="literal">ON <em class="replaceable"><code>tbl_name</code></em></code>
          clause. Use of the option in this position is deprecated as of
          5.1.10; support for it is to be dropped in a future MySQL
          release. If an <code class="literal">index_type</code> option is given
          in both the earlier and later positions, the final option
          applies.
        </p></li><li><p>
          <code class="literal">WITH PARSER
          <em class="replaceable"><code>parser_name</code></em></code>
        </p><p>
          This option can be used only with <code class="literal">FULLTEXT</code>
          indexes. It associates a parser plugin with the index if
          full-text indexing and searching operations need special
          handling. See <a href="extending-mysql.html#plugin-api" title="31.2. The MySQL Plugin Interface">Section 31.2, “The MySQL Plugin Interface”</a>, for details on
          creating plugins.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="create-logfile-group"></a>12.1.8. <code class="literal">CREATE LOGFILE GROUP</code> Syntax</h3></div></div></div><a class="indexterm" name="id2190540"></a><pre class="programlisting">CREATE LOGFILE GROUP <em class="replaceable"><code>logfile_group</code></em>
    ADD UNDOFILE '<em class="replaceable"><code>undo_file</code></em>'
    [INITIAL_SIZE [=] <em class="replaceable"><code>initial_size</code></em>]
    [UNDO_BUFFER_SIZE [=] <em class="replaceable"><code>undo_buffer_size</code></em>]
    [REDO_BUFFER_SIZE [=] <em class="replaceable"><code>redo_buffer_size</code></em>]
    [NODEGROUP [=] <em class="replaceable"><code>nodegroup_id</code></em>]
    [WAIT]
    [COMMENT [=] <em class="replaceable"><code>comment_text</code></em>]
    ENGINE [=] <em class="replaceable"><code>engine_name</code></em>
</pre><p>
      This statement creates a new log file group named
      <em class="replaceable"><code>logfile_group</code></em> having a single
      <code class="literal">UNDO</code> file named
      '<em class="replaceable"><code>undo_file</code></em>'. A <code class="literal">CREATE LOGFILE
      GROUP</code> statement has one and only one <code class="literal">ADD
      UNDOFILE</code> clause. For rules covering the naming of log
      file groups, see <a href="language-structure.html#identifiers" title="8.2. Schema Object Names">Section 8.2, “Schema Object Names”</a>.
    </p><p>
      Beginning with MySQL 5.1.8, you can have only one log file group
      per Cluster at any given time. (See <a href="http://bugs.mysql.com/16386" target="_top">Bug#16386</a>)
    </p><p>
      The optional <code class="literal">INITIAL_SIZE</code> parameter sets the
      <code class="literal">UNDO</code> file's initial size; if not specified, it
      defaults to <code class="literal">128M</code> (128 megabytes). The optional
      <code class="literal">UNDO_BUFFFER_SIZE</code> parameter sets the size used
      by the <code class="literal">UNDO</code> buffer for the log file group; The
      default value for <code class="literal">UNDO_BUFFER_SIZE</code> is
      <code class="literal">8M</code> (eight megabytes); this value cannot exceed
      the amount of system memory available. Both of these parameters
      are specified in bytes. You may optionally follow either or both
      of these with a one-letter abbreviation for an order of magnitude,
      similar to those used in <code class="filename">my.cnf</code>. Generally,
      this is one of the letters <code class="literal">M</code> (for megabytes)
      or <code class="literal">G</code> (for gigabytes).
    </p><p>
      On 32-bit systems, the maximum supported value for
      <code class="literal">INITIAL_SIZE</code> is <code class="literal">4G</code>. (<a href="http://bugs.mysql.com/29186" target="_top">Bug#29186</a>)
    </p><p>
      The <code class="literal">ENGINE</code> parameter determines the storage
      engine to be used by this log file group, with
      <em class="replaceable"><code>engine_name</code></em> being the name of the
      storage engine. In MySQL 5.1.
      <em class="replaceable"><code>engine_name</code></em> must be one of the values
      <code class="literal">NDB</code> or <code class="literal">NDBCLUSTER</code>.
    </p><p>
      <em class="replaceable"><code>REDO_BUFFER_SIZE</code></em>,
      <code class="literal">NODEGROUP</code>, <code class="literal">WAIT</code>, and
      <code class="literal">COMMENT</code> are parsed but ignored, and so have no
      effect in MySQL 5.1. These options are intended for
      future expansion.
    </p><p>
      When used with <code class="literal">ENGINE [=] NDB</code>, a log file group
      and associated <code class="literal">UNDO</code> log file are created on
      each Cluster data node. You can verify that the
      <code class="literal">UNDO</code> files were created and obtain information
      about them by querying the
      <code class="literal">INFORMATION_SCHEMA.FILES</code> table. For example:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LOGFILE_GROUP_NAME, LOGFILE_GROUP_NUMBER, EXTRA</code></strong>
    -&gt; <strong class="userinput"><code>FROM INFORMATION_SCHEMA.FILES</code></strong>
    -&gt; <strong class="userinput"><code>WHERE FILE_NAME = 'undo_10.dat';</code></strong>
+--------------------+----------------------+----------------+
| LOGFILE_GROUP_NAME | LOGFILE_GROUP_NUMBER | EXTRA          |
+--------------------+----------------------+----------------+
| lg_3               |                   11 | CLUSTER_NODE=3 |
| lg_3               |                   11 | CLUSTER_NODE=4 |
+--------------------+----------------------+----------------+
2 rows in set (0.06 sec)
</pre><p>
      (See <a href="information-schema.html#files-table" title="27.21. The INFORMATION_SCHEMA FILES Table">Section 27.21, “The <code class="literal">INFORMATION_SCHEMA FILES</code> Table”</a>.)
    </p><p>
      <code class="literal">CREATE LOGFILE GROUP</code> was added in MySQL 5.1.6.
      In MySQL 5.1, it is useful only with Disk Data storage for MySQL
      Cluster. See <a href="mysql-cluster.html#mysql-cluster-disk-data" title="20.12. MySQL Cluster Disk Data Tables">Section 20.12, “MySQL Cluster Disk Data Tables”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="create-server"></a>12.1.9. <code class="literal">CREATE SERVER</code> Syntax</h3></div></div></div><a class="indexterm" name="id2190871"></a><pre class="programlisting">CREATE SERVER <em class="replaceable"><code>server_name</code></em>
    FOREIGN DATA WRAPPER <em class="replaceable"><code>wrapper_name</code></em>
    OPTIONS (<em class="replaceable"><code>option</code></em> [, <em class="replaceable"><code>option</code></em>] ...)

<em class="replaceable"><code>option</code></em>:
  { HOST <em class="replaceable"><code>character-literal</code></em>
  | DATABASE <em class="replaceable"><code>character-literal</code></em>
  | USER <em class="replaceable"><code>character-literal</code></em>
  | PASSWORD <em class="replaceable"><code>character-literal</code></em>
  | SOCKET <em class="replaceable"><code>character-literal</code></em>
  | OWNER <em class="replaceable"><code>character-literal</code></em>
  | PORT <em class="replaceable"><code>numeric-literal</code></em> }
</pre><p>
      This statement creates the definition of a server for use with the
      <code class="literal">FEDERATED</code> storage engine. The <code class="literal">CREATE
      SERVER</code> statement creates a new row within the
      <code class="literal">servers</code> table within the
      <code class="literal">mysql</code> database. This statement requires the
      <code class="literal">SUPER</code> privilege.
    </p><p>
      The <code class="literal"><em class="replaceable"><code>server_name</code></em></code>
      should be a unique reference to the server. Server definitions are
      global within the scope of the server, it is not possible to
      qualify the server definition to a specific database.
      <code class="literal"><em class="replaceable"><code>server_name</code></em></code> has a
      maximum length of 64 characters (names longer than 64 characters
      are silently truncated), and is case insensitive. You may specify
      the name as a quoted string.
    </p><p>
      The <code class="literal"><em class="replaceable"><code>wrapper_name</code></em></code>
      should be <code class="literal">mysql</code>, and may be quoted with single
      quotes. Other values for
      <code class="literal"><em class="replaceable"><code>wrapper_name</code></em></code> are not
      currently supported.
    </p><p>
      For each <code class="literal"><em class="replaceable"><code>option</code></em></code> you
      must specify either a character literal or numeric literal.
      Character literals are UTF-8, support a maximum length of 64
      characters and default to a blank (empty) string. String literals
      are silently truncated to 64 characters. Numeric literals must be
      a number between 0 and 9999, default value is 0.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Note that the <code class="literal">OWNER</code> option is currently not
        applied, and has no effect on the ownership or operation of the
        server connection that is created.
      </p></div><p>
      The <code class="literal">CREATE SERVER</code> statement creates an entry in
      the <code class="literal">mysql.server</code> table that can later be used
      with the <code class="literal">CREATE TABLE</code> statement when creating a
      <code class="literal">FEDERATED</code> table. The options that you specify
      will be used to populate the columns in the
      <code class="literal">mysql.server</code> table. The table columns are
      <code class="literal">Server_name</code>, <code class="literal">Host</code>,
      <code class="literal">Db</code>, <code class="literal">Username</code>,
      <code class="literal">Password</code>, <code class="literal">Port</code> and
      <code class="literal">Socket</code>.
    </p><p>
      For example:
    </p><pre class="programlisting">CREATE SERVER s
FOREIGN DATA WRAPPER mysql
OPTIONS (USER 'Remote', HOST '192.168.1.106', DATABASE 'test');
</pre><p>
      The data stored in the table can be used when creating a
      connection to a <code class="literal">FEDERATED</code> table:
    </p><pre class="programlisting">CREATE TABLE t (s1 INT) ENGINE=FEDERATED CONNECTION='s';</pre><p>
      For more information, see
      <a href="storage-engines.html#federated-storage-engine" title="13.9. The FEDERATED Storage Engine">Section 13.9, “The <code class="literal">FEDERATED</code> Storage Engine”</a>.
    </p><p>
      <code class="literal">CREATE SERVER</code> does not cause an automatic
      commit.
    </p><p>
      <code class="literal">CREATE SERVER</code> was added in MySQL 5.1.15.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="create-table"></a>12.1.10. <code class="literal">CREATE TABLE</code> Syntax</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#silent-column-changes">12.1.10.1. Silent Column Specification Changes</a></span></dt></dl></div><a class="indexterm" name="id2191211"></a><pre class="programlisting">CREATE [TEMPORARY] TABLE [IF NOT EXISTS] <em class="replaceable"><code>tbl_name</code></em>
    (<em class="replaceable"><code>create_definition</code></em>,...)
    [<em class="replaceable"><code>table_option</code></em>] ...
    [<em class="replaceable"><code>partition_options</code></em>]
</pre><p>
      Or:
    </p><pre class="programlisting">CREATE [TEMPORARY] TABLE [IF NOT EXISTS] <em class="replaceable"><code>tbl_name</code></em>
    [(<em class="replaceable"><code>create_definition</code></em>,...)]
    [<em class="replaceable"><code>table_option</code></em>] ...
    [<em class="replaceable"><code>partition_options</code></em>]
    <em class="replaceable"><code>select_statement</code></em>
</pre><p>
      Or:
    </p><pre class="programlisting">CREATE [TEMPORARY] TABLE [IF NOT EXISTS] <em class="replaceable"><code>tbl_name</code></em>
    { LIKE <em class="replaceable"><code>old_tbl_name</code></em> | (LIKE <em class="replaceable"><code>old_tbl_name</code></em>) }
</pre><pre class="programlisting"><em class="replaceable"><code>create_definition</code></em>:
    <em class="replaceable"><code>col_name</code></em> <em class="replaceable"><code>column_definition</code></em>
  | [CONSTRAINT [<em class="replaceable"><code>symbol</code></em>]] PRIMARY KEY [<em class="replaceable"><code>index_type</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...)
      [<em class="replaceable"><code>index_option</code></em>] ...
  | {INDEX|KEY} [<em class="replaceable"><code>index_name</code></em>] [<em class="replaceable"><code>index_type</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...)
      [<em class="replaceable"><code>index_option</code></em>] ...
  | [CONSTRAINT [<em class="replaceable"><code>symbol</code></em>]] UNIQUE [INDEX|KEY]
      [<em class="replaceable"><code>index_name</code></em>] [<em class="replaceable"><code>index_type</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...)
      [<em class="replaceable"><code>index_option</code></em>] ...
  | {FULLTEXT|SPATIAL} [INDEX|KEY] [<em class="replaceable"><code>index_name</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...)
      [<em class="replaceable"><code>index_option</code></em>] ...
  | [CONSTRAINT [<em class="replaceable"><code>symbol</code></em>]] FOREIGN KEY
      [<em class="replaceable"><code>index_name</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...) <em class="replaceable"><code>reference_definition</code></em>
  | CHECK (<em class="replaceable"><code>expr</code></em>)

<em class="replaceable"><code>column_definition</code></em>:
    <em class="replaceable"><code>data_type</code></em> [NOT NULL | NULL] [DEFAULT <em class="replaceable"><code>default_value</code></em>]
      [AUTO_INCREMENT] [UNIQUE [KEY] | [PRIMARY] KEY]
      [COMMENT '<em class="replaceable"><code>string</code></em>'] [<em class="replaceable"><code>reference_definition</code></em>]
      [COLUMN_FORMAT {FIXED|DYNAMIC|DEFAULT}]
      [STORAGE {DISK|MEMORY}]

<em class="replaceable"><code>data_type</code></em>:
    BIT[(<em class="replaceable"><code>length</code></em>)]
  | TINYINT[(<em class="replaceable"><code>length</code></em>)] [UNSIGNED] [ZEROFILL]
  | SMALLINT[(<em class="replaceable"><code>length</code></em>)] [UNSIGNED] [ZEROFILL]
  | MEDIUMINT[(<em class="replaceable"><code>length</code></em>)] [UNSIGNED] [ZEROFILL]
  | INT[(<em class="replaceable"><code>length</code></em>)] [UNSIGNED] [ZEROFILL]
  | INTEGER[(<em class="replaceable"><code>length</code></em>)] [UNSIGNED] [ZEROFILL]
  | BIGINT[(<em class="replaceable"><code>length</code></em>)] [UNSIGNED] [ZEROFILL]
  | REAL[(<em class="replaceable"><code>length</code></em>,<em class="replaceable"><code>decimals</code></em>)] [UNSIGNED] [ZEROFILL]
  | DOUBLE[(<em class="replaceable"><code>length</code></em>,<em class="replaceable"><code>decimals</code></em>)] [UNSIGNED] [ZEROFILL]
  | FLOAT[(<em class="replaceable"><code>length</code></em>,<em class="replaceable"><code>decimals</code></em>)] [UNSIGNED] [ZEROFILL]
  | DECIMAL[(<em class="replaceable"><code>length</code></em>[,<em class="replaceable"><code>decimals</code></em>])] [UNSIGNED] [ZEROFILL]
  | NUMERIC[(<em class="replaceable"><code>length</code></em>[,<em class="replaceable"><code>decimals</code></em>])] [UNSIGNED] [ZEROFILL]
  | DATE
  | TIME
  | TIMESTAMP
  | DATETIME
  | YEAR
  | CHAR[(<em class="replaceable"><code>length</code></em>)]
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | VARCHAR(<em class="replaceable"><code>length</code></em>)
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | BINARY[(<em class="replaceable"><code>length</code></em>)]
  | VARBINARY(<em class="replaceable"><code>length</code></em>)
  | TINYBLOB
  | BLOB
  | MEDIUMBLOB
  | LONGBLOB
  | TINYTEXT [BINARY]
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | TEXT [BINARY]
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | MEDIUMTEXT [BINARY]
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | LONGTEXT [BINARY]
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | ENUM(<em class="replaceable"><code>value1</code></em>,<em class="replaceable"><code>value2</code></em>,<em class="replaceable"><code>value3</code></em>,...)
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | SET(<em class="replaceable"><code>value1</code></em>,<em class="replaceable"><code>value2</code></em>,<em class="replaceable"><code>value3</code></em>,...)
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | <em class="replaceable"><code>spatial_type</code></em>

<em class="replaceable"><code>index_col_name</code></em>:
    <em class="replaceable"><code>col_name</code></em> [(<em class="replaceable"><code>length</code></em>)] [ASC | DESC]

<em class="replaceable"><code>index_type</code></em>:
    USING {BTREE | HASH | RTREE}

<em class="replaceable"><code>index_option</code></em>:
    KEY_BLOCK_SIZE [=] <em class="replaceable"><code>value</code></em>
  | <em class="replaceable"><code>index_type</code></em>
  | WITH PARSER <em class="replaceable"><code>parser_name</code></em>

<em class="replaceable"><code>reference_definition</code></em>:
    REFERENCES <em class="replaceable"><code>tbl_name</code></em> (<em class="replaceable"><code>index_col_name</code></em>,...)
      [MATCH FULL | MATCH PARTIAL | MATCH SIMPLE]
      [ON DELETE <em class="replaceable"><code>reference_option</code></em>]
      [ON UPDATE <em class="replaceable"><code>reference_option</code></em>]

<em class="replaceable"><code>reference_option</code></em>:
    RESTRICT | CASCADE | SET NULL | NO ACTION

<em class="replaceable"><code>table_option</code></em>:
    TABLESPACE <em class="replaceable"><code>tablespace_name</code></em> STORAGE DISK
    ENGINE [=] <em class="replaceable"><code>engine_name</code></em>
  | AUTO_INCREMENT [=] <em class="replaceable"><code>value</code></em>
  | AVG_ROW_LENGTH [=] <em class="replaceable"><code>value</code></em>
  | [DEFAULT] CHARACTER SET [=] <em class="replaceable"><code>charset_name</code></em>
  | CHECKSUM [=] {0 | 1}
  | [DEFAULT] COLLATE [=] <em class="replaceable"><code>collation_name</code></em>
  | COMMENT [=] '<em class="replaceable"><code>string</code></em>'
  | CONNECTION [=] '<em class="replaceable"><code>connect_string</code></em>'
  | DATA DIRECTORY [=] '<em class="replaceable"><code>absolute path to directory</code></em>'
  | DELAY_KEY_WRITE [=] {0 | 1}
  | INDEX DIRECTORY [=] '<em class="replaceable"><code>absolute path to directory</code></em>'
  | INSERT_METHOD [=] { NO | FIRST | LAST }
  | KEY_BLOCK_SIZE [=] <em class="replaceable"><code>value</code></em>
  | MAX_ROWS [=] <em class="replaceable"><code>value</code></em>
  | MIN_ROWS [=] <em class="replaceable"><code>value</code></em>
  | PACK_KEYS [=] {0 | 1 | DEFAULT}
  | PASSWORD [=] '<em class="replaceable"><code>string</code></em>'
  | ROW_FORMAT [=] {DEFAULT|DYNAMIC|FIXED|COMPRESSED|REDUNDANT|COMPACT}
  | UNION [=] (<em class="replaceable"><code>tbl_name</code></em>[,<em class="replaceable"><code>tbl_name</code></em>]...)

<em class="replaceable"><code>partition_options</code></em>:
    PARTITION BY
        { [LINEAR] HASH(<em class="replaceable"><code>expr</code></em>)
        | [LINEAR] KEY(<em class="replaceable"><code>column_list</code></em>)
        | RANGE(<em class="replaceable"><code>expr</code></em>)
        | LIST(<em class="replaceable"><code>expr</code></em>) }
    [PARTITIONS <em class="replaceable"><code>num</code></em>]
    [SUBPARTITION BY
        { [LINEAR] HASH(<em class="replaceable"><code>expr</code></em>)
        | [LINEAR] KEY(<em class="replaceable"><code>column_list</code></em>) }
      [SUBPARTITIONS <em class="replaceable"><code>num</code></em>]
    ]
    [(<em class="replaceable"><code>partition_definition</code></em> [, <em class="replaceable"><code>partition_definition</code></em>] ...)]

<em class="replaceable"><code>partition_definition</code></em>:
    PARTITION <em class="replaceable"><code>partition_name</code></em>
        [VALUES {LESS THAN {(<em class="replaceable"><code>expr</code></em>) | <code class="literal">MAXVALUE</code>} | IN (<em class="replaceable"><code>value_list</code></em>)}]
        [[STORAGE] ENGINE [=] <em class="replaceable"><code>engine_name</code></em>]
        [COMMENT [=] <em class="replaceable"><code>'comment_text'</code></em> ]
        [DATA DIRECTORY [=] '<code class="filename"><em class="replaceable"><code>data_dir</code></em></code>']
        [INDEX DIRECTORY [=] '<code class="filename"><em class="replaceable"><code>index_dir</code></em></code>']
        [MAX_ROWS [=] <em class="replaceable"><code>max_number_of_rows</code></em>]
        [MIN_ROWS [=] <em class="replaceable"><code>min_number_of_rows</code></em>]
        [TABLESPACE [=] <em class="replaceable"><code>tablespace_name</code></em>]
        [NODEGROUP [=] <em class="replaceable"><code>node_group_id</code></em>]
        [(<em class="replaceable"><code>subpartition_definition</code></em> [, <em class="replaceable"><code>subpartition_definition</code></em>] ...)]

<em class="replaceable"><code>subpartition_definition</code></em>:
    SUBPARTITION <em class="replaceable"><code>logical_name</code></em>
        [[STORAGE] ENGINE [=] <em class="replaceable"><code>engine_name</code></em>]
        [COMMENT [=] <em class="replaceable"><code>'comment_text'</code></em> ]
        [DATA DIRECTORY [=] '<code class="filename"><em class="replaceable"><code>data_dir</code></em></code>']
        [INDEX DIRECTORY [=] '<code class="filename"><em class="replaceable"><code>index_dir</code></em></code>']
        [MAX_ROWS [=] <em class="replaceable"><code>max_number_of_rows</code></em>]
        [MIN_ROWS [=] <em class="replaceable"><code>min_number_of_rows</code></em>]
        [TABLESPACE [=] <em class="replaceable"><code>tablespace_name</code></em>]
        [NODEGROUP [=] <em class="replaceable"><code>node_group_id</code></em>]

<em class="replaceable"><code>select_statement:</code></em>
    [IGNORE | REPLACE] [AS] SELECT ...   (<em class="replaceable"><code>Some legal select statement</code></em>)
</pre><p>
      <code class="literal">CREATE TABLE</code> creates a table with the given
      name. You must have the <code class="literal">CREATE</code> privilege for
      the table.
    </p><p>
      Rules for allowable table names are given in
      <a href="language-structure.html#identifiers" title="8.2. Schema Object Names">Section 8.2, “Schema Object Names”</a>. By default, the table is created in
      the default database. An error occurs if the table exists, if
      there is no default database, or if the database does not exist.
    </p><p>
      The table name can be specified as
      <em class="replaceable"><code>db_name.tbl_name</code></em> to create the table in
      a specific database. This works regardless of whether there is a
      default database, assuming that the database exists. If you use
      quoted identifiers, quote the database and table names separately.
      For example, write <code class="literal">`mydb`.`mytbl`</code>, not
      <code class="literal">`mydb.mytbl`</code>.
    </p><p>
      You can use the <code class="literal">TEMPORARY</code> keyword when creating
      a table. A <code class="literal">TEMPORARY</code> table is visible only to
      the current connection, and is dropped automatically when the
      connection is closed. This means that two different connections
      can use the same temporary table name without conflicting with
      each other or with an existing non-<code class="literal">TEMPORARY</code>
      table of the same name. (The existing table is hidden until the
      temporary table is dropped.) To create temporary tables, you must
      have the <code class="literal">CREATE TEMPORARY TABLES</code> privilege.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        <code class="literal">CREATE TABLE</code> does not automatically commit
        the current active transaction if you use the
        <code class="literal">TEMPORARY</code> keyword.
      </p></div><p>
      The keywords <code class="literal">IF NOT EXISTS</code> prevent an error
      from occurring if the table exists. However, there is no
      verification that the existing table has a structure identical to
      that indicated by the <code class="literal">CREATE TABLE</code> statement.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        If you use <code class="literal">IF NOT EXISTS</code> in a <code class="literal">CREATE
        TABLE ... SELECT</code> statement, any rows selected by the
        <code class="literal">SELECT</code> part are inserted regardless of
        whether the table already exists.
      </p></div><p>
      MySQL represents each table by an <code class="filename">.frm</code> table
      format (definition) file in the database directory. The storage
      engine for the table might create other files as well. In the case
      of <code class="literal">MyISAM</code> tables, the storage engine creates
      data and index files. Thus, for each <code class="literal">MyISAM</code>
      table <em class="replaceable"><code>tbl_name</code></em>, there are three disk
      files:
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>File</strong></span></td><td><span class="bold"><strong>Purpose</strong></span></td></tr><tr><td><code class="filename"><em class="replaceable"><code>tbl_name</code></em>.frm</code></td><td>Table format (definition) file</td></tr><tr><td><code class="filename"><em class="replaceable"><code>tbl_name</code></em>.MYD</code></td><td>Data file</td></tr><tr><td><code class="filename"><em class="replaceable"><code>tbl_name</code></em>.MYI</code></td><td>Index file</td></tr></tbody></table></div><p>
      <a href="storage-engines.html" title="Chapter 13. Storage Engines">Chapter 13, <i>Storage Engines</i></a>, describes what files each
      storage engine creates to represent tables. If a table name
      contains special characters, the names for the table files contain
      encoded versions of those characters as described in
      <a href="language-structure.html#identifier-mapping" title="8.2.3. Mapping of Identifiers to Filenames">Section 8.2.3, “Mapping of Identifiers to Filenames”</a>.
    </p><p>
      <em class="replaceable"><code>data_type</code></em> represents the data type in a
      column definition. <em class="replaceable"><code>spatial_type</code></em>
      represents a spatial data type. The data type syntax shown is
      representative only. For a full description of the syntax
      available for specifying column data types, as well as information
      about the properties of each type, see
      <a href="data-types.html" title="Chapter 10. Data Types">Chapter 10, <i>Data Types</i></a>, and
      <a href="spatial-extensions.html" title="Chapter 22. Spatial Extensions">Chapter 22, <i>Spatial Extensions</i></a>.
    </p><p>
      Some attributes do not apply to all data types.
      <code class="literal">AUTO_INCREMENT</code> applies only to integer and
      floating-point types. <code class="literal">DEFAULT</code> does not apply to
      the <code class="literal">BLOB</code> or <code class="literal">TEXT</code> types.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If neither <code class="literal">NULL</code> nor <code class="literal">NOT
          NULL</code> is specified, the column is treated as though
          <code class="literal">NULL</code> had been specified.
        </p></li><li><p>
          An integer or floating-point column can have the additional
          attribute <code class="literal">AUTO_INCREMENT</code>. When you insert a
          value of <code class="literal">NULL</code> (recommended) or
          <code class="literal">0</code> into an indexed
          <code class="literal">AUTO_INCREMENT</code> column, the column is set to
          the next sequence value. Typically this is
          <code class="literal"><em class="replaceable"><code>value</code></em>+1</code>, where
          <em class="replaceable"><code>value</code></em> is the largest value for the
          column currently in the table.
          <code class="literal">AUTO_INCREMENT</code> sequences begin with
          <code class="literal">1</code>.
        </p><p>
          To retrieve an <code class="literal">AUTO_INCREMENT</code> value after
          inserting a row, use the
          <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> SQL function
          or the <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> C
          API function. See <a href="functions.html#information-functions" title="11.11.3. Information Functions">Section 11.11.3, “Information Functions”</a>, and
          <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()">Section 29.2.3.37, “<code class="literal">mysql_insert_id()</code>”</a>.
        </p><p>
          If the <code class="literal">NO_AUTO_VALUE_ON_ZERO</code> SQL mode is
          enabled, you can store <code class="literal">0</code> in
          <code class="literal">AUTO_INCREMENT</code> columns as
          <code class="literal">0</code> without generating a new sequence value.
          See <a href="server-administration.html#server-sql-mode" title="5.1.7. SQL Modes">Section 5.1.7, “SQL Modes”</a>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            There can be only one <code class="literal">AUTO_INCREMENT</code>
            column per table, it must be indexed, and it cannot have a
            <code class="literal">DEFAULT</code> value. An
            <code class="literal">AUTO_INCREMENT</code> column works properly only
            if it contains only positive values. Inserting a negative
            number is regarded as inserting a very large positive
            number. This is done to avoid precision problems when
            numbers “<span class="quote">wrap</span>” over from positive to negative
            and also to ensure that you do not accidentally get an
            <code class="literal">AUTO_INCREMENT</code> column that contains
            <code class="literal">0</code>.
          </p></div><p>
          For <code class="literal">MyISAM</code> tables, you can specify an
          <code class="literal">AUTO_INCREMENT</code> secondary column in a
          multiple-column key. See
          <a href="tutorial.html#example-auto-increment" title="3.6.9. Using AUTO_INCREMENT">Section 3.6.9, “Using <code class="literal">AUTO_INCREMENT</code>”</a>.
        </p><a class="indexterm" name="id2192412"></a><a class="indexterm" name="id2192421"></a><p>
          To make MySQL compatible with some ODBC applications, you can
          find the <code class="literal">AUTO_INCREMENT</code> value for the last
          inserted row with the following query:
        </p><pre class="programlisting">SELECT * FROM <em class="replaceable"><code>tbl_name</code></em> WHERE <em class="replaceable"><code>auto_col</code></em> IS NULL
</pre><p>
          For information about <code class="literal">InnoDB</code> and
          <code class="literal">AUTO_INCREMENT</code>, see
          <a href="storage-engines.html#innodb-auto-increment-handling" title="13.5.6.3. How AUTO_INCREMENT Handling Works in
        InnoDB">Section 13.5.6.3, “How <code class="literal">AUTO_INCREMENT</code> Handling Works in
        <code class="literal">InnoDB</code>”</a>.
        </p></li><li><p>
          Character data types (<code class="literal">CHAR</code>,
          <code class="literal">VARCHAR</code>, <code class="literal">TEXT</code>) can
          include <code class="literal">CHARACTER SET</code> and
          <code class="literal">COLLATE</code> attributes to specify the character
          set and collation for the column. For details, see
          <a href="internationalization-localization.html#charset" title="9.1. Character Set Support">Section 9.1, “Character Set Support”</a>. <code class="literal">CHARSET</code> is a
          synonym for <code class="literal">CHARACTER SET</code>. Example:
        </p><pre class="programlisting">CREATE TABLE t (c CHAR(20) CHARACTER SET utf8 COLLATE utf8_bin);
</pre><p>
          MySQL 5.1 interprets length specifications in
          character column definitions in characters. (Versions before
          MySQL 4.1 interpreted them in bytes.) Lengths for
          <code class="literal">BINARY</code> and <code class="literal">VARBINARY</code> are
          in bytes.
        </p></li><li><p>
          <a class="indexterm" name="id2192560"></a>

          <a class="indexterm" name="id2192569"></a>

          The <code class="literal">DEFAULT</code> clause specifies a default
          value for a column. With one exception, the default value must
          be a constant; it cannot be a function or an expression. This
          means, for example, that you cannot set the default for a date
          column to be the value of a function such as
          <a href="functions.html#function_now"><code class="literal">NOW()</code></a> or
          <a href="functions.html#function_current-date"><code class="literal">CURRENT_DATE</code></a>. The exception is
          that you can specify
          <a href="functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP</code></a> as the
          default for a <code class="literal">TIMESTAMP</code> column. See
          <a href="data-types.html#timestamp" title="10.3.1.1. TIMESTAMP Properties">Section 10.3.1.1, “<code class="literal">TIMESTAMP</code> Properties”</a>.
        </p><p>
          If a column definition includes no explicit
          <code class="literal">DEFAULT</code> value, MySQL determines the default
          value as described in <a href="data-types.html#data-type-defaults" title="10.1.4. Data Type Default Values">Section 10.1.4, “Data Type Default Values”</a>.
        </p><p>
          <code class="literal">BLOB</code> and <code class="literal">TEXT</code> columns
          cannot be assigned a default value.
        </p><p>
          <code class="literal">CREATE TABLE</code> fails if a date-valued default
          is not correct according to the
          <code class="literal">NO_ZERO_IN_DATE</code> SQL mode, even if strict
          SQL mode is not enabled. For example, <code class="literal">c1 DATE DEFAULT
          '2010-00-00'</code> causes <code class="literal">CREATE TABLE</code>
          to fail with <code class="literal">Invalid default value for
          'c1'</code>.
        </p></li><li><p>
          <a class="indexterm" name="id2192691"></a>

          A comment for a column can be specified with the
          <code class="literal">COMMENT</code> option, up to 255 characters long.
          The comment is displayed by the <code class="literal">SHOW CREATE
          TABLE</code> and <code class="literal">SHOW FULL COLUMNS</code>
          statements.
        </p></li><li><p>
          <a class="indexterm" name="id2192726"></a>

          Beginning with MySQL Cluster NDB 6.2.5 and MySQL Cluster NDB
          6.3.2, it is also possible to specify a data storage format
          for individual columns of <code class="literal">NDB</code> tables using
          <code class="literal">COLUMN_FORMAT</code>. Allowable column formats are
          <code class="literal">FIXED</code>, <code class="literal">DYNAMIC</code>, and
          <code class="literal">DEFAULT</code>. <code class="literal">FIXED</code> is used
          to specify fixed-width storage, <code class="literal">DYNAMIC</code>
          allows the column to be variable-width, and
          <code class="literal">DEFAULT</code> causes the column to use
          fixed-width or variable-width storage as determined by the
          column's data type (possibly overridden by a
          <code class="literal">ROW_FORMAT</code> specifier).
        </p><p>
          For <code class="literal">NDB</code> tables, the default value for
          <code class="literal">COLUMN_FORMAT</code> is
          <code class="literal">DEFAULT</code>.
        </p><p>
          <code class="literal">COLUMN_FORMAT</code> currently has no effect on
          columns of tables using storage engines other than
          <code class="literal">NDB</code>.
        </p></li><li><p>
          <a class="indexterm" name="id2192835"></a>

          For <code class="literal">NDB</code> tables, beginning with MySQL
          Cluster NDB 6.2.5 and MySQL Cluster NDB 6.3.2, it is also
          possible to specify whether the column is stored on disk or in
          memory by using a <code class="literal">STORAGE</code> clause.
          <code class="literal">STORAGE DISK</code> causes the column to be stored
          on disk, and <code class="literal">STORAGE MEMORY</code> causes
          in-memory storage to be used.
        </p><p>
          For <code class="literal">NDB</code> tables, the default is
          <code class="literal">MEMORY</code>.
        </p><p>
          The <code class="literal">STORAGE</code> clause has no effect on tables
          using storage engines other than <code class="literal">NDB</code>.
        </p></li><li><p>
          <code class="literal">KEY</code> is normally a synonym for
          <code class="literal">INDEX</code>. The key attribute <code class="literal">PRIMARY
          KEY</code> can also be specified as just
          <code class="literal">KEY</code> when given in a column definition. This
          was implemented for compatibility with other database systems.
        </p></li><li><p>
          A <code class="literal">UNIQUE</code> index creates a constraint such
          that all values in the index must be distinct. An error occurs
          if you try to add a new row with a key value that matches an
          existing row. For all engines, a <code class="literal">UNIQUE</code>
          index allows multiple <code class="literal">NULL</code> values for
          columns that can contain <code class="literal">NULL</code>.
        </p></li><li><p>
          <a class="indexterm" name="id2192972"></a>

          A <code class="literal">PRIMARY KEY</code> is a unique index where all
          key columns must be defined as <code class="literal">NOT NULL</code>. If
          they are not explicitly declared as <code class="literal">NOT
          NULL</code>, MySQL declares them so implicitly (and
          silently). A table can have only one <code class="literal">PRIMARY
          KEY</code>. If you do not have a <code class="literal">PRIMARY
          KEY</code> and an application asks for the <code class="literal">PRIMARY
          KEY</code> in your tables, MySQL returns the first
          <code class="literal">UNIQUE</code> index that has no
          <code class="literal">NULL</code> columns as the <code class="literal">PRIMARY
          KEY</code>.
        </p><p>
          In <code class="literal">InnoDB</code> tables, having a long
          <code class="literal">PRIMARY KEY</code> wastes a lot of space. (See
          <a href="storage-engines.html#innodb-table-and-index" title="13.5.13. InnoDB Table and Index Structures">Section 13.5.13, “<code class="literal">InnoDB</code> Table and Index Structures”</a>.)
        </p></li><li><p>
          In the created table, a <code class="literal">PRIMARY KEY</code> is
          placed first, followed by all <code class="literal">UNIQUE</code>
          indexes, and then the non-unique indexes. This helps the MySQL
          optimizer to prioritize which index to use and also more
          quickly to detect duplicated <code class="literal">UNIQUE</code> keys.
        </p></li><li><p>
          A <code class="literal">PRIMARY KEY</code> can be a multiple-column
          index. However, you cannot create a multiple-column index
          using the <code class="literal">PRIMARY KEY</code> key attribute in a
          column specification. Doing so only marks that single column
          as primary. You must use a separate <code class="literal">PRIMARY
          KEY(<em class="replaceable"><code>index_col_name</code></em>, ...)</code>
          clause.
        </p></li><li><p>
          <a class="indexterm" name="id2193121"></a>

          If a <code class="literal">PRIMARY KEY</code> or
          <code class="literal">UNIQUE</code> index consists of only one column
          that has an integer type, you can also refer to the column as
          <code class="literal">_rowid</code> in <code class="literal">SELECT</code>
          statements.
        </p></li><li><p>
          In MySQL, the name of a <code class="literal">PRIMARY KEY</code> is
          <code class="literal">PRIMARY</code>. For other indexes, if you do not
          assign a name, the index is assigned the same name as the
          first indexed column, with an optional suffix
          (<code class="literal">_2</code>, <code class="literal">_3</code>,
          <code class="literal">...</code>) to make it unique. You can see index
          names for a table using <code class="literal">SHOW INDEX FROM
          <em class="replaceable"><code>tbl_name</code></em></code>. See
          <a href="sql-syntax.html#show-index" title="12.5.5.20. SHOW INDEX Syntax">Section 12.5.5.20, “<code class="literal">SHOW INDEX</code> Syntax”</a>.
        </p></li><li><p>
          Some storage engines allow you to specify an index type when
          creating an index. The syntax for the
          <em class="replaceable"><code>index_type</code></em> specifier is
          <code class="literal">USING <em class="replaceable"><code>type_name</code></em></code>.
        </p><p>
          Example:
        </p><pre class="programlisting">CREATE TABLE lookup
  (id INT, INDEX USING BTREE (id))
  ENGINE = MEMORY;
</pre><p>
          Before MySQL 5.1.10, <code class="literal">USING</code> can be given
          only before the index column list. As of 5.1.10, the preferred
          position is after the column list. Use of the option before
          the column list will no longer be recognized as of MySQL 5.3.
        </p><p>
          <em class="replaceable"><code>index_option</code></em> values specify
          additional options for an index. <code class="literal">USING</code> is
          one such option. For details about allowable
          <em class="replaceable"><code>index_option</code></em> values, see
          <a href="sql-syntax.html#create-index" title="12.1.7. CREATE INDEX Syntax">Section 12.1.7, “<code class="literal">CREATE INDEX</code> Syntax”</a>.
        </p><p>
          For more information about indexes, see
          <a href="optimization.html#mysql-indexes" title="7.4.5. How MySQL Uses Indexes">Section 7.4.5, “How MySQL Uses Indexes”</a>.
        </p></li><li><p>
          <a class="indexterm" name="id2193284"></a>

          <a class="indexterm" name="id2193296"></a>

          In MySQL 5.1, only the <code class="literal">MyISAM</code>,
          <code class="literal">InnoDB</code>, and <code class="literal">MEMORY</code>
          storage engines support indexes on columns that can have
          <code class="literal">NULL</code> values. In other cases, you must
          declare indexed columns as <code class="literal">NOT NULL</code> or an
          error results.
        </p></li><li><p>
          For <code class="literal">CHAR</code>, <code class="literal">VARCHAR</code>,
          <code class="literal">BINARY</code>, and <code class="literal">VARBINARY</code>
          columns, indexes can be created that use only the leading part
          of column values, using
          <code class="literal"><em class="replaceable"><code>col_name</code></em>(<em class="replaceable"><code>length</code></em>)</code>
          syntax to specify an index prefix length.
          <code class="literal">BLOB</code> and <code class="literal">TEXT</code> columns
          also can be indexed, but a prefix length
          <span class="emphasis"><em>must</em></span> be given. Prefix lengths are given
          in characters for non-binary string types and in bytes for
          binary string types. That is, index entries consist of the
          first <em class="replaceable"><code>length</code></em> characters of each
          column value for <code class="literal">CHAR</code>,
          <code class="literal">VARCHAR</code>, and <code class="literal">TEXT</code>
          columns, and the first <em class="replaceable"><code>length</code></em> bytes
          of each column value for <code class="literal">BINARY</code>,
          <code class="literal">VARBINARY</code>, and <code class="literal">BLOB</code>
          columns. Indexing only a prefix of column values like this can
          make the index file much smaller. See
          <a href="optimization.html#indexes" title="7.4.3. Column Indexes">Section 7.4.3, “Column Indexes”</a>.
        </p><a class="indexterm" name="id2193452"></a><a class="indexterm" name="id2193464"></a><a class="indexterm" name="id2193477"></a><a class="indexterm" name="id2193489"></a><p>
          Only the <code class="literal">MyISAM</code> and
          <code class="literal">InnoDB</code> storage engines support indexing on
          <code class="literal">BLOB</code> and <code class="literal">TEXT</code> columns.
          For example:
        </p><pre class="programlisting">CREATE TABLE test (blob_col BLOB, INDEX(blob_col(10)));
</pre><p>
          Prefixes can be up to 1000 bytes long (767 bytes for
          <code class="literal">InnoDB</code> tables). Note that prefix limits are
          measured in bytes, whereas the prefix length in
          <code class="literal">CREATE TABLE</code> statements is interpreted as
          number of characters for non-binary data types
          (<code class="literal">CHAR</code>, <code class="literal">VARCHAR</code>,
          <code class="literal">TEXT</code>). Take this into account when
          specifying a prefix length for a column that uses a multi-byte
          character set.
        </p></li><li><p>
          An <em class="replaceable"><code>index_col_name</code></em> specification can
          end with <code class="literal">ASC</code> or <code class="literal">DESC</code>.
          These keywords are allowed for future extensions for
          specifying ascending or descending index value storage.
          Currently, they are parsed but ignored; index values are
          always stored in ascending order.
        </p></li><li><p>
          When you use <code class="literal">ORDER BY</code> or <code class="literal">GROUP
          BY</code> on a <code class="literal">TEXT</code> or
          <code class="literal">BLOB</code> column in a <code class="literal">SELECT</code>,
          the server sorts values using only the initial number of bytes
          indicated by the <code class="literal">max_sort_length</code> system
          variable. See <a href="data-types.html#blob" title="10.4.3. The BLOB and TEXT Types">Section 10.4.3, “The <code class="literal">BLOB</code> and <code class="literal">TEXT</code> Types”</a>.
        </p></li><li><p>
          You can create special <code class="literal">FULLTEXT</code> indexes,
          which are used for full-text searches. Only the
          <code class="literal">MyISAM</code> storage engine supports
          <code class="literal">FULLTEXT</code> indexes. They can be created only
          from <code class="literal">CHAR</code>, <code class="literal">VARCHAR</code>, and
          <code class="literal">TEXT</code> columns. Indexing always happens over
          the entire column; column prefix indexing is not supported and
          any prefix length is ignored if specified. See
          <a href="functions.html#fulltext-search" title="11.8. Full-Text Search Functions">Section 11.8, “Full-Text Search Functions”</a>, for details of operation. A
          <code class="literal">WITH PARSER</code> clause can be specified as an
          <em class="replaceable"><code>index_option</code></em> value to associate a
          parser plugin with the index if full-text indexing and
          searching operations need special handling. This clause is
          legal only for <code class="literal">FULLTEXT</code> indexes. See
          <a href="extending-mysql.html#plugin-api" title="31.2. The MySQL Plugin Interface">Section 31.2, “The MySQL Plugin Interface”</a>, for details on creating plugins.
        </p></li><li><p>
          You can create <code class="literal">SPATIAL</code> indexes on spatial
          data types. Spatial types are supported only for
          <code class="literal">MyISAM</code> tables and indexed columns must be
          declared as <code class="literal">NOT NULL</code>. See
          <a href="spatial-extensions.html" title="Chapter 22. Spatial Extensions">Chapter 22, <i>Spatial Extensions</i></a>.
        </p></li><li><p>
          <code class="literal">InnoDB</code> tables support checking of foreign
          key constraints. See <a href="storage-engines.html#innodb" title="13.5. The InnoDB Storage Engine">Section 13.5, “The <code class="literal">InnoDB</code> Storage Engine”</a>. Note that the
          <code class="literal">FOREIGN KEY</code> syntax in
          <code class="literal">InnoDB</code> is more restrictive than the syntax
          presented for the <code class="literal">CREATE TABLE</code> statement at
          the beginning of this section: The columns of the referenced
          table must always be explicitly named.
          <code class="literal">InnoDB</code> supports both <code class="literal">ON
          DELETE</code> and <code class="literal">ON UPDATE</code> actions on
          foreign keys. For the precise syntax, see
          <a href="storage-engines.html#innodb-foreign-key-constraints" title="13.5.6.4. FOREIGN KEY Constraints">Section 13.5.6.4, “<code class="literal">FOREIGN KEY</code> Constraints”</a>.
        </p><p>
          For other storage engines, MySQL Server parses and ignores the
          <code class="literal">FOREIGN KEY</code> and
          <code class="literal">REFERENCES</code> syntax in <code class="literal">CREATE
          TABLE</code> statements. The <code class="literal">CHECK</code>
          clause is parsed but ignored by all storage engines. See
          <a href="introduction.html#ansi-diff-foreign-keys" title="1.8.5.4. Foreign Keys">Section 1.8.5.4, “Foreign Keys”</a>.
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
            For users familiar with the ANSI/ISO SQL Standard, please
            note that no storage engine, including
            <code class="literal">InnoDB</code>, recognizes or enforces the
            <code class="literal">MATCH</code> clause used in referential
            integrity constraint definitions. Use of an explicit
            <code class="literal">MATCH</code> clause will not have the specified
            effect, and also causes <code class="literal">ON DELETE</code> and
            <code class="literal">ON UPDATE</code> clauses to be ignored. For
            these reasons, specifying <code class="literal">MATCH</code> should be
            avoided.
          </p><p>
            The <code class="literal">MATCH</code> clause in the SQL standard
            controls how <code class="literal">NULL</code> values in a composite
            (multiple-column) foreign key are handled when comparing to
            a primary key. <code class="literal">InnoDB</code> essentially
            implements the semantics defined by <code class="literal">MATCH
            SIMPLE</code>, which allow a foreign key to be all or
            partially <code class="literal">NULL</code>. In that case, the (child
            table) row containing such a foreign key is allowed to be
            inserted, and does not match any row in the referenced
            (parent) table. It is possible to implement other semantics
            using triggers.
          </p><p>
            Additionally, MySQL and <code class="literal">InnoDB</code> require
            that the referenced columns be indexed for performance.
            However, the system does not enforce a requirement that the
            referenced columns be <code class="literal">UNIQUE</code> or be
            declared <code class="literal">NOT NULL</code>. The handling of
            foreign key references to non-unique keys or keys that
            contain <code class="literal">NULL</code> values is not well defined
            for operations such as <code class="literal">UPDATE</code> or
            <code class="literal">DELETE CASCADE</code>. You are advised to use
            foreign keys that reference only <code class="literal">UNIQUE</code>
            and <code class="literal">NOT NULL</code> keys.
          </p><p>
            Furthermore, <code class="literal">InnoDB</code> does not recognize or
            support “<span class="quote">inline <code class="literal">REFERENCES</code>
            specifications</span>” (as defined in the SQL standard)
            where the references are defined as part of the column
            specification. <code class="literal">InnoDB</code> accepts
            <code class="literal">REFERENCES</code> clauses only when specified as
            part of a separate <code class="literal">FOREIGN KEY</code>
            specification. For other storage engines, MySQL Server
            parses and ignores foreign key specifications.
          </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Partitioned tables do not support foreign keys. See
            <a href="partitioning.html#partitioning-limitations" title="21.5. Restrictions and Limitations on Partitioning">Section 21.5, “Restrictions and Limitations on Partitioning”</a>, for more
            information.
          </p></div></li><li><p>
          There is a hard limit of 4096 columns per table, but the
          effective maximum may be less for a given table and depends on
          the factors discussed in <a href="restrictions.html#column-count-limit" title="D.7.2. The Maximum Number of Columns Per Table">Section D.7.2, “The Maximum Number of Columns Per Table”</a>.
        </p></li></ul></div><p>
      The <code class="literal">TABLESPACE ... STORAGE DISK</code> table option is
      used only with <code class="literal">NDBCLUSTER</code> tables. It assigns
      the table to a Cluster Disk Data tablespace. The tablespace named
      <em class="replaceable"><code>tablespace_name</code></em> must already have been
      created using <code class="literal">CREATE TABLESPACE</code>. This table
      option was introduced in MySQL 5.1.6. See
      <a href="mysql-cluster.html#mysql-cluster-disk-data" title="20.12. MySQL Cluster Disk Data Tables">Section 20.12, “MySQL Cluster Disk Data Tables”</a>.
    </p><p>
      The <code class="literal">ENGINE</code> table option specifies the storage
      engine for the table.
    </p><p>
      The <code class="literal">ENGINE</code> table option takes the storage
      engine names shown in the following table.
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Storage Engine</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">ARCHIVE</code></td><td>The archiving storage engine. See
              <a href="storage-engines.html#archive-storage-engine" title="13.10. The ARCHIVE Storage Engine">Section 13.10, “The <code class="literal">ARCHIVE</code> Storage Engine”</a>.</td></tr><tr><td><code class="literal">CSV</code></td><td>Tables that store rows in comma-separated values format. See
              <a href="storage-engines.html#csv-storage-engine" title="13.11. The CSV Storage Engine">Section 13.11, “The <code class="literal">CSV</code> Storage Engine”</a>.</td></tr><tr><td><code class="literal">EXAMPLE</code></td><td>An example engine. See <a href="storage-engines.html#example-storage-engine" title="13.8. The EXAMPLE Storage Engine">Section 13.8, “The <code class="literal">EXAMPLE</code> Storage Engine”</a>.</td></tr><tr><td><code class="literal">FEDERATED</code></td><td>Storage engine that accesses remote tables. See
              <a href="storage-engines.html#federated-storage-engine" title="13.9. The FEDERATED Storage Engine">Section 13.9, “The <code class="literal">FEDERATED</code> Storage Engine”</a>.</td></tr><tr><td><code class="literal">HEAP</code></td><td>This is a synonym for <code class="literal">MEMORY</code>.</td></tr><tr><td><code class="literal">ISAM</code> (<span class="emphasis"><em>OBSOLETE</em></span>)</td><td>Not available in MySQL 5.1. If you are upgrading to MySQL
              5.1 from a previous version, you should
              convert any existing <code class="literal">ISAM</code> tables to
              <code class="literal">MyISAM</code> <span class="emphasis"><em>before</em></span>
              performing the upgrade.</td></tr><tr><td><code class="literal">InnoDB</code></td><td>Transaction-safe tables with row locking and foreign keys. See
              <a href="storage-engines.html#innodb" title="13.5. The InnoDB Storage Engine">Section 13.5, “The <code class="literal">InnoDB</code> Storage Engine”</a>.</td></tr><tr><td><code class="literal">MEMORY</code></td><td>The data for this storage engine is stored only in memory. See
              <a href="storage-engines.html#memory-storage-engine" title="13.7. The MEMORY (HEAP) Storage Engine">Section 13.7, “The <code class="literal">MEMORY</code> (<code class="literal">HEAP</code>) Storage Engine”</a>.</td></tr><tr><td><code class="literal">MERGE</code></td><td>A collection of <code class="literal">MyISAM</code> tables used as one table. Also
              known as <code class="literal">MRG_MyISAM</code>. See
              <a href="storage-engines.html#merge-storage-engine" title="13.6. The MERGE Storage Engine">Section 13.6, “The <code class="literal">MERGE</code> Storage Engine”</a>.</td></tr><tr><td><code class="literal">MyISAM</code></td><td>The binary portable storage engine that is the default storage engine
              used by MySQL. See
              <a href="storage-engines.html#myisam-storage-engine" title="13.4. The MyISAM Storage Engine">Section 13.4, “The <code class="literal">MyISAM</code> Storage Engine”</a>.</td></tr><tr><td><code class="literal">NDBCLUSTER</code></td><td>Clustered, fault-tolerant, memory-based tables. Also known as
              <code class="literal">NDB</code>. See
              <a href="mysql-cluster.html" title="Chapter 20. MySQL Cluster">Chapter 20, <i>MySQL Cluster</i></a>.</td></tr></tbody></table></div><p>
      If a storage engine is specified that is not available, MySQL uses
      the default engine instead. Normally, this is
      <code class="literal">MyISAM</code>. For example, if a table definition
      includes the <code class="literal">ENGINE=INNODB</code> option but the MySQL
      server does not support <code class="literal">INNODB</code> tables, the
      table is created as a <code class="literal">MyISAM</code> table. This makes
      it possible to have a replication setup where you have
      transactional tables on the master but tables created on the slave
      are non-transactional (to get more speed). In MySQL
      5.1, a warning occurs if the storage engine
      specification is not honored.
    </p><p>
      Engine substitution can be controlled by the setting of the
      <code class="literal">NO_ENGINE_SUBSTITUTION</code> SQL mode, as described
      in <a href="server-administration.html#server-sql-mode" title="5.1.7. SQL Modes">Section 5.1.7, “SQL Modes”</a>.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The older <code class="literal">TYPE</code> option was synonymous with
        <code class="literal">ENGINE</code>. <code class="literal">TYPE</code> has been
        deprecated since MySQL 4.0 but is still supported for backward
        compatibility in MySQL 5.1 (excepting MySQL 5.1.7). Since MySQL
        5.1.8, it produces a warning. It is removed as of MySQL 5.2.
        <span class="emphasis"><em>You should not use <code class="literal">TYPE</code> in any new
        applications, and you should immediately begin conversion of
        existing applications to use <code class="literal">ENGINE</code>
        instead</em></span>. (See <a href="news.html#news-5-1-8" title="C.1.22. Changes in  MySQL 5.1.8 (Not released)">Section C.1.22, “Changes in  MySQL 5.1.8 (Not released)”</a>.)
      </p></div><p>
      The other table options are used to optimize the behavior of the
      table. In most cases, you do not have to specify any of them.
      These options apply to all storage engines unless otherwise
      indicated. Options that do not apply to a given storage engine may
      be accepted and remembered as part of the table definition. Such
      options then apply if you later use <code class="literal">ALTER TABLE</code>
      to convert the table to use a different storage engine.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">AUTO_INCREMENT</code>
        </p><p>
          The initial <code class="literal">AUTO_INCREMENT</code> value for the
          table. In MySQL 5.1, this works for
          <code class="literal">MyISAM</code>, <code class="literal">MEMORY</code>, and
          <code class="literal">InnoDB</code> tables. It also works for
          <code class="literal">ARCHIVE</code> tables as of MySQL 5.1.6. To set
          the first auto-increment value for engines that do not support
          the <code class="literal">AUTO_INCREMENT</code> table option, insert a
          “<span class="quote">dummy</span>” row with a value one less than the
          desired value after creating the table, and then delete the
          dummy row.
        </p><p>
          For engines that support the <code class="literal">AUTO_INCREMENT</code>
          table option in <code class="literal">CREATE TABLE</code> statements,
          you can also use <code class="literal">ALTER TABLE
          <em class="replaceable"><code>tbl_name</code></em> AUTO_INCREMENT =
          <em class="replaceable"><code>N</code></em></code> to reset the
          <code class="literal">AUTO_INCREMENT</code> value. The value cannot be
          set lower than the maximum value currently in the column.
        </p></li><li><p>
          <code class="literal">AVG_ROW_LENGTH</code>
        </p><p>
          An approximation of the average row length for your table. You
          need to set this only for large tables with variable-size
          rows.
        </p><p>
          When you create a <code class="literal">MyISAM</code> table, MySQL uses
          the product of the <code class="literal">MAX_ROWS</code> and
          <code class="literal">AVG_ROW_LENGTH</code> options to decide how big
          the resulting table is. If you don't specify either option,
          the maximum size for <code class="literal">MyISAM</code> data and index
          files is 256TB by default. (If your operating system does not
          support files that large, table sizes are constrained by the
          file size limit.) If you want to keep down the pointer sizes
          to make the index smaller and faster and you don't really need
          big files, you can decrease the default pointer size by
          setting the <code class="literal">myisam_data_pointer_size</code> system
          variable. (See <a href="server-administration.html#server-system-variables" title="5.1.3. System Variables">Section 5.1.3, “System Variables”</a>.) If
          you want all your tables to be able to grow above the default
          limit and are willing to have your tables slightly slower and
          larger than necessary, you can increase the default pointer
          size by setting this variable. Setting the value to 7 allows
          table sizes up to 65,536TB.
        </p></li><li><p>
          <code class="literal">[DEFAULT] CHARACTER SET</code>
        </p><p>
          Specify a default character set for the table.
          <code class="literal">CHARSET</code> is a synonym for <code class="literal">CHARACTER
          SET</code>. If the character set name is
          <code class="literal">DEFAULT</code>, the database character set is
          used.
        </p></li><li><p>
          <code class="literal">CHECKSUM</code>
        </p><p>
          Set this to 1 if you want MySQL to maintain a live checksum
          for all rows (that is, a checksum that MySQL updates
          automatically as the table changes). This makes the table a
          little slower to update, but also makes it easier to find
          corrupted tables. The <code class="literal">CHECKSUM TABLE</code>
          statement reports the checksum. (<code class="literal">MyISAM</code>
          only.)
        </p></li><li><p>
          <code class="literal">[DEFAULT] COLLATE</code>
        </p><p>
          Specify a default collation for the table.
        </p></li><li><p>
          <code class="literal">COMMENT</code>
        </p><p>
          A comment for the table, up to 60 characters long.
        </p></li><li><p>
          <code class="literal">CONNECTION</code>
        </p><p>
          The connection string for a <code class="literal">FEDERATED</code>
          table.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Older versions of MySQL used a <code class="literal">COMMENT</code>
            option for the connection string.
          </p></div></li><li><p>
          <code class="literal">DATA DIRECTORY</code>, <code class="literal">INDEX
          DIRECTORY</code>
        </p><p>
          By using <code class="literal">DATA
          DIRECTORY='<em class="replaceable"><code>directory</code></em>'</code> or
          <code class="literal">INDEX
          DIRECTORY='<em class="replaceable"><code>directory</code></em>'</code> you
          can specify where the <code class="literal">MyISAM</code> storage engine
          should put a table's data file and index file. The directory
          must be the full pathname to the directory, not a relative
          path.
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
            Beginning with MySQL 5.1.23, table-level <code class="literal">DATA
            DIRECTORY</code> and <code class="literal">INDEX DIRECTORY</code>
            options are ignored for partitioned tables. (<a href="http://bugs.mysql.com/32091" target="_top">Bug#32091</a>)
          </p></div><p>
          These options work only when you are not using the
          <code class="option">--skip-symbolic-links</code> option. Your operating
          system must also have a working, thread-safe
          <code class="literal">realpath()</code> call. See
          <a href="optimization.html#symbolic-links-to-tables" title="7.6.1.2. Using Symbolic Links for Tables on Unix">Section 7.6.1.2, “Using Symbolic Links for Tables on Unix”</a>, for more complete
          information.
        </p><p>
          If a <code class="literal">MyISAM</code> table is created with no
          <code class="literal">DATA DIRECTORY</code> option, the
          <code class="filename">.MYD</code> file is created in the database
          directory. By default, if <code class="literal">MyISAM</code> finds an
          existing <code class="filename">.MYD</code> file in this case, it
          overwrites it. The same applies to <code class="filename">.MYI</code>
          files for tables created with no <code class="literal">INDEX
          DIRECTORY</code> option. As of MySQL 5.1.23, to suppress
          this behavior, start the server with the
          <code class="option">--keep_files_on_create</code> option, in which case
          <code class="literal">MyISAM</code> will not overwrite existing files
          and returns an error instead.
        </p><p>
          If a <code class="literal">MyISAM</code> table is created with a
          <code class="literal">DATA DIRECTORY</code> or <code class="literal">INDEX
          DIRECTORY</code> option and an existing
          <code class="filename">.MYD</code> or <code class="filename">.MYI</code> file is
          found, MyISAM always returns an error. It will not overwrite a
          file in the specified directory.
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
            Beginning with MySQL 5.1.24, you cannot use pathnames that
            contain the MySQL data directory with <code class="literal">DATA
            DIRECTORY</code> or <code class="literal">INDEX DIRECTORY</code>.
            This includes partitioned tables and individual table
            partitions. (See <a href="http://bugs.mysql.com/32167" target="_top">Bug#32167</a>.)
          </p></div></li><li><p>
          <code class="literal">DELAY_KEY_WRITE</code>
        </p><p>
          Set this to 1 if you want to delay key updates for the table
          until the table is closed. See the description of the
          <code class="literal">delay_key_write</code> system variable in
          <a href="server-administration.html#server-system-variables" title="5.1.3. System Variables">Section 5.1.3, “System Variables”</a>.
          (<code class="literal">MyISAM</code> only.)
        </p></li><li><p>
          <code class="literal">INSERT_METHOD</code>
        </p><p>
          If you want to insert data into a <code class="literal">MERGE</code>
          table, you must specify with <code class="literal">INSERT_METHOD</code>
          the table into which the row should be inserted.
          <code class="literal">INSERT_METHOD</code> is an option useful for
          <code class="literal">MERGE</code> tables only. Use a value of
          <code class="literal">FIRST</code> or <code class="literal">LAST</code> to have
          inserts go to the first or last table, or a value of
          <code class="literal">NO</code> to prevent inserts. See
          <a href="storage-engines.html#merge-storage-engine" title="13.6. The MERGE Storage Engine">Section 13.6, “The <code class="literal">MERGE</code> Storage Engine”</a>.
        </p></li><li><p>
          <code class="literal">KEY_BLOCK_SIZE</code>
        </p><p>
          This option provides a hint to the storage engine about the
          size in bytes to use for index key blocks. The engine is
          allowed to change the value if necessary. A value of 0
          indicates that the default value should be used. Individual
          index definitions can specify a
          <code class="literal">KEY_BLOCK_SIZE</code> value of their own to
          override the table value. <code class="literal">KEY_BLOCK_SIZE</code>
          was added in MySQL 5.1.10.
        </p></li><li><p>
          <code class="literal">MAX_ROWS</code>
        </p><p>
          The maximum number of rows you plan to store in the table.
          This is not a hard limit, but rather a hint to the storage
          engine that the table must be able to store at least this many
          rows.
        </p></li><li><p>
          <code class="literal">MIN_ROWS</code>
        </p><p>
          The minimum number of rows you plan to store in the table.
        </p></li><li><p>
          <code class="literal">PACK_KEYS</code>
        </p><p>
          <code class="literal">PACK_KEYS</code> takes effect only with
          <code class="literal">MyISAM</code> tables. Set this option to 1 if you
          want to have smaller indexes. This usually makes updates
          slower and reads faster. Setting the option to 0 disables all
          packing of keys. Setting it to <code class="literal">DEFAULT</code>
          tells the storage engine to pack only long
          <code class="literal">CHAR</code>, <code class="literal">VARCHAR</code>,
          <code class="literal">BINARY</code>, or <code class="literal">VARBINARY</code>
          columns.
        </p><p>
          If you do not use <code class="literal">PACK_KEYS</code>, the default is
          to pack strings, but not numbers. If you use
          <code class="literal">PACK_KEYS=1</code>, numbers are packed as well.
        </p><p>
          When packing binary number keys, MySQL uses prefix
          compression:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              Every key needs one extra byte to indicate how many bytes
              of the previous key are the same for the next key.
            </p></li><li><p>
              The pointer to the row is stored in high-byte-first order
              directly after the key, to improve compression.
            </p></li></ul></div><p>
          This means that if you have many equal keys on two consecutive
          rows, all following “<span class="quote">same</span>” keys usually only take
          two bytes (including the pointer to the row). Compare this to
          the ordinary case where the following keys takes
          <code class="literal">storage_size_for_key + pointer_size</code> (where
          the pointer size is usually 4). Conversely, you get a
          significant benefit from prefix compression only if you have
          many numbers that are the same. If all keys are totally
          different, you use one byte more per key, if the key is not a
          key that can have <code class="literal">NULL</code> values. (In this
          case, the packed key length is stored in the same byte that is
          used to mark if a key is <code class="literal">NULL</code>.)
        </p></li><li><p>
          <code class="literal">PASSWORD</code>
        </p><p>
          This option is unused. If you have a need to scramble your
          <code class="filename">.frm</code> files and make them unusable to any
          other MySQL server, please contact our sales department.
        </p></li><li><p>
          <code class="literal">RAID_TYPE</code>
        </p><p>
          <code class="literal">RAID</code> support has been removed as of MySQL
          5.0. For information on <code class="literal">RAID</code>, see
          <a href="/4.1/en/create-table.html" target="_top">/4.1/en/create-table.html</a>.
        </p></li><li><p>
          <code class="literal">ROW_FORMAT</code>
        </p><p>
          Defines how the rows should be stored. For
          <code class="literal">MyISAM</code> tables, the option value can be
          <code class="literal">FIXED</code> or <code class="literal">DYNAMIC</code> for
          static or variable-length row format.
          <span><strong class="command">myisampack</strong></span> sets the type to
          <code class="literal">COMPRESSED</code>. See
          <a href="storage-engines.html#myisam-table-formats" title="13.4.3. MyISAM Table Storage Formats">Section 13.4.3, “<code class="literal">MyISAM</code> Table Storage Formats”</a>.
        </p><p>
          For <code class="literal">InnoDB</code> tables, rows are stored in
          compact format (<code class="literal">ROW_FORMAT=COMPACT</code>) by
          default. The non-compact format used in older versions of
          MySQL can still be requested by specifying
          <code class="literal">ROW_FORMAT=REDUNDANT</code>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            During <code class="literal">CREATE TABLE</code>, if you specify a row
            format that the engine does support, the table will be
            created using the storage engines default row format. The
            information reported in this column in response to
            <code class="literal">SHOW TABLE STATUS</code> is the actual row
            format used. This may differ from the value in the
            <code class="literal">Create_options</code> column because the
            original <code class="literal">CREATE TABLE</code> definition is
            retained during creation.
          </p></div></li><li><p>
          <code class="literal">UNION</code>
        </p><p>
          <code class="literal">UNION</code> is used when you want to access a
          collection of identical <code class="literal">MyISAM</code> tables as
          one. This works only with <code class="literal">MERGE</code> tables. See
          <a href="storage-engines.html#merge-storage-engine" title="13.6. The MERGE Storage Engine">Section 13.6, “The <code class="literal">MERGE</code> Storage Engine”</a>.
        </p><p>
          You must have <code class="literal">SELECT</code>,
          <code class="literal">UPDATE</code>, and <code class="literal">DELETE</code>
          privileges for the tables you map to a
          <code class="literal">MERGE</code> table.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Formerly, all tables used had to be in the same database as
            the <code class="literal">MERGE</code> table itself. This restriction
            no longer applies.
          </p></div></li></ul></div><p>
      <em class="replaceable"><code>partition_options</code></em> can be used to
      control partitioning of the table created with <code class="literal">CREATE
      TABLE</code>.
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        Not all options shown in the syntax for
        <em class="replaceable"><code>partition_options</code></em> at the beginning of
        this section are available for all partitioning types. Please
        see the listings for the following individual types for
        information specific to each type, and see
        <a href="partitioning.html" title="Chapter 21. Partitioning">Chapter 21, <i>Partitioning</i></a>, for more complete information
        about the workings of and uses for partitioning in MySQL, as
        well as additional examples of table creation and other
        statements relating to MySQL partitioning.
      </p></div><p>
      If used, a <em class="replaceable"><code>partition_options</code></em> clause
      begins with <code class="literal">PARTITION BY</code>. This clause contains
      the function that is used to determine the partition; the function
      returns an integer value ranging from 1 to
      <em class="replaceable"><code>num</code></em>, where
      <em class="replaceable"><code>num</code></em> is the number of partitions. (The
      maximum number of user-defined partitions which a table may
      contain is 1024; the number of subpartitions — discussed
      later in this section — is included in this maximum.) The
      choices that are available for this function in MySQL
      5.1 are shown in the following list:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">HASH(<em class="replaceable"><code>expr</code></em>)</code>:
          Hashes one or more columns to create a key for placing and
          locating rows. <em class="replaceable"><code>expr</code></em> is an
          expression using one or more table columns. This can be any
          legal MySQL expression (including MySQL functions) that yields
          a single integer value. For example, these are all valid
          <code class="literal">CREATE TABLE</code> statements using
          <code class="literal">PARTITION BY HASH</code>:
        </p><pre class="programlisting">CREATE TABLE t1 (col1 INT, col2 CHAR(5))
    PARTITION BY HASH(col1);

CREATE TABLE t1 (col1 INT, col2 CHAR(5))
    PARTITION BY HASH( ORD(col2) );

CREATE TABLE t1 (col1 INT, col2 CHAR(5), col3 DATETIME)
    PARTITION BY HASH ( YEAR(col3) );
</pre><p>
          You may not use either <code class="literal">VALUES LESS THAN</code> or
          <code class="literal">VALUES IN</code> clauses with <code class="literal">PARTITION
          BY HASH</code>.
        </p><p>
          <code class="literal">PARTITION BY HASH</code> uses the remainder of
          <em class="replaceable"><code>expr</code></em> divided by the number of
          partitions (that is, the modulus). For examples and additional
          information, see <a href="partitioning.html#partitioning-hash" title="21.2.3. HASH Partitioning">Section 21.2.3, “<code class="literal">HASH</code> Partitioning”</a>.
        </p><p>
          The <code class="literal">LINEAR</code> keyword entails a somewhat
          different algorithm. In this case, the number of the partition
          in which a row is stored is calculated as the result of one or
          more logical <a href="functions.html#operator_and"><code class="literal">AND</code></a> operations.
          For discussion and examples of linear hashing, see
          <a href="partitioning.html#partitioning-linear-hash" title="21.2.3.1. LINEAR HASH Partitioning">Section 21.2.3.1, “<code class="literal">LINEAR HASH</code> Partitioning”</a>.
        </p></li><li><p>
          <code class="literal">KEY(<em class="replaceable"><code>column_list</code></em>)</code>:
          This is similar to <code class="literal">HASH</code>, except that MySQL
          supplies the hashing function so as to guarantee an even data
          distribution. The <em class="replaceable"><code>column_list</code></em>
          argument is simply a list of table columns. This example shows
          a simple table partitioned by key, with 4 partitions:
        </p><pre class="programlisting">CREATE TABLE tk (col1 INT, col2 CHAR(5), col3 DATE)
    PARTITION BY KEY(col3)
    PARTITIONS 4;
</pre><p>
          For tables that are partitioned by key, you can employ linear
          partitioning by using the <code class="literal">LINEAR</code> keyword.
          This has the same effect as with tables that are partitioned
          by <code class="literal">HASH</code>. That is, the partition number is
          found using the
          <a href="functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a>
          operator rather than the modulus (see
          <a href="partitioning.html#partitioning-linear-hash" title="21.2.3.1. LINEAR HASH Partitioning">Section 21.2.3.1, “<code class="literal">LINEAR HASH</code> Partitioning”</a>, and
          <a href="partitioning.html#partitioning-key" title="21.2.4. KEY Partitioning">Section 21.2.4, “<code class="literal">KEY</code> Partitioning”</a>, for details). This example
          uses linear partitioning by key to distribute data between 5
          partitions:
        </p><pre class="programlisting">CREATE TABLE tk (col1 INT, col2 CHAR(5), col3 DATE)
    PARTITION BY LINEAR KEY(col3)
    PARTITIONS 5;
</pre><p>
          You may not use either <code class="literal">VALUES LESS THAN</code> or
          <code class="literal">VALUES IN</code> clauses with <code class="literal">PARTITION
          BY KEY</code>.
        </p></li><li><p>
          <code class="literal">RANGE</code>: In this case,
          <em class="replaceable"><code>expr</code></em> shows a range of values using
          a set of <code class="literal">VALUES LESS THAN</code> operators. When
          using range partitioning, you must define at least one
          partition using <code class="literal">VALUES LESS THAN</code>. You
          cannot use <code class="literal">VALUES IN</code> with range
          partitioning.
        </p><p>
          <code class="literal">VALUES LESS THAN</code> can be used with either a
          literal value or an expression that evaluates to a single
          value.
        </p><p>
          Suppose that you have a table that you wish to partition on a
          column containing year values, according to the following
          scheme:
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Partition Number</strong></span>:</td><td><span class="bold"><strong>Years Range</strong></span>:</td></tr><tr><td>0</td><td>1990 and earlier</td></tr><tr><td>1</td><td>1991 – 1994</td></tr><tr><td>2</td><td>1995 – 1998</td></tr><tr><td>3</td><td>1999 – 2002</td></tr><tr><td>4</td><td>2003 – 2005</td></tr><tr><td>5</td><td>2006 and later</td></tr></tbody></table></div><p>
          A table implementing such a partitioning scheme can be
          realized by the <code class="literal">CREATE TABLE</code> statement
          shown here:
        </p><pre class="programlisting">CREATE TABLE t1 (
    year_col  INT,
    some_data INT
)
PARTITION BY RANGE (year_col) (
    PARTITION p0 VALUES LESS THAN (1991),
    PARTITION p1 VALUES LESS THAN (1995),
    PARTITION p2 VALUES LESS THAN (1999),
    PARTITION p3 VALUES LESS THAN (2002),
    PARTITION p4 VALUES LESS THAN (2006),
    PARTITION p5 VALUES LESS THAN MAXVALUE
);
</pre><p>
          <code class="literal">PARTITION ... VALUES LESS THAN ...</code>
          statements work in a consecutive fashion. <code class="literal">VALUES LESS
          THAN MAXVALUE</code> works to specify
          “<span class="quote">leftover</span>” values that are greater than the
          maximum value otherwise specified.
        </p><p>
          Note that <code class="literal">VALUES LESS THAN</code> clauses work
          sequentially in a manner similar to that of the
          <code class="literal">case</code> portions of a <code class="literal">switch ...
          case</code> block (as found in many programming languages
          such as C, Java, and PHP). That is, the clauses must be
          arranged in such a way that the upper limit specified in each
          successive <code class="literal">VALUES LESS THAN</code> is greater than
          that of the previous one, with the one referencing
          <code class="literal">MAXVALUE</code> coming last of all in the list.
        </p></li><li><p>
          <code class="literal">LIST(<em class="replaceable"><code>expr</code></em>)</code>: This
          is useful when assigning partitions based on a table column
          with a restricted set of possible values, such as a state or
          country code. In such a case, all rows pertaining to a certain
          state or country can be assigned to a single partition, or a
          partition can be reserved for a certain set of states or
          countries. It is similar to <code class="literal">RANGE</code>, except
          that only <code class="literal">VALUES IN</code> may be used to specify
          allowable values for each partition.
        </p><p>
          <code class="literal">VALUES IN</code> is used with a list of values to
          be matched. For instance, you could create a partitioning
          scheme such as the following:
        </p><pre class="programlisting">CREATE TABLE client_firms (
    id   INT,
    name VARCHAR(35)
)
PARTITION BY LIST (id) (
    PARTITION r0 VALUES IN (1, 5, 9, 13, 17, 21),
    PARTITION r1 VALUES IN (2, 6, 10, 14, 18, 22),
    PARTITION r2 VALUES IN (3, 7, 11, 15, 19, 23),
    PARTITION r3 VALUES IN (4, 8, 12, 16, 20, 24)
);
</pre><p>
          When using list partitioning, you must define at least one
          partition using <code class="literal">VALUES IN</code>. You cannot use
          <code class="literal">VALUES LESS THAN</code> with <code class="literal">PARTITION BY
          LIST</code>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Currently, the value list used with <code class="literal">VALUES
            IN</code> must consist of integer values only.
          </p></div></li><li><p>
          The number of partitions may optionally be specified with a
          <code class="literal">PARTITIONS <em class="replaceable"><code>num</code></em></code>
          clause, where <em class="replaceable"><code>num</code></em> is the number of
          partitions. If both this clause <span class="emphasis"><em>and</em></span> any
          <code class="literal">PARTITION</code> clauses are used,
          <em class="replaceable"><code>num</code></em> must be equal to the total
          number of any partitions that are declared using
          <code class="literal">PARTITION</code> clauses.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Whether or not you use a <code class="literal">PARTITIONS</code>
            clause in creating a table that is partitioned by
            <code class="literal">RANGE</code> or <code class="literal">LIST</code>, you
            must still include at least one <code class="literal">PARTITION
            VALUES</code> clause in the table definition (see below).
          </p></div></li><li><p>
          A partition may optionally be divided into a number of
          subpartitions. This can be indicated by using the optional
          <code class="literal">SUBPARTITION BY</code> clause. Subpartitioning may
          be done by <code class="literal">HASH</code> or <code class="literal">KEY</code>.
          Either of these may be <code class="literal">LINEAR</code>. These work
          in the same way as previously described for the equivalent
          partitioning types. (It is not possible to subpartition by
          <code class="literal">LIST</code> or <code class="literal">RANGE</code>.)
        </p><p>
          The number of subpartitions can be indicated using the
          <code class="literal">SUBPARTITIONS</code> keyword followed by an
          integer value.
        </p></li><li><p>
          MySQL 5.1.12 introduces rigorous checking of the value used in
          a <code class="literal">PARTITIONS</code> or
          <code class="literal">SUBPARTITIONS</code> clause. Beginning with this
          version, this value must adhere to the following rules:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              The value must be a positive, non-zero integer.
            </p></li><li><p>
              No leading zeroes are permitted.
            </p></li><li><p>
              The value must be an integer literal, and cannot not be an
              expression. For example, <code class="literal">PARTITIONS
              0.2E+01</code> is not allowed, even though
              <code class="literal">0.2E+01</code> evaluates to
              <code class="literal">2</code>. (<a href="http://bugs.mysql.com/15890" target="_top">Bug#15890</a>)
            </p></li></ul></div></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The expression (<em class="replaceable"><code>expr</code></em>) used in a
        <code class="literal">PARTITION BY</code> clause cannot refer to any
        columns not in the table being created; beginning with MySQL
        5.1.23, such references are specifically disallowed and cause
        the statement to fail with an error. (<a href="http://bugs.mysql.com/29444" target="_top">Bug#29444</a>)
      </p></div><p>
      Each partition may be individually defined using a
      <em class="replaceable"><code>partition_definition</code></em> clause. The
      individual parts making up this clause are as follows:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">PARTITION
          <em class="replaceable"><code>partition_name</code></em></code>: This
          specifies a logical name for the partition.
        </p></li><li><p>
          A <code class="literal">VALUES</code> clause: For range partitioning,
          each partition must include a <code class="literal">VALUES LESS
          THAN</code> clause; for list partitioning, you must specify
          a <code class="literal">VALUES IN</code> clause for each partition. This
          is used to determine which rows are to be stored in this
          partition. See the discussions of partitioning types in
          <a href="partitioning.html" title="Chapter 21. Partitioning">Chapter 21, <i>Partitioning</i></a>, for syntax examples.
        </p></li><li><p>
          An optional <code class="literal">COMMENT</code> clause may be used to
          specify a string that describes the partition. Example:
        </p><pre class="programlisting">COMMENT = 'Data for the years previous to 1999'
</pre></li><li><p>
          <code class="literal">DATA DIRECTORY</code> and <code class="literal">INDEX
          DIRECTORY</code> may be used to indicate the directory
          where, respectively, the data and indexes for this partition
          are to be stored. Both the
          <code class="filename"><em class="replaceable"><code>data_dir</code></em></code> and
          the <code class="filename"><em class="replaceable"><code>index_dir</code></em></code>
          must be absolute system pathnames. Example:
        </p><pre class="programlisting">CREATE TABLE th (id INT, name VARCHAR(30), adate DATE)
PARTITION BY LIST(YEAR(adate))
(
  PARTITION p1999 VALUES IN (1995, 1999, 2003)
    DATA DIRECTORY = '<code class="filename">/var/appdata/95/data</code>'
    INDEX DIRECTORY = '<code class="filename">/var/appdata/95/idx</code>',
  PARTITION p2000 VALUES IN (1996, 2000, 2004)
    DATA DIRECTORY = '<code class="filename">/var/appdata/96/data</code>'
    INDEX DIRECTORY = '<code class="filename">/var/appdata/96/idx</code>',
  PARTITION p2001 VALUES IN (1997, 2001, 2005)
    DATA DIRECTORY = '<code class="filename">/var/appdata/97/data</code>'
    INDEX DIRECTORY = '<code class="filename">/var/appdata/97/idx</code>',
  PARTITION p2000 VALUES IN (1998, 2002, 2006)
    DATA DIRECTORY = '<code class="filename">/var/appdata/98/data</code>'
    INDEX DIRECTORY = '<code class="filename">/var/appdata/98/idx</code>'
);
</pre><p>
          <code class="literal">DATA DIRECTORY</code> and <code class="literal">INDEX
          DIRECTORY</code> behave in the same way as in the
          <code class="literal">CREATE TABLE</code> statement's
          <em class="replaceable"><code>table_option</code></em> clause as used for
          <code class="literal">MyISAM</code> tables.
        </p><p>
          One data directory and one index directory may be specified
          per partition. If left unspecified, the data and indexes are
          stored by default in the table's database directory.
        </p><p>
          On Windows, the <code class="literal">DATA DIRECTORY</code> and
          <code class="literal">INDEX DIRECTORY</code> options are not supported
          for individual partitions or subpartitions. Beginning with
          MySQL 5.1.24, these options are ignored on Windows, except
          that a warning is generated. (<a href="http://bugs.mysql.com/30459" target="_top">Bug#30459</a>)
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Prior to MySQL 5.1.18, <code class="literal">DATA DIRECTORY</code> and
            <code class="literal">INDEX DIRECTORY</code> were allowed even if the
            <code class="literal">NO_DIR_IN_CREATE</code> server SQL mode was in
            effect at the time that a partitioned table was created.
            Beginning with MySQL 5.1.18, these options are ignored for
            creating partitioned tables if
            <code class="literal">NO_DIR_IN_CREATE</code> is in effect. (<a href="http://bugs.mysql.com/24633" target="_top">Bug#24633</a>)
          </p></div></li><li><p>
          <code class="literal">MAX_ROWS</code> and <code class="literal">MIN_ROWS</code>
          may be used to specify, respectively, the maximum and minimum
          number of rows to be stored in the partition. The values for
          <em class="replaceable"><code>max_number_of_rows</code></em> and
          <em class="replaceable"><code>min_number_of_rows</code></em> must be positive
          integers. As with the table-level options with the same names,
          these act only as “<span class="quote">suggestions</span>” to the server and
          are not hard limits.
        </p></li><li><p>
          The optional <code class="literal">TABLESPACE</code> clause may be used
          to designate a tablespace for the partition. Used for MySQL
          Cluster only.
        </p></li><li><p>
          The partitioning handler accepts a <code class="literal">[STORAGE]
          ENGINE</code> option for both <code class="literal">PARTITION</code>
          and <code class="literal">SUBPARTITION</code>. Currently, the only way
          in which this can be used is to set all partitions or all
          subpartitions to the same storage engine, and an attempt to
          set different storage engines for partitions or subpartitions
          in the same table will give rise to the error <span class="errortext">ERROR
          1469 (HY000): The mix of handlers in the partitions is not
          allowed in this version of MySQL</span>. We expect to
          lift this restriction on partitioning in a future MySQL
          release.
        </p></li><li><p>
          The <code class="literal">NODEGROUP</code> option can be used to make
          this partition act as part of the node group identified by
          <em class="replaceable"><code>node_group_id</code></em>. This option is
          applicable only to MySQL Cluster.
        </p></li><li><p>
          The partition definition may optionally contain one or more
          <em class="replaceable"><code>subpartition_definition</code></em> clauses.
          Each of these consists at a minimum of the
          <code class="literal">SUBPARTITION
          <em class="replaceable"><code>name</code></em></code>, where
          <em class="replaceable"><code>name</code></em> is an identifier for the
          subpartition. Except for the replacement of the
          <code class="literal">PARTITION</code> keyword with
          <code class="literal">SUBPARTITION</code>, the syntax for a subpartition
          definition is identical to that for a partition definition.
        </p><p>
          Subpartitioning must be done by <code class="literal">HASH</code> or
          <code class="literal">KEY</code>, and can be done only on
          <code class="literal">RANGE</code> or <code class="literal">LIST</code>
          partitions. See <a href="partitioning.html#partitioning-subpartitions" title="21.2.5. Subpartitioning">Section 21.2.5, “Subpartitioning”</a>.
        </p></li></ul></div><p>
      Partitions can be modified, merged, added to tables, and dropped
      from tables. For basic information about the MySQL statements to
      accomplish these tasks, see <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax">Section 12.1.4, “<code class="literal">ALTER TABLE</code> Syntax”</a>. For
      more detailed descriptions and examples, see
      <a href="partitioning.html#partitioning-management" title="21.3. Partition Management">Section 21.3, “Partition Management”</a>.
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        The original <code class="literal">CREATE TABLE</code> statement,
        including all specifications and table options are stored by
        MySQL when the table is created. The information is retained so
        that if you change storage engines, collations or other settings
        using an <code class="literal">ALTER TABLE</code> statement, the original
        table options specified are retained. This allows you to change
        between <code class="literal">InnoDB</code> and <code class="literal">MyISAM</code>
        table types even though the row formats supported by the two
        engines are different.
      </p><p>
        Because the text of the original statement is retained, but due
        to the way that certain values and options may be silently
        reconfigured (such as the <code class="literal">ROW_FORMAT</code>), the
        active table definition (accessible through
        <code class="literal">DESCRIBE</code> or with <code class="literal">SHOW TABLE
        STATUS</code> and the table creation string (accessible
        through <code class="literal">SHOW CREATE TABLE</code>) will report
        different values.
      </p></div><a class="indexterm" name="id2196826"></a><a class="indexterm" name="id2196834"></a><p>
      You can create one table from another by adding a
      <code class="literal">SELECT</code> statement at the end of the
      <code class="literal">CREATE TABLE</code> statement:
    </p><pre class="programlisting">CREATE TABLE <em class="replaceable"><code>new_tbl</code></em> SELECT * FROM <em class="replaceable"><code>orig_tbl</code></em>;
</pre><p>
      MySQL creates new columns for all elements in the
      <code class="literal">SELECT</code>. For example:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE test (a INT NOT NULL AUTO_INCREMENT,</code></strong>
    -&gt;        <strong class="userinput"><code>PRIMARY KEY (a), KEY(b))</code></strong>
    -&gt;        <strong class="userinput"><code>ENGINE=MyISAM SELECT b,c FROM test2;</code></strong>
</pre><p>
      This creates a <code class="literal">MyISAM</code> table with three columns,
      <code class="literal">a</code>, <code class="literal">b</code>, and
      <code class="literal">c</code>. Notice that the columns from the
      <code class="literal">SELECT</code> statement are appended to the right side
      of the table, not overlapped onto it. Take the following example:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM foo;</code></strong>
+---+
| n |
+---+
| 1 |
+---+

mysql&gt; <strong class="userinput"><code>CREATE TABLE bar (m INT) SELECT n FROM foo;</code></strong>
Query OK, 1 row affected (0.02 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT * FROM bar;</code></strong>
+------+---+
| m    | n |
+------+---+
| NULL | 1 |
+------+---+
1 row in set (0.00 sec)
</pre><p>
      For each row in table <code class="literal">foo</code>, a row is inserted in
      <code class="literal">bar</code> with the values from <code class="literal">foo</code>
      and default values for the new columns.
    </p><p>
      In a table resulting from <code class="literal">CREATE TABLE ...
      SELECT</code>, columns named only in the <code class="literal">CREATE
      TABLE</code> part come first. Columns named in both parts or
      only in the <code class="literal">SELECT</code> part come after that. The
      data type of <code class="literal">SELECT</code> columns can be overridden
      by also specifying the column in the <code class="literal">CREATE
      TABLE</code> part.
    </p><p>
      If any errors occur while copying the data to the table, it is
      automatically dropped and not created.
    </p><p>
      <code class="literal">CREATE TABLE ... SELECT</code> does not automatically
      create any indexes for you. This is done intentionally to make the
      statement as flexible as possible. If you want to have indexes in
      the created table, you should specify these before the
      <code class="literal">SELECT</code> statement:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE bar (UNIQUE (n)) SELECT n FROM foo;</code></strong>
</pre><p>
      Some conversion of data types might occur. For example, the
      <code class="literal">AUTO_INCREMENT</code> attribute is not preserved, and
      <code class="literal">VARCHAR</code> columns can become
      <code class="literal">CHAR</code> columns. Retrained attributes are
      <code class="literal">NULL</code> (or <code class="literal">NOT NULL</code>) and, for
      those columns that have them, <code class="literal">CHARACTER SET</code>,
      <code class="literal">COLLATION</code>, <code class="literal">COMMENT</code>, and the
      <code class="literal">DEFAULT</code> clause.
    </p><p>
      When creating a table with <code class="literal">CREATE ... SELECT</code>,
      make sure to alias any function calls or expressions in the query.
      If you do not, the <code class="literal">CREATE</code> statement might fail
      or result in undesirable column names.
    </p><pre class="programlisting">CREATE TABLE artists_and_works
  SELECT artist.name, COUNT(work.artist_id) AS number_of_works
  FROM artist LEFT JOIN work ON artist.id = work.artist_id
  GROUP BY artist.id;
</pre><p>
      You can also explicitly specify the data type for a generated
      column:
    </p><pre class="programlisting">CREATE TABLE foo (a TINYINT NOT NULL) SELECT b+1 AS a FROM bar;
</pre><p>
      Use <code class="literal">LIKE</code> to create an empty table based on the
      definition of another table, including any column attributes and
      indexes defined in the original table:
    </p><pre class="programlisting">CREATE TABLE <em class="replaceable"><code>new_tbl</code></em> LIKE <em class="replaceable"><code>orig_tbl</code></em>;
</pre><p>
      The copy is created using the same version of the table storage
      format as the original table. The <code class="literal">SELECT</code>
      privilege is required on the original table.
    </p><p>
      <code class="literal">LIKE</code> works only for base tables, not for views.
    </p><p>
      <code class="literal">CREATE TABLE ... LIKE</code> does not preserve any
      <code class="literal">DATA DIRECTORY</code> or <code class="literal">INDEX
      DIRECTORY</code> table options that were specified for the
      original table, or any foreign key definitions.
    </p><p>
      You can precede the <code class="literal">SELECT</code> by
      <code class="literal">IGNORE</code> or <code class="literal">REPLACE</code> to
      indicate how to handle rows that duplicate unique key values. With
      <code class="literal">IGNORE</code>, new rows that duplicate an existing row
      on a unique key value are discarded. With
      <code class="literal">REPLACE</code>, new rows replace rows that have the
      same unique key value. If neither <code class="literal">IGNORE</code> nor
      <code class="literal">REPLACE</code> is specified, duplicate unique key
      values result in an error.
    </p><p>
      To ensure that the binary log can be used to re-create the
      original tables, MySQL does not allow concurrent inserts during
      <code class="literal">CREATE TABLE ... SELECT</code>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="silent-column-changes"></a>12.1.10.1. Silent Column Specification Changes</h4></div></div></div><a class="indexterm" name="id2197284"></a><p>
        In some cases, MySQL silently changes column specifications from
        those given in a <code class="literal">CREATE TABLE</code> or
        <code class="literal">ALTER TABLE</code> statement. These might be changes
        to a data type, to attributes associated with a data type, or to
        an index specification.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">TIMESTAMP</code> display sizes are discarded.
          </p><p>
            Also note that <code class="literal">TIMESTAMP</code> columns are
            <code class="literal">NOT NULL</code> by default.
          </p></li><li><p>
            Columns that are part of a <code class="literal">PRIMARY KEY</code>
            are made <code class="literal">NOT NULL</code> even if not declared
            that way.
          </p></li><li><p>
            Trailing spaces are automatically deleted from
            <code class="literal">ENUM</code> and <code class="literal">SET</code> member
            values when the table is created.
          </p></li><li><p>
            MySQL maps certain data types used by other SQL database
            vendors to MySQL types. See
            <a href="data-types.html#other-vendor-data-types" title="10.7. Using Data Types from Other Database Engines">Section 10.7, “Using Data Types from Other Database Engines”</a>.
          </p></li><li><p>
            If you include a <code class="literal">USING</code> clause to specify
            an index type that is not legal for a given storage engine,
            but there is another index type available that the engine
            can use without affecting query results, the engine uses the
            available type.
          </p></li><li><p>
            If strict SQL mode is not enabled, a
            <code class="literal">VARCHAR</code> column with a length
            specification greater than 65535 is converted to
            <code class="literal">TEXT</code>, and a <code class="literal">VARBINARY</code>
            column with a length specification greater than 65535 is
            converted to <code class="literal">BLOB</code>. Otherwise, an error
            occurs in either of these cases.
          </p></li><li><p>
            Specifying the <code class="literal">CHARACTER SET binary</code>
            attribute for a character data type causes the column to be
            created as the corresponding binary data type:
            <code class="literal">CHAR</code> becomes <code class="literal">BINARY</code>,
            <code class="literal">VARCHAR</code> becomes
            <code class="literal">VARBINARY</code>, and <code class="literal">TEXT</code>
            becomes <code class="literal">BLOB</code>. For the
            <code class="literal">ENUM</code> and <code class="literal">SET</code> data
            types, this does not occur; they are created as declared.
            Suppose that you specify a table using this definition:
          </p><pre class="programlisting">CREATE TABLE t
(
  c1 VARCHAR(10) CHARACTER SET binary,
  c2 TEXT CHARACTER SET binary,
  c3 ENUM('a','b','c') CHARACTER SET binary
);
</pre><p>
            The resulting table has this definition:
          </p><pre class="programlisting">CREATE TABLE t
(
  c1 VARBINARY(10),
  c2 BLOB,
  c3 ENUM('a','b','c') CHARACTER SET binary
);
</pre></li></ul></div><p>
        To see whether MySQL used a data type other than the one you
        specified, issue a <code class="literal">DESCRIBE</code> or <code class="literal">SHOW
        CREATE TABLE</code> statement after creating or altering the
        table.
      </p><a class="indexterm" name="id2197536"></a><p>
        Certain other data type changes can occur if you compress a
        table using <span><strong class="command">myisampack</strong></span>. See
        <a href="storage-engines.html#compressed-format" title="13.4.3.3. Compressed Table Characteristics">Section 13.4.3.3, “Compressed Table Characteristics”</a>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="create-tablespace"></a>12.1.11. <code class="literal">CREATE TABLESPACE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2197575"></a><pre class="programlisting">CREATE TABLESPACE <em class="replaceable"><code>tablespace_name</code></em>
    ADD DATAFILE '<em class="replaceable"><code>file_name</code></em>'
    USE LOGFILE GROUP <em class="replaceable"><code>logfile_group</code></em>
    [EXTENT_SIZE [=] <em class="replaceable"><code>extent_size</code></em>]
    [INITIAL_SIZE [=] <em class="replaceable"><code>initial_size</code></em>]
    [AUTOEXTEND_SIZE [=] <em class="replaceable"><code>autoextend_size</code></em>]
    [MAX_SIZE [=] <em class="replaceable"><code>max_size</code></em>]
    [NODEGROUP [=] <em class="replaceable"><code>nodegroup_id</code></em>]
    [WAIT]
    [COMMENT [=] <em class="replaceable"><code>comment_text</code></em>]
    ENGINE [=] <em class="replaceable"><code>engine_name</code></em>
</pre><p>
      This statement is used to create a tablespace, which can contain
      one or more data files, providing storage space for tables. One
      data file is created and added to the tablespace using this
      statement. Additional data files may be added to the tablespace by
      using the <code class="literal">ALTER TABLESPACE</code> statement (see
      <a href="sql-syntax.html#alter-tablespace" title="12.1.5. ALTER TABLESPACE Syntax">Section 12.1.5, “<code class="literal">ALTER TABLESPACE</code> Syntax”</a>). For rules covering the naming
      of tablespaces, see <a href="language-structure.html#identifiers" title="8.2. Schema Object Names">Section 8.2, “Schema Object Names”</a>.
    </p><p>
      A log file group of one or more <code class="literal">UNDO</code> log files
      must be assigned to the tablespace to be created with the
      <code class="literal">USE LOGFILE GROUP</code> clause.
      <em class="replaceable"><code>logfile_group</code></em> must be an existing log
      file group created with <code class="literal">CREATE LOGFILE GROUP</code>
      (see <a href="sql-syntax.html#create-logfile-group" title="12.1.8. CREATE LOGFILE GROUP Syntax">Section 12.1.8, “<code class="literal">CREATE LOGFILE GROUP</code> Syntax”</a>). Multiple tablespaces
      may use the same log file group for <code class="literal">UNDO</code>
      logging.
    </p><p>
      The <code class="literal">EXTENT_SIZE</code> sets the size, in bytes, of the
      extents used by any files belonging to the tablespace. The default
      value is 1M. The minimum size is 32K, and the theoretical maximum
      is 2G, although the practical maximum size depends on a number of
      factors.
    </p><p>
      An <em class="firstterm">extent</em> is a unit of disk space
      allocation. One extent is filled with as much data as that extent
      can contain before another extent is used. In theory, up to 65,535
      (64K) extents may used per data file; however, the recommended
      maximum is 32,768 (32K). The recommended maximum size for a single
      data file is 32G — that is, 32K extents × 1 MB per
      extent. Smaller extents have the advantage that they tend to
      provide lower latency; however, larger extents tend to allow for
      greater throughput. You must also take into consideration that
      larger extents may mean longer node restart times. In addition,
      once an extent is allocated to a given table, it cannot be used to
      store data from another; an extent cannot store table from more
      than one table. This means, for example that a tablespace having a
      single datafile whose <code class="literal">INITIAL_SIZE</code> is 256 MB
      and whose <code class="literal">EXTENT_SIZE</code> is 128M has just two
      extents, and so can be used to store data from at most two
      different disk data tables.
    </p><p>
      You can see how many extents remain free in a given data file by
      querying the <code class="literal">INFORMATION_SCHEMA.FILES</code> table,
      and so derive an estimate for how much space remains free in the
      file. For further discussion and examples, see
      <a href="information-schema.html#files-table" title="27.21. The INFORMATION_SCHEMA FILES Table">Section 27.21, “The <code class="literal">INFORMATION_SCHEMA FILES</code> Table”</a>.
    </p><p>
      The <code class="literal">INITIAL_SIZE</code> parameter sets the data file's
      total size in bytes. Once the file has been created, its size
      cannot be changed; however, you can add more data files to the
      tablespace using <code class="literal">ALTER TABLESPACE ... ADD
      DATAFILE</code>. See <a href="sql-syntax.html#alter-tablespace" title="12.1.5. ALTER TABLESPACE Syntax">Section 12.1.5, “<code class="literal">ALTER TABLESPACE</code> Syntax”</a>.
    </p><p>
      <code class="literal">INITIAL_SIZE</code> is optional; its default value is
      <code class="literal">128M</code>.
    </p><p>
      On 32-bit systems, the maximum supported value for
      <code class="literal">INITIAL_SIZE</code> is <code class="literal">4G</code>. (<a href="http://bugs.mysql.com/29186" target="_top">Bug#29186</a>)
    </p><p>
      When setting <code class="literal">EXTENT_SIZE</code> or
      <code class="literal">INITIAL_SIZE</code> (either or both), you may
      optionally follow the number with a one-letter abbreviation for an
      order of magnitude, similar to those used in
      <code class="filename">my.cnf</code>. Generally, this is one of the letters
      <code class="literal">M</code> (for megabytes) or <code class="literal">G</code> (for
      gigabytes).
    </p><p>
      <code class="literal">AUTOEXTEND_SIZE</code>, <code class="literal">MAX_SIZE</code>,
      <code class="literal">NODEGROUP</code>, <code class="literal">WAIT</code>, and
      <code class="literal">COMMENT</code> are parsed but ignored, and so have no
      effect in MySQL 5.1. These options are intended for
      future expansion.
    </p><p>
      The <code class="literal">ENGINE</code> parameter determines the storage
      engine which uses this tablespace, with
      <em class="replaceable"><code>engine_name</code></em> being the name of the
      storage engine. In MySQL 5.1,
      <em class="replaceable"><code>engine_name</code></em> must be one of the values
      <code class="literal">NDB</code> or <code class="literal">NDBCLUSTER</code>.
    </p><p>
      When <code class="literal">CREATE TABLESPACE</code> is used with
      <code class="literal">ENGINE = NDB</code>, a tablespace and associated data
      file are created on each Cluster data node. You can verify that
      the data files were created and obtain information about them by
      querying the <code class="literal">INFORMATION_SCHEMA.FILES</code> table.
      For example:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LOGFILE_GROUP_NAME, FILE_NAME, EXTRA</code></strong> 
    -&gt; <strong class="userinput"><code>FROM INFORMATION_SCHEMA.FILES</code></strong>
    -&gt; <strong class="userinput"><code>WHERE TABLESPACE_NAME = 'newts' AND FILE_TYPE = 'DATAFILE';</code></strong>
+--------------------+-------------+----------------+
| LOGFILE_GROUP_NAME | FILE_NAME   | EXTRA          |
+--------------------+-------------+----------------+
| lg_3               | newdata.dat | CLUSTER_NODE=3 |
| lg_3               | newdata.dat | CLUSTER_NODE=4 |
+--------------------+-------------+----------------+
2 rows in set (0.01 sec)
</pre><p>
      (See <a href="information-schema.html#files-table" title="27.21. The INFORMATION_SCHEMA FILES Table">Section 27.21, “The <code class="literal">INFORMATION_SCHEMA FILES</code> Table”</a>.)
    </p><p>
      <code class="literal">CREATE TABLESPACE</code> was added in MySQL 5.1.6. In
      MySQL 5.1, it is useful only with Disk Data storage for MySQL
      Cluster. See <a href="mysql-cluster.html#mysql-cluster-disk-data" title="20.12. MySQL Cluster Disk Data Tables">Section 20.12, “MySQL Cluster Disk Data Tables”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="drop-database"></a>12.1.12. <code class="literal">DROP DATABASE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2198020"></a><a class="indexterm" name="id2198029"></a><a class="indexterm" name="id2198038"></a><a class="indexterm" name="id2198051"></a><a class="indexterm" name="id2198063"></a><a class="indexterm" name="id2198075"></a><pre class="programlisting">DROP {DATABASE | SCHEMA} [IF EXISTS] <em class="replaceable"><code>db_name</code></em>
</pre><p>
      <code class="literal">DROP DATABASE</code> drops all tables in the database
      and deletes the database. Be <span class="emphasis"><em>very</em></span> careful
      with this statement! To use <code class="literal">DROP DATABASE</code>, you
      need the <code class="literal">DROP</code> privilege on the database.
      <code class="literal">DROP SCHEMA</code> is a synonym for <code class="literal">DROP
      DATABASE</code>.
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        When a database is dropped, user privileges on the database are
        <span class="emphasis"><em>not</em></span> automatically dropped. See
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
      </p></div><p>
      <code class="literal">IF EXISTS</code> is used to prevent an error from
      occurring if the database does not exist.
    </p><p>
      If you use <code class="literal">DROP DATABASE</code> on a symbolically
      linked database, both the link and the original database are
      deleted.
    </p><p>
      <code class="literal">DROP DATABASE</code> returns the number of tables that
      were removed. This corresponds to the number of
      <code class="filename">.frm</code> files removed.
    </p><p>
      The <code class="literal">DROP DATABASE</code> statement removes from the
      given database directory those files and directories that MySQL
      itself may create during normal operation:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          All files with these extensions:
        </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><code class="literal">.BAK</code></td><td><code class="literal">.DAT</code></td><td><code class="literal">.HSH</code></td><td><code class="literal">.MRG</code></td></tr><tr><td><code class="literal">.MYD</code></td><td><code class="literal">.MYI</code></td><td><code class="literal">.TRG</code></td><td><code class="literal">.TRN</code></td></tr><tr><td><code class="literal">.db</code></td><td><code class="literal">.frm</code></td><td><code class="literal">.ibd</code></td><td><code class="literal">.ndb</code></td></tr><tr><td><code class="literal">.par</code></td><td> </td><td> </td><td> </td></tr></tbody></table></div></li><li><p>
          The <code class="filename">db.opt</code> file, if it exists.
        </p></li></ul></div><p>
      If other files or directories remain in the database directory
      after MySQL removes those just listed, the database directory
      cannot be removed. In this case, you must remove any remaining
      files or directories manually and issue the <code class="literal">DROP
      DATABASE</code> statement again.
    </p><a class="indexterm" name="id2198393"></a><p>
      You can also drop databases with <span><strong class="command">mysqladmin</strong></span>.
      See <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server">Section 4.5.2, “<span><strong class="command">mysqladmin</strong></span> — Client for Administering a MySQL Server”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="drop-index"></a>12.1.13. <code class="literal">DROP INDEX</code> Syntax</h3></div></div></div><a class="indexterm" name="id2198430"></a><a class="indexterm" name="id2198439"></a><a class="indexterm" name="id2198451"></a><pre class="programlisting">DROP [ONLINE|OFFLINE] INDEX <em class="replaceable"><code>index_name</code></em> ON <em class="replaceable"><code>tbl_name</code></em>
</pre><p>
      <code class="literal">DROP INDEX</code> drops the index named
      <em class="replaceable"><code>index_name</code></em> from the table
      <em class="replaceable"><code>tbl_name</code></em>. This statement is mapped to
      an <code class="literal">ALTER TABLE</code> statement to drop the index. See
      <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax">Section 12.1.4, “<code class="literal">ALTER TABLE</code> Syntax”</a>.
    </p><p>
      Beginning with MySQL 5.1.7, indexes on variable-width columns are
      dropped online; that is, dropping the indexes does not require any
      copying or locking of the table. This is done automatically by the
      server whenever it determines that it is possible to do so; you do
      not have to use any special SQL syntax or server options to cause
      it to happen.
    </p><p>
      In standard MySQL 5.1 releases, it is not possible to
      override the server when it determines that an index is to be
      dropped online. In MySQL Cluster, beginning with MySQL Cluster NDB
      6.2.5 and MySQL Cluster NDB 6.3.3, you can drop indexes offline
      (which causes the table to be locked) using the
      <code class="literal">OFFLINE</code> keyword. The rules and limitations
      governing online <code class="literal">DROP OFFLINE INDEX</code> and
      <code class="literal">DROP ONLINE INDEX</code> are the same as for
      <code class="literal">ALTER OFFLINE TABLE ... DROP INDEX</code> and
      <code class="literal">ALTER ONLINE TABLE ... DROP INDEX</code>. You cannot
      cause the online dropping of an index that would normally be
      dropped offline by using the <code class="literal">ONLINE</code> keyword (if
      it is not possible to perform the <code class="literal">DROP</code>
      operation online, then the <code class="literal">ONLINE</code> keyword is
      ignored). For more information, see <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax">Section 12.1.4, “<code class="literal">ALTER TABLE</code> Syntax”</a>.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The <code class="literal">ONLINE</code> and <code class="literal">OFFLINE</code>
        keywords are available only in MySQL Cluster NDB 6.2 and MySQL
        Cluster NDB 6.3 releases beginning with versions 6.2.5 and
        6.3.3, respectively; attempting to use them in earlier MySQL
        Cluster NDB 6.2 or 6.3 releases, standard MySQL 5.1 releases, or
        MySQL Cluster NDB 6.1 releases results in a syntax error.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="drop-logfile-group"></a>12.1.14. <code class="literal">DROP LOGFILE GROUP</code> Syntax</h3></div></div></div><a class="indexterm" name="id2198633"></a><pre class="programlisting">DROP LOGFILE GROUP <em class="replaceable"><code>logfile_group</code></em>
    ENGINE [=] <em class="replaceable"><code>engine_name</code></em>
</pre><p>
      This statement drops the log file group named
      <em class="replaceable"><code>logfile_group</code></em>. The log file group must
      already exist or an error results. (For information on creating
      log file groups, see <a href="sql-syntax.html#create-logfile-group" title="12.1.8. CREATE LOGFILE GROUP Syntax">Section 12.1.8, “<code class="literal">CREATE LOGFILE GROUP</code> Syntax”</a>.)
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        Before dropping a log file group, you must drop all tablespaces
        that use that log file group for <code class="literal">UNDO</code>
        logging.
      </p></div><p>
      The required <code class="literal">ENGINE</code> clause provides the name of
      the storage engine used by the log file group to be dropped. In
      MySQL 5.1, the only permitted values for
      <em class="replaceable"><code>engine_name</code></em> are <code class="literal">NDB</code>
      and <code class="literal">NDBCLUSTER</code>.
    </p><p>
      <code class="literal">DROP LOGFILE GROUP</code> was added in MySQL 5.1.6. In
      MySQL 5.1, it is useful only with Disk Data storage for MySQL
      Cluster. See <a href="mysql-cluster.html#mysql-cluster-disk-data" title="20.12. MySQL Cluster Disk Data Tables">Section 20.12, “MySQL Cluster Disk Data Tables”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="drop-server"></a>12.1.15. <code class="literal">DROP SERVER</code> Syntax</h3></div></div></div><a class="indexterm" name="id2198739"></a><pre class="programlisting">DROP SERVER [ IF EXISTS ] <em class="replaceable"><code>server_name</code></em>
</pre><p>
      Drops the server definition for the server named
      <code class="literal"><em class="replaceable"><code>server_name</code></em></code>. The
      corresponding row within the <code class="literal">mysql.servers</code>
      table will be deleted. This statement requires the
      <code class="literal">SUPER</code> privilege.
    </p><p>
      Dropping a server for a table does not affect any
      <code class="literal">FEDERATED</code> tables that used this connection
      information when they were created. See
      <a href="sql-syntax.html#create-server" title="12.1.9. CREATE SERVER Syntax">Section 12.1.9, “<code class="literal">CREATE SERVER</code> Syntax”</a>.
    </p><p>
      <code class="literal">DROP SERVER</code> does not cause an automatic commit.
    </p><p>
      <code class="literal">DROP SERVER</code> was added in MySQL 5.1.15.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="drop-table"></a>12.1.16. <code class="literal">DROP TABLE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2198854"></a><a class="indexterm" name="id2198863"></a><a class="indexterm" name="id2198876"></a><pre class="programlisting">DROP [TEMPORARY] TABLE [IF EXISTS]
    <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ...
    [RESTRICT | CASCADE]
</pre><p>
      <code class="literal">DROP TABLE</code> removes one or more tables. You must
      have the <code class="literal">DROP</code> privilege for each table. All
      table data and the table definition are
      <span class="emphasis"><em>removed</em></span>, so <span class="emphasis"><em>be careful</em></span>
      with this statement! If any of the tables named in the argument
      list do not exist, MySQL returns an error indicating by name which
      non-existing tables it was unable to drop, but it also drops all
      of the tables in the list that do exist.
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        When a table is dropped, user privileges on the table are
        <span class="emphasis"><em>not</em></span> automatically dropped. See
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
      </p></div><p>
      Note that for a partitioned table, <code class="literal">DROP TABLE</code>
      permanently removes the table definition, all of its partitions,
      and all of the data which was stored in those partitions. It also
      removes the partitioning definition (<code class="filename">.par</code>)
      file associated with the dropped table.
    </p><p>
      Use <code class="literal">IF EXISTS</code> to prevent an error from
      occurring for tables that do not exist. A <code class="literal">NOTE</code>
      is generated for each non-existent table when using <code class="literal">IF
      EXISTS</code>. See <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax">Section 12.5.5.37, “<code class="literal">SHOW WARNINGS</code> Syntax”</a>.
    </p><p>
      <code class="literal">RESTRICT</code> and <code class="literal">CASCADE</code> are
      allowed to make porting easier. In MySQL 5.1, they do
      nothing.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        <code class="literal">DROP TABLE</code> automatically commits the current
        active transaction, unless you use the
        <code class="literal">TEMPORARY</code> keyword.
      </p></div><p>
      The <code class="literal">TEMPORARY</code> keyword has the following
      effects:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The statement drops only <code class="literal">TEMPORARY</code> tables.
        </p></li><li><p>
          The statement does not end an ongoing transaction.
        </p></li><li><p>
          No access rights are checked. (A <code class="literal">TEMPORARY</code>
          table is visible only to the client that created it, so no
          check is necessary.)
        </p></li></ul></div><p>
      Using <code class="literal">TEMPORARY</code> is a good way to ensure that
      you do not accidentally drop a non-<code class="literal">TEMPORARY</code>
      table.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="drop-tablespace"></a>12.1.17. <code class="literal">DROP TABLESPACE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2199124"></a><pre class="programlisting">DROP TABLESPACE <em class="replaceable"><code>tablespace_name</code></em>
    ENGINE [=] <em class="replaceable"><code>engine_name</code></em>
</pre><p>
      This statement drops a tablespace that was previously created
      using <code class="literal">CREATE TABLESPACE</code> (see
      <a href="sql-syntax.html#create-tablespace" title="12.1.11. CREATE TABLESPACE Syntax">Section 12.1.11, “<code class="literal">CREATE TABLESPACE</code> Syntax”</a>).
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        The tablespace to be dropped must not contain any data files; in
        other words, before you can drop a tablespace, you must first
        drop each of its data files using <code class="literal">ALTER TABLESPACE ...
        DROP DATAFILE</code> (see
        <a href="sql-syntax.html#alter-tablespace" title="12.1.5. ALTER TABLESPACE Syntax">Section 12.1.5, “<code class="literal">ALTER TABLESPACE</code> Syntax”</a>).
      </p></div><p>
      The <code class="literal">ENGINE</code> clause (required) specifies the
      storage engine used by the tablespace. In MySQL 5.1, the only
      accepted values for <em class="replaceable"><code>engine_name</code></em> are
      <code class="literal">NDB</code> and <code class="literal">NDBCLUSTER</code>.
    </p><p>
      <code class="literal">DROP TABLESPACE</code> was added in MySQL 5.1.6. In
      MySQL 5.1, it is useful only with Disk Data storage for MySQL
      Cluster. See <a href="mysql-cluster.html#mysql-cluster-disk-data" title="20.12. MySQL Cluster Disk Data Tables">Section 20.12, “MySQL Cluster Disk Data Tables”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="rename-database"></a>12.1.18. <code class="literal">RENAME DATABASE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2199263"></a><pre class="programlisting">RENAME {DATABASE | SCHEMA} <em class="replaceable"><code>db_name</code></em> TO <em class="replaceable"><code>new_db_name</code></em>;
</pre><p>
      This statement was added in MySQL 5.1.7 but was found to be
      dangerous and was removed in MySQL 5.1.23. It was intended to
      enable upgrading pre-5.1 databases to use the encoding implemented
      in 5.1 for mapping database names to database directory names (see
      <a href="language-structure.html#identifier-mapping" title="8.2.3. Mapping of Identifiers to Filenames">Section 8.2.3, “Mapping of Identifiers to Filenames”</a>). However, use of this
      statement could result in loss of database contents, which is why
      it was removed. Do not use <code class="literal">RENAME DATABASE</code> in
      earlier versions in which it is present.
    </p><p>
      To perform the task of upgrading database names with the new
      encoding, use <code class="literal">ALTER DATABASE
      <em class="replaceable"><code>db_name</code></em> UPGRADE DATA DIRECTORY
      NAME</code> instead (see <a href="sql-syntax.html#alter-database" title="12.1.1. ALTER DATABASE Syntax">Section 12.1.1, “<code class="literal">ALTER DATABASE</code> Syntax”</a>).
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="rename-table"></a>12.1.19. <code class="literal">RENAME TABLE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2199335"></a><pre class="programlisting">RENAME TABLE <em class="replaceable"><code>tbl_name</code></em> TO <em class="replaceable"><code>new_tbl_name</code></em>
    [, <em class="replaceable"><code>tbl_name2</code></em> TO <em class="replaceable"><code>new_tbl_name2</code></em>] ...
</pre><p>
      This statement renames one or more tables.
    </p><p>
      The rename operation is done atomically, which means that no other
      thread can access any of the tables while the rename is running.
      For example, if you have an existing table
      <code class="literal">old_table</code>, you can create another table
      <code class="literal">new_table</code> that has the same structure but is
      empty, and then replace the existing table with the empty one as
      follows (assuming that <code class="literal">backup_table</code> does not
      already exist):
    </p><pre class="programlisting">CREATE TABLE new_table (...);
RENAME TABLE old_table TO backup_table, new_table TO old_table;
</pre><p>
      If the statement renames more than one table, renaming operations
      are done from left to right. If you want to swap two table names,
      you can do so like this (assuming that
      <code class="literal">tmp_table</code> does not already exist):
    </p><pre class="programlisting">RENAME TABLE old_table TO tmp_table,
             new_table TO old_table,
             tmp_table TO new_table;
</pre><p>
      As long as two databases are on the same filesystem, you can use
      <code class="literal">RENAME TABLE</code> to move a table from one database
      to another:
    </p><pre class="programlisting">RENAME TABLE <em class="replaceable"><code>current_db.tbl_name</code></em> TO <em class="replaceable"><code>other_db.tbl_name;</code></em>
</pre><p>
      If there are any triggers associated with a table which is moved
      to a different database using <code class="literal">RENAME TABLE</code>,
      then the statement fails with the error <span class="errortext">Trigger in
      wrong schema</span>.
    </p><p>
      <code class="literal">RENAME TABLE</code> also works for views, as long as
      you do not try to rename a view into a different database.
    </p><p>
      Any privileges granted specifically for the renamed table or view
      are not migrated to the new name. They must be changed manually.
    </p><p>
      When you execute <code class="literal">RENAME</code>, you cannot have any
      locked tables or active transactions. You must also have the
      <code class="literal">ALTER</code> and <code class="literal">DROP</code> privileges on
      the original table, and the <code class="literal">CREATE</code> and
      <code class="literal">INSERT</code> privileges on the new table.
    </p><p>
      If MySQL encounters any errors in a multiple-table rename, it does
      a reverse rename for all renamed tables to return everything to
      its original state.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql-syntax-data-manipulation"></a>12.2. Data Manipulation Statements</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#delete">12.2.1. <code class="literal">DELETE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#do">12.2.2. <code class="literal">DO</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#handler">12.2.3. <code class="literal">HANDLER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#insert">12.2.4. <code class="literal">INSERT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#load-data">12.2.5. <code class="literal">LOAD DATA INFILE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#replace">12.2.6. <code class="literal">REPLACE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#select">12.2.7. <code class="literal">SELECT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#subqueries">12.2.8. Subquery Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#truncate">12.2.9. <code class="literal">TRUNCATE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#update">12.2.10. <code class="literal">UPDATE</code> Syntax</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="delete"></a>12.2.1. <code class="literal">DELETE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2199568"></a><p>
      Single-table syntax:
    </p><pre class="programlisting">DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM <em class="replaceable"><code>tbl_name</code></em>
    [WHERE <em class="replaceable"><code>where_condition</code></em>]
    [ORDER BY ...]
    [LIMIT <em class="replaceable"><code>row_count</code></em>]
</pre><p>
      Multiple-table syntax:
    </p><pre class="programlisting">DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
    <em class="replaceable"><code>tbl_name</code></em>[.*] [, <em class="replaceable"><code>tbl_name</code></em>[.*]] ...
    FROM <em class="replaceable"><code>table_references</code></em>
    [WHERE <em class="replaceable"><code>where_condition</code></em>]
</pre><p>
      Or:
    </p><pre class="programlisting">DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
    FROM <em class="replaceable"><code>tbl_name</code></em>[.*] [, <em class="replaceable"><code>tbl_name</code></em>[.*]] ...
    USING <em class="replaceable"><code>table_references</code></em>
    [WHERE <em class="replaceable"><code>where_condition</code></em>]
</pre><p>
      For the single-table syntax, the <code class="literal">DELETE</code>
      statement deletes rows from <em class="replaceable"><code>tbl_name</code></em>
      and returns a count of the number of deleted rows. This count can
      be obtained by calling the
      <a href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a> function (see
      <a href="functions.html#information-functions" title="11.11.3. Information Functions">Section 11.11.3, “Information Functions”</a>). The
      <code class="literal">WHERE</code> clause, if given, specifies the
      conditions that identify which rows to delete. With no
      <code class="literal">WHERE</code> clause, all rows are deleted. If the
      <code class="literal">ORDER BY</code> clause is specified, the rows are
      deleted in the order that is specified. The
      <code class="literal">LIMIT</code> clause places a limit on the number of
      rows that can be deleted.
    </p><p>
      For the multiple-table syntax, <code class="literal">DELETE</code> deletes
      from each <em class="replaceable"><code>tbl_name</code></em> the rows that
      satisfy the conditions. In this case, <code class="literal">ORDER BY</code>
      and <code class="literal">LIMIT</code> cannot be used.
    </p><p>
      <em class="replaceable"><code>where_condition</code></em> is an expression that
      evaluates to true for each row to be deleted. It is specified as
      described in <a href="sql-syntax.html#select" title="12.2.7. SELECT Syntax">Section 12.2.7, “<code class="literal">SELECT</code> Syntax”</a>.
    </p><p>
      Currently, you cannot delete from a table and select from the same
      table in a subquery.
    </p><p>
      As stated, a <code class="literal">DELETE</code> statement with no
      <code class="literal">WHERE</code> clause deletes all rows. A faster way to
      do this, when you do not need to know the number of deleted rows,
      is to use <code class="literal">TRUNCATE TABLE</code>. However, within a
      transaction or if you have a lock on the table, <code class="literal">TRUNCATE
      TABLE</code> cannot be used whereas <code class="literal">DELETE</code>
      can. See <a href="sql-syntax.html#truncate" title="12.2.9. TRUNCATE Syntax">Section 12.2.9, “<code class="literal">TRUNCATE</code> Syntax”</a>, and
      <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and UNLOCK TABLES
      Syntax">Section 12.4.5, “<code class="literal">LOCK TABLES</code> and <code class="literal">UNLOCK TABLES</code>
      Syntax”</a>.
    </p><p>
      If you delete the row containing the maximum value for an
      <code class="literal">AUTO_INCREMENT</code> column, the value is not reused
      for a <code class="literal">MyISAM</code> or <code class="literal">InnoDB</code>
      table. If you delete all rows in the table with <code class="literal">DELETE
      FROM <em class="replaceable"><code>tbl_name</code></em></code> (without a
      <code class="literal">WHERE</code> clause) in <code class="literal">AUTOCOMMIT</code>
      mode, the sequence starts over for all storage engines except
      <code class="literal">InnoDB</code> and <code class="literal">MyISAM</code>. There are
      some exceptions to this behavior for <code class="literal">InnoDB</code>
      tables, as discussed in
      <a href="storage-engines.html#innodb-auto-increment-handling" title="13.5.6.3. How AUTO_INCREMENT Handling Works in
        InnoDB">Section 13.5.6.3, “How <code class="literal">AUTO_INCREMENT</code> Handling Works in
        <code class="literal">InnoDB</code>”</a>.
    </p><p>
      For <code class="literal">MyISAM</code> tables, you can specify an
      <code class="literal">AUTO_INCREMENT</code> secondary column in a
      multiple-column key. In this case, reuse of values deleted from
      the top of the sequence occurs even for <code class="literal">MyISAM</code>
      tables. See <a href="tutorial.html#example-auto-increment" title="3.6.9. Using AUTO_INCREMENT">Section 3.6.9, “Using <code class="literal">AUTO_INCREMENT</code>”</a>.
    </p><p>
      The <code class="literal">DELETE</code> statement supports the following
      modifiers:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you specify <code class="literal">LOW_PRIORITY</code>, the server
          delays execution of the <code class="literal">DELETE</code> until no
          other clients are reading from the table. This affects only
          storage engines that use only table-level locking
          (<code class="literal">MyISAM</code>, <code class="literal">MEMORY</code>,
          <code class="literal">MERGE</code>).
        </p></li><li><p>
          For <code class="literal">MyISAM</code> tables, if you use the
          <code class="literal">QUICK</code> keyword, the storage engine does not
          merge index leaves during delete, which may speed up some
          kinds of delete operations.
        </p></li><li><p>
          The <code class="literal">IGNORE</code> keyword causes MySQL to ignore
          all errors during the process of deleting rows. (Errors
          encountered during the parsing stage are processed in the
          usual manner.) Errors that are ignored due to the use of
          <code class="literal">IGNORE</code> are returned as warnings.
        </p></li></ul></div><p>
      The speed of delete operations may also be affected by factors
      discussed in <a href="optimization.html#delete-speed" title="7.2.21. Speed of DELETE Statements">Section 7.2.21, “Speed of <code class="literal">DELETE</code> Statements”</a>.
    </p><p>
      In <code class="literal">MyISAM</code> tables, deleted rows are maintained
      in a linked list and subsequent <code class="literal">INSERT</code>
      operations reuse old row positions. To reclaim unused space and
      reduce file sizes, use the <code class="literal">OPTIMIZE TABLE</code>
      statement or the <span><strong class="command">myisamchk</strong></span> utility to
      reorganize tables. <code class="literal">OPTIMIZE TABLE</code> is easier to
      use, but <span><strong class="command">myisamchk</strong></span> is faster. See
      <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax">Section 12.5.2.5, “<code class="literal">OPTIMIZE TABLE</code> Syntax”</a>, and <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility">Section 4.6.3, “<span><strong class="command">myisamchk</strong></span> — MyISAM Table-Maintenance Utility”</a>.
    </p><p>
      The <code class="literal">QUICK</code> modifier affects whether index leaves
      are merged for delete operations. <code class="literal">DELETE QUICK</code>
      is most useful for applications where index values for deleted
      rows are replaced by similar index values from rows inserted
      later. In this case, the holes left by deleted values are reused.
    </p><p>
      <code class="literal">DELETE QUICK</code> is not useful when deleted values
      lead to underfilled index blocks spanning a range of index values
      for which new inserts occur again. In this case, use of
      <code class="literal">QUICK</code> can lead to wasted space in the index
      that remains unreclaimed. Here is an example of such a scenario:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Create a table that contains an indexed
          <code class="literal">AUTO_INCREMENT</code> column.
        </p></li><li><p>
          Insert many rows into the table. Each insert results in an
          index value that is added to the high end of the index.
        </p></li><li><p>
          Delete a block of rows at the low end of the column range
          using <code class="literal">DELETE QUICK</code>.
        </p></li></ol></div><p>
      In this scenario, the index blocks associated with the deleted
      index values become underfilled but are not merged with other
      index blocks due to the use of <code class="literal">QUICK</code>. They
      remain underfilled when new inserts occur, because new rows do not
      have index values in the deleted range. Furthermore, they remain
      underfilled even if you later use <code class="literal">DELETE</code>
      without <code class="literal">QUICK</code>, unless some of the deleted index
      values happen to lie in index blocks within or adjacent to the
      underfilled blocks. To reclaim unused index space under these
      circumstances, use <code class="literal">OPTIMIZE TABLE</code>.
    </p><p>
      If you are going to delete many rows from a table, it might be
      faster to use <code class="literal">DELETE QUICK</code> followed by
      <code class="literal">OPTIMIZE TABLE</code>. This rebuilds the index rather
      than performing many index block merge operations.
    </p><p>
      The MySQL-specific <code class="literal">LIMIT
      <em class="replaceable"><code>row_count</code></em></code> option to
      <code class="literal">DELETE</code> tells the server the maximum number of
      rows to be deleted before control is returned to the client. This
      can be used to ensure that a given <code class="literal">DELETE</code>
      statement does not take too much time. You can simply repeat the
      <code class="literal">DELETE</code> statement until the number of affected
      rows is less than the <code class="literal">LIMIT</code> value.
    </p><p>
      If the <code class="literal">DELETE</code> statement includes an
      <code class="literal">ORDER BY</code> clause, rows are deleted in the order
      specified by the clause. This is useful primarily in conjunction
      with <code class="literal">LIMIT</code>. For example, the following
      statement finds rows matching the <code class="literal">WHERE</code> clause,
      sorts them by <code class="literal">timestamp_column</code>, and deletes the
      first (oldest) one:
    </p><pre class="programlisting">DELETE FROM somelog WHERE user = 'jcole'
ORDER BY timestamp_column LIMIT 1;
</pre><p>
      <code class="literal">ORDER BY</code> may also be useful in some cases to
      delete rows in an order required to avoid referential integrity
      violations.
    </p><p>
      You can specify multiple tables in a <code class="literal">DELETE</code>
      statement to delete rows from one or more tables depending on the
      particular condition in the <code class="literal">WHERE</code> clause.
      However, you cannot use <code class="literal">ORDER BY</code> or
      <code class="literal">LIMIT</code> in a multiple-table
      <code class="literal">DELETE</code>. The
      <em class="replaceable"><code>table_references</code></em> clause lists the
      tables involved in the join. Its syntax is described in
      <a href="sql-syntax.html#join" title="12.2.7.1. JOIN Syntax">Section 12.2.7.1, “<code class="literal">JOIN</code> Syntax”</a>.
    </p><p>
      For the first multiple-table syntax, only matching rows from the
      tables listed before the <code class="literal">FROM</code> clause are
      deleted. For the second multiple-table syntax, only matching rows
      from the tables listed in the <code class="literal">FROM</code> clause
      (before the <code class="literal">USING</code> clause) are deleted. The
      effect is that you can delete rows from many tables at the same
      time and have additional tables that are used only for searching:
    </p><pre class="programlisting">DELETE t1, t2 FROM t1 INNER JOIN t2 INNER JOIN t3
WHERE t1.id=t2.id AND t2.id=t3.id;
</pre><p>
      Or:
    </p><pre class="programlisting">DELETE FROM t1, t2 USING t1 INNER JOIN t2 INNER JOIN t3
WHERE t1.id=t2.id AND t2.id=t3.id;
</pre><p>
      These statements use all three tables when searching for rows to
      delete, but delete matching rows only from tables
      <code class="literal">t1</code> and <code class="literal">t2</code>.
    </p><p>
      The preceding examples show inner joins that use the comma
      operator, but multiple-table <code class="literal">DELETE</code> statements
      can use other types of join allowed in <code class="literal">SELECT</code>
      statements, such as <code class="literal">LEFT JOIN</code>. For example, to
      delete rows that exist in <code class="literal">t1</code> that have no match
      in <code class="literal">t2</code>, use a <code class="literal">LEFT JOIN</code>:
    </p><pre class="programlisting">DELETE t1 FROM t1 LEFT JOIN t2 ON t1.id=t2.id WHERE t2.id IS NULL;
</pre><p>
      The syntax allows <code class="literal">.*</code> after each
      <em class="replaceable"><code>tbl_name</code></em> for compatibility with
      <span><strong class="command">Access</strong></span>.
    </p><p>
      If you use a multiple-table <code class="literal">DELETE</code> statement
      involving <code class="literal">InnoDB</code> tables for which there are
      foreign key constraints, the MySQL optimizer might process tables
      in an order that differs from that of their parent/child
      relationship. In this case, the statement fails and rolls back.
      Instead, you should delete from a single table and rely on the
      <code class="literal">ON DELETE</code> capabilities that
      <code class="literal">InnoDB</code> provides to cause the other tables to be
      modified accordingly.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        If you declare an alias for a table, you must use the alias when
        referring to the table:
      </p><pre class="programlisting">DELETE t1 FROM test AS t1, test2 WHERE ...
</pre></div><p>
      Table aliases in a multiple-table <code class="literal">DELETE</code>
      statement should be declared only in the
      <em class="replaceable"><code>table_references</code></em> part. Elsewhere in the
      statement, alias references are allowed but not alias
      declarations.
    </p><p>
      Correct:
    </p><pre class="programlisting">DELETE a1, a2 FROM t1 AS a2 INNER JOIN t2 AS a2
WHERE a1.id=a2.id;

DELETE FROM a1, a2 USING t1 AS a2 INNER JOIN t2 AS a2
WHERE a1.id=a2.id;
</pre><p>
      Incorrect:
    </p><pre class="programlisting">DELETE t1 AS a1, t2 AS a2 FROM t1 INNER JOIN t2
WHERE a1.id=a2.id;

DELETE FROM t1 AS a1, t2 AS a2 USING t1 INNER JOIN t2
WHERE a1.id=a2.id;
</pre><p>
      Declaration of aliases other than in the
      <em class="replaceable"><code>table_references</code></em> part can lead to
      ambiguous statements that have unexpected results such as deleting
      rows from the wrong table. This is such a statement:
    </p><pre class="programlisting">DELETE FROM t1 AS a2 USING t1 AS a1 INNER JOIN t2 AS a2;
</pre><p>
      Before MySQL 5.1.23, alias declarations are allowed in other than
      the <em class="replaceable"><code>table_references</code></em> part, but should
      be avoided for the reason just mentioned.
    </p><p>
      Cross-database deletes are supported for multiple-table deletes,
      but in this case, you must refer to the tables without using
      aliases. For example:
    </p><pre class="programlisting">DELETE test1.tmp1, test2.tmp2 FROM test1.tmp1, test2.tmp2 WHERE ...
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="do"></a>12.2.2. <code class="literal">DO</code> Syntax</h3></div></div></div><a class="indexterm" name="id2200568"></a><pre class="programlisting">DO <em class="replaceable"><code>expr</code></em> [, <em class="replaceable"><code>expr</code></em>] ...
</pre><p>
      <code class="literal">DO</code> executes the expressions but does not return
      any results. In most respects, <code class="literal">DO</code> is shorthand
      for <code class="literal">SELECT <em class="replaceable"><code>expr</code></em>,
      ...</code>, but has the advantage that it is slightly faster
      when you do not care about the result.
    </p><p>
      <code class="literal">DO</code> is useful primarily with functions that have
      side effects, such as
      <a href="functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="handler"></a>12.2.3. <code class="literal">HANDLER</code> Syntax</h3></div></div></div><a class="indexterm" name="id2200671"></a><pre class="programlisting">HANDLER <em class="replaceable"><code>tbl_name</code></em> OPEN [ [AS] <em class="replaceable"><code>alias</code></em>]
HANDLER <em class="replaceable"><code>tbl_name</code></em> READ <em class="replaceable"><code>index_name</code></em> { = | &gt;= | &lt;= | &lt; } (<em class="replaceable"><code>value1</code></em>,<em class="replaceable"><code>value2</code></em>,...)
    [ WHERE <em class="replaceable"><code>where_condition</code></em> ] [LIMIT ... ]
HANDLER <em class="replaceable"><code>tbl_name</code></em> READ <em class="replaceable"><code>index_name</code></em> { FIRST | NEXT | PREV | LAST }
    [ WHERE <em class="replaceable"><code>where_condition</code></em> ] [LIMIT ... ]
HANDLER <em class="replaceable"><code>tbl_name</code></em> READ { FIRST | NEXT }
    [ WHERE <em class="replaceable"><code>where_condition</code></em> ] [LIMIT ... ]
HANDLER <em class="replaceable"><code>tbl_name</code></em> CLOSE
</pre><p>
      The <code class="literal">HANDLER</code> statement provides direct access to
      table storage engine interfaces. It is available for
      <code class="literal">MyISAM</code> and <code class="literal">InnoDB</code> tables.
    </p><p>
      The <code class="literal">HANDLER ... OPEN</code> statement opens a table,
      making it accessible via subsequent <code class="literal">HANDLER ...
      READ</code> statements. This table object is not shared by
      other threads and is not closed until the thread calls
      <code class="literal">HANDLER ... CLOSE</code> or the thread terminates. If
      you open the table using an alias, further references to the open
      table with other <code class="literal">HANDLER</code> statements must use
      the alias rather than the table name.
    </p><p>
      The first <code class="literal">HANDLER ... READ</code> syntax fetches a row
      where the index specified satisfies the given values and the
      <code class="literal">WHERE</code> condition is met. If you have a
      multiple-column index, specify the index column values as a
      comma-separated list. Either specify values for all the columns in
      the index, or specify values for a leftmost prefix of the index
      columns. Suppose that an index <code class="literal">my_idx</code> includes
      three columns named <code class="literal">col_a</code>,
      <code class="literal">col_b</code>, and <code class="literal">col_c</code>, in that
      order. The <code class="literal">HANDLER</code> statement can specify values
      for all three columns in the index, or for the columns in a
      leftmost prefix. For example:
    </p><pre class="programlisting">HANDLER ... READ my_idx = (col_a_val,col_b_val,col_c_val) ...
HANDLER ... READ my_idx = (col_a_val,col_b_val) ...
HANDLER ... READ my_idx = (col_a_val) ...
</pre><p>
      To employ the <code class="literal">HANDLER</code> interface to refer to a
      table's <code class="literal">PRIMARY KEY</code>, use the quoted identifier
      <code class="literal">`PRIMARY`</code>:
    </p><pre class="programlisting">HANDLER <em class="replaceable"><code>tbl_name</code></em> READ `PRIMARY` ...
</pre><p>
      The second <code class="literal">HANDLER ... READ</code> syntax fetches a
      row from the table in index order that matches the
      <code class="literal">WHERE</code> condition.
    </p><p>
      The third <code class="literal">HANDLER ... READ</code> syntax fetches a row
      from the table in natural row order that matches the
      <code class="literal">WHERE</code> condition. It is faster than
      <code class="literal">HANDLER <em class="replaceable"><code>tbl_name</code></em> READ
      <em class="replaceable"><code>index_name</code></em></code> when a full table
      scan is desired. Natural row order is the order in which rows are
      stored in a <code class="literal">MyISAM</code> table data file. This
      statement works for <code class="literal">InnoDB</code> tables as well, but
      there is no such concept because there is no separate data file.
    </p><p>
      Without a <code class="literal">LIMIT</code> clause, all forms of
      <code class="literal">HANDLER ... READ</code> fetch a single row if one is
      available. To return a specific number of rows, include a
      <code class="literal">LIMIT</code> clause. It has the same syntax as for the
      <code class="literal">SELECT</code> statement. See <a href="sql-syntax.html#select" title="12.2.7. SELECT Syntax">Section 12.2.7, “<code class="literal">SELECT</code> Syntax”</a>.
    </p><p>
      <code class="literal">HANDLER ... CLOSE</code> closes a table that was
      opened with <code class="literal">HANDLER ... OPEN</code>.
    </p><p>
      <code class="literal">HANDLER</code> is a somewhat low-level statement. For
      example, it does not provide consistency. That is,
      <code class="literal">HANDLER ... OPEN</code> does <span class="emphasis"><em>not</em></span>
      take a snapshot of the table, and does <span class="emphasis"><em>not</em></span>
      lock the table. This means that after a <code class="literal">HANDLER ...
      OPEN</code> statement is issued, table data can be modified (by
      the current thread or other threads) and these modifications might
      be only partially visible to <code class="literal">HANDLER ... NEXT</code>
      or <code class="literal">HANDLER ... PREV</code> scans.
    </p><p>
      There are several reasons to use the <code class="literal">HANDLER</code>
      interface instead of normal <code class="literal">SELECT</code> statements:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">HANDLER</code> is faster than
          <code class="literal">SELECT</code>:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              A designated storage engine handler object is allocated
              for the <code class="literal">HANDLER ... OPEN</code>. The object is
              reused for subsequent <code class="literal">HANDLER</code>
              statements for that table; it need not be reinitialized
              for each one.
            </p></li><li><p>
              There is less parsing involved.
            </p></li><li><p>
              There is no optimizer or query-checking overhead.
            </p></li><li><p>
              The table does not have to be locked between two handler
              requests.
            </p></li><li><p>
              The handler interface does not have to provide a
              consistent look of the data (for example, dirty reads are
              allowed), so the storage engine can use optimizations that
              <code class="literal">SELECT</code> does not normally allow.
            </p></li></ul></div></li><li><p>
          For applications that use a low-level
          <code class="literal">ISAM</code>-like interface,
          <code class="literal">HANDLER</code> makes it much easier to port them
          to MySQL.
        </p></li><li><p>
          <code class="literal">HANDLER</code> enables you to traverse a database
          in a manner that is difficult (or even impossible) to
          accomplish with <code class="literal">SELECT</code>. The
          <code class="literal">HANDLER</code> interface is a more natural way to
          look at data when working with applications that provide an
          interactive user interface to the database.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="insert"></a>12.2.4. <code class="literal">INSERT</code> Syntax</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#insert-select">12.2.4.1. <code class="literal">INSERT ... SELECT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#insert-delayed">12.2.4.2. <code class="literal">INSERT DELAYED</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#insert-on-duplicate">12.2.4.3. <code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code> Syntax</a></span></dt></dl></div><a class="indexterm" name="id2201207"></a><a class="indexterm" name="id2201216"></a><pre class="programlisting">INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE]
    [INTO] <em class="replaceable"><code>tbl_name</code></em> [(<em class="replaceable"><code>col_name</code></em>,...)]
    {VALUES | VALUE} ({<em class="replaceable"><code>expr</code></em> | DEFAULT},...),(...),...
    [ ON DUPLICATE KEY UPDATE
      <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>
        [, <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>] ... ]
</pre><p>
      Or:
    </p><pre class="programlisting">INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE]
    [INTO] <em class="replaceable"><code>tbl_name</code></em>
    SET <em class="replaceable"><code>col_name</code></em>={<em class="replaceable"><code>expr</code></em> | DEFAULT}, ...
    [ ON DUPLICATE KEY UPDATE
      <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>
        [, <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>] ... ]
</pre><p>
      Or:
    </p><pre class="programlisting">INSERT [LOW_PRIORITY | HIGH_PRIORITY] [IGNORE]
    [INTO] <em class="replaceable"><code>tbl_name</code></em> [(<em class="replaceable"><code>col_name</code></em>,...)]
    SELECT ...
    [ ON DUPLICATE KEY UPDATE
      <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>
        [, <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>] ... ]
</pre><p>
      <code class="literal">INSERT</code> inserts new rows into an existing table.
      The <code class="literal">INSERT ... VALUES</code> and <code class="literal">INSERT ...
      SET</code> forms of the statement insert rows based on
      explicitly specified values. The <code class="literal">INSERT ...
      SELECT</code> form inserts rows selected from another table or
      tables. <code class="literal">INSERT ... SELECT</code> is discussed further
      in <a href="sql-syntax.html#insert-select" title="12.2.4.1. INSERT ... SELECT Syntax">Section 12.2.4.1, “<code class="literal">INSERT ... SELECT</code> Syntax”</a>.
    </p><p>
      You can use <code class="literal">REPLACE</code> instead of
      <code class="literal">INSERT</code> to overwrite old rows.
      <code class="literal">REPLACE</code> is the counterpart to <code class="literal">INSERT
      IGNORE</code> in the treatment of new rows that contain unique
      key values that duplicate old rows: The new rows are used to
      replace the old rows rather than being discarded. See
      <a href="sql-syntax.html#replace" title="12.2.6. REPLACE Syntax">Section 12.2.6, “<code class="literal">REPLACE</code> Syntax”</a>.
    </p><p>
      <em class="replaceable"><code>tbl_name</code></em> is the table into which rows
      should be inserted. The columns for which the statement provides
      values can be specified as follows:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          You can provide a comma-separated list of column names
          following the table name. In this case, a value for each named
          column must be provided by the <code class="literal">VALUES</code> list
          or the <code class="literal">SELECT</code> statement.
        </p></li><li><p>
          If you do not specify a list of column names for
          <code class="literal">INSERT ... VALUES</code> or <code class="literal">INSERT ...
          SELECT</code>, values for every column in the table must be
          provided by the <code class="literal">VALUES</code> list or the
          <code class="literal">SELECT</code> statement. If you do not know the
          order of the columns in the table, use <code class="literal">DESCRIBE
          <em class="replaceable"><code>tbl_name</code></em></code> to find out.
        </p></li><li><p>
          The <code class="literal">SET</code> clause indicates the column names
          explicitly.
        </p></li></ul></div><p>
      Column values can be given in several ways:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a class="indexterm" name="id2201522"></a>

          If you are not running in strict SQL mode, any column not
          explicitly given a value is set to its default (explicit or
          implicit) value. For example, if you specify a column list
          that does not name all the columns in the table, unnamed
          columns are set to their default values. Default value
          assignment is described in
          <a href="data-types.html#data-type-defaults" title="10.1.4. Data Type Default Values">Section 10.1.4, “Data Type Default Values”</a>. See also
          <a href="introduction.html#constraint-invalid-data" title="1.8.6.2. Constraints on Invalid Data">Section 1.8.6.2, “Constraints on Invalid Data”</a>.
        </p><p>
          If you want an <code class="literal">INSERT</code> statement to generate
          an error unless you explicitly specify values for all columns
          that do not have a default value, you should use strict mode.
          See <a href="server-administration.html#server-sql-mode" title="5.1.7. SQL Modes">Section 5.1.7, “SQL Modes”</a>.
        </p></li><li><p>
          Use the keyword <code class="literal">DEFAULT</code> to set a column
          explicitly to its default value. This makes it easier to write
          <code class="literal">INSERT</code> statements that assign values to all
          but a few columns, because it enables you to avoid writing an
          incomplete <code class="literal">VALUES</code> list that does not
          include a value for each column in the table. Otherwise, you
          would have to write out the list of column names corresponding
          to each value in the <code class="literal">VALUES</code> list.
        </p><p>
          You can also use
          <a href="functions.html#function_default"><code class="literal">DEFAULT(<em class="replaceable"><code>col_name</code></em>)</code></a>
          as a more general form that can be used in expressions to
          produce a given column's default value.
        </p></li><li><p>
          If both the column list and the <code class="literal">VALUES</code> list
          are empty, <code class="literal">INSERT</code> creates a row with each
          column set to its default value:
        </p><pre class="programlisting">INSERT INTO <em class="replaceable"><code>tbl_name</code></em> () VALUES();
</pre><p>
          In strict mode, an error occurs if any column doesn't have a
          default value. Otherwise, MySQL uses the implicit default
          value for any column that does not have an explicitly defined
          default.
        </p></li><li><p>
          You can specify an expression <em class="replaceable"><code>expr</code></em>
          to provide a column value. This might involve type conversion
          if the type of the expression does not match the type of the
          column, and conversion of a given value can result in
          different inserted values depending on the data type. For
          example, inserting the string <code class="literal">'1999.0e-2'</code>
          into an <code class="literal">INT</code>, <code class="literal">FLOAT</code>,
          <code class="literal">DECIMAL(10,6)</code>, or <code class="literal">YEAR</code>
          column results in the values <code class="literal">1999</code>,
          <code class="literal">19.9921</code>, <code class="literal">19.992100</code>, and
          <code class="literal">1999</code> being inserted, respectively. The
          reason the value stored in the <code class="literal">INT</code> and
          <code class="literal">YEAR</code> columns is <code class="literal">1999</code> is
          that the string-to-integer conversion looks only at as much of
          the initial part of the string as may be considered a valid
          integer or year. For the floating-point and fixed-point
          columns, the string-to-floating-point conversion considers the
          entire string a valid floating-point value.
        </p><p>
          An expression <em class="replaceable"><code>expr</code></em> can refer to any
          column that was set earlier in a value list. For example, you
          can do this because the value for <code class="literal">col2</code>
          refers to <code class="literal">col1</code>, which has previously been
          assigned:
        </p><pre class="programlisting">INSERT INTO <em class="replaceable"><code>tbl_name</code></em> (col1,col2) VALUES(15,col1*2);
</pre><p>
          But the following is not legal, because the value for
          <code class="literal">col1</code> refers to <code class="literal">col2</code>,
          which is assigned after <code class="literal">col1</code>:
        </p><pre class="programlisting">INSERT INTO <em class="replaceable"><code>tbl_name</code></em> (col1,col2) VALUES(col2*2,15);
</pre><p>
          One exception involves columns that contain
          <code class="literal">AUTO_INCREMENT</code> values. Because the
          <code class="literal">AUTO_INCREMENT</code> value is generated after
          other value assignments, any reference to an
          <code class="literal">AUTO_INCREMENT</code> column in the assignment
          returns a <code class="literal">0</code>.
        </p></li></ul></div><p>
      <code class="literal">INSERT</code> statements that use
      <code class="literal">VALUES</code> syntax can insert multiple rows. To do
      this, include multiple lists of column values, each enclosed
      within parentheses and separated by commas. Example:
    </p><pre class="programlisting">INSERT INTO <em class="replaceable"><code>tbl_name</code></em> (a,b,c) VALUES(1,2,3),(4,5,6),(7,8,9);
</pre><p>
      The values list for each row must be enclosed within parentheses.
      The following statement is illegal because the number of values in
      the list does not match the number of column names:
    </p><pre class="programlisting">INSERT INTO <em class="replaceable"><code>tbl_name</code></em> (a,b,c) VALUES(1,2,3,4,5,6,7,8,9);
</pre><p>
      <code class="literal">VALUE</code> is a synonym for
      <code class="literal">VALUES</code> in this context. Neither implies
      anything about the number of values lists, and either may be used
      whether there is a single values list or multiple lists.
    </p><p>
      The affected-rows value for an <code class="literal">INSERT</code> can be
      obtained using the <a href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a>
      function (see <a href="functions.html#information-functions" title="11.11.3. Information Functions">Section 11.11.3, “Information Functions”</a>), or the
      <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> C API
      function (see <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()">Section 29.2.3.1, “<code class="literal">mysql_affected_rows()</code>”</a>).
    </p><p>
      If you use an <code class="literal">INSERT ... VALUES</code> statement with
      multiple value lists or <code class="literal">INSERT ... SELECT</code>, the
      statement returns an information string in this format:
    </p><pre class="programlisting">Records: 100 Duplicates: 0 Warnings: 0
</pre><p>
      <code class="literal">Records</code> indicates the number of rows processed
      by the statement. (This is not necessarily the number of rows
      actually inserted because <code class="literal">Duplicates</code> can be
      non-zero.) <code class="literal">Duplicates</code> indicates the number of
      rows that could not be inserted because they would duplicate some
      existing unique index value. <code class="literal">Warnings</code> indicates
      the number of attempts to insert column values that were
      problematic in some way. Warnings can occur under any of the
      following conditions:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Inserting <code class="literal">NULL</code> into a column that has been
          declared <code class="literal">NOT NULL</code>. For multiple-row
          <code class="literal">INSERT</code> statements or <code class="literal">INSERT INTO
          ... SELECT</code> statements, the column is set to the
          implicit default value for the column data type. This is
          <code class="literal">0</code> for numeric types, the empty string
          (<code class="literal">''</code>) for string types, and the
          “<span class="quote">zero</span>” value for date and time types.
          <code class="literal">INSERT INTO ... SELECT</code> statements are
          handled the same way as multiple-row inserts because the
          server does not examine the result set from the
          <code class="literal">SELECT</code> to see whether it returns a single
          row. (For a single-row <code class="literal">INSERT</code>, no warning
          occurs when <code class="literal">NULL</code> is inserted into a
          <code class="literal">NOT NULL</code> column. Instead, the statement
          fails with an error.)
        </p></li><li><p>
          Setting a numeric column to a value that lies outside the
          column's range. The value is clipped to the closest endpoint
          of the range.
        </p></li><li><p>
          Assigning a value such as <code class="literal">'10.34 a'</code> to a
          numeric column. The trailing non-numeric text is stripped off
          and the remaining numeric part is inserted. If the string
          value has no leading numeric part, the column is set to
          <code class="literal">0</code>.
        </p></li><li><p>
          Inserting a string into a string column
          (<code class="literal">CHAR</code>, <code class="literal">VARCHAR</code>,
          <code class="literal">TEXT</code>, or <code class="literal">BLOB</code>) that
          exceeds the column's maximum length. The value is truncated to
          the column's maximum length.
        </p></li><li><p>
          Inserting a value into a date or time column that is illegal
          for the data type. The column is set to the appropriate zero
          value for the type.
        </p></li></ul></div><a class="indexterm" name="id2202125"></a><p>
      If you are using the C API, the information string can be obtained
      by invoking the <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()"><code class="literal">mysql_info()</code></a>
      function. See <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()">Section 29.2.3.35, “<code class="literal">mysql_info()</code>”</a>.
    </p><a class="indexterm" name="id2202150"></a><a class="indexterm" name="id2202159"></a><p>
      If <code class="literal">INSERT</code> inserts a row into a table that has
      an <code class="literal">AUTO_INCREMENT</code> column, you can find the
      value used for that column by using the SQL
      <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> function. From
      within the C API, use the
      <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> function.
      However, you should note that the two functions do not always
      behave identically. The behavior of <code class="literal">INSERT</code>
      statements with respect to <code class="literal">AUTO_INCREMENT</code>
      columns is discussed further in
      <a href="functions.html#information-functions" title="11.11.3. Information Functions">Section 11.11.3, “Information Functions”</a>, and
      <a href="apis.html#mysql-insert-id" title="29.2.3.37. mysql_insert_id()">Section 29.2.3.37, “<code class="literal">mysql_insert_id()</code>”</a>.
    </p><p>
      The <code class="literal">INSERT</code> statement supports the following
      modifiers:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you use the <code class="literal">DELAYED</code> keyword, the server
          puts the row or rows to be inserted into a buffer, and the
          client issuing the <code class="literal">INSERT DELAYED</code> statement
          can then continue immediately. If the table is in use, the
          server holds the rows. When the table is free, the server
          begins inserting rows, checking periodically to see whether
          there are any new read requests for the table. If there are,
          the delayed row queue is suspended until the table becomes
          free again. See <a href="sql-syntax.html#insert-delayed" title="12.2.4.2. INSERT DELAYED Syntax">Section 12.2.4.2, “<code class="literal">INSERT DELAYED</code> Syntax”</a>.
        </p><a class="indexterm" name="id2202263"></a><p>
          <code class="literal">DELAYED</code> is ignored with <code class="literal">INSERT ...
          SELECT</code> or <code class="literal">INSERT ... ON DUPLICATE KEY
          UPDATE</code>.
        </p><a class="indexterm" name="id2202297"></a><a class="indexterm" name="id2202309"></a><p>
          Beginning with MySQL 5.1.19, <code class="literal">DELAYED</code> is
          also disregarded for an <code class="literal">INSERT</code> that uses
          functions accessing tables or triggers, or that is called from
          a function or a trigger.
        </p></li><li><p>
          If you use the <code class="literal">LOW_PRIORITY</code> keyword,
          execution of the <code class="literal">INSERT</code> is delayed until no
          other clients are reading from the table. This includes other
          clients that began reading while existing clients are reading,
          and while the <code class="literal">INSERT LOW_PRIORITY</code> statement
          is waiting. It is possible, therefore, for a client that
          issues an <code class="literal">INSERT LOW_PRIORITY</code> statement to
          wait for a very long time (or even forever) in a read-heavy
          environment. (This is in contrast to <code class="literal">INSERT
          DELAYED</code>, which lets the client continue at once.
          Note that <code class="literal">LOW_PRIORITY</code> should normally not
          be used with <code class="literal">MyISAM</code> tables because doing so
          disables concurrent inserts. See
          <a href="optimization.html#concurrent-inserts" title="7.3.3. Concurrent Inserts">Section 7.3.3, “Concurrent Inserts”</a>.
        </p><p>
          If you specify <code class="literal">HIGH_PRIORITY</code>, it overrides
          the effect of the <code class="option">--low-priority-updates</code>
          option if the server was started with that option. It also
          causes concurrent inserts not to be used. See
          <a href="optimization.html#concurrent-inserts" title="7.3.3. Concurrent Inserts">Section 7.3.3, “Concurrent Inserts”</a>.
        </p><p>
          <code class="literal">LOW_PRIORITY</code> and
          <code class="literal">HIGH_PRIORITY</code> affect only storage engines
          that use only table-level locking (<code class="literal">MyISAM</code>,
          <code class="literal">MEMORY</code>, <code class="literal">MERGE</code>).
        </p></li><li><p>
          If you use the <code class="literal">IGNORE</code> keyword, errors that
          occur while executing the <code class="literal">INSERT</code> statement
          are treated as warnings instead. For example, without
          <code class="literal">IGNORE</code>, a row that duplicates an existing
          <code class="literal">UNIQUE</code> index or <code class="literal">PRIMARY
          KEY</code> value in the table causes a duplicate-key error
          and the statement is aborted. With <code class="literal">IGNORE</code>,
          the row still is not inserted, but no error is issued.
        </p><p>
          <a class="indexterm" name="id2202496"></a>

          <code class="literal">IGNORE</code> has a similar effect on inserts into
          partitioned tables where no partition matching a given value
          is found. Without <code class="literal">IGNORE</code>, such
          <code class="literal">INSERT</code> statements are aborted with an
          error; however, when <code class="literal">INSERT IGNORE</code> is used,
          the insert operation fails silently for the row containing the
          unmatched value, but any rows that are matched are inserted.
          For an example, see <a href="partitioning.html#partitioning-list" title="21.2.2. LIST Partitioning">Section 21.2.2, “<code class="literal">LIST</code> Partitioning”</a>.
        </p><p>
          Data conversions that would trigger errors abort the statement
          if <code class="literal">IGNORE</code> is not specified. With
          <code class="literal">IGNORE</code>, invalid values are adjusted to the
          closest values and inserted; warnings are produced but the
          statement does not abort. You can determine with the
          <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> C API function
          how many rows were actually inserted into the table.
        </p></li><li><p>
          If you specify <code class="literal">ON DUPLICATE KEY UPDATE</code>, and
          a row is inserted that would cause a duplicate value in a
          <code class="literal">UNIQUE</code> index or <code class="literal">PRIMARY
          KEY</code>, an <code class="literal">UPDATE</code> of the old row is
          performed. The affected-rows value per row is 1 if the row is
          inserted as a new row and 2 if an existing row is updated. See
          <a href="sql-syntax.html#insert-on-duplicate" title="12.2.4.3. INSERT ... ON DUPLICATE KEY UPDATE Syntax">Section 12.2.4.3, “<code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code> Syntax”</a>.
        </p></li></ul></div><p>
      Inserting into a table requires the <code class="literal">INSERT</code>
      privilege for the table. If the <code class="literal">ON DUPLICATE KEY
      UPDATE</code> clause is used and a duplicate key causes an
      <code class="literal">UPDATE</code> to be performed instead, the statement
      requires the <code class="literal">UPDATE</code> privilege for the columns
      to be updated. For columns that are read but not modified you need
      only the <code class="literal">SELECT</code> privilege (such as for a column
      referenced only on the right hand side of an
      <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>
      assignment in an <code class="literal">ON DUPLICATE KEY UPDATE</code>
      clause).
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="insert-select"></a>12.2.4.1. <code class="literal">INSERT ... SELECT</code> Syntax</h4></div></div></div><a class="indexterm" name="id2202668"></a><pre class="programlisting">INSERT [LOW_PRIORITY | HIGH_PRIORITY] [IGNORE]
    [INTO] <em class="replaceable"><code>tbl_name</code></em> [(<em class="replaceable"><code>col_name</code></em>,...)]
    SELECT ...
    [ ON DUPLICATE KEY UPDATE <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>, ... ]
</pre><p>
        With <code class="literal">INSERT ... SELECT</code>, you can quickly
        insert many rows into a table from one or many tables. For
        example:
      </p><pre class="programlisting">INSERT INTO tbl_temp2 (fld_id)
  SELECT tbl_temp1.fld_order_id
  FROM tbl_temp1 WHERE tbl_temp1.fld_order_id &gt; 100;
</pre><p>
        The following conditions hold for a <code class="literal">INSERT ...
        SELECT</code> statements:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Specify <code class="literal">IGNORE</code> to ignore rows that would
            cause duplicate-key violations.
          </p></li><li><p>
            <code class="literal">DELAYED</code> is ignored with <code class="literal">INSERT
            ... SELECT</code>.
          </p></li><li><p>
            The target table of the <code class="literal">INSERT</code> statement
            may appear in the <code class="literal">FROM</code> clause of the
            <code class="literal">SELECT</code> part of the query. (This was not
            possible in some older versions of MySQL.) In this case,
            MySQL creates a temporary table to hold the rows from the
            <code class="literal">SELECT</code> and then inserts those rows into
            the target table. However, it remains true that you cannot
            use <code class="literal">INSERT INTO t ... SELECT ... FROM t</code>
            when <code class="literal">t</code> is a <code class="literal">TEMPORARY</code>
            table, because <code class="literal">TEMPORARY</code> tables cannot be
            referred to twice in the same statement (see
            <a href="error-handling.html#temporary-table-problems" title="B.1.7.3. TEMPORARY TABLE Problems">Section B.1.7.3, “<code class="literal">TEMPORARY TABLE</code> Problems”</a>).
          </p></li><li><p>
            <code class="literal">AUTO_INCREMENT</code> columns work as usual.
          </p></li><li><p>
            To ensure that the binary log can be used to re-create the
            original tables, MySQL does not allow concurrent inserts for
            <code class="literal">INSERT ... SELECT</code> statements.
          </p></li><li><p>
            Currently, you cannot insert into a table and select from
            the same table in a subquery.
          </p></li><li><p>
            To avoid ambigious column reference problems when the
            <code class="literal">SELECT</code> and the <code class="literal">INSERT</code>
            refer to the same table, provide a unique alias for each
            table used in the <code class="literal">SELECT</code> part, and
            qualify column names in that part with the appropriate
            alias.
          </p></li></ul></div><p>
        In the values part of <code class="literal">ON DUPLICATE KEY
        UPDATE</code>, you can refer to columns in other tables, as
        long as you do not use <code class="literal">GROUP BY</code> in the
        <code class="literal">SELECT</code> part. One side effect is that you must
        qualify non-unique column names in the values part.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="insert-delayed"></a>12.2.4.2. <code class="literal">INSERT DELAYED</code> Syntax</h4></div></div></div><a class="indexterm" name="id2202946"></a><a class="indexterm" name="id2202955"></a><a class="indexterm" name="id2202964"></a><pre class="programlisting">INSERT DELAYED ...
</pre><p>
        The <code class="literal">DELAYED</code> option for the
        <code class="literal">INSERT</code> statement is a MySQL extension to
        standard SQL that is very useful if you have clients that cannot
        or need not wait for the <code class="literal">INSERT</code> to complete.
        This is a common situation when you use MySQL for logging and
        you also periodically run <code class="literal">SELECT</code> and
        <code class="literal">UPDATE</code> statements that take a long time to
        complete.
      </p><p>
        When a client uses <code class="literal">INSERT DELAYED</code>, it gets an
        okay from the server at once, and the row is queued to be
        inserted when the table is not in use by any other thread.
      </p><p>
        Another major benefit of using <code class="literal">INSERT DELAYED</code>
        is that inserts from many clients are bundled together and
        written in one block. This is much faster than performing many
        separate inserts.
      </p><p>
        Note that <code class="literal">INSERT DELAYED</code> is slower than a
        normal <code class="literal">INSERT</code> if the table is not otherwise
        in use. There is also the additional overhead for the server to
        handle a separate thread for each table for which there are
        delayed rows. This means that you should use <code class="literal">INSERT
        DELAYED</code> only when you are really sure that you need
        it.
      </p><p>
        The queued rows are held only in memory until they are inserted
        into the table. This means that if you terminate
        <span><strong class="command">mysqld</strong></span> forcibly (for example, with
        <code class="literal">kill -9</code>) or if <span><strong class="command">mysqld</strong></span> dies
        unexpectedly, <span class="emphasis"><em>any queued rows that have not been
        written to disk are lost</em></span>.
      </p><p>
        There are some constraints on the use of
        <code class="literal">DELAYED</code>:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">INSERT DELAYED</code> works only with
            <code class="literal">MyISAM</code>, <code class="literal">MEMORY</code>,
            <code class="literal">ARCHIVE</code>, and (as of MySQL 5.1.19)
            <code class="literal">BLACKHOLE</code> tables. See
            <a href="storage-engines.html#myisam-storage-engine" title="13.4. The MyISAM Storage Engine">Section 13.4, “The <code class="literal">MyISAM</code> Storage Engine”</a>,
            <a href="storage-engines.html#memory-storage-engine" title="13.7. The MEMORY (HEAP) Storage Engine">Section 13.7, “The <code class="literal">MEMORY</code> (<code class="literal">HEAP</code>) Storage Engine”</a>,
            <a href="storage-engines.html#archive-storage-engine" title="13.10. The ARCHIVE Storage Engine">Section 13.10, “The <code class="literal">ARCHIVE</code> Storage Engine”</a>, and
            <a href="storage-engines.html#blackhole-storage-engine" title="13.12. The BLACKHOLE Storage Engine">Section 13.12, “The <code class="literal">BLACKHOLE</code> Storage Engine”</a>.
          </p></li><li><p>
            For <code class="literal">MyISAM</code> tables, if there are no free
            blocks in the middle of the data file, concurrent
            <code class="literal">SELECT</code> and <code class="literal">INSERT</code>
            statements are supported. Under these circumstances, you
            very seldom need to use <code class="literal">INSERT DELAYED</code>
            with <code class="literal">MyISAM</code>.
          </p></li><li><p>
            <code class="literal">INSERT DELAYED</code> should be used only for
            <code class="literal">INSERT</code> statements that specify value
            lists. The server ignores <code class="literal">DELAYED</code> for
            <code class="literal">INSERT ... SELECT</code> or <code class="literal">INSERT ...
            ON DUPLICATE KEY UPDATE</code> statements.
          </p></li><li><p>
            Because the <code class="literal">INSERT DELAYED</code> statement
            returns immediately, before the rows are inserted, you
            cannot use <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>
            to get the <code class="literal">AUTO_INCREMENT</code> value that the
            statement might generate.
          </p></li><li><p>
            <code class="literal">DELAYED</code> rows are not visible to
            <code class="literal">SELECT</code> statements until they actually
            have been inserted.
          </p></li><li><p>
            <code class="literal">DELAYED</code> is ignored on slave replication
            servers, so that <code class="literal">INSERT DELAYED</code> is
            treated as a normal <code class="literal">INSERT</code> on slaves.
            This is because <code class="literal">DELAYED</code> could cause the
            slave to have different data than the master.
          </p></li><li><p>
            Pending <code class="literal">INSERT DELAYED</code> statements are
            lost if a table is write locked and <code class="literal">ALTER
            TABLE</code> is used to modify the table structure.
          </p></li><li><p>
            <code class="literal">INSERT DELAYED</code> is not supported for
            views.
          </p></li><li><p>
            <code class="literal">INSERT DELAYED</code> is not supported for
            partitioned tables.
          </p></li></ul></div><p>
        The following describes in detail what happens when you use the
        <code class="literal">DELAYED</code> option to <code class="literal">INSERT</code>
        or <code class="literal">REPLACE</code>. In this description, the
        “<span class="quote">thread</span>” is the thread that received an
        <code class="literal">INSERT DELAYED</code> statement and
        “<span class="quote">handler</span>” is the thread that handles all
        <code class="literal">INSERT DELAYED</code> statements for a particular
        table.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            When a thread executes a <code class="literal">DELAYED</code>
            statement for a table, a handler thread is created to
            process all <code class="literal">DELAYED</code> statements for the
            table, if no such handler already exists.
          </p></li><li><p>
            The thread checks whether the handler has previously
            acquired a <code class="literal">DELAYED</code> lock; if not, it tells
            the handler thread to do so. The <code class="literal">DELAYED</code>
            lock can be obtained even if other threads have a
            <code class="literal">READ</code> or <code class="literal">WRITE</code> lock on
            the table. However, the handler waits for all <code class="literal">ALTER
            TABLE</code> locks or <code class="literal">FLUSH TABLES</code>
            statements to finish, to ensure that the table structure is
            up to date.
          </p></li><li><p>
            The thread executes the <code class="literal">INSERT</code> statement,
            but instead of writing the row to the table, it puts a copy
            of the final row into a queue that is managed by the handler
            thread. Any syntax errors are noticed by the thread and
            reported to the client program.
          </p></li><li><p>
            The client cannot obtain from the server the number of
            duplicate rows or the <code class="literal">AUTO_INCREMENT</code>
            value for the resulting row, because the
            <code class="literal">INSERT</code> returns before the insert
            operation has been completed. (If you use the C API, the
            <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> function does
            not return anything meaningful, for the same reason.)
          </p></li><li><p>
            The binary log is updated by the handler thread when the row
            is inserted into the table. In case of multiple-row inserts,
            the binary log is updated when the first row is inserted.
          </p></li><li><p>
            <a class="indexterm" name="id2203545"></a>

            Each time that <code class="literal">delayed_insert_limit</code> rows
            are written, the handler checks whether any
            <code class="literal">SELECT</code> statements are still pending. If
            so, it allows these to execute before continuing.
          </p></li><li><p>
            <a class="indexterm" name="id2203574"></a>

            When the handler has no more rows in its queue, the table is
            unlocked. If no new <code class="literal">INSERT DELAYED</code>
            statements are received within
            <code class="literal">delayed_insert_timeout</code> seconds, the
            handler terminates.
          </p></li><li><p>
            If more than <code class="literal">delayed_queue_size</code> rows are
            pending in a specific handler queue, the thread requesting
            <code class="literal">INSERT DELAYED</code> waits until there is room
            in the queue. This is done to ensure that
            <span><strong class="command">mysqld</strong></span> does not use all memory for the
            delayed memory queue.
          </p></li><li><p>
            The handler thread shows up in the MySQL process list with
            <code class="literal">delayed_insert</code> in the
            <code class="literal">Command</code> column. It is killed if you
            execute a <code class="literal">FLUSH TABLES</code> statement or kill
            it with <code class="literal">KILL
            <em class="replaceable"><code>thread_id</code></em></code>. However,
            before exiting, it first stores all queued rows into the
            table. During this time it does not accept any new
            <code class="literal">INSERT</code> statements from other threads. If
            you execute an <code class="literal">INSERT DELAYED</code> statement
            after this, a new handler thread is created.
          </p><p>
            Note that this means that <code class="literal">INSERT DELAYED</code>
            statements have higher priority than normal
            <code class="literal">INSERT</code> statements if there is an
            <code class="literal">INSERT DELAYED</code> handler running. Other
            update statements have to wait until the <code class="literal">INSERT
            DELAYED</code> queue is empty, someone terminates the
            handler thread (with <code class="literal">KILL
            <em class="replaceable"><code>thread_id</code></em></code>), or someone
            executes a <code class="literal">FLUSH TABLES</code>.
          </p></li><li><p>
            The following status variables provide information about
            <code class="literal">INSERT DELAYED</code> statements:
          </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Status Variable</strong></span></td><td><span class="bold"><strong>Meaning</strong></span></td></tr><tr><td><code class="literal">Delayed_insert_threads</code></td><td>Number of handler threads</td></tr><tr><td><code class="literal">Delayed_writes</code></td><td>Number of rows written with <code class="literal">INSERT DELAYED</code></td></tr><tr><td><code class="literal">Not_flushed_delayed_rows</code></td><td>Number of rows waiting to be written</td></tr></tbody></table></div><p>
            You can view these variables by issuing a <code class="literal">SHOW
            STATUS</code> statement or by executing a
            <span><strong class="command">mysqladmin extended-status</strong></span> command.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="insert-on-duplicate"></a>12.2.4.3. <code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code> Syntax</h4></div></div></div><p>
        If you specify <code class="literal">ON DUPLICATE KEY UPDATE</code>, and a
        row is inserted that would cause a duplicate value in a
        <code class="literal">UNIQUE</code> index or <code class="literal">PRIMARY
        KEY</code>, an <code class="literal">UPDATE</code> of the old row is
        performed. For example, if column <code class="literal">a</code> is
        declared as <code class="literal">UNIQUE</code> and contains the value
        <code class="literal">1</code>, the following two statements have
        identical effect:
      </p><pre class="programlisting">INSERT INTO table (a,b,c) VALUES (1,2,3)
  ON DUPLICATE KEY UPDATE c=c+1;

UPDATE table SET c=c+1 WHERE a=1;
</pre><p>
        With <code class="literal">ON DUPLICATE KEY UPDATE</code>, the
        affected-rows value per row is 1 if the row is inserted as a new
        row and 2 if an existing row is updated.
      </p><p>
        If column <code class="literal">b</code> is also unique, the
        <code class="literal">INSERT</code> is equivalent to this
        <code class="literal">UPDATE</code> statement instead:
      </p><pre class="programlisting">UPDATE table SET c=c+1 WHERE a=1 OR b=2 LIMIT 1;
</pre><p>
        If <code class="literal">a=1 OR b=2</code> matches several rows, only
        <span class="emphasis"><em>one</em></span> row is updated. In general, you should
        try to avoid using an <code class="literal">ON DUPLICATE KEY</code> clause
        on tables with multiple unique indexes.
      </p><p>
        The <code class="literal">ON DUPLICATE KEY UPDATE</code> clause can
        contain multiple column assignments, separated by commas.
      </p><p>
        You can use the
        <a href="functions.html#function_values"><code class="literal">VALUES(<em class="replaceable"><code>col_name</code></em>)</code></a>
        function in the <code class="literal">UPDATE</code> clause to refer to
        column values from the <code class="literal">INSERT</code> portion of the
        <code class="literal">INSERT ... UPDATE</code> statement. In other words,
        <a href="functions.html#function_values"><code class="literal">VALUES(<em class="replaceable"><code>col_name</code></em>)</code></a>
        in the <code class="literal">UPDATE</code> clause refers to the value of
        <em class="replaceable"><code>col_name</code></em> that would be inserted, had
        no duplicate-key conflict occurred. This function is especially
        useful in multiple-row inserts. The
        <a href="functions.html#function_values"><code class="literal">VALUES()</code></a> function is meaningful
        only in <code class="literal">INSERT ... UPDATE</code> statements and
        returns <code class="literal">NULL</code> otherwise. Example:
      </p><pre class="programlisting">INSERT INTO table (a,b,c) VALUES (1,2,3),(4,5,6)
  ON DUPLICATE KEY UPDATE c=VALUES(a)+VALUES(b);
</pre><p>
        That statement is identical to the following two statements:
      </p><pre class="programlisting">INSERT INTO table (a,b,c) VALUES (1,2,3)
  ON DUPLICATE KEY UPDATE c=3;
INSERT INTO table (a,b,c) VALUES (4,5,6)
  ON DUPLICATE KEY UPDATE c=9;
</pre><p>
        If a table contains an <code class="literal">AUTO_INCREMENT</code> column
        and <code class="literal">INSERT ... UPDATE</code> inserts a row, the
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> function
        returns the <code class="literal">AUTO_INCREMENT</code> value. If the
        statement updates a row instead,
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> is not
        meaningful. However, you can work around this by using
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>.
        Suppose that <code class="literal">id</code> is the
        <code class="literal">AUTO_INCREMENT</code> column. To make
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> meaningful for
        updates, insert rows as follows:
      </p><pre class="programlisting">INSERT INTO table (a,b,c) VALUES (1,2,3)
  ON DUPLICATE KEY UPDATE id=LAST_INSERT_ID(id), c=3;
</pre><p>
        The <code class="literal">DELAYED</code> option is ignored when you use
        <code class="literal">ON DUPLICATE KEY UPDATE</code>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="load-data"></a>12.2.5. <code class="literal">LOAD DATA INFILE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2204161"></a><pre class="programlisting">LOAD DATA [LOW_PRIORITY | CONCURRENT] [LOCAL] INFILE '<em class="replaceable"><code>file_name</code></em>'
    [REPLACE | IGNORE]
    INTO TABLE <em class="replaceable"><code>tbl_name</code></em>
    [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
    [{FIELDS | COLUMNS}
        [TERMINATED BY '<em class="replaceable"><code>string</code></em>']
        [[OPTIONALLY] ENCLOSED BY '<em class="replaceable"><code>char</code></em>']
        [ESCAPED BY '<em class="replaceable"><code>char</code></em>']
    ]
    [LINES
        [STARTING BY '<em class="replaceable"><code>string</code></em>']
        [TERMINATED BY '<em class="replaceable"><code>string</code></em>']
    ]
    [IGNORE <em class="replaceable"><code>number</code></em> LINES]
    [(<em class="replaceable"><code>col_name_or_user_var</code></em>,...)]
    [SET <em class="replaceable"><code>col_name</code></em> = <em class="replaceable"><code>expr</code></em>,...]
</pre><p>
      The <code class="literal">LOAD DATA INFILE</code> statement reads rows from
      a text file into a table at a very high speed. The filename must
      be given as a literal string.
    </p><p>
      <code class="literal">LOAD DATA INFILE</code> is the complement of
      <code class="literal">SELECT ... INTO OUTFILE</code>. (See
      <a href="sql-syntax.html#select" title="12.2.7. SELECT Syntax">Section 12.2.7, “<code class="literal">SELECT</code> Syntax”</a>.) To write data from a table to a file,
      use <code class="literal">SELECT ... INTO OUTFILE</code>. To read the file
      back into a table, use <code class="literal">LOAD DATA INFILE</code>. The
      syntax of the <code class="literal">FIELDS</code> and
      <code class="literal">LINES</code> clauses is the same for both statements.
      Both clauses are optional, but <code class="literal">FIELDS</code> must
      precede <code class="literal">LINES</code> if both are specified.
    </p><p>
      For more information about the efficiency of
      <code class="literal">INSERT</code> versus <code class="literal">LOAD DATA
      INFILE</code> and speeding up <code class="literal">LOAD DATA
      INFILE</code>, see <a href="optimization.html#insert-speed" title="7.2.19. Speed of INSERT Statements">Section 7.2.19, “Speed of <code class="literal">INSERT</code> Statements”</a>.
    </p><p>
      The character set indicated by the
      <code class="literal">character_set_database</code> system variable is used
      to interpret the information in the file. <code class="literal">SET
      NAMES</code> and the setting of
      <code class="literal">character_set_client</code> do not affect
      interpretation of input. If the contents of the input file use a
      character set that differs from the default, it is usually
      preferable to specify the character set of the file by using the
      <code class="literal">CHARACTER SET</code> clause, which is available as of
      MySQL 5.1.17.
    </p><p>
      <code class="literal">LOAD DATA INFILE</code> interprets all fields in the
      file as having the same character set, regardless of the data
      types of the columns into which field values are loaded. For
      proper interpretation of file contents, you must ensure that it
      was written with the correct character set. For example, if you
      write a data file with <span><strong class="command">mysqldump -T</strong></span> or by
      issuing a <code class="literal">SELECT ... INTO OUTFILE</code> statement in
      <span><strong class="command">mysql</strong></span>, be sure to use a
      <code class="option">--default-character-set</code> option with
      <span><strong class="command">mysqldump</strong></span> or <span><strong class="command">mysql</strong></span> so that
      output is written in the character set to be used when the file is
      loaded with <code class="literal">LOAD DATA INFILE</code>.
    </p><p>
      Note that it is currently not possible to load data files that use
      the <code class="literal">ucs2</code> character set.
    </p><p>
      As of MySQL 5.1.6, the <code class="literal">character_set_filesystem</code>
      system variable controls the interpretation of the filename.
    </p><a class="indexterm" name="id2204441"></a><p>
      You can also load data files by using the
      <span><strong class="command">mysqlimport</strong></span> utility; it operates by sending a
      <code class="literal">LOAD DATA INFILE</code> statement to the server. The
      <code class="option">--local</code> option causes
      <span><strong class="command">mysqlimport</strong></span> to read data files from the client
      host. You can specify the <code class="option">--compress</code> option to
      get better performance over slow networks if the client and server
      support the compressed protocol. See
      <a href="programs.html#mysqlimport" title="4.5.5. mysqlimport — A Data Import Program">Section 4.5.5, “<span><strong class="command">mysqlimport</strong></span> — A Data Import Program”</a>.
    </p><p>
      If you use <code class="literal">LOW_PRIORITY</code>, execution of the
      <code class="literal">LOAD DATA</code> statement is delayed until no other
      clients are reading from the table. This affects only storage
      engines that use only table-level locking
      (<code class="literal">MyISAM</code>, <code class="literal">MEMORY</code>,
      <code class="literal">MERGE</code>).
    </p><p>
      If you specify <code class="literal">CONCURRENT</code> with a
      <code class="literal">MyISAM</code> table that satisfies the condition for
      concurrent inserts (that is, it contains no free blocks in the
      middle), other threads can retrieve data from the table while
      <code class="literal">LOAD DATA</code> is executing. Using this option
      affects the performance of <code class="literal">LOAD DATA</code> a bit,
      even if no other thread is using the table at the same time.
    </p><p>
      <code class="literal">CONCURRENT</code> is not replicated when using
      statement-based replication; however, it is replicated when using
      row-based replication. See
      <a href="replication.html#replication-features-load-data" title="19.3.1.10. Replication and LOAD DATA">Section 19.3.1.10, “Replication and <code class="literal">LOAD DATA</code>”</a>, for more
      information.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Prior to MySQL 5.1.23, <code class="literal">LOAD DATA</code> performed
        very poorly when importing into partitioned tables. The
        statement now uses buffering to improve performance; however,
        the buffer uses 130 KB memory per partition to achieve this.
        (<a href="http://bugs.mysql.com/26527" target="_top">Bug#26527</a>)
      </p></div><p>
      The <code class="literal">LOCAL</code> keyword, if specified, is interpreted
      with respect to the client end of the connection:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If <code class="literal">LOCAL</code> is specified, the file is read by
          the client program on the client host and sent to the server.
          The file can be given as a full pathname to specify its exact
          location. If given as a relative pathname, the name is
          interpreted relative to the directory in which the client
          program was started.
        </p></li><li><p>
          If <code class="literal">LOCAL</code> is not specified, the file must be
          located on the server host and is read directly by the server.
          The server uses the following rules to locate the file:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              If the filename is an absolute pathname, the server uses
              it as given.
            </p></li><li><p>
              If the filename is a relative pathname with one or more
              leading components, the server searches for the file
              relative to the server's data directory.
            </p></li><li><p>
              If a filename with no leading components is given, the
              server looks for the file in the database directory of the
              default database.
            </p></li></ul></div></li></ul></div><p>
      Note that, in the non-<code class="literal">LOCAL</code> case, these rules
      mean that a file named as <code class="filename">./myfile.txt</code> is
      read from the server's data directory, whereas the file named as
      <code class="filename">myfile.txt</code> is read from the database
      directory of the default database. For example, if
      <code class="literal">db1</code> is the default database, the following
      <code class="literal">LOAD DATA</code> statement reads the file
      <code class="filename">data.txt</code> from the database directory for
      <code class="literal">db1</code>, even though the statement explicitly loads
      the file into a table in the <code class="literal">db2</code> database:
    </p><pre class="programlisting">LOAD DATA INFILE 'data.txt' INTO TABLE db2.my_table;
</pre><p>
      Windows pathnames are specified using forward slashes rather than
      backslashes. If you do use backslashes, you must double them.
    </p><p>
      For security reasons, when reading text files located on the
      server, the files must either reside in the database directory or
      be readable by all. Also, to use <code class="literal">LOAD DATA
      INFILE</code> on server files, you must have the
      <code class="literal">FILE</code> privilege. See
      <a href="server-administration.html#privileges-provided" title="5.4.3. Privileges Provided by MySQL">Section 5.4.3, “Privileges Provided by MySQL”</a>.
    </p><p>
      Using <code class="literal">LOCAL</code> is a bit slower than letting the
      server access the files directly, because the contents of the file
      must be sent over the connection by the client to the server. On
      the other hand, you do not need the <code class="literal">FILE</code>
      privilege to load local files.
    </p><p>
      With <code class="literal">LOCAL</code>, the default behavior is the same as
      if <code class="literal">IGNORE</code> is specified; this is because the
      server has no way to stop transmission of the file in the middle
      of the operation. <code class="literal">IGNORE</code> is explained further
      later in this section.
    </p><p>
      <code class="literal">LOCAL</code> works only if your server and your client
      both have been enabled to allow it. For example, if
      <span><strong class="command">mysqld</strong></span> was started with
      <code class="option">--local-infile=0</code>, <code class="literal">LOCAL</code> does
      not work. See <a href="server-administration.html#load-data-local" title="5.3.4. Security Issues with LOAD DATA LOCAL">Section 5.3.4, “Security Issues with <code class="literal">LOAD DATA LOCAL</code>”</a>.
    </p><p>
      On Unix, if you need <code class="literal">LOAD DATA</code> to read from a
      pipe, you can use the following technique (here we load the
      listing of the <code class="filename">/</code> directory into a table):
    </p><pre class="programlisting">mkfifo /mysql/db/x/x
chmod 666 /mysql/db/x/x
find / -ls &gt; /mysql/db/x/x &amp;
mysql -e "LOAD DATA INFILE 'x' INTO TABLE x" x
</pre><p>
      Note that you must run the command that generates the data to be
      loaded and the <span><strong class="command">mysql</strong></span> commands either on
      separate terminals, or run the data generation process in the
      background (as shown in the preceding example). If you do not do
      this, the pipe will block until data is read by the
      <span><strong class="command">mysql</strong></span> process.
    </p><p>
      The <code class="literal">REPLACE</code> and <code class="literal">IGNORE</code>
      keywords control handling of input rows that duplicate existing
      rows on unique key values:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you specify <code class="literal">REPLACE</code>, input rows replace
          existing rows. In other words, rows that have the same value
          for a primary key or unique index as an existing row. See
          <a href="sql-syntax.html#replace" title="12.2.6. REPLACE Syntax">Section 12.2.6, “<code class="literal">REPLACE</code> Syntax”</a>.
        </p></li><li><p>
          If you specify <code class="literal">IGNORE</code>, input rows that
          duplicate an existing row on a unique key value are skipped.
          If you do not specify either option, the behavior depends on
          whether the <code class="literal">LOCAL</code> keyword is specified.
          Without <code class="literal">LOCAL</code>, an error occurs when a
          duplicate key value is found, and the rest of the text file is
          ignored. With <code class="literal">LOCAL</code>, the default behavior
          is the same as if <code class="literal">IGNORE</code> is specified; this
          is because the server has no way to stop transmission of the
          file in the middle of the operation.
        </p></li></ul></div><p>
      If you want to ignore foreign key constraints during the load
      operation, you can issue a <code class="literal">SET
      FOREIGN_KEY_CHECKS=0</code> statement before executing
      <code class="literal">LOAD DATA</code>.
    </p><p>
      If you use <code class="literal">LOAD DATA INFILE</code> on an empty
      <code class="literal">MyISAM</code> table, all non-unique indexes are
      created in a separate batch (as for <code class="literal">REPAIR
      TABLE</code>). Normally, this makes <code class="literal">LOAD DATA
      INFILE</code> much faster when you have many indexes. In some
      extreme cases, you can create the indexes even faster by turning
      them off with <code class="literal">ALTER TABLE ... DISABLE KEYS</code>
      before loading the file into the table and using <code class="literal">ALTER
      TABLE ... ENABLE KEYS</code> to re-create the indexes after
      loading the file. See <a href="optimization.html#insert-speed" title="7.2.19. Speed of INSERT Statements">Section 7.2.19, “Speed of <code class="literal">INSERT</code> Statements”</a>.
    </p><p>
      For both the <code class="literal">LOAD DATA INFILE</code> and
      <code class="literal">SELECT ... INTO OUTFILE</code> statements, the syntax
      of the <code class="literal">FIELDS</code> and <code class="literal">LINES</code>
      clauses is the same. Both clauses are optional, but
      <code class="literal">FIELDS</code> must precede <code class="literal">LINES</code> if
      both are specified.
    </p><p>
      If you specify a <code class="literal">FIELDS</code> clause, each of its
      subclauses (<code class="literal">TERMINATED BY</code>,
      <code class="literal">[OPTIONALLY] ENCLOSED BY</code>, and <code class="literal">ESCAPED
      BY</code>) is also optional, except that you must specify at
      least one of them.
    </p><p>
      If you specify no <code class="literal">FIELDS</code> clause, the defaults
      are the same as if you had written this:
    </p><pre class="programlisting">FIELDS TERMINATED BY '\t' ENCLOSED BY '' ESCAPED BY '\\'
</pre><p>
      If you specify no <code class="literal">LINES</code> clause, the defaults
      are the same as if you had written this:
    </p><pre class="programlisting">LINES TERMINATED BY '\n' STARTING BY ''
</pre><p>
      In other words, the defaults cause <code class="literal">LOAD DATA
      INFILE</code> to act as follows when reading input:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Look for line boundaries at newlines.
        </p></li><li><p>
          Do not skip over any line prefix.
        </p></li><li><p>
          Break lines into fields at tabs.
        </p></li><li><p>
          Do not expect fields to be enclosed within any quoting
          characters.
        </p></li><li><p>
          Interpret occurrences of tab, newline, or
          “<span class="quote"><code class="literal">\</code></span>” preceded by
          “<span class="quote"><code class="literal">\</code></span>” as literal characters that
          are part of field values.
        </p></li></ul></div><p>
      Conversely, the defaults cause <code class="literal">SELECT ... INTO
      OUTFILE</code> to act as follows when writing output:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Write tabs between fields.
        </p></li><li><p>
          Do not enclose fields within any quoting characters.
        </p></li><li><p>
          Use “<span class="quote"><code class="literal">\</code></span>” to escape instances of
          tab, newline, or “<span class="quote"><code class="literal">\</code></span>” that
          occur within field values.
        </p></li><li><p>
          Write newlines at the ends of lines.
        </p></li></ul></div><p>
      Backslash is the MySQL escape character within strings, so to
      write <code class="literal">FIELDS ESCAPED BY '\\'</code>, you must specify
      two backslashes for the value to be interpreted as a single
      backslash.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        If you have generated the text file on a Windows system, you
        might have to use <code class="literal">LINES TERMINATED BY '\r\n'</code>
        to read the file properly, because Windows programs typically
        use two characters as a line terminator. Some programs, such as
        <span><strong class="command">WordPad</strong></span>, might use <code class="literal">\r</code> as a
        line terminator when writing files. To read such files, use
        <code class="literal">LINES TERMINATED BY '\r'</code>.
      </p></div><p>
      If all the lines you want to read in have a common prefix that you
      want to ignore, you can use <code class="literal">LINES STARTING BY
      '<em class="replaceable"><code>prefix_string</code></em>'</code> to skip over
      the prefix, <span class="emphasis"><em>and anything before it</em></span>. If a line
      does not include the prefix, the entire line is skipped. Suppose
      that you issue the following statement:
    </p><pre class="programlisting">LOAD DATA INFILE '/tmp/test.txt' INTO TABLE test
  FIELDS TERMINATED BY ','  LINES STARTING BY 'xxx';
</pre><p>
      If the data file looks like this:
    </p><pre class="programlisting">xxx"abc",1
something xxx"def",2
"ghi",3
</pre><p>
      The resulting rows will be <code class="literal">("abc",1)</code>
      and <code class="literal">("def",2)</code>. The third row in the
      file is skipped because it does not contain the prefix.
    </p><p>
      The <code class="literal">IGNORE <em class="replaceable"><code>number</code></em>
      LINES</code> option can be used to ignore lines at the start of
      the file. For example, you can use <code class="literal">IGNORE 1
      LINES</code> to skip over an initial header line containing
      column names:
    </p><pre class="programlisting">LOAD DATA INFILE '/tmp/test.txt' INTO TABLE test IGNORE 1 LINES;
</pre><p>
      When you use <code class="literal">SELECT ... INTO OUTFILE</code> in tandem
      with <code class="literal">LOAD DATA INFILE</code> to write data from a
      database into a file and then read the file back into the database
      later, the field- and line-handling options for both statements
      must match. Otherwise, <code class="literal">LOAD DATA INFILE</code> will
      not interpret the contents of the file properly. Suppose that you
      use <code class="literal">SELECT ... INTO OUTFILE</code> to write a file
      with fields delimited by commas:
    </p><pre class="programlisting">SELECT * INTO OUTFILE 'data.txt'
  FIELDS TERMINATED BY ','
  FROM table2;
</pre><p>
      To read the comma-delimited file back in, the correct statement
      would be:
    </p><pre class="programlisting">LOAD DATA INFILE 'data.txt' INTO TABLE table2
  FIELDS TERMINATED BY ',';
</pre><p>
      If instead you tried to read in the file with the statement shown
      following, it wouldn't work because it instructs <code class="literal">LOAD
      DATA INFILE</code> to look for tabs between fields:
    </p><pre class="programlisting">LOAD DATA INFILE 'data.txt' INTO TABLE table2
  FIELDS TERMINATED BY '\t';
</pre><p>
      The likely result is that each input line would be interpreted as
      a single field.
    </p><a class="indexterm" name="id2205409"></a><a class="indexterm" name="id2205418"></a><p>
      <code class="literal">LOAD DATA INFILE</code> can be used to read files
      obtained from external sources. For example, many programs can
      export data in comma-separated values (CSV) format, such that
      lines have fields separated by commas and enclosed within double
      quotes. If lines in such a file are terminated by newlines, the
      statement shown here illustrates the field- and line-handling
      options you would use to load the file:
    </p><pre class="programlisting">LOAD DATA INFILE 'data.txt' INTO TABLE <em class="replaceable"><code>tbl_name</code></em>
  FIELDS TERMINATED BY ',' ENCLOSED BY '"'
  LINES TERMINATED BY '\n';
</pre><p>
      If the input values are not necessarily enclosed within quotes,
      use <code class="literal">OPTIONALLY</code> before the <code class="literal">ENCLOSED
      BY</code> keywords.
    </p><p>
      Any of the field- or line-handling options can specify an empty
      string (<code class="literal">''</code>). If not empty, the <code class="literal">FIELDS
      [OPTIONALLY] ENCLOSED BY</code> and <code class="literal">FIELDS ESCAPED
      BY</code> values must be a single character. The
      <code class="literal">FIELDS TERMINATED BY</code>, <code class="literal">LINES STARTING
      BY</code>, and <code class="literal">LINES TERMINATED BY</code> values
      can be more than one character. For example, to write lines that
      are terminated by carriage return/linefeed pairs, or to read a
      file containing such lines, specify a <code class="literal">LINES TERMINATED BY
      '\r\n'</code> clause.
    </p><p>
      To read a file containing jokes that are separated by lines
      consisting of <code class="literal">%%</code>, you can do this
    </p><pre class="programlisting">CREATE TABLE jokes
  (a INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  joke TEXT NOT NULL);
LOAD DATA INFILE '/tmp/jokes.txt' INTO TABLE jokes
  FIELDS TERMINATED BY ''
  LINES TERMINATED BY '\n%%\n' (joke);
</pre><p>
      <code class="literal">FIELDS [OPTIONALLY] ENCLOSED BY</code> controls
      quoting of fields. For output (<code class="literal">SELECT ... INTO
      OUTFILE</code>), if you omit the word
      <code class="literal">OPTIONALLY</code>, all fields are enclosed by the
      <code class="literal">ENCLOSED BY</code> character. An example of such
      output (using a comma as the field delimiter) is shown here:
    </p><pre class="programlisting">"1","a string","100.20"
"2","a string containing a , comma","102.20"
"3","a string containing a \" quote","102.20"
"4","a string containing a \", quote and comma","102.20"
</pre><p>
      If you specify <code class="literal">OPTIONALLY</code>, the
      <code class="literal">ENCLOSED BY</code> character is used only to enclose
      values from columns that have a string data type (such as
      <code class="literal">CHAR</code>, <code class="literal">BINARY</code>,
      <code class="literal">TEXT</code>, or <code class="literal">ENUM</code>):
    </p><pre class="programlisting">1,"a string",100.20
2,"a string containing a , comma",102.20
3,"a string containing a \" quote",102.20
4,"a string containing a \", quote and comma",102.20
</pre><p>
      Note that occurrences of the <code class="literal">ENCLOSED BY</code>
      character within a field value are escaped by prefixing them with
      the <code class="literal">ESCAPED BY</code> character. Also note that if you
      specify an empty <code class="literal">ESCAPED BY</code> value, it is
      possible to inadvertently generate output that cannot be read
      properly by <code class="literal">LOAD DATA INFILE</code>. For example, the
      preceding output just shown would appear as follows if the escape
      character is empty. Observe that the second field in the fourth
      line contains a comma following the quote, which (erroneously)
      appears to terminate the field:
    </p><pre class="programlisting">1,"a string",100.20
2,"a string containing a , comma",102.20
3,"a string containing a " quote",102.20
4,"a string containing a ", quote and comma",102.20
</pre><p>
      For input, the <code class="literal">ENCLOSED BY</code> character, if
      present, is stripped from the ends of field values. (This is true
      regardless of whether <code class="literal">OPTIONALLY</code> is specified;
      <code class="literal">OPTIONALLY</code> has no effect on input
      interpretation.) Occurrences of the <code class="literal">ENCLOSED BY</code>
      character preceded by the <code class="literal">ESCAPED BY</code> character
      are interpreted as part of the current field value.
    </p><p>
      If the field begins with the <code class="literal">ENCLOSED BY</code>
      character, instances of that character are recognized as
      terminating a field value only if followed by the field or line
      <code class="literal">TERMINATED BY</code> sequence. To avoid ambiguity,
      occurrences of the <code class="literal">ENCLOSED BY</code> character within
      a field value can be doubled and are interpreted as a single
      instance of the character. For example, if <code class="literal">ENCLOSED BY
      '"'</code> is specified, quotes are handled as shown here:
    </p><pre class="programlisting">"The ""BIG"" boss"  -&gt; The "BIG" boss
The "BIG" boss      -&gt; The "BIG" boss
The ""BIG"" boss    -&gt; The ""BIG"" boss
</pre><p>
      <code class="literal">FIELDS ESCAPED BY</code> controls how to write or read
      special characters. If the <code class="literal">FIELDS ESCAPED BY</code>
      character is not empty, it is used to prefix the following
      characters on output:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The <code class="literal">FIELDS ESCAPED BY</code> character
        </p></li><li><p>
          The <code class="literal">FIELDS [OPTIONALLY] ENCLOSED BY</code>
          character
        </p></li><li><p>
          The first character of the <code class="literal">FIELDS TERMINATED
          BY</code> and <code class="literal">LINES TERMINATED BY</code> values
        </p></li><li><p>
          ASCII <code class="literal">0</code> (what is actually written following
          the escape character is ASCII
          “<span class="quote"><code class="literal">0</code></span>”, not a zero-valued byte)
        </p></li></ul></div><p>
      If the <code class="literal">FIELDS ESCAPED BY</code> character is empty, no
      characters are escaped and <code class="literal">NULL</code> is output as
      <code class="literal">NULL</code>, not <code class="literal">\N</code>. It is probably
      not a good idea to specify an empty escape character, particularly
      if field values in your data contain any of the characters in the
      list just given.
    </p><p>
      For input, if the <code class="literal">FIELDS ESCAPED BY</code> character
      is not empty, occurrences of that character are stripped and the
      following character is taken literally as part of a field value.
      Some two-character sequences that are exceptions, where the first
      character is the escape character. These sequences are shown in
      the following table (using “<span class="quote"><code class="literal">\</code></span>” for
      the escape character). The rules for <code class="literal">NULL</code>
      handling are described later in this section.
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><code class="literal">\0</code>

              <a class="indexterm" name="id2205888"></a>

              <a class="indexterm" name="id2205897"></a></td><td>An ASCII 0 (<code class="literal">NUL</code>) character</td></tr><tr><td><code class="literal">\b</code>

              <a class="indexterm" name="id2205924"></a>

              <a class="indexterm" name="id2205933"></a></td><td>A backspace character</td></tr><tr><td><code class="literal">\n</code>

              <a class="indexterm" name="id2205955"></a>

              <a class="indexterm" name="id2205964"></a>

              <a class="indexterm" name="id2205973"></a>

              <a class="indexterm" name="id2205982"></a></td><td>A newline (linefeed) character</td></tr><tr><td><code class="literal">\r</code>

              <a class="indexterm" name="id2206004"></a>

              <a class="indexterm" name="id2206013"></a>

              <a class="indexterm" name="id2206022"></a></td><td>A carriage return character</td></tr><tr><td><code class="literal">\t</code>

              <a class="indexterm" name="id2206044"></a>

              <a class="indexterm" name="id2206053"></a></td><td>A tab character.</td></tr><tr><td><code class="literal">\Z</code>

              <a class="indexterm" name="id2206076"></a>

              <a class="indexterm" name="id2206084"></a></td><td>ASCII 26 (Control-Z)</td></tr><tr><td><code class="literal">\N</code>

              <a class="indexterm" name="id2206107"></a></td><td>NULL</td></tr></tbody></table></div><p>
      For more information about
      “<span class="quote"><code class="literal">\</code></span>”-escape syntax, see
      <a href="language-structure.html#literals" title="8.1. Literal Values">Section 8.1, “Literal Values”</a>.
    </p><p>
      In certain cases, field- and line-handling options interact:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If <code class="literal">LINES TERMINATED BY</code> is an empty string
          and <code class="literal">FIELDS TERMINATED BY</code> is non-empty,
          lines are also terminated with <code class="literal">FIELDS TERMINATED
          BY</code>.
        </p></li><li><p>
          If the <code class="literal">FIELDS TERMINATED BY</code> and
          <code class="literal">FIELDS ENCLOSED BY</code> values are both empty
          (<code class="literal">''</code>), a fixed-row (non-delimited) format is
          used. With fixed-row format, no delimiters are used between
          fields (but you can still have a line terminator). Instead,
          column values are read and written using a field width wide
          enough to hold all values in the field. For
          <code class="literal">TINYINT</code>, <code class="literal">SMALLINT</code>,
          <code class="literal">MEDIUMINT</code>, <code class="literal">INT</code>, and
          <code class="literal">BIGINT</code>, the field widths are 4, 6, 8, 11,
          and 20, respectively, no matter what the declared display
          width is.
        </p><p>
          <code class="literal">LINES TERMINATED BY</code> is still used to
          separate lines. If a line does not contain all fields, the
          rest of the columns are set to their default values. If you do
          not have a line terminator, you should set this to
          <code class="literal">''</code>. In this case, the text file must
          contain all fields for each row.
        </p><p>
          Fixed-row format also affects handling of
          <code class="literal">NULL</code> values, as described later. Note that
          fixed-size format does not work if you are using a multi-byte
          character set.
        </p></li></ul></div><p>
      Handling of <code class="literal">NULL</code> values varies according to the
      <code class="literal">FIELDS</code> and <code class="literal">LINES</code> options in
      use:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          For the default <code class="literal">FIELDS</code> and
          <code class="literal">LINES</code> values, <code class="literal">NULL</code> is
          written as a field value of <code class="literal">\N</code> for output,
          and a field value of <code class="literal">\N</code> is read as
          <code class="literal">NULL</code> for input (assuming that the
          <code class="literal">ESCAPED BY</code> character is
          “<span class="quote"><code class="literal">\</code></span>”).
        </p></li><li><p>
          If <code class="literal">FIELDS ENCLOSED BY</code> is not empty, a field
          containing the literal word <code class="literal">NULL</code> as its
          value is read as a <code class="literal">NULL</code> value. This differs
          from the word <code class="literal">NULL</code> enclosed within
          <code class="literal">FIELDS ENCLOSED BY</code> characters, which is
          read as the string <code class="literal">'NULL'</code>.
        </p></li><li><p>
          If <code class="literal">FIELDS ESCAPED BY</code> is empty,
          <code class="literal">NULL</code> is written as the word
          <code class="literal">NULL</code>.
        </p></li><li><p>
          With fixed-row format (which is used when <code class="literal">FIELDS
          TERMINATED BY</code> and <code class="literal">FIELDS ENCLOSED
          BY</code> are both empty), <code class="literal">NULL</code> is
          written as an empty string. Note that this causes both
          <code class="literal">NULL</code> values and empty strings in the table
          to be indistinguishable when written to the file because both
          are written as empty strings. If you need to be able to tell
          the two apart when reading the file back in, you should not
          use fixed-row format.
        </p></li></ul></div><p>
      An attempt to load <code class="literal">NULL</code> into a <code class="literal">NOT
      NULL</code> column causes assignment of the implicit default
      value for the column's data type and a warning, or an error in
      strict SQL mode. Implicit default values are discussed in
      <a href="data-types.html#data-type-defaults" title="10.1.4. Data Type Default Values">Section 10.1.4, “Data Type Default Values”</a>.
    </p><p>
      Some cases are not supported by <code class="literal">LOAD DATA
      INFILE</code>:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed-size rows (<code class="literal">FIELDS TERMINATED BY</code> and
          <code class="literal">FIELDS ENCLOSED BY</code> both empty) and
          <code class="literal">BLOB</code> or <code class="literal">TEXT</code> columns.
        </p></li><li><p>
          If you specify one separator that is the same as or a prefix
          of another, <code class="literal">LOAD DATA INFILE</code> cannot
          interpret the input properly. For example, the following
          <code class="literal">FIELDS</code> clause would cause problems:
        </p><pre class="programlisting">FIELDS TERMINATED BY '"' ENCLOSED BY '"'
</pre></li><li><p>
          If <code class="literal">FIELDS ESCAPED BY</code> is empty, a field
          value that contains an occurrence of <code class="literal">FIELDS ENCLOSED
          BY</code> or <code class="literal">LINES TERMINATED BY</code>
          followed by the <code class="literal">FIELDS TERMINATED BY</code> value
          causes <code class="literal">LOAD DATA INFILE</code> to stop reading a
          field or line too early. This happens because <code class="literal">LOAD
          DATA INFILE</code> cannot properly determine where the
          field or line value ends.
        </p></li></ul></div><p>
      The following example loads all columns of the
      <code class="literal">persondata</code> table:
    </p><pre class="programlisting">LOAD DATA INFILE 'persondata.txt' INTO TABLE persondata;
</pre><p>
      By default, when no column list is provided at the end of the
      <code class="literal">LOAD DATA INFILE</code> statement, input lines are
      expected to contain a field for each table column. If you want to
      load only some of a table's columns, specify a column list:
    </p><pre class="programlisting">LOAD DATA INFILE 'persondata.txt' INTO TABLE persondata (col1,col2,...);
</pre><p>
      You must also specify a column list if the order of the fields in
      the input file differs from the order of the columns in the table.
      Otherwise, MySQL cannot tell how to match input fields with table
      columns.
    </p><p>
      The column list can contain either column names or user variables.
      With user variables, the <code class="literal">SET</code> clause enables you
      to perform transformations on their values before assigning the
      result to columns.
    </p><p>
      User variables in the <code class="literal">SET</code> clause can be used in
      several ways. The following example uses the first input column
      directly for the value of <code class="literal">t1.column1</code>, and
      assigns the second input column to a user variable that is
      subjected to a division operation before being used for the value
      of <code class="literal">t1.column2</code>:
    </p><pre class="programlisting">LOAD DATA INFILE 'file.txt'
  INTO TABLE t1
  (column1, @var1)
  SET column2 = @var1/100;
</pre><p>
      The <code class="literal">SET</code> clause can be used to supply values not
      derived from the input file. The following statement sets
      <code class="literal">column3</code> to the current date and time:
    </p><pre class="programlisting">LOAD DATA INFILE 'file.txt'
  INTO TABLE t1
  (column1, column2)
  SET column3 = CURRENT_TIMESTAMP;
</pre><p>
      You can also discard an input value by assigning it to a user
      variable and not assigning the variable to a table column:
    </p><pre class="programlisting">LOAD DATA INFILE 'file.txt'
  INTO TABLE t1
  (column1, @dummy, column2, @dummy, column3);
</pre><p>
      Use of the column/variable list and <code class="literal">SET</code> clause
      is subject to the following restrictions:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Assignments in the <code class="literal">SET</code> clause should have
          only column names on the left hand side of assignment
          operators.
        </p></li><li><p>
          You can use subqueries in the right hand side of
          <code class="literal">SET</code> assignments. A subquery that returns a
          value to be assigned to a column may be a scalar subquery
          only. Also, you cannot use a subquery to select from the table
          that is being loaded.
        </p></li><li><p>
          Lines ignored by an <code class="literal">IGNORE</code> clause are not
          processed for the column/variable list or
          <code class="literal">SET</code> clause.
        </p></li><li><p>
          User variables cannot be used when loading data with fixed-row
          format because user variables do not have a display width.
        </p></li></ul></div><p>
      When processing an input line, <code class="literal">LOAD DATA</code> splits
      it into fields and uses the values according to the
      column/variable list and the <code class="literal">SET</code> clause, if
      they are present. Then the resulting row is inserted into the
      table. If there are <code class="literal">BEFORE INSERT</code> or
      <code class="literal">AFTER INSERT</code> triggers for the table, they are
      activated before or after inserting the row, respectively.
    </p><p>
      If an input line has too many fields, the extra fields are ignored
      and the number of warnings is incremented.
    </p><p>
      If an input line has too few fields, the table columns for which
      input fields are missing are set to their default values. Default
      value assignment is described in
      <a href="data-types.html#data-type-defaults" title="10.1.4. Data Type Default Values">Section 10.1.4, “Data Type Default Values”</a>.
    </p><p>
      An empty field value is interpreted differently than if the field
      value is missing:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          For string types, the column is set to the empty string.
        </p></li><li><p>
          For numeric types, the column is set to <code class="literal">0</code>.
        </p></li><li><p>
          For date and time types, the column is set to the appropriate
          “<span class="quote">zero</span>” value for the type. See
          <a href="data-types.html#date-and-time-types" title="10.3. Date and Time Types">Section 10.3, “Date and Time Types”</a>.
        </p></li></ul></div><p>
      These are the same values that result if you assign an empty
      string explicitly to a string, numeric, or date or time type
      explicitly in an <code class="literal">INSERT</code> or
      <code class="literal">UPDATE</code> statement.
    </p><p>
      <code class="literal">TIMESTAMP</code> columns are set to the current date
      and time only if there is a <code class="literal">NULL</code> value for the
      column (that is, <code class="literal">\N</code>) and the column is not
      declared to allow <code class="literal">NULL</code> values, or if the
      <code class="literal">TIMESTAMP</code> column's default value is the current
      timestamp and it is omitted from the field list when a field list
      is specified.
    </p><p>
      <code class="literal">LOAD DATA INFILE</code> regards all input as strings,
      so you cannot use numeric values for <code class="literal">ENUM</code> or
      <code class="literal">SET</code> columns the way you can with
      <code class="literal">INSERT</code> statements. All <code class="literal">ENUM</code>
      and <code class="literal">SET</code> values must be specified as strings.
    </p><p>
      <code class="literal">BIT</code> values cannot be loaded using binary
      notation (for example, <code class="literal">b'011010'</code>). To work
      around this, specify the values as regular integers and use the
      <code class="literal">SET</code> clause to convert them so that MySQL
      performs a numeric type conversion and loads them into the
      <code class="literal">BIT</code> column properly:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cat /tmp/bit_test.txt</code></strong>
2
127
shell&gt; <strong class="userinput"><code>mysql test</code></strong>
mysql&gt; <strong class="userinput"><code>LOAD DATA INFILE '/tmp/bit_test.txt'</code></strong>
    -&gt; <strong class="userinput"><code>INTO TABLE bit_test (@var1) SET b= CAST(@var1 AS UNSIGNED);</code></strong>
Query OK, 2 rows affected (0.00 sec)
Records: 2  Deleted: 0  Skipped: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT BIN(b+0) FROM bit_test;</code></strong>
+----------+
| bin(b+0) |
+----------+
| 10       |
| 1111111  |
+----------+
2 rows in set (0.00 sec)
</pre><p>
      When the <code class="literal">LOAD DATA INFILE</code> statement finishes,
      it returns an information string in the following format:
    </p><pre class="programlisting">Records: 1  Deleted: 0  Skipped: 0  Warnings: 0
</pre><a class="indexterm" name="id2207018"></a><p>
      If you are using the C API, you can get information about the
      statement by calling the
      <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> function. See
      <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()">Section 29.2.3.35, “<code class="literal">mysql_info()</code>”</a>.
    </p><p>
      Warnings occur under the same circumstances as when values are
      inserted via the <code class="literal">INSERT</code> statement (see
      <a href="sql-syntax.html#insert" title="12.2.4. INSERT Syntax">Section 12.2.4, “<code class="literal">INSERT</code> Syntax”</a>), except that <code class="literal">LOAD DATA
      INFILE</code> also generates warnings when there are too few or
      too many fields in the input row. The warnings are not stored
      anywhere; the number of warnings can be used only as an indication
      of whether everything went well.
    </p><p>
      You can use <code class="literal">SHOW WARNINGS</code> to get a list of the
      first <code class="literal">max_error_count</code> warnings as information
      about what went wrong. See <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax">Section 12.5.5.37, “<code class="literal">SHOW WARNINGS</code> Syntax”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="replace"></a>12.2.6. <code class="literal">REPLACE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2207099"></a><pre class="programlisting">REPLACE [LOW_PRIORITY | DELAYED]
    [INTO] <em class="replaceable"><code>tbl_name</code></em> [(<em class="replaceable"><code>col_name</code></em>,...)]
    {VALUES | VALUE} ({<em class="replaceable"><code>expr</code></em> | DEFAULT},...),(...),...
</pre><p>
      Or:
    </p><pre class="programlisting">REPLACE [LOW_PRIORITY | DELAYED]
    [INTO] <em class="replaceable"><code>tbl_name</code></em>
    SET <em class="replaceable"><code>col_name</code></em>={<em class="replaceable"><code>expr</code></em> | DEFAULT}, ...
</pre><p>
      Or:
    </p><pre class="programlisting">REPLACE [LOW_PRIORITY | DELAYED]
    [INTO] <em class="replaceable"><code>tbl_name</code></em> [(<em class="replaceable"><code>col_name</code></em>,...)]
    SELECT ...
</pre><p>
      <code class="literal">REPLACE</code> works exactly like
      <code class="literal">INSERT</code>, except that if an old row in the table
      has the same value as a new row for a <code class="literal">PRIMARY
      KEY</code> or a <code class="literal">UNIQUE</code> index, the old row is
      deleted before the new row is inserted. See
      <a href="sql-syntax.html#insert" title="12.2.4. INSERT Syntax">Section 12.2.4, “<code class="literal">INSERT</code> Syntax”</a>.
    </p><p>
      <code class="literal">REPLACE</code> is a MySQL extension to the SQL
      standard. It either inserts, or <span class="emphasis"><em>deletes</em></span> and
      inserts. For another MySQL extension to standard SQL — that
      either inserts or <span class="emphasis"><em>updates</em></span> — see
      <a href="sql-syntax.html#insert-on-duplicate" title="12.2.4.3. INSERT ... ON DUPLICATE KEY UPDATE Syntax">Section 12.2.4.3, “<code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code> Syntax”</a>.
    </p><p>
      Note that unless the table has a <code class="literal">PRIMARY KEY</code> or
      <code class="literal">UNIQUE</code> index, using a
      <code class="literal">REPLACE</code> statement makes no sense. It becomes
      equivalent to <code class="literal">INSERT</code>, because there is no index
      to be used to determine whether a new row duplicates another.
    </p><p>
      Values for all columns are taken from the values specified in the
      <code class="literal">REPLACE</code> statement. Any missing columns are set
      to their default values, just as happens for
      <code class="literal">INSERT</code>. You cannot refer to values from the
      current row and use them in the new row. If you use an assignment
      such as <code class="literal">SET <em class="replaceable"><code>col_name</code></em> =
      <em class="replaceable"><code>col_name</code></em> + 1</code>, the reference
      to the column name on the right hand side is treated as
      <a href="functions.html#function_default"><code class="literal">DEFAULT(<em class="replaceable"><code>col_name</code></em>)</code></a>,
      so the assignment is equivalent to <code class="literal">SET
      <em class="replaceable"><code>col_name</code></em> =
      DEFAULT(<em class="replaceable"><code>col_name</code></em>) + 1</code>.
    </p><p>
      To use <code class="literal">REPLACE</code>, you must have both the
      <code class="literal">INSERT</code> and <code class="literal">DELETE</code> privileges
      for the table.
    </p><p>
      The <code class="literal">REPLACE</code> statement returns a count to
      indicate the number of rows affected. This is the sum of the rows
      deleted and inserted. If the count is 1 for a single-row
      <code class="literal">REPLACE</code>, a row was inserted and no rows were
      deleted. If the count is greater than 1, one or more old rows were
      deleted before the new row was inserted. It is possible for a
      single row to replace more than one old row if the table contains
      multiple unique indexes and the new row duplicates values for
      different old rows in different unique indexes.
    </p><p>
      The affected-rows count makes it easy to determine whether
      <code class="literal">REPLACE</code> only added a row or whether it also
      replaced any rows: Check whether the count is 1 (added) or greater
      (replaced).
    </p><p>
      If you are using the C API, the affected-rows count can be
      obtained using the
      <a href="apis.html#mysql-affected-rows" title="29.2.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> function.
    </p><p>
      Currently, you cannot replace into a table and select from the
      same table in a subquery.
    </p><p>
      MySQL uses the following algorithm for <code class="literal">REPLACE</code>
      (and <code class="literal">LOAD DATA ... REPLACE</code>):
    </p><div class="orderedlist"><ol type="1"><li><p>
          Try to insert the new row into the table
        </p></li><li><p>
          While the insertion fails because a duplicate-key error occurs
          for a primary key or unique index:
        </p><div class="orderedlist"><ol type="a"><li><p>
              Delete from the table the conflicting row that has the
              duplicate key value
            </p></li><li><p>
              Try again to insert the new row into the table
            </p></li></ol></div></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="select"></a>12.2.7. <code class="literal">SELECT</code> Syntax</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#join">12.2.7.1. <code class="literal">JOIN</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#index-hints">12.2.7.2. Index Hint Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#union">12.2.7.3. <code class="literal">UNION</code> Syntax</a></span></dt></dl></div><a class="indexterm" name="id2207476"></a><pre class="programlisting">SELECT
    [ALL | DISTINCT | DISTINCTROW ]
      [HIGH_PRIORITY]
      [STRAIGHT_JOIN]
      [SQL_SMALL_RESULT] [SQL_BIG_RESULT] [SQL_BUFFER_RESULT]
      [SQL_CACHE | SQL_NO_CACHE] [SQL_CALC_FOUND_ROWS]
    <em class="replaceable"><code>select_expr</code></em>, ...
    [FROM <em class="replaceable"><code>table_references</code></em>
    [WHERE <em class="replaceable"><code>where_condition</code></em>]
    [GROUP BY {<em class="replaceable"><code>col_name</code></em> | <em class="replaceable"><code>expr</code></em> | <em class="replaceable"><code>position</code></em>}
      [ASC | DESC], ... [WITH ROLLUP]]
    [HAVING <em class="replaceable"><code>where_condition</code></em>]
    [ORDER BY {<em class="replaceable"><code>col_name</code></em> | <em class="replaceable"><code>expr</code></em> | <em class="replaceable"><code>position</code></em>}
      [ASC | DESC], ...]
    [LIMIT {[<em class="replaceable"><code>offset</code></em>,] <em class="replaceable"><code>row_count</code></em> | <em class="replaceable"><code>row_count</code></em> OFFSET <em class="replaceable"><code>offset</code></em>}]
    [PROCEDURE <em class="replaceable"><code>procedure_name</code></em>(<em class="replaceable"><code>argument_list</code></em>)]
    [INTO OUTFILE '<em class="replaceable"><code>file_name</code></em>' <em class="replaceable"><code>export_options</code></em>
      | INTO DUMPFILE '<em class="replaceable"><code>file_name</code></em>'
      | INTO <em class="replaceable"><code>var_name</code></em> [, <em class="replaceable"><code>var_name</code></em>]]
    [FOR UPDATE | LOCK IN SHARE MODE]]
</pre><p>
      <code class="literal">SELECT</code> is used to retrieve rows selected from
      one or more tables, and can include <code class="literal">UNION</code>
      statements and subqueries. See <a href="sql-syntax.html#union" title="12.2.7.3. UNION Syntax">Section 12.2.7.3, “<code class="literal">UNION</code> Syntax”</a>, and
      <a href="sql-syntax.html#subqueries" title="12.2.8. Subquery Syntax">Section 12.2.8, “Subquery Syntax”</a>.
    </p><p>
      The most commonly used clauses of <code class="literal">SELECT</code>
      statements are these:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Each <em class="replaceable"><code>select_expr</code></em> indicates a column
          that you want to retrieve. There must be at least one
          <em class="replaceable"><code>select_expr</code></em>.
        </p></li><li><p>
          <em class="replaceable"><code>table_references</code></em> indicates the
          table or tables from which to retrieve rows. Its syntax is
          described in <a href="sql-syntax.html#join" title="12.2.7.1. JOIN Syntax">Section 12.2.7.1, “<code class="literal">JOIN</code> Syntax”</a>.
        </p></li><li><p>
          The <code class="literal">WHERE</code> clause, if given, indicates the
          condition or conditions that rows must satisfy to be selected.
          <em class="replaceable"><code>where_condition</code></em> is an expression
          that evaluates to true for each row to be selected. The
          statement selects all rows if there is no
          <code class="literal">WHERE</code> clause.
        </p><p>
          In the <code class="literal">WHERE</code> clause, you can use any of the
          functions and operators that MySQL supports, except for
          aggregate (summary) functions. See
          <a href="functions.html" title="Chapter 11. Functions and Operators">Chapter 11, <i>Functions and Operators</i></a>.
        </p></li></ul></div><p>
      <code class="literal">SELECT</code> can also be used to retrieve rows
      computed without reference to any table.
    </p><p>
      For example:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 + 1;</code></strong>
        -&gt; 2
</pre><p>
      <a class="indexterm" name="id2207754"></a>

      You are allowed to specify <code class="literal">DUAL</code> as a dummy
      table name in situations where no tables are referenced:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 + 1 FROM DUAL;</code></strong>
        -&gt; 2
</pre><p>
      <code class="literal">DUAL</code> is purely for the convenience of people
      who require that all <code class="literal">SELECT</code> statements should
      have <code class="literal">FROM</code> and possibly other clauses. MySQL may
      ignore the clauses. MySQL does not require <code class="literal">FROM
      DUAL</code> if no tables are referenced.
    </p><p>
      In general, clauses used must be given in exactly the order shown
      in the syntax description. For example, a
      <code class="literal">HAVING</code> clause must come after any
      <code class="literal">GROUP BY</code> clause and before any <code class="literal">ORDER
      BY</code> clause. The exception is that the
      <code class="literal">INTO</code> clause can appear either as shown in the
      syntax description or immediately following the
      <em class="replaceable"><code>select_expr</code></em> list.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a class="indexterm" name="id2207855"></a>

          <a class="indexterm" name="id2207867"></a>

          A <em class="replaceable"><code>select_expr</code></em> can be given an alias
          using <code class="literal">AS
          <em class="replaceable"><code>alias_name</code></em></code>. The alias is
          used as the expression's column name and can be used in
          <code class="literal">GROUP BY</code>, <code class="literal">ORDER BY</code>, or
          <code class="literal">HAVING</code> clauses. For example:
        </p><pre class="programlisting">SELECT CONCAT(last_name,', ',first_name) AS full_name
  FROM mytable ORDER BY full_name;
</pre><p>
          The <code class="literal">AS</code> keyword is optional when aliasing a
          <em class="replaceable"><code>select_expr</code></em>. The preceding example
          could have been written like this:
        </p><pre class="programlisting">SELECT CONCAT(last_name,', ',first_name) full_name
  FROM mytable ORDER BY full_name;
</pre><p>
          However, because the <code class="literal">AS</code> is optional, a
          subtle problem can occur if you forget the comma between two
          <em class="replaceable"><code>select_expr</code></em> expressions: MySQL
          interprets the second as an alias name. For example, in the
          following statement, <code class="literal">columnb</code> is treated as
          an alias name:
        </p><pre class="programlisting">SELECT columna columnb FROM mytable;
</pre><p>
          For this reason, it is good practice to be in the habit of
          using <code class="literal">AS</code> explicitly when specifying column
          aliases.
        </p><p>
          It is not allowable to refer to a column alias in a
          <code class="literal">WHERE</code> clause, because the column value
          might not yet be determined when the <code class="literal">WHERE</code>
          clause is executed. See <a href="error-handling.html#problems-with-alias" title="B.1.5.4. Problems with Column Aliases">Section B.1.5.4, “Problems with Column Aliases”</a>.
        </p></li><li><p>
          <a class="indexterm" name="id2207998"></a>

          <a class="indexterm" name="id2208007"></a>

          The <code class="literal">FROM
          <em class="replaceable"><code>table_references</code></em></code> clause
          indicates the table or tables from which to retrieve rows. If
          you name more than one table, you are performing a join. For
          information on join syntax, see <a href="sql-syntax.html#join" title="12.2.7.1. JOIN Syntax">Section 12.2.7.1, “<code class="literal">JOIN</code> Syntax”</a>. For
          each table specified, you can optionally specify an alias.
        </p><pre class="programlisting"><em class="replaceable"><code>tbl_name</code></em> [[AS] <em class="replaceable"><code>alias</code></em>] [<em class="replaceable"><code>index_hint</code></em>]
</pre><a class="indexterm" name="id2208047"></a><a class="indexterm" name="id2208056"></a><p>
          The use of index hints provides the optimizer with information
          about how to choose indexes during query processing. For a
          description of the syntax for specifying these hints, see
          <a href="sql-syntax.html#index-hints" title="12.2.7.2. Index Hint Syntax">Section 12.2.7.2, “Index Hint Syntax”</a>.
        </p><p>
          You can use <code class="literal">SET
          max_seeks_for_key=<em class="replaceable"><code>value</code></em></code>
          as an alternative way to force MySQL to prefer key scans
          instead of table scans. See
          <a href="server-administration.html#server-system-variables" title="5.1.3. System Variables">Section 5.1.3, “System Variables”</a>.
        </p></li><li><p>
          You can refer to a table within the default database as
          <em class="replaceable"><code>tbl_name</code></em>, or as
          <em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>tbl_name</code></em>
          to specify a database explicitly. You can refer to a column as
          <em class="replaceable"><code>col_name</code></em>,
          <em class="replaceable"><code>tbl_name</code></em>.<em class="replaceable"><code>col_name</code></em>,
          or
          <em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>tbl_name</code></em>.<em class="replaceable"><code>col_name</code></em>.
          You need not specify a <em class="replaceable"><code>tbl_name</code></em> or
          <em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>tbl_name</code></em>
          prefix for a column reference unless the reference would be
          ambiguous. See <a href="language-structure.html#identifier-qualifiers" title="8.2.1. Identifier Qualifiers">Section 8.2.1, “Identifier Qualifiers”</a>, for
          examples of ambiguity that require the more explicit column
          reference forms.
        </p></li><li><p>
          <a class="indexterm" name="id2208159"></a>

          <a class="indexterm" name="id2208171"></a>

          A table reference can be aliased using
          <code class="literal"><em class="replaceable"><code>tbl_name</code></em> AS
          <em class="replaceable"><code>alias_name</code></em></code> or
          <em class="replaceable"><code>tbl_name alias_name</code></em>:
        </p><pre class="programlisting">SELECT t1.name, t2.salary FROM employee AS t1, info AS t2
  WHERE t1.name = t2.name;

SELECT t1.name, t2.salary FROM employee t1, info t2
  WHERE t1.name = t2.name;
</pre></li><li><p>
          <a class="indexterm" name="id2208209"></a>

          Columns selected for output can be referred to in
          <code class="literal">ORDER BY</code> and <code class="literal">GROUP BY</code>
          clauses using column names, column aliases, or column
          positions. Column positions are integers and begin with 1:
        </p><pre class="programlisting">SELECT college, region, seed FROM tournament
  ORDER BY region, seed;

SELECT college, region AS r, seed AS s FROM tournament
  ORDER BY r, s;

SELECT college, region, seed FROM tournament
  ORDER BY 2, 3;
</pre><p>
          To sort in reverse order, add the <code class="literal">DESC</code>
          (descending) keyword to the name of the column in the
          <code class="literal">ORDER BY</code> clause that you are sorting by.
          The default is ascending order; this can be specified
          explicitly using the <code class="literal">ASC</code> keyword.
        </p><p>
          If <code class="literal">ORDER BY</code> occurs within a subquery and
          also is applied in the outer query, the outermost
          <code class="literal">ORDER BY</code> takes precedence. For example,
          results for the following statement are sorted in descending
          order, not ascending order:
        </p><pre class="programlisting">(SELECT ... ORDER BY a) ORDER BY a DESC;
</pre><p>
          Use of column positions is deprecated because the syntax has
          been removed from the SQL standard.
        </p></li><li><p>
          <a class="indexterm" name="id2208296"></a>

          <a class="indexterm" name="id2208308"></a>

          If you use <code class="literal">GROUP BY</code>, output rows are sorted
          according to the <code class="literal">GROUP BY</code> columns as if you
          had an <code class="literal">ORDER BY</code> for the same columns. To
          avoid the overhead of sorting that <code class="literal">GROUP BY</code>
          produces, add <code class="literal">ORDER BY NULL</code>:
        </p><pre class="programlisting">SELECT a, COUNT(b) FROM test_table GROUP BY a ORDER BY NULL;
</pre></li><li><p>
          <a class="indexterm" name="id2208364"></a>

          MySQL extends the <code class="literal">GROUP BY</code> clause so that
          you can also specify <code class="literal">ASC</code> and
          <code class="literal">DESC</code> after columns named in the clause:
        </p><pre class="programlisting">SELECT a, COUNT(b) FROM test_table GROUP BY a DESC;
</pre></li><li><p>
          MySQL extends the use of <code class="literal">GROUP BY</code> to allow
          selecting fields that are not mentioned in the <code class="literal">GROUP
          BY</code> clause. If you are not getting the results that
          you expect from your query, please read the description of
          <code class="literal">GROUP BY</code> found in
          <a href="functions.html#group-by-functions-and-modifiers" title="11.12. Functions and Modifiers for Use with GROUP BY Clauses">Section 11.12, “Functions and Modifiers for Use with <code class="literal">GROUP BY</code> Clauses”</a>.
        </p></li><li><p>
          <code class="literal">GROUP BY</code> allows a <code class="literal">WITH
          ROLLUP</code> modifier. See
          <a href="functions.html#group-by-modifiers" title="11.12.2. GROUP BY Modifiers">Section 11.12.2, “<code class="literal">GROUP BY</code> Modifiers”</a>.
        </p></li><li><p>
          <a class="indexterm" name="id2208462"></a>

          The <code class="literal">HAVING</code> clause is applied nearly last,
          just before items are sent to the client, with no
          optimization. (<code class="literal">LIMIT</code> is applied after
          <code class="literal">HAVING</code>.)
        </p><p>
          The SQL standard requires that <code class="literal">HAVING</code> must
          reference only columns in the <code class="literal">GROUP BY</code>
          clause or columns used in aggregate functions. However, MySQL
          supports an extension to this behavior, and allows
          <code class="literal">HAVING</code> to refer to columns in the
          <code class="literal">SELECT</code> list and columns in outer subqueries
          as well.
        </p><p>
          If the <code class="literal">HAVING</code> clause refers to a column
          that is ambiguous, a warning occurs. In the following
          statement, <code class="literal">col2</code> is ambiguous because it is
          used as both an alias and a column name:
        </p><pre class="programlisting">SELECT COUNT(col1) AS col2 FROM t GROUP BY col2 HAVING col2 = 2;
</pre><p>
          Preference is given to standard SQL behavior, so if a
          <code class="literal">HAVING</code> column name is used both in
          <code class="literal">GROUP BY</code> and as an aliased column in the
          output column list, preference is given to the column in the
          <code class="literal">GROUP BY</code> column.
        </p></li><li><p>
          Do not use <code class="literal">HAVING</code> for items that should be
          in the <code class="literal">WHERE</code> clause. For example, do not
          write the following:
        </p><pre class="programlisting">SELECT <em class="replaceable"><code>col_name</code></em> FROM <em class="replaceable"><code>tbl_name</code></em> HAVING <em class="replaceable"><code>col_name</code></em> &gt; 0;
</pre><p>
          Write this instead:
        </p><pre class="programlisting">SELECT <em class="replaceable"><code>col_name</code></em> FROM <em class="replaceable"><code>tbl_name</code></em> WHERE <em class="replaceable"><code>col_name</code></em> &gt; 0;
</pre></li><li><p>
          The <code class="literal">HAVING</code> clause can refer to aggregate
          functions, which the <code class="literal">WHERE</code> clause cannot:
        </p><pre class="programlisting">SELECT user, MAX(salary) FROM users
  GROUP BY user HAVING MAX(salary) &gt; 10;
</pre><p>
          (This did not work in some older versions of MySQL.)
        </p></li><li><p>
          MySQL allows duplicate column names. That is, there can be
          more than one <em class="replaceable"><code>select_expr</code></em> with the
          same name. This is an extension to standard SQL. Because MySQL
          also allows <code class="literal">GROUP BY</code> and
          <code class="literal">HAVING</code> to refer to
          <em class="replaceable"><code>select_expr</code></em> values, this can result
          in an ambiguity:
        </p><pre class="programlisting">SELECT 12 AS a, a FROM t GROUP BY a;
</pre><p>
          In that statement, both columns have the name
          <code class="literal">a</code>. To ensure that the correct column is
          used for grouping, use different names for each
          <em class="replaceable"><code>select_expr</code></em>.
        </p></li><li><p>
          MySQL resolves unqualified column or alias references in
          <code class="literal">ORDER BY</code> clauses by searching in the
          <em class="replaceable"><code>select_expr</code></em> values, then in the
          columns of the tables in the <code class="literal">FROM</code> clause.
          For <code class="literal">GROUP BY</code> or <code class="literal">HAVING</code>
          clauses, it searches the <code class="literal">FROM</code> clause before
          searching in the <em class="replaceable"><code>select_expr</code></em>
          values. (For <code class="literal">GROUP BY</code> and
          <code class="literal">HAVING</code>, this differs from the pre-MySQL 5.0
          behavior that used the same rules as for <code class="literal">ORDER
          BY</code>.)
        </p></li><li><p>
          <a class="indexterm" name="id2208771"></a>

          The <code class="literal">LIMIT</code> clause can be used to constrain
          the number of rows returned by the <code class="literal">SELECT</code>
          statement. <code class="literal">LIMIT</code> takes one or two numeric
          arguments, which must both be non-negative integer constants
          (except when using prepared statements).
        </p><p>
          With two arguments, the first argument specifies the offset of
          the first row to return, and the second specifies the maximum
          number of rows to return. The offset of the initial row is 0
          (not 1):
        </p><pre class="programlisting">SELECT * FROM tbl LIMIT 5,10;  # Retrieve rows 6-15
</pre><p>
          To retrieve all rows from a certain offset up to the end of
          the result set, you can use some large number for the second
          parameter. This statement retrieves all rows from the 96th row
          to the last:
        </p><pre class="programlisting">SELECT * FROM tbl LIMIT 95,18446744073709551615;
</pre><p>
          With one argument, the value specifies the number of rows to
          return from the beginning of the result set:
        </p><pre class="programlisting">SELECT * FROM tbl LIMIT 5;     # Retrieve first 5 rows
</pre><p>
          In other words, <code class="literal">LIMIT
          <em class="replaceable"><code>row_count</code></em></code> is equivalent
          to <code class="literal">LIMIT 0,
          <em class="replaceable"><code>row_count</code></em></code>.
        </p><p>
          For prepared statements, you can use placeholders. The
          following statements will return one row from the
          <code class="literal">tbl</code> table:
        </p><pre class="programlisting">SET @a=1;
PREPARE STMT FROM 'SELECT * FROM tbl LIMIT ?';
EXECUTE STMT USING @a;
</pre><p>
          The following statements will return the second to sixth row
          from the <code class="literal">tbl</code> table:
        </p><pre class="programlisting">SET @skip=1; SET @numrows=5;
PREPARE STMT FROM 'SELECT * FROM tbl LIMIT ?, ?';
EXECUTE STMT USING @skip, @numrows;
</pre><p>
          For compatibility with PostgreSQL, MySQL also supports the
          <code class="literal">LIMIT <em class="replaceable"><code>row_count</code></em> OFFSET
          <em class="replaceable"><code>offset</code></em></code> syntax.
        </p><p>
          If <code class="literal">LIMIT</code> occurs within a subquery and also
          is applied in the outer query, the outermost
          <code class="literal">LIMIT</code> takes precedence. For example, the
          following statement produces two rows, not one:
        </p><pre class="programlisting">(SELECT ... LIMIT 1) LIMIT 2;
</pre></li><li><p>
          <a class="indexterm" name="id2208932"></a>

          A <code class="literal">PROCEDURE</code> clause names a procedure that
          should process the data in the result set. For an example, see
          <a href="extending-mysql.html#procedure-analyse" title="31.4.1. PROCEDURE ANALYSE">Section 31.4.1, “<code class="literal">PROCEDURE ANALYSE</code>”</a>.
        </p></li><li><p>
          <a class="indexterm" name="id2208959"></a>

          <a class="indexterm" name="id2208968"></a>

          The <code class="literal">SELECT ... INTO OUTFILE
          '<em class="replaceable"><code>file_name</code></em>'</code> form of
          <code class="literal">SELECT</code> writes the selected rows to a file.
          The file is created on the server host, so you must have the
          <code class="literal">FILE</code> privilege to use this syntax.
          <em class="replaceable"><code>file_name</code></em> cannot be an existing
          file, which among other things prevents files such as
          <code class="filename">/etc/passwd</code> and database tables from
          being destroyed. As of MySQL 5.1.6, the
          <code class="literal">character_set_filesystem</code> system variable
          controls the interpretation of the filename.
        </p><p>
          The <code class="literal">SELECT ... INTO OUTFILE</code> statement is
          intended primarily to let you very quickly dump a table to a
          text file on the server machine. If you want to create the
          resulting file on some client host other than the server host,
          you cannot use <code class="literal">SELECT ... INTO OUTFILE</code>. In
          that case, you should instead use a command such as
          <code class="literal">mysql -e "SELECT ..." &gt;
          <em class="replaceable"><code>file_name</code></em></code> to generate the
          file on the client host.
        </p><p>
          <code class="literal">SELECT ... INTO OUTFILE</code> is the complement
          of <code class="literal">LOAD DATA INFILE</code>; the syntax for the
          <em class="replaceable"><code>export_options</code></em> part of the
          statement consists of the same <code class="literal">FIELDS</code> and
          <code class="literal">LINES</code> clauses that are used with the
          <code class="literal">LOAD DATA INFILE</code> statement. See
          <a href="sql-syntax.html#load-data" title="12.2.5. LOAD DATA INFILE Syntax">Section 12.2.5, “<code class="literal">LOAD DATA INFILE</code> Syntax”</a>.
        </p><p>
          Column values are dumped using the <code class="literal">binary</code>
          character set. In effect, there is no character set
          conversion. If a table contains columns in several character
          sets, the output data file will as well and you may not be
          able to reload the file correctly.
        </p><p>
          <code class="literal">FIELDS ESCAPED BY</code> controls how to write
          special characters. If the <code class="literal">FIELDS ESCAPED
          BY</code> character is not empty, it is used as a prefix
          that precedes following characters on output:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              The <code class="literal">FIELDS ESCAPED BY</code> character
            </p></li><li><p>
              The <code class="literal">FIELDS [OPTIONALLY] ENCLOSED BY</code>
              character
            </p></li><li><p>
              The first character of the <code class="literal">FIELDS TERMINATED
              BY</code> and <code class="literal">LINES TERMINATED BY</code>
              values
            </p></li><li><p>
              ASCII <code class="literal">NUL</code> (the zero-valued byte; what
              is actually written following the escape character is
              ASCII “<span class="quote"><code class="literal">0</code></span>”, not a
              zero-valued byte)
            </p></li></ul></div><p>
          The <code class="literal">FIELDS TERMINATED BY</code>, <code class="literal">ENCLOSED
          BY</code>, <code class="literal">ESCAPED BY</code>, or <code class="literal">LINES
          TERMINATED BY</code> characters <span class="emphasis"><em>must</em></span>
          be escaped so that you can read the file back in reliably.
          ASCII <code class="literal">NUL</code> is escaped to make it easier to
          view with some pagers.
        </p><p>
          The resulting file does not have to conform to SQL syntax, so
          nothing else need be escaped.
        </p><p>
          If the <code class="literal">FIELDS ESCAPED BY</code> character is
          empty, no characters are escaped and <code class="literal">NULL</code>
          is output as <code class="literal">NULL</code>, not
          <code class="literal">\N</code>. It is probably not a good idea to
          specify an empty escape character, particularly if field
          values in your data contain any of the characters in the list
          just given.
        </p><a class="indexterm" name="id2209256"></a><a class="indexterm" name="id2209265"></a><p>
          Here is an example that produces a file in the comma-separated
          values (CSV) format used by many programs:
        </p><pre class="programlisting">SELECT a,b,a+b INTO OUTFILE '/tmp/result.txt'
  FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
  LINES TERMINATED BY '\n'
  FROM test_table;
</pre></li><li><p>
          <a class="indexterm" name="id2209291"></a>

          If you use <code class="literal">INTO DUMPFILE</code> instead of
          <code class="literal">INTO OUTFILE</code>, MySQL writes only one row
          into the file, without any column or line termination and
          without performing any escape processing. This is useful if
          you want to store a <code class="literal">BLOB</code> value in a file.
        </p></li><li><p>
          The <code class="literal">INTO</code> clause can name a list of one or
          more variables, which can be user-defined variables, or
          parameters or local variables within a stored function or
          procedure body (see <a href="stored-procedures.html#select-into-statement" title="23.2.9.3. SELECT ... INTO Statement">Section 23.2.9.3, “<code class="literal">SELECT ... INTO</code> Statement”</a>).
          The selected values are assigned to the variables. The number
          of variables must match the number of columns.
        </p></li><li><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Any file created by <code class="literal">INTO OUTFILE</code> or
            <code class="literal">INTO DUMPFILE</code> is writable by all users on
            the server host. The reason for this is that the MySQL
            server cannot create a file that is owned by anyone other
            than the user under whose account it is running. (You should
            <span class="emphasis"><em>never</em></span> run <span><strong class="command">mysqld</strong></span> as
            <code class="literal">root</code> for this and other reasons.) The
            file thus must be world-writable so that you can manipulate
            its contents.
          </p></div></li><li><p>
          The <code class="literal">SELECT</code> syntax description at the
          beginning this section shows the <code class="literal">INTO</code>
          clause near the end of the statement. It is also possible to
          use <code class="literal">INTO</code> immediately following the
          <em class="replaceable"><code>select_expr</code></em> list.
        </p></li><li><p>
          An <code class="literal">INTO</code> clause should not be used in a
          nested <code class="literal">SELECT</code> because such a
          <code class="literal">SELECT</code> must return its result to the outer
          context.
        </p></li><li><p>
          <a class="indexterm" name="id2209441"></a>

          <a class="indexterm" name="id2209450"></a>

          If you use <code class="literal">FOR UPDATE</code> with a storage engine
          that uses page or row locks, rows examined by the query are
          write-locked until the end of the current transaction. Using
          <code class="literal">LOCK IN SHARE MODE</code> sets a shared lock that
          allows other transactions to read the examined rows but not to
          update or delete them. See
          <a href="storage-engines.html#innodb-locking-reads" title="13.5.10.5. SELECT ... FOR UPDATE and SELECT ... LOCK IN
        SHARE MODE Locking Reads">Section 13.5.10.5, “<code class="literal">SELECT ... FOR UPDATE</code> and <code class="literal">SELECT ... LOCK IN
        SHARE MODE</code> Locking Reads”</a>.
        </p></li></ul></div><p>
      Following the <code class="literal">SELECT</code> keyword, you can use a
      number of options that affect the operation of the statement.
    </p><a class="indexterm" name="id2209492"></a><a class="indexterm" name="id2209501"></a><a class="indexterm" name="id2209510"></a><p>
      The <code class="literal">ALL</code>, <code class="literal">DISTINCT</code>, and
      <code class="literal">DISTINCTROW</code> options specify whether duplicate
      rows should be returned. If none of these options are given, the
      default is <code class="literal">ALL</code> (all matching rows are
      returned). <code class="literal">DISTINCT</code> and
      <code class="literal">DISTINCTROW</code> are synonyms and specify removal of
      duplicate rows from the result set.
    </p><p>
      <code class="literal">HIGH_PRIORITY</code>,
      <code class="literal">STRAIGHT_JOIN</code>, and options beginning with
      <code class="literal">SQL_</code> are MySQL extensions to standard SQL.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a class="indexterm" name="id2209587"></a>

          <code class="literal">HIGH_PRIORITY</code> gives the
          <code class="literal">SELECT</code> higher priority than a statement
          that updates a table. You should use this only for queries
          that are very fast and must be done at once. A <code class="literal">SELECT
          HIGH_PRIORITY</code> query that is issued while the table
          is locked for reading runs even if there is an update
          statement waiting for the table to be free. This affects only
          storage engines that use only table-level locking
          (<code class="literal">MyISAM</code>, <code class="literal">MEMORY</code>,
          <code class="literal">MERGE</code>).
        </p><p>
          <code class="literal">HIGH_PRIORITY</code> cannot be used with
          <code class="literal">SELECT</code> statements that are part of a
          <code class="literal">UNION</code>.
        </p></li><li><p>
          <a class="indexterm" name="id2209663"></a>

          <code class="literal">STRAIGHT_JOIN</code> forces the optimizer to join
          the tables in the order in which they are listed in the
          <code class="literal">FROM</code> clause. You can use this to speed up a
          query if the optimizer joins the tables in non-optimal order.
          <code class="literal">STRAIGHT_JOIN</code> also can be used in the
          <em class="replaceable"><code>table_references</code></em> list. See
          <a href="sql-syntax.html#join" title="12.2.7.1. JOIN Syntax">Section 12.2.7.1, “<code class="literal">JOIN</code> Syntax”</a>.
        </p><p>
          <a class="indexterm" name="id2209703"></a>

          <a class="indexterm" name="id2209716"></a>

          <code class="literal">STRAIGHT_JOIN</code> does not apply to any table
          that the optimizer treats as a <code class="literal">const</code> or
          <code class="literal">system</code> table. Such a table produces a
          single row, is read during the optimization phase of query
          execution, and references to its columns are replaced with the
          appropriate column values before query execution proceeds.
          These tables will appear first in the query plan displayed by
          <code class="literal">EXPLAIN</code>. See
          <a href="optimization.html#using-explain" title="7.2.1. Optimizing Queries with EXPLAIN">Section 7.2.1, “Optimizing Queries with <code class="literal">EXPLAIN</code>”</a>. This exception may not apply
          to <code class="literal">const</code> or <code class="literal">system</code>
          tables that are used on the
          <code class="literal">NULL</code>-complemented side of an outer join
          (that is, the right-side table of a <code class="literal">LEFT
          JOIN</code> or the left-side table of a <code class="literal">RIGHT
          JOIN</code>.
        </p></li><li><p>
          <a class="indexterm" name="id2209797"></a>

          <code class="literal">SQL_BIG_RESULT</code> can be used with
          <code class="literal">GROUP BY</code> or <code class="literal">DISTINCT</code> to
          tell the optimizer that the result set has many rows. In this
          case, MySQL directly uses disk-based temporary tables if
          needed, and prefers sorting to using a temporary table with a
          key on the <code class="literal">GROUP BY</code> elements.
        </p></li><li><p>
          <a class="indexterm" name="id2209838"></a>

          <code class="literal">SQL_BUFFER_RESULT</code> forces the result to be
          put into a temporary table. This helps MySQL free the table
          locks early and helps in cases where it takes a long time to
          send the result set to the client.
        </p></li><li><p>
          <a class="indexterm" name="id2209862"></a>

          <code class="literal">SQL_SMALL_RESULT</code> can be used with
          <code class="literal">GROUP BY</code> or <code class="literal">DISTINCT</code> to
          tell the optimizer that the result set is small. In this case,
          MySQL uses fast temporary tables to store the resulting table
          instead of using sorting. This should not normally be needed.
        </p></li><li><p>
          <a class="indexterm" name="id2209897"></a>

          <code class="literal">SQL_CALC_FOUND_ROWS</code> tells MySQL to
          calculate how many rows there would be in the result set,
          disregarding any <code class="literal">LIMIT</code> clause. The number
          of rows can then be retrieved with <code class="literal">SELECT
          FOUND_ROWS()</code>. See
          <a href="functions.html#information-functions" title="11.11.3. Information Functions">Section 11.11.3, “Information Functions”</a>.
        </p></li><li><p>
          <a class="indexterm" name="id2209936"></a>

          <a class="indexterm" name="id2209945"></a>

          The <code class="literal">SQL_CACHE</code> and
          <code class="literal">SQL_NO_CACHE</code> options affect caching of
          query results in the query cache (see
          <a href="optimization.html#query-cache" title="7.5.4. The MySQL Query Cache">Section 7.5.4, “The MySQL Query Cache”</a>). <code class="literal">SQL_CACHE</code>
          tells MySQL to store the result in the query cache if it is
          cacheable and the value of the
          <code class="literal">query_cache_type</code> system variable is
          <code class="literal">2</code> or <code class="literal">DEMAND</code>.
          <code class="literal">SQL_NO_CACHE</code> tells MySQL not to store the
          result in the query cache. For a query that uses
          <code class="literal">UNION</code>, subqueries, or views, the following
          rules apply:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">SQL_NO_CACHE</code> applies if it appears in
              any <code class="literal">SELECT</code> in the query.
            </p></li><li><p>
              For a cacheable query, <code class="literal">SQL_CACHE</code>
              applies if it appears in the first
              <code class="literal">SELECT</code> of the query, or in the first
              <code class="literal">SELECT</code> of a view referred to by the
              query.
            </p></li></ul></div></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="join"></a>12.2.7.1. <code class="literal">JOIN</code> Syntax</h4></div></div></div><a class="indexterm" name="id2210073"></a><a class="indexterm" name="id2210082"></a><a class="indexterm" name="id2210090"></a><a class="indexterm" name="id2210099"></a><a class="indexterm" name="id2210108"></a><a class="indexterm" name="id2210117"></a><a class="indexterm" name="id2210126"></a><a class="indexterm" name="id2210135"></a><a class="indexterm" name="id2210144"></a><a class="indexterm" name="id2210153"></a><a class="indexterm" name="id2210162"></a><a class="indexterm" name="id2210171"></a><a class="indexterm" name="id2210180"></a><p>
        MySQL supports the following <code class="literal">JOIN</code> syntaxes
        for the <em class="replaceable"><code>table_references</code></em> part of
        <code class="literal">SELECT</code> statements and multiple-table
        <code class="literal">DELETE</code> and <code class="literal">UPDATE</code>
        statements:
      </p><pre class="programlisting"><em class="replaceable"><code>table_references:</code></em>
    <em class="replaceable"><code>table_reference</code></em> [, <em class="replaceable"><code>table_reference</code></em>] ...

<em class="replaceable"><code>table_reference</code></em>:
    <em class="replaceable"><code>table_factor</code></em>
  | <em class="replaceable"><code>join_table</code></em>

<em class="replaceable"><code>table_factor</code></em>:
    <em class="replaceable"><code>tbl_name</code></em> [[AS] <em class="replaceable"><code>alias</code></em>] [<em class="replaceable"><code>index_hint_list</code></em>]
  | <em class="replaceable"><code>table_subquery</code></em> [AS] <em class="replaceable"><code>alias</code></em>
  | ( <em class="replaceable"><code>table_references</code></em> )
  | { OJ <em class="replaceable"><code>table_reference</code></em> LEFT OUTER JOIN <em class="replaceable"><code>table_reference</code></em>
        ON <em class="replaceable"><code>conditional_expr</code></em> }

<em class="replaceable"><code>join_table</code></em>:
    <em class="replaceable"><code>table_reference</code></em> [INNER | CROSS] JOIN <em class="replaceable"><code>table_factor</code></em> [<em class="replaceable"><code>join_condition</code></em>]
  | <em class="replaceable"><code>table_reference</code></em> STRAIGHT_JOIN <em class="replaceable"><code>table_factor</code></em>
  | <em class="replaceable"><code>table_reference</code></em> STRAIGHT_JOIN <em class="replaceable"><code>table_factor</code></em> ON <em class="replaceable"><code>conditional_expr</code></em>
  | <em class="replaceable"><code>table_reference</code></em> {LEFT|RIGHT} [OUTER] JOIN <em class="replaceable"><code>table_reference</code></em> <em class="replaceable"><code>join_condition</code></em>
  | <em class="replaceable"><code>table_reference</code></em> NATURAL [{LEFT|RIGHT} [OUTER]] JOIN <em class="replaceable"><code>table_factor</code></em>

<em class="replaceable"><code>join_condition</code></em>:
    ON <em class="replaceable"><code>conditional_expr</code></em>
  | USING (<em class="replaceable"><code>column_list</code></em>)

<em class="replaceable"><code>index_hint_list</code></em>:
    <em class="replaceable"><code>index_hint</code></em> [, <em class="replaceable"><code>index_hint</code></em>] ...

<em class="replaceable"><code>index_hint</code></em>:
    USE {INDEX|KEY}
      [{FOR {JOIN|ORDER BY|GROUP BY}] ([<em class="replaceable"><code>index_list</code></em>])
  | IGNORE {INDEX|KEY}
      [{FOR {JOIN|ORDER BY|GROUP BY}] (<em class="replaceable"><code>index_list</code></em>)
  | FORCE {INDEX|KEY}
      [{FOR {JOIN|ORDER BY|GROUP BY}] (<em class="replaceable"><code>index_list</code></em>)

<em class="replaceable"><code>index_list</code></em>:
    <em class="replaceable"><code>index_name</code></em> [, <em class="replaceable"><code>index_name</code></em>] ...
</pre><p>
        A table reference is also known as a join expression.
      </p><p>
        The syntax of <em class="replaceable"><code>table_factor</code></em> is
        extended in comparison with the SQL Standard. The latter accepts
        only <em class="replaceable"><code>table_reference</code></em>, not a list of
        them inside a pair of parentheses.
      </p><p>
        This is a conservative extension if we consider each comma in a
        list of <em class="replaceable"><code>table_reference</code></em> items as
        equivalent to an inner join. For example:
      </p><pre class="programlisting">SELECT * FROM t1 LEFT JOIN (t2, t3, t4)
                 ON (t2.a=t1.a AND t3.b=t1.b AND t4.c=t1.c)
</pre><p>
        is equivalent to:
      </p><pre class="programlisting">SELECT * FROM t1 LEFT JOIN (t2 CROSS JOIN t3 CROSS JOIN t4)
                 ON (t2.a=t1.a AND t3.b=t1.b AND t4.c=t1.c)
</pre><p>
        In MySQL, <code class="literal">CROSS JOIN</code> is a syntactic
        equivalent to <code class="literal">INNER JOIN</code> (they can replace
        each other). In standard SQL, they are not equivalent.
        <code class="literal">INNER JOIN</code> is used with an
        <code class="literal">ON</code> clause, <code class="literal">CROSS JOIN</code> is
        used otherwise.
      </p><p>
        In general, parentheses can be ignored in join expressions
        containing only inner join operations. MySQL also supports
        nested joins (see <a href="optimization.html#nested-joins" title="7.2.10. Nested Join Optimization">Section 7.2.10, “Nested Join Optimization”</a>).
      </p><p>
        Index hints can be specified to affect how the MySQL optimizer
        makes use of indexes. For more information, see
        <a href="sql-syntax.html#index-hints" title="12.2.7.2. Index Hint Syntax">Section 12.2.7.2, “Index Hint Syntax”</a>.
      </p><p>
        The following list describes general factors to take into
        account when writing joins.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            A table reference can be aliased using
            <code class="literal"><em class="replaceable"><code>tbl_name</code></em> AS
            <em class="replaceable"><code>alias_name</code></em></code> or
            <em class="replaceable"><code>tbl_name alias_name</code></em>:
          </p><pre class="programlisting">SELECT t1.name, t2.salary
  FROM employee AS t1 INNER JOIN info AS t2 ON t1.name = t2.name;

SELECT t1.name, t2.salary
  FROM employee t1 INNER JOIN info t2 ON t1.name = t2.name;
</pre></li><li><p>
            A <em class="replaceable"><code>table_subquery</code></em> is also known as
            a subquery in the <code class="literal">FROM</code> clause. Such
            subqueries <span class="emphasis"><em>must</em></span> include an alias to
            give the subquery result a table name. A trivial example
            follows; see also <a href="sql-syntax.html#unnamed-views" title="12.2.8.8. Subqueries in the FROM clause">Section 12.2.8.8, “Subqueries in the <code class="literal">FROM</code> clause”</a>.
          </p><pre class="programlisting">SELECT * FROM (SELECT 1, 2, 3) AS t1;
</pre></li><li><p>
            <code class="literal">INNER JOIN</code> and <code class="literal">,</code>
            (comma) are semantically equivalent in the absence of a join
            condition: both produce a Cartesian product between the
            specified tables (that is, each and every row in the first
            table is joined to each and every row in the second table).
          </p><p>
            However, the precedence of the comma operator is less than
            of <code class="literal">INNER JOIN</code>, <code class="literal">CROSS
            JOIN</code>, <code class="literal">LEFT JOIN</code>, and so on. If
            you mix comma joins with the other join types when there is
            a join condition, an error of the form <code class="literal">Unknown
            column '<em class="replaceable"><code>col_name</code></em>' in 'on
            clause'</code> may occur. Information about dealing with
            this problem is given later in this section.
          </p></li><li><p>
            The <em class="replaceable"><code>conditional_expr</code></em> used with
            <code class="literal">ON</code> is any conditional expression of the
            form that can be used in a <code class="literal">WHERE</code> clause.
            Generally, you should use the <code class="literal">ON</code> clause
            for conditions that specify how to join tables, and the
            <code class="literal">WHERE</code> clause to restrict which rows you
            want in the result set.
          </p></li><li><p>
            If there is no matching row for the right table in the
            <code class="literal">ON</code> or <code class="literal">USING</code> part in a
            <code class="literal">LEFT JOIN</code>, a row with all columns set to
            <code class="literal">NULL</code> is used for the right table. You can
            use this fact to find rows in a table that have no
            counterpart in another table:
          </p><pre class="programlisting">SELECT left_tbl.*
  FROM left_tbl LEFT JOIN right_tbl ON left_tbl.id = right_tbl.id
  WHERE right_tbl.id IS NULL;
</pre><p>
            This example finds all rows in <code class="literal">left_tbl</code>
            with an <code class="literal">id</code> value that is not present in
            <code class="literal">right_tbl</code> (that is, all rows in
            <code class="literal">left_tbl</code> with no corresponding row in
            <code class="literal">right_tbl</code>). This assumes that
            <code class="literal">right_tbl.id</code> is declared <code class="literal">NOT
            NULL</code>. See
            <a href="optimization.html#left-join-optimization" title="7.2.9. LEFT JOIN and RIGHT JOIN
        Optimization">Section 7.2.9, “<code class="literal">LEFT JOIN</code> and <code class="literal">RIGHT JOIN</code>
        Optimization”</a>.
          </p></li><li><p>
            The
            <code class="literal">USING(<em class="replaceable"><code>column_list</code></em>)</code>
            clause names a list of columns that must exist in both
            tables. If tables <code class="literal">a</code> and
            <code class="literal">b</code> both contain columns
            <code class="literal">c1</code>, <code class="literal">c2</code>, and
            <code class="literal">c3</code>, the following join compares
            corresponding columns from the two tables:
          </p><pre class="programlisting">a LEFT JOIN b USING (c1,c2,c3)
</pre></li><li><p>
            The <code class="literal">NATURAL [LEFT] JOIN</code> of two tables is
            defined to be semantically equivalent to an <code class="literal">INNER
            JOIN</code> or a <code class="literal">LEFT JOIN</code> with a
            <code class="literal">USING</code> clause that names all columns that
            exist in both tables.
          </p></li><li><p>
            <code class="literal">RIGHT JOIN</code> works analogously to
            <code class="literal">LEFT JOIN</code>. To keep code portable across
            databases, it is recommended that you use <code class="literal">LEFT
            JOIN</code> instead of <code class="literal">RIGHT JOIN</code>.
          </p></li><li><p>
            <a class="indexterm" name="id2210870"></a>

            <a class="indexterm" name="id2210879"></a>

            The <code class="literal">{ OJ ... LEFT OUTER JOIN ...}</code> syntax
            shown in the join syntax description exists only for
            compatibility with ODBC. The curly braces in the syntax
            should be written literally; they are not metasyntax as used
            elsewhere in syntax descriptions.
          </p><p>
            As of MySQL 5.1.24, you can use other types of joins within
            <code class="literal">{ OJ ... }</code>, such as <code class="literal">INNER
            JOIN</code> or <code class="literal">RIGHT OUTER JOIN</code>. This
            helps with compatibility with some third-party applications,
            but is not official ODBC syntax.
          </p></li><li><p>
            <code class="literal">STRAIGHT_JOIN</code> is similar to
            <code class="literal">JOIN</code>, except that the left table is
            always read before the right table. This can be used for
            those (few) cases for which the join optimizer puts the
            tables in the wrong order.
          </p></li></ul></div><p>
        Some join examples:
      </p><pre class="programlisting">SELECT * FROM table1, table2;

SELECT * FROM table1 INNER JOIN table2 ON table1.id=table2.id;

SELECT * FROM table1 LEFT JOIN table2 ON table1.id=table2.id;

SELECT * FROM table1 LEFT JOIN table2 USING (id);

SELECT * FROM table1 LEFT JOIN table2 ON table1.id=table2.id
  LEFT JOIN table3 ON table2.id=table3.id;
</pre><p>
        <span class="bold"><strong>Join Processing Changes in MySQL
        5.0.12</strong></span>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Natural joins and joins with <code class="literal">USING</code>,
          including outer join variants, are processed according to the
          SQL:2003 standard. The goal was to align the syntax and
          semantics of MySQL with respect to <code class="literal">NATURAL
          JOIN</code> and <code class="literal">JOIN ... USING</code> according
          to SQL:2003. However, these changes in join processing can
          result in different output columns for some joins. Also, some
          queries that appeared to work correctly in older versions
          (prior to 5.0.12) must be rewritten to comply with the
          standard.
        </p></div><p>
        These changes have five main aspects:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The way that MySQL determines the result columns of
            <code class="literal">NATURAL</code> or <code class="literal">USING</code> join
            operations (and thus the result of the entire
            <code class="literal">FROM</code> clause).
          </p></li><li><p>
            Expansion of <code class="literal">SELECT *</code> and <code class="literal">SELECT
            <em class="replaceable"><code>tbl_name</code></em>.*</code> into a list
            of selected columns.
          </p></li><li><p>
            Resolution of column names in <code class="literal">NATURAL</code> or
            <code class="literal">USING</code> joins.
          </p></li><li><p>
            Transformation of <code class="literal">NATURAL</code> or
            <code class="literal">USING</code> joins into <code class="literal">JOIN ...
            ON</code>.
          </p></li><li><p>
            Resolution of column names in the <code class="literal">ON</code>
            condition of a <code class="literal">JOIN ... ON</code>.
          </p></li></ul></div><p>
        The following list provides more detail about several effects of
        current join processing versus join processing in older
        versions. The term “<span class="quote">previously</span>” means “<span class="quote">prior
        to MySQL 5.0.12.</span>”
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The columns of a <code class="literal">NATURAL</code> join or a
            <code class="literal">USING</code> join may be different from
            previously. Specifically, redundant output columns no longer
            appear, and the order of columns for <code class="literal">SELECT
            *</code> expansion may be different from before.
          </p><p>
            Consider this set of statements:
          </p><pre class="programlisting">CREATE TABLE t1 (i INT, j INT);
CREATE TABLE t2 (k INT, j INT);
INSERT INTO t1 VALUES(1,1);
INSERT INTO t2 VALUES(1,1);
SELECT * FROM t1 NATURAL JOIN t2;
SELECT * FROM t1 JOIN t2 USING (j);
</pre><p>
            Previously, the statements produced this output:
          </p><pre class="programlisting">+------+------+------+------+
| i    | j    | k    | j    |
+------+------+------+------+
|    1 |    1 |    1 |    1 |
+------+------+------+------+
+------+------+------+------+
| i    | j    | k    | j    |
+------+------+------+------+
|    1 |    1 |    1 |    1 |
+------+------+------+------+
</pre><p>
            In the first <code class="literal">SELECT</code> statement, column
            <code class="literal">j</code> appears in both tables and thus becomes
            a join column, so, according to standard SQL, it should
            appear only once in the output, not twice. Similarly, in the
            second SELECT statement, column <code class="literal">j</code> is
            named in the <code class="literal">USING</code> clause and should
            appear only once in the output, not twice. But in both
            cases, the redundant column is not eliminated. Also, the
            order of the columns is not correct according to standard
            SQL.
          </p><p>
            Now the statements produce this output:
          </p><pre class="programlisting">+------+------+------+
| j    | i    | k    |
+------+------+------+
|    1 |    1 |    1 |
+------+------+------+
+------+------+------+
| j    | i    | k    |
+------+------+------+
|    1 |    1 |    1 |
+------+------+------+
</pre><p>
            The redundant column is eliminated and the column order is
            correct according to standard SQL:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                First, coalesced common columns of the two joined
                tables, in the order in which they occur in the first
                table
              </p></li><li><p>
                Second, columns unique to the first table, in order in
                which they occur in that table
              </p></li><li><p>
                Third, columns unique to the second table, in order in
                which they occur in that table
              </p></li></ul></div><p>
            The single result column that replaces two common columns is
            defined via the coalesce operation. That is, for two
            <code class="literal">t1.a</code> and <code class="literal">t2.a</code> the
            resulting single join column <code class="literal">a</code> is defined
            as <code class="literal">a = COALESCE(t1.a, t2.a)</code>, where:
          </p><pre class="programlisting">COALESCE(x, y) = (CASE WHEN V1 IS NOT NULL THEN V1 ELSE V2 END)
</pre><p>
            If the join operation is any other join, the result columns
            of the join consists of the concatenation of all columns of
            the joined tables. This is the same as previously.
          </p><p>
            A consequence of the definition of coalesced columns is
            that, for outer joins, the coalesced column contains the
            value of the non-<code class="literal">NULL</code> column if one of
            the two columns is always <code class="literal">NULL</code>. If
            neither or both columns are <code class="literal">NULL</code>, both
            common columns have the same value, so it doesn't matter
            which one is chosen as the value of the coalesced column. A
            simple way to interpret this is to consider that a coalesced
            column of an outer join is represented by the common column
            of the inner table of a <code class="literal">JOIN</code>. Suppose
            that the tables <code class="literal">t1(a,b)</code> and
            <code class="literal">t2(a,c)</code> have the following contents:
          </p><pre class="programlisting">t1    t2
----  ----
1 x   2 z
2 y   3 w
</pre><p>
            Then:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM t1 NATURAL LEFT JOIN t2;</code></strong>
+------+------+------+
| a    | b    | c    |
+------+------+------+
|    1 | x    | NULL |
|    2 | y    | z    |
+------+------+------+
</pre><p>
            Here column <code class="literal">a</code> contains the values of
            <code class="literal">t1.a</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM t1 NATURAL RIGHT JOIN t2;</code></strong>
+------+------+------+
| a    | c    | b    |
+------+------+------+
|    2 | z    | y    |
|    3 | w    | NULL |
+------+------+------+
</pre><p>
            Here column <code class="literal">a</code> contains the values of
            <code class="literal">t2.a</code>.
          </p><p>
            Compare these results to the otherwise equivalent queries
            with <code class="literal">JOIN ... ON</code>:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM t1 LEFT JOIN t2 ON (t1.a = t2.a);</code></strong>
+------+------+------+------+
| a    | b    | a    | c    |
+------+------+------+------+
|    1 | x    | NULL | NULL |
|    2 | y    |    2 | z    |
+------+------+------+------+
</pre><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM t1 RIGHT JOIN t2 ON (t1.a = t2.a);</code></strong>
+------+------+------+------+
| a    | b    | a    | c    |
+------+------+------+------+
|    2 | y    |    2 | z    |
| NULL | NULL |    3 | w    |
+------+------+------+------+
</pre></li><li><p>
            Previously, a <code class="literal">USING</code> clause could be
            rewritten as an <code class="literal">ON</code> clause that compares
            corresponding columns. For example, the following two
            clauses were semantically identical:
          </p><pre class="programlisting">a LEFT JOIN b USING (c1,c2,c3)
a LEFT JOIN b ON a.c1=b.c1 AND a.c2=b.c2 AND a.c3=b.c3
</pre><p>
            Now the two clauses no longer are quite the same:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                With respect to determining which rows satisfy the join
                condition, both joins remain semantically identical.
              </p></li><li><p>
                With respect to determining which columns to display for
                <code class="literal">SELECT *</code> expansion, the two joins are
                not semantically identical. The <code class="literal">USING</code>
                join selects the coalesced value of corresponding
                columns, whereas the <code class="literal">ON</code> join selects
                all columns from all tables. For the preceding
                <code class="literal">USING</code> join, <code class="literal">SELECT
                *</code> selects these values:
              </p><pre class="programlisting">COALESCE(a.c1,b.c1), COALESCE(a.c2,b.c2), COALESCE(a.c3,b.c3)
</pre><p>
                For the <code class="literal">ON</code> join, <code class="literal">SELECT
                *</code> selects these values:
              </p><pre class="programlisting">a.c1, a.c2, a.c3, b.c1, b.c2, b.c3
</pre><p>
                With an inner join,
                <a href="functions.html#function_coalesce"><code class="literal">COALESCE(a.c1,b.c1)</code></a> is
                the same as either <code class="literal">a.c1</code> or
                <code class="literal">b.c1</code> because both columns will have
                the same value. With an outer join (such as
                <code class="literal">LEFT JOIN</code>), one of the two columns
                can be <code class="literal">NULL</code>. That column will be
                omitted from the result.
              </p></li></ul></div></li><li><p>
            The evaluation of multi-way natural joins differs in a very
            important way that affects the result of
            <code class="literal">NATURAL</code> or <code class="literal">USING</code> joins
            and that can require query rewriting. Suppose that you have
            three tables <code class="literal">t1(a,b)</code>,
            <code class="literal">t2(c,b)</code>, and <code class="literal">t3(a,c)</code>
            that each have one row: <code class="literal">t1(1,2)</code>,
            <code class="literal">t2(10,2)</code>, and
            <code class="literal">t3(7,10)</code>. Suppose also that you have this
            <code class="literal">NATURAL JOIN</code> on the three tables:
          </p><pre class="programlisting">SELECT ... FROM t1 NATURAL JOIN t2 NATURAL JOIN t3;
</pre><p>
            Previously, the left operand of the second join was
            considered to be <code class="literal">t2</code>, whereas it should be
            the nested join <code class="literal">(t1 NATURAL JOIN t2)</code>. As
            a result, the columns of <code class="literal">t3</code> are checked
            for common columns only in <code class="literal">t2</code>, and, if
            <code class="literal">t3</code> has common columns with
            <code class="literal">t1</code>, these columns are not used as
            equi-join columns. Thus, previously, the preceding query was
            transformed to the following equi-join:
          </p><pre class="programlisting">SELECT ... FROM t1, t2, t3
  WHERE t1.b = t2.b AND t2.c = t3.c;
</pre><p>
            That join is missing one more equi-join predicate
            <code class="literal">(t1.a = t3.a)</code>. As a result, it produces
            one row, not the empty result that it should. The correct
            equivalent query is this:
          </p><pre class="programlisting">SELECT ... FROM t1, t2, t3
  WHERE t1.b = t2.b AND t2.c = t3.c AND t1.a = t3.a;
</pre><p>
            If you require the same query result in current versions of
            MySQL as in older versions, rewrite the natural join as the
            first equi-join.
          </p></li><li><p>
            Previously, the comma operator (<code class="literal">,</code>) and
            <code class="literal">JOIN</code> both had the same precedence, so the
            join expression <code class="literal">t1, t2 JOIN t3</code> was
            interpreted as <code class="literal">((t1, t2) JOIN t3)</code>. Now
            <code class="literal">JOIN</code> has higher precedence, so the
            expression is interpreted as <code class="literal">(t1, (t2 JOIN
            t3))</code>. This change affects statements that use an
            <code class="literal">ON</code> clause, because that clause can refer
            only to columns in the operands of the join, and the change
            in precedence changes interpretation of what those operands
            are.
          </p><p>
            Example:
          </p><pre class="programlisting">CREATE TABLE t1 (i1 INT, j1 INT);
CREATE TABLE t2 (i2 INT, j2 INT);
CREATE TABLE t3 (i3 INT, j3 INT);
INSERT INTO t1 VALUES(1,1);
INSERT INTO t2 VALUES(1,1);
INSERT INTO t3 VALUES(1,1);
SELECT * FROM t1, t2 JOIN t3 ON (t1.i1 = t3.i3);
</pre><pre class="programlisting">SELECT left_tbl.*
  FROM { OJ left_tbl LEFT OUTER JOIN right_tbl ON left_tbl.id = right_tbl.id }
  WHERE right_tbl.id IS NULL;
</pre><p>
            Previously, the <code class="literal">SELECT</code> was legal due to
            the implicit grouping of <code class="literal">t1,t2</code> as
            <code class="literal">(t1,t2)</code>. Now the <code class="literal">JOIN</code>
            takes precedence, so the operands for the
            <code class="literal">ON</code> clause are <code class="literal">t2</code> and
            <code class="literal">t3</code>. Because <code class="literal">t1.i1</code> is
            not a column in either of the operands, the result is an
            <code class="literal">Unknown column 't1.i1' in 'on clause'</code>
            error. To allow the join to be processed, group the first
            two tables explicitly with parentheses so that the operands
            for the <code class="literal">ON</code> clause are
            <code class="literal">(t1,t2)</code> and <code class="literal">t3</code>:
          </p><pre class="programlisting">SELECT * FROM (t1, t2) JOIN t3 ON (t1.i1 = t3.i3);
</pre><p>
            Alternatively, avoid the use of the comma operator and use
            <code class="literal">JOIN</code> instead:
          </p><pre class="programlisting">SELECT * FROM t1 JOIN t2 JOIN t3 ON (t1.i1 = t3.i3);
</pre><p>
            This change also applies to statements that mix the comma
            operator with <code class="literal">INNER JOIN</code>, <code class="literal">CROSS
            JOIN</code>, <code class="literal">LEFT JOIN</code>, and
            <code class="literal">RIGHT JOIN</code>, all of which now have higher
            precedence than the comma operator.
          </p></li><li><p>
            Previously, the <code class="literal">ON</code> clause could refer to
            columns in tables named to its right. Now an
            <code class="literal">ON</code> clause can refer only to its operands.
          </p><p>
            Example:
          </p><pre class="programlisting">CREATE TABLE t1 (i1 INT);
CREATE TABLE t2 (i2 INT);
CREATE TABLE t3 (i3 INT);
SELECT * FROM t1 JOIN t2 ON (i1 = i3) JOIN t3;
</pre><p>
            Previously, the <code class="literal">SELECT</code> statement was
            legal. Now the statement fails with an <code class="literal">Unknown
            column 'i3' in 'on clause'</code> error because
            <code class="literal">i3</code> is a column in <code class="literal">t3</code>,
            which is not an operand of the <code class="literal">ON</code> clause.
            The statement should be rewritten as follows:
          </p><pre class="programlisting">SELECT * FROM t1 JOIN t2 JOIN t3 ON (i1 = i3);
</pre></li><li><p>
            Resolution of column names in <code class="literal">NATURAL</code> or
            <code class="literal">USING</code> joins is different than previously.
            For column names that are outside the
            <code class="literal">FROM</code> clause, MySQL now handles a superset
            of the queries compared to previously. That is, in cases
            when MySQL formerly issued an error that some column is
            ambiguous, the query now is handled correctly. This is due
            to the fact that MySQL now treats the common columns of
            <code class="literal">NATURAL</code> or <code class="literal">USING</code> joins
            as a single column, so when a query refers to such columns,
            the query compiler does not consider them as ambiguous.
          </p><p>
            Example:
          </p><pre class="programlisting">SELECT * FROM t1 NATURAL JOIN t2 WHERE b &gt; 1;
</pre><p>
            Previously, this query would produce an error <code class="literal">ERROR
            1052 (23000): Column 'b' in where clause is
            ambiguous</code>. Now the query produces the correct
            result:
          </p><pre class="programlisting">+------+------+------+
| b    | c    | y    |
+------+------+------+
|    4 |    2 |    3 |
+------+------+------+
</pre><p>
            One extension of MySQL compared to the SQL:2003 standard is
            that MySQL allows you to qualify the common (coalesced)
            columns of <code class="literal">NATURAL</code> or
            <code class="literal">USING</code> joins (just as previously), while
            the standard disallows that.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="index-hints"></a>12.2.7.2. Index Hint Syntax</h4></div></div></div><a class="indexterm" name="id2212084"></a><a class="indexterm" name="id2212093"></a><a class="indexterm" name="id2212106"></a><a class="indexterm" name="id2212115"></a><a class="indexterm" name="id2212124"></a><a class="indexterm" name="id2212132"></a><a class="indexterm" name="id2212141"></a><a class="indexterm" name="id2212150"></a><p>
        You can provide hints to give the optimizer information about
        how to choose indexes during query processing.
        <a href="sql-syntax.html#join" title="12.2.7.1. JOIN Syntax">Section 12.2.7.1, “<code class="literal">JOIN</code> Syntax”</a>, describes the general syntax for
        specifying tables in a <code class="literal">SELECT</code> statement. The
        syntax for an individual table, including that for index hints,
        looks like this:
      </p><pre class="programlisting"><em class="replaceable"><code>tbl_name</code></em> [[AS] <em class="replaceable"><code>alias</code></em>] [<em class="replaceable"><code>index_hint_list</code></em>]

<em class="replaceable"><code>index_hint_list</code></em>:
    <em class="replaceable"><code>index_hint</code></em> [, <em class="replaceable"><code>index_hint</code></em>] ...

<em class="replaceable"><code>index_hint</code></em>:
    USE {INDEX|KEY}
      [{FOR {JOIN|ORDER BY|GROUP BY}] ([<em class="replaceable"><code>index_list</code></em>])
  | IGNORE {INDEX|KEY}
      [{FOR {JOIN|ORDER BY|GROUP BY}] (<em class="replaceable"><code>index_list</code></em>)
  | FORCE {INDEX|KEY}
      [{FOR {JOIN|ORDER BY|GROUP BY}] (<em class="replaceable"><code>index_list</code></em>)

<em class="replaceable"><code>index_list</code></em>:
    <em class="replaceable"><code>index_name</code></em> [, <em class="replaceable"><code>index_name</code></em>] ...
</pre><p>
        By specifying <code class="literal">USE INDEX
        (<em class="replaceable"><code>index_list</code></em>)</code>, you can tell
        MySQL to use only one of the named indexes to find rows in the
        table. The alternative syntax <code class="literal">IGNORE INDEX
        (<em class="replaceable"><code>index_list</code></em>)</code> can be used to
        tell MySQL to not use some particular index or indexes. These
        hints are useful if <code class="literal">EXPLAIN</code> shows that MySQL
        is using the wrong index from the list of possible indexes.
      </p><p>
        You can also use <code class="literal">FORCE INDEX</code>, which acts like
        <code class="literal">USE INDEX
        (<em class="replaceable"><code>index_list</code></em>)</code> but with the
        addition that a table scan is assumed to be
        <span class="emphasis"><em>very</em></span> expensive. In other words, a table
        scan is used only if there is no way to use one of the given
        indexes to find rows in the table.
      </p><p>
        Each hint requires the names of <span class="emphasis"><em>indexes</em></span>,
        not the names of columns. The name of a <code class="literal">PRIMARY
        KEY</code> is <code class="literal">PRIMARY</code>. To see the index
        names for a table, use <code class="literal">SHOW INDEX</code>.
      </p><p>
        An <em class="replaceable"><code>index_name</code></em> value need not be a
        full index name. It can be an unambiguous prefix of an index
        name. If a prefix is given that is ambiguous, an error occurs.
      </p><p>
        Index hints do not work for <code class="literal">FULLTEXT</code> indexes.
      </p><p>
        Prior to MySQL 5.1.17, <code class="literal">USE INDEX</code>,
        <code class="literal">IGNORE INDEX</code>, and <code class="literal">FORCE
        INDEX</code> affect only which indexes are used when MySQL
        decides how to find rows in the table and how to process joins.
        They do not affect whether an index is used when resolving an
        <code class="literal">ORDER BY</code> or <code class="literal">GROUP BY</code>
        clause.
      </p><p>
        Examples:
      </p><pre class="programlisting">SELECT * FROM table1 USE INDEX (col1_index,col2_index)
  WHERE col1=1 AND col2=2 AND col3=3;

SELECT * FROM table1 IGNORE INDEX (col3_index)
  WHERE col1=1 AND col2=2 AND col3=3;
</pre><p>
        As of MySQL 5.1.17, the syntax for index hints is extended in
        the following ways:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            It is syntactically valid to specify an empty
            <em class="replaceable"><code>index_list</code></em> for <code class="literal">USE
            INDEX</code>, which means “<span class="quote">use no indexes.</span>”
            Specifying an empty <em class="replaceable"><code>index_list</code></em>
            for <code class="literal">FORCE INDEX</code> or <code class="literal">IGNORE
            INDEX</code> is a syntax error.
          </p></li><li><p>
            You can specify the scope of a index hint by adding a
            <code class="literal">FOR</code> clause to the hint. This provides
            more fine-grained control over the optimizer's selection of
            an execution plan for various phases of query processing. To
            affect only the indexes used when MySQL decides how to find
            rows in the table and how to process joins, use <code class="literal">FOR
            JOIN</code>. To influence index usage for sorting or
            grouping rows, use <code class="literal">FOR ORDER BY</code> or
            <code class="literal">FOR GROUP BY</code>. (However, if there is a
            covering index for the table and it is used to access the
            table, the optimizer will ignore <code class="literal">IGNORE INDEX FOR
            {ORDER BY|GROUP BY}</code> hints that disable that
            index.)
          </p></li><li><p>
            You can specify multiple index hints:
          </p><pre class="programlisting">SELECT * FROM t1 USE INDEX (i1) IGNORE INDEX FOR ORDER BY (i2) ORDER BY a;
</pre><p>
            It is not a error to name the same index in several hints
            (even within the same hint):
          </p><pre class="programlisting">SELECT * FROM t1 USE INDEX (i1) USE INDEX (i1,i1);
</pre><p>
            However, it is an error to mix <code class="literal">USE INDEX</code>
            and <code class="literal">FORCE INDEX</code> for the same table:
          </p><pre class="programlisting">SELECT * FROM t1 USE INDEX FOR JOIN (i1) FORCE INDEX FOR JOIN (i2);
</pre></li></ul></div><p>
        The default scope of index hints also is changed as of MySQL
        5.1.17. Formerly, index hints applied only to how indexes are
        used for retrieval of records and not during resolution of
        <code class="literal">ORDER BY</code> or <code class="literal">GROUP BY</code>
        clauses. As of 5.1.17, if you specify no <code class="literal">FOR</code>
        clause for an index hint, the hint by default applies to all
        parts of the statement. For example, this hint:
      </p><pre class="programlisting">IGNORE INDEX (i1)
</pre><p>
        is equivalent to this combination of hints:
      </p><pre class="programlisting">IGNORE INDEX FOR JOIN (i1)
IGNORE INDEX FOR ORDER BY (i1)
IGNORE INDEX FOR GROUP BY (i1)
</pre><p>
        To cause the server to use the older behavior for hint scope
        when no <code class="literal">FOR</code> clause is present (so that hints
        apply only to row retrieval), enable the <code class="literal">old</code>
        system variable at server startup. Take care about enabling this
        variable in a replication setup. With statement-based binary
        logging, having different modes for the master and slaves might
        lead to replication errors.
      </p><p>
        When index hints are processed, they are collected in a single
        list by type (<code class="literal">USE</code>, <code class="literal">FORCE</code>,
        <code class="literal">IGNORE</code>) and by scope (<code class="literal">FOR
        JOIN</code>, <code class="literal">FOR ORDER BY</code>, <code class="literal">FOR
        GROUP BY</code>). For example:
      </p><pre class="programlisting">SELECT * FROM t1
  USE INDEX () IGNORE INDEX (i2) USE INDEX (i1) USE INDEX (i2);
</pre><p>
        is equivalent to:
      </p><pre class="programlisting">SELECT * FROM t1
   USE INDEX (i1,i2) IGNORE INDEX (i2);
</pre><p>
        The index hints then are applied for each scope in the following
        order:
      </p><div class="orderedlist"><ol type="1"><li><p>
            <code class="literal">{USE|FORCE} INDEX</code> is applied if present.
            (If not, the optimizer-determined set of indexes is used.)
          </p></li><li><p>
            <code class="literal">IGNORE INDEX</code> is applied over the result
            of the previous step. For example:
          </p><pre class="programlisting">SELECT * FROM t1 USE INDEX (i1) IGNORE INDEX (i2) USE INDEX (i2)
</pre><p>
            is equivalent to:
          </p><pre class="programlisting">SELECT * FROM t1 USE INDEX (i1).
</pre></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="union"></a>12.2.7.3. <code class="literal">UNION</code> Syntax</h4></div></div></div><a class="indexterm" name="id2212686"></a><pre class="programlisting">SELECT ...
UNION [ALL | DISTINCT] SELECT ...
[UNION [ALL | DISTINCT] SELECT ...]
</pre><p>
        <code class="literal">UNION</code> is used to combine the result from
        multiple <code class="literal">SELECT</code> statements into a single
        result set.
      </p><p>
        The column names from the first <code class="literal">SELECT</code>
        statement are used as the column names for the results returned.
        Selected columns listed in corresponding positions of each
        <code class="literal">SELECT</code> statement should have the same data
        type. (For example, the first column selected by the first
        statement should have the same type as the first column selected
        by the other statements.)
      </p><p>
        If the data types of corresponding <code class="literal">SELECT</code>
        columns do not match, the types and lengths of the columns in
        the <code class="literal">UNION</code> result take into account the values
        retrieved by all of the <code class="literal">SELECT</code> statements.
        For example, consider the following:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT REPEAT('a',1) UNION SELECT REPEAT('b',10);</code></strong>
+---------------+
| REPEAT('a',1) |
+---------------+
| a             |
| bbbbbbbbbb    |
+---------------+
</pre><p>
        (In some earlier versions of MySQL, only the type and length
        from the first <code class="literal">SELECT</code> would have been used
        and the second row would have been truncated to a length of 1.)
      </p><p>
        The <code class="literal">SELECT</code> statements are normal select
        statements, but with the following restrictions:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Only the last <code class="literal">SELECT</code> statement can use
            <code class="literal">INTO OUTFILE</code>. (However, the entire
            <code class="literal">UNION</code> result is written to the file.)
          </p></li><li><p>
            <code class="literal">HIGH_PRIORITY</code> cannot be used with
            <code class="literal">SELECT</code> statements that are part of a
            <code class="literal">UNION</code>. If you specify it for the first
            <code class="literal">SELECT</code>, it has no effect. If you specify
            it for any subsequent <code class="literal">SELECT</code> statements,
            a syntax error results.
          </p></li></ul></div><p>
        The default behavior for <code class="literal">UNION</code> is that
        duplicate rows are removed from the result. The optional
        <code class="literal">DISTINCT</code> keyword has no effect other than the
        default because it also specifies duplicate-row removal. With
        the optional <code class="literal">ALL</code> keyword, duplicate-row
        removal does not occur and the result includes all matching rows
        from all the <code class="literal">SELECT</code> statements.
      </p><p>
        You can mix <code class="literal">UNION ALL</code> and <code class="literal">UNION
        DISTINCT</code> in the same query. Mixed
        <code class="literal">UNION</code> types are treated such that a
        <code class="literal">DISTINCT</code> union overrides any
        <code class="literal">ALL</code> union to its left. A
        <code class="literal">DISTINCT</code> union can be produced explicitly by
        using <code class="literal">UNION DISTINCT</code> or implicitly by using
        <code class="literal">UNION</code> with no following
        <code class="literal">DISTINCT</code> or <code class="literal">ALL</code> keyword.
      </p><p>
        To use an <code class="literal">ORDER BY</code> or
        <code class="literal">LIMIT</code> clause to sort or limit the entire
        <code class="literal">UNION</code> result, parenthesize the individual
        <code class="literal">SELECT</code> statements and place the
        <code class="literal">ORDER BY</code> or <code class="literal">LIMIT</code> after
        the last one. The following example uses both clauses:
      </p><pre class="programlisting">(SELECT a FROM t1 WHERE a=10 AND B=1)
UNION
(SELECT a FROM t2 WHERE a=11 AND B=2)
ORDER BY a LIMIT 10;
</pre><p>
        This kind of <code class="literal">ORDER BY</code> cannot use column
        references that include a table name (that is, names in
        <em class="replaceable"><code>tbl_name</code></em>.<em class="replaceable"><code>col_name</code></em>
        format). Instead, provide a column alias in the first
        <code class="literal">SELECT</code> statement and refer to the alias in
        the <code class="literal">ORDER BY</code>. (Alternatively, refer to the
        column in the <code class="literal">ORDER BY</code> using its column
        position. However, use of column positions is deprecated.)
      </p><p>
        Also, if a column to be sorted is aliased, the <code class="literal">ORDER
        BY</code> clause <span class="emphasis"><em>must</em></span> refer to the
        alias, not the column name. The first of the following
        statements will work, but the second will fail with an
        <code class="literal">Unknown column 'a' in 'order clause'</code> error:
      </p><pre class="programlisting">(SELECT a AS b FROM t) UNION (SELECT ...) ORDER BY b;
(SELECT a AS b FROM t) UNION (SELECT ...) ORDER BY a;
</pre><p>
        To apply <code class="literal">ORDER BY</code> or <code class="literal">LIMIT</code>
        to an individual <code class="literal">SELECT</code>, place the clause
        inside the parentheses that enclose the
        <code class="literal">SELECT</code>:
      </p><pre class="programlisting">(SELECT a FROM t1 WHERE a=10 AND B=1 ORDER BY a LIMIT 10)
UNION
(SELECT a FROM t2 WHERE a=11 AND B=2 ORDER BY a LIMIT 10);
</pre><p>
        However, use of <code class="literal">ORDER BY</code> for individual
        <code class="literal">SELECT</code> statements implies nothing about the
        order in which the rows appear in the final result because
        <code class="literal">UNION</code> by default produces an unordered set of
        rows. Therefore, the use of <code class="literal">ORDER BY</code> in this
        context is typically in conjunction with
        <code class="literal">LIMIT</code>, so that it is used to determine the
        subset of the selected rows to retrieve for the
        <code class="literal">SELECT</code>, even though it does not necessarily
        affect the order of those rows in the final
        <code class="literal">UNION</code> result. If <code class="literal">ORDER BY</code>
        appears without <code class="literal">LIMIT</code> in a
        <code class="literal">SELECT</code>, it is optimized away because it will
        have no effect anyway.
      </p><p>
        To cause rows in a <code class="literal">UNION</code> result to consist of
        the sets of rows retrieved by each <code class="literal">SELECT</code> one
        after the other, select an additional column in each
        <code class="literal">SELECT</code> to use as a sort column and add an
        <code class="literal">ORDER BY</code> following the last
        <code class="literal">SELECT</code>:
      </p><pre class="programlisting">(SELECT 1 AS sort_col, col1a, col1b, ... FROM t1)
UNION
(SELECT 2, col2a, col2b, ... FROM t2) ORDER BY sort_col;
</pre><p>
        To additionally maintain sort order within individual
        <code class="literal">SELECT</code> results, add a secondary column to the
        <code class="literal">ORDER BY</code> clause:
      </p><pre class="programlisting">(SELECT 1 AS sort_col, col1a, col1b, ... FROM t1)
UNION
(SELECT 2, col2a, col2b, ... FROM t2) ORDER BY sort_col, col1a;
</pre><p>
        Use of an additional column also enables you to determine which
        <code class="literal">SELECT</code> each row comes from. Extra columns can
        provide other identifying information as well, such as a string
        that indicates a table name.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="subqueries"></a>12.2.8. Subquery Syntax</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#scalar-subqueries">12.2.8.1. The Subquery as Scalar Operand</a></span></dt><dt><span class="section"><a href="sql-syntax.html#comparisons-using-subqueries">12.2.8.2. Comparisons Using Subqueries</a></span></dt><dt><span class="section"><a href="sql-syntax.html#any-in-some-subqueries">12.2.8.3. Subqueries with <code class="literal">ANY</code>, <code class="literal">IN</code>, and
        <code class="literal">SOME</code></a></span></dt><dt><span class="section"><a href="sql-syntax.html#all-subqueries">12.2.8.4. Subqueries with <code class="literal">ALL</code></a></span></dt><dt><span class="section"><a href="sql-syntax.html#row-subqueries">12.2.8.5. Row Subqueries</a></span></dt><dt><span class="section"><a href="sql-syntax.html#exists-and-not-exists-subqueries">12.2.8.6. <code class="literal">EXISTS</code> and <code class="literal">NOT EXISTS</code></a></span></dt><dt><span class="section"><a href="sql-syntax.html#correlated-subqueries">12.2.8.7. Correlated Subqueries</a></span></dt><dt><span class="section"><a href="sql-syntax.html#unnamed-views">12.2.8.8. Subqueries in the <code class="literal">FROM</code> clause</a></span></dt><dt><span class="section"><a href="sql-syntax.html#subquery-errors">12.2.8.9. Subquery Errors</a></span></dt><dt><span class="section"><a href="sql-syntax.html#optimizing-subqueries">12.2.8.10. Optimizing Subqueries</a></span></dt><dt><span class="section"><a href="sql-syntax.html#rewriting-subqueries">12.2.8.11. Rewriting Subqueries as Joins</a></span></dt></dl></div><a class="indexterm" name="id2213277"></a><a class="indexterm" name="id2213286"></a><a class="indexterm" name="id2213295"></a><a class="indexterm" name="id2213304"></a><p>
      A subquery is a <code class="literal">SELECT</code> statement within another
      statement.
    </p><p>
      Starting with MySQL 4.1, all subquery forms and operations that
      the SQL standard requires are supported, as well as a few features
      that are MySQL-specific.
    </p><p>
      Here is an example of a subquery:
    </p><pre class="programlisting">SELECT * FROM t1 WHERE column1 = (SELECT column1 FROM t2);
</pre><p>
      In this example, <code class="literal">SELECT * FROM t1 ...</code> is the
      <span class="emphasis"><em>outer query</em></span> (or <span class="emphasis"><em>outer
      statement</em></span>), and <code class="literal">(SELECT column1 FROM
      t2)</code> is the <span class="emphasis"><em>subquery</em></span>. We say that
      the subquery is <span class="emphasis"><em>nested</em></span> within the outer
      query, and in fact it is possible to nest subqueries within other
      subqueries, to a considerable depth. A subquery must always appear
      within parentheses.
    </p><p>
      The main advantages of subqueries are:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          They allow queries that are <span class="emphasis"><em>structured</em></span> so
          that it is possible to isolate each part of a statement.
        </p></li><li><p>
          They provide alternative ways to perform operations that would
          otherwise require complex joins and unions.
        </p></li><li><p>
          They are, in many people's opinion, more readable than complex
          joins or unions. Indeed, it was the innovation of subqueries
          that gave people the original idea of calling the early SQL
          “<span class="quote">Structured Query Language.</span>”
        </p></li></ul></div><p>
      Here is an example statement that shows the major points about
      subquery syntax as specified by the SQL standard and supported in
      MySQL:
    </p><pre class="programlisting">DELETE FROM t1
WHERE s11 &gt; ANY
 (SELECT COUNT(*) /* no hint */ FROM t2
  WHERE NOT EXISTS
   (SELECT * FROM t3
    WHERE ROW(5*t2.s1,77)=
     (SELECT 50,11*s1 FROM t4 UNION SELECT 50,77 FROM
      (SELECT * FROM t5) AS t5)));
</pre><p>
      A subquery can return a scalar (a single value), a single row, a
      single column, or a table (one or more rows of one or more
      columns). These are called scalar, column, row, and table
      subqueries. Subqueries that return a particular kind of result
      often can be used only in certain contexts, as described in the
      following sections.
    </p><p>
      There are few restrictions on the type of statements in which
      subqueries can be used. A subquery can contain any of the keywords
      or clauses that an ordinary <code class="literal">SELECT</code> can contain:
      <code class="literal">DISTINCT</code>, <code class="literal">GROUP BY</code>,
      <code class="literal">ORDER BY</code>, <code class="literal">LIMIT</code>, joins,
      index hints, <code class="literal">UNION</code> constructs, comments,
      functions, and so on.
    </p><p>
      One restriction is that a subquery's outer statement must be one
      of: <code class="literal">SELECT</code>, <code class="literal">INSERT</code>,
      <code class="literal">UPDATE</code>, <code class="literal">DELETE</code>,
      <code class="literal">SET</code>, or <code class="literal">DO</code>. Another
      restriction is that currently you cannot modify a table and select
      from the same table in a subquery. This applies to statements such
      as <code class="literal">DELETE</code>, <code class="literal">INSERT</code>,
      <code class="literal">REPLACE</code>, <code class="literal">UPDATE</code>, and
      (because subqueries can be used in the <code class="literal">SET</code>
      clause) <code class="literal">LOAD DATA INFILE</code>.
    </p><p>
      A more comprehensive discussion of restrictions on subquery use,
      including performance issues for certain forms of subquery syntax,
      is given in <a href="restrictions.html#subquery-restrictions" title="D.3. Restrictions on Subqueries">Section D.3, “Restrictions on Subqueries”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="scalar-subqueries"></a>12.2.8.1. The Subquery as Scalar Operand</h4></div></div></div><p>
        In its simplest form, a subquery is a scalar subquery that
        returns a single value. A scalar subquery is a simple operand,
        and you can use it almost anywhere a single column value or
        literal is legal, and you can expect it to have those
        characteristics that all operands have: a data type, a length,
        an indication whether it can be <code class="literal">NULL</code>, and so
        on. For example:
      </p><pre class="programlisting">CREATE TABLE t1 (s1 INT, s2 CHAR(5) NOT NULL);
INSERT INTO t1 VALUES(100, 'abcde');
SELECT (SELECT s2 FROM t1);
</pre><p>
        The subquery in this <code class="literal">SELECT</code> returns a single
        value (<code class="literal">'abcde'</code>) that has a data type of
        <code class="literal">CHAR</code>, a length of 5, a character set and
        collation equal to the defaults in effect at <code class="literal">CREATE
        TABLE</code> time, and an indication that the value in the
        column can be <code class="literal">NULL</code>. In fact, almost all
        subqueries can be <code class="literal">NULL</code>. If the table used in
        the example were empty, the value of the subquery would be
        <code class="literal">NULL</code>.
      </p><p>
        There are a few contexts in which a scalar subquery cannot be
        used. If a statement allows only a literal value, you cannot use
        a subquery. For example, <code class="literal">LIMIT</code> requires
        literal integer arguments, and <code class="literal">LOAD DATA
        INFILE</code> requires a literal string filename. You cannot
        use subqueries to supply these values.
      </p><p>
        When you see examples in the following sections that contain the
        rather spartan construct <code class="literal">(SELECT column1 FROM
        t1)</code>, imagine that your own code contains much more
        diverse and complex constructions.
      </p><p>
        Suppose that we make two tables:
      </p><pre class="programlisting">CREATE TABLE t1 (s1 INT);
INSERT INTO t1 VALUES (1);
CREATE TABLE t2 (s1 INT);
INSERT INTO t2 VALUES (2);
</pre><p>
        Then perform a <code class="literal">SELECT</code>:
      </p><pre class="programlisting">SELECT (SELECT s1 FROM t2) FROM t1;
</pre><p>
        The result is <code class="literal">2</code> because there is a row in
        <code class="literal">t2</code> containing a column <code class="literal">s1</code>
        that has a value of <code class="literal">2</code>.
      </p><p>
        A scalar subquery can be part of an expression, but remember the
        parentheses, even if the subquery is an operand that provides an
        argument for a function. For example:
      </p><pre class="programlisting">SELECT UPPER((SELECT s1 FROM t1)) FROM t2;
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="comparisons-using-subqueries"></a>12.2.8.2. Comparisons Using Subqueries</h4></div></div></div><p>
        The most common use of a subquery is in the form:
      </p><pre class="programlisting"><em class="replaceable"><code>non_subquery_operand</code></em> <em class="replaceable"><code>comparison_operator</code></em> (<em class="replaceable"><code>subquery</code></em>)
</pre><p>
        Where <em class="replaceable"><code>comparison_operator</code></em> is one of
        these operators:
      </p><pre class="programlisting">=  &gt;  &lt;  &gt;=  &lt;=  &lt;&gt;
</pre><p>
        For example:
      </p><pre class="programlisting">... 'a' = (SELECT column1 FROM t1)
</pre><p>
        At one time the only legal place for a subquery was on the right
        side of a comparison, and you might still find some old DBMSs
        that insist on this.
      </p><p>
        Here is an example of a common-form subquery comparison that you
        cannot do with a join. It finds all the values in table
        <code class="literal">t1</code> that are equal to a maximum value in table
        <code class="literal">t2</code>:
      </p><pre class="programlisting">SELECT column1 FROM t1
WHERE column1 = (SELECT MAX(column2) FROM t2);
</pre><p>
        Here is another example, which again is impossible with a join
        because it involves aggregating for one of the tables. It finds
        all rows in table <code class="literal">t1</code> containing a value that
        occurs twice in a given column:
      </p><pre class="programlisting">SELECT * FROM t1 AS t
WHERE 2 = (SELECT COUNT(*) FROM t1 WHERE t1.id = t.id);
</pre><p>
        For a comparison performed with one of these operators, the
        subquery must return a scalar, with the exception that
        <code class="literal">=</code> can be used with row subqueries. See
        <a href="sql-syntax.html#row-subqueries" title="12.2.8.5. Row Subqueries">Section 12.2.8.5, “Row Subqueries”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="any-in-some-subqueries"></a>12.2.8.3. Subqueries with <code class="literal">ANY</code>, <code class="literal">IN</code>, and
        <code class="literal">SOME</code></h4></div></div></div><a class="indexterm" name="id2213856"></a><a class="indexterm" name="id2213868"></a><a class="indexterm" name="id2213877"></a><a class="indexterm" name="id2213886"></a><p>
        Syntax:
      </p><pre class="programlisting"><em class="replaceable"><code>operand</code></em> <em class="replaceable"><code>comparison_operator</code></em> ANY (<em class="replaceable"><code>subquery</code></em>)
<em class="replaceable"><code>operand</code></em> IN (<em class="replaceable"><code>subquery</code></em>)
<em class="replaceable"><code>operand</code></em> <em class="replaceable"><code>comparison_operator</code></em> SOME (<em class="replaceable"><code>subquery</code></em>)
</pre><p>
        The <code class="literal">ANY</code> keyword, which must follow a
        comparison operator, means “<span class="quote">return <code class="literal">TRUE</code>
        if the comparison is <code class="literal">TRUE</code> for
        <code class="literal">ANY</code> of the values in the column that the
        subquery returns.</span>” For example:
      </p><pre class="programlisting">SELECT s1 FROM t1 WHERE s1 &gt; ANY (SELECT s1 FROM t2);
</pre><p>
        Suppose that there is a row in table <code class="literal">t1</code>
        containing <code class="literal">(10)</code>. The expression is
        <code class="literal">TRUE</code> if table <code class="literal">t2</code> contains
        <code class="literal">(21,14,7)</code> because there is a value
        <code class="literal">7</code> in <code class="literal">t2</code> that is less than
        <code class="literal">10</code>. The expression is
        <code class="literal">FALSE</code> if table <code class="literal">t2</code> contains
        <code class="literal">(20,10)</code>, or if table <code class="literal">t2</code> is
        empty. The expression is <span class="emphasis"><em>unknown</em></span> if table
        <code class="literal">t2</code> contains
        <code class="literal">(NULL,NULL,NULL)</code>.
      </p><p>
        When used with a subquery, the word <code class="literal">IN</code> is an
        alias for <code class="literal">= ANY</code>. Thus, these two statements
        are the same:
      </p><pre class="programlisting">SELECT s1 FROM t1 WHERE s1 = ANY (SELECT s1 FROM t2);
SELECT s1 FROM t1 WHERE s1 IN    (SELECT s1 FROM t2);
</pre><p>
        <code class="literal">IN</code> and <code class="literal">= ANY</code> are not
        synonyms when used with an expression list.
        <code class="literal">IN</code> can take an expression list, but
        <code class="literal">= ANY</code> cannot. See
        <a href="functions.html#comparison-operators" title="11.2.3. Comparison Functions and Operators">Section 11.2.3, “Comparison Functions and Operators”</a>.
      </p><p>
        <code class="literal">NOT IN</code> is not an alias for <code class="literal">&lt;&gt;
        ANY</code>, but for <code class="literal">&lt;&gt; ALL</code>. See
        <a href="sql-syntax.html#all-subqueries" title="12.2.8.4. Subqueries with ALL">Section 12.2.8.4, “Subqueries with <code class="literal">ALL</code>”</a>.
      </p><p>
        The word <code class="literal">SOME</code> is an alias for
        <code class="literal">ANY</code>. Thus, these two statements are the same:
      </p><pre class="programlisting">SELECT s1 FROM t1 WHERE s1 &lt;&gt; ANY  (SELECT s1 FROM t2);
SELECT s1 FROM t1 WHERE s1 &lt;&gt; SOME (SELECT s1 FROM t2);
</pre><p>
        Use of the word <code class="literal">SOME</code> is rare, but this
        example shows why it might be useful. To most people's ears, the
        English phrase “<span class="quote">a is not equal to any b</span>” means
        “<span class="quote">there is no b which is equal to a,</span>” but that is
        not what is meant by the SQL syntax. The syntax means
        “<span class="quote">there is some b to which a is not equal.</span>” Using
        <code class="literal">&lt;&gt; SOME</code> instead helps ensure that
        everyone understands the true meaning of the query.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="all-subqueries"></a>12.2.8.4. Subqueries with <code class="literal">ALL</code></h4></div></div></div><a class="indexterm" name="id2214205"></a><a class="indexterm" name="id2214217"></a><p>
        Syntax:
      </p><pre class="programlisting"><em class="replaceable"><code>operand</code></em> <em class="replaceable"><code>comparison_operator</code></em> ALL (<em class="replaceable"><code>subquery</code></em>)
</pre><p>
        The word <code class="literal">ALL</code>, which must follow a comparison
        operator, means “<span class="quote">return <code class="literal">TRUE</code> if the
        comparison is <code class="literal">TRUE</code> for <code class="literal">ALL</code>
        of the values in the column that the subquery returns.</span>”
        For example:
      </p><pre class="programlisting">SELECT s1 FROM t1 WHERE s1 &gt; ALL (SELECT s1 FROM t2);
</pre><p>
        Suppose that there is a row in table <code class="literal">t1</code>
        containing <code class="literal">(10)</code>. The expression is
        <code class="literal">TRUE</code> if table <code class="literal">t2</code> contains
        <code class="literal">(-5,0,+5)</code> because <code class="literal">10</code> is
        greater than all three values in <code class="literal">t2</code>. The
        expression is <code class="literal">FALSE</code> if table
        <code class="literal">t2</code> contains
        <code class="literal">(12,6,NULL,-100)</code> because there is a single
        value <code class="literal">12</code> in table <code class="literal">t2</code> that
        is greater than <code class="literal">10</code>. The expression is
        <span class="emphasis"><em>unknown</em></span> (that is, <code class="literal">NULL</code>)
        if table <code class="literal">t2</code> contains
        <code class="literal">(0,NULL,1)</code>.
      </p><p>
        Finally, if table <code class="literal">t2</code> is empty, the result is
        <code class="literal">TRUE</code>. So, the following statement is
        <code class="literal">TRUE</code> when table <code class="literal">t2</code> is
        empty:
      </p><pre class="programlisting">SELECT * FROM t1 WHERE 1 &gt; ALL (SELECT s1 FROM t2);
</pre><p>
        But this statement is <code class="literal">NULL</code> when table
        <code class="literal">t2</code> is empty:
      </p><pre class="programlisting">SELECT * FROM t1 WHERE 1 &gt; (SELECT s1 FROM t2);
</pre><p>
        In addition, the following statement is <code class="literal">NULL</code>
        when table <code class="literal">t2</code> is empty:
      </p><pre class="programlisting">SELECT * FROM t1 WHERE 1 &gt; ALL (SELECT MAX(s1) FROM t2);
</pre><p>
        In general, <span class="emphasis"><em>tables containing <code class="literal">NULL</code>
        values</em></span> and <span class="emphasis"><em>empty tables</em></span> are
        “<span class="quote">edge cases.</span>” When writing subquery code, always
        consider whether you have taken those two possibilities into
        account.
      </p><p>
        <code class="literal">NOT IN</code> is an alias for <code class="literal">&lt;&gt;
        ALL</code>. Thus, these two statements are the same:
      </p><pre class="programlisting">SELECT s1 FROM t1 WHERE s1 &lt;&gt; ALL (SELECT s1 FROM t2);
SELECT s1 FROM t1 WHERE s1 NOT IN (SELECT s1 FROM t2);
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="row-subqueries"></a>12.2.8.5. Row Subqueries</h4></div></div></div><a class="indexterm" name="id2214516"></a><a class="indexterm" name="id2214525"></a><a class="indexterm" name="id2214534"></a><p>
        The discussion to this point has been of scalar or column
        subqueries; that is, subqueries that return a single value or a
        column of values. A <span class="emphasis"><em>row subquery</em></span> is a
        subquery variant that returns a single row and can thus return
        more than one column value. Here are two examples:
      </p><pre class="programlisting">SELECT * FROM t1 WHERE (1,2) = (SELECT column1, column2 FROM t2);
SELECT * FROM t1 WHERE ROW(1,2) = (SELECT column1, column2 FROM t2);
</pre><p>
        The queries here are both <code class="literal">TRUE</code> if table
        <code class="literal">t2</code> has a row where <code class="literal">column1 =
        1</code> and <code class="literal">column2 = 2</code>.
      </p><p>
        The expressions <code class="literal">(1,2)</code> and
        <code class="literal">ROW(1,2)</code> are sometimes called <em class="firstterm">row
        constructors</em>. The two are equivalent. They are legal
        in other contexts as well. For example, the following two
        statements are semantically equivalent (although the first one
        cannot be optimized until MySQL 5.1.12):
      </p><pre class="programlisting">SELECT * FROM t1 WHERE (column1,column2) = (1,1);
SELECT * FROM t1 WHERE column1 = 1 AND column2 = 1;
</pre><p>
        The normal use of row constructors is for comparisons with
        subqueries that return two or more columns. For example, the
        following query answers the request, “<span class="quote">find all rows in
        table <code class="literal">t1</code> that also exist in table
        <code class="literal">t2</code></span>”:
      </p><pre class="programlisting">SELECT column1,column2,column3
       FROM t1
       WHERE (column1,column2,column3) IN
             (SELECT column1,column2,column3 FROM t2);
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="exists-and-not-exists-subqueries"></a>12.2.8.6. <code class="literal">EXISTS</code> and <code class="literal">NOT EXISTS</code></h4></div></div></div><a class="indexterm" name="id2214661"></a><a class="indexterm" name="id2214674"></a><a class="indexterm" name="id2214686"></a><a class="indexterm" name="id2214699"></a><p>
        If a subquery returns any rows at all, <code class="literal">EXISTS
        <em class="replaceable"><code>subquery</code></em></code> is
        <code class="literal">TRUE</code>, and <code class="literal">NOT EXISTS
        <em class="replaceable"><code>subquery</code></em></code> is
        <code class="literal">FALSE</code>. For example:
      </p><pre class="programlisting">SELECT column1 FROM t1 WHERE EXISTS (SELECT * FROM t2);
</pre><p>
        Traditionally, an <code class="literal">EXISTS</code> subquery starts with
        <code class="literal">SELECT *</code>, but it could begin with
        <code class="literal">SELECT 5</code> or <code class="literal">SELECT column1</code>
        or anything at all. MySQL ignores the <code class="literal">SELECT</code>
        list in such a subquery, so it makes no difference.
      </p><p>
        For the preceding example, if <code class="literal">t2</code> contains any
        rows, even rows with nothing but <code class="literal">NULL</code> values,
        the <code class="literal">EXISTS</code> condition is
        <code class="literal">TRUE</code>. This is actually an unlikely example
        because a <code class="literal">[NOT] EXISTS</code> subquery almost always
        contains correlations. Here are some more realistic examples:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            What kind of store is present in one or more cities?
          </p><pre class="programlisting">SELECT DISTINCT store_type FROM stores
  WHERE EXISTS (SELECT * FROM cities_stores
                WHERE cities_stores.store_type = stores.store_type);
</pre></li><li><p>
            What kind of store is present in no cities?
          </p><pre class="programlisting">SELECT DISTINCT store_type FROM stores
  WHERE NOT EXISTS (SELECT * FROM cities_stores
                    WHERE cities_stores.store_type = stores.store_type);
</pre></li><li><p>
            What kind of store is present in all cities?
          </p><pre class="programlisting">SELECT DISTINCT store_type FROM stores s1
  WHERE NOT EXISTS (
    SELECT * FROM cities WHERE NOT EXISTS (
      SELECT * FROM cities_stores
       WHERE cities_stores.city = cities.city
       AND cities_stores.store_type = stores.store_type));
</pre></li></ul></div><p>
        The last example is a double-nested <code class="literal">NOT
        EXISTS</code> query. That is, it has a <code class="literal">NOT
        EXISTS</code> clause within a <code class="literal">NOT EXISTS</code>
        clause. Formally, it answers the question “<span class="quote">does a city
        exist with a store that is not in
        <code class="literal">Stores</code></span>”? But it is easier to say that
        a nested <code class="literal">NOT EXISTS</code> answers the question
        “<span class="quote">is <em class="replaceable"><code>x</code></em> <code class="literal">TRUE</code>
        for all <em class="replaceable"><code>y</code></em>?</span>”
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="correlated-subqueries"></a>12.2.8.7. Correlated Subqueries</h4></div></div></div><a class="indexterm" name="id2214927"></a><a class="indexterm" name="id2214936"></a><p>
        A <span class="emphasis"><em>correlated subquery</em></span> is a subquery that
        contains a reference to a table that also appears in the outer
        query. For example:
      </p><pre class="programlisting">SELECT * FROM t1 WHERE column1 = ANY
       (SELECT column1 FROM t2 WHERE t2.column2 = t1.column2);
</pre><p>
        Notice that the subquery contains a reference to a column of
        <code class="literal">t1</code>, even though the subquery's
        <code class="literal">FROM</code> clause does not mention a table
        <code class="literal">t1</code>. So, MySQL looks outside the subquery, and
        finds <code class="literal">t1</code> in the outer query.
      </p><p>
        Suppose that table <code class="literal">t1</code> contains a row where
        <code class="literal">column1 = 5</code> and <code class="literal">column2 =
        6</code>; meanwhile, table <code class="literal">t2</code> contains a
        row where <code class="literal">column1 = 5</code> and <code class="literal">column2 =
        7</code>. The simple expression <code class="literal">... WHERE column1 =
        ANY (SELECT column1 FROM t2)</code> would be
        <code class="literal">TRUE</code>, but in this example, the
        <code class="literal">WHERE</code> clause within the subquery is
        <code class="literal">FALSE</code> (because <code class="literal">(5,6)</code> is
        not equal to <code class="literal">(5,7)</code>), so the subquery as a
        whole is <code class="literal">FALSE</code>.
      </p><p>
        <span class="bold"><strong>Scoping rule:</strong></span> MySQL evaluates
        from inside to outside. For example:
      </p><pre class="programlisting">SELECT column1 FROM t1 AS x
  WHERE x.column1 = (SELECT column1 FROM t2 AS x
    WHERE x.column1 = (SELECT column1 FROM t3
      WHERE x.column2 = t3.column1));
</pre><p>
        In this statement, <code class="literal">x.column2</code> must be a column
        in table <code class="literal">t2</code> because <code class="literal">SELECT column1
        FROM t2 AS x ...</code> renames <code class="literal">t2</code>. It is
        not a column in table <code class="literal">t1</code> because
        <code class="literal">SELECT column1 FROM t1 ...</code> is an outer query
        that is <span class="emphasis"><em>farther out</em></span>.
      </p><p>
        For subqueries in <code class="literal">HAVING</code> or <code class="literal">ORDER
        BY</code> clauses, MySQL also looks for column names in the
        outer select list.
      </p><p>
        For certain cases, a correlated subquery is optimized. For
        example:
      </p><pre class="programlisting"><em class="replaceable"><code>val</code></em> IN (SELECT <em class="replaceable"><code>key_val</code></em> FROM <em class="replaceable"><code>tbl_name</code></em> WHERE <em class="replaceable"><code>correlated_condition</code></em>)
</pre><p>
        Otherwise, they are inefficient and likely to be slow. Rewriting
        the query as a join might improve performance.
      </p><p>
        Aggregate functions in correlated subqueries may contain outer
        references, provided the function contains nothing but outer
        references, and provided the function is not contained in
        another function or expression.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="unnamed-views"></a>12.2.8.8. Subqueries in the <code class="literal">FROM</code> clause</h4></div></div></div><a class="indexterm" name="id2215197"></a><a class="indexterm" name="id2215206"></a><p>
        Subqueries are legal in a <code class="literal">SELECT</code> statement's
        <code class="literal">FROM</code> clause. The actual syntax is:
      </p><pre class="programlisting">SELECT ... FROM (<em class="replaceable"><code>subquery</code></em>) [AS] <em class="replaceable"><code>name</code></em> ...
</pre><p>
        The <code class="literal">[AS] <em class="replaceable"><code>name</code></em></code>
        clause is mandatory, because every table in a
        <code class="literal">FROM</code> clause must have a name. Any columns in
        the <em class="replaceable"><code>subquery</code></em> select list must have
        unique names.
      </p><p>
        For the sake of illustration, assume that you have this table:
      </p><pre class="programlisting">CREATE TABLE t1 (s1 INT, s2 CHAR(5), s3 FLOAT);
</pre><p>
        Here is how to use a subquery in the <code class="literal">FROM</code>
        clause, using the example table:
      </p><pre class="programlisting">INSERT INTO t1 VALUES (1,'1',1.0);
INSERT INTO t1 VALUES (2,'2',2.0);
SELECT sb1,sb2,sb3
       FROM (SELECT s1 AS sb1, s2 AS sb2, s3*2 AS sb3 FROM t1) AS sb
       WHERE sb1 &gt; 1;
</pre><p>
        Result: <code class="literal">2, '2', 4.0</code>.
      </p><p>
        Here is another example: Suppose that you want to know the
        average of a set of sums for a grouped table. This does not
        work:
      </p><pre class="programlisting">SELECT AVG(SUM(column1)) FROM t1 GROUP BY column1;
</pre><p>
        However, this query provides the desired information:
      </p><pre class="programlisting">SELECT AVG(sum_column1)
       FROM (SELECT SUM(column1) AS sum_column1
             FROM t1 GROUP BY column1) AS t1;
</pre><p>
        Notice that the column name used within the subquery
        (<code class="literal">sum_column1</code>) is recognized in the outer
        query.
      </p><p>
        Subqueries in the <code class="literal">FROM</code> clause can return a
        scalar, column, row, or table. Subqueries in the
        <code class="literal">FROM</code> clause cannot be correlated subqueries,
        unless used within the <code class="literal">ON</code> clause of a
        <code class="literal">JOIN</code> operation.
      </p><p>
        Subqueries in the <code class="literal">FROM</code> clause are executed
        even for the <code class="literal">EXPLAIN</code> statement (that is,
        derived temporary tables are built). This occurs because
        upper-level queries need information about all tables during the
        optimization phase, and the table represented by a subquery in
        the <code class="literal">FROM</code> clause is unavailable unless the
        subquery is executed.
      </p><p>
        It is possible under certain circumstances to modify table data
        using <code class="literal">EXPLAIN SELECT</code>. This can occur if the
        outer query accesses any tables and an inner query invokes a
        stored function that changes one or more rows of a table. For
        example, suppose there are two tables <code class="literal">t1</code> and
        <code class="literal">t2</code> in database <code class="literal">d1</code>, created
        as shown here:

</p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE DATABASE d1;</code></strong>
Query OK, 1 row affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>USE d1;</code></strong>
Database changed

mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (c1 INT);</code></strong>
Query OK, 0 rows affected (0.15 sec)

mysql&gt; <strong class="userinput"><code>CREATE TABLE t2 (c1 INT);</code></strong>
Query OK, 0 rows affected (0.08 sec)
</pre><p>

        Now we create a stored function <code class="literal">f1</code> which
        modifies <code class="literal">t2</code>:

</p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>DELIMITER //</code></strong>
mysql&gt; <strong class="userinput"><code>CREATE FUNCTION f1(p1 INT) RETURNS INT</code></strong> 
mysql&gt;   <strong class="userinput"><code>BEGIN</code></strong> 
mysql&gt;     <strong class="userinput"><code>INSERT INTO t2 VALUES (p1);</code></strong> 
mysql&gt;     <strong class="userinput"><code>RETURN p1;</code></strong> 
mysql&gt;   <strong class="userinput"><code>END //</code></strong>
Query OK, 0 rows affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>DELIMITER ;</code></strong>
</pre><p>

        Referencing the function directly in an EXPLAIN SELECT does not
        have any affect on t2, as shown here:

</p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM t2;</code></strong>
Empty set (0.00 sec)

mysql&gt; <strong class="userinput"><code>EXPLAIN SELECT f1(5);</code></strong>
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra          |
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
|  1 | SIMPLE      | NULL  | NULL | NULL          | NULL | NULL    | NULL | NULL | No tables used |
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM t2;</code></strong>
Empty set (0.00 sec)
</pre><p>

        This is because the <code class="literal">SELECT</code> statement did not
        reference any tables, as can be seen in the
        <code class="literal">table</code> and <code class="literal">Extra</code> columns of
        the output. This is also true of the following nested
        <code class="literal">SELECT</code>:

</p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>EXPLAIN SELECT NOW() AS a1, (SELECT f1(5)) AS a2;</code></strong>
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra          |
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
|  1 | PRIMARY     | NULL  | NULL | NULL          | NULL | NULL    | NULL | NULL | No tables used |
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
1 row in set, 1 warning (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+-------+------+------------------------------------------+
| Level | Code | Message                                  |
+-------+------+------------------------------------------+
| Note  | 1249 | Select 2 was reduced during optimization |
+-------+------+------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM t2;</code></strong>
Empty set (0.00 sec)
</pre><p>

        However, if the outer <strong class="userinput"><code>SELECT</code></strong> references
        any tables, then the optimizer executes the statement in the
        subquery as well:

</p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>EXPLAIN SELECT * FROM t1 AS a1, (SELECT f1(5)) AS a2;</code></strong>
+----+-------------+------------+--------+---------------+------+---------+------+------+---------------------+
| id | select_type | table      | type   | possible_keys | key  | key_len | ref  | rows | Extra               |
+----+-------------+------------+--------+---------------+------+---------+------+------+---------------------+
|  1 | PRIMARY     | a1         | system | NULL          | NULL | NULL    | NULL |    0 | const row not found |
|  1 | PRIMARY     | &lt;derived2&gt; | system | NULL          | NULL | NULL    | NULL |    1 |                     |
|  2 | DERIVED     | NULL       | NULL   | NULL          | NULL | NULL    | NULL | NULL | No tables used      |
+----+-------------+------------+--------+---------------+------+---------+------+------+---------------------+
3 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM t2;</code></strong>
+------+
| c1   |
+------+
|    5 |
+------+
1 row in set (0.00 sec)
</pre><p>
      </p><p>
        This also means that an <code class="literal">EXPLAIN SELECT</code>
        statement such as the one shown here may take a long time to
        execute:

</p><pre class="programlisting">EXPLAIN SELECT * FROM t1 AS a1, (SELECT BENCHMARK(1000000, MD5(NOW())));
</pre><p>

        This is because the <a href="functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a>
        function is executed once for each row in <code class="literal">t1</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="subquery-errors"></a>12.2.8.9. Subquery Errors</h4></div></div></div><a class="indexterm" name="id2215679"></a><a class="indexterm" name="id2215692"></a><p>
        There are some errors that apply only to subqueries. This
        section describes them.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Unsupported subquery syntax:
          </p><pre class="programlisting">ERROR 1235 (ER_NOT_SUPPORTED_YET)
SQLSTATE = 42000
Message = "This version of MySQL does not yet support
'LIMIT &amp; IN/ALL/ANY/SOME subquery'"
</pre><p>
            This means that statements of the following form do not work
            yet:
          </p><pre class="programlisting">SELECT * FROM t1 WHERE s1 IN (SELECT s2 FROM t2 ORDER BY s1 LIMIT 1)
</pre></li><li><p>
            Incorrect number of columns from subquery:
          </p><pre class="programlisting">ERROR 1241 (ER_OPERAND_COL)
SQLSTATE = 21000
Message = "Operand should contain 1 column(s)"
</pre><p>
            This error occurs in cases like this:
          </p><pre class="programlisting">SELECT (SELECT column1, column2 FROM t2) FROM t1;
</pre><p>
            You may use a subquery that returns multiple columns, if the
            purpose is comparison. In other contexts, the subquery must
            be a scalar operand. See <a href="sql-syntax.html#row-subqueries" title="12.2.8.5. Row Subqueries">Section 12.2.8.5, “Row Subqueries”</a>.
          </p></li><li><p>
            Incorrect number of rows from subquery:
          </p><pre class="programlisting">ERROR 1242 (ER_SUBSELECT_NO_1_ROW)
SQLSTATE = 21000
Message = "Subquery returns more than 1 row"
</pre><p>
            This error occurs for statements where the subquery returns
            more than one row. Consider the following example:
          </p><pre class="programlisting">SELECT * FROM t1 WHERE column1 = (SELECT column1 FROM t2);
</pre><p>
            If <code class="literal">SELECT column1 FROM t2</code> returns just
            one row, the previous query will work. If the subquery
            returns more than one row, error 1242 will occur. In that
            case, the query should be rewritten as:
          </p><pre class="programlisting">SELECT * FROM t1 WHERE column1 = ANY (SELECT column1 FROM t2);
</pre></li><li><p>
            Incorrectly used table in subquery:
          </p><pre class="programlisting">Error 1093 (ER_UPDATE_TABLE_USED)
SQLSTATE = HY000
Message = "You can't specify target table 'x'
for update in FROM clause"
</pre><p>
            This error occurs in cases such as the following:
          </p><pre class="programlisting">UPDATE t1 SET column2 = (SELECT MAX(column1) FROM t1);
</pre><p>
            You can use a subquery for assignment within an
            <code class="literal">UPDATE</code> statement because subqueries are
            legal in <code class="literal">UPDATE</code> and
            <code class="literal">DELETE</code> statements as well as in
            <code class="literal">SELECT</code> statements. However, you cannot
            use the same table (in this case, table
            <code class="literal">t1</code>) for both the subquery's
            <code class="literal">FROM</code> clause and the update target.
          </p></li></ul></div><p>
        For transactional storage engines, the failure of a subquery
        causes the entire statement to fail. For non-transactional
        storage engines, data modifications made before the error was
        encountered are preserved.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="optimizing-subqueries"></a>12.2.8.10. Optimizing Subqueries</h4></div></div></div><p>
        Development is ongoing, so no optimization tip is reliable for
        the long term. The following list provides some interesting
        tricks that you might want to play with:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Use subquery clauses that affect the number or order of the
            rows in the subquery. For example:
          </p><pre class="programlisting">SELECT * FROM t1 WHERE t1.column1 IN
  (SELECT column1 FROM t2 ORDER BY column1);
SELECT * FROM t1 WHERE t1.column1 IN
  (SELECT DISTINCT column1 FROM t2);
SELECT * FROM t1 WHERE EXISTS
  (SELECT * FROM t2 LIMIT 1);
</pre></li><li><p>
            Replace a join with a subquery. For example, try this:
          </p><pre class="programlisting">SELECT DISTINCT column1 FROM t1 WHERE t1.column1 IN (
  SELECT column1 FROM t2);
</pre><p>
            Instead of this:
          </p><pre class="programlisting">SELECT DISTINCT t1.column1 FROM t1, t2
  WHERE t1.column1 = t2.column1;
</pre></li><li><p>
            Some subqueries can be transformed to joins for
            compatibility with older versions of MySQL that do not
            support subqueries. However, in some cases, converting a
            subquery to a join may improve performance. See
            <a href="sql-syntax.html#rewriting-subqueries" title="12.2.8.11. Rewriting Subqueries as Joins">Section 12.2.8.11, “Rewriting Subqueries as Joins”</a>.
          </p></li><li><p>
            Move clauses from outside to inside the subquery. For
            example, use this query:
          </p><pre class="programlisting">SELECT * FROM t1
  WHERE s1 IN (SELECT s1 FROM t1 UNION ALL SELECT s1 FROM t2);
</pre><p>
            Instead of this query:
          </p><pre class="programlisting">SELECT * FROM t1
  WHERE s1 IN (SELECT s1 FROM t1) OR s1 IN (SELECT s1 FROM t2);
</pre><p>
            For another example, use this query:
          </p><pre class="programlisting">SELECT (SELECT column1 + 5 FROM t1) FROM t2;
</pre><p>
            Instead of this query:
          </p><pre class="programlisting">SELECT (SELECT column1 FROM t1) + 5 FROM t2;
</pre></li><li><p>
            Use a row subquery instead of a correlated subquery. For
            example, use this query:
          </p><pre class="programlisting">SELECT * FROM t1
  WHERE (column1,column2) IN (SELECT column1,column2 FROM t2);
</pre><p>
            Instead of this query:
          </p><pre class="programlisting">SELECT * FROM t1
  WHERE EXISTS (SELECT * FROM t2 WHERE t2.column1=t1.column1
  AND t2.column2=t1.column2);
</pre></li><li><p>
            Use <code class="literal">NOT (a = ANY (...))</code> rather than
            <code class="literal">a &lt;&gt; ALL (...)</code>.
          </p></li><li><p>
            Use <code class="literal">x = ANY (<em class="replaceable"><code>table containing
            (1,2)</code></em>)</code> rather than <code class="literal">x=1 OR
            x=2</code>.
          </p></li><li><p>
            Use <code class="literal">= ANY</code> rather than
            <code class="literal">EXISTS</code>.
          </p></li><li><p>
            For uncorrelated subqueries that always return one row,
            <code class="literal">IN</code> is always slower than
            <code class="literal">=</code>. For example, use this query:
          </p><pre class="programlisting">SELECT * FROM t1 WHERE t1.<em class="replaceable"><code>col_name</code></em>
  = (SELECT a FROM t2 WHERE b = <em class="replaceable"><code>some_const</code></em>);
</pre><p>
            Instead of this query:
          </p><pre class="programlisting">SELECT * FROM t1 WHERE t1.<em class="replaceable"><code>col_name</code></em>
  IN (SELECT a FROM t2 WHERE b = <em class="replaceable"><code>some_const</code></em>);
</pre></li></ul></div><p>
        These tricks might cause programs to go faster or slower. Using
        MySQL facilities like the
        <a href="functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a> function, you can
        get an idea about what helps in your own situation. See
        <a href="functions.html#information-functions" title="11.11.3. Information Functions">Section 11.11.3, “Information Functions”</a>.
      </p><p>
        Some optimizations that MySQL itself makes are:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            MySQL executes uncorrelated subqueries only once. Use
            <code class="literal">EXPLAIN</code> to make sure that a given
            subquery really is uncorrelated.
          </p></li><li><p>
            MySQL rewrites <code class="literal">IN</code>,
            <code class="literal">ALL</code>, <code class="literal">ANY</code>, and
            <code class="literal">SOME</code> subqueries in an attempt to take
            advantage of the possibility that the select-list columns in
            the subquery are indexed.
          </p></li><li><p>
            MySQL replaces subqueries of the following form with an
            index-lookup function, which <code class="literal">EXPLAIN</code>
            describes as a special join type
            (<code class="literal">unique_subquery</code> or
            <code class="literal">index_subquery</code>):
          </p><pre class="programlisting">... IN (SELECT <em class="replaceable"><code>indexed_column</code></em> FROM <em class="replaceable"><code>single_table</code></em> ...)
</pre></li><li><p>
            MySQL enhances expressions of the following form with an
            expression involving <a href="functions.html#function_min"><code class="literal">MIN()</code></a>
            or <a href="functions.html#function_max"><code class="literal">MAX()</code></a>, unless
            <code class="literal">NULL</code> values or empty sets are involved:
          </p><pre class="programlisting"><em class="replaceable"><code>value</code></em> {ALL|ANY|SOME} {&gt; | &lt; | &gt;= | &lt;=} (<em class="replaceable"><code>uncorrelated subquery</code></em>)
</pre><p>
            For example, this <code class="literal">WHERE</code> clause:
          </p><pre class="programlisting">WHERE 5 &gt; ALL (SELECT x FROM t)
</pre><p>
            might be treated by the optimizer like this:
          </p><pre class="programlisting">WHERE 5 &gt; (SELECT MAX(x) FROM t)
</pre></li></ul></div><p>
        See also the MySQL Internals Manual chapter
        <a href="http://forge.mysql.com/wiki/MySQL_Internals_Transformations" target="_top">How
        MySQL Transforms Subqueries</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="rewriting-subqueries"></a>12.2.8.11. Rewriting Subqueries as Joins</h4></div></div></div><a class="indexterm" name="id2216319"></a><p>
        Although MySQL 5.1 supports subqueries (see
        <a href="sql-syntax.html#subqueries" title="12.2.8. Subquery Syntax">Section 12.2.8, “Subquery Syntax”</a>), it is still true that there are
        sometimes other ways to test membership in a set of values. It
        is also true that on some occasions, it is not only possible to
        rewrite a query without a subquery, but it can be more efficient
        to make use of some of these techniques rather than to use
        subqueries. One of these is the <code class="literal">IN()</code>
        construct:
      </p><p>
        For example, this query:
      </p><pre class="programlisting">SELECT * FROM t1 WHERE id IN (SELECT id FROM t2);
</pre><p>
        Can be rewritten as:
      </p><pre class="programlisting">SELECT DISTINCT t1.* FROM t1, t2 WHERE t1.id=t2.id;
</pre><p>
        The queries:
      </p><pre class="programlisting">SELECT * FROM t1 WHERE id NOT IN (SELECT id FROM t2);
SELECT * FROM t1 WHERE NOT EXISTS (SELECT id FROM t2 WHERE t1.id=t2.id);
</pre><p>
        Can be rewritten as:
      </p><pre class="programlisting">SELECT table1.*
  FROM table1 LEFT JOIN table2 ON table1.id=table2.id
  WHERE table2.id IS NULL;
</pre><p>
        A <code class="literal">LEFT [OUTER] JOIN</code> can be faster than an
        equivalent subquery because the server might be able to optimize
        it better — a fact that is not specific to MySQL Server
        alone. Prior to SQL-92, outer joins did not exist, so subqueries
        were the only way to do certain things. Today, MySQL Server and
        many other modern database systems offer a wide range of outer
        join types.
      </p><p>
        MySQL Server supports multiple-table <code class="literal">DELETE</code>
        statements that can be used to efficiently delete rows based on
        information from one table or even from many tables at the same
        time. Multiple-table <code class="literal">UPDATE</code> statements are
        also supported. See <a href="sql-syntax.html#delete" title="12.2.1. DELETE Syntax">Section 12.2.1, “<code class="literal">DELETE</code> Syntax”</a>, and
        <a href="sql-syntax.html#update" title="12.2.10. UPDATE Syntax">Section 12.2.10, “<code class="literal">UPDATE</code> Syntax”</a>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="truncate"></a>12.2.9. <code class="literal">TRUNCATE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2216458"></a><pre class="programlisting">TRUNCATE [TABLE] <em class="replaceable"><code>tbl_name</code></em>
</pre><p>
      <code class="literal">TRUNCATE TABLE</code> empties a table completely.
      Logically, this is equivalent to a <code class="literal">DELETE</code>
      statement that deletes all rows, but there are practical
      differences under some circumstances.
    </p><p>
      For an <code class="literal">InnoDB</code> table, <code class="literal">InnoDB</code>
      processes <code class="literal">TRUNCATE TABLE</code> by deleting rows one
      by one if there are any <code class="literal">FOREIGN KEY</code> constraints
      that reference the table. If there are no <code class="literal">FOREIGN
      KEY</code> constraints, <code class="literal">InnoDB</code> performs fast
      truncation by dropping the original table and creating an empty
      one with the same definition, which is much faster than deleting
      rows one by one. The <code class="literal">AUTO_INCREMENT</code> counter is
      reset by <code class="literal">TRUNCATE TABLE</code>, regardless of whether
      there is a <code class="literal">FOREIGN KEY</code> constraint.
    </p><p>
      In the case that <code class="literal">FOREIGN KEY</code> constraints
      reference the table, <code class="literal">InnoDB</code> deletes rows one by
      one and processes the constraints on each one. If the
      <code class="literal">FOREIGN KEY</code> constraint specifies
      <code class="literal">DELETE CASCADE</code>, rows from the child
      (referenced) table are deleted, and the truncated table becomes
      empty. If the <code class="literal">FOREIGN KEY</code> constraint does
      <span class="emphasis"><em>not</em></span> specify <code class="literal">CASCADE</code>, the
      <code class="literal">TRUNCATE</code> statement deletes rows one by one and
      stops if it encounters a parent row that is referenced by the
      child, returning this error:
    </p><pre class="programlisting">ERROR 1451 (23000): Cannot delete or update a parent row: a foreign
key constraint fails (`test`.`child`, CONSTRAINT `child_ibfk_1`
FOREIGN KEY (`parent_id`) REFERENCES `parent` (`id`))
</pre><p>
      This is the same as a <code class="literal">DELETE</code> statement with no
      <code class="literal">WHERE</code> clause.
    </p><p>
      The count of rows affected by <code class="literal">TRUNCATE TABLE</code> is
      accurate only when it is mapped to a <code class="literal">DELETE</code>
      statement.
    </p><p>
      For other storage engines, <code class="literal">TRUNCATE TABLE</code>
      differs from <code class="literal">DELETE</code> in the following ways in
      MySQL 5.1:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Truncate operations drop and re-create the table, which is
          much faster than deleting rows one by one, particularly for
          large tables.
        </p></li><li><p>
          Truncate operations are not transaction-safe; an error occurs
          when attempting one in the course of an active transaction or
          active table lock.
        </p></li><li><p>
          Truncation operations do not return the number of deleted
          rows.
        </p></li><li><p>
          As long as the table format file
          <code class="filename"><em class="replaceable"><code>tbl_name</code></em>.frm</code>
          is valid, the table can be re-created as an empty table with
          <code class="literal">TRUNCATE TABLE</code>, even if the data or index
          files have become corrupted.
        </p></li><li><p>
          The table handler does not remember the last used
          <code class="literal">AUTO_INCREMENT</code> value, but starts counting
          from the beginning. This is true even for
          <code class="literal">MyISAM</code> and <code class="literal">InnoDB</code>, which
          normally do not reuse sequence values.
        </p></li><li><p>
          When used with partitioned tables, <code class="literal">TRUNCATE
          TABLE</code> preserves the partitioning; that is, the data
          and index files are dropped and re-created, while the
          partition definitions (<code class="filename">.par</code>) file is
          unaffected.
        </p></li><li><p>
          Since truncation of a table does not make any use of
          <code class="literal">DELETE</code>, the <code class="literal">TRUNCATE</code>
          statement does not invoke <code class="literal">ON DELETE</code>
          triggers.
        </p></li></ul></div><p>
      <code class="literal">TRUNCATE TABLE</code> requires the
      <code class="literal">DROP</code> privilege as of MySQL 5.1.16. (Before
      5.1.16, it requires the <code class="literal">DELETE</code> privilege.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="update"></a>12.2.10. <code class="literal">UPDATE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2216841"></a><p>
      Single-table syntax:
    </p><pre class="programlisting">UPDATE [LOW_PRIORITY] [IGNORE] <em class="replaceable"><code>tbl_name</code></em>
    SET <em class="replaceable"><code>col_name1</code></em>={<em class="replaceable"><code>expr1</code></em>|DEFAULT} [, <em class="replaceable"><code>col_name2</code></em>={<em class="replaceable"><code>expr2</code></em>|DEFAULT}] ...
    [WHERE <em class="replaceable"><code>where_condition</code></em>]
    [ORDER BY ...]
    [LIMIT <em class="replaceable"><code>row_count</code></em>]
</pre><p>
      Multiple-table syntax:
    </p><pre class="programlisting">UPDATE [LOW_PRIORITY] [IGNORE] <em class="replaceable"><code>table_references</code></em>
    SET <em class="replaceable"><code>col_name1</code></em>={<em class="replaceable"><code>expr1</code></em>|DEFAULT} [, <em class="replaceable"><code>col_name2</code></em>={<em class="replaceable"><code>expr2</code></em>|DEFAULT}] ...
    [WHERE <em class="replaceable"><code>where_condition</code></em>]
</pre><p>
      For the single-table syntax, the <code class="literal">UPDATE</code>
      statement updates columns of existing rows in
      <code class="literal">tbl_name</code> with new values. The
      <code class="literal">SET</code> clause indicates which columns to modify
      and the values they should be given. Each value can be given as an
      expression, or the keyword <code class="literal">DEFAULT</code> to set a
      column explicitly to its default value. The
      <code class="literal">WHERE</code> clause, if given, specifies the
      conditions that identify which rows to update. With no
      <code class="literal">WHERE</code> clause, all rows are updated. If the
      <code class="literal">ORDER BY</code> clause is specified, the rows are
      updated in the order that is specified. The
      <code class="literal">LIMIT</code> clause places a limit on the number of
      rows that can be updated.
    </p><p>
      For the multiple-table syntax, <code class="literal">UPDATE</code> updates
      rows in each table named in
      <em class="replaceable"><code>table_references</code></em> that satisfy the
      conditions. In this case, <code class="literal">ORDER BY</code> and
      <code class="literal">LIMIT</code> cannot be used.
    </p><p>
      <em class="replaceable"><code>where_condition</code></em> is an expression that
      evaluates to true for each row to be updated. It is specified as
      described in <a href="sql-syntax.html#select" title="12.2.7. SELECT Syntax">Section 12.2.7, “<code class="literal">SELECT</code> Syntax”</a>.
    </p><p>
      The <code class="literal">UPDATE</code> statement supports the following
      modifiers:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you use the <code class="literal">LOW_PRIORITY</code> keyword,
          execution of the <code class="literal">UPDATE</code> is delayed until no
          other clients are reading from the table. This affects only
          storage engines that use only table-level locking
          (<code class="literal">MyISAM</code>, <code class="literal">MEMORY</code>,
          <code class="literal">MERGE</code>).
        </p></li><li><p>
          If you use the <code class="literal">IGNORE</code> keyword, the update
          statement does not abort even if errors occur during the
          update. Rows for which duplicate-key conflicts occur are not
          updated. Rows for which columns are updated to values that
          would cause data conversion errors are updated to the closest
          valid values instead.
        </p></li></ul></div><p>
      If you access a column from <em class="replaceable"><code>tbl_name</code></em> in
      an expression, <code class="literal">UPDATE</code> uses the current value of
      the column. For example, the following statement sets the
      <code class="literal">age</code> column to one more than its current value:
    </p><pre class="programlisting">UPDATE persondata SET age=age+1;
</pre><p>
      Single-table <code class="literal">UPDATE</code> assignments are generally
      evaluated from left to right. For multiple-table updates, there is
      no guarantee that assignments are carried out in any particular
      order.
    </p><p>
      If you set a column to the value it currently has, MySQL notices
      this and does not update it.
    </p><p>
      If you update a column that has been declared <code class="literal">NOT
      NULL</code> by setting to <code class="literal">NULL</code>, the column
      is set to the default value appropriate for the data type and the
      warning count is incremented. The default value is
      <code class="literal">0</code> for numeric types, the empty string
      (<code class="literal">''</code>) for string types, and the
      “<span class="quote">zero</span>” value for date and time types.
    </p><a class="indexterm" name="id2217181"></a><p>
      <code class="literal">UPDATE</code> returns the number of rows that were
      actually changed. The
      <a href="apis.html#mysql-info" title="29.2.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> C API function
      returns the number of rows that were matched and updated and the
      number of warnings that occurred during the
      <code class="literal">UPDATE</code>.
    </p><p>
      You can use <code class="literal">LIMIT
      <em class="replaceable"><code>row_count</code></em></code> to restrict the
      scope of the <code class="literal">UPDATE</code>. A <code class="literal">LIMIT</code>
      clause is a rows-matched restriction. The statement stops as soon
      as it has found <em class="replaceable"><code>row_count</code></em> rows that
      satisfy the <code class="literal">WHERE</code> clause, whether or not they
      actually were changed.
    </p><p>
      If an <code class="literal">UPDATE</code> statement includes an
      <code class="literal">ORDER BY</code> clause, the rows are updated in the
      order specified by the clause. This can be useful in certain
      situations that might otherwise result in an error. Suppose that a
      table <code class="literal">t</code> contains a column <code class="literal">id</code>
      that has a unique index. The following statement could fail with a
      duplicate-key error, depending on the order in which rows are
      updated:
    </p><pre class="programlisting">UPDATE t SET id = id + 1;
</pre><p>
      For example, if the table contains 1 and 2 in the
      <code class="literal">id</code> column and 1 is updated to 2 before 2 is
      updated to 3, an error occurs. To avoid this problem, add an
      <code class="literal">ORDER BY</code> clause to cause the rows with larger
      <code class="literal">id</code> values to be updated before those with
      smaller values:
    </p><pre class="programlisting">UPDATE t SET id = id + 1 ORDER BY id DESC;
</pre><p>
      You can also perform <code class="literal">UPDATE</code> operations covering
      multiple tables. However, you cannot use <code class="literal">ORDER
      BY</code> or <code class="literal">LIMIT</code> with a multiple-table
      <code class="literal">UPDATE</code>. The
      <em class="replaceable"><code>table_references</code></em> clause lists the
      tables involved in the join. Its syntax is described in
      <a href="sql-syntax.html#join" title="12.2.7.1. JOIN Syntax">Section 12.2.7.1, “<code class="literal">JOIN</code> Syntax”</a>. Here is an example:
    </p><pre class="programlisting">UPDATE items,month SET items.price=month.price
WHERE items.id=month.id;
</pre><p>
      The preceding example shows an inner join that uses the comma
      operator, but multiple-table <code class="literal">UPDATE</code> statements
      can use any type of join allowed in <code class="literal">SELECT</code>
      statements, such as <code class="literal">LEFT JOIN</code>.
    </p><p>
      You need the <code class="literal">UPDATE</code> privilege only for columns
      referenced in a multiple-table <code class="literal">UPDATE</code> that are
      actually updated. You need only the <code class="literal">SELECT</code>
      privilege for any columns that are read but not modified.
    </p><p>
      If you use a multiple-table <code class="literal">UPDATE</code> statement
      involving <code class="literal">InnoDB</code> tables for which there are
      foreign key constraints, the MySQL optimizer might process tables
      in an order that differs from that of their parent/child
      relationship. In this case, the statement fails and rolls back.
      Instead, update a single table and rely on the <code class="literal">ON
      UPDATE</code> capabilities that <code class="literal">InnoDB</code>
      provides to cause the other tables to be modified accordingly. See
      <a href="storage-engines.html#innodb-foreign-key-constraints" title="13.5.6.4. FOREIGN KEY Constraints">Section 13.5.6.4, “<code class="literal">FOREIGN KEY</code> Constraints”</a>.
    </p><p>
      Currently, you cannot update a table and select from the same
      table in a subquery.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql-syntax-utility"></a>12.3. MySQL Utility Statements</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#describe">12.3.1. <code class="literal">DESCRIBE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#explain">12.3.2. <code class="literal">EXPLAIN</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#help">12.3.3. <code class="literal">HELP</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#use">12.3.4. <code class="literal">USE</code> Syntax</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="describe"></a>12.3.1. <code class="literal">DESCRIBE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2217464"></a><a class="indexterm" name="id2217472"></a><pre class="programlisting">{DESCRIBE | DESC} <em class="replaceable"><code>tbl_name</code></em> [<em class="replaceable"><code>col_name</code></em> | <em class="replaceable"><code>wild</code></em>]
</pre><p>
      <code class="literal">DESCRIBE</code> provides information about the columns
      in a table. It is a shortcut for <code class="literal">SHOW COLUMNS
      FROM</code>. These statements also display information for
      views. (See <a href="sql-syntax.html#show-columns" title="12.5.5.6. SHOW COLUMNS Syntax">Section 12.5.5.6, “<code class="literal">SHOW COLUMNS</code> Syntax”</a>.)
    </p><p>
      <em class="replaceable"><code>col_name</code></em> can be a column name, or a
      string containing the SQL “<span class="quote"><code class="literal">%</code></span>” and
      “<span class="quote"><code class="literal">_</code></span>” wildcard characters to obtain
      output only for the columns with names matching the string. There
      is no need to enclose the string within quotes unless it contains
      spaces or other special characters.
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>DESCRIBE City;</code></strong>
+------------+----------+------+-----+---------+----------------+
| Field      | Type     | Null | Key | Default | Extra          |
+------------+----------+------+-----+---------+----------------+
| Id         | int(11)  | NO   | PRI | NULL    | auto_increment |
| Name       | char(35) | NO   |     |         |                |
| Country    | char(3)  | NO   | UNI |         |                |
| District   | char(20) | YES  | MUL |         |                |
| Population | int(11)  | NO   |     | 0       |                |
+------------+----------+------+-----+---------+----------------+
5 rows in set (0.00 sec)
</pre><p>
      The description for <code class="literal">SHOW COLUMNS</code> provides more
      information about the output columns (see
      <a href="sql-syntax.html#show-columns" title="12.5.5.6. SHOW COLUMNS Syntax">Section 12.5.5.6, “<code class="literal">SHOW COLUMNS</code> Syntax”</a>).
    </p><p>
      If the data types differ from what you expect them to be based on
      a <code class="literal">CREATE TABLE</code> statement, note that MySQL
      sometimes changes data types when you create or alter a table. The
      conditions under which this occurs are described in
      <a href="sql-syntax.html#silent-column-changes" title="12.1.10.1. Silent Column Specification Changes">Section 12.1.10.1, “Silent Column Specification Changes”</a>.
    </p><a class="indexterm" name="id2217621"></a><a class="indexterm" name="id2217630"></a><p>
      The <code class="literal">DESCRIBE</code> statement is provided for
      compatibility with Oracle.
    </p><p>
      The <code class="literal">SHOW CREATE TABLE</code>, <code class="literal">SHOW TABLE
      STATUS</code>, and <code class="literal">SHOW INDEX</code> statements
      also provide information about tables. See <a href="sql-syntax.html#show" title="12.5.5. SHOW Syntax">Section 12.5.5, “<code class="literal">SHOW</code> Syntax”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="explain"></a>12.3.2. <code class="literal">EXPLAIN</code> Syntax</h3></div></div></div><a class="indexterm" name="id2217692"></a><a class="indexterm" name="id2217701"></a><pre class="programlisting">EXPLAIN <em class="replaceable"><code>tbl_name</code></em>
</pre><p>
      Or:
    </p><pre class="programlisting">EXPLAIN [EXTENDED | PARTITIONS] SELECT <em class="replaceable"><code>select_options</code></em>
</pre><p>
      The <code class="literal">EXPLAIN</code> statement can be used either as a
      synonym for <code class="literal">DESCRIBE</code> or as a way to obtain
      information about how MySQL executes a <code class="literal">SELECT</code>
      statement:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">EXPLAIN <em class="replaceable"><code>tbl_name</code></em></code>
          is synonymous with <code class="literal">DESCRIBE
          <em class="replaceable"><code>tbl_name</code></em></code> or <code class="literal">SHOW
          COLUMNS FROM <em class="replaceable"><code>tbl_name</code></em></code>.
        </p><p>
          For a description of the <code class="literal">DESCRIBE</code> and
          <code class="literal">SHOW COLUMNS</code> statements, see
          <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax">Section 12.3.1, “<code class="literal">DESCRIBE</code> Syntax”</a>, and
          <a href="sql-syntax.html#show-columns" title="12.5.5.6. SHOW COLUMNS Syntax">Section 12.5.5.6, “<code class="literal">SHOW COLUMNS</code> Syntax”</a>.
        </p></li><li><p>
          When you precede a <code class="literal">SELECT</code> statement with
          the keyword <code class="literal">EXPLAIN</code>, MySQL displays
          information from the optimizer about the query execution plan.
          That is, MySQL explains how it would process the
          <code class="literal">SELECT</code>, including information about how
          tables are joined and in which order.
        </p><p>
          For information regarding the use of
          <code class="literal">EXPLAIN</code> for obtaining query execution plan
          information, see <a href="optimization.html#using-explain" title="7.2.1. Optimizing Queries with EXPLAIN">Section 7.2.1, “Optimizing Queries with <code class="literal">EXPLAIN</code>”</a>.
        </p></li><li><p>
          <code class="literal">EXPLAIN PARTITIONS</code> is available beginning
          with MySQL 5.1.5. It is useful only when examining queries
          involving partitioned tables.
        </p><p>
          For details, see <a href="partitioning.html#partitioning-info" title="21.3.4. Obtaining Information About Partitions">Section 21.3.4, “Obtaining Information About Partitions”</a>.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="help"></a>12.3.3. <code class="literal">HELP</code> Syntax</h3></div></div></div><a class="indexterm" name="id2217925"></a><pre class="programlisting">HELP '<em class="replaceable"><code>search_string</code></em>'
</pre><p>
      The <code class="literal">HELP</code> statement returns online information
      from the MySQL Reference manual. Its proper operation requires
      that the help tables in the <code class="literal">mysql</code> database be
      initialized with help topic information (see
      <a href="server-administration.html#server-side-help-support" title="5.1.8. Server-Side Help">Section 5.1.8, “Server-Side Help”</a>).
    </p><p>
      The <code class="literal">HELP</code> statement searches the help tables for
      the given search string and displays the result of the search. The
      search string is not case sensitive.
    </p><p>
      The HELP statement understands several types of search strings:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          At the most general level, use <code class="literal">contents</code> to
          retrieve a list of the top-level help categories:
        </p><pre class="programlisting">HELP 'contents'
</pre></li><li><p>
          For a list of topics in a given help category, such as
          <code class="literal">Data Types</code>, use the category name:
        </p><pre class="programlisting">HELP 'data types'
</pre></li><li><p>
          For help on a specific help topic, such as the
          <a href="functions.html#function_ascii"><code class="literal">ASCII()</code></a> function or the
          <code class="literal">CREATE TABLE</code> statement, use the associated
          keyword or keywords:
        </p><pre class="programlisting">HELP 'ascii'
HELP 'create table'
</pre></li></ul></div><p>
      In other words, the search string matches a category, many topics,
      or a single topic. You cannot necessarily tell in advance whether
      a given search string will return a list of items or the help
      information for a single help topic. However, you can tell what
      kind of response <code class="literal">HELP</code> returned by examining the
      number of rows and columns in the result set.
    </p><p>
      The following descriptions indicate the forms that the result set
      can take. Output for the example statements is shown using the
      familar “<span class="quote">tabular</span>” or “<span class="quote">vertical</span>” format
      that you see when using the <span><strong class="command">mysql</strong></span> client, but
      note that <span><strong class="command">mysql</strong></span> itself reformats
      <code class="literal">HELP</code> result sets in a different way.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Empty result set
        </p><p>
          No match could be found for the search string.
        </p></li><li><p>
          Result set containing a single row with three columns
        </p><p>
          This means that the search string yielded a hit for the help
          topic. The result has three columns:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">name</code>: The topic name.
            </p></li><li><p>
              <code class="literal">description</code>: Descriptive help text for
              the topic.
            </p></li><li><p>
              <code class="literal">example</code>: Usage example or exmples. This
              column might be blank.
            </p></li></ul></div><p>
          Example: <code class="literal">HELP 'replace'</code>
        </p><p>
          Yields:
        </p><pre class="programlisting">name: REPLACE
description: Syntax:
REPLACE(str,from_str,to_str)

Returns the string str with all occurrences of the string from_str
replaced by the string to_str. REPLACE() performs a case-sensitive
match when searching for from_str.
example: mysql&gt; SELECT REPLACE('www.mysql.com', 'w', 'Ww');
        -&gt; 'WwWwWw.mysql.com'
</pre></li><li><p>
          Result set containing multiple rows with two columns
        </p><p>
          This means that the search string matched many help topics.
          The result set indicates the help topic names:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">name</code>: The help topic name.
            </p></li><li><p>
              <code class="literal">is_it_category</code>: <code class="literal">Y</code> if
              the name represents a help category, <code class="literal">N</code>
              if it does not. If it does not, the
              <code class="literal">name</code> value when specified as the
              argument to the <code class="literal">HELP</code> statement should
              yield a single-row result set containing a description for
              the named item.
            </p></li></ul></div><p>
          Example: <code class="literal">HELP 'status'</code>
        </p><p>
          Yields:
        </p><pre class="programlisting">+-----------------------+----------------+
| name                  | is_it_category |
+-----------------------+----------------+
| SHOW                  | N              |
| SHOW ENGINE           | N              |
| SHOW INNODB STATUS    | N              |
| SHOW MASTER STATUS    | N              |
| SHOW PROCEDURE STATUS | N              |
| SHOW SLAVE STATUS     | N              |
| SHOW STATUS           | N              |
| SHOW TABLE STATUS     | N              |
+-----------------------+----------------+
</pre></li><li><p>
          Result set containing multiple rows with three columns
        </p><p>
          This means the search string matches a category. The result
          set contains category entries:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">source_category_name</code>: The help category
              name.
            </p></li><li><p>
              <code class="literal">name</code>: The category or topic name
            </p></li><li><p>
              <code class="literal">is_it_category</code>: <code class="literal">Y</code> if
              the name represents a help category, <code class="literal">N</code>
              if it does not. If it does not, the
              <code class="literal">name</code> value when specified as the
              argument to the <code class="literal">HELP</code> statement should
              yield a single-row result set containing a description for
              the named item.
            </p></li></ul></div><p>
          Example: <code class="literal">HELP 'functions'</code>
        </p><p>
          Yields:
        </p><pre class="programlisting">+----------------------+-------------------------+----------------+
| source_category_name | name                    | is_it_category |
+----------------------+-------------------------+----------------+
| Functions            | CREATE FUNCTION         | N              |
| Functions            | DROP FUNCTION           | N              |
| Functions            | Bit Functions           | Y              |
| Functions            | Comparison operators    | Y              |
| Functions            | Control flow functions  | Y              |
| Functions            | Date and Time Functions | Y              |
| Functions            | Encryption Functions    | Y              |
| Functions            | Information Functions   | Y              |
| Functions            | Logical operators       | Y              |
| Functions            | Miscellaneous Functions | Y              |
| Functions            | Numeric Functions       | Y              |
| Functions            | String Functions        | Y              |
+----------------------+-------------------------+----------------+
</pre></li></ul></div><p>
      Before MySQL 5.1.17, if you intend to use the
      <code class="literal">HELP</code> statement while other tables are locked
      with <code class="literal">LOCK TABLES</code>, you must also lock the
      required
      <code class="literal">mysql.help_<em class="replaceable"><code>xxx</code></em></code>
      tables. See <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and UNLOCK TABLES
      Syntax">Section 12.4.5, “<code class="literal">LOCK TABLES</code> and <code class="literal">UNLOCK TABLES</code>
      Syntax”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="use"></a>12.3.4. <code class="literal">USE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2218441"></a><pre class="programlisting">USE <em class="replaceable"><code>db_name</code></em>
</pre><p>
      The <code class="literal">USE <em class="replaceable"><code>db_name</code></em></code>
      statement tells MySQL to use the
      <em class="replaceable"><code>db_name</code></em> database as the default
      (current) database for subsequent statements. The database remains
      the default until the end of the session or another
      <code class="literal">USE</code> statement is issued:
    </p><pre class="programlisting">USE db1;
SELECT COUNT(*) FROM mytable;   # selects from db1.mytable
USE db2;
SELECT COUNT(*) FROM mytable;   # selects from db2.mytable
</pre><p>
      Making a particular database the default by means of the
      <code class="literal">USE</code> statement does not preclude you from
      accessing tables in other databases. The following example
      accesses the <code class="literal">author</code> table from the
      <code class="literal">db1</code> database and the <code class="literal">editor</code>
      table from the <code class="literal">db2</code> database:
    </p><pre class="programlisting">USE db1;
SELECT author_name,editor_name FROM author,db2.editor
  WHERE author.editor_id = db2.editor.editor_id;
</pre><a class="indexterm" name="id2218554"></a><a class="indexterm" name="id2218563"></a><p>
      The <code class="literal">USE</code> statement is provided for compatibility
      with Sybase.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql-syntax-transactions"></a>12.4. MySQL Transactional and Locking Statements</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#commit">12.4.1. <code class="literal">START TRANSACTION</code>, <code class="literal">COMMIT</code>, and
      <code class="literal">ROLLBACK</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#cannot-roll-back">12.4.2. Statements That Cannot Be Rolled Back</a></span></dt><dt><span class="section"><a href="sql-syntax.html#implicit-commit">12.4.3. Statements That Cause an Implicit Commit</a></span></dt><dt><span class="section"><a href="sql-syntax.html#savepoints">12.4.4. <code class="literal">SAVEPOINT</code> and <code class="literal">ROLLBACK TO
      SAVEPOINT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#lock-tables">12.4.5. <code class="literal">LOCK TABLES</code> and <code class="literal">UNLOCK TABLES</code>
      Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#set-transaction">12.4.6. <code class="literal">SET TRANSACTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#xa">12.4.7. XA Transactions</a></span></dt></dl></div><p>
    MySQL supports local transactions (within a given client connection)
    through statements such as <code class="literal">SET AUTOCOMMIT</code>,
    <code class="literal">START TRANSACTION</code>, <code class="literal">COMMIT</code>, and
    <code class="literal">ROLLBACK</code>. See <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION, COMMIT, and
      ROLLBACK Syntax">Section 12.4.1, “<code class="literal">START TRANSACTION</code>, <code class="literal">COMMIT</code>, and
      <code class="literal">ROLLBACK</code> Syntax”</a>. XA
    transaction support enables MySQL to participate in distributed
    transactions as well. See <a href="sql-syntax.html#xa" title="12.4.7. XA Transactions">Section 12.4.7, “XA Transactions”</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="commit"></a>12.4.1. <code class="literal">START TRANSACTION</code>, <code class="literal">COMMIT</code>, and
      <code class="literal">ROLLBACK</code> Syntax</h3></div></div></div><a class="indexterm" name="id2218664"></a><a class="indexterm" name="id2218673"></a><a class="indexterm" name="id2218682"></a><a class="indexterm" name="id2218691"></a><pre class="programlisting">START TRANSACTION [WITH CONSISTENT SNAPSHOT] | BEGIN [WORK]
COMMIT [WORK] [AND [NO] CHAIN] [[NO] RELEASE]
ROLLBACK [WORK] [AND [NO] CHAIN] [[NO] RELEASE]
SET AUTOCOMMIT = {0 | 1}
</pre><p>
      The <code class="literal">START TRANSACTION</code> and
      <code class="literal">BEGIN</code> statement begin a new transaction.
      <code class="literal">COMMIT</code> commits the current transaction, making
      its changes permanent. <code class="literal">ROLLBACK</code> rolls back the
      current transaction, canceling its changes. The <code class="literal">SET
      AUTOCOMMIT</code> statement disables or enables the default
      autocommit mode for the current connection.
    </p><p>
      The optional <code class="literal">WORK</code> keyword is supported for
      <code class="literal">COMMIT</code> and <code class="literal">ROLLBACK</code>, as are
      the <code class="literal">CHAIN</code> and <code class="literal">RELEASE</code>
      clauses. <code class="literal">CHAIN</code> and <code class="literal">RELEASE</code>
      can be used for additional control over transaction completion.
      The value of the <code class="literal">completion_type</code> system
      variable determines the default completion behavior. See
      <a href="server-administration.html#server-system-variables" title="5.1.3. System Variables">Section 5.1.3, “System Variables”</a>.
    </p><p>
      The <code class="literal">AND CHAIN</code> clause causes a new transaction
      to begin as soon as the current one ends, and the new transaction
      has the same isolation level as the just-terminated transaction.
      The <code class="literal">RELEASE</code> clause causes the server to
      disconnect the current client connection after terminating the
      current transaction. Including the <code class="literal">NO</code> keyword
      suppresses <code class="literal">CHAIN</code> or <code class="literal">RELEASE</code>
      completion, which can be useful if the
      <code class="literal">completion_type</code> system variable is set to cause
      chaining or release completion by default.
    </p><p>
      By default, MySQL runs with autocommit mode enabled. This means
      that as soon as you execute a statement that updates (modifies) a
      table, MySQL stores the update on disk.
    </p><p>
      If you are using a transaction-safe storage engine (such as
      <code class="literal">InnoDB</code>, or <code class="literal">NDBCLUSTER</code>), you
      can disable autocommit mode with the following statement:
    </p><pre class="programlisting">SET AUTOCOMMIT=0;
</pre><p>
      After disabling autocommit mode by setting the
      <code class="literal">AUTOCOMMIT</code> variable to zero, you must use
      <code class="literal">COMMIT</code> to store your changes to disk or
      <code class="literal">ROLLBACK</code> if you want to ignore the changes you
      have made since the beginning of your transaction.
    </p><p>
      To disable autocommit mode for a single series of statements, use
      the <code class="literal">START TRANSACTION</code> statement:
    </p><pre class="programlisting">START TRANSACTION;
SELECT @A:=SUM(salary) FROM table1 WHERE type=1;
UPDATE table2 SET summary=@A WHERE type=1;
COMMIT;
</pre><p>
      With <code class="literal">START TRANSACTION</code>, autocommit remains
      disabled until you end the transaction with
      <code class="literal">COMMIT</code> or <code class="literal">ROLLBACK</code>. The
      autocommit mode then reverts to its previous state.
    </p><p>
      <code class="literal">BEGIN</code> and <code class="literal">BEGIN WORK</code> are
      supported as aliases of <code class="literal">START TRANSACTION</code> for
      initiating a transaction. <code class="literal">START TRANSACTION</code> is
      standard SQL syntax and is the recommended way to start an ad-hoc
      transaction.
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        Many APIs used for writing MySQL client applications (such as
        JDBC) provide their own methods for starting transactions that
        can (and sometimes should) be used instead of sending a
        <code class="literal">START TRANSACTION</code> statement from the client.
        See <a href="apis.html" title="Chapter 29. APIs and Libraries">Chapter 29, <i>APIs and Libraries</i></a>, or the documentation for your API,
        for more information.
      </p></div><p>
      The <code class="literal">BEGIN</code> statement differs from the use of the
      <code class="literal">BEGIN</code> keyword that starts a <code class="literal">BEGIN ...
      END</code> compound statement. The latter does not begin a
      transaction. See <a href="stored-procedures.html#begin-end" title="23.2.7. BEGIN ... END Compound Statement Syntax">Section 23.2.7, “<code class="literal">BEGIN ... END</code> Compound Statement Syntax”</a>.
    </p><p>
      You can also begin a transaction like this:
    </p><pre class="programlisting">START TRANSACTION WITH CONSISTENT SNAPSHOT;
</pre><p>
      The <code class="literal">WITH CONSISTENT SNAPSHOT</code> clause starts a
      consistent read for storage engines that are capable of it. This
      applies only to <code class="literal">InnoDB</code>. The effect is the same
      as issuing a <code class="literal">START TRANSACTION</code> followed by a
      <code class="literal">SELECT</code> from any <code class="literal">InnoDB</code>
      table. See <a href="storage-engines.html#innodb-consistent-read" title="13.5.10.4. Consistent Non-Locking Read">Section 13.5.10.4, “Consistent Non-Locking Read”</a>. The
      <code class="literal">WITH CONSISTENT SNAPSHOT</code> clause does not change
      the current transaction isolation level, so it provides a
      consistent snapshot only if the current isolation level is one
      that allows consistent read (<code class="literal">REPEATABLE READ</code> or
      <code class="literal">SERIALIZABLE</code>).
    </p><p>
      Beginning a transaction causes any pending transaction to be
      committed. See <a href="sql-syntax.html#implicit-commit" title="12.4.3. Statements That Cause an Implicit Commit">Section 12.4.3, “Statements That Cause an Implicit Commit”</a>, for more
      information.
    </p><p>
      Beginning a transaction also causes table locks acquired with
      <code class="literal">LOCK TABLES</code> to be released, as though you had
      executed <code class="literal">UNLOCK TABLES</code>. Beginning a transaction
      does not release a global read lock acquired with <code class="literal">FLUSH
      TABLES WITH READ LOCK</code>.
    </p><p>
      For best results, transactions should be performed using only
      tables managed by a single transactional storage engine.
      Otherwise, the following problems can occur:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you use tables from more than one transaction-safe storage
          engine (such as <code class="literal">InnoDB</code> and
          <code class="literal">Falcon</code>), and the transaction isolation
          level is not <code class="literal">SERIALIZABLE</code>, it is possible
          that when one transaction commits, another ongoing transaction
          that uses the same tables will see only some of the changes
          made by the first transaction. That is, the atomicity of
          transactions is not guaranteed with mixed engines and
          inconsistencies can result. (If mixed-engine transactions are
          infrequent, you can use <code class="literal">SET TRANSACTION ISOLATION
          LEVEL</code> to set the isolation level to
          <code class="literal">SERIALIZABLE</code> on a per-transaction basis as
          necessary.)
        </p></li><li><p>
          If you use non-transaction-safe tables within a transaction,
          any changes to those tables are stored at once, regardless of
          the status of autocommit mode.
        </p><p>
          If you issue a <code class="literal">ROLLBACK</code> statement after
          updating a non-transactional table within a transaction, an
          <code class="literal">ER_WARNING_NOT_COMPLETE_ROLLBACK</code> warning
          occurs. Changes to transaction-safe tables are rolled back,
          but not changes to non-transaction-safe tables.
        </p></li></ul></div><p>
      Each transaction is stored in the binary log in one chunk, upon
      <code class="literal">COMMIT</code>. Transactions that are rolled back are
      not logged. (<span class="bold"><strong>Exception</strong></span>:
      Modifications to non-transactional tables cannot be rolled back.
      If a transaction that is rolled back includes modifications to
      non-transactional tables, the entire transaction is logged with a
      <code class="literal">ROLLBACK</code> statement at the end to ensure that
      the modifications to those tables are replicated.) See
      <a href="server-administration.html#binary-log" title="5.2.4. The Binary Log">Section 5.2.4, “The Binary Log”</a>.
    </p><p>
      You can change the isolation level for transactions with
      <code class="literal">SET TRANSACTION ISOLATION LEVEL</code>. See
      <a href="sql-syntax.html#set-transaction" title="12.4.6. SET TRANSACTION Syntax">Section 12.4.6, “<code class="literal">SET TRANSACTION</code> Syntax”</a>.
    </p><p>
      Rolling back can be a slow operation that may occur without the
      user having explicitly asked for it (for example, when an error
      occurs). Because of this, <code class="literal">SHOW PROCESSLIST</code>
      displays <code class="literal">Rolling back</code> in the
      <code class="literal">State</code> column for the connection during implicit
      and explicit (<code class="literal">ROLLBACK</code> SQL statement)
      rollbacks.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cannot-roll-back"></a>12.4.2. Statements That Cannot Be Rolled Back</h3></div></div></div><p>
      Some statements cannot be rolled back. In general, these include
      data definition language (DDL) statements, such as those that
      create or drop databases, those that create, drop, or alter tables
      or stored routines.
    </p><p>
      You should design your transactions not to include such
      statements. If you issue a statement early in a transaction that
      cannot be rolled back, and then another statement later fails, the
      full effect of the transaction cannot be rolled back in such cases
      by issuing a <code class="literal">ROLLBACK</code> statement.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="implicit-commit"></a>12.4.3. Statements That Cause an Implicit Commit</h3></div></div></div><p>
      Each of the following statements (and any synonyms for them)
      implicitly end a transaction, as if you had done a
      <code class="literal">COMMIT</code> before executing the statement:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">ALTER EVENT</code>, <code class="literal">ALTER
          FUNCTION</code>, <code class="literal">ALTER PROCEDURE</code>,
          <code class="literal">ALTER TABLE</code>, <code class="literal">BEGIN</code>,
          <code class="literal">CREATE DATABASE</code>, <code class="literal">CREATE
          EVENT</code>, <code class="literal">CREATE FUNCTION</code>,
          <code class="literal">CREATE INDEX</code>, <code class="literal">CREATE
          PROCEDURE</code>, <code class="literal">CREATE TABLE</code>,
          <code class="literal">DROP DATABASE</code>, <code class="literal">DROP
          EVENT</code>, <code class="literal">DROP FUNCTION</code>,
          <code class="literal">DROP INDEX</code>, <code class="literal">DROP
          PROCEDURE</code>, <code class="literal">DROP TABLE</code>,
          <code class="literal">LOAD DATA INFILE</code> <code class="literal">LOCK
          TABLES</code>, <code class="literal">RENAME TABLE</code>,
          <code class="literal">SET AUTOCOMMIT=1</code> (if the value is not
          already 1), <code class="literal">START TRANSACTION</code>,
          <code class="literal">TRUNCATE TABLE</code>, <code class="literal">UNLOCK
          TABLES</code>.
        </p><p>
          The <code class="literal">BEGIN</code> statement differs from the use of
          the <code class="literal">BEGIN</code> keyword that starts a
          <code class="literal">BEGIN ... END</code> compound statement. The
          latter does not cause an implicit commit. See
          <a href="stored-procedures.html#begin-end" title="23.2.7. BEGIN ... END Compound Statement Syntax">Section 23.2.7, “<code class="literal">BEGIN ... END</code> Compound Statement Syntax”</a>.
        </p></li><li><p>
          Beginning with MySQL 5.1.3, <code class="literal">ALTER VIEW</code>,
          <code class="literal">CREATE TRIGGER</code>, <code class="literal">CREATE
          USER</code>, <code class="literal">CREATE VIEW</code>, <code class="literal">DROP
          TRIGGER</code>, <code class="literal">DROP USER</code>, <code class="literal">DROP
          VIEW</code>, and <code class="literal">RENAME USER</code> cause an
          implicit commit.
        </p></li><li><p>
          <code class="literal">UNLOCK TABLES</code> commits a transaction only if
          any tables currently have been locked with <code class="literal">LOCK
          TABLES</code>. This does not occur for <code class="literal">UNLOCK
          TABLES</code> following <code class="literal">FLUSH TABLES WITH READ
          LOCK</code> because the latter statement does not acquire
          table-level locks.
        </p></li><li><p>
          The <code class="literal">CREATE TABLE</code> statement in
          <code class="literal">InnoDB</code> is processed as a single
          transaction. This means that a <code class="literal">ROLLBACK</code>
          from the user does not undo <code class="literal">CREATE TABLE</code>
          statements the user made during that transaction.
        </p></li><li><p>
          <code class="literal">CREATE TABLE</code> and <code class="literal">DROP
          TABLE</code> do not commit a transaction if the
          <code class="literal">TEMPORARY</code> keyword is used. (This does not
          apply to other operations on temporary tables such as
          <code class="literal">CREATE INDEX</code>, which do cause a commit.)
          However, although no implicit commit occurs, neither can the
          statement be rolled back. Therefore, use of such statements
          will violate transaction atomicity: For example, if you use
          <code class="literal">CREATE TEMPORARY TABLE</code> and then roll back
          the transaction, the table remains in existence.
        </p></li><li><p>
          In MySQL 5.1.11 and earlier, <code class="literal">LOAD DATA
          INFILE</code> caused an implicit commit for all storage
          engines. Beginning with MySQL 5.1.12, it causes an implicit
          commit only for tables using the <code class="literal">NDB</code>
          storage engine. For more information, see <a href="http://bugs.mysql.com/11151" target="_top">Bug#11151</a>.
        </p></li><li><p>
          Beginning with MySQL 5.1.15, <code class="literal">CREATE TABLE ...
          SELECT</code> causes an implicit commit before and after
          the statement is executed when you are creating non-temporary
          tables. (No commit occurs for <code class="literal">CREATE TEMPORARY TABLE
          ... SELECT</code>.) This is to prevent an issue during
          replication where the table could be created on the master
          after a rollback, but fail to be recorded in the binary log,
          and therefore not replicated to the slave. For more
          information, see <a href="http://bugs.mysql.com/22865" target="_top">Bug#22865</a>.
        </p></li><li><p>
          Beginning with MySQL 5.1.23, <code class="literal">GRANT</code>,
          <code class="literal">REVOKE</code>, and <code class="literal">SET PASSWORD</code>
          statements cause an implicit commit.
        </p></li></ul></div><p>
      Transactions cannot be nested. This is a consequence of the
      implicit <code class="literal">COMMIT</code> performed for any current
      transaction when you issue a <code class="literal">START TRANSACTION</code>
      statement or one of its synonyms.
    </p><p>
      Statements that cause an implicit commit cannot be used in an XA
      transaction while the transaction is in an
      <code class="literal">ACTIVE</code> state.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="savepoints"></a>12.4.4. <code class="literal">SAVEPOINT</code> and <code class="literal">ROLLBACK TO
      SAVEPOINT</code> Syntax</h3></div></div></div><a class="indexterm" name="id2219795"></a><a class="indexterm" name="id2219804"></a><a class="indexterm" name="id2219813"></a><pre class="programlisting">SAVEPOINT <em class="replaceable"><code>identifier</code></em>
ROLLBACK [WORK] TO [SAVEPOINT] <em class="replaceable"><code>identifier</code></em>
RELEASE SAVEPOINT <em class="replaceable"><code>identifier</code></em>
</pre><p>
      <code class="literal">InnoDB</code> supports the SQL statements
      <code class="literal">SAVEPOINT</code>, <code class="literal">ROLLBACK TO
      SAVEPOINT</code>, <code class="literal">RELEASE SAVEPOINT</code> and the
      optional <code class="literal">WORK</code> keyword for
      <code class="literal">ROLLBACK</code>.
    </p><p>
      The <code class="literal">SAVEPOINT</code> statement sets a named
      transaction savepoint with a name of
      <em class="replaceable"><code>identifier</code></em>. If the current transaction
      has a savepoint with the same name, the old savepoint is deleted
      and a new one is set.
    </p><p>
      The <code class="literal">ROLLBACK TO SAVEPOINT</code> statement rolls back
      a transaction to the named savepoint. Modifications that the
      current transaction made to rows after the savepoint was set are
      undone in the rollback, but <code class="literal">InnoDB</code> does
      <span class="emphasis"><em>not</em></span> release the row locks that were stored in
      memory after the savepoint. (Note that for a new inserted row, the
      lock information is carried by the transaction ID stored in the
      row; the lock is not separately stored in memory. In this case,
      the row lock is released in the undo.) Savepoints that were set at
      a later time than the named savepoint are deleted.
    </p><p>
      If the <code class="literal">ROLLBACK TO SAVEPOINT</code> statement returns
      the following error, it means that no savepoint with the specified
      name exists:
    </p><pre class="programlisting">ERROR 1181: Got error 153 during ROLLBACK
</pre><p>
      The <code class="literal">RELEASE SAVEPOINT</code> statement removes the
      named savepoint from the set of savepoints of the current
      transaction. No commit or rollback occurs. It is an error if the
      savepoint does not exist.
    </p><p>
      All savepoints of the current transaction are deleted if you
      execute a <code class="literal">COMMIT</code>, or a
      <code class="literal">ROLLBACK</code> that does not name a savepoint.
    </p><p>
      A new savepoint level is created when a stored function is invoked
      or a trigger is activated. The savepoints on previous levels
      become unavailable and thus do not conflict with savepoints on the
      new level. When the function or trigger terminates, any savepoints
      it created are released and the previous savepoint level is
      restored.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="lock-tables"></a>12.4.5. <code class="literal">LOCK TABLES</code> and <code class="literal">UNLOCK TABLES</code>
      Syntax</h3></div></div></div><a class="indexterm" name="id2220018"></a><a class="indexterm" name="id2220026"></a><pre class="programlisting">LOCK TABLES
    <em class="replaceable"><code>tbl_name</code></em> [[AS] <em class="replaceable"><code>alias</code></em>] <em class="replaceable"><code>lock_type</code></em>
    [, <em class="replaceable"><code>tbl_name</code></em> [[AS] <em class="replaceable"><code>alias</code></em>] <em class="replaceable"><code>lock_type</code></em>] ...

<em class="replaceable"><code>lock_type</code></em>:
    READ [LOCAL]
  | [LOW_PRIORITY] WRITE

UNLOCK TABLES
</pre><p>
      MySQL enables client sessions to acquire table locks explicitly
      for the purpose of cooperating with other sessions for access to
      tables, or to prevent other sessions from modifying tables during
      periods when a session requires exclusive access to them. A
      session can acquire or release locks only for itself. One session
      cannot acquire locks for another session or release locks held by
      another session.
    </p><p>
      <code class="literal">LOCK TABLES</code> acquires table locks for the
      current thread. It locks base tables or views. (For view locking,
      <code class="literal">LOCK TABLES</code> adds all base tables used in the
      view to the set of tables to be locked and locks them
      automatically.) To use <code class="literal">LOCK TABLES</code>, you must
      have the <code class="literal">LOCK TABLES</code> privilege, and the
      <code class="literal">SELECT</code> privilege for each object to be locked.
    </p><p>
      MySQL enables client sessions to acquire table locks explicitly
      Locks may be used to emulate transactions or to get more speed
      when updating tables. This is explained in more detail later in
      this section.
    </p><p>
      <code class="literal">UNLOCK TABLES</code> explicitly releases any table
      locks held by the current thread. Another use for <code class="literal">UNLOCK
      TABLES</code> is to release the global read lock acquired with
      <code class="literal">FLUSH TABLES WITH READ LOCK</code>. (You can lock all
      tables in all databases with a read lock with the <code class="literal">FLUSH
      TABLES WITH READ LOCK</code> statement. See
      <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax">Section 12.5.6.2, “<code class="literal">FLUSH</code> Syntax”</a>. This is a very convenient way to get
      backups if you have a filesystem such as Veritas that can take
      snapshots in time.)
    </p><p>
      The following discussion applies only to
      non-<code class="literal">TEMPORARY</code> tables. <code class="literal">LOCK
      TABLES</code> is allowed (but ignored) for a
      <code class="literal">TEMPORARY</code> table. The table can be accessed
      freely by the session within which it was created, regardless of
      what other locking may be in effect. No lock is necessary because
      no other session can see the table.
    </p><p>
      The following general rules apply to acquisition and release of
      locks by a given thread:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Table locks are acquired with <code class="literal">LOCK TABLES</code>.
        </p></li><li><p>
          If the <code class="literal">LOCK TABLES</code> statement must wait due
          to locks held by other threads on any of the tables, it blocks
          until all locks can be acquired.
        </p></li><li><p>
          Table locks are released explicitly with <code class="literal">UNLOCK
          TABLES</code>.
        </p></li><li><p>
          Table locks are released implicitly under these conditions:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">LOCK TABLES</code> releases any table locks
              currently held by the thread before acquiring new locks.
            </p></li><li><p>
              Beginning a transaction (for example, with <code class="literal">START
              TRANSACTION</code>) implicitly performs an
              <code class="literal">UNLOCK TABLES</code>. (Additional information
              about the interaction between table locking and
              transactions is given later in this section.)
            </p></li><li><p>
              If a client connection drops, the server releases table
              locks held by the client. If the client reconnects, the
              locks will no longer be in effect. In addition, if the
              client had an active transaction, the server rolls back
              the transaction upon disconnect, and if reconnect occurs,
              the new session begins with autocommit enabled. For this
              reason, clients may wish to disable auto-reconnect. With
              auto-reconnect in effect, the client is not notified if
              reconnect occurs but any table locks or current
              transaction will have been lost. With auto-reconnect
              disabled, if the connection drops, an error occurs for the
              next statement issued. The client can detect the error and
              take appropriate action such as reacquiring the locks or
              redoing the transaction. See
              <a href="apis.html#auto-reconnect" title="29.2.13. Controlling Automatic Reconnect Behavior">Section 29.2.13, “Controlling Automatic Reconnect Behavior”</a>.
            </p></li></ul></div></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        If you use <code class="literal">ALTER TABLE</code> on a locked table, it
        may become unlocked. See <a href="error-handling.html#alter-table-problems" title="B.1.7.1. Problems with ALTER TABLE">Section B.1.7.1, “Problems with <code class="literal">ALTER TABLE</code>”</a>.
      </p></div><p>
      A table lock protects only against inappropriate reads or writes
      by other clients. The client holding the lock, even a read lock,
      can perform table-level operations such as <code class="literal">DROP
      TABLE</code>. Truncate operations are not transaction-safe, so
      an error occurs if the client attempts one during an active
      transaction or while holding a table lock.
    </p><p>
      When you use <code class="literal">LOCK TABLES</code>, you must lock all
      tables that you are going to use in your statements. While the
      locks obtained with a <code class="literal">LOCK TABLES</code> statement are
      in effect, you cannot access any tables that were not locked by
      the statement. If you lock a view, <code class="literal">LOCK TABLES</code>
      adds all base tables used in the view to the set of tables to be
      locked and locks them automatically.
    </p><p>
      You cannot refer to a locked table multiple times in a single
      query using the same name. Use aliases instead, and obtain a
      separate lock for the table and each alias:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>LOCK TABLE t WRITE, t AS t1 READ;</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO t SELECT * FROM t;</code></strong>
ERROR 1100: Table 't' was not locked with LOCK TABLES
mysql&gt; <strong class="userinput"><code>INSERT INTO t SELECT * FROM t AS t1;</code></strong>
</pre><p>
      The error occurs for the first <code class="literal">INSERT</code> because
      there are two references to the same name for a locked table. The
      second <code class="literal">INSERT</code> succeeds because the references
      to the table use different names.
    </p><p>
      If your statements refer to a table by means of an alias, you must
      lock the table using that same alias. It does not work to lock the
      table without specifying the alias:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>LOCK TABLE t READ;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT * FROM t AS myalias;</code></strong>
ERROR 1100: Table 'myalias' was not locked with LOCK TABLES
</pre><p>
      Conversely, if you lock a table using an alias, you must refer to
      it in your statements using that alias:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>LOCK TABLE t AS myalias READ;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT * FROM t;</code></strong>
ERROR 1100: Table 't' was not locked with LOCK TABLES
mysql&gt; <strong class="userinput"><code>SELECT * FROM t AS myalias;</code></strong>
</pre><p>
      If a thread obtains a <code class="literal">READ</code> lock on a table,
      that thread (and all other threads) can only read from the table.
      If a thread obtains a <code class="literal">WRITE</code> lock on a table,
      only the thread holding the lock can write to the table (that
      thread can also read from the table); other threads are blocked
      from reading or writing the table until the lock has been
      released.
    </p><p>
      The difference between <code class="literal">READ</code> and <code class="literal">READ
      LOCAL</code> is that <code class="literal">READ LOCAL</code> allows
      non-conflicting <code class="literal">INSERT</code> statements (concurrent
      inserts) to execute while the lock is held. However, <code class="literal">READ
      LOCAL</code> cannot be used if you are going to manipulate the
      database using processes external to the server while you hold the
      lock. For <code class="literal">InnoDB</code> tables, <code class="literal">READ
      LOCAL</code> is the same as <code class="literal">READ</code>.
    </p><p>
      <code class="literal">WRITE</code> locks normally have higher priority than
      <code class="literal">READ</code> locks to ensure that updates are processed
      as soon as possible. This means that if one thread obtains a
      <code class="literal">READ</code> lock and then another thread requests a
      <code class="literal">WRITE</code> lock, subsequent <code class="literal">READ</code>
      lock requests wait until the thread that requested the
      <code class="literal">WRITE</code> lock has obtained the lock and released
      it. A request for a <code class="literal">LOW_PRIORITY WRITE</code> lock, by
      contrast, allows subsequent <code class="literal">READ</code> lock requests
      by other threads to be satisfied first if they occur while the
      <code class="literal">LOW_PRIORITY WRITE</code> request is waiting. You
      should use <code class="literal">LOW_PRIORITY WRITE</code> locks only if you
      are sure that eventually there will be a time when no threads have
      a <code class="literal">READ</code> lock. For <code class="literal">InnoDB</code>
      tables in transactional mode (autocommit = 0), a waiting
      <code class="literal">LOW_PRIORITY WRITE</code> lock acts like a regular
      <code class="literal">WRITE</code> lock and causes subsequent
      <code class="literal">READ</code> lock requests to wait.
    </p><p>
      <code class="literal">LOCK TABLES</code> works as follows:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Sort all tables to be locked in an internally defined order.
          From the user standpoint, this order is undefined.
        </p></li><li><p>
          If a table is to be locked with a read and a write lock, put
          the write lock request before the read lock request.
        </p></li><li><p>
          Lock one table at a time until the thread gets all locks.
        </p></li></ol></div><p>
      This policy ensures that table locking is deadlock free. There
      are, however, other things you need to be aware of about this
      policy: If you are using a <code class="literal">LOW_PRIORITY WRITE</code>
      lock for a table, it means only that MySQL waits for this
      particular lock until there are no other threads that want a
      <code class="literal">READ</code> lock. When the thread has gotten the
      <code class="literal">WRITE</code> lock and is waiting to get the lock for
      the next table in the lock table list, all other threads wait for
      the <code class="literal">WRITE</code> lock to be released. If this becomes
      a serious problem with your application, you should consider
      converting some of your tables to transaction-safe tables.
    </p><p>
      <code class="literal">LOCK TABLES</code> and <code class="literal">UNLOCK
      TABLES</code> interact with the use of transactions as follows:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">LOCK TABLES</code> is not transaction-safe and
          implicitly commits any active transaction before attempting to
          lock the tables.
        </p></li><li><p>
          <code class="literal">UNLOCK TABLES</code> implicitly commits any active
          transaction, but only if <code class="literal">LOCK TABLES</code> has
          been used to acquire table locks. For example, in the
          following set of statements, <code class="literal">UNLOCK TABLES</code>
          releases the global read lock but does not commit the
          transaction because no table locks are in effect:
        </p><pre class="programlisting">FLUSH TABLES WITH READ LOCK;
START TRANSACTION;
SELECT ... ;
UNLOCK TABLES;
</pre></li><li><p>
          Beginning a transaction (for example, with <code class="literal">START
          TRANSACTION</code>) implicitly commits any current
          transaction and releases existing locks.
        </p></li><li><p>
          Other statements that implicitly cause transactions to be
          committed do not release existing locks. For a list of such
          statements, see <a href="sql-syntax.html#implicit-commit" title="12.4.3. Statements That Cause an Implicit Commit">Section 12.4.3, “Statements That Cause an Implicit Commit”</a>.
        </p></li><li><p>
          The correct way to use <code class="literal">LOCK TABLES</code> and
          <code class="literal">UNLOCK TABLES</code> with transactional tables,
          such as <code class="literal">InnoDB</code> tables, is to begin a
          transaction with <code class="literal">SET AUTOCOMMIT = 0</code> (not
          <code class="literal">START TRANSACTION</code>) followed by
          <code class="literal">LOCK TABLES</code>, and to not call
          <code class="literal">UNLOCK TABLES</code> until you commit the
          transaction explicitly. When you call <code class="literal">LOCK
          TABLES</code>, <code class="literal">InnoDB</code> internally takes
          its own table lock, and MySQL takes its own table lock.
          <code class="literal">InnoDB</code> releases its internal table lock at
          the next commit, but for MySQL to release its table lock, you
          have to call <code class="literal">UNLOCK TABLES</code>. You should not
          have <code class="literal">AUTOCOMMIT = 1</code>, because then
          <code class="literal">InnoDB</code> releases its internal table lock
          immediately after the call of <code class="literal">LOCK TABLES</code>,
          and deadlocks can very easily happen.
          <code class="literal">InnoDB</code> does not acquire the internal table
          lock at all if <code class="literal">AUTOCOMMIT=1</code>, to help old
          applications avoid unnecessary deadlocks.
        </p></li><li><p>
          <code class="literal">ROLLBACK</code> does not release table locks.
        </p></li><li><p>
          <code class="literal">FLUSH TABLES WITH READ LOCK</code> acquires a
          global read lock and not table locks, so it is not subject to
          the same behavior as <code class="literal">LOCK TABLES</code> and
          <code class="literal">UNLOCK TABLES</code> with respect to table locking
          and implicit commits. See <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax">Section 12.5.6.2, “<code class="literal">FLUSH</code> Syntax”</a>.
        </p></li></ul></div><p>
      You can safely use <code class="literal">KILL</code> to terminate a thread
      that is waiting for a table lock. See <a href="sql-syntax.html#kill" title="12.5.6.3. KILL Syntax">Section 12.5.6.3, “<code class="literal">KILL</code> Syntax”</a>.
    </p><p>
      You should <span class="emphasis"><em>not</em></span> lock any tables that you are
      using with <code class="literal">INSERT DELAYED</code> because in that case
      the <code class="literal">INSERT</code> is performed by a separate thread.
    </p><p>
      For some operations, system tables in the <code class="literal">mysql</code>
      database must be accessed. For example, the
      <code class="literal">HELP</code> statement requires the contents of the
      server-side help tables, and
      <a href="functions.html#function_convert-tz"><code class="literal">CONVERT_TZ()</code></a> might need to read
      the time zone tables. Before MySQL 5.1.17, to perform such
      operations while a <code class="literal">LOCK TABLES</code> statement is in
      effect, you must also lock the requisite system tables explicitly
      or a lock error occurs. As of 5.1.17, the server implicitly locks
      the system tables for reading as necessary so that you need not
      lock them explicitly. These tables are treated as just described:
    </p><pre class="programlisting">mysql.help_category
mysql.help_keyword
mysql.help_relation
mysql.help_topic
mysql.proc
mysql.time_zone
mysql.time_zone_leap_second
mysql.time_zone_name
mysql.time_zone_transition
mysql.time_zone_transition_type
</pre><p>
      If you want to explicitly place a <code class="literal">WRITE</code> lock on
      any of those tables with a <code class="literal">LOCK TABLES</code>
      statement, the table must be the only one locked; no other table
      can be locked with the same statement.
    </p><p>
      Normally, you do not need to lock tables, because all single
      <code class="literal">UPDATE</code> statements are atomic; no other thread
      can interfere with any other currently executing SQL statement.
      However, there are a few cases when locking tables may provide an
      advantage:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you are going to run many operations on a set of
          <code class="literal">MyISAM</code> tables, it is much faster to lock
          the tables you are going to use. Locking
          <code class="literal">MyISAM</code> tables speeds up inserting,
          updating, or deleting on them because MySQL does not flush the
          key cache for the locked tables until <code class="literal">UNLOCK
          TABLES</code> is called. Normally, the key cache is flushed
          after each SQL statement.
        </p><p>
          The downside to locking the tables is that no thread can
          update a <code class="literal">READ</code>-locked table (including the
          one holding the lock) and no thread can access a
          <code class="literal">WRITE</code>-locked table other than the one
          holding the lock.
        </p></li><li><p>
          If you are using tables for a non-transactional storage
          engine, you must use <code class="literal">LOCK TABLES</code> if you
          want to ensure that no other thread modifies the tables
          between a <code class="literal">SELECT</code> and an
          <code class="literal">UPDATE</code>. The example shown here requires
          <code class="literal">LOCK TABLES</code> to execute safely:
        </p><pre class="programlisting">LOCK TABLES trans READ, customer WRITE;
SELECT SUM(value) FROM trans WHERE customer_id=<em class="replaceable"><code>some_id</code></em>;
UPDATE customer
  SET total_value=<em class="replaceable"><code>sum_from_previous_statement</code></em>
  WHERE customer_id=<em class="replaceable"><code>some_id</code></em>;
UNLOCK TABLES;
</pre><p>
          Without <code class="literal">LOCK TABLES</code>, it is possible that
          another thread might insert a new row in the
          <code class="literal">trans</code> table between execution of the
          <code class="literal">SELECT</code> and <code class="literal">UPDATE</code>
          statements.
        </p></li></ul></div><p>
      You can avoid using <code class="literal">LOCK TABLES</code> in many cases
      by using relative updates (<code class="literal">UPDATE customer SET
      <em class="replaceable"><code>value</code></em>=<em class="replaceable"><code>value</code></em>+<em class="replaceable"><code>new_value</code></em></code>)
      or the <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> function.
      See <a href="introduction.html#ansi-diff-transactions" title="1.8.5.2. Transactions and Atomic Operations">Section 1.8.5.2, “Transactions and Atomic Operations”</a>.
    </p><p>
      You can also avoid locking tables in some cases by using the
      user-level advisory lock functions
      <a href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a> and
      <a href="functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a>. These locks are
      saved in a hash table in the server and implemented with
      <code class="literal">pthread_mutex_lock()</code> and
      <code class="literal">pthread_mutex_unlock()</code> for high speed. See
      <a href="functions.html#miscellaneous-functions" title="11.11.4. Miscellaneous Functions">Section 11.11.4, “Miscellaneous Functions”</a>.
    </p><p>
      See <a href="optimization.html#internal-locking" title="7.3.1. Internal Locking Methods">Section 7.3.1, “Internal Locking Methods”</a>, for more information on
      locking policy.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="set-transaction"></a>12.4.6. <code class="literal">SET TRANSACTION</code> Syntax</h3></div></div></div><a class="indexterm" name="id2221270"></a><a class="indexterm" name="id2221279"></a><pre class="programlisting">SET [GLOBAL | SESSION] TRANSACTION ISOLATION LEVEL
  {
       READ UNCOMMITTED
     | READ COMMITTED
     | REPEATABLE READ
     | SERIALIZABLE
   }
</pre><p>
      This statement sets the transaction isolation level for the next
      transaction, globally, or for the current session.
    </p><p>
      The default behavior of <code class="literal">SET TRANSACTION</code> is to
      set the isolation level for the next (not yet started)
      transaction. If you use the <code class="literal">GLOBAL</code> keyword, the
      statement sets the default transaction level globally for all new
      connections created from that point on. Existing connections are
      unaffected. You need the <code class="literal">SUPER</code> privilege to do
      this. Using the <code class="literal">SESSION</code> keyword sets the
      default transaction level for all future transactions performed on
      the current connection.
    </p><p>
      For information about <code class="literal">InnoDB</code> and transaction
      isolation level, see
      <a href="storage-engines.html#innodb-transaction-isolation" title="13.5.10.3. InnoDB and TRANSACTION ISOLATION
        LEVEL">Section 13.5.10.3, “<code class="literal">InnoDB</code> and <code class="literal">TRANSACTION ISOLATION
        LEVEL</code>”</a>.
      <code class="literal">InnoDB</code> supports each of the levels described
      here in MySQL 5.1. The default level is
      <code class="literal">REPEATABLE READ</code>. See also
      <a href="storage-engines.html#innodb-locks-set" title="13.5.10.8. Locks Set by Different SQL Statements in InnoDB">Section 13.5.10.8, “Locks Set by Different SQL Statements in <code class="literal">InnoDB</code>”</a>, for additional information
      about how <code class="literal">InnoDB</code> uses locks to execute various
      types of statements.
    </p><p>
      In MySQL 5.1, if the <code class="literal">READ
      COMMITTED</code> isolation level is used or the
      <code class="literal">innodb_locks_unsafe_for_binlog</code> system variable
      is enabled, there is no <code class="literal">InnoDB</code> gap locking
      except in constraint checking. Also, record locks for non-matching
      rows are released after MySQL has evaluated the
      <code class="literal">WHERE</code> condition.
    </p><p>
      To set the initial default global isolation level for
      <span><strong class="command">mysqld</strong></span>, use the
      <code class="option">--transaction-isolation</code> option. See
      <a href="server-administration.html#server-options" title="5.1.2. Command Options">Section 5.1.2, “Command Options”</a>.
    </p><p>
      A detailed list of the transaction levels supported by MySQL and
      the various storage engines follows:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">READ UNCOMMITTED</code>
        </p><p>
          <code class="literal">SELECT</code> statements are performed in a
          non-locking fashion, but a possible earlier version of a
          record might be used. Thus, using this isolation level, such
          reads are not consistent. This is also called a “<span class="quote">dirty
          read.</span>” Otherwise, this isolation level works like
          <code class="literal">READ COMMITTED</code>.
        </p></li><li><p>
          <code class="literal">READ COMMITTED</code>
        </p><p>
          A somewhat Oracle-like isolation level. All <code class="literal">SELECT
          ... FOR UPDATE</code> and <code class="literal">SELECT ... LOCK IN SHARE
          MODE</code> statements lock only the index records, not the
          gaps before them, and thus allow the free insertion of new
          records next to locked records. <code class="literal">UPDATE</code> and
          <code class="literal">DELETE</code> statements using a unique index with
          a unique search condition lock only the index record found,
          not the gap before it. In range-type <code class="literal">UPDATE</code>
          and <code class="literal">DELETE</code> statements,
          <code class="literal">InnoDB</code> must set next-key or gap locks and
          block insertions by other users to the gaps covered by the
          range. This is necessary because “<span class="quote">phantom rows</span>”
          must be blocked for MySQL replication and recovery to work.
        </p><p>
          Consistent reads behave as in Oracle: Each consistent read,
          even within the same transaction, sets and reads its own fresh
          snapshot. See <a href="storage-engines.html#innodb-consistent-read" title="13.5.10.4. Consistent Non-Locking Read">Section 13.5.10.4, “Consistent Non-Locking Read”</a>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            As of MySQL 5.1, if you use <code class="literal">READ
            COMMITTED</code> (which is equivalent to
            <code class="literal">innodb_locks_unsafe_for_binlog</code> in 5.0),
            you <span class="emphasis"><em>must</em></span> use row-based binary logging.
          </p></div></li><li><p>
          <code class="literal">REPEATABLE READ</code>
        </p><p>
          This is the default isolation level of
          <code class="literal">InnoDB</code>. <code class="literal">SELECT ... FOR
          UPDATE</code>, <code class="literal">SELECT ... LOCK IN SHARE
          MODE</code>, <code class="literal">UPDATE</code>, and
          <code class="literal">DELETE</code> statements that use a unique index
          with a unique search condition lock only the index record
          found, not the gap before it. With other search conditions,
          these operations employ next-key locking, locking the index
          range scanned with next-key or gap locks, and block new
          insertions by other users.
        </p><p>
          In consistent reads, there is an important difference from the
          <code class="literal">READ COMMITTED</code> isolation level: All
          consistent reads within the same transaction read the same
          snapshot established by the first read. This convention means
          that if you issue several plain <code class="literal">SELECT</code>
          statements within the same transaction, these
          <code class="literal">SELECT</code> statements are consistent also with
          respect to each other. See
          <a href="storage-engines.html#innodb-consistent-read" title="13.5.10.4. Consistent Non-Locking Read">Section 13.5.10.4, “Consistent Non-Locking Read”</a>.
        </p></li><li><p>
          <code class="literal">SERIALIZABLE</code>
        </p><p>
          This level is like <code class="literal">REPEATABLE READ</code>, but
          <code class="literal">InnoDB</code> implicitly converts all plain
          <code class="literal">SELECT</code> statements to <code class="literal">SELECT ...
          LOCK IN SHARE MODE</code>.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xa"></a>12.4.7. XA Transactions</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#xa-statements">12.4.7.1. XA Transaction SQL Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#xa-states">12.4.7.2. XA Transaction States</a></span></dt></dl></div><a class="indexterm" name="id2221708"></a><p>
      Support for XA transactions is available for the
      <code class="literal">InnoDB</code> storage engine. The MySQL XA
      implementation is based on the X/Open CAE document
      <em class="citetitle">Distributed Transaction Processing: The XA
      Specification</em>. This document is published by The Open
      Group and available at
      <a href="http://www.opengroup.org/public/pubs/catalog/c193.htm" target="_top">http://www.opengroup.org/public/pubs/catalog/c193.htm</a>.
      Limitations of the current XA implementation are described in
      <a href="restrictions.html#xa-restrictions" title="D.5. Restrictions on XA Transactions">Section D.5, “Restrictions on XA Transactions”</a>.
    </p><p>
      On the client side, there are no special requirements. The XA
      interface to a MySQL server consists of SQL statements that begin
      with the <code class="literal">XA</code> keyword. MySQL client programs must
      be able to send SQL statements and to understand the semantics of
      the XA statement interface. They do not need be linked against a
      recent client library. Older client libraries also will work.
    </p><p>
      Currently, among the MySQL Connectors, MySQL Connector/J 5.0.0
      supports XA directly (by means of a class interface that handles
      the Xan SQL statement interface for you).
    </p><p>
      XA supports distributed transactions; that is, the ability to
      allow multiple separate transactional resources to participate in
      a global transaction. Transactional resources often are RDBMSs but
      may be other kinds of resources.
    </p><p>
      A global transaction involves several actions that are
      transactional in themselves, but that all must either complete
      successfully as a group, or all be rolled back as a group. In
      essence, this extends ACID properties “<span class="quote">up a level</span>” so
      that multiple ACID transactions can be executed in concert as
      components of a global operation that also has ACID properties.
      (However, for a distributed transaction, you must use the
      <code class="literal">SERIALIZABLE</code> isolation level to achieve ACID
      properties. It is enough to use <code class="literal">REPEATABLE READ</code>
      for a non-distributed transaction, but not for a distributed
      transaction.)
    </p><p>
      Some examples of distributed transactions:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          An application may act as an integration tool that combines a
          messaging service with an RDBMS. The application makes sure
          that transactions dealing with message sending, retrieval, and
          processing that also involve a transactional database all
          happen in a global transaction. You can think of this as
          “<span class="quote">transactional email.</span>”
        </p></li><li><p>
          An application performs actions that involve different
          database servers, such as a MySQL server and an Oracle server
          (or multiple MySQL servers), where actions that involve
          multiple servers must happen as part of a global transaction,
          rather than as separate transactions local to each server.
        </p></li><li><p>
          A bank keeps account information in an RDBMS and distributes
          and receives money via automated teller machines (ATMs). It is
          necessary to ensure that ATM actions are correctly reflected
          in the accounts, but this cannot be done with the RDBMS alone.
          A global transaction manager integrates the ATM and database
          resources to ensure overall consistency of financial
          transactions.
        </p></li></ul></div><p>
      Applications that use global transactions involve one or more
      Resource Managers and a Transaction Manager:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          A Resource Manager (RM) provides access to transactional
          resources. A database server is one kind of resource manager.
          It must be possible to either commit or roll back transactions
          managed by the RM.
        </p></li><li><p>
          A Transaction Manager (TM) coordinates the transactions that
          are part of a global transaction. It communicates with the RMs
          that handle each of these transactions. The individual
          transactions within a global transaction are
          “<span class="quote">branches</span>” of the global transaction. Global
          transactions and their branches are identified by a naming
          scheme described later.
        </p></li></ul></div><p>
      The MySQL implementation of XA MySQL enables a MySQL server to act
      as a Resource Manager that handles XA transactions within a global
      transaction. A client program that connects to the MySQL server
      acts as the Transaction Manager.
    </p><p>
      To carry out a global transaction, it is necessary to know which
      components are involved, and bring each component to a point when
      it can be committed or rolled back. Depending on what each
      component reports about its ability to succeed, they must all
      commit or roll back as an atomic group. That is, either all
      components must commit, or all components musts roll back. To
      manage a global transaction, it is necessary to take into account
      that any component or the connecting network might fail.
    </p><p>
      The process for executing a global transaction uses two-phase
      commit (2PC). This takes place after the actions performed by the
      branches of the global transaction have been executed.
    </p><div class="orderedlist"><ol type="1"><li><p>
          In the first phase, all branches are prepared. That is, they
          are told by the TM to get ready to commit. Typically, this
          means each RM that manages a branch records the actions for
          the branch in stable storage. The branches indicate whether
          they are able to do this, and these results are used for the
          second phase.
        </p></li><li><p>
          In the second phase, the TM tells the RMs whether to commit or
          roll back. If all branches indicated when they were prepared
          that they will be able to commit, all branches are told to
          commit. If any branch indicated when it was prepared that it
          will not be able to commit, all branches are told to roll
          back.
        </p></li></ol></div><p>
      In some cases, a global transaction might use one-phase commit
      (1PC). For example, when a Transaction Manager finds that a global
      transaction consists of only one transactional resource (that is,
      a single branch), that resource can be told to prepare and commit
      at the same time.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xa-statements"></a>12.4.7.1. XA Transaction SQL Syntax</h4></div></div></div><a class="indexterm" name="id2221925"></a><a class="indexterm" name="id2221934"></a><a class="indexterm" name="id2221946"></a><a class="indexterm" name="id2221955"></a><a class="indexterm" name="id2221968"></a><a class="indexterm" name="id2221977"></a><a class="indexterm" name="id2221989"></a><a class="indexterm" name="id2221998"></a><a class="indexterm" name="id2222010"></a><a class="indexterm" name="id2222019"></a><a class="indexterm" name="id2222032"></a><a class="indexterm" name="id2222041"></a><a class="indexterm" name="id2222053"></a><a class="indexterm" name="id2222065"></a><p>
        To perform XA transactions in MySQL, use the following
        statements:
      </p><pre class="programlisting">XA {START|BEGIN} <em class="replaceable"><code>xid</code></em> [JOIN|RESUME]

XA END <em class="replaceable"><code>xid</code></em> [SUSPEND [FOR MIGRATE]]

XA PREPARE <em class="replaceable"><code>xid</code></em>

XA COMMIT <em class="replaceable"><code>xid</code></em> [ONE PHASE]

XA ROLLBACK <em class="replaceable"><code>xid</code></em>

XA RECOVER
</pre><p>
        For <code class="literal">XA START</code>, the <code class="literal">JOIN</code> and
        <code class="literal">RESUME</code> clauses are not supported.
      </p><p>
        For <code class="literal">XA END</code> the <code class="literal">SUSPEND [FOR
        MIGRATE]</code> clause is not supported.
      </p><p>
        Each XA statement begins with the <code class="literal">XA</code> keyword,
        and most of them require an <em class="replaceable"><code>xid</code></em>
        value. An <em class="replaceable"><code>xid</code></em> is an XA transaction
        identifier. It indicates which transaction the statement applies
        to. <em class="replaceable"><code>xid</code></em> values are supplied by the
        client, or generated by the MySQL server. An
        <em class="replaceable"><code>xid</code></em> value has from one to three
        parts:
      </p><pre class="programlisting"><em class="replaceable"><code>xid</code></em>: <em class="replaceable"><code>gtrid</code></em> [, <em class="replaceable"><code>bqual</code></em> [, <em class="replaceable"><code>formatID</code></em> ]]
</pre><p>
        <em class="replaceable"><code>gtrid</code></em> is a global transaction
        identifier, <em class="replaceable"><code>bqual</code></em> is a branch
        qualifier, and <em class="replaceable"><code>formatID</code></em> is a number
        that identifies the format used by the
        <em class="replaceable"><code>gtrid</code></em> and
        <em class="replaceable"><code>bqual</code></em> values. As indicated by the
        syntax, <em class="replaceable"><code>bqual</code></em> and
        <em class="replaceable"><code>formatID</code></em> are optional. The default
        <em class="replaceable"><code>bqual</code></em> value is <code class="literal">''</code>
        if not given. The default <em class="replaceable"><code>formatID</code></em>
        value is 1 if not given.
      </p><p>
        <em class="replaceable"><code>gtrid</code></em> and
        <em class="replaceable"><code>bqual</code></em> must be string literals, each
        up to 64 bytes (not characters) long.
        <em class="replaceable"><code>gtrid</code></em> and
        <em class="replaceable"><code>bqual</code></em> can be specified in several
        ways. You can use a quoted string (<code class="literal">'ab'</code>), hex
        string (<code class="literal">0x6162</code>, <code class="literal">X'ab'</code>), or
        bit value
        (<code class="literal">b'<em class="replaceable"><code>nnnn</code></em>'</code>).
      </p><p>
        <em class="replaceable"><code>formatID</code></em> is an unsigned integer.
      </p><p>
        The <em class="replaceable"><code>gtrid</code></em> and
        <em class="replaceable"><code>bqual</code></em> values are interpreted in bytes
        by the MySQL server's underlying XA support routines. However,
        while an SQL statement containing an XA statement is being
        parsed, the server works with some specific character set. To be
        safe, write <em class="replaceable"><code>gtrid</code></em> and
        <em class="replaceable"><code>bqual</code></em> as hex strings.
      </p><p>
        <em class="replaceable"><code>xid</code></em> values typically are generated by
        the Transaction Manager. Values generated by one TM must be
        different from values generated by other TMs. A given TM must be
        able to recognize its own <em class="replaceable"><code>xid</code></em> values
        in a list of values returned by the <code class="literal">XA
        RECOVER</code> statement.
      </p><p class="mnmas"><b>MySQL Enterprise</b>
          For expert advice on XA Distributed Transaction Support
          subscribe to the MySQL Enterprise Monitor. For more
          information, see <a href="advisors.html" target="_top">advisors.html</a>.
        </p><p>
        <code class="literal">XA START <em class="replaceable"><code>xid</code></em></code>
        starts an XA transaction with the given
        <em class="replaceable"><code>xid</code></em> value. Each XA transaction must
        have a unique <em class="replaceable"><code>xid</code></em> value, so the value
        must not currently be used by another XA transaction. Uniqueness
        is assessed using the <em class="replaceable"><code>gtrid</code></em> and
        <em class="replaceable"><code>bqual</code></em> values. All following XA
        statements for the XA transaction must be specified using the
        same <em class="replaceable"><code>xid</code></em> value as that given in the
        <code class="literal">XA START</code> statement. If you use any of those
        statements but specify an <em class="replaceable"><code>xid</code></em> value
        that does not correspond to some existing XA transaction, an
        error occurs.
      </p><p>
        One or more XA transactions can be part of the same global
        transaction. All XA transactions within a given global
        transaction must use the same <em class="replaceable"><code>gtrid</code></em>
        value in the <em class="replaceable"><code>xid</code></em> value. For this
        reason, <em class="replaceable"><code>gtrid</code></em> values must be globally
        unique so that there is no ambiguity about which global
        transaction a given XA transaction is part of. The
        <em class="replaceable"><code>bqual</code></em> part of the
        <em class="replaceable"><code>xid</code></em> value must be different for each
        XA transaction within a global transaction. (The requirement
        that <em class="replaceable"><code>bqual</code></em> values be different is a
        limitation of the current MySQL XA implementation. It is not
        part of the XA specification.)
      </p><p>
        The <code class="literal">XA RECOVER</code> statement returns information
        for those XA transactions on the MySQL server that are in the
        <code class="literal">PREPARED</code> state. (See
        <a href="sql-syntax.html#xa-states" title="12.4.7.2. XA Transaction States">Section 12.4.7.2, “XA Transaction States”</a>.) The output includes a row for each
        such XA transaction on the server, regardless of which client
        started it.
      </p><p>
        <code class="literal">XA RECOVER</code> output rows look like this (for an
        example <em class="replaceable"><code>xid</code></em> value consisting of the
        parts <code class="literal">'abc'</code>, <code class="literal">'def'</code>, and
        <code class="literal">7</code>):
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>XA RECOVER;</code></strong>
+----------+--------------+--------------+--------+
| formatID | gtrid_length | bqual_length | data   |
+----------+--------------+--------------+--------+
|        7 |            3 |            3 | abcdef |
+----------+--------------+--------------+--------+
</pre><p>
        The output columns have the following meanings:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">formatID</code> is the
            <em class="replaceable"><code>formatID</code></em> part of the transaction
            <em class="replaceable"><code>xid</code></em>
          </p></li><li><p>
            <code class="literal">gtrid_length</code> is the length in bytes of
            the <em class="replaceable"><code>gtrid</code></em> part of the
            <em class="replaceable"><code>xid</code></em>
          </p></li><li><p>
            <code class="literal">bqual_length</code> is the length in bytes of
            the <em class="replaceable"><code>bqual</code></em> part of the
            <em class="replaceable"><code>xid</code></em>
          </p></li><li><p>
            <code class="literal">data</code> is the concatenation of the
            <em class="replaceable"><code>gtrid</code></em> and
            <em class="replaceable"><code>bqual</code></em> parts of the
            <em class="replaceable"><code>xid</code></em>
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xa-states"></a>12.4.7.2. XA Transaction States</h4></div></div></div><p>
        An XA transaction progresses through the following states:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Use <code class="literal">XA START</code> to start an XA transaction
            and put it in the <code class="literal">ACTIVE</code> state.
          </p></li><li><p>
            For an <code class="literal">ACTIVE</code> XA transaction, issue the
            SQL statements that make up the transaction, and then issue
            an <code class="literal">XA END</code> statement. <code class="literal">XA
            END</code> puts the transaction in the
            <code class="literal">IDLE</code> state.
          </p></li><li><p>
            For an <code class="literal">IDLE</code> XA transaction, you can issue
            either an <code class="literal">XA PREPARE</code> statement or an
            <code class="literal">XA COMMIT ... ONE PHASE</code> statement:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                <code class="literal">XA PREPARE</code> puts the transaction in
                the <code class="literal">PREPARED</code> state. An <code class="literal">XA
                RECOVER</code> statement at this point will include
                the transaction's <em class="replaceable"><code>xid</code></em> value
                in its output, because <code class="literal">XA RECOVER</code>
                lists all XA transactions that are in the
                <code class="literal">PREPARED</code> state.
              </p></li><li><p>
                <code class="literal">XA COMMIT ... ONE PHASE</code> prepares and
                commits the transaction. The
                <em class="replaceable"><code>xid</code></em> value will not be listed
                by <code class="literal">XA RECOVER</code> because the transaction
                terminates.
              </p></li></ul></div></li><li><p>
            For a <code class="literal">PREPARED</code> XA transaction, you can
            issue an <code class="literal">XA COMMIT</code> statement to commit
            and terminate the transaction, or <code class="literal">XA
            ROLLBACK</code> to roll back and terminate the
            transaction.
          </p></li></ol></div><p>
        Here is a simple XA transaction that inserts a row into a table
        as part of a global transaction:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>XA START 'xatest';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO mytable (i) VALUES(10);</code></strong>
Query OK, 1 row affected (0.04 sec)

mysql&gt; <strong class="userinput"><code>XA END 'xatest';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>XA PREPARE 'xatest';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>XA COMMIT 'xatest';</code></strong>
Query OK, 0 rows affected (0.00 sec)
</pre><p>
        Within the context of a given client connection, XA transactions
        and local (non-XA) transactions are mutually exclusive. For
        example, if <code class="literal">XA START</code> has been issued to begin
        an XA transaction, a local transaction cannot be started until
        the XA transaction has been committed or rolled back.
        Conversely, if a local transaction has been started with
        <code class="literal">START TRANSACTION</code>, no XA statements can be
        used until the transaction has been committed or rolled back.
      </p><p>
        Note that if an XA transaction is in the
        <code class="literal">ACTIVE</code> state, you cannot issue any statements
        that cause an implicit commit. That would violate the XA
        contract because you could not roll back the XA transaction. You
        will receive the following error if you try to execute such a
        statement:
      </p><pre class="programlisting">ERROR 1399 (XAE07): XAER_RMFAIL: The command cannot be executed
when global transaction is in the ACTIVE state
</pre><p>
        Statements to which the preceding remark applies are listed at
        <a href="sql-syntax.html#implicit-commit" title="12.4.3. Statements That Cause an Implicit Commit">Section 12.4.3, “Statements That Cause an Implicit Commit”</a>.
      </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql-syntax-server-administration"></a>12.5. Database Administration Statements</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#account-management-sql">12.5.1. Account Management Statements</a></span></dt><dt><span class="section"><a href="sql-syntax.html#table-maintenance-sql">12.5.2. Table Maintenance Statements</a></span></dt><dt><span class="section"><a href="sql-syntax.html#plugin-sql">12.5.3. Plugin and User-Defined Function Statements</a></span></dt><dt><span class="section"><a href="sql-syntax.html#set-option">12.5.4. <code class="literal">SET</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show">12.5.5. <code class="literal">SHOW</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#other-administrative-sql">12.5.6. Other Administrative Statements</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="account-management-sql"></a>12.5.1. Account Management Statements</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#create-user">12.5.1.1. <code class="literal">CREATE USER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-user">12.5.1.2. <code class="literal">DROP USER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#grant">12.5.1.3. <code class="literal">GRANT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#rename-user">12.5.1.4. <code class="literal">RENAME USER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#revoke">12.5.1.5. <code class="literal">REVOKE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#set-password">12.5.1.6. <code class="literal">SET PASSWORD</code> Syntax</a></span></dt></dl></div><p>
      MySQL account information is stored in the tables of the
      <code class="literal">mysql</code> database. This database and the access
      control system are discussed extensively in
      <a href="server-administration.html" title="Chapter 5. MySQL Server Administration">Chapter 5, <i>MySQL Server Administration</i></a>, which you should consult
      for additional details.
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        Some releases of MySQL introduce changes to the structure of the
        grant tables to add new privileges or features. Whenever you
        update to a new version of MySQL, you should update your grant
        tables to make sure that they have the current structure so that
        you can take advantage of any new capabilities. See
        <a href="programs.html#mysql-upgrade" title="4.4.8. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.8, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
      </p></div><p class="mnmas"><b>MySQL Enterprise</b>
        In a production environment it is always prudent to examine any
        changes to users' accounts. The MySQL Enterprise Monitor
        provides notification whenever users' privileges are altered.
        For more information, see <a href="advisors.html" target="_top">advisors.html</a>.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="create-user"></a>12.5.1.1. <code class="literal">CREATE USER</code> Syntax</h4></div></div></div><a class="indexterm" name="id2222949"></a><a class="indexterm" name="id2222958"></a><a class="indexterm" name="id2222970"></a><pre class="programlisting">CREATE USER <em class="replaceable"><code>user</code></em> [IDENTIFIED BY [PASSWORD] '<em class="replaceable"><code>password</code></em>']
    [, <em class="replaceable"><code>user</code></em> [IDENTIFIED BY [PASSWORD] '<em class="replaceable"><code>password</code></em>']] ...
</pre><p>
        The <code class="literal">CREATE USER</code> statement creates new MySQL
        accounts. To use it, you must have the global <code class="literal">CREATE
        USER</code> privilege or the <code class="literal">INSERT</code>
        privilege for the <code class="literal">mysql</code> database. For each
        account, <code class="literal">CREATE USER</code> creates a new row in the
        <code class="literal">mysql.user</code> table that has no privileges. An
        error occurs if the account already exists. Each account is
        named using the same format as for the <code class="literal">GRANT</code>
        statement; for example,
        <code class="literal">'jeffrey'@'localhost'</code>. If you specify only
        the username part of the account name, a hostname part of
        <code class="literal">'%'</code> is used. For additional information about
        specifying account names, see <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
      </p><p>
        The account can be given a password with the optional
        <code class="literal">IDENTIFIED BY</code> clause. The
        <em class="replaceable"><code>user</code></em> value and the password are given
        the same way as for the <code class="literal">GRANT</code> statement. In
        particular, to specify the password in plain text, omit the
        <code class="literal">PASSWORD</code> keyword. To specify the password as
        the hashed value as returned by the
        <a href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> function, include the
        <code class="literal">PASSWORD</code> keyword. See
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          This statement may be recorded in a history file such as
          <code class="filename">~/.mysql_history</code>, which means that
          plaintext passwords may be read by anyone having read access
          to such files.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="drop-user"></a>12.5.1.2. <code class="literal">DROP USER</code> Syntax</h4></div></div></div><a class="indexterm" name="id2223164"></a><a class="indexterm" name="id2223173"></a><a class="indexterm" name="id2223185"></a><a class="indexterm" name="id2223198"></a><a class="indexterm" name="id2223210"></a><a class="indexterm" name="id2223223"></a><a class="indexterm" name="id2223235"></a><a class="indexterm" name="id2223247"></a><a class="indexterm" name="id2223260"></a><pre class="programlisting">DROP USER <em class="replaceable"><code>user</code></em> [, <em class="replaceable"><code>user</code></em>] ...
</pre><p>
        The <code class="literal">DROP USER</code> statement removes one or more
        MySQL accounts. It removes privilege rows for the account from
        all grant tables. To use this statement, you must have the
        global <code class="literal">CREATE USER</code> privilege or the
        <code class="literal">DELETE</code> privilege for the
        <code class="literal">mysql</code> database. Each account is named using
        the same format as for the <code class="literal">GRANT</code> statement;
        for example, <code class="literal">'jeffrey'@'localhost'</code>. If you
        specify only the username part of the account name, a hostname
        part of <code class="literal">'%'</code> is used. For additional
        information about specifying account names, see
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
      </p><p>
        With <code class="literal">DROP USER</code>, you can remove an account and
        its privileges as follows:
      </p><pre class="programlisting">DROP USER <em class="replaceable"><code>user</code></em>;
</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          <code class="literal">DROP USER</code> does not automatically close any
          open user sessions. Rather, in the event that a user with an
          open session is dropped, the statement does not take effect
          until that user's session is closed. Once the session is
          closed, the user is dropped, and that user's next attempt to
          log in will fail. <span class="emphasis"><em>This is by design</em></span>.
        </p></div><p>
        <code class="literal">DROP USER</code> does not automatically delete or
        invalidate any database objects that the user created. This
        applies to tables, views, stored routines, triggers, and events.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="grant"></a>12.5.1.3. <code class="literal">GRANT</code> Syntax</h4></div></div></div><a class="indexterm" name="id2223427"></a><a class="indexterm" name="id2223436"></a><a class="indexterm" name="id2223448"></a><a class="indexterm" name="id2223457"></a><pre class="programlisting">GRANT
    <em class="replaceable"><code>priv_type</code></em> [(<em class="replaceable"><code>column_list</code></em>)]
      [, <em class="replaceable"><code>priv_type</code></em> [(<em class="replaceable"><code>column_list</code></em>)]] ...
    ON [<em class="replaceable"><code>object_type</code></em>]
        {
            *
          | *.*
          | <em class="replaceable"><code>db_name</code></em>.*
          | <em class="replaceable"><code>db_name.tbl_name</code></em>
          | <em class="replaceable"><code>tbl_name</code></em>
          | <em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>routine_name</code></em>

        }
    TO <em class="replaceable"><code>user</code></em> [IDENTIFIED BY [PASSWORD] '<em class="replaceable"><code>password</code></em>']
        [, <em class="replaceable"><code>user</code></em> [IDENTIFIED BY [PASSWORD] '<em class="replaceable"><code>password</code></em>']] ...
    [REQUIRE
        NONE |
        [{SSL| X509}]
        [CIPHER '<em class="replaceable"><code>cipher</code></em>' [AND]]
        [ISSUER '<em class="replaceable"><code>issuer</code></em>' [AND]]
        [SUBJECT '<em class="replaceable"><code>subject</code></em>']]
    [WITH <em class="replaceable"><code>with_option</code></em> [<em class="replaceable"><code>with_option</code></em>] ...]

<em class="replaceable"><code>object_type</code></em> =
    TABLE
  | FUNCTION
  | PROCEDURE

<em class="replaceable"><code>with_option</code></em> =
    GRANT OPTION
  | MAX_QUERIES_PER_HOUR <em class="replaceable"><code>count</code></em>
  | MAX_UPDATES_PER_HOUR <em class="replaceable"><code>count</code></em>
  | MAX_CONNECTIONS_PER_HOUR <em class="replaceable"><code>count</code></em>
  | MAX_USER_CONNECTIONS <em class="replaceable"><code>count</code></em>
</pre><p>
        The <code class="literal">GRANT</code> statement enables system
        administrators to create MySQL user accounts and to grant rights
        to accounts. To use <code class="literal">GRANT</code>, you must have the
        <code class="literal">GRANT OPTION</code> privilege, and you must have the
        privileges that you are granting. The <code class="literal">REVOKE</code>
        statement is related and enables administrators to remove
        account privileges. See <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax">Section 12.5.1.5, “<code class="literal">REVOKE</code> Syntax”</a>.
      </p><p class="mnmas"><b>MySQL Enterprise</b>
          For automated notification of users with inappropriate
          privileges, subscribe to the MySQL Enterprise Monitor. For
          more information, see <a href="advisors.html" target="_top">advisors.html</a>.
        </p><p>
        MySQL account information is stored in the tables of the
        <code class="literal">mysql</code> database. This database and the access
        control system are discussed extensively in
        <a href="server-administration.html" title="Chapter 5. MySQL Server Administration">Chapter 5, <i>MySQL Server Administration</i></a>, which you should
        consult for additional details.
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          Some releases of MySQL introduce changes to the structure of
          the grant tables to add new privileges or features. Whenever
          you update to a new version of MySQL, you should update your
          grant tables to make sure that they have the current structure
          so that you can take advantage of any new capabilities. See
          <a href="programs.html#mysql-upgrade" title="4.4.8. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.8, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
        </p></div><p>
        If the grant tables hold privilege rows that contain mixed-case
        database or table names and the
        <code class="literal">lower_case_table_names</code> system variable is set
        to a non-zero value, <code class="literal">REVOKE</code> cannot be used to
        revoke these privileges. It will be necessary to manipulate the
        grant tables directly. (<code class="literal">GRANT</code> will not create
        such rows when <code class="literal">lower_case_table_names</code> is set,
        but such rows might have been created prior to setting the
        variable.)
      </p><p>
        Privileges can be granted at several levels. The examples shown
        here include no <code class="literal">IDENTIFIED BY
        '<em class="replaceable"><code>password</code></em>'</code> clause for
        brevity, but you should include one if the account does not
        already exist to avoid creating an account with no password.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <span class="bold"><strong>Global level</strong></span>
          </p><p>
            Global privileges apply to all databases on a given server.
            These privileges are stored in the
            <code class="literal">mysql.user</code> table. <code class="literal">GRANT ALL ON
            *.*</code> and <code class="literal">REVOKE ALL ON *.*</code> grant
            and revoke only global privileges.
          </p><pre class="programlisting">GRANT ALL ON *.* TO 'someuser'@'somehost';
GRANT SELECT, INSERT ON *.* TO 'someuser'@'somehost';
</pre></li><li><p>
            <span class="bold"><strong>Database level</strong></span>
          </p><p>
            Database privileges apply to all objects in a given
            database. These privileges are stored in the
            <code class="literal">mysql.db</code> and
            <code class="literal">mysql.host</code> tables. <code class="literal">GRANT ALL ON
            <em class="replaceable"><code>db_name</code></em>.*</code> and
            <code class="literal">REVOKE ALL ON
            <em class="replaceable"><code>db_name</code></em>.*</code> grant and
            revoke only database privileges.
          </p><pre class="programlisting">GRANT ALL ON mydb.* TO 'someuser'@'somehost';
GRANT SELECT, INSERT ON mydb.* TO 'someuser'@'somehost';
</pre></li><li><p>
            <span class="bold"><strong>Table level</strong></span>
          </p><p>
            Table privileges apply to all columns in a given table.
            These privileges are stored in the
            <code class="literal">mysql.tables_priv</code> table. <code class="literal">GRANT
            ALL ON <em class="replaceable"><code>db_name.tbl_name</code></em></code>
            and <code class="literal">REVOKE ALL ON
            <em class="replaceable"><code>db_name.tbl_name</code></em></code> grant
            and revoke only table privileges.
          </p><pre class="programlisting">GRANT ALL ON mydb.mytbl TO 'someuser'@'somehost';
GRANT SELECT, INSERT ON mydb.mytbl TO 'someuser'@'somehost';
</pre><p>
            If you specify <em class="replaceable"><code>tbl_name</code></em> rather
            than <code class="literal">db_name.tbl_name</code>, the statement
            applies to <em class="replaceable"><code>tbl_name</code></em> in the
            default database.
          </p></li><li><p>
            <span class="bold"><strong>Column level</strong></span>
          </p><p>
            Column privileges apply to single columns in a given table.
            These privileges are stored in the
            <code class="literal">mysql.columns_priv</code> table. When using
            <code class="literal">REVOKE</code>, you must specify the same columns
            that were granted. The column or columns for which the
            privileges are to be granted must be enclosed within
            parentheses.
          </p><pre class="programlisting">GRANT SELECT (col1), INSERT (col1,col2) ON mydb.mytbl TO 'someuser'@'somehost';
</pre></li><li><p>
            <span class="bold"><strong>Routine level</strong></span>
          </p><p>
            The <code class="literal">CREATE ROUTINE</code>, <code class="literal">ALTER
            ROUTINE</code>, <code class="literal">EXECUTE</code>, and
            <code class="literal">GRANT</code> privileges apply to stored routines
            (functions and procedures). They can be granted at the
            global and database levels. Also, except for <code class="literal">CREATE
            ROUTINE</code>, these privileges can be granted at the
            routine level for individual routines and are stored in the
            <code class="literal">mysql.procs_priv</code> table.
          </p><pre class="programlisting">GRANT CREATE ROUTINE ON mydb.* TO 'someuser'@'somehost';
GRANT EXECUTE ON PROCEDURE mydb.myproc TO 'someuser'@'somehost';
</pre></li></ul></div><p>
        The <em class="replaceable"><code>object_type</code></em> clause should be
        specified as <code class="literal">TABLE</code>,
        <code class="literal">FUNCTION</code>, or <code class="literal">PROCEDURE</code>
        when the following object is a table, a stored function, or a
        stored procedure.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          If you specify <code class="literal">ON *</code> and you have
          <span class="emphasis"><em>not</em></span> selected a default database, the
          privileges granted are global.
        </p></div><p>
        For the <code class="literal">GRANT</code> and <code class="literal">REVOKE</code>
        statements, <em class="replaceable"><code>priv_type</code></em> can be
        specified as any of the following:
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Privilege</strong></span></td><td><span class="bold"><strong>Meaning</strong></span></td></tr><tr><td><code class="literal">ALL [PRIVILEGES]</code></td><td>Grants all privileges at specified access level except <code class="literal">GRANT
                OPTION</code></td></tr><tr><td><code class="literal">ALTER</code></td><td>Enables use of <code class="literal">ALTER TABLE</code></td></tr><tr><td><code class="literal">ALTER ROUTINE</code></td><td>Enables stored routines to be altered or dropped</td></tr><tr><td><code class="literal">CREATE</code></td><td>Enables use of <code class="literal">CREATE TABLE</code></td></tr><tr><td><code class="literal">CREATE ROUTINE</code></td><td>Enables creation of stored routines</td></tr><tr><td><code class="literal">CREATE TEMPORARY TABLES</code></td><td>Enables use of <code class="literal">CREATE TEMPORARY TABLE</code></td></tr><tr><td><code class="literal">CREATE USER</code></td><td>Enables use of <code class="literal">CREATE USER</code>, <code class="literal">DROP
                USER</code>, <code class="literal">RENAME USER</code>, and
                <code class="literal">REVOKE ALL PRIVILEGES</code>.</td></tr><tr><td><code class="literal">CREATE VIEW</code></td><td>Enables use of <code class="literal">CREATE VIEW</code></td></tr><tr><td><code class="literal">DELETE</code></td><td>Enables use of <code class="literal">DELETE</code></td></tr><tr><td><code class="literal">DROP</code></td><td>Enables use of <code class="literal">DROP TABLE</code></td></tr><tr><td><code class="literal">EVENT</code></td><td>Enables creation of events for the event scheduler</td></tr><tr><td><code class="literal">EXECUTE</code></td><td>Enables the user to run stored routines</td></tr><tr><td><code class="literal">FILE</code></td><td>Enables use of <code class="literal">SELECT ... INTO OUTFILE</code> and
                <code class="literal">LOAD DATA INFILE</code></td></tr><tr><td><code class="literal">INDEX</code></td><td>Enables use of <code class="literal">CREATE INDEX</code> and <code class="literal">DROP
                INDEX</code></td></tr><tr><td><code class="literal">INSERT</code></td><td>Enables use of <code class="literal">INSERT</code></td></tr><tr><td><code class="literal">LOCK TABLES</code></td><td>Enables use of <code class="literal">LOCK TABLES</code> on tables for which you
                have the <code class="literal">SELECT</code> privilege</td></tr><tr><td><code class="literal">PROCESS</code></td><td>Enables the user to see all processes with <code class="literal">SHOW
                PROCESSLIST</code></td></tr><tr><td><code class="literal">REFERENCES</code></td><td>Not implemented</td></tr><tr><td><code class="literal">RELOAD</code></td><td>Enables use of <code class="literal">FLUSH</code></td></tr><tr><td><code class="literal">REPLICATION CLIENT</code></td><td>Enables the user to ask where slave or master servers are</td></tr><tr><td><code class="literal">REPLICATION SLAVE</code></td><td>Needed for replication slaves (to read binary log events from the
                master)</td></tr><tr><td><code class="literal">SELECT</code></td><td>Enables use of <code class="literal">SELECT</code></td></tr><tr><td><code class="literal">SHOW DATABASES</code></td><td><code class="literal">SHOW DATABASES</code> shows all databases</td></tr><tr><td><code class="literal">SHOW VIEW</code></td><td>Enables use of <code class="literal">SHOW CREATE VIEW</code></td></tr><tr><td><code class="literal">SHUTDOWN</code></td><td>Enables use of <span><strong class="command">mysqladmin shutdown</strong></span></td></tr><tr><td><code class="literal">SUPER</code></td><td>Enables use of <code class="literal">CHANGE MASTER</code>,
                <code class="literal">KILL</code>, <code class="literal">PURGE MASTER
                LOGS</code>, and <code class="literal">SET GLOBAL</code>
                statements, the <span><strong class="command">mysqladmin debug</strong></span>
                command; allows you to connect (once) even if
                <code class="literal">max_connections</code> is reached</td></tr><tr><td><code class="literal">TRIGGER</code></td><td>Enables the user to create or drop triggers</td></tr><tr><td><code class="literal">UPDATE</code></td><td>Enables use of <code class="literal">UPDATE</code></td></tr><tr><td><code class="literal">USAGE</code></td><td>Synonym for “<span class="quote">no privileges</span>”</td></tr><tr><td><code class="literal">GRANT OPTION</code></td><td>Enables privileges to be granted</td></tr></tbody></table></div><p>
        The <code class="literal">EVENT</code> and <code class="literal">TRIGGER</code>
        privileges were added in MySQL 5.1.6. A trigger is associated
        with a table, so to create or drop a trigger, you must have the
        <code class="literal">TRIGGER</code> privilege for the table, not the
        trigger. (Before MySQL 5.1.6, the <code class="literal">SUPER</code>
        privilege was required to create or drop triggers.)
      </p><p>
        The <code class="literal">REFERENCES</code> privilege currently is unused.
      </p><p>
        <code class="literal">USAGE</code> can be specified when you want to
        create a user that has no privileges.
      </p><p>
        Use <code class="literal">SHOW GRANTS</code> to determine what privileges
        an account has. See <a href="sql-syntax.html#show-grants" title="12.5.5.19. SHOW GRANTS Syntax">Section 12.5.5.19, “<code class="literal">SHOW GRANTS</code> Syntax”</a>.
      </p><p>
        You can assign global privileges by using <code class="literal">ON
        *.*</code> syntax or database-level privileges by using
        <code class="literal">ON <em class="replaceable"><code>db_name</code></em>.*</code>
        syntax. If you specify <code class="literal">ON *</code> and you have
        selected a default database, the privileges are granted in that
        database.
      </p><p>
        The <code class="literal">FILE</code>, <code class="literal">PROCESS</code>,
        <code class="literal">RELOAD</code>, <code class="literal">REPLICATION
        CLIENT</code>, <code class="literal">REPLICATION SLAVE</code>,
        <code class="literal">SHOW DATABASES</code>, <code class="literal">SHUTDOWN</code>,
        <code class="literal">SUPER</code>, and <code class="literal">CREATE USER</code>
        privileges are administrative privileges that can only be
        granted globally (using <code class="literal">ON *.*</code> syntax).
      </p><p>
        Other privileges can be granted globally or at more specific
        levels.
      </p><p>
        The <em class="replaceable"><code>priv_type</code></em> values that you can
        specify for a table are <code class="literal">SELECT</code>,
        <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>,
        <code class="literal">DELETE</code>, <code class="literal">CREATE</code>,
        <code class="literal">DROP</code>, <code class="literal">GRANT OPTION</code>,
        <code class="literal">INDEX</code>, <code class="literal">ALTER</code>,
        <code class="literal">CREATE VIEW</code>, <code class="literal">SHOW VIEW</code> and
        <code class="literal">TRIGGER</code>.
      </p><p>
        The <em class="replaceable"><code>priv_type</code></em> values that you can
        specify for a column (that is, when you use a
        <em class="replaceable"><code>column_list</code></em> clause) are
        <code class="literal">SELECT</code>, <code class="literal">INSERT</code>, and
        <code class="literal">UPDATE</code>.
      </p><p>
        The <em class="replaceable"><code>priv_type</code></em> values that you can
        specify at the routine level are <code class="literal">ALTER
        ROUTINE</code>, <code class="literal">EXECUTE</code>, and
        <code class="literal">GRANT OPTION</code>. <code class="literal">CREATE
        ROUTINE</code> is not a routine-level privilege because you
        must have this privilege to create a routine in the first place.
      </p><p>
        For the global, database, table, and routine levels,
        <code class="literal">GRANT ALL</code> assigns only the privileges that
        exist at the level you are granting. For example, <code class="literal">GRANT
        ALL ON <em class="replaceable"><code>db_name</code></em>.*</code> is a
        database-level statement, so it does not grant any global-only
        privileges such as <code class="literal">FILE</code>.
      </p><p>
        MySQL allows you to grant privileges even on database objects
        that do not exist. In such cases, the privileges to be granted
        must include the <code class="literal">CREATE</code> privilege.
        <span class="emphasis"><em>This behavior is by design</em></span>, and is intended
        to enable the database administrator to prepare user accounts
        and privileges for database objects that are to be created at a
        later time.
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          <span class="emphasis"><em>MySQL does not automatically revoke any privileges
          when you drop a table or database</em></span>. However, if you
          drop a routine, any routine-level privileges granted for that
          routine are revoked.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The “<span class="quote"><code class="literal">_</code></span>” and
          “<span class="quote"><code class="literal">%</code></span>” wildcards are allowed when
          specifying database names in <code class="literal">GRANT</code>
          statements that grant privileges at the global or database
          levels. This means, for example, that if you want to use a
          “<span class="quote"><code class="literal">_</code></span>” character as part of a
          database name, you should specify it as
          “<span class="quote"><code class="literal">\_</code></span>” in the
          <code class="literal">GRANT</code> statement, to prevent the user from
          being able to access additional databases matching the
          wildcard pattern; for example, <code class="literal">GRANT ... ON
          `foo\_bar`.* TO ...</code>.
        </p></div><p>
        To accommodate granting rights to users from arbitrary hosts,
        MySQL supports specifying the <em class="replaceable"><code>user</code></em>
        value in the form
        <code class="literal"><em class="replaceable"><code>user_name</code></em>@<em class="replaceable"><code>host_name</code></em></code>.
        If a <em class="replaceable"><code>user_name</code></em> or
        <em class="replaceable"><code>host_name</code></em> value is legal as an
        unquoted identifier, you need not quote it. However, quotes are
        necessary to specify a <em class="replaceable"><code>user_name</code></em>
        string containing special characters (such as
        “<span class="quote"><code class="literal">-</code></span>”), or a
        <em class="replaceable"><code>host_name</code></em> string containing special
        characters or wildcard characters (such as
        “<span class="quote"><code class="literal">%</code></span>”); for example,
        <code class="literal">'test-user'@'test-hostname'</code>. Quote the
        username and hostname separately.
      </p><p>
        You can specify wildcards in the hostname. For example,
        <code class="literal"><em class="replaceable"><code>user_name</code></em>@'%.loc.gov'</code>
        applies to <em class="replaceable"><code>user_name</code></em> for any host in
        the <code class="literal">loc.gov</code> domain, and
        <code class="literal"><em class="replaceable"><code>user_name</code></em>@'144.155.166.%'</code>
        applies to <em class="replaceable"><code>user_name</code></em> for any host in
        the <code class="literal">144.155.166</code> class C subnet.
      </p><p>
        The simple form <em class="replaceable"><code>user_name</code></em> is a
        synonym for
        <code class="literal"><em class="replaceable"><code>user_name</code></em>@'%'</code>.
      </p><p>
        <span class="emphasis"><em>MySQL does not support wildcards in
        usernames</em></span>. Anonymous users are defined by inserting
        entries with <code class="literal">User=''</code> into the
        <code class="literal">mysql.user</code> table or by creating a user with
        an empty name with the <code class="literal">GRANT</code> statement:
      </p><pre class="programlisting">GRANT ALL ON test.* TO ''@'localhost' ...
</pre><p>
        When specifying quoted values, quote database, table, column,
        and routine names as identifiers, using backticks
        (“<span class="quote"><code class="literal">`</code></span>”). Quote hostnames,
        usernames, and passwords as strings, using single quotes
        (“<span class="quote"><code class="literal">'</code></span>”).
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          If you allow anonymous users to connect to the MySQL server,
          you should also grant privileges to all local users as
          <code class="literal"><em class="replaceable"><code>user_name</code></em>@localhost</code>.
          Otherwise, the anonymous user account for
          <code class="literal">localhost</code> in the
          <code class="literal">mysql.user</code> table (created during MySQL
          installation) is used when named users try to log in to the
          MySQL server from the local machine. For details, see
          <a href="server-administration.html#connection-access" title="5.4.4. Access Control, Stage 1: Connection Verification">Section 5.4.4, “Access Control, Stage 1: Connection Verification”</a>.
        </p></div><p>
        You can determine whether this applies to you by executing the
        following query, which lists any anonymous users:
      </p><pre class="programlisting">SELECT Host, User FROM mysql.user WHERE User='';
</pre><p>
        If you want to delete the local anonymous user account to avoid
        the problem just described, use these statements:
      </p><pre class="programlisting">DELETE FROM mysql.user WHERE Host='localhost' AND User='';
FLUSH PRIVILEGES;
</pre><p>
        <code class="literal">GRANT</code> supports hostnames up to 60 characters
        long. Database, table, column, and routine names can be up to 64
        characters. Usernames can be up to 16 characters.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <span class="emphasis"><em>The allowable length for usernames cannot be changed
          by altering the <code class="literal">mysql.user</code> table, and
          attempting to do so results in unpredictable behavior which
          may even make it impossible for users to log in to the MySQL
          server</em></span>. You should never alter any of the tables in
          the <code class="literal">mysql</code> database in any manner whatsoever
          except by means of the procedure prescribed by MySQL AB that
          is described in <a href="programs.html#mysql-upgrade" title="4.4.8. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.8, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
        </p></div><p>
        The privileges for a table, column, or routine are formed
        additively as the logical <a href="functions.html#operator_or"><code class="literal">OR</code></a>
        of the privileges at each of the privilege levels. For example,
        if the <code class="literal">mysql.user</code> table specifies that a user
        has a global <code class="literal">SELECT</code> privilege, the privilege
        cannot be denied by an entry at the database, table, or column
        level.
      </p><p>
        The privileges for a column can be calculated as follows:
      </p><pre class="programlisting">global privileges
OR (database privileges AND host privileges)
OR table privileges
OR column privileges
OR routine privileges
</pre><p>
        In most cases, you grant rights to a user at only one of the
        privilege levels, so life is not normally this complicated. The
        details of the privilege-checking procedure are presented in
        <a href="server-administration.html#privilege-system" title="5.4. The MySQL Access Privilege System">Section 5.4, “The MySQL Access Privilege System”</a>.
      </p><p>
        If you grant privileges for a username/hostname combination that
        does not exist in the <code class="literal">mysql.user</code> table, an
        entry is added and remains there until deleted with a
        <code class="literal">DELETE</code> statement. In other words,
        <code class="literal">GRANT</code> may create <code class="literal">user</code>
        table entries, but <code class="literal">REVOKE</code> does not remove
        them; you must do that explicitly using <code class="literal">DROP
        USER</code> or <code class="literal">DELETE</code>.
      </p><p>
        If the account does not already exist, <code class="literal">GRANT</code>
        creates it. In the case that you create a new account or if you
        have global grant privileges, the account's password is set to
        the password specified by the <code class="literal">IDENTIFIED BY</code>
        clause, if one is given. If the account already had a password,
        it is replaced by the new one.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          If you create a new user but do not specify an
          <code class="literal">IDENTIFIED BY</code> clause, the user has no
          password. This is very insecure. However, you can enable the
          <code class="literal">NO_AUTO_CREATE_USER</code> SQL mode to prevent
          <code class="literal">GRANT</code> from creating a new user if it would
          otherwise do so, unless <code class="literal">IDENTIFIED BY</code> is
          given to provide the new user a non-empty password.
        </p></div><a class="indexterm" name="id2225478"></a><p class="mnmas"><b>MySQL Enterprise</b>
          The MySQL Enterprise Monitor specifically guards against user
          accounts with no passwords. To find out more, see
          <a href="advisors.html" target="_top">advisors.html</a>.
        </p><p>
        Passwords can also be set with the <code class="literal">SET
        PASSWORD</code> statement. See
        <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax">Section 12.5.1.6, “<code class="literal">SET PASSWORD</code> Syntax”</a>.
      </p><p>
        In the <code class="literal">IDENTIFIED BY</code> clause, the password
        should be given as the literal password value. It is unnecessary
        to use the <a href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> function
        as it is for the <code class="literal">SET PASSWORD</code> statement. For
        example:
      </p><pre class="programlisting">GRANT ... IDENTIFIED BY 'mypass';
</pre><p>
        If you do not want to send the password in clear text and you
        know the hashed value that
        <a href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> would return for the
        password, you can specify the hashed value preceded by the
        keyword <code class="literal">PASSWORD</code>:
      </p><pre class="programlisting">GRANT ...
IDENTIFIED BY PASSWORD '*6C8989366EAF75BB670AD8EA7A7FC1176A95CEF4';
</pre><p>
        In a C program, you can get the hashed value by using the
        <code class="literal">make_scrambled_password()</code> C API function.
      </p><p>
        If you grant privileges for a database, an entry in the
        <code class="literal">mysql.db</code> table is created if needed. If all
        privileges for the database are removed with
        <code class="literal">REVOKE</code>, this entry is deleted.
      </p><p>
        The <code class="literal">SHOW DATABASES</code> privilege enables the
        account to see database names by issuing the <code class="literal">SHOW
        DATABASE</code> statement. Accounts that do not have this
        privilege see only databases for which they have some
        privileges, and cannot use the statement at all if the server
        was started with the <code class="option">--skip-show-database</code>
        option.
      </p><p class="mnmas"><b>MySQL Enterprise</b>
          The <code class="literal">SHOW DATABASES</code> privilege should be
          granted only to users who need to see all the databases on a
          MySQL server. Subscribers to the MySQL Enterprise Monitor are
          alerted when servers are started without the
          <code class="option">--skip-show-database</code> option. For more
          information, see <a href="advisors.html" target="_top">advisors.html</a>.
        </p><p>
        If a user has no privileges for a table, the table name is not
        displayed when the user requests a list of tables (for example,
        with a <code class="literal">SHOW TABLES</code> statement).
      </p><p>
        The <code class="literal">WITH GRANT OPTION</code> clause gives the user
        the ability to give to other users any privileges the user has
        at the specified privilege level. You should be careful to whom
        you give the <code class="literal">GRANT OPTION</code> privilege, because
        two users with different privileges may be able to join
        privileges!
      </p><p>
        You cannot grant another user a privilege which you yourself do
        not have; the <code class="literal">GRANT OPTION</code> privilege enables
        you to assign only those privileges which you yourself possess.
      </p><p>
        Be aware that when you grant a user the <code class="literal">GRANT
        OPTION</code> privilege at a particular privilege level, any
        privileges the user possesses (or may be given in the future) at
        that level can also be granted by that user to other users.
        Suppose that you grant a user the <code class="literal">INSERT</code>
        privilege on a database. If you then grant the
        <code class="literal">SELECT</code> privilege on the database and specify
        <code class="literal">WITH GRANT OPTION</code>, that user can give to
        other users not only the <code class="literal">SELECT</code> privilege,
        but also <code class="literal">INSERT</code>. If you then grant the
        <code class="literal">UPDATE</code> privilege to the user on the database,
        the user can grant <code class="literal">INSERT</code>,
        <code class="literal">SELECT</code>, and <code class="literal">UPDATE</code>.
      </p><p>
        For a non-administrative user, you should not grant the
        <code class="literal">ALTER</code> privilege globally or for the
        <code class="literal">mysql</code> database. If you do that, the user can
        try to subvert the privilege system by renaming tables!
      </p><p>
        The <code class="literal">MAX_QUERIES_PER_HOUR
        <em class="replaceable"><code>count</code></em></code>,
        <code class="literal">MAX_UPDATES_PER_HOUR
        <em class="replaceable"><code>count</code></em></code>, and
        <code class="literal">MAX_CONNECTIONS_PER_HOUR
        <em class="replaceable"><code>count</code></em></code> options limit the
        number of queries, updates, and logins a user can perform during
        any given one-hour period. (Queries for which results are served
        from the query cache do not count against the
        <code class="literal">MAX_QUERIES_PER_HOUR</code> limit.) If
        <em class="replaceable"><code>count</code></em> is <code class="literal">0</code> (the
        default), this means that there is no limitation for that user.
      </p><p>
        The <code class="literal">MAX_USER_CONNECTIONS
        <em class="replaceable"><code>count</code></em></code> option limits the
        maximum number of simultaneous connections that the account can
        make. If <em class="replaceable"><code>count</code></em> is
        <code class="literal">0</code> (the default), the
        <code class="literal">max_user_connections</code> system variable
        determines the number of simultaneous connections for the
        account.
      </p><p>
        Note: To specify any of these resource-limit options for an
        existing user without affecting existing privileges, use
        <code class="literal">GRANT USAGE ON *.* ... WITH MAX_...</code>.
      </p><p>
        See <a href="server-administration.html#user-resources" title="5.5.4. Limiting Account Resources">Section 5.5.4, “Limiting Account Resources”</a>.
      </p><a class="indexterm" name="id2225878"></a><a class="indexterm" name="id2225887"></a><p>
        MySQL can check X509 certificate attributes in addition to the
        usual authentication that is based on the username and password.
        To specify SSL-related options for a MySQL account, use the
        <code class="literal">REQUIRE</code> clause of the
        <code class="literal">GRANT</code> statement. (For background information
        on the use of SSL with MySQL, see
        <a href="server-administration.html#secure-connections" title="5.5.7. Using SSL for Secure Connections">Section 5.5.7, “Using SSL for Secure Connections”</a>.)
      </p><p>
        There are a number of different possibilities for limiting
        connection types for a given account:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">REQUIRE NONE</code> indicates that the account
            has no SSL or X509 requirements. This is the default if no
            SSL-related <code class="literal">REQUIRE</code> options are
            specified. Unencrypted connections are allowed if the
            username and password are valid. However, encrypted
            connections can also be used, at the client's option, if the
            client has the proper certificate and key files. That is,
            the client need not specify any SSL command options, in
            which case the connection will be unencrypted. To use an
            encrypted connection, the client must specify either the
            <code class="option">--ssl-ca</code> option, or all three of the
            <code class="option">--ssl-ca</code>, <code class="option">--ssl-key</code>, and
            <code class="option">--ssl-cert</code> options.
          </p></li><li><p>
            The <code class="literal">REQUIRE SSL</code> option tells the server
            to allow only SSL-encrypted connections for the account.
          </p><pre class="programlisting">GRANT ALL PRIVILEGES ON test.* TO 'root'@'localhost'
  IDENTIFIED BY 'goodsecret' REQUIRE SSL;
</pre><p>
            To connect, the client must specify the
            <code class="option">--ssl-ca</code> option, and may additionally
            specify the <code class="option">--ssl-key</code> and
            <code class="option">--ssl-cert</code> options.
          </p></li><li><p>
            <code class="literal">REQUIRE X509</code> means that the client must
            have a valid certificate but that the exact certificate,
            issuer, and subject do not matter. The only requirement is
            that it should be possible to verify its signature with one
            of the CA certificates.
          </p><pre class="programlisting">GRANT ALL PRIVILEGES ON test.* TO 'root'@'localhost'
  IDENTIFIED BY 'goodsecret' REQUIRE X509;
</pre><p>
            To connect, the client must specify the
            <code class="option">--ssl-ca</code>, <code class="option">--ssl-key</code>, and
            <code class="option">--ssl-cert</code> options. This is also true for
            <code class="literal">ISSUER</code> and <code class="literal">SUBJECT</code>
            because those <code class="literal">REQUIRE</code> options imply
            <code class="literal">X509</code>.
          </p></li><li><p>
            <code class="literal">REQUIRE ISSUER
            '<em class="replaceable"><code>issuer</code></em>'</code> places the
            restriction on connection attempts that the client must
            present a valid X509 certificate issued by CA
            <code class="literal">'<em class="replaceable"><code>issuer</code></em>'</code>. If
            the client presents a certificate that is valid but has a
            different issuer, the server rejects the connection. Use of
            X509 certificates always implies encryption, so the
            <code class="literal">SSL</code> option is unnecessary in this case.
          </p><pre class="programlisting">GRANT ALL PRIVILEGES ON test.* TO 'root'@'localhost'
  IDENTIFIED BY 'goodsecret'
  REQUIRE ISSUER '/C=FI/ST=Some-State/L=Helsinki/
    O=MySQL Finland AB/CN=Tonu Samuel/Email=tonu@example.com';
</pre><p>
            Note that the
            <code class="literal">'<em class="replaceable"><code>issuer</code></em>'</code> value
            should be entered as a single string.
          </p></li><li><p>
            <code class="literal">REQUIRE SUBJECT
            '<em class="replaceable"><code>subject</code></em>'</code> places the
            restriction on connection attempts that the client must
            present a valid X509 certificate containing the subject
            <em class="replaceable"><code>subject</code></em>. If the client presents a
            certificate that is valid but has a different subject, the
            server rejects the connection.
          </p><pre class="programlisting">GRANT ALL PRIVILEGES ON test.* TO 'root'@'localhost'
  IDENTIFIED BY 'goodsecret'
  REQUIRE SUBJECT '/C=EE/ST=Some-State/L=Tallinn/
    O=MySQL demo client certificate/
    CN=Tonu Samuel/Email=tonu@example.com';
</pre><p>
            Note that the
            <code class="literal">'<em class="replaceable"><code>subject</code></em>'</code>
            value should be entered as a single string.
          </p></li><li><p>
            <code class="literal">REQUIRE CIPHER
            '<em class="replaceable"><code>cipher</code></em>'</code> is needed to
            ensure that ciphers and key lengths of sufficient strength
            are used. SSL itself can be weak if old algorithms using
            short encryption keys are used. Using this option, you can
            ask that a specific cipher method is used to allow a
            connection.
          </p><pre class="programlisting">GRANT ALL PRIVILEGES ON test.* TO 'root'@'localhost'
  IDENTIFIED BY 'goodsecret'
  REQUIRE CIPHER 'EDH-RSA-DES-CBC3-SHA';
</pre></li></ul></div><p>
        The <code class="literal">SUBJECT</code>, <code class="literal">ISSUER</code>, and
        <code class="literal">CIPHER</code> options can be combined in the
        <code class="literal">REQUIRE</code> clause like this:
      </p><pre class="programlisting">GRANT ALL PRIVILEGES ON test.* TO 'root'@'localhost'
  IDENTIFIED BY 'goodsecret'
  REQUIRE SUBJECT '/C=EE/ST=Some-State/L=Tallinn/
    O=MySQL demo client certificate/
    CN=Tonu Samuel/Email=tonu@example.com'
  AND ISSUER '/C=FI/ST=Some-State/L=Helsinki/
    O=MySQL Finland AB/CN=Tonu Samuel/Email=tonu@example.com'
  AND CIPHER 'EDH-RSA-DES-CBC3-SHA';
</pre><p>
        The <code class="literal">AND</code> keyword is optional between
        <code class="literal">REQUIRE</code> options.
      </p><p>
        The order of the options does not matter, but no option can be
        specified twice.
      </p><p>
        When <span><strong class="command">mysqld</strong></span> starts, all privileges are read
        into memory. For details, see
        <a href="server-administration.html#privilege-changes" title="5.4.6. When Privilege Changes Take Effect">Section 5.4.6, “When Privilege Changes Take Effect”</a>.
      </p><p>
        Note that if you are using table, column, or routine privileges
        for even one user, the server examines table, column, and
        routine privileges for all users and this slows down MySQL a
        bit. Similarly, if you limit the number of queries, updates, or
        connections for any users, the server must monitor these values.
      </p><a class="indexterm" name="id2226265"></a><p>
        The biggest differences between the standard SQL and MySQL
        versions of <code class="literal">GRANT</code> are:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            In MySQL, privileges are associated with the combination of
            a hostname and username and not with only a username.
          </p></li><li><p>
            Standard SQL does not have global or database-level
            privileges, nor does it support all the privilege types that
            MySQL supports.
          </p></li><li><p>
            MySQL does not support the standard SQL
            <code class="literal">UNDER</code> privilege.
          </p></li><li><p>
            Standard SQL privileges are structured in a hierarchical
            manner. If you remove a user, all privileges the user has
            been granted are revoked. This is also true in MySQL if you
            use <code class="literal">DROP USER</code>. See
            <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax">Section 12.5.1.2, “<code class="literal">DROP USER</code> Syntax”</a>.
          </p></li><li><p>
            In standard SQL, when you drop a table, all privileges for
            the table are revoked. In standard SQL, when you revoke a
            privilege, all privileges that were granted based on that
            privilege are also revoked. In MySQL, privileges can be
            dropped only with explicit <code class="literal">REVOKE</code>
            statements or by manipulating values stored in the MySQL
            grant tables.
          </p></li><li><p>
            In MySQL, it is possible to have the
            <code class="literal">INSERT</code> privilege for only some of the
            columns in a table. In this case, you can still execute
            <code class="literal">INSERT</code> statements on the table, provided
            that you omit those columns for which you do not have the
            <code class="literal">INSERT</code> privilege. The omitted columns are
            set to their implicit default values if strict SQL mode is
            not enabled. In strict mode, the statement is rejected if
            any of the omitted columns have no default value. (Standard
            SQL requires you to have the <code class="literal">INSERT</code>
            privilege on all columns.)
            <a href="server-administration.html#server-sql-mode" title="5.1.7. SQL Modes">Section 5.1.7, “SQL Modes”</a>, discusses strict mode.
            <a href="data-types.html#data-type-defaults" title="10.1.4. Data Type Default Values">Section 10.1.4, “Data Type Default Values”</a>, discusses implicit
            default values.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="rename-user"></a>12.5.1.4. <code class="literal">RENAME USER</code> Syntax</h4></div></div></div><a class="indexterm" name="id2226413"></a><a class="indexterm" name="id2226422"></a><a class="indexterm" name="id2226434"></a><pre class="programlisting">RENAME USER <em class="replaceable"><code>old_user</code></em> TO <em class="replaceable"><code>new_user</code></em>
    [, <em class="replaceable"><code>old_user</code></em> TO <em class="replaceable"><code>new_user</code></em>] ...
</pre><p>
        The <code class="literal">RENAME USER</code> statement renames existing
        MySQL accounts. To use it, you must have the global
        <code class="literal">CREATE USER</code> privilege or the
        <code class="literal">UPDATE</code> privilege for the
        <code class="literal">mysql</code> database. An error occurs if any old
        account does not exist or any new account exists. Each account
        is named using the same format as for the
        <code class="literal">GRANT</code> statement; for example,
        <code class="literal">'jeffrey'@'localhost'</code>. If you specify only
        the username part of the account name, a hostname part of
        <code class="literal">'%'</code> is used. For additional information about
        specifying account names, see <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
      </p><p>
        <code class="literal">RENAME USER</code> does not automatically migrate
        any database objects that the user created, nor does it migrate
        any privileges that the user had prior to the renaming. This
        applies to tables, views, stored routines, triggers, and events.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="revoke"></a>12.5.1.5. <code class="literal">REVOKE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2226574"></a><a class="indexterm" name="id2226583"></a><a class="indexterm" name="id2226595"></a><a class="indexterm" name="id2226604"></a><pre class="programlisting">REVOKE
    <em class="replaceable"><code>priv_type</code></em> [(<em class="replaceable"><code>column_list</code></em>)]
      [, <em class="replaceable"><code>priv_type</code></em> [(<em class="replaceable"><code>column_list</code></em>)]] ...
    ON [<em class="replaceable"><code>object_type</code></em>]
        {
            *
          | *.*
          | <em class="replaceable"><code>db_name</code></em>.*
          | <em class="replaceable"><code>db_name.tbl_name</code></em>
          | <em class="replaceable"><code>tbl_name</code></em>
          | <em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>routine_name</code></em>

        }
    FROM <em class="replaceable"><code>user</code></em> [, <em class="replaceable"><code>user</code></em>] ...

REVOKE ALL PRIVILEGES, GRANT OPTION FROM <em class="replaceable"><code>user</code></em> [, <em class="replaceable"><code>user</code></em>] ...
</pre><p>
        The <code class="literal">REVOKE</code> statement enables system
        administrators to revoke privileges from MySQL accounts. Each
        account is named using the same format as for the
        <code class="literal">GRANT</code> statement; for example,
        <code class="literal">'jeffrey'@'localhost'</code>. If you specify only
        the username part of the account name, a hostname part of
        <code class="literal">'%'</code> is used. For additional information about
        specifying account names, see <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
      </p><p>
        To use the first <code class="literal">REVOKE</code> syntax, you must have
        the <code class="literal">GRANT OPTION</code> privilege, and you must have
        the privileges that you are revoking.
      </p><p>
        For details on the levels at which privileges exist, the
        allowable <em class="replaceable"><code>priv_type</code></em> values, and the
        syntax for specifying users and passwords, see
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>
      </p><p>
        If the grant tables hold privilege rows that contain mixed-case
        database or table names and the
        <code class="literal">lower_case_table_names</code> system variable is set
        to a non-zero value, <code class="literal">REVOKE</code> cannot be used to
        revoke these privileges. It will be necessary to manipulate the
        grant tables directly. (<code class="literal">GRANT</code> will not create
        such rows when <code class="literal">lower_case_table_names</code> is set,
        but such rows might have been created prior to setting the
        variable.)
      </p><p>
        To revoke all privileges, use the following syntax, which drops
        all global, database-, table-, column-, and routine-level
        privileges for the named user or users:
      </p><pre class="programlisting">REVOKE ALL PRIVILEGES, GRANT OPTION FROM <em class="replaceable"><code>user</code></em> [, <em class="replaceable"><code>user</code></em>] ...
</pre><p>
        To use this <code class="literal">REVOKE</code> syntax, you must have the
        global <code class="literal">CREATE USER</code> privilege or the
        <code class="literal">UPDATE</code> privilege for the
        <code class="literal">mysql</code> database.
      </p><p>
        <code class="literal">REVOKE</code> removes privileges, but does not drop
        <code class="literal">user</code> table entries. You must do that
        explicitly using <code class="literal">DELETE</code> or <code class="literal">DROP
        USER</code> (see <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax">Section 12.5.1.2, “<code class="literal">DROP USER</code> Syntax”</a>).
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="set-password"></a>12.5.1.6. <code class="literal">SET PASSWORD</code> Syntax</h4></div></div></div><a class="indexterm" name="id2226891"></a><a class="indexterm" name="id2226900"></a><a class="indexterm" name="id2226912"></a><pre class="programlisting">SET PASSWORD [FOR <em class="replaceable"><code>user</code></em>] =
    {
        PASSWORD('<em class="replaceable"><code>some password</code></em>')
      | OLD_PASSWORD('<em class="replaceable"><code>some password</code></em>')
      | '<em class="replaceable"><code>encrypted password</code></em>'
    }
</pre><p>
        The <code class="literal">SET PASSWORD</code> statement assigns a password
        to an existing MySQL user account.
      </p><p>
        If the password is specified using the
        <a href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> or
        <a href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a> function, the
        literal text of the password should be given. If the password is
        specified without using either function, the password should be
        the already-encrypted password value as returned by
        <a href="functions.html#function_password"><code class="literal">PASSWORD()</code></a>.
      </p><p>
        With no <code class="literal">FOR</code> clause, this statement sets the
        password for the current user. Any client that has connected to
        the server using a non-anonymous account can change the password
        for that account.
      </p><p>
        With a <code class="literal">FOR</code> clause, this statement sets the
        password for a specific account on the current server host. Only
        clients that have the <code class="literal">UPDATE</code> privilege for
        the <code class="literal">mysql</code> database can do this. The
        <em class="replaceable"><code>user</code></em> value should be given in
        <code class="literal"><em class="replaceable"><code>user_name</code></em>@<em class="replaceable"><code>host_name</code></em></code>
        format, where <em class="replaceable"><code>user_name</code></em> and
        <em class="replaceable"><code>host_name</code></em> are exactly as they are
        listed in the <code class="literal">User</code> and
        <code class="literal">Host</code> columns of the
        <code class="literal">mysql.user</code> table entry. For example, if you
        had an entry with <code class="literal">User</code> and
        <code class="literal">Host</code> column values of
        <code class="literal">'bob'</code> and <code class="literal">'%.loc.gov'</code>, you
        would write the statement like this:
      </p><pre class="programlisting">SET PASSWORD FOR 'bob'@'%.loc.gov' = PASSWORD('<em class="replaceable"><code>newpass</code></em>');
</pre><p>
        That is equivalent to the following statements:
      </p><pre class="programlisting">UPDATE mysql.user SET Password=PASSWORD('<em class="replaceable"><code>newpass</code></em>')
  WHERE User='bob' AND Host='%.loc.gov';
FLUSH PRIVILEGES;
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If you are connecting to a MySQL 4.1 or later server using a
          pre-4.1 client program, do not use the preceding <code class="literal">SET
          PASSWORD</code> or <code class="literal">UPDATE</code> statement
          without reading <a href="server-administration.html#password-hashing" title="5.4.8. Password Hashing as of MySQL 4.1">Section 5.4.8, “Password Hashing as of MySQL 4.1”</a>, first. The
          password format changed in MySQL 4.1, and under certain
          circumstances it is possible that if you change your password,
          you might not be able to connect to the server afterward.
        </p></div><p>
        You can see which account the server authenticated you as by
        executing <code class="literal">SELECT CURRENT_USER()</code>.
      </p><p class="mnmas"><b>MySQL Enterprise</b>
          For automated notification of users without passwords,
          subscribe to the MySQL Enterprise Monitor. For more
          information see <a href="advisors.html" target="_top">advisors.html</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="table-maintenance-sql"></a>12.5.2. Table Maintenance Statements</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#analyze-table">12.5.2.1. <code class="literal">ANALYZE TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#backup-table">12.5.2.2. <code class="literal">BACKUP TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#check-table">12.5.2.3. <code class="literal">CHECK TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#checksum-table">12.5.2.4. <code class="literal">CHECKSUM TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#optimize-table">12.5.2.5. <code class="literal">OPTIMIZE TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#repair-table">12.5.2.6. <code class="literal">REPAIR TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#restore-table">12.5.2.7. <code class="literal">RESTORE TABLE</code> Syntax</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="analyze-table"></a>12.5.2.1. <code class="literal">ANALYZE TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2227211"></a><pre class="programlisting">ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ...
</pre><p>
        <code class="literal">ANALYZE TABLE</code> analyzes and stores the key
        distribution for a table. During the analysis, the table is
        locked with a read lock for <code class="literal">MyISAM</code>. For
        <code class="literal">InnoDB</code> the table is locked with a write lock.
        This statement works with <code class="literal">MyISAM</code>, and
        <code class="literal">InnoDB</code> tables. For <code class="literal">MyISAM</code>
        tables, this statement is equivalent to using <span><strong class="command">myisamchk
        --analyze</strong></span>.
      </p><p>
        For more information on how the analysis works
        within<code class="literal">InnoDB</code>, see
        <a href="storage-engines.html#innodb-restrictions" title="13.5.16. Restrictions on InnoDB Tables">Section 13.5.16, “Restrictions on <code class="literal">InnoDB</code> Tables”</a>.
      </p><p class="mnmas"><b>MySQL Enterprise</b>
          For expert advice on optimizing tables subscribe to the MySQL
          Enterprise Monitor. For more information, see
          <a href="advisors.html" target="_top">advisors.html</a>.
        </p><p>
        MySQL uses the stored key distribution to decide the order in
        which tables should be joined when you perform a join on
        something other than a constant. In addition, key distributions
        can be used when deciding which indexes to use for a specific
        table within a query.
      </p><p>
        This statement requires <code class="literal">SELECT</code> and
        <code class="literal">INSERT</code> privileges for the table.
      </p><p>
        <code class="literal">ANALYZE TABLE</code> is not supported for
        partitioned tables.
      </p><p>
        <code class="literal">ANALYZE TABLE</code> returns a result set with the
        following columns:
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Column</strong></span></td><td><span class="bold"><strong>Value</strong></span></td></tr><tr><td><code class="literal">Table</code></td><td>The table name</td></tr><tr><td><code class="literal">Op</code></td><td>Always <code class="literal">analyze</code></td></tr><tr><td><code class="literal">Msg_type</code></td><td>One of <code class="literal">status</code>, <code class="literal">error</code>,
                <code class="literal">info</code>, or <code class="literal">warning</code></td></tr><tr><td><code class="literal">Msg_text</code></td><td>The message</td></tr></tbody></table></div><p>
        You can check the stored key distribution with the <code class="literal">SHOW
        INDEX</code> statement. See <a href="sql-syntax.html#show-index" title="12.5.5.20. SHOW INDEX Syntax">Section 12.5.5.20, “<code class="literal">SHOW INDEX</code> Syntax”</a>.
      </p><p>
        If the table has not changed since the last <code class="literal">ANALYZE
        TABLE</code> statement, the table is not analyzed again.
      </p><p>
        By default, <code class="literal">ANALYZE TABLE</code> statements are
        written to the binary log so that such statements used on a
        MySQL server acting as a replication master will be replicated
        to replication slaves. Logging can be suppressed with the
        optional <code class="literal">NO_WRITE_TO_BINLOG</code> keyword or its
        alias <code class="literal">LOCAL</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="backup-table"></a>12.5.2.2. <code class="literal">BACKUP TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2227559"></a><a class="indexterm" name="id2227568"></a><pre class="programlisting">BACKUP TABLE <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ... TO '<em class="replaceable"><code>/path/to/backup/directory</code></em>'
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This statement is deprecated. We are working on a better
          replacement for it that will provide online backup
          capabilities. In the meantime, the
          <span><strong class="command">mysqlhotcopy</strong></span> script can be used instead.
        </p></div><p>
        <code class="literal">BACKUP TABLE</code> copies to the backup directory
        the minimum number of table files needed to restore the table,
        after flushing any buffered changes to disk. The statement works
        only for <code class="literal">MyISAM</code> tables. It copies the
        <code class="filename">.frm</code> definition and
        <code class="filename">.MYD</code> data files. The
        <code class="filename">.MYI</code> index file can be rebuilt from those
        two files. The directory should be specified as a full pathname.
        To restore the table, use <code class="literal">RESTORE TABLE</code>.
      </p><p>
        During the backup, a read lock is held for each table, one at
        time, as they are being backed up. If you want to back up
        several tables as a snapshot (preventing any of them from being
        changed during the backup operation), issue a <code class="literal">LOCK
        TABLES</code> statement first, to obtain a read lock for all
        tables in the group.
      </p><p>
        <code class="literal">BACKUP TABLE</code> returns a result set with the
        following columns:
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Column</strong></span></td><td><span class="bold"><strong>Value</strong></span></td></tr><tr><td><code class="literal">Table</code></td><td>The table name</td></tr><tr><td><code class="literal">Op</code></td><td>Always <code class="literal">backup</code></td></tr><tr><td><code class="literal">Msg_type</code></td><td>One of <code class="literal">status</code>, <code class="literal">error</code>,
                <code class="literal">info</code>, or <code class="literal">warning</code></td></tr><tr><td><code class="literal">Msg_text</code></td><td>The message</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="check-table"></a>12.5.2.3. <code class="literal">CHECK TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2227832"></a><pre class="programlisting">CHECK TABLE <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ... [<em class="replaceable"><code>option</code></em>] ...

<em class="replaceable"><code>option</code></em> = {FOR UPGRADE | QUICK | FAST | MEDIUM | EXTENDED | CHANGED}
</pre><p>
        <code class="literal">CHECK TABLE</code> checks a table or tables for
        errors. <code class="literal">CHECK TABLE</code> works for
        <code class="literal">MyISAM</code>, <code class="literal">InnoDB</code>, and
        <code class="literal">ARCHIVE</code> tables. Starting with MySQL 5.1.9,
        <code class="literal">CHECK</code> is also valid for
        <code class="literal">CSV</code> tables, see
        <a href="storage-engines.html#csv-storage-engine" title="13.11. The CSV Storage Engine">Section 13.11, “The <code class="literal">CSV</code> Storage Engine”</a>. For
        <code class="literal">MyISAM</code> tables, the key statistics are updated
        as well.
      </p><p>
        <code class="literal">CHECK TABLE</code> can also check views for
        problems, such as tables that are referenced in the view
        definition that no longer exist.
      </p><p>
        <code class="literal">CHECK TABLE</code> is not supported for partitioned
        tables.
      </p><p>
        <code class="literal">CHECK TABLE</code> returns a result set with the
        following columns:
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Column</strong></span></td><td><span class="bold"><strong>Value</strong></span></td></tr><tr><td><code class="literal">Table</code></td><td>The table name</td></tr><tr><td><code class="literal">Op</code></td><td>Always <code class="literal">check</code></td></tr><tr><td><code class="literal">Msg_type</code></td><td>One of <code class="literal">status</code>, <code class="literal">error</code>,
                <code class="literal">info</code>, or <code class="literal">warning</code></td></tr><tr><td><code class="literal">Msg_text</code></td><td>The message</td></tr></tbody></table></div><p>
        Note that the statement might produce many rows of information
        for each checked table. The last row has a
        <code class="literal">Msg_type</code> value of <code class="literal">status</code>
        and the <code class="literal">Msg_text</code> normally should be
        <code class="literal">OK</code>. If you don't get <code class="literal">OK</code>,
        or <code class="literal">Table is already up to date</code> you should
        normally run a repair of the table. See
        <a href="backup-and-recovery.html#table-maintenance" title="6.4. Table Maintenance and Crash Recovery">Section 6.4, “Table Maintenance and Crash Recovery”</a>. <code class="literal">Table is already
        up to date</code> means that the storage engine for the table
        indicated that there was no need to check the table.
      </p><p>
        The <code class="literal">FOR UPGRADE</code> option checks whether the
        named tables are compatible with the current version of MySQL.
        This option was added in MySQL 5.1.7. With <code class="literal">FOR
        UPGRADE</code>, the server checks each table to determine
        whether there have been any incompatible changes in any of the
        table's data types or indexes since the table was created. If
        not, the check succeeds. Otherwise, if there is a possible
        incompatibility, the server runs a full check on the table
        (which might take some time). If the full check succeeds, the
        server marks the table's <code class="filename">.frm</code> file with the
        current MySQL version number. Marking the
        <code class="filename">.frm</code> file ensures that further checks for
        the table with the same version of the server will be fast.
      </p><p>
        Incompatibilities might occur because the storage format for a
        data type has changed or because its sort order has changed. Our
        aim is to avoid these changes, but occasionally they are
        necessary to correct problems that would be worse than an
        incompatibility between releases.
      </p><p>
        Currently, <code class="literal">FOR UPGRADE</code> discovers these
        incompatibilities:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The indexing order for end-space in <code class="literal">TEXT</code>
            columns for <code class="literal">InnoDB</code> and
            <code class="literal">MyISAM</code> tables changed between MySQL 4.1
            and 5.0.
          </p></li><li><p>
            The storage method of the new <code class="literal">DECIMAL</code>
            data type changed between MySQL 5.0.3 and 5.0.5.
          </p></li><li><p>
            As of MySQL 5.1.25, if your table was created by a different
            version of the MySQL server than the one you are currently
            running, <code class="literal">FOR UPGRADE</code> indicates that the
            table has an <code class="filename">.frm</code> file with an
            incompatible version. In this case, the result set returned
            by <code class="literal">CHECK TABLE</code> contains a line with a
            <code class="literal">Msg_type</code> value of
            <code class="literal">error</code> and a <code class="literal">Msg_text</code>
            value of <code class="literal">Table upgrade required. Please do
            "REPAIR TABLE
            `<em class="replaceable"><code>tbl_name</code></em>`" to fix
            it!</code>
          </p></li></ul></div><p>
        The other check options that can be given are shown in the
        following table. These options are passed to the storage engine,
        which may use them or not. <code class="literal">MyISAM</code> uses them;
        they are ignored for <code class="literal">InnoDB</code> tables and views.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Type</strong></span></td><td><span class="bold"><strong>Meaning</strong></span></td></tr><tr><td><code class="literal">QUICK</code></td><td>Do not scan the rows to check for incorrect links.</td></tr><tr><td><code class="literal">FAST</code></td><td>Check only tables that have not been closed properly.</td></tr><tr><td><code class="literal">CHANGED</code></td><td>Check only tables that have been changed since the last check or that
                have not been closed properly.</td></tr><tr><td><code class="literal">MEDIUM</code></td><td>Scan rows to verify that deleted links are valid. This also calculates a
                key checksum for the rows and verifies this with a
                calculated checksum for the keys.</td></tr><tr><td><code class="literal">EXTENDED</code></td><td>Do a full key lookup for all keys for each row. This ensures that the
                table is 100% consistent, but takes a long time.</td></tr></tbody></table></div><p>
        If none of the options <code class="literal">QUICK</code>,
        <code class="literal">MEDIUM</code>, or <code class="literal">EXTENDED</code> are
        specified, the default check type for dynamic-format
        <code class="literal">MyISAM</code> tables is <code class="literal">MEDIUM</code>.
        This has the same result as running <span><strong class="command">myisamchk
        --medium-check <em class="replaceable"><code>tbl_name</code></em></strong></span> on
        the table. The default check type also is
        <code class="literal">MEDIUM</code> for static-format
        <code class="literal">MyISAM</code> tables, unless
        <code class="literal">CHANGED</code> or <code class="literal">FAST</code> is
        specified. In that case, the default is
        <code class="literal">QUICK</code>. The row scan is skipped for
        <code class="literal">CHANGED</code> and <code class="literal">FAST</code> because
        the rows are very seldom corrupted.
      </p><p>
        You can combine check options, as in the following example that
        does a quick check on the table to determine whether it was
        closed properly:
      </p><pre class="programlisting">CHECK TABLE test_table FAST QUICK;
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          In some cases, <code class="literal">CHECK TABLE</code> changes the
          table. This happens if the table is marked as
          “<span class="quote">corrupted</span>” or “<span class="quote">not closed properly</span>”
          but <code class="literal">CHECK TABLE</code> does not find any problems
          in the table. In this case, <code class="literal">CHECK TABLE</code>
          marks the table as okay.
        </p></div><p>
        If a table is corrupted, it is most likely that the problem is
        in the indexes and not in the data part. All of the preceding
        check types check the indexes thoroughly and should thus find
        most errors.
      </p><p>
        If you just want to check a table that you assume is okay, you
        should use no check options or the <code class="literal">QUICK</code>
        option. The latter should be used when you are in a hurry and
        can take the very small risk that <code class="literal">QUICK</code> does
        not find an error in the data file. (In most cases, under normal
        usage, MySQL should find any error in the data file. If this
        happens, the table is marked as “<span class="quote">corrupted</span>” and
        cannot be used until it is repaired.)
      </p><p>
        <code class="literal">FAST</code> and <code class="literal">CHANGED</code> are
        mostly intended to be used from a script (for example, to be
        executed from <span><strong class="command">cron</strong></span>) if you want to check
        tables from time to time. In most cases, <code class="literal">FAST</code>
        is to be preferred over <code class="literal">CHANGED</code>. (The only
        case when it is not preferred is when you suspect that you have
        found a bug in the <code class="literal">MyISAM</code> code.)
      </p><p>
        <code class="literal">EXTENDED</code> is to be used only after you have
        run a normal check but still get strange errors from a table
        when MySQL tries to update a row or find a row by key. This is
        very unlikely if a normal check has succeeded.
      </p><p>
        Use of <code class="literal">CHECK TABLE ... EXTENDED</code> might
        influence the execution plan generated by the query optimizer.
      </p><p>
        Some problems reported by <code class="literal">CHECK TABLE</code> cannot
        be corrected automatically:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Found row where the auto_increment column has the
            value 0</code>.
          </p><p>
            This means that you have a row in the table where the
            <code class="literal">AUTO_INCREMENT</code> index column contains the
            value 0. (It is possible to create a row where the
            <code class="literal">AUTO_INCREMENT</code> column is 0 by explicitly
            setting the column to 0 with an <code class="literal">UPDATE</code>
            statement.)
          </p><p>
            This is not an error in itself, but could cause trouble if
            you decide to dump the table and restore it or do an
            <code class="literal">ALTER TABLE</code> on the table. In this case,
            the <code class="literal">AUTO_INCREMENT</code> column changes value
            according to the rules of <code class="literal">AUTO_INCREMENT</code>
            columns, which could cause problems such as a duplicate-key
            error.
          </p><p>
            To get rid of the warning, simply execute an
            <code class="literal">UPDATE</code> statement to set the column to
            some value other than 0.
          </p></li><li><p>
            If <code class="literal">CHECK TABLE</code> finds a problem for an
            <code class="literal">InnoDB</code> table, the server shuts down to
            prevent error propagation. Details of the error will be
            written to the error log.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="checksum-table"></a>12.5.2.4. <code class="literal">CHECKSUM TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2228752"></a><pre class="programlisting">CHECKSUM TABLE <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ... [ QUICK | EXTENDED ]
</pre><p>
        <code class="literal">CHECKSUM TABLE</code> reports a table checksum.
      </p><p>
        With <code class="literal">QUICK</code>, the live table checksum is
        reported if it is available, or <code class="literal">NULL</code>
        otherwise. This is very fast. A live checksum is enabled by
        specifying the <code class="literal">CHECKSUM=1</code> table option when
        you create the table; currently, this is supported only for
        <code class="literal">MyISAM</code> tables. See
        <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>.
      </p><p>
        With <code class="literal">EXTENDED</code>, the entire table is read row
        by row and the checksum is calculated. This can be very slow for
        large tables.
      </p><p>
        If neither <code class="literal">QUICK</code> nor
        <code class="literal">EXTENDED</code> is specified, MySQL returns a live
        checksum if the table storage engine supports it and scans the
        table otherwise.
      </p><p>
        For a non-existent table, <code class="literal">CHECKSUM TABLE</code>
        returns <code class="literal">NULL</code> and generates a warning.
      </p><p>
        The checksum value depends on the table row format. If the row
        format changes, the checksum also changes. For example, the
        storage format for <code class="literal">VARCHAR</code> changed between
        MySQL 4.1 and 5.0, so if a 4.1 table is upgraded to MySQL 5.0,
        the checksum value may change.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="optimize-table"></a>12.5.2.5. <code class="literal">OPTIMIZE TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2228911"></a><a class="indexterm" name="id2228920"></a><a class="indexterm" name="id2228932"></a><pre class="programlisting">OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ...
</pre><p>
        <code class="literal">OPTIMIZE TABLE</code> should be used if you have
        deleted a large part of a table or if you have made many changes
        to a table with variable-length rows (tables that have
        <code class="literal">VARCHAR</code>, <code class="literal">VARBINARY</code>,
        <code class="literal">BLOB</code>, or <code class="literal">TEXT</code> columns).
        Deleted rows are maintained in a linked list and subsequent
        <code class="literal">INSERT</code> operations reuse old row positions.
        You can use <code class="literal">OPTIMIZE TABLE</code> to reclaim the
        unused space and to defragment the data file.
      </p><p>
        This statement requires <code class="literal">SELECT</code> and
        <code class="literal">INSERT</code> privileges for the table.
      </p><p>
        <code class="literal">OPTIMIZE TABLE</code> is not supported for
        partitioned tables. See
        <a href="partitioning.html#partitioning-maintenance" title="21.3.3. Maintenance of Partitions">Section 21.3.3, “Maintenance of Partitions”</a>, for information
        about alternatives.
      </p><p>
        In most setups, you need not run <code class="literal">OPTIMIZE
        TABLE</code> at all. Even if you do a lot of updates to
        variable-length rows, it is not likely that you need to do this
        more than once a week or month and only on certain tables.
      </p><p>
        <code class="literal">OPTIMIZE TABLE</code> works
        <span class="emphasis"><em>only</em></span> for <code class="literal">MyISAM</code>,
        <code class="literal">InnoDB</code>, and <code class="literal">ARCHIVE</code>
        tables. It does <span class="emphasis"><em>not</em></span> work for tables created
        using any other storage engine, including <code class="literal">NDB</code>
        Disk Data tables.
      </p><p>
        In MySQL Cluster NDB 6.3.7 and later MySQL Cluster NDB 6.3
        releases, <code class="literal">OPTIMIZE TABLE</code> is supported for
        dynamic columns of in-memory <code class="literal">NDB</code> tables. The
        performance of <code class="literal">OPTIMIZE</code> on Cluster tables can
        be tuned by adjusting the value of the
        <code class="literal">ndb_optimization_delay</code> system variable, which
        controls the number of milliseconds to wait between processing
        batches of rows by <code class="literal">OPTIMIZE TABLE</code>. See
        <a href="mysql-cluster.html#mysql-cluster-limitations-resolved" title="20.14.11. Previous MySQL Cluster Issues Resolved in MySQL 5.1">Section 20.14.11, “Previous MySQL Cluster Issues Resolved in MySQL 5.1”</a>, for more
        information.
      </p><p>
        Beginning with MySQL Cluster NDB 6.3.8, <code class="literal">OPTIMIZE
        TABLE</code> can be interrupted by (for example) killing the
        SQL thread performing the <code class="literal">OPTIMIZE</code> operation.
      </p><p>
        For <code class="literal">MyISAM</code> tables, <code class="literal">OPTIMIZE
        TABLE</code> works as follows:
      </p><div class="orderedlist"><ol type="1"><li><p>
            If the table has deleted or split rows, repair the table.
          </p></li><li><p>
            If the index pages are not sorted, sort them.
          </p></li><li><p>
            If the table's statistics are not up to date (and the repair
            could not be accomplished by sorting the index), update
            them.
          </p></li></ol></div><p>
        For <code class="literal">InnoDB</code> tables, <code class="literal">OPTIMIZE
        TABLE</code> is mapped to <code class="literal">ALTER TABLE</code>,
        which rebuilds the table to update index statistics and free
        unused space in the clustered index.
      </p><p>
        You can make <code class="literal">OPTIMIZE TABLE</code> work on other
        storage engines by starting <span><strong class="command">mysqld</strong></span> with the
        <code class="option">--skip-new</code> or <code class="option">--safe-mode</code>
        option. In this case, <code class="literal">OPTIMIZE TABLE</code> is just
        mapped to <code class="literal">ALTER TABLE</code>.
      </p><p>
        <code class="literal">OPTIMIZE TABLE</code> returns a result set with the
        following columns:
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Column</strong></span></td><td><span class="bold"><strong>Value</strong></span></td></tr><tr><td><code class="literal">Table</code></td><td>The table name</td></tr><tr><td><code class="literal">Op</code></td><td>Always <code class="literal">optimize</code></td></tr><tr><td><code class="literal">Msg_type</code></td><td>One of <code class="literal">status</code>, <code class="literal">error</code>,
                <code class="literal">info</code>, or <code class="literal">warning</code></td></tr><tr><td><code class="literal">Msg_text</code></td><td>The message</td></tr></tbody></table></div><p>
        Note that MySQL locks the table during the time
        <code class="literal">OPTIMIZE TABLE</code> is running.
      </p><p>
        By default, <code class="literal">OPTIMIZE TABLE</code> statements are
        written to the binary log so that such statements used on a
        MySQL server acting as a replication master will be replicated
        to replication slaves. Logging can be suppressed with the
        optional <code class="literal">NO_WRITE_TO_BINLOG</code> keyword or its
        alias <code class="literal">LOCAL</code>.
      </p><p>
        <code class="literal">OPTIMIZE TABLE</code> does not sort R-tree indexes,
        such as spatial indexes on <code class="literal">POINT</code> columns.
        (<a href="http://bugs.mysql.com/23578" target="_top">Bug#23578</a>)
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="repair-table"></a>12.5.2.6. <code class="literal">REPAIR TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2229470"></a><pre class="programlisting">REPAIR [LOCAL | NO_WRITE_TO_BINLOG] TABLE
    <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ... [QUICK] [EXTENDED] [USE_FRM]
</pre><p>
        <code class="literal">REPAIR TABLE</code> repairs a possibly corrupted
        table. By default, it has the same effect as <span><strong class="command">myisamchk
        --recover <em class="replaceable"><code>tbl_name</code></em></strong></span>.
        <code class="literal">REPAIR TABLE</code> works for
        <code class="literal">MyISAM</code> and for <code class="literal">ARCHIVE</code>
        tables. Starting with MySQL 5.1.9, <code class="literal">REPAIR</code> is
        also valid for <code class="literal">CSV</code> tables. See
        <a href="storage-engines.html#myisam-storage-engine" title="13.4. The MyISAM Storage Engine">Section 13.4, “The <code class="literal">MyISAM</code> Storage Engine”</a>, and
        <a href="storage-engines.html#archive-storage-engine" title="13.10. The ARCHIVE Storage Engine">Section 13.10, “The <code class="literal">ARCHIVE</code> Storage Engine”</a>, and
        <a href="storage-engines.html#csv-storage-engine" title="13.11. The CSV Storage Engine">Section 13.11, “The <code class="literal">CSV</code> Storage Engine”</a>
      </p><p>
        This statement requires <code class="literal">SELECT</code> and
        <code class="literal">INSERT</code> privileges for the table.
      </p><p>
        <code class="literal">REPAIR TABLE</code> is not supported for partitioned
        tables. See <a href="partitioning.html#partitioning-maintenance" title="21.3.3. Maintenance of Partitions">Section 21.3.3, “Maintenance of Partitions”</a>, for
        information about alternatives.
      </p><p>
        Normally, you should never have to run this statement. However,
        if disaster strikes, <code class="literal">REPAIR TABLE</code> is very
        likely to get back all your data from a
        <code class="literal">MyISAM</code> table. If your tables become corrupted
        often, you should try to find the reason for it, to eliminate
        the need to use <code class="literal">REPAIR TABLE</code>. See
        <a href="error-handling.html#crashing" title="B.1.4.2. What to Do If MySQL Keeps Crashing">Section B.1.4.2, “What to Do If MySQL Keeps Crashing”</a>, and
        <a href="storage-engines.html#myisam-table-problems" title="13.4.4. MyISAM Table Problems">Section 13.4.4, “<code class="literal">MyISAM</code> Table Problems”</a>.
      </p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>
          It is best to make a backup of a table before performing a
          table repair operation; under some circumstances the operation
          might cause data loss. Possible causes include but are not
          limited to filesystem errors.
        </p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          If the server dies during a <code class="literal">REPAIR TABLE</code>
          operation, it is essential after restarting it that you
          immediately execute another <code class="literal">REPAIR TABLE</code>
          statement for the table before performing any other operations
          on it. (It is always a good idea to start by making a backup.)
          In the worst case, you might have a new clean index file
          without information about the data file, and then the next
          operation you perform could overwrite the data file. This is
          an unlikely but possible scenario.
        </p></div><p>
        <code class="literal">REPAIR TABLE</code> returns a result set with the
        following columns:
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Column</strong></span></td><td><span class="bold"><strong>Value</strong></span></td></tr><tr><td><code class="literal">Table</code></td><td>The table name</td></tr><tr><td><code class="literal">Op</code></td><td>Always <code class="literal">repair</code></td></tr><tr><td><code class="literal">Msg_type</code></td><td>One of <code class="literal">status</code>, <code class="literal">error</code>,
                <code class="literal">info</code>, or <code class="literal">warning</code></td></tr><tr><td><code class="literal">Msg_text</code></td><td>The message</td></tr></tbody></table></div><p>
        The <code class="literal">REPAIR TABLE</code> statement might produce many
        rows of information for each repaired table. The last row has a
        <code class="literal">Msg_type</code> value of <code class="literal">status</code>
        and <code class="literal">Msg_test</code> normally should be
        <code class="literal">OK</code>. If you do not get <code class="literal">OK</code>,
        you should try repairing the table with <span><strong class="command">myisamchk
        --safe-recover</strong></span>. (<code class="literal">REPAIR TABLE</code> does
        not yet implement all the options of
        <span><strong class="command">myisamchk</strong></span>.) With <span><strong class="command">myisamchk
        --safe-recover</strong></span>, you can also use options that
        <code class="literal">REPAIR TABLE</code> does not support, such as
        <code class="option">--max-record-length</code>.
      </p><p>
        If <code class="literal">QUICK</code> is given, <code class="literal">REPAIR
        TABLE</code> tries to repair only the index tree. This type
        of repair is like that done by <span><strong class="command">myisamchk --recover
        --quick</strong></span>.
      </p><p>
        If you use <code class="literal">EXTENDED</code>, MySQL creates the index
        row by row instead of creating one index at a time with sorting.
        This type of repair is like that done by <span><strong class="command">myisamchk
        --safe-recover</strong></span>.
      </p><p>
        There is also a <code class="literal">USE_FRM</code> mode available for
        <code class="literal">REPAIR TABLE</code>. Use this if the
        <code class="filename">.MYI</code> index file is missing or if its header
        is corrupted. In this mode, MySQL re-creates the
        <code class="filename">.MYI</code> file using information from the
        <code class="filename">.frm</code> file. This kind of repair cannot be
        done with <span><strong class="command">myisamchk</strong></span>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Use this mode <span class="emphasis"><em>only</em></span> if you cannot use
          regular <code class="literal">REPAIR</code> modes. The
          <code class="filename">.MYI</code> header contains important table
          metadata (in particular, current
          <code class="literal">AUTO_INCREMENT</code> value and <code class="literal">Delete
          link</code>) that are lost in <code class="literal">REPAIR ...
          USE_FRM</code>. Don't use <code class="literal">USE_FRM</code> if the
          table is compressed because this information is also stored in
          the <code class="filename">.MYI</code> file.
        </p></div><p>
        If <code class="literal">USE_FRM</code> is <span class="emphasis"><em>not</em></span> used,
        then a <code class="literal">REPAIR TABLE</code> checks the table to see
        whether an upgrade is required and if it is necessary performs
        the upgrade, following the same rules as <code class="literal">CHECK TABLE
        ... FOR UPGRADE</code>. See <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax">Section 12.5.2.3, “<code class="literal">CHECK TABLE</code> Syntax”</a>,
        for more information. As of MySQL 5.1.25, <code class="literal">REPAIR
        TABLE</code> without <code class="literal">USE_FRM</code> upgrades the
        <code class="filename">.frm</code> file to the current version.
      </p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>
          As of MySQL 5.1.25, if you use <code class="literal">USE_FRM</code> and
          your table was created by a different version of the MySQL
          server than the one you are currently running, <code class="literal">REPAIR
          TABLE</code> will not attempt to repair the table. In this
          case, the result set returned by <code class="literal">REPAIR
          TABLE</code> contains a line with a
          <code class="literal">Msg_type</code> value of <code class="literal">error</code>
          and a <code class="literal">Msg_text</code> value of <code class="literal">Failed
          repairing incompatible .FRM file</code>.
        </p><p>
          Prior to MySQL 5.1.25, <span class="emphasis"><em>do not use</em></span>
          <code class="literal">USE_FRM</code> if your table was created by a
          different version of the MySQL server. Doing so risks the loss
          of all rows in the table. It is particularly dangerous to use
          <code class="literal">USE_FRM</code> after the server returns this
          message:
        </p><pre class="programlisting">Table upgrade required. Please do
"REPAIR TABLE `<em class="replaceable"><code>tbl_name</code></em>`" to fix it!
</pre></div><p>
        By default, <code class="literal">REPAIR TABLE</code> statements are
        written to the binary log so that such statements used on a
        MySQL server acting as a replication master will be replicated
        to replication slaves. Logging can be suppressed with the
        optional <code class="literal">NO_WRITE_TO_BINLOG</code> keyword or its
        alias <code class="literal">LOCAL</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="restore-table"></a>12.5.2.7. <code class="literal">RESTORE TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2230179"></a><pre class="programlisting">RESTORE TABLE <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ... FROM '<em class="replaceable"><code>/path/to/backup/directory</code></em>'
</pre><p>
        <code class="literal">RESTORE TABLE</code> restores the table or tables
        from a backup that was made with <code class="literal">BACKUP
        TABLE</code>. The directory should be specified as a full
        pathname.
      </p><p>
        Existing tables are not overwritten; if you try to restore over
        an existing table, an error occurs. Just as for <code class="literal">BACKUP
        TABLE</code>, <code class="literal">RESTORE TABLE</code> currently
        works only for <code class="literal">MyISAM</code> tables. Restored tables
        are not replicated from master to slave.
      </p><p>
        The backup for each table consists of its
        <code class="filename">.frm</code> format file and
        <code class="filename">.MYD</code> data file. The restore operation
        restores those files, and then uses them to rebuild the
        <code class="filename">.MYI</code> index file. Restoring takes longer
        than backing up due to the need to rebuild the indexes. The more
        indexes the table has, the longer it takes.
      </p><p>
        <code class="literal">RESTORE TABLE</code> returns a result set with the
        following columns:
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Column</strong></span></td><td><span class="bold"><strong>Value</strong></span></td></tr><tr><td><code class="literal">Table</code></td><td>The table name</td></tr><tr><td><code class="literal">Op</code></td><td>Always <code class="literal">restore</code></td></tr><tr><td><code class="literal">Msg_type</code></td><td>One of <code class="literal">status</code>, <code class="literal">error</code>,
                <code class="literal">info</code>, or <code class="literal">warning</code></td></tr><tr><td><code class="literal">Msg_text</code></td><td>The message</td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="plugin-sql"></a>12.5.3. Plugin and User-Defined Function Statements</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#create-function-udf">12.5.3.1. <code class="literal">CREATE FUNCTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-function-udf">12.5.3.2. <code class="literal">DROP FUNCTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#install-plugin">12.5.3.3. <code class="literal">INSTALL PLUGIN</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#uninstall-plugin">12.5.3.4. <code class="literal">UNINSTALL PLUGIN</code> Syntax</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="create-function-udf"></a>12.5.3.1. <code class="literal">CREATE FUNCTION</code> Syntax</h4></div></div></div><a class="indexterm" name="id2230449"></a><a class="indexterm" name="id2230458"></a><a class="indexterm" name="id2230471"></a><a class="indexterm" name="id2230483"></a><a class="indexterm" name="id2230492"></a><a class="indexterm" name="id2230501"></a><pre class="programlisting">CREATE [AGGREGATE] FUNCTION <em class="replaceable"><code>function_name</code></em> RETURNS {STRING|INTEGER|REAL|DECIMAL}
    SONAME <em class="replaceable"><code>shared_library_name</code></em>
</pre><p>
        A user-defined function (UDF) is a way to extend MySQL with a
        new function that works like a native (built-in) MySQL function
        such as <a href="functions.html#function_abs"><code class="literal">ABS()</code></a> or
        <a href="functions.html#function_concat"><code class="literal">CONCAT()</code></a>.
      </p><p>
        <em class="replaceable"><code>function_name</code></em> is the name that should
        be used in SQL statements to invoke the function. The
        <code class="literal">RETURNS</code> clause indicates the type of the
        function's return value. <code class="literal">DECIMAL</code> is a legal
        value after <code class="literal">RETURNS</code>, but currently
        <code class="literal">DECIMAL</code> functions return string values and
        should be written like <code class="literal">STRING</code> functions.
      </p><p>
        <em class="replaceable"><code>shared_library_name</code></em> is the basename
        of the shared object file that contains the code that implements
        the function. The file must be located in the plugin directory.
        This directory is given by the value of the
        <code class="literal">plugin_dir</code> system variable.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This is a change in MySQL 5.1. For earlier versions of MySQL,
          the shared object can be located in any directory that is
          searched by your system's dynamic linker.
        </p></div><p>
        To create a function, you must have the
        <code class="literal">INSERT</code> and privilege for the
        <code class="literal">mysql</code> database. This is necessary because
        <code class="literal">CREATE FUNCTION</code> adds a row to the
        <code class="literal">mysql.func</code> system table that records the
        function's name, type, and shared library name. If you do not
        have this table, you should run the
        <span><strong class="command">mysql_upgrade</strong></span> command to create it. See
        <a href="programs.html#mysql-upgrade" title="4.4.8. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.8, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
      </p><p>
        An active function is one that has been loaded with
        <code class="literal">CREATE FUNCTION</code> and not removed with
        <code class="literal">DROP FUNCTION</code>. All active functions are
        reloaded each time the server starts, unless you start
        <span><strong class="command">mysqld</strong></span> with the
        <code class="option">--skip-grant-tables</code> option. In this case, UDF
        initialization is skipped and UDFs are unavailable.
      </p><p>
        For instructions on writing user-defined functions, see
        <a href="extending-mysql.html#adding-udf" title="31.3.2. Adding a New User-Defined Function">Section 31.3.2, “Adding a New User-Defined Function”</a>. For the UDF mechanism to work,
        functions must be written in C or C++ (or another language that
        can use C calling conventions), your operating system must
        support dynamic loading and you must have compiled
        <span><strong class="command">mysqld</strong></span> dynamically (not statically).
      </p><p>
        An <code class="literal">AGGREGATE</code> function works exactly like a
        native MySQL aggregate (summary) function such as
        <code class="literal">SUM</code> or
        <a href="functions.html#function_count"><code class="literal">COUNT()</code></a>. For
        <code class="literal">AGGREGATE</code> to work, your
        <code class="literal">mysql.func</code> table must contain a
        <code class="literal">type</code> column. If your
        <code class="literal">mysql.func</code> table does not have this column,
        you should run the <span><strong class="command">mysql_upgrade</strong></span> program to
        create it (see <a href="programs.html#mysql-upgrade" title="4.4.8. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.8, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>).
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          To upgrade the shared library associated with a UDF, issue a
          <code class="literal">DROP FUNCTION</code> statement, upgrade the shared
          library, and then issue a <code class="literal">CREATE FUNCTION</code>
          statement. If you upgrade the shared library first and then
          use <code class="literal">DROP FUNCTION</code>, the server may crash.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="drop-function-udf"></a>12.5.3.2. <code class="literal">DROP FUNCTION</code> Syntax</h4></div></div></div><a class="indexterm" name="id2230820"></a><a class="indexterm" name="id2230829"></a><a class="indexterm" name="id2230842"></a><a class="indexterm" name="id2230854"></a><a class="indexterm" name="id2230863"></a><a class="indexterm" name="id2230872"></a><pre class="programlisting">DROP FUNCTION <em class="replaceable"><code>function_name</code></em>
</pre><p>
        This statement drops the user-defined function (UDF) named
        <em class="replaceable"><code>function_name</code></em>.
      </p><p>
        To drop a function, you must have the <code class="literal">DELETE</code>
        privilege for the <code class="literal">mysql</code> database. This is
        because <code class="literal">DROP FUNCTION</code> removes a row from the
        <code class="literal">mysql.func</code> system table that records the
        function's name, type, and shared library name.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          To upgrade the shared library associated with a UDF, issue a
          <code class="literal">DROP FUNCTION</code> statement, upgrade the shared
          library, and then issue a <code class="literal">CREATE FUNCTION</code>
          statement. If you upgrade the shared library first and then
          use <code class="literal">DROP FUNCTION</code>, the server may crash.
        </p></div><p>
        <code class="literal">DROP FUNCTION</code> is also used to drop stored
        functions (see <a href="stored-procedures.html#drop-procedure" title="23.2.5. DROP PROCEDURE and DROP FUNCTION
        Syntax">Section 23.2.5, “<code class="literal">DROP PROCEDURE</code> and <code class="literal">DROP FUNCTION</code>
        Syntax”</a>).
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="install-plugin"></a>12.5.3.3. <code class="literal">INSTALL PLUGIN</code> Syntax</h4></div></div></div><a class="indexterm" name="id2231021"></a><a class="indexterm" name="id2231030"></a><a class="indexterm" name="id2231039"></a><pre class="programlisting">INSTALL PLUGIN <em class="replaceable"><code>plugin_name</code></em> SONAME '<em class="replaceable"><code>plugin_library</code></em>'
</pre><p>
        This statement installs a plugin.
      </p><p>
        <em class="replaceable"><code>plugin_name</code></em> is the name of the plugin
        as defined in the plugin declaration structure contained in the
        library file. Plugin name case sensitivity is determined by the
        host system filename semantics.
      </p><p>
        <em class="replaceable"><code>plugin_library</code></em> is the name of the
        shared library that contains the plugin code. The name includes
        the filename extension (for example,
        <code class="filename">libmyplugin.so</code> or
        <code class="filename">libmyplugin.dylib</code>).
      </p><p>
        The shared library must be located in the plugin directory (that
        is, the directory named by the <code class="literal">plugin_dir</code>
        system variable). The library must be in the plugin directory
        itself, not in a subdirectory. By default,
        <code class="literal">plugin_dir</code> is <code class="filename">plugin</code>
        directory under the directory named by the
        <code class="literal">pkglibdir</code> configuration variable, but it can
        be changed by setting the value of <code class="literal">plugin_dir</code>
        at server startup. For example, set its value in a
        <code class="filename">my.cnf</code> file:
      </p><pre class="programlisting">[mysqld]
plugin_dir=<em class="replaceable"><code>/path/to/plugin/directory</code></em>
</pre><p>
        If the value of <code class="literal">plugin_dir</code> is a relative
        pathname, it is taken to be relative to the MySQL base directory
        (the value of the <code class="literal">basedir</code> system variable).
      </p><p>
        <code class="literal">INSTALL PLUGIN</code> adds a line to the
        <code class="literal">mysql.plugin</code> table that describes the
        <code class="literal">plugin</code>. This table contains the plugin name
        and library filename.
      </p><p>
        <code class="literal">INSTALL PLUGIN</code> also loads and initializes the
        plugin code to make the plugin available for use. A plugin is
        initialized by executing its initialization function, which
        handles any setup that the plugin must perform before it can be
        used.
      </p><p>
        To use <code class="literal">INSTALL PLUGIN</code>, you must have the
        <code class="literal">INSERT privilege</code> for the
        <code class="literal">mysql.plugin</code> table.
      </p><p>
        At server startup, the server loads and initializes any plugin
        that is listed in the <code class="literal">mysql.plugin</code> table.
        This means that a plugin is installed with <code class="literal">INSTALL
        PLUGIN</code> only once, not every time the server starts.
        Plugin loading at startup does not occur if the server is
        started with the <code class="option">--skip-grant-tables</code> option.
      </p><p>
        When the server shuts down, it executes the deinitialization
        function for each plugin that is loaded so that the plugin has a
        change to perform any final cleanup.
      </p><p>
        To remove a plugin entirely, use the <code class="literal">UNINSTALL
        PLUGIN</code> statement:
      </p><p>
        To see what plugins are installed, use the <code class="literal">SHOW
        PLUGIN</code> statement.
      </p><p>
        If you recompile a plugin library and need to reinstall it, you
        can use either of the following procedures:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Use <code class="literal">UNINSTALL PLUGIN</code> to uninstall all
            plugins in the library, install the new plugin library file
            in the plugin directory, and then use <code class="literal">INSTALL
            PLUGIN</code> to install all plugins in the library. This
            procedure has the advantage that it can be used without
            stopping the server. However, if the plugin library contains
            many plugins, you must issue many <code class="literal">INSTALL
            PLUGIN</code> and <code class="literal">UNINSTALL PLUGIN</code>
            statements.
          </p></li><li><p>
            Alternatively, stop the server, install the new plugin
            library file in the plugin directory, and then restart the
            server.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="uninstall-plugin"></a>12.5.3.4. <code class="literal">UNINSTALL PLUGIN</code> Syntax</h4></div></div></div><a class="indexterm" name="id2231359"></a><a class="indexterm" name="id2231368"></a><a class="indexterm" name="id2231377"></a><pre class="programlisting">UNINSTALL PLUGIN <em class="replaceable"><code>plugin_name</code></em>
</pre><p>
        This statement removes an installed plugin. You cannot uninstall
        a plugin if any table that uses it is open.
      </p><p>
        <em class="replaceable"><code>plugin_name</code></em> must be the name of some
        plugin that is listed in the <code class="literal">mysql.plugin</code>
        table. The server executes the plugin's deinitialization
        function and removes the row for the plugin from the
        <code class="literal">mysql.plugin</code> table, so that subsequent server
        restarts will not load and initialize the plugin.
        <code class="literal">UNINSTALL PLUGIN</code> does not remove the plugin's
        shared library file.
      </p><p>
        To use <code class="literal">UNINSTALL PLUGIN</code>, you must have the
        <code class="literal">DELETE</code> privilege for the
        <code class="literal">mysql.plugin</code> table.
      </p><p>
        Plugin removal has implications for the use of associated
        tables. For example, if a full-text parser plugin is associated
        with a <code class="literal">FULLTEXT</code> index on the table,
        uninstalling the plugin makes the table unusable. Any attempt to
        access the table results in an error. The table cannot even be
        opened, so you cannot drop an index for which the plugin is
        used. This means that uninstalling a plugin is something to do
        with care unless you do not care about the table contents. If
        you are uninstalling a plugin with no intention of reinstalling
        it later and you care about the table contents, you should dump
        the table with <span><strong class="command">mysqldump</strong></span> and remove the
        <code class="literal">WITH PARSER</code> clause from the dumped
        <code class="literal">CREATE TABLE</code> statement so that you can reload
        the table later. If you do not care about the table,
        <code class="literal">DROP TABLE</code> can be used even if any plugins
        associated with the table are missing.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="set-option"></a>12.5.4. <code class="literal">SET</code> Syntax</h3></div></div></div><a class="indexterm" name="id2231537"></a><a class="indexterm" name="id2231545"></a><pre class="programlisting">SET <em class="replaceable"><code>variable_assignment</code></em> [, <em class="replaceable"><code>variable_assignment</code></em>] ...

<em class="replaceable"><code>variable_assignment</code></em>:
      <em class="replaceable"><code>user_var_name</code></em> = <em class="replaceable"><code>expr</code></em>
    | [GLOBAL | SESSION] <em class="replaceable"><code>system_var_name</code></em> = <em class="replaceable"><code>expr</code></em>
    | [@@global. | @@session. | @@]<em class="replaceable"><code>system_var_name</code></em> = <em class="replaceable"><code>expr</code></em>
</pre><p>
      The <code class="literal">SET</code> statement assigns values to different
      types of variables that affect the operation of the server or your
      client. Older versions of MySQL employed <code class="literal">SET
      OPTION</code>, but this syntax is deprecated in favor of
      <code class="literal">SET</code> without <code class="literal">OPTION</code>.
    </p><p>
      This section describes use of <code class="literal">SET</code> for assigning
      values to system variables or user variables. For general
      information about these types of variables, see
      <a href="server-administration.html#server-system-variables" title="5.1.3. System Variables">Section 5.1.3, “System Variables”</a>,
      <a href="server-administration.html#server-session-variables" title="5.1.4. Session System Variables">Section 5.1.4, “Session System Variables”</a>, and
      <a href="language-structure.html#user-variables" title="8.4. User-Defined Variables">Section 8.4, “User-Defined Variables”</a>. System variables also can be set
      at server startup, as described in
      <a href="server-administration.html#using-system-variables" title="5.1.5. Using System Variables">Section 5.1.5, “Using System Variables”</a>.
    </p><p>
      Some variants of <code class="literal">SET</code> syntax are used in other
      contexts:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">SET CHARACTER SET</code> and <code class="literal">SET
          NAMES</code> assign values to character set and collation
          variables associated with the connection to the server.
          <code class="literal">SET ONESHOT</code> is used for replication. These
          variants are described later in this section.
        </p></li><li><p>
          <code class="literal">SET PASSWORD</code> assigns account passwords. See
          <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax">Section 12.5.1.6, “<code class="literal">SET PASSWORD</code> Syntax”</a>.
        </p></li><li><p>
          <code class="literal">SET TRANSACTION ISOLATION LEVEL</code> sets the
          isolation level for transaction processing. See
          <a href="sql-syntax.html#set-transaction" title="12.4.6. SET TRANSACTION Syntax">Section 12.4.6, “<code class="literal">SET TRANSACTION</code> Syntax”</a>.
        </p></li><li><p>
          <code class="literal">SET</code> is used within stored routines to
          assign values to local routine variables. See
          <a href="stored-procedures.html#set-statement" title="23.2.9.2. Variable SET Statement">Section 23.2.9.2, “Variable <code class="literal">SET</code> Statement”</a>.
        </p></li></ul></div><p>
      The following discussion shows the different
      <code class="literal">SET</code> syntaxes that you can use to set variables.
      The examples use the <code class="literal">=</code> assignment operator, but
      the <code class="literal">:=</code> operator also is allowable.
    </p><p>
      A user variable is written as
      <code class="literal">@<em class="replaceable"><code>var_name</code></em></code> and can be
      set as follows:
    </p><pre class="programlisting">SET @<em class="replaceable"><code>var_name</code></em> = <em class="replaceable"><code>expr</code></em>;
</pre><p>
      Many system variables are dynamic and can be changed while the
      server runs by using the <code class="literal">SET</code> statement. For a
      list, see <a href="server-administration.html#dynamic-system-variables" title="5.1.5.2. Dynamic System Variables">Section 5.1.5.2, “Dynamic System Variables”</a>. To change a
      system variable with <code class="literal">SET</code>, refer to it as
      <em class="replaceable"><code>var_name</code></em>, optionally preceded by a
      modifier:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          To indicate explicitly that a variable is a global variable,
          precede its name by <code class="literal">GLOBAL</code> or
          <code class="literal">@@global.</code>. The <code class="literal">SUPER</code>
          privilege is required to set global variables.
        </p></li><li><p>
          To indicate explicitly that a variable is a session variable,
          precede its name by <code class="literal">SESSION</code>,
          <code class="literal">@@session.</code>, or <code class="literal">@@</code>.
          Setting a session variable requires no special privilege, but
          a client can change only its own session variables, not those
          of any other client.
        </p></li><li><p>
          <code class="literal">LOCAL</code> and <code class="literal">@@local.</code> are
          synonyms for <code class="literal">SESSION</code> and
          <code class="literal">@@session.</code>.
        </p></li><li><p>
          If no modifier is present, <code class="literal">SET</code> changes the
          session variable.
        </p></li></ul></div><p class="mnmas"><b>MySQL Enterprise</b>
        The MySQL Enterprise Monitor makes extensive use of system
        variables to determine the state of your server. For more
        information see <a href="advisors.html" target="_top">advisors.html</a>.
      </p><p>
      A <code class="literal">SET</code> statement can contain multiple variable
      assignments, separated by commas. If you set several system
      variables, the most recent <code class="literal">GLOBAL</code> or
      <code class="literal">SESSION</code> modifier in the statement is used for
      following variables that have no modifier specified.
    </p><p>
      Examples:
    </p><pre class="programlisting">SET sort_buffer_size=10000;
SET @@local.sort_buffer_size=10000;
SET GLOBAL sort_buffer_size=1000000, SESSION sort_buffer_size=1000000;
SET @@sort_buffer_size=1000000;
SET @@global.sort_buffer_size=1000000, @@local.sort_buffer_size=1000000;
</pre><p>
      The <code class="literal">@@<em class="replaceable"><code>var_name</code></em></code>
      syntax for system variables is supported for compatibility with
      some other database systems.
    </p><p>
      If you change a session system variable, the value remains in
      effect until your session ends or until you change the variable to
      a different value. The change is not visible to other clients.
    </p><p>
      If you change a global system variable, the value is remembered
      and used for new connections until the server restarts. (To make a
      global system variable setting permanent, you should set it in an
      option file.) The change is visible to any client that accesses
      that global variable. However, the change affects the
      corresponding session variable only for clients that connect after
      the change. The global variable change does not affect the session
      variable for any client that is currently connected (not even that
      of the client that issues the <code class="literal">SET GLOBAL</code>
      statement).
    </p><p>
      To prevent incorrect usage, MySQL produces an error if you use
      <code class="literal">SET GLOBAL</code> with a variable that can only be
      used with <code class="literal">SET SESSION</code> or if you do not specify
      <code class="literal">GLOBAL</code> (or <code class="literal">@@global.</code>) when
      setting a global variable.
    </p><p>
      To set a <code class="literal">SESSION</code> variable to the
      <code class="literal">GLOBAL</code> value or a <code class="literal">GLOBAL</code>
      value to the compiled-in MySQL default value, use the
      <code class="literal">DEFAULT</code> keyword. For example, the following two
      statements are identical in setting the session value of
      <code class="literal">max_join_size</code> to the global value:
    </p><pre class="programlisting">SET max_join_size=DEFAULT;
SET @@session.max_join_size=@@global.max_join_size;
</pre><p>
      Not all system variables can be set to <code class="literal">DEFAULT</code>.
      In such cases, use of <code class="literal">DEFAULT</code> results in an
      error.
    </p><p>
      You can refer to the values of specific global or sesson system
      variables in expressions by using one of the
      <code class="literal">@@</code>-modifiers. For example, you can retrieve
      values in a <code class="literal">SELECT</code> statement like this:
    </p><pre class="programlisting">SELECT @@global.sql_mode, @@session.sql_mode, @@sql_mode;
</pre><p>
      When you refer to a system variable in an expression as
      <code class="literal">@@<em class="replaceable"><code>var_name</code></em></code> (that is,
      when you do not specify <code class="literal">@@global.</code> or
      <code class="literal">@@session.</code>), MySQL returns the session value if
      it exists and the global value otherwise. (This differs from
      <code class="literal">SET @@<em class="replaceable"><code>var_name</code></em> =
      <em class="replaceable"><code>value</code></em></code>, which always refers to
      the session value.)
    </p><p>
      Suffixes for specifying a value multiplier can be used when
      setting a variable at server startup, but not to set the value
      with <code class="literal">SET</code> at runtime. On the other hand, with
      <code class="literal">SET</code> you can assign a variable's value using an
      expression, which is not true when you set a variable at server
      startup. For example, the first of the following lines is legal at
      server startup, but the second is not:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql --max_allowed_packet=16M</code></strong>
shell&gt; <strong class="userinput"><code>mysql --max_allowed_packet=16*1024*1024</code></strong>
</pre><p>
      Conversely, the second of the following lines is legal at runtime,
      but the first is not:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET GLOBAL max_allowed_packet=16M;</code></strong>
mysql&gt; <strong class="userinput"><code>SET GLOBAL max_allowed_packet=16*1024*1024;</code></strong>
</pre><p>
      To display system variables names and values, use the
      <code class="literal">SHOW VARIABLES</code> statement. (See
      <a href="sql-syntax.html#show-variables" title="12.5.5.36. SHOW VARIABLES Syntax">Section 12.5.5.36, “<code class="literal">SHOW VARIABLES</code> Syntax”</a>.)
    </p><p>
      The following list describes <code class="literal">SET</code> options that
      have non-standard syntax (that is, options that are not set with
      <code class="literal"><em class="replaceable"><code>name</code></em> =
      <em class="replaceable"><code>value</code></em></code> syntax).
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a class="indexterm" name="id2232281"></a>

          <code class="literal">CHARACTER SET
          {<em class="replaceable"><code>charset_name</code></em> | DEFAULT}</code>
        </p><p>
          This maps all strings from and to the client with the given
          mapping. You can add new mappings by editing
          <code class="filename">sql/convert.cc</code> in the MySQL source
          distribution. <code class="literal">SET CHARACTER SET</code> sets three
          session system variables:
          <code class="literal">character_set_client</code> and
          <code class="literal">character_set_results</code> are set to the given
          character set, and <code class="literal">character_set_connection</code>
          to the value of <code class="literal">character_set_database</code>. See
          <a href="internationalization-localization.html#charset-connection" title="9.1.4. Connection Character Sets and Collations">Section 9.1.4, “Connection Character Sets and Collations”</a>.
        </p><p>
          The default mapping can be restored by using the value
          <code class="literal">DEFAULT</code>. The default depends on the server
          configuration.
        </p><p>
          <code class="literal">ucs2</code> cannot be used as a client character
          set, which means that it does not work for <code class="literal">SET
          CHARACTER SET</code>.
        </p></li><li><p>
          <a class="indexterm" name="id2232382"></a>

          <code class="literal">NAMES {'<em class="replaceable"><code>charset_name</code></em>'
          [COLLATE '<em class="replaceable"><code>collation_name</code></em>'] |
          DEFAULT}</code>
        </p><p>
          <code class="literal">SET NAMES</code> sets the three session system
          variables <code class="literal">character_set_client</code>,
          <code class="literal">character_set_connection</code>, and
          <code class="literal">character_set_results</code> to the given
          character set. Setting
          <code class="literal">character_set_connection</code> to
          <code class="literal">charset_name</code> also sets
          <code class="literal">collation_connection</code> to the default
          collation for <code class="literal">charset_name</code>. The optional
          <code class="literal">COLLATE</code> clause may be used to specify a
          collation explicitly. See
          <a href="internationalization-localization.html#charset-connection" title="9.1.4. Connection Character Sets and Collations">Section 9.1.4, “Connection Character Sets and Collations”</a>.
        </p><p>
          The default mapping can be restored by using a value of
          <code class="literal">DEFAULT</code>. The default depends on the server
          configuration.
        </p><p>
          <code class="literal">ucs2</code> cannot be used as a client character
          set, which means that it does not work for <code class="literal">SET
          NAMES</code>.
        </p></li><li><p>
          <a class="indexterm" name="id2232504"></a>

          <code class="literal">ONE_SHOT</code>
        </p><p>
          This option is a modifier, not a variable. It can be used to
          influence the effect of variables that set the character set,
          the collation, and the time zone. <code class="literal">ONE_SHOT</code>
          is primarily used for replication purposes:
          <span><strong class="command">mysqlbinlog</strong></span> uses <code class="literal">SET
          ONE_SHOT</code> to modify temporarily the values of
          character set, collation, and time zone variables to reflect
          at rollforward what they were originally.
          <code class="literal">ONE_SHOT</code> is for internal use only and is
          deprecated for MySQL 5.0 and up.
        </p><p>
          You cannot use <code class="literal">ONE_SHOT</code> with other than the
          allowed set of variables; if you try, you get an error like
          this:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET ONE_SHOT max_allowed_packet = 1;</code></strong>
ERROR 1382 (HY000): The 'SET ONE_SHOT' syntax is reserved for purposes
internal to the MySQL server
</pre><p>
          If <code class="literal">ONE_SHOT</code> is used with the allowed
          variables, it changes the variables as requested, but only for
          the next non-<code class="literal">SET</code> statement. After that, the
          server resets all character set, collation, and time
          zone-related system variables to their previous values.
          Example:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET ONE_SHOT character_set_connection = latin5;</code></strong>

mysql&gt; <strong class="userinput"><code>SET ONE_SHOT collation_connection = latin5_turkish_ci;</code></strong>

mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE '%_connection';</code></strong>
+--------------------------+-------------------+
| Variable_name            | Value             |
+--------------------------+-------------------+
| character_set_connection | latin5            |
| collation_connection     | latin5_turkish_ci |
+--------------------------+-------------------+

mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE '%_connection';</code></strong>
+--------------------------+-------------------+
| Variable_name            | Value             |
+--------------------------+-------------------+
| character_set_connection | latin1            |
| collation_connection     | latin1_swedish_ci |
+--------------------------+-------------------+
</pre></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="show"></a>12.5.5. <code class="literal">SHOW</code> Syntax</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#show-authors">12.5.5.1. <code class="literal">SHOW AUTHORS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-binary-logs">12.5.5.2. <code class="literal">SHOW BINARY LOGS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-binlog-events">12.5.5.3. <code class="literal">SHOW BINLOG EVENTS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-character-set">12.5.5.4. <code class="literal">SHOW CHARACTER SET</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-collation">12.5.5.5. <code class="literal">SHOW COLLATION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-columns">12.5.5.6. <code class="literal">SHOW COLUMNS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-contributors">12.5.5.7. <code class="literal">SHOW CONTRIBUTORS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-create-database">12.5.5.8. <code class="literal">SHOW CREATE DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-create-event">12.5.5.9. <code class="literal">SHOW CREATE EVENT</code></a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-create-procedure">12.5.5.10. <code class="literal">SHOW CREATE PROCEDURE</code> and <code class="literal">SHOW CREATE
        FUNCTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-create-table">12.5.5.11. <code class="literal">SHOW CREATE TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-create-trigger">12.5.5.12. <code class="literal">SHOW CREATE TRIGGER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-create-view">12.5.5.13. <code class="literal">SHOW CREATE VIEW</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-databases">12.5.5.14. <code class="literal">SHOW DATABASES</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-engine">12.5.5.15. <code class="literal">SHOW ENGINE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-engines">12.5.5.16. <code class="literal">SHOW ENGINES</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-errors">12.5.5.17. <code class="literal">SHOW ERRORS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-events">12.5.5.18. <code class="literal">SHOW EVENTS</code></a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-grants">12.5.5.19. <code class="literal">SHOW GRANTS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-index">12.5.5.20. <code class="literal">SHOW INDEX</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-innodb-status">12.5.5.21. <code class="literal">SHOW INNODB STATUS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-master-status">12.5.5.22. <code class="literal">SHOW MASTER STATUS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-open-tables">12.5.5.23. <code class="literal">SHOW OPEN TABLES</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-plugins">12.5.5.24. <code class="literal">SHOW PLUGINS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-privileges">12.5.5.25. <code class="literal">SHOW PRIVILEGES</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-procedure-code">12.5.5.26. <code class="literal">SHOW PROCEDURE CODE</code> and <code class="literal">SHOW FUNCTION
        CODE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-procedure-status">12.5.5.27. <code class="literal">SHOW PROCEDURE STATUS</code> and <code class="literal">SHOW FUNCTION
        STATUS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-processlist">12.5.5.28. <code class="literal">SHOW PROCESSLIST</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-scheduler-status">12.5.5.29. <code class="literal">SHOW SCHEDULER STATUS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-slave-hosts">12.5.5.30. <code class="literal">SHOW SLAVE HOSTS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-slave-status">12.5.5.31. <code class="literal">SHOW SLAVE STATUS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-status">12.5.5.32. <code class="literal">SHOW STATUS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-table-status">12.5.5.33. <code class="literal">SHOW TABLE STATUS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-tables">12.5.5.34. <code class="literal">SHOW TABLES</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-triggers">12.5.5.35. <code class="literal">SHOW TRIGGERS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-variables">12.5.5.36. <code class="literal">SHOW VARIABLES</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-warnings">12.5.5.37. <code class="literal">SHOW WARNINGS</code> Syntax</a></span></dt></dl></div><a class="indexterm" name="id2232652"></a><a class="indexterm" name="id2232671"></a><a class="indexterm" name="id2232683"></a><a class="indexterm" name="id2232692"></a><a class="indexterm" name="id2232701"></a><a class="indexterm" name="id2232710"></a><a class="indexterm" name="id2232719"></a><a class="indexterm" name="id2232728"></a><a class="indexterm" name="id2232737"></a><a class="indexterm" name="id2232746"></a><a class="indexterm" name="id2232755"></a><a class="indexterm" name="id2232764"></a><a class="indexterm" name="id2232772"></a><a class="indexterm" name="id2232781"></a><a class="indexterm" name="id2232790"></a><a class="indexterm" name="id2232799"></a><a class="indexterm" name="id2232808"></a><a class="indexterm" name="id2232817"></a><a class="indexterm" name="id2232826"></a><a class="indexterm" name="id2232835"></a><a class="indexterm" name="id2232844"></a><a class="indexterm" name="id2232853"></a><a class="indexterm" name="id2232862"></a><a class="indexterm" name="id2232871"></a><a class="indexterm" name="id2232880"></a><a class="indexterm" name="id2232889"></a><a class="indexterm" name="id2232898"></a><a class="indexterm" name="id2232906"></a><a class="indexterm" name="id2232915"></a><a class="indexterm" name="id2232924"></a><a class="indexterm" name="id2232933"></a><a class="indexterm" name="id2232942"></a><a class="indexterm" name="id2232951"></a><a class="indexterm" name="id2232960"></a><a class="indexterm" name="id2232969"></a><a class="indexterm" name="id2232978"></a><a class="indexterm" name="id2232987"></a><a class="indexterm" name="id2232996"></a><a class="indexterm" name="id2233005"></a><a class="indexterm" name="id2233014"></a><a class="indexterm" name="id2233023"></a><a class="indexterm" name="id2233032"></a><p>
      <code class="literal">SHOW</code> has many forms that provide information
      about databases, tables, columns, or status information about the
      server. This section describes those following:
    </p><pre class="programlisting">SHOW AUTHORS
SHOW CHARACTER SET [<em class="replaceable"><code>like_or_where</code></em>]
SHOW COLLATION [<em class="replaceable"><code>like_or_where</code></em>]
SHOW [FULL] COLUMNS FROM <em class="replaceable"><code>tbl_name</code></em> [FROM <em class="replaceable"><code>db_name</code></em>] [<em class="replaceable"><code>like_or_where</code></em>]
SHOW CONTRIBUTORS
SHOW CREATE DATABASE <em class="replaceable"><code>db_name</code></em>
SHOW CREATE EVENT <em class="replaceable"><code>event_name</code></em>
SHOW CREATE FUNCTION <em class="replaceable"><code>funcname</code></em>
SHOW CREATE PROCEDURE <em class="replaceable"><code>procname</code></em>
SHOW CREATE TABLE <em class="replaceable"><code>tbl_name</code></em>
SHOW CREATE TRIGGER <em class="replaceable"><code>trigger_name</code></em>
SHOW CREATE VIEW <em class="replaceable"><code>view_name</code></em>
SHOW DATABASES [<em class="replaceable"><code>like_or_where</code></em>]
SHOW ENGINE <em class="replaceable"><code>engine_name</code></em> {STATUS | MUTEX}
SHOW [STORAGE] ENGINES
SHOW ERRORS [LIMIT [<em class="replaceable"><code>offset</code></em>,] <em class="replaceable"><code>row_count</code></em>]
SHOW [FULL] EVENTS
SHOW FUNCTION CODE <em class="replaceable"><code>sp_name</code></em>
SHOW FUNCTION STATUS [<em class="replaceable"><code>like_or_where</code></em>]
SHOW GRANTS FOR <em class="replaceable"><code>user</code></em>
SHOW INDEX FROM <em class="replaceable"><code>tbl_name</code></em> [FROM <em class="replaceable"><code>db_name</code></em>]
SHOW INNODB STATUS
SHOW OPEN TABLES [FROM <em class="replaceable"><code>db_name</code></em>] [<em class="replaceable"><code>like_or_where</code></em>]
SHOW PLUGINS
SHOW PROCEDURE CODE <em class="replaceable"><code>sp_name</code></em>
SHOW PROCEDURE STATUS [<em class="replaceable"><code>like_or_where</code></em>]
SHOW PRIVILEGES
SHOW [FULL] PROCESSLIST
SHOW SCHEDULER STATUS
SHOW [GLOBAL | SESSION] STATUS [<em class="replaceable"><code>like_or_where</code></em>]
SHOW TABLE STATUS [FROM <em class="replaceable"><code>db_name</code></em>] [<em class="replaceable"><code>like_or_where</code></em>]
SHOW TABLES [FROM <em class="replaceable"><code>db_name</code></em>] [<em class="replaceable"><code>like_or_where</code></em>]
SHOW TRIGGERS [FROM <em class="replaceable"><code>db_name</code></em>] [<em class="replaceable"><code>like_or_where</code></em>]
SHOW [GLOBAL | SESSION] VARIABLES [<em class="replaceable"><code>like_or_where</code></em>]
SHOW WARNINGS [LIMIT [<em class="replaceable"><code>offset</code></em>,] <em class="replaceable"><code>row_count</code></em>]

<em class="replaceable"><code>like_or_where</code></em>:
    LIKE '<em class="replaceable"><code>pattern</code></em>'
  | WHERE <em class="replaceable"><code>expr</code></em>
</pre><a class="indexterm" name="id2233224"></a><a class="indexterm" name="id2233233"></a><a class="indexterm" name="id2233242"></a><a class="indexterm" name="id2233251"></a><a class="indexterm" name="id2233260"></a><p>
      If the syntax for a given <code class="literal">SHOW</code> statement
      includes a <a href="functions.html#operator_like"><code class="literal">LIKE
      '<em class="replaceable"><code>pattern</code></em>'</code></a> part,
      <code class="literal">'<em class="replaceable"><code>pattern</code></em>'</code> is a
      string that can contain the SQL
      “<span class="quote"><code class="literal">%</code></span>” and
      “<span class="quote"><code class="literal">_</code></span>” wildcard characters. The
      pattern is useful for restricting statement output to matching
      values.
    </p><p>
      Several <code class="literal">SHOW</code> statements also accept a
      <code class="literal">WHERE</code> clause that provides more flexibility in
      specifying which rows to display. See
      <a href="information-schema.html#extended-show" title="27.27. Extensions to SHOW Statements">Section 27.27, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
    </p><p>
      Many MySQL APIs (such as PHP) allow you to treat the result
      returned from a <code class="literal">SHOW</code> statement as you would a
      result set from a <code class="literal">SELECT</code>; see
      <a href="apis.html" title="Chapter 29. APIs and Libraries">Chapter 29, <i>APIs and Libraries</i></a>, or your API documentation for more
      information. In addition, you can work in SQL with results from
      queries on tables in the <code class="literal">INFORMATION_SCHEMA</code>
      database, which you cannot easily do with results from
      <code class="literal">SHOW</code> statements. See
      <a href="information-schema.html" title="Chapter 27. INFORMATION_SCHEMA Tables">Chapter 27, <i><code class="literal">INFORMATION_SCHEMA</code> Tables</i></a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-authors"></a>12.5.5.1. <code class="literal">SHOW AUTHORS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2233390"></a><pre class="programlisting">SHOW AUTHORS
</pre><p>
        The <code class="literal">SHOW AUTHORS</code> statement displays
        information about the people who work on MySQL. For each author,
        it displays <code class="literal">Name</code>,
        <code class="literal">Location</code>, and <code class="literal">Comment</code>
        values.
      </p><p>
        This statement was added in MySQL 5.1.3.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-binary-logs"></a>12.5.5.2. <code class="literal">SHOW BINARY LOGS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2233476"></a><a class="indexterm" name="id2233485"></a><pre class="programlisting">SHOW BINARY LOGS
SHOW MASTER LOGS
</pre><p>
        Lists the binary log files on the server. This statement is used
        as part of the procedure described in
        <a href="sql-syntax.html#purge-master-logs" title="12.6.1.1. PURGE MASTER LOGS Syntax">Section 12.6.1.1, “<code class="literal">PURGE MASTER LOGS</code> Syntax”</a>, that shows how to determine
        which logs can be purged.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW BINARY LOGS;</code></strong>
+---------------+-----------+
| Log_name      | File_size |
+---------------+-----------+
| binlog.000015 |    724935 |
| binlog.000016 |    733481 |
+---------------+-----------+
</pre><p>
        <code class="literal">SHOW MASTER LOGS</code> is equivalent to
        <code class="literal">SHOW BINARY LOGS</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-binlog-events"></a>12.5.5.3. <code class="literal">SHOW BINLOG EVENTS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2233577"></a><pre class="programlisting">SHOW BINLOG EVENTS
   [IN '<em class="replaceable"><code>log_name</code></em>'] [FROM <em class="replaceable"><code>pos</code></em>] [LIMIT [<em class="replaceable"><code>offset</code></em>,] <em class="replaceable"><code>row_count</code></em>]
</pre><p>
        Shows the events in the binary log. If you do not specify
        <code class="literal">'<em class="replaceable"><code>log_name</code></em>'</code>, the
        first binary log is displayed.
      </p><p>
        The <code class="literal">LIMIT</code> clause has the same syntax as for
        the <code class="literal">SELECT</code> statement. See
        <a href="sql-syntax.html#select" title="12.2.7. SELECT Syntax">Section 12.2.7, “<code class="literal">SELECT</code> Syntax”</a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Issuing a <code class="literal">SHOW BINLOG EVENTS</code> with no
          <code class="literal">LIMIT</code> clause could start a very time- and
          resource-consuming process because the server returns to the
          client the complete contents of the binary log (which includes
          all statements executed by the server that modify data). As an
          alternative to <code class="literal">SHOW BINLOG EVENTS</code>, use the
          <span><strong class="command">mysqlbinlog</strong></span> utility to save the binary log
          to a text file for later examination and analysis. See
          <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files">Section 4.6.7, “<span><strong class="command">mysqlbinlog</strong></span> — Utility for Processing Binary Log Files”</a>.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Events relating to the setting of variables are not included
          in the output from <code class="literal">SHOW BINLOG EVENTS</code>. To
          get complete coverage of events within a binary log, use
          <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><code class="literal">mysqlbinlog</code></a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-character-set"></a>12.5.5.4. <code class="literal">SHOW CHARACTER SET</code> Syntax</h4></div></div></div><a class="indexterm" name="id2233741"></a><pre class="programlisting">SHOW CHARACTER SET
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        The <code class="literal">SHOW CHARACTER SET</code> statement shows all
        available character sets. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present,
        indicates which character set names to match. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="27.27. Extensions to SHOW Statements">Section 27.27, “Extensions to <code class="literal">SHOW</code> Statements”</a>. For example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CHARACTER SET LIKE 'latin%';</code></strong>
+---------+-----------------------------+-------------------+--------+
| Charset | Description                 | Default collation | Maxlen |
+---------+-----------------------------+-------------------+--------+
| latin1  | cp1252 West European        | latin1_swedish_ci |      1 |
| latin2  | ISO 8859-2 Central European | latin2_general_ci |      1 |
| latin5  | ISO 8859-9 Turkish          | latin5_turkish_ci |      1 |
| latin7  | ISO 8859-13 Baltic          | latin7_general_ci |      1 |
+---------+-----------------------------+-------------------+--------+
</pre><p>
        The <code class="literal">Maxlen</code> column shows the maximum number of
        bytes required to store one character.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-collation"></a>12.5.5.5. <code class="literal">SHOW COLLATION</code> Syntax</h4></div></div></div><a class="indexterm" name="id2233858"></a><pre class="programlisting">SHOW COLLATION
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        The output from <code class="literal">SHOW COLLATION</code> includes all
        available character sets. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present,
        indicates which collation names to match. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="27.27. Extensions to SHOW Statements">Section 27.27, “Extensions to <code class="literal">SHOW</code> Statements”</a>. For example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW COLLATION LIKE 'latin1%';</code></strong>
+-------------------+---------+----+---------+----------+---------+
| Collation         | Charset | Id | Default | Compiled | Sortlen |
+-------------------+---------+----+---------+----------+---------+
| latin1_german1_ci | latin1  |  5 |         |          |       0 |
| latin1_swedish_ci | latin1  |  8 | Yes     | Yes      |       0 |
| latin1_danish_ci  | latin1  | 15 |         |          |       0 |
| latin1_german2_ci | latin1  | 31 |         | Yes      |       2 |
| latin1_bin        | latin1  | 47 |         | Yes      |       0 |
| latin1_general_ci | latin1  | 48 |         |          |       0 |
| latin1_general_cs | latin1  | 49 |         |          |       0 |
| latin1_spanish_ci | latin1  | 94 |         |          |       0 |
+-------------------+---------+----+---------+----------+---------+
</pre><p>
        The <code class="literal">Default</code> column indicates whether a
        collation is the default for its character set.
        <code class="literal">Compiled</code> indicates whether the character set
        is compiled into the server. <code class="literal">Sortlen</code> is
        related to the amount of memory required to sort strings
        expressed in the character set.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-columns"></a>12.5.5.6. <code class="literal">SHOW COLUMNS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2233990"></a><a class="indexterm" name="id2234009"></a><pre class="programlisting">SHOW [FULL] COLUMNS FROM <em class="replaceable"><code>tbl_name</code></em> [FROM <em class="replaceable"><code>db_name</code></em>]
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        <code class="literal">SHOW COLUMNS</code> displays information about the
        columns in a given table. It also works for views. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present,
        indicates which column names to match. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="27.27. Extensions to SHOW Statements">Section 27.27, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW COLUMNS FROM City;</code></strong>
+------------+----------+------+-----+---------+----------------+
| Field      | Type     | Null | Key | Default | Extra          |
+------------+----------+------+-----+---------+----------------+
| Id         | int(11)  | NO   | PRI | NULL    | auto_increment |
| Name       | char(35) | NO   |     |         |                |
| Country    | char(3)  | NO   | UNI |         |                |
| District   | char(20) | YES  | MUL |         |                |
| Population | int(11)  | NO   |     | 0       |                |
+------------+----------+------+-----+---------+----------------+
5 rows in set (0.00 sec)
</pre><p>
        If the data types differ from what you expect them to be based
        on a <code class="literal">CREATE TABLE</code> statement, note that MySQL
        sometimes changes data types when you create or alter a table.
        The conditions under which this occurs are described in
        <a href="sql-syntax.html#silent-column-changes" title="12.1.10.1. Silent Column Specification Changes">Section 12.1.10.1, “Silent Column Specification Changes”</a>.
      </p><p>
        The <code class="literal">FULL</code> keyword causes the output to include
        the column collation and comments, as well as the privileges you
        have for each column.
      </p><p>
        You can use <em class="replaceable"><code>db_name.tbl_name</code></em> as an
        alternative to the <code class="literal"><em class="replaceable"><code>tbl_name</code></em>
        FROM <em class="replaceable"><code>db_name</code></em></code> syntax. In
        other words, these two statements are equivalent:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW COLUMNS FROM mytable FROM mydb;</code></strong>
mysql&gt; <strong class="userinput"><code>SHOW COLUMNS FROM mydb.mytable;</code></strong>
</pre><p>
        <code class="literal">SHOW COLUMNS</code> displays the following values
        for each table column:
      </p><p>
        <code class="literal">Field</code> indicates the column name.
      </p><p>
        <code class="literal">Type</code> indicates the column data type.
      </p><p>
        <code class="literal">Collation</code> indicates the collation for
        non-binary string columns, or <code class="literal">NULL</code> for other
        columns. This value is displayed only if you use the
        <code class="literal">FULL</code> keyword.
      </p><p>
        The <code class="literal">Null</code> field contains
        <code class="literal">YES</code> if <code class="literal">NULL</code> values can be
        stored in the column, <code class="literal">NO</code> if not.
      </p><p>
        The <code class="literal">Key</code> field indicates whether the column is
        indexed:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            If <code class="literal">Key</code> is empty, the column either is not
            indexed or is indexed only as a secondary column in a
            multiple-column, non-unique index.
          </p></li><li><p>
            If <code class="literal">Key</code> is <code class="literal">PRI</code>, the
            column is a <code class="literal">PRIMARY KEY</code> or is one of the
            columns in a multiple-column <code class="literal">PRIMARY KEY</code>.
          </p></li><li><p>
            If <code class="literal">Key</code> is <code class="literal">UNI</code>, the
            column is the first column of a unique-valued index that
            cannot contain <code class="literal">NULL</code> values.
          </p></li><li><p>
            If <code class="literal">Key</code> is <code class="literal">MUL</code>,
            multiple occurrences of a given value are allowed within the
            column. The column is the first column of a non-unique index
            or a unique-valued index that can contain
            <code class="literal">NULL</code> values.
          </p></li></ul></div><p>
        If more than one of the <code class="literal">Key</code> values applies to
        a given column of a table, <code class="literal">Key</code> displays the
        one with the highest priority, in the order
        <code class="literal">PRI</code>, <code class="literal">UNI</code>,
        <code class="literal">MUL</code>.
      </p><p>
        A <code class="literal">UNIQUE</code> index may be displayed as
        <code class="literal">PRI</code> if it cannot contain
        <code class="literal">NULL</code> values and there is no <code class="literal">PRIMARY
        KEY</code> in the table. A <code class="literal">UNIQUE</code> index
        may display as <code class="literal">MUL</code> if several columns form a
        composite <code class="literal">UNIQUE</code> index; although the
        combination of the columns is unique, each column can still hold
        multiple occurrences of a given value.
      </p><p>
        The <code class="literal">Default</code> field indicates the default value
        that is assigned to the column.
      </p><p>
        The <code class="literal">Extra</code> field contains any additional
        information that is available about a given column. In the
        example shown, the <code class="literal">Extra</code> field indicates that
        the <code class="literal">Id</code> column was created with the
        <code class="literal">AUTO_INCREMENT</code> keyword.
      </p><p>
        <code class="literal">Privileges</code> indicates the privileges you have
        for the column. This value is displayed only if you use the
        <code class="literal">FULL</code> keyword.
      </p><p>
        <code class="literal">Comment</code> indicates any comment the column has.
        This value is displayed only if you use the
        <code class="literal">FULL</code> keyword.
      </p><a class="indexterm" name="id2234504"></a><p>
        <code class="literal">SHOW FIELDS</code> is a synonym for <code class="literal">SHOW
        COLUMNS</code>. You can also list a table's columns with the
        <span><strong class="command">mysqlshow <em class="replaceable"><code>db_name</code></em>
        <em class="replaceable"><code>tbl_name</code></em></strong></span> command.
      </p><p>
        The <code class="literal">DESCRIBE</code> statement provides information
        similar to <code class="literal">SHOW COLUMNS</code>. See
        <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax">Section 12.3.1, “<code class="literal">DESCRIBE</code> Syntax”</a>.
      </p><p>
        The <code class="literal">SHOW CREATE TABLE</code>, <code class="literal">SHOW TABLE
        STATUS</code>, and <code class="literal">SHOW INDEX</code> statements
        also provide information about tables. See
        <a href="sql-syntax.html#show" title="12.5.5. SHOW Syntax">Section 12.5.5, “<code class="literal">SHOW</code> Syntax”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-contributors"></a>12.5.5.7. <code class="literal">SHOW CONTRIBUTORS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2234605"></a><pre class="programlisting">SHOW CONTRIBUTORS
</pre><p>
        The <code class="literal">SHOW CONTRIBUTORS</code> statement displays
        information about the people who contribute to MySQL source or
        to causes that MySQL AB supports. For each contributor, it
        displays <code class="literal">Name</code>, <code class="literal">Location</code>,
        and <code class="literal">Comment</code> values.
      </p><p>
        This statement was added in MySQL 5.1.12.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-create-database"></a>12.5.5.8. <code class="literal">SHOW CREATE DATABASE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2234692"></a><a class="indexterm" name="id2234701"></a><pre class="programlisting">SHOW CREATE {DATABASE | SCHEMA} <em class="replaceable"><code>db_name</code></em>
</pre><p>
        Shows the <code class="literal">CREATE DATABASE</code> statement that
        creates the given database. <code class="literal">SHOW CREATE
        SCHEMA</code> is a synonym for <code class="literal">SHOW CREATE
        DATABASE</code>.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CREATE DATABASE test\G</code></strong>
*************************** 1. row ***************************
       Database: test
Create Database: CREATE DATABASE `test`
                 /*!40100 DEFAULT CHARACTER SET latin1 */

mysql&gt; <strong class="userinput"><code>SHOW CREATE SCHEMA test\G</code></strong>
*************************** 1. row ***************************
       Database: test
Create Database: CREATE DATABASE `test`
                 /*!40100 DEFAULT CHARACTER SET latin1 */
</pre><p>
        <code class="literal">SHOW CREATE DATABASE</code> quotes table and column
        names according to the value of the
        <code class="literal">SQL_QUOTE_SHOW_CREATE</code> option. See
        <a href="server-administration.html#server-session-variables" title="5.1.4. Session System Variables">Section 5.1.4, “Session System Variables”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-create-event"></a>12.5.5.9. <code class="literal">SHOW CREATE EVENT</code></h4></div></div></div><pre class="programlisting">SHOW CREATE EVENT <em class="replaceable"><code>event_name</code></em>
</pre><p>
        This statement displays the <code class="literal">CREATE EVENT</code>
        statement needed to re-create a given event. For example (using
        the same event <code class="literal">e_daily</code> defined and then
        altered in <a href="sql-syntax.html#show-events" title="12.5.5.18. SHOW EVENTS">Section 12.5.5.18, “<code class="literal">SHOW EVENTS</code>”</a>):
      </p><pre class="programlisting">mysql&gt; SHOW CREATE EVENT test.e_daily\G

*************************** 1. row ***************************
               Event: e_daily
        Create Event: CREATE EVENT e_daily
                        ON SCHEDULE EVERY 1 DAY
                        STARTS CURRENT_TIMESTAMP + INTERVAL 6 HOUR
                        ENABLE
                        COMMENT 'Saves total number of sessions and
                                 clears the table once per day.'
                        DO
                          BEGIN
                            INSERT INTO site_activity.totals (when, total)
                              SELECT CURRENT_TIMESTAMP, COUNT(*) 
                              FROM site_activity.sessions;
                            DELETE FROM site_activity.sessions;
                          END
character_set_client: latin1
collation_connection: latin1_swedish_ci
  Database Collation: latin1_swedish_ci
</pre><p>
        <code class="literal">character_set_client</code> is the session value of
        the <code class="literal">character_set_client</code> system variable when
        the event was created. <code class="literal">collation_connection</code>
        is the session value of the
        <code class="literal">collation_connection</code> system variable when the
        event was created. <code class="literal">Database Collation</code> is the
        collation of the database with which the event is associated.
        These columns were added in MySQL 5.1.21.
      </p><p>
        Note that the output reflects the current status of the event
        (<code class="literal">ENABLE</code>) rather than the status with which it
        was created.
      </p><p>
        This statement was implemented in MySQL 5.1.6.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-create-procedure"></a>12.5.5.10. <code class="literal">SHOW CREATE PROCEDURE</code> and <code class="literal">SHOW CREATE
        FUNCTION</code> Syntax</h4></div></div></div><a class="indexterm" name="id2234986"></a><a class="indexterm" name="id2234995"></a><pre class="programlisting">SHOW CREATE {PROCEDURE | FUNCTION} <em class="replaceable"><code>sp_name</code></em>
</pre><p>
        These statements are MySQL extensions. Similar to <code class="literal">SHOW
        CREATE TABLE</code>, they return the exact string that can be
        used to re-create the named routine. The statements require that
        you be the owner of the routine or have
        <code class="literal">SELECT</code> access to the
        <code class="literal">mysql.proc</code> table. If you do not have
        privileges for the routine itself, the value displayed for the
        <code class="literal">Create Procedure</code> or <code class="literal">Create
        Function</code> field will be <code class="literal">NULL</code>.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CREATE FUNCTION test.hello\G</code></strong>
*************************** 1. row ***************************
            Function: hello
            sql_mode:
     Create Function: CREATE FUNCTION `test`.`hello`(s CHAR(20)) »
                      RETURNS CHAR(50)
                      RETURN CONCAT('Hello, ',s,'!')
character_set_client: latin1
collation_connection: latin1_swedish_ci
  Database Collation: latin1_swedish_ci
</pre><p>
        <code class="literal">character_set_client</code> is the session value of
        the <code class="literal">character_set_client</code> system variable when
        the routine was created. <code class="literal">collation_connection</code>
        is the session value of the
        <code class="literal">collation_connection</code> system variable when the
        routine was created. <code class="literal">Database Collation</code> is
        the collation of the database with which the routine is
        associated. These columns were added in MySQL 5.1.21.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-create-table"></a>12.5.5.11. <code class="literal">SHOW CREATE TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2235152"></a><pre class="programlisting">SHOW CREATE TABLE <em class="replaceable"><code>tbl_name</code></em>
</pre><p>
        Shows the <code class="literal">CREATE TABLE</code> statement that creates
        the given table. This statement also works with views.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CREATE TABLE t\G</code></strong>
*************************** 1. row ***************************
       Table: t
Create Table: CREATE TABLE t (
  id INT(11) default NULL auto_increment,
  s char(60) default NULL,
  PRIMARY KEY (id)
) ENGINE=MyISAM

</pre><p>
        <code class="literal">SHOW CREATE TABLE</code> quotes table and column
        names according to the value of the
        <code class="literal">SQL_QUOTE_SHOW_CREATE</code> option. See
        <a href="server-administration.html#server-session-variables" title="5.1.4. Session System Variables">Section 5.1.4, “Session System Variables”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-create-trigger"></a>12.5.5.12. <code class="literal">SHOW CREATE TRIGGER</code> Syntax</h4></div></div></div><a class="indexterm" name="id2235272"></a><pre class="programlisting">SHOW CREATE TRIGGER <em class="replaceable"><code>trigger_name</code></em>
</pre><p>
        This statement shows a <code class="literal">CREATE TRIGGER</code>
        statement that creates the given trigger.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CREATE TRIGGER ins_sum</code></strong>\G
*************************** 1. row ***************************
               Trigger: ins_sum
              sql_mode: 
SQL Original Statement: CREATE DEFINER=`bob`@`localhost` TRIGGER ins_sum
                        BEFORE INSERT ON account
                        FOR EACH ROW SET @sum = @sum + NEW.amount
  character_set_client: latin1
  collation_connection: latin1_swedish_ci
    Database Collation: latin1_swedish_ci
</pre><p>
        This statement was added in MySQL 5.1.21.
      </p><p>
        You can also obtain information about trigger objects from
        <code class="literal">INFORMATION_SCHEMA</code>, which contains a
        <code class="literal">TRIGGERS</code> table. See
        <a href="information-schema.html#triggers-table" title="27.16. The INFORMATION_SCHEMA TRIGGERS Table">Section 27.16, “The <code class="literal">INFORMATION_SCHEMA TRIGGERS</code> Table”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-create-view"></a>12.5.5.13. <code class="literal">SHOW CREATE VIEW</code> Syntax</h4></div></div></div><a class="indexterm" name="id2235373"></a><pre class="programlisting">SHOW CREATE VIEW <em class="replaceable"><code>view_name</code></em>
</pre><p>
        This statement shows a <code class="literal">CREATE VIEW</code> statement
        that creates the given view.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CREATE VIEW v\G</code></strong>
*************************** 1. row ***************************
                View: v
         Create View: CREATE ALGORITHM=UNDEFINED
                      DEFINER=`bob`@`localhost`
                      SQL SECURITY DEFINER VIEW
                      `v` AS select 1 AS `a`,2 AS `b`
character_set_client: latin1
collation_connection: latin1_swedish_ci
</pre><p>
        <code class="literal">character_set_client</code> is the session value of
        the <code class="literal">character_set_client</code> system variable when
        the routine was created. <code class="literal">collation_connection</code>
        is the session value of the
        <code class="literal">collation_connection</code> system variable when the
        routine was created. These columns were added in MySQL 5.1.21.
      </p><p>
        Use of <code class="literal">SHOW CREATE VIEW</code> requires the
        <code class="literal">SHOW VIEW</code> privilege and the
        <code class="literal">SELECT</code> privilege for the view in question.
      </p><p>
        You can also obtain information about view objects from
        <code class="literal">INFORMATION_SCHEMA</code>, which contains a
        <code class="literal">VIEWS</code> table. See
        <a href="information-schema.html#views-table" title="27.15. The INFORMATION_SCHEMA VIEWS Table">Section 27.15, “The <code class="literal">INFORMATION_SCHEMA VIEWS</code> Table”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-databases"></a>12.5.5.14. <code class="literal">SHOW DATABASES</code> Syntax</h4></div></div></div><a class="indexterm" name="id2235520"></a><a class="indexterm" name="id2235529"></a><pre class="programlisting">SHOW {DATABASES | SCHEMAS}
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        <code class="literal">SHOW DATABASES</code> lists the databases on the
        MySQL server host. <code class="literal">SHOW SCHEMAS</code> is a synonym
        for <code class="literal">SHOW DATABASES</code>. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present,
        indicates which database names to match. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="27.27. Extensions to SHOW Statements">Section 27.27, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><p>
        You see only those databases for which you have some kind of
        privilege, unless you have the global <code class="literal">SHOW
        DATABASES</code> privilege. You can also get this list using
        the <span><strong class="command">mysqlshow</strong></span> command.
      </p><p>
        If the server was started with the
        <code class="option">--skip-show-database</code> option, you cannot use
        this statement at all unless you have the <code class="literal">SHOW
        DATABASES</code> privilege.
      </p><p>
        <code class="literal">SHOW SCHEMAS</code> can also be used.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-engine"></a>12.5.5.15. <code class="literal">SHOW ENGINE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2235671"></a><a class="indexterm" name="id2235680"></a><a class="indexterm" name="id2235689"></a><a class="indexterm" name="id2235698"></a><pre class="programlisting">SHOW ENGINE <em class="replaceable"><code>engine_name</code></em> {STATUS | MUTEX}
</pre><p>
        <code class="literal">SHOW ENGINE</code> displays operational information
        about a storage engine. The following statements currently are
        supported:
      </p><pre class="programlisting">SHOW ENGINE INNODB STATUS
SHOW ENGINE INNODB MUTEX
SHOW ENGINE {NDB | NDBCLUSTER} STATUS
</pre><p>
        Older (and now deprecated) synonyms are <code class="literal">SHOW INNODB
        STATUS</code> for <code class="literal">SHOW ENGINE INNODB
        STATUS</code> and <code class="literal">SHOW MUTEX STATUS</code> for
        <code class="literal">SHOW ENGINE INNODB MUTEX</code>.
      </p><p>
        In MySQL 5.0, <code class="literal">SHOW ENGINE INNODB
        MUTEX</code> is invoked as <code class="literal">SHOW MUTEX
        STATUS</code>. The latter statement displays similar
        information but in a somewhat different output format.
      </p><p>
        <code class="literal">SHOW ENGINE BDB LOGS</code> formerly displayed
        status information about <code class="literal">BDB</code> log files. As of
        MySQL 5.1.12, the <code class="literal">BDB</code> storage engine is not
        supported, and this statement produces a warning.
      </p><p>
        <code class="literal">SHOW ENGINE INNODB STATUS</code> displays extensive
        information about the state of the <code class="literal">InnoDB</code>
        storage engine.
      </p><p>
        The <code class="literal">InnoDB</code> Monitors provide additional
        information about <code class="literal">InnoDB</code> processing. See
        <a href="storage-engines.html#innodb-monitor" title="13.5.11.1. SHOW ENGINE INNODB STATUS and the
        InnoDB Monitors">Section 13.5.11.1, “<code class="literal">SHOW ENGINE INNODB STATUS</code> and the
        <code class="literal">InnoDB</code> Monitors”</a>.
      </p><p>
        <code class="literal">SHOW ENGINE INNODB MUTEX</code> displays
        <code class="literal">InnoDB</code> mutex statistics. From MySQL 5.1.2 to
        5.1.14, the statement displays the following output fields:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Type</code>
          </p><p>
            Always <code class="literal">InnoDB</code>.
          </p></li><li><p>
            <code class="literal">Name</code>
          </p><p>
            The mutex name and the source file where it is implemented.
            Example: <code class="literal">&amp;pool-&gt;mutex:mem0pool.c</code>
          </p><p>
            The mutex name indicates its purpose. For example, the
            <code class="literal">log_sys</code> mutex is used by the
            <code class="literal">InnoDB</code> logging subsystem and indicates
            how intensive logging activity is. The
            <code class="literal">buf_pool</code> mutex protects the
            <code class="literal">InnoDB</code> buffer pool.
          </p></li><li><p>
            <code class="literal">Status</code>
          </p><p>
            The mutex status. The fields contains several values:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <code class="literal">count</code> indicates how many times the
                mutex was requested.
              </p></li><li><p>
                <code class="literal">spin_waits</code> indicates how many times
                the spinlock had to run.
              </p></li><li><p>
                <code class="literal">spin_rounds</code> indicates the number of
                spinlock rounds. (<code class="literal">spin_rounds</code> divided
                by <code class="literal">spin_waits</code> provides the average
                round count.)
              </p></li><li><p>
                <code class="literal">os_waits</code> indicates the number of
                operating system waits. This occurs when the spinlock
                did not work (the mutex was not locked during the
                spinlock and it was necessary to yield to the operating
                system and wait).
              </p></li><li><p>
                <code class="literal">os_yields</code> indicates the number of
                times a the thread trying to lock a mutex gave up its
                timeslice and yielded to the operating system (on the
                presumption that allowing other threads to run will free
                the mutex so that it can be locked).
              </p></li><li><p>
                <code class="literal">os_wait_times</code> indicates the amount of
                time (in ms) spent in operating system waits, if the
                <code class="literal">timed_mutexes</code> system variable is 1
                (<code class="literal">ON</code>). If
                <code class="literal">timed_mutexes</code> is 0
                (<code class="literal">OFF</code>), timing is disabled, so
                <code class="literal">os_wait_times</code> is 0.
                <code class="literal">timed_mutexes</code> is off by default.
              </p></li></ul></div></li></ul></div><p>
        From MySQL 5.1.15 on, the statement displays the following
        output fields:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Type</code>
          </p><p>
            Always <code class="literal">InnoDB</code>.
          </p></li><li><p>
            <code class="literal">Name</code>
          </p><p>
            The source file where the mutex is implemented, and the line
            number in the file where the mutex is created. The line
            number may change depending on your version of MySQL.
          </p></li><li><p>
            <code class="literal">Status</code>
          </p><p>
            This field displays the same values as previously described
            (<code class="literal">count</code>, <code class="literal">spin_waits</code>,
            <code class="literal">spin_rounds</code>, <code class="literal">os_waits</code>,
            <code class="literal">os_yields</code>,
            <code class="literal">os_wait_times</code>), but only if
            <code class="literal">UNIV_DEBUG</code> was defined at MySQL
            compilation time (for example, in
            <code class="filename">include/univ.h</code> in the
            <code class="literal">InnoDB</code> part of the MySQL source tree). If
            <code class="literal">UNIV_DEBUG</code> was not defined, the statement
            displays only the <code class="literal">os_waits</code> value. In the
            latter case (without <code class="literal">UNIV_DEBUG</code>), the
            information on which the output is based is insufficient to
            distinguish regular mutexes and mutexes that protect
            rw-locks (which allow multiple readers or a single writer).
            Consequently, the output may appear to contain multiple rows
            for the same mutex.
          </p></li></ul></div><p>
        Information from this statement can be used to diagnose system
        problems. For example, large values of
        <code class="literal">spin_waits</code> and <code class="literal">spin_rounds</code>
        may indicate scalability problems.
      </p><p><a name="show-engine-ndb-status"></a>
        If the server has the <code class="literal">NDBCLUSTER</code> storage
        engine enabled, <code class="literal">SHOW ENGINE NDB STATUS</code>
        displays cluster status information such as the number of
        connected data nodes, the cluster connectstring, and cluster
        binlog epochs, as well as counts of various Cluster API objects
        created by the MySQL Server when connected to the cluster.
        Sample output from this statement is shown here:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW ENGINE NDB STATUS;</code></strong>
+------------+-----------------------+--------------------------------------------------+
| Type       | Name                  | Status                                           |
+------------+-----------------------+--------------------------------------------------+
| ndbcluster | connection            | cluster_node_id=7, 
  connected_host=192.168.0.103, connected_port=1186, number_of_data_nodes=4, 
  number_of_ready_data_nodes=3, connect_count=0                                         |
| ndbcluster | NdbTransaction        | created=6, free=0, sizeof=212                    |
| ndbcluster | NdbOperation          | created=8, free=8, sizeof=660                    |
| ndbcluster | NdbIndexScanOperation | created=1, free=1, sizeof=744                    |
| ndbcluster | NdbIndexOperation     | created=0, free=0, sizeof=664                    |
| ndbcluster | NdbRecAttr            | created=1285, free=1285, sizeof=60               |
| ndbcluster | NdbApiSignal          | created=16, free=16, sizeof=136                  |
| ndbcluster | NdbLabel              | created=0, free=0, sizeof=196                    |
| ndbcluster | NdbBranch             | created=0, free=0, sizeof=24                     |
| ndbcluster | NdbSubroutine         | created=0, free=0, sizeof=68                     |
| ndbcluster | NdbCall               | created=0, free=0, sizeof=16                     |
| ndbcluster | NdbBlob               | created=1, free=1, sizeof=264                    |
| ndbcluster | NdbReceiver           | created=4, free=0, sizeof=68                     |
| ndbcluster | binlog                | latest_epoch=155467, latest_trans_epoch=148126, 
  latest_received_binlog_epoch=0, latest_handled_binlog_epoch=0, 
  latest_applied_binlog_epoch=0                                                         |
+------------+-----------------------+--------------------------------------------------+
</pre><p>
        The rows with <code class="literal">connection</code> and
        <code class="literal">binlog</code> in the <code class="literal">Name</code> column
        were added to the output of this statement in MySQL 5.1. The
        <code class="literal">Status</code> column in each of these rows provides
        information about the MySQL server's connection to the cluster
        and about the cluster binary log's status, respectively. The
        <code class="literal">Status</code> information is in the form of
        comma-delimited set of name/value pairs.
      </p><p>
        The <code class="literal">connection</code> row's
        <code class="literal">Status</code> column contains the name/value pairs
        described in the following table:
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Name</strong></span></td><td><span class="bold"><strong>Value</strong></span></td></tr><tr><td><code class="literal">cluster_node_id</code></td><td>The node ID of the MySQL server in the cluster</td></tr><tr><td><code class="literal">connected_host</code></td><td>The hostname or IP address of the cluster management server to which the
                MySQL server is connected</td></tr><tr><td><code class="literal">connected_port</code></td><td>The port used by the MySQL server to connect to the management server
                (<code class="literal">connected_host</code>)</td></tr><tr><td><code class="literal">number_of_data_nodes</code></td><td>The number of data nodes configured for the cluster (that is, the number
                of <code class="literal">[ndbd]</code> sections in the cluster
                <code class="filename">config.ini</code> file)</td></tr><tr><td><code class="literal">number_of_ready_data_nodes</code></td><td>The number of data nodes in the cluster that are actually running</td></tr><tr><td><code class="literal">connect_count</code></td><td>The number of times this <span><strong class="command">mysqld</strong></span> has connected or
                reconnected to cluster data nodes</td></tr></tbody></table></div><p>
        The <code class="literal">binlog</code> row's <code class="literal">Status</code>
        column contains information relating to MySQL Cluster
        Replication. The name/value pairs it contains are described in
        the following table:
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Name</strong></span></td><td><span class="bold"><strong>Value</strong></span></td></tr><tr><td><code class="literal">latest_epoch</code></td><td>The most recent epoch most recently run on this MySQL server (that is,
                the sequence number of the most recent transaction run
                on the server)</td></tr><tr><td><code class="literal">latest_trans_epoch</code></td><td>The most recent epoch processed by the cluster's data nodes</td></tr><tr><td><code class="literal">latest_received_binlog_epoch</code></td><td>The most recent epoch received by the binlog thread</td></tr><tr><td><code class="literal">latest_handled_binlog_epoch</code></td><td>The most recent epoch processed by the binlog thread (for writing to the
                binlog)</td></tr><tr><td><code class="literal">latest_applied_binlog_epoch</code></td><td>The most recent epoch actually written to the binlog</td></tr></tbody></table></div><p>
        See <a href="mysql-cluster.html#mysql-cluster-replication" title="20.11. MySQL Cluster Replication">Section 20.11, “MySQL Cluster Replication”</a>, for more
        information.
      </p><p>
        The remaining rows from the output of <code class="literal">SHOW ENGINE NDB
        STATUS</code> which are most likely to prove useful in
        monitoring the cluster are listed here by
        <code class="literal">Name</code>:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">NdbTransaction</code>: The number and size of
            <code class="literal">NdbTransaction</code> objects that have been
            created. An <code class="literal">NdbTransaction</code> is created
            each time a table schema operation (such as <code class="literal">CREATE
            TABLE</code> or <code class="literal">ALTER TABLE</code>) is
            performed on an <code class="literal">NDB</code> table.
          </p></li><li><p>
            <code class="literal">NdbOperation</code>: The number and size of
            <code class="literal">NdbOperation</code> objects that have been
            created.
          </p></li><li><p>
            <code class="literal">NdbIndexScanOperation</code>: The number and
            size of <code class="literal">NdbIndexScanOperation</code> objects
            that have been created.
          </p></li><li><p>
            <code class="literal">NdbIndexOperation</code>: The number and size of
            <code class="literal">NdbIndexOperation</code> objects that have been
            created.
          </p></li><li><p>
            <code class="literal">NdbRecAttr</code>: The number and size of
            <code class="literal">NdbRecAttr</code> objects that have been
            created. In general, one of these is created each time a
            data manipulation statement is performed by an SQL node.
          </p></li><li><p>
            <code class="literal">NdbBlob</code>: The number and size of
            <code class="literal">NdbBlob</code> objects that have been created.
            An <code class="literal">NdbBlob</code> is created for each new
            operation involving a <code class="literal">BLOB</code> column in an
            <code class="literal">NDB</code> table.
          </p></li><li><p>
            <code class="literal">NdbReceiver</code>: The number and size of any
            <code class="literal">NdbReceiver</code> object that have been
            created. The number in the <code class="literal">created</code> column
            is the same as the number of data nodes in the cluster to
            which the MySQL server has connected.
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="literal">SHOW ENGINE NDB STATUS</code> returns an empty
          result if no operations involving <code class="literal">NDB</code>
          tables have been performed during the current session by the
          MySQL client accessing the SQL node on which this statement is
          run.
        </p></div><p class="mnmas"><b>MySQL Enterprise</b>
          The <code class="literal">SHOW ENGINE
          <em class="replaceable"><code>engine_name</code></em> STATUS</code>
          statement provides valuable information about the state of
          your server. For expert interpretation of this information,
          subscribe to the MySQL Enterprise Monitor. For more
          information see <a href="advisors.html" target="_top">advisors.html</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-engines"></a>12.5.5.16. <code class="literal">SHOW ENGINES</code> Syntax</h4></div></div></div><a class="indexterm" name="id2236900"></a><a class="indexterm" name="id2236909"></a><a class="indexterm" name="id2236918"></a><pre class="programlisting">SHOW [STORAGE] ENGINES
</pre><p>
        <code class="literal">SHOW ENGINES</code> displays status information
        about the server's storage engines. This is particularly useful
        for checking whether a storage engine is supported, or to see
        what the default engine is. <code class="literal">SHOW TABLE TYPES</code>
        is a deprecated synonym.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW ENGINES\G</code></strong>
*************************** 1. row ***************************
      Engine: MEMORY
     Support: YES
     Comment: Hash based, stored in memory, useful for temporary tables
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 2. row ***************************
      Engine: MyISAM
     Support: DEFAULT
     Comment: Default engine as of MySQL 3.23 with great performance
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 3. row ***************************
      Engine: InnoDB
     Support: YES
     Comment: Supports transactions, row-level locking, and foreign keys
Transactions: YES
          XA: YES
  Savepoints: YES
*************************** 4. row ***************************
      Engine: EXAMPLE
     Support: YES
     Comment: Example storage engine
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 5. row ***************************
      Engine: ARCHIVE
     Support: YES
     Comment: Archive storage engine
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 6. row ***************************
      Engine: CSV
     Support: YES
     Comment: CSV storage engine
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 7. row ***************************
      Engine: BLACKHOLE
     Support: YES
     Comment: /dev/null storage engine (anything you write »
              to it disappears)
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 8. row ***************************
      Engine: FEDERATED
     Support: YES
     Comment: Federated MySQL storage engine
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 9. row ***************************
      Engine: MRG_MYISAM
     Support: YES
     Comment: Collection of identical MyISAM tables
Transactions: NO
          XA: NO
  Savepoints: NO
</pre><p>
        The output from <code class="literal">SHOW ENGINES</code> may vary
        according to the MySQL version used and other factors. The
        values shown in the <code class="literal">Support</code> column indicate
        the server's level of support for the storage engine, as shown
        here:
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Value</strong></span></td><td><span class="bold"><strong>Meaning</strong></span></td></tr><tr><td><code class="literal">YES</code></td><td>The engine is supported and is active</td></tr><tr><td><code class="literal">DEFAULT</code></td><td>Like <code class="literal">YES</code>, plus this is the default engine</td></tr><tr><td><code class="literal">NO</code></td><td>The engine is not supported</td></tr><tr><td><code class="literal">DISABLED</code></td><td>The engine is supported but has been disabled</td></tr></tbody></table></div><p>
        A value of <code class="literal">NO</code> means that the server was
        compiled without support for the engine, so it cannot be
        activated at runtime.
      </p><p>
        A value of <code class="literal">DISABLED</code> occurs either because the
        server was started with an option that disables the engine, or
        because not all options required to enable it were given. In the
        latter case, the error log file should contain a reason
        indicating why the option is disabled. See
        <a href="server-administration.html#error-log" title="5.2.2. The Error Log">Section 5.2.2, “The Error Log”</a>.
      </p><p>
        You might also see <code class="literal">DISABLED</code> for a storage
        engine if the server was compiled to support it, but was started
        with a
        <code class="option">--skip-<em class="replaceable"><code>engine_name</code></em></code>
        option. For the <code class="literal">NDBCLUSTER</code> storage engine,
        <code class="literal">DISABLED</code> means the server was compiled with
        support for MySQL Cluster, but was not started with the
        <code class="option">--ndbcluster</code> option.
      </p><p>
        All MySQL servers support <code class="literal">MyISAM</code> tables,
        because <code class="literal">MyISAM</code> is the default storage engine.
        It is not possible to disable <code class="literal">MyISAM</code>.
      </p><p>
        The <code class="literal">Transactions</code>, <code class="literal">XA</code>, and
        <code class="literal">Savepoints</code> columns were added in MySQL 5.1.2.
        They indicate whether the storage engine supports transactions,
        XA transactions, and savepoints, respectively.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-errors"></a>12.5.5.17. <code class="literal">SHOW ERRORS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2237251"></a><pre class="programlisting">SHOW ERRORS [LIMIT [<em class="replaceable"><code>offset</code></em>,] <em class="replaceable"><code>row_count</code></em>]
SHOW COUNT(*) ERRORS
</pre><p>
        This statement is similar to <code class="literal">SHOW WARNINGS</code>,
        except that instead of displaying errors, warnings, and notes,
        it displays only errors.
      </p><p>
        The <code class="literal">LIMIT</code> clause has the same syntax as for
        the <code class="literal">SELECT</code> statement. See
        <a href="sql-syntax.html#select" title="12.2.7. SELECT Syntax">Section 12.2.7, “<code class="literal">SELECT</code> Syntax”</a>.
      </p><p>
        The <code class="literal">SHOW COUNT(*) ERRORS</code> statement displays
        the number of errors. You can also retrieve this number from the
        <code class="literal">error_count</code> variable:
      </p><pre class="programlisting">SHOW COUNT(*) ERRORS;
SELECT @@error_count;
</pre><p>
        For more information, see <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax">Section 12.5.5.37, “<code class="literal">SHOW WARNINGS</code> Syntax”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-events"></a>12.5.5.18. <code class="literal">SHOW EVENTS</code></h4></div></div></div><pre class="programlisting">SHOW EVENTS [FROM <em class="replaceable"><code>schema_name</code></em>]
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        In its simplest form, <code class="literal">SHOW EVENTS</code> lists all
        of the events in the current schema:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CURRENT_USER(), SCHEMA();</code></strong>
+----------------+----------+
| CURRENT_USER() | SCHEMA() |
+----------------+----------+
| jon@ghidora    | myschema |
+----------------+----------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW EVENTS\G</code></strong>
*************************** 1. row ***************************
                  Db: myschema
                Name: e_daily
             Definer: jon@ghidora
           Time zone: SYSTEM
                Type: RECURRING
          Execute at: NULL
      Interval value: 10
      Interval field: INTERVAL_SECOND
              Starts: 2006-02-09 10:41:23
                Ends: 0000-00-00 00:00:00
              Status: ENABLED
          Originator: 0
character_set_client: latin1
collation_connection: latin1_swedish_ci
  Database Collation: latin1_swedish_ci
</pre><p>
        The <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present,
        indicates which event names to match. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="27.27. Extensions to SHOW Statements">Section 27.27, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><p>
        The columns in the output of <code class="literal">SHOW EVENTS</code>
        — which are similar to, but not identical to the columns
        in the <code class="literal">INFORMATION_SCHEMA.EVENTS</code> table
        — are shown here:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Db</code>: The schema (database) on which the
            event is defined.
          </p></li><li><p>
            <code class="literal">Name</code>: The name of the event.
          </p></li><li><p>
            <code class="literal">Time zone</code>: The time zone in effect when
            schedule for the event was last modified. If the event's
            schedule has not been modified since the event was created,
            then this is the time zone that was in effect at the event's
            creation. The default value is <code class="literal">SYSTEM</code>.
          </p><p>
            This column was added in MySQL 5.1.17. See
            <a href="news.html#news-5-1-17" title="C.1.13. Changes in  MySQL 5.1.17 (04 April 2007)">Section C.1.13, “Changes in  MySQL 5.1.17 (04 April 2007)”</a>, for important information if
            you are using the Event Scheduler and are upgrading from
            MySQL 5.1.16 (or earlier) to MySQL 5.1.17 (or later).
          </p></li><li><p>
            <code class="literal">Definer</code>: The user account
            (<code class="literal"><em class="replaceable"><code>username</code></em>@<em class="replaceable"><code>hostname</code></em></code>)
            which created the event.
          </p></li><li><p>
            <code class="literal">Type</code>: One of the two values <code class="literal">ONE
            TIME</code> (transient) or <code class="literal">RECURRING</code>.
          </p></li><li><p>
            <code class="literal">Execute At</code>: The date and time when a
            transient event is set to execute. Shown as a
            <code class="literal">DATETIME</code> value.
          </p><p>
            For a recurring event, the value of this column is always
            <code class="literal">NULL</code>.
          </p></li><li><p>
            <code class="literal">Interval Value</code>: For a recurring event,
            the number of intervals to wait between event executions.
          </p><p>
            For a transient event, the value of this column is always
            <code class="literal">NULL</code>.
          </p></li><li><p>
            <code class="literal">Interval Field</code>: The time units used for
            the interval which a recurring event waits before repeating.
          </p><p>
            For a transient event, the value of this column is always
            <code class="literal">NULL</code>.
          </p></li><li><p>
            <code class="literal">Starts</code>: The start date and time for a
            recurring event. This is displayed as a
            <code class="literal">DATETIME</code> value, and is empty if no start
            date and time are defined for the event. (Prior to MySQL
            5.1.8, it defaulted to <code class="literal">'0000-00-00
            00:00:00'</code> in such cases.)
          </p><p>
            For a transient event, the value of this column is always
            <code class="literal">NULL</code>.
          </p></li><li><p>
            <code class="literal">Ends</code>: The end date and time for a
            recurring event. This is displayed as a
            <code class="literal">DATETIME</code> value, and defaults to
            <code class="literal">'0000-00-00 00:00:00'</code> if no end date and
            time is defined for the event.
          </p><p>
            For a transient event, the value of this column is always
            <code class="literal">NULL</code>.
          </p></li><li><p>
            <code class="literal">Status</code>: The event status. One of
            <code class="literal">ENABLED</code>, <code class="literal">DISABLED</code>, or
            <code class="literal">SLAVESIDE_DISABLED</code>.
          </p><p>
            <code class="literal">SLAVESIDE_DISABLED</code> was added in MySQL
            5.1.18. This value indicates that the creation of the event
            occurred on another MySQL server acting as a replication
            master and replicated to the current MySQL server which is
            acting as a slave, but the event is not presently being
            executed on the slave.
          </p></li><li><p>
            <code class="literal">Originator</code>: The server ID of the MySQL
            server on which the event was created. Defaults to 0. This
            column was added in MySQL 5.1.18.
          </p></li><li><p>
            <code class="literal">character_set_client</code> is the session value
            of the <code class="literal">character_set_client</code> system
            variable when the routine was created.
            <code class="literal">collation_connection</code> is the session value
            of the <code class="literal">collation_connection</code> system
            variable when the routine was created. <code class="literal">Database
            Collation</code> is the collation of the database with
            which the routine is associated. These columns were added in
            MySQL 5.1.21.
          </p></li></ul></div><p>
        For more information about <code class="literal">SLAVE_DISABLED</code> and
        the <code class="literal">Originator</code> column, see
        <a href="replication.html#replication-features-invoked" title="19.3.1.5. Replication of Invoked Features">Section 19.3.1.5, “Replication of Invoked Features”</a>.
      </p><p>
        Note that the action statement is not shown in the output of
        <code class="literal">SHOW EVENTS</code>.
      </p><p>
        Prior to MySQL 5.1.17, the values displayed for
        <code class="literal">Starts</code> and <code class="literal">Ends</code> (other
        than <code class="literal">'0000-00-00 00:00:00'</code>) were shown using
        Universal Time (<a href="http://bugs.mysql.com/16420" target="_top">Bug#16420</a>). Beginning with MySQL 5.1.17, these
        times are all given in terms of local time as determined by the
        MySQL server's <code class="literal">time_zone</code> setting. See also
        <a href="information-schema.html#events-table" title="27.20. The INFORMATION_SCHEMA EVENTS Table">Section 27.20, “The <code class="literal">INFORMATION_SCHEMA EVENTS</code> Table”</a>.
      </p><p>
        To see events for a different schema, you can use the
        <code class="literal">FROM</code> clause. For example, if the
        <code class="literal">test</code> schema had been selected in the
        preceding example, you could view events defined on
        <code class="literal">myschema</code> using the following statement:
      </p><pre class="programlisting">SHOW EVENTS FROM myschema;
</pre><p>
        You can filter the list returned by this statement on the event
        name using <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> plus a
        pattern.
      </p><p>
        This statement was added in MySQL 5.1.6.
      </p><p>
        See also <a href="information-schema.html#events-table" title="27.20. The INFORMATION_SCHEMA EVENTS Table">Section 27.20, “The <code class="literal">INFORMATION_SCHEMA EVENTS</code> Table”</a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          In MySQL 5.1.11 and earlier, <code class="literal">SHOW EVENTS</code>
          displayed only those events for which the current user was the
          definer, and the <code class="literal">SHOW FULL EVENTS</code> statement
          was used for viewing events defined by all users on a given
          schema. <code class="literal">SHOW FULL EVENTS</code> was removed in
          MySQL 5.1.12.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-grants"></a>12.5.5.19. <code class="literal">SHOW GRANTS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2237976"></a><a class="indexterm" name="id2237988"></a><a class="indexterm" name="id2237997"></a><pre class="programlisting">SHOW GRANTS [FOR <em class="replaceable"><code>user</code></em>]
</pre><p>
        This statement lists the <code class="literal">GRANT</code> statement or
        statements that must be issued to duplicate the privileges that
        are granted to a MySQL user account. The account is named using
        the same format as for the <code class="literal">GRANT</code> statement;
        for example, <code class="literal">'jeffrey'@'localhost'</code>. If you
        specify only the username part of the account name, a hostname
        part of <code class="literal">'%'</code> is used. For additional
        information about specifying account names, see
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW GRANTS FOR 'root'@'localhost';</code></strong>
+---------------------------------------------------------------------+
| Grants for root@localhost                                           |
+---------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION |
+---------------------------------------------------------------------+
</pre><p>
        To list the privileges granted to the account that you are using
        to connect to the server, you can use any of the following
        statements:
      </p><pre class="programlisting">SHOW GRANTS;
SHOW GRANTS FOR CURRENT_USER;
SHOW GRANTS FOR CURRENT_USER();
</pre><p>
        As of MySQL 5.1.12, if <code class="literal">SHOW GRANTS FOR
        CURRENT_USER</code> (or any of the equivalent syntaxes) is
        used in <code class="literal">DEFINER</code> context, such as within a
        stored procedure that is defined with <code class="literal">SQL SECURITY
        DEFINER</code>), the grants displayed are those of the
        definer and not the invoker.
      </p><p>
        <code class="literal">SHOW GRANTS</code> displays only the privileges
        granted explicitly to the named account. Other privileges might
        be available to the account, but they are not displayed. For
        example, if an anonymous account exists, the named account might
        be able to use its privileges, but <code class="literal">SHOW
        GRANTS</code> will not display them.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-index"></a>12.5.5.20. <code class="literal">SHOW INDEX</code> Syntax</h4></div></div></div><a class="indexterm" name="id2238156"></a><a class="indexterm" name="id2238175"></a><a class="indexterm" name="id2238184"></a><pre class="programlisting">SHOW INDEX FROM <em class="replaceable"><code>tbl_name</code></em> [FROM <em class="replaceable"><code>db_name</code></em>]
</pre><p>
        <code class="literal">SHOW INDEX</code> returns table index information.
        The format resembles that of the
        <code class="literal">SQLStatistics</code> call in ODBC.
      </p><p>
        <code class="literal">SHOW INDEX</code> returns the following fields:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Table</code>
          </p><p>
            The name of the table.
          </p></li><li><p>
            <code class="literal">Non_unique</code>
          </p><p>
            0 if the index cannot contain duplicates, 1 if it can.
          </p></li><li><p>
            <code class="literal">Key_name</code>
          </p><p>
            The name of the index.
          </p></li><li><p>
            <code class="literal">Seq_in_index</code>
          </p><p>
            The column sequence number in the index, starting with 1.
          </p></li><li><p>
            <code class="literal">Column_name</code>
          </p><p>
            The column name.
          </p></li><li><p>
            <a class="indexterm" name="id2238343"></a>

            <code class="literal">Collation</code>
          </p><p>
            How the column is sorted in the index. In MySQL, this can
            have values “<span class="quote"><code class="literal">A</code></span>” (Ascending)
            or <code class="literal">NULL</code> (Not sorted).
          </p></li><li><p>
            <a class="indexterm" name="id2238388"></a>

            <code class="literal">Cardinality</code>
          </p><p>
            An estimate of the number of unique values in the index.
            This is updated by running <code class="literal">ANALYZE TABLE</code>
            or <span><strong class="command">myisamchk -a</strong></span>.
            <code class="literal">Cardinality</code> is counted based on
            statistics stored as integers, so the value is not
            necessarily exact even for small tables. The higher the
            cardinality, the greater the chance that MySQL uses the
            index when doing joins.
          </p></li><li><p>
            <code class="literal">Sub_part</code>
          </p><p>
            The number of indexed characters if the column is only
            partly indexed, <code class="literal">NULL</code> if the entire column
            is indexed.
          </p></li><li><p>
            <code class="literal">Packed</code>
          </p><p>
            Indicates how the key is packed. <code class="literal">NULL</code> if
            it is not.
          </p></li><li><p>
            <code class="literal">Null</code>
          </p><p>
            Contains <code class="literal">YES</code> if the column may contain
            <code class="literal">NULL</code>. If not, the column contains
            <code class="literal">NO</code>.
          </p><p>
            Contains <code class="literal">YES</code> if the column may contain
            <code class="literal">NULL</code> values and <code class="literal">''</code> if
            not.
          </p></li><li><p>
            <code class="literal">Index_type</code>
          </p><p>
            The index method used (<code class="literal">BTREE</code>,
            <code class="literal">FULLTEXT</code>, <code class="literal">HASH</code>,
            <code class="literal">RTREE</code>).
          </p></li><li><p>
            <code class="literal">Comment</code>
          </p><p>
            Various remarks.
          </p></li></ul></div><p>
        You can use
        <em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>tbl_name</code></em>
        as an alternative to the
        <code class="literal"><em class="replaceable"><code>tbl_name</code></em> FROM
        <em class="replaceable"><code>db_name</code></em></code> syntax. These two
        statements are equivalent:
      </p><pre class="programlisting">SHOW INDEX FROM mytable FROM mydb;
SHOW INDEX FROM mydb.mytable;
</pre><p>
        <code class="literal">SHOW KEYS</code> is a synonym for <code class="literal">SHOW
        INDEX</code>. You can also list a table's indexes with the
        <span><strong class="command">mysqlshow -k <em class="replaceable"><code>db_name</code></em>
        <em class="replaceable"><code>tbl_name</code></em></strong></span> command.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-innodb-status"></a>12.5.5.21. <code class="literal">SHOW INNODB STATUS</code> Syntax</h4></div></div></div><pre class="programlisting">SHOW INNODB STATUS
</pre><p>
        In MySQL 5.1, this is a deprecated synonym for
        <code class="literal">SHOW ENGINE INNODB STATUS</code>. See
        <a href="sql-syntax.html#show-engine" title="12.5.5.15. SHOW ENGINE Syntax">Section 12.5.5.15, “<code class="literal">SHOW ENGINE</code> Syntax”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-master-status"></a>12.5.5.22. <code class="literal">SHOW MASTER STATUS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2238736"></a><pre class="programlisting">SHOW MASTER STATUS
</pre><p>
        Provides status information about the binary log files of the
        master. Example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW MASTER STATUS;</code></strong>
+---------------+----------+--------------+------------------+
| File          | Position | Binlog_Do_DB | Binlog_Ignore_DB |
+---------------+----------+--------------+------------------+
| mysql-bin.003 | 73       | test         | manual,mysql     |
+---------------+----------+--------------+------------------+
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-open-tables"></a>12.5.5.23. <code class="literal">SHOW OPEN TABLES</code> Syntax</h4></div></div></div><a class="indexterm" name="id2238808"></a><a class="indexterm" name="id2238828"></a><pre class="programlisting">SHOW OPEN TABLES [FROM <em class="replaceable"><code>db_name</code></em>]
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        <code class="literal">SHOW OPEN TABLES</code> lists the
        non-<code class="literal">TEMPORARY</code> tables that are currently open
        in the table cache. See <a href="optimization.html#table-cache" title="7.4.8. How MySQL Opens and Closes Tables">Section 7.4.8, “How MySQL Opens and Closes Tables”</a>. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="27.27. Extensions to SHOW Statements">Section 27.27, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><p>
        The <code class="literal">FROM</code> and
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clauses may be used
        beginning with MySQL 5.1.24. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present,
        indicates which table names to match. The
        <code class="literal">FROM</code> clause, if present, restricts the tables
        shown to those present in the <em class="replaceable"><code>db_name</code></em>
        database.
      </p><p>
        <code class="literal">SHOW OPEN TABLES</code> returns the following
        columns:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Database</code>
          </p><p>
            The database containing the table.
          </p></li><li><p>
            <code class="literal">Table</code>
          </p><p>
            The table name.
          </p></li><li><p>
            <code class="literal">In_use</code>
          </p><p>
            The number of table locks or lock requests there are for the
            table. For example, if one client acquires a lock for a
            table using <code class="literal">LOCK TABLE t1 WRITE</code>,
            <code class="literal">In_use</code> will be 1. If another client
            issues <code class="literal">LOCK TABLE t1 WRITE</code> while the
            table remains locked, the client will block waiting for the
            lock, but the lock request causes <code class="literal">In_use</code>
            to be 2. If the count is zero, the table is open but not
            currently being used.
          </p></li><li><p>
            <code class="literal">Name_locked</code>
          </p><p>
            Whether the table name is locked. Name locking is used for
            operations such as dropping or renaming tables.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-plugins"></a>12.5.5.24. <code class="literal">SHOW PLUGINS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2239063"></a><pre class="programlisting">SHOW PLUGINS
</pre><p>
        <code class="literal">SHOW PLUGINS</code> displays information about known
        plugins.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW PLUGINS;</code></strong>
+------------+--------+----------------+---------+
| Name       | Status | Type           | Library |
+------------+--------+----------------+---------+
| MEMORY     | ACTIVE | STORAGE ENGINE | NULL    |
| MyISAM     | ACTIVE | STORAGE ENGINE | NULL    |
| InnoDB     | ACTIVE | STORAGE ENGINE | NULL    |
| ARCHIVE    | ACTIVE | STORAGE ENGINE | NULL    |
| CSV        | ACTIVE | STORAGE ENGINE | NULL    |
| BLACKHOLE  | ACTIVE | STORAGE ENGINE | NULL    |
| FEDERATED  | ACTIVE | STORAGE ENGINE | NULL    |
| MRG_MYISAM | ACTIVE | STORAGE ENGINE | NULL    |
+------------+--------+----------------+---------+
</pre><p>
        <code class="literal">SHOW PLUGIN</code> was added in MySQL 5.1.5 and
        renamed to <code class="literal">SHOW PLUGINS</code> in 5.1.9. (As of
        5.1.9, <code class="literal">SHOW PLUGIN</code> is deprecated and
        generates a warning.)
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-privileges"></a>12.5.5.25. <code class="literal">SHOW PRIVILEGES</code> Syntax</h4></div></div></div><a class="indexterm" name="id2239165"></a><pre class="programlisting">SHOW PRIVILEGES
</pre><p>
        <code class="literal">SHOW PRIVILEGES</code> shows the list of system
        privileges that the MySQL server supports. The exact list of
        privileges depends on the version of your server.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW PRIVILEGES\G</code></strong>
*************************** 1. row ***************************
Privilege: Alter
Context: Tables
Comment: To alter the table
*************************** 2. row ***************************
Privilege: Alter routine
Context: Functions,Procedures
Comment: To alter or drop stored functions/procedures
*************************** 3. row ***************************
Privilege: Create
Context: Databases,Tables,Indexes
Comment: To create new databases and tables
*************************** 4. row ***************************
Privilege: Create routine
Context: Functions,Procedures
Comment: To use CREATE FUNCTION/PROCEDURE
*************************** 5. row ***************************
Privilege: Create temporary tables
Context: Databases
Comment: To use CREATE TEMPORARY TABLE
...
</pre><p>
        Privileges belonging to a specific user are displayed by the
        <code class="literal">SHOW GRANTS</code> statement. See
        <a href="sql-syntax.html#show-grants" title="12.5.5.19. SHOW GRANTS Syntax">Section 12.5.5.19, “<code class="literal">SHOW GRANTS</code> Syntax”</a>, for more information.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-procedure-code"></a>12.5.5.26. <code class="literal">SHOW PROCEDURE CODE</code> and <code class="literal">SHOW FUNCTION
        CODE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2239273"></a><a class="indexterm" name="id2239282"></a><pre class="programlisting">SHOW {PROCEDURE | FUNCTION} CODE <em class="replaceable"><code>sp_name</code></em>
</pre><p>
        These statements are MySQL extensions that are available only
        for servers that have been built with debugging support. They
        display a representation of the internal implementation of the
        named routine. The statements require that you be the owner of
        the routine or have <code class="literal">SELECT</code> access to the
        <code class="literal">mysql.proc</code> table.
      </p><p>
        If the named routine is available, each statement produces a
        result set. Each row in the result set corresponds to one
        “<span class="quote">instruction</span>” in the routine. The first column is
        <code class="literal">Pos</code>, which is an ordinal number beginning
        with 0. The second column is <code class="literal">Instruction</code>,
        which contains an SQL statement (usually changed from the
        original source), or a directive which has meaning only to the
        stored-routine handler.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>DELIMITER //</code></strong>
mysql&gt; <strong class="userinput"><code>CREATE PROCEDURE p1 ()</code></strong>
    -&gt; <strong class="userinput"><code>BEGIN</code></strong>
    -&gt;   <strong class="userinput"><code>DECLARE fanta INT DEFAULT 55;</code></strong>
    -&gt;   <strong class="userinput"><code>DROP TABLE t2;</code></strong>
    -&gt;   <strong class="userinput"><code>LOOP</code></strong>
    -&gt;     <strong class="userinput"><code>INSERT INTO t3 VALUES (fanta);</code></strong>
    -&gt;     <strong class="userinput"><code>END LOOP;</code></strong>
    -&gt;   <strong class="userinput"><code>END//</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW PROCEDURE CODE p1//</code></strong>
+-----+----------------------------------------+
| Pos | Instruction                            |
+-----+----------------------------------------+
|   0 | set fanta@0 55                         |
|   1 | stmt 9 "DROP TABLE t2"                 |
|   2 | stmt 5 "INSERT INTO t3 VALUES (fanta)" |
|   3 | jump 2                                 |
+-----+----------------------------------------+
4 rows in set (0.00 sec)
</pre><p>
        In this example, the non-executable <code class="literal">BEGIN</code> and
        <code class="literal">END</code> statements have disappeared, and for the
        <code class="literal">DECLARE
        <em class="replaceable"><code>variable_name</code></em></code> statement,
        only the executable part appears (the part where the default is
        assigned). For each statement that is taken from source, there
        is a code word <code class="literal">stmt</code> followed by a type (9
        means <code class="literal">DROP</code>, 5 means
        <code class="literal">INSERT</code>, and so on). The final row contains an
        instruction <code class="literal">jump 2</code>, meaning <code class="literal">GOTO
        instruction #2</code>.
      </p><p>
        These statements were added in MySQL 5.1.3.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-procedure-status"></a>12.5.5.27. <code class="literal">SHOW PROCEDURE STATUS</code> and <code class="literal">SHOW FUNCTION
        STATUS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2239520"></a><a class="indexterm" name="id2239529"></a><pre class="programlisting">SHOW {PROCEDURE | FUNCTION} STATUS
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        These statements are MySQL extensions. They return
        characteristics of routines, such as the database, name, type,
        creator, creation and modification dates, and character set
        information. The <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause,
        if present, indicates which procedure or function names to
        match. The <code class="literal">WHERE</code> clause can be given to
        select rows using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="27.27. Extensions to SHOW Statements">Section 27.27, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW FUNCTION STATUS LIKE 'hello'\G</code></strong>
*************************** 1. row ***************************
                  Db: test
                Name: hello
                Type: FUNCTION
             Definer: testuser@localhost
            Modified: 2004-08-03 15:29:37
             Created: 2004-08-03 15:29:37
       Security_type: DEFINER
             Comment:
character_set_client: latin1
collation_connection: latin1_swedish_ci
  Database Collation: latin1_swedish_ci
</pre><p>
        <code class="literal">character_set_client</code> is the session value of
        the <code class="literal">character_set_client</code> system variable when
        the routine was created. <code class="literal">collation_connection</code>
        is the session value of the
        <code class="literal">collation_connection</code> system variable when the
        routine was created. <code class="literal">Database Collation</code> is
        the collation of the database with which the routine is
        associated. These columns were added in MySQL 5.1.21.
      </p><p>
        You can also get information about stored routines from the
        <code class="literal">ROUTINES</code> table in
        <code class="literal">INFORMATION_SCHEMA</code>. See
        <a href="information-schema.html#routines-table" title="27.14. The INFORMATION_SCHEMA ROUTINES Table">Section 27.14, “The <code class="literal">INFORMATION_SCHEMA ROUTINES</code> Table”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-processlist"></a>12.5.5.28. <code class="literal">SHOW PROCESSLIST</code> Syntax</h4></div></div></div><a class="indexterm" name="id2239690"></a><a class="indexterm" name="id2239699"></a><a class="indexterm" name="id2239708"></a><a class="indexterm" name="id2239717"></a><a class="indexterm" name="id2239730"></a><pre class="programlisting">SHOW [FULL] PROCESSLIST
</pre><p>
        <code class="literal">SHOW PROCESSLIST</code> shows you which threads are
        running. You can also get this information from the
        <code class="literal">INFORMATION_SCHEMA</code>
        <code class="literal">PROCESSLIST</code> table or the <span><strong class="command">mysqladmin
        processlist</strong></span> command. If you have the
        <code class="literal">PROCESS</code> privilege, you can see all threads.
        Otherwise, you can see only your own threads (that is, threads
        associated with the MySQL account that you are using). If you do
        not use the <code class="literal">FULL</code> keyword, only the first 100
        characters of each statement are shown in the
        <code class="literal">Info</code> field.
      </p><p class="mnmas"><b>MySQL Enterprise</b>
          Subscribers to MySQL Enterprise Monitor receive instant
          notification and expert advice on resolution when there are
          too many concurrent processes. For more information, see
          <a href="advisors.html" target="_top">advisors.html</a>.
        </p><p>
        This statement is very useful if you get the “<span class="quote">too many
        connections</span>” error message and want to find out what is
        going on. MySQL reserves one extra connection to be used by
        accounts that have the <code class="literal">SUPER</code> privilege, to
        ensure that administrators should always be able to connect and
        check the system (assuming that you are not giving this
        privilege to all your users).
      </p><p>
        Threads can be killed with the <code class="literal">KILL</code>
        statement. See <a href="sql-syntax.html#kill" title="12.5.6.3. KILL Syntax">Section 12.5.6.3, “<code class="literal">KILL</code> Syntax”</a>.
      </p><p>
        Here is an example of what <code class="literal">SHOW PROCESSLIST</code>
        output looks like:
      </p><pre class="programlisting">mysql&gt; SHOW FULL PROCESSLIST\G
*************************** 1. row ***************************
Id: 1
User: system user
Host:
db: NULL
Command: Connect
Time: 1030455
State: Waiting for master to send event
Info: NULL
*************************** 2. row ***************************
Id: 2
User: system user
Host:
db: NULL
Command: Connect
Time: 1004
State: Has read all relay log; waiting for the slave
       I/O thread to update it
Info: NULL
*************************** 3. row ***************************
Id: 3112
User: replikator
Host: artemis:2204
db: NULL
Command: Binlog Dump
Time: 2144
State: Has sent all binlog to slave; waiting for binlog to be updated
Info: NULL
*************************** 4. row ***************************
Id: 3113
User: replikator
Host: iconnect2:45781
db: NULL
Command: Binlog Dump
Time: 2086
State: Has sent all binlog to slave; waiting for binlog to be updated
Info: NULL
*************************** 5. row ***************************
Id: 3123
User: stefan
Host: localhost
db: apollon
Command: Query
Time: 0
State: NULL
Info: SHOW FULL PROCESSLIST
5 rows in set (0.00 sec)
</pre><p>
        The columns have the following meaning:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Id</code>
          </p><p>
            The connection identifier.
          </p></li><li><p>
            <code class="literal">User</code>
          </p><p>
            The MySQL user who issued the statement. If this is
            <code class="literal">system user</code>, it refers to a non-client
            thread spawned by the server to handle tasks internally.
            This could be the I/O or SQL thread used on replication
            slaves or a delayed-row handler. <code class="literal">unauthenticated
            user</code> refers to a thread that has become associated
            with a client connection but for which authentication of the
            client user has not yet been done.
            <code class="literal">event_scheduler</code> refers to the thread that
            monitors scheduled events. For <code class="literal">system
            user</code> or <code class="literal">event_scheduler</code>, there
            is no host specified in the <code class="literal">Host</code> column.
          </p></li><li><p>
            <code class="literal">Host</code>
          </p><p>
            The hostname of the client issuing the statement (except for
            <code class="literal">system user</code> where there is no host).
            <code class="literal">SHOW PROCESSLIST</code> reports the hostname for
            TCP/IP connections in
            <code class="literal"><em class="replaceable"><code>host_name</code></em>:<em class="replaceable"><code>client_port</code></em></code>
            format to make it easier to determine which client is doing
            what.
          </p></li><li><p>
            <code class="literal">db</code>
          </p><p>
            The default database, if one is selected, otherwise
            <code class="literal">NULL</code>.
          </p></li><li><p>
            <code class="literal">Command</code>
          </p><p>
            The type of command the thread is executing. Descriptions
            for thread commands can be found at
            <a href="optimization.html#thread-information" title="7.5.5. Examining Thread Information">Section 7.5.5, “Examining Thread Information”</a>. The value of this
            column corresponds to the
            <code class="literal">COM_<em class="replaceable"><code>xxx</code></em></code>
            commands of the client/server protocol. See
            <a href="server-administration.html#server-status-variables" title="5.1.6. Status Variables">Section 5.1.6, “Status Variables”</a>
          </p></li><li><p>
            <code class="literal">Time</code>
          </p><p>
            The time in seconds that the thread has been in its current
            state.
          </p></li><li><p>
            <code class="literal">State</code>
          </p><p>
            An action, event, or state that indicates what the thread is
            doing. Descriptions for <code class="literal">State</code> values can
            be found at <a href="optimization.html#thread-information" title="7.5.5. Examining Thread Information">Section 7.5.5, “Examining Thread Information”</a>.
          </p><p>
            Most states correspond to very quick operations. If a thread
            stays in a given state for many seconds, there might be a
            problem that needs to be investigated.
          </p><p>
            For the <code class="literal">SHOW PROCESSLIST</code> statement, the
            value of <code class="literal">State</code> is
            <code class="literal">NULL</code>.
          </p></li><li><p>
            <code class="literal">Info</code>
          </p><p>
            The statement that the thread is executing, or
            <code class="literal">NULL</code> if it is not executing any
            statement. The statment might be the one sent to the server,
            or an innermost statement if the statement executes other
            statements. For example, if a <code class="literal">CALL p1()</code>
            statement executes a stored procedure
            <code class="literal">p1()</code>, and the procedure is executing a
            <code class="literal">SELECT</code> statement, the
            <code class="literal">Info</code> value shows the
            <code class="literal">SELECT</code> statement.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-scheduler-status"></a>12.5.5.29. <code class="literal">SHOW SCHEDULER STATUS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2240224"></a><pre class="programlisting">SHOW SCHEDULER STATUS
</pre><p>
        This statement provides debugging information regarding the
        Event Scheduler's state. It is supported only in
        <code class="literal">-debug</code> builds of MySQL 5.1.11, and was
        removed in 5.1.12 and subsequent releases.
      </p><p>
        Sample output is shown here:
      </p><pre class="programlisting">+--------------------------------+---------------------+
| Name                           | Value               |
+--------------------------------+---------------------+
| scheduler state                | INITIALIZED         |
| thread_id                      | NULL                |
| scheduler last locked at       | init_scheduler::313 |
| scheduler last unlocked at     | init_scheduler::318 |
| scheduler waiting on condition | 0                   |
| scheduler workers count        | 0                   |
| scheduler executed events      | 0                   |
| scheduler data locked          | 0                   |
| queue element count            | 1                   |
| queue data locked              | 0                   |
| queue data attempting lock     | 0                   |
| queue last locked at           | create_event::218   |
| queue last unlocked at         | create_event::222   |
| queue last attempted lock at   | ::0                 |
| queue waiting on condition     | 0                   |
| next activation at             |    0-00-00 00:00:00 |
+--------------------------------+---------------------+
</pre><p>
        In MySQL 5.1.12 and later, this information can be obtained
        using <span><strong class="command">mysqladmin debug</strong></span>. (See
        <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server">Section 4.5.2, “<span><strong class="command">mysqladmin</strong></span> — Client for Administering a MySQL Server”</a>.) For more information about
        obtaining Event Scheduler status information, see
        <a href="events.html#events-status-info" title="25.4. Event Scheduler Status">Section 25.4, “Event Scheduler Status”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-slave-hosts"></a>12.5.5.30. <code class="literal">SHOW SLAVE HOSTS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2240306"></a><pre class="programlisting">SHOW SLAVE HOSTS
</pre><p>
        Displays a list of replication slaves currently registered with
        the master. Only slaves started with the
        <code class="option">--report-host=<em class="replaceable"><code>slave_name</code></em></code>
        option are visible in this list.
      </p><p>
        The list is displayed on any server (not just the master
        server). The output looks like this:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW SLAVE HOSTS</code></strong>;
+------------+-----------+------+-----------+
| Server_id  | Host      | Port | Master_id |
+------------+-----------+------+-----------+
|  192168010 | iconnect2 | 3306 | 192168011 |
| 1921680101 | athena    | 3306 | 192168011 |
+------------+-----------+------+-----------+
</pre><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Server_id</code>: The unique server ID of the
            slave server, as configured in the server's option file, or
            on the command line with
            <code class="option">--server-id=<em class="replaceable"><code>value</code></em></code>.
          </p></li><li><p>
            <code class="literal">Host</code>: The host name of the slave server,
            as configured in the server's option file, or on the command
            line with
            <code class="option">--report-host=<em class="replaceable"><code>value</code></em></code>.
            Note that this can differ from the machine name as
            configured in the operating system.
          </p></li><li><p>
            <code class="literal">Port</code>: The port the slave server is
            listening on.
          </p></li><li><p>
            <code class="literal">Master_id</code>: The unique server ID of the
            master server that the slave server is replicating from.
          </p></li></ul></div><p>
        Some MySQL versions report another variable,
        <code class="literal">Rpl_recovery_rank</code>. This variable was never
        used, and was eventually removed.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-slave-status"></a>12.5.5.31. <code class="literal">SHOW SLAVE STATUS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2240469"></a><pre class="programlisting">SHOW SLAVE STATUS
</pre><p>
        This statement provides status information on essential
        parameters of the slave threads. If you issue this statement
        using the <span><strong class="command">mysql</strong></span> client, you can use a
        <code class="literal">\G</code> statement terminator rather than a
        semicolon to obtain a more readable vertical layout:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW SLAVE STATUS\G</code></strong>
*************************** 1. row ***************************
               Slave_IO_State: Waiting for master to send event
                  Master_Host: localhost
                  Master_User: root
                  Master_Port: 3306
                Connect_Retry: 3
              Master_Log_File: gbichot-bin.005
          Read_Master_Log_Pos: 79
               Relay_Log_File: gbichot-relay-bin.005
                Relay_Log_Pos: 548
        Relay_Master_Log_File: gbichot-bin.005
             Slave_IO_Running: Yes
            Slave_SQL_Running: Yes
              Replicate_Do_DB:
          Replicate_Ignore_DB:
                   Last_Errno: 0
                   Last_Error:
                 Skip_Counter: 0
          Exec_Master_Log_Pos: 79
              Relay_Log_Space: 552
              Until_Condition: None
               Until_Log_File:
                Until_Log_Pos: 0
           Master_SSL_Allowed: No
           Master_SSL_CA_File:
           Master_SSL_CA_Path:
              Master_SSL_Cert:
            Master_SSL_Cipher:
               Master_SSL_Key:
        Seconds_Behind_Master: 8
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error:
               Last_SQL_Errno: 0
               Last_SQL_Error:
</pre><p>
        <code class="literal">SHOW SLAVE STATUS</code> returns the following
        fields:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Slave_IO_State</code>
          </p><p>
            A copy of the <code class="literal">State</code> field of the output
            of <code class="literal">SHOW PROCESSLIST</code> for the slave I/O
            thread. This tells you what the thread is doing: trying to
            connect to the master, waiting for events from the master,
            reconnecting to the master, and so on. Possible states are
            listed in
            <a href="replication.html#replication-implementation-details" title="19.4.1. Replication Implementation Details">Section 19.4.1, “Replication Implementation Details”</a>. It is
            necessary to check this field for older versions of MySQL
            which allowed the thread to continue running while
            unsuccessfully trying to connect to the master. If it is
            running, there is no problem; if it is not, you can find the
            error in the <code class="literal">Last_Error</code> field (described
            below).
          </p></li><li><p>
            <code class="literal">Master_Host</code>
          </p><p>
            The current master host.
          </p></li><li><p>
            <code class="literal">Master_User</code>
          </p><p>
            The current user used to connect to the master.
          </p></li><li><p>
            <code class="literal">Master_Port</code>
          </p><p>
            The current master port.
          </p></li><li><p>
            <code class="literal">Connect_Retry</code>
          </p><p>
            The number of seconds between connect retries (default 60).
            This may be set with the <code class="literal">CHANGE MASTER TO</code>
            statement or <code class="option">--master-connect-retry</code> option.
          </p></li><li><p>
            <code class="literal">Master_Log_File</code>
          </p><p>
            The name of the master binary log file from which the I/O
            thread is currently reading.
          </p></li><li><p>
            <code class="literal">Read_Master_Log_Pos</code>
          </p><p>
            The position up to which the I/O thread has read in the
            current master binary log.
          </p></li><li><p>
            <code class="literal">Relay_Log_File</code>
          </p><p>
            The name of the relay log file from which the SQL thread is
            currently reading and executing.
          </p></li><li><p>
            <code class="literal">Relay_Log_Pos</code>
          </p><p>
            The position up to which the SQL thread has read and
            executed in the current relay log.
          </p></li><li><p>
            <code class="literal">Relay_Master_Log_File</code>
          </p><p>
            The name of the master binary log file containing the most
            recent event executed by the SQL thread.
          </p></li><li><p>
            <code class="literal">Slave_IO_Running</code>
          </p><p>
            Whether the I/O thread is started and has connected
            successfully to the master. For older versions of MySQL
            (prior to 4.1.14 and 5.0.12)
            <code class="literal">Slave_IO_Running</code> is
            <code class="literal">YES</code> if the I/O thread is started, even if
            the slave hasn't connected to the master yet.
          </p></li><li><p>
            <code class="literal">Slave_SQL_Running</code>
          </p><p>
            Whether the SQL thread is started.
          </p></li><li><p>
            <code class="literal">Replicate_Do_DB</code>,
            <code class="literal">Replicate_Ignore_DB</code>
          </p><p>
            The lists of databases that were specified with the
            <code class="option">--replicate-do-db</code> and
            <code class="option">--replicate-ignore-db</code> options, if any.
          </p></li><li><p>
            <code class="literal">Replicate_Do_Table</code>,
            <code class="literal">Replicate_Ignore_Table</code>,
            <code class="literal">Replicate_Wild_Do_Table</code>,
            <code class="literal">Replicate_Wild_Ignore_Table</code>
          </p><p>
            The lists of tables that were specified with the
            <code class="option">--replicate-do-table</code>,
            <code class="option">--replicate-ignore-table</code>,
            <code class="option">--replicate-wild-do-table</code>, and
            <code class="option">--replicate-wild-ignore_table</code> options, if
            any.
          </p></li><li><p>
            <code class="literal">Last_Errno</code>, <code class="literal">Last_Error</code>
          </p><p>
            As of MySQL 5.1.20, these columns are aliases for
            <code class="literal">Last_SQL_Errno</code> and
            <code class="literal">Last_SQL_Error</code>. Before 5.1.20, they
            indicate the error number and error message returned by the
            most recently executed statement. An error number of 0 and
            message of the empty string mean “<span class="quote">no error.</span>” If
            the <code class="literal">Last_Error</code> value is not empty, it
            also appears as a message in the slave's error log.
          </p></li><li><p>
            <code class="literal">Skip_Counter</code>
          </p><p>
            The most recently used value for
            <code class="literal">SQL_SLAVE_SKIP_COUNTER</code>.
          </p></li><li><p>
            <code class="literal">Exec_Master_Log_Pos</code>
          </p><p>
            The position of the last event executed by the SQL thread
            from the master's binary log
            (<code class="literal">Relay_Master_Log_File</code>).
            (<code class="literal">Relay_Master_Log_File</code>,
            <code class="literal">Exec_Master_Log_Pos</code>) in the master's
            binary log corresponds to
            (<code class="literal">Relay_Log_File</code>,
            <code class="literal">Relay_Log_Pos</code>) in the relay log.
          </p></li><li><p>
            <code class="literal">Relay_Log_Space</code>
          </p><p>
            The total combined size of all existing relay logs.
          </p></li><li><p>
            <code class="literal">Until_Condition</code>,
            <code class="literal">Until_Log_File</code>,
            <code class="literal">Until_Log_Pos</code>
          </p><p>
            The values specified in the <code class="literal">UNTIL</code> clause
            of the <code class="literal">START SLAVE</code> statement.
          </p><p>
            <code class="literal">Until_Condition</code> has these values:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <code class="literal">None</code> if no <code class="literal">UNTIL</code>
                clause was specified
              </p></li><li><p>
                <code class="literal">Master</code> if the slave is reading until
                a given position in the master's binary logs
              </p></li><li><p>
                <code class="literal">Relay</code> if the slave is reading until a
                given position in its relay logs
              </p></li></ul></div><p>
            <code class="literal">Until_Log_File</code> and
            <code class="literal">Until_Log_Pos</code> indicate the log filename
            and position values that define the point at which the SQL
            thread stops executing.
          </p></li><li><p>
            <code class="literal">Master_SSL_Allowed</code>,
            <code class="literal">Master_SSL_CA_File</code>,
            <code class="literal">Master_SSL_CA_Path</code>,
            <code class="literal">Master_SSL_Cert</code>,
            <code class="literal">Master_SSL_Cipher</code>,
            <code class="literal">Master_SSL_Key</code>
          </p><p>
            These fields show the SSL parameters used by the slave to
            connect to the master, if any.
          </p><p>
            <code class="literal">Master_SSL_Allowed</code> has these values:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <code class="literal">Yes</code> if an SSL connection to the
                master is permitted
              </p></li><li><p>
                <code class="literal">No</code> if an SSL connection to the master
                is not permitted
              </p></li><li><p>
                <code class="literal">Ignored</code> if an SSL connection is
                permitted but the slave server does not have SSL support
                enabled
              </p></li></ul></div><p>
            The values of the other SSL-related fields correspond to the
            values of the <code class="literal">MASTER_SSL_CA</code>,
            <code class="literal">MASTER_SSL_CAPATH</code>,
            <code class="literal">MASTER_SSL_CERT</code>,
            <code class="literal">MASTER_SSL_CIPHER</code>,
            <code class="literal">MASTER_SSL_KEY</code>, and
            <code class="literal">MASTER_SSL_VERIFY_SERVER_CERT</code> options to
            the <code class="literal">CHANGE MASTER</code> statement. See
            <a href="sql-syntax.html#change-master-to" title="12.6.2.1. CHANGE MASTER TO Syntax">Section 12.6.2.1, “<code class="literal">CHANGE MASTER TO</code> Syntax”</a>.
            <code class="literal">MASTER_SSL_VERIFY_SERVER_CERT</code> was added
            in MySQL 5.1.18.
          </p></li><li><p>
            <code class="literal">Seconds_Behind_Master</code>
          </p><p>
            This field is an indication of how “<span class="quote">late</span>” the
            slave is:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                When the slave SQL thread is actively running
                (processing updates), this field is the number of
                seconds that have elapsed since the timestamp of the
                most recent event on the master executed by that thread.
              </p></li><li><p>
                When the SQL thread has caught up to the slave I/O
                thread and goes idle waiting for more events from the
                I/O thread, this field is zero.
              </p></li></ul></div><p>
            In essence, this field measures the time difference in
            seconds between the slave SQL thread and the slave I/O
            thread.
          </p><p>
            If the network connection between master and slave is fast,
            the slave I/O thread is very close to the master, so this
            field is a good approximation of how late the slave SQL
            thread is compared to the master. If the network is slow,
            this is <span class="emphasis"><em>not</em></span> a good approximation; the
            slave SQL thread may quite often be caught up with the
            slow-reading slave I/O thread, so
            <code class="literal">Seconds_Behind_Master</code> often shows a value
            of 0, even if the I/O thread is late compared to the master.
            In other words, <span class="emphasis"><em>this column is useful only for
            fast networks</em></span>.
          </p><p>
            This time difference computation works even though the
            master and slave do not have identical clocks (the clock
            difference is computed when the slave I/O thread starts, and
            assumed to remain constant from then on).
            <code class="literal">Seconds_Behind_Master</code> is
            <code class="literal">NULL</code> (which means “<span class="quote">unknown</span>”)
            if the slave SQL thread is not running, or if the slave I/O
            thread is not running or not connected to master. For
            example if the slave I/O thread is sleeping for the number
            of seconds given by the <code class="literal">CHANGE MASTER TO</code>
            statement or <code class="option">--master-connect-retry</code> option
            (default 60) before reconnecting, <code class="literal">NULL</code> is
            shown, as the slave cannot know what the master is doing,
            and so cannot say reliably how late it is.
          </p><p>
            This field has one limitation. The timestamp is preserved
            through replication, which means that, if a master M1 is
            itself a slave of M0, any event from M1's binlog which
            originates in replicating an event from M0's binlog has the
            timestamp of that event. This enables MySQL to replicate
            <code class="literal">TIMESTAMP</code> successfully. However, the
            drawback for <code class="literal">Seconds_Behind_Master</code> is
            that if M1 also receives direct updates from clients, the
            value randomly deviates, because sometimes the last M1's
            event is from M0 and sometimes it is the most recent
            timestamp from a direct update.
          </p></li><li><p>
            <code class="literal">Last_IO_Errno</code>,
            <code class="literal">Last_IO_Error</code>
          </p><p>
            The error number and error message of the last error that
            caused the I/O thread to stop. An error number of 0 and
            message of the empty string mean “<span class="quote">no error.</span>” If
            the <code class="literal">Last_IO_Error</code> value is not empty, it
            also appears as a message in the slave's error log. These
            columns were added in MySQL 5.1.20.
          </p></li><li><p>
            <code class="literal">Last_SQL_Errno</code>,
            <code class="literal">Last_SQL_Error</code>
          </p><p>
            The error number and error message of the last error that
            caused the SQL thread to stop. An error number of 0 and
            message of the empty string mean “<span class="quote">no error.</span>” If
            the <code class="literal">Last_IO_Error</code> value is not empty, it
            also appears as a message in the slave's error log. These
            columns were added in MySQL 5.1.20.
          </p><p>
            Example:
          </p><pre class="programlisting">Last_SQL_Errno: 1051
Last_SQL_Error: error 'Unknown table 'z'' on query 'drop table z'
</pre><p>
            The message indicates that the table <code class="literal">z</code>
            existed on the master and was dropped there, but it did not
            exist on the slave, so <code class="literal">DROP TABLE</code> failed
            on the slave. (This might occur, for example, if you forget
            to copy the table to the slave when setting up replication.)
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-status"></a>12.5.5.32. <code class="literal">SHOW STATUS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2241546"></a><a class="indexterm" name="id2241555"></a><pre class="programlisting">SHOW [GLOBAL | SESSION] STATUS
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><a class="indexterm" name="id2241598"></a><p>
        <code class="literal">SHOW STATUS</code> provides server status
        information. This information also can be obtained using the
        <span><strong class="command">mysqladmin extended-status</strong></span> command. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present,
        indicates which variable names to match. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="27.27. Extensions to SHOW Statements">Section 27.27, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><p>
        Partial output is shown here. The list of names and values may
        be different for your server. The meaning of each variable is
        given in <a href="server-administration.html#server-status-variables" title="5.1.6. Status Variables">Section 5.1.6, “Status Variables”</a>.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS;</code></strong>
+--------------------------+------------+
| Variable_name            | Value      |
+--------------------------+------------+
| Aborted_clients          | 0          |
| Aborted_connects         | 0          |
| Bytes_received           | 155372598  |
| Bytes_sent               | 1176560426 |
| Connections              | 30023      |
| Created_tmp_disk_tables  | 0          |
| Created_tmp_tables       | 8340       |
| Created_tmp_files        | 60         |
...
| Open_tables              | 1          |
| Open_files               | 2          |
| Open_streams             | 0          |
| Opened_tables            | 44600      |
| Questions                | 2026873    |
...
| Table_locks_immediate    | 1920382    |
| Table_locks_waited       | 0          |
| Threads_cached           | 0          |
| Threads_created          | 30022      |
| Threads_connected        | 1          |
| Threads_running          | 1          |
| Uptime                   | 80380      |
+--------------------------+------------+
</pre><p>
        With a <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, the
        statement displays only rows for those variables with names that
        match the pattern:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'Key%';</code></strong>
+--------------------+----------+
| Variable_name      | Value    |
+--------------------+----------+
| Key_blocks_used    | 14955    |
| Key_read_requests  | 96854827 |
| Key_reads          | 162040   |
| Key_write_requests | 7589728  |
| Key_writes         | 3813196  |
+--------------------+----------+
</pre><p>
        With the <code class="literal">GLOBAL</code> modifier, <code class="literal">SHOW
        STATUS</code> displays the status values for all connections
        to MySQL. With <code class="literal">SESSION</code>, it displays the
        status values for the current connection. If no modifier is
        present, the default is <code class="literal">SESSION</code>.
        <code class="literal">LOCAL</code> is a synonym for
        <code class="literal">SESSION</code>.
      </p><p>
        Some status variables have only a global value. For these, you
        get the same value for both <code class="literal">GLOBAL</code> and
        <code class="literal">SESSION</code>. The scope for each status variable
        is listed at <a href="server-administration.html#server-status-variables" title="5.1.6. Status Variables">Section 5.1.6, “Status Variables”</a>.
      </p><p class="mnmas"><b>MySQL Enterprise</b>
          Status variables provide valuable clues to the state of your
          servers. For expert interpretation of the information provided
          by status variables, subscribe to the MySQL Enterprise
          Monitor. For more information, see
          <a href="advisors.html" target="_top">advisors.html</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-table-status"></a>12.5.5.33. <code class="literal">SHOW TABLE STATUS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2241809"></a><a class="indexterm" name="id2241822"></a><a class="indexterm" name="id2241834"></a><pre class="programlisting">SHOW TABLE STATUS [FROM <em class="replaceable"><code>db_name</code></em>]
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        <code class="literal">SHOW TABLE STATUS</code> works likes <code class="literal">SHOW
        TABLES</code>, but provides a lot of information about each
        non-<code class="literal">TEMPORARY</code> table. You can also get this
        list using the <span><strong class="command">mysqlshow --status
        <em class="replaceable"><code>db_name</code></em></strong></span> command. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present,
        indicates which table names to match. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="27.27. Extensions to SHOW Statements">Section 27.27, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><p>
        This statement also displays information about views.
      </p><p>
        <code class="literal">SHOW TABLE STATUS</code> returns the following
        fields:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Name</code>
          </p><p>
            The name of the table.
          </p></li><li><p>
            <code class="literal">Engine</code>
          </p><p>
            The storage engine for the table. See
            <a href="storage-engines.html" title="Chapter 13. Storage Engines">Chapter 13, <i>Storage Engines</i></a>.
          </p></li><li><p>
            <code class="literal">Version</code>
          </p><p>
            The version number of the table's <code class="filename">.frm</code>
            file.
          </p></li><li><p>
            <code class="literal">Row_format</code>
          </p><p>
            The row storage format (<code class="literal">Fixed</code>,
            <code class="literal">Dynamic</code>, <code class="literal">Compressed</code>,
            <code class="literal">Redundant</code>, <code class="literal">Compact</code>).
            The format of <code class="literal">InnoDB</code> tables is reported
            as <code class="literal">Redundant</code> or
            <code class="literal">Compact</code>.
          </p></li><li><p>
            <code class="literal">Rows</code>
          </p><p>
            The number of rows. Some storage engines, such as
            <code class="literal">MyISAM</code>, store the exact count. For other
            storage engines, such as <code class="literal">InnoDB</code>, this
            value is an approximation, and may vary from the actual
            value by as much as 40 to 50%. In such cases, use
            <code class="literal">SELECT COUNT(*)</code> to obtain an accurate
            count.
          </p><p>
            The <code class="literal">Rows</code> value is <code class="literal">NULL</code>
            for tables in the <code class="literal">INFORMATION_SCHEMA</code>
            database.
          </p></li><li><p>
            <code class="literal">Avg_row_length</code>
          </p><p>
            The average row length.
          </p></li><li><p>
            <code class="literal">Data_length</code>
          </p><p>
            The length of the data file.
          </p></li><li><p>
            <code class="literal">Max_data_length</code>
          </p><p>
            The maximum length of the data file. This is the total
            number of bytes of data that can be stored in the table,
            given the data pointer size used.
          </p></li><li><p>
            <code class="literal">Index_length</code>
          </p><p>
            The length of the index file.
          </p></li><li><p>
            <code class="literal">Data_free</code>
          </p><p>
            The number of allocated but unused bytes. Beginning with
            MySQL 5.1.24, this information is also shown for
            <code class="literal">InnoDB</code> tables. (<a href="http://bugs.mysql.com/32440" target="_top">Bug#32440</a>)
          </p></li><li><p>
            <code class="literal">Auto_increment</code>
          </p><p>
            The next <code class="literal">AUTO_INCREMENT</code> value.
          </p></li><li><p>
            <code class="literal">Create_time</code>
          </p><p>
            When the table was created.
          </p></li><li><p>
            <code class="literal">Update_time</code>
          </p><p>
            When the data file was last updated. For some storage
            engines, this value is <code class="literal">NULL</code>. For example,
            <code class="literal">InnoDB</code> stores multiple tables in its
            tablespace and the data file timestamp does not apply.
          </p></li><li><p>
            <code class="literal">Check_time</code>
          </p><p>
            When the table was last checked. Not all storage engines
            update this time, in which case the value is always
            <code class="literal">NULL</code>.
          </p></li><li><p>
            <code class="literal">Collation</code>
          </p><p>
            The table's character set and collation.
          </p></li><li><p>
            <code class="literal">Checksum</code>
          </p><p>
            The live checksum value (if any).
          </p></li><li><p>
            <code class="literal">Create_options</code>
          </p><p>
            Extra options used with <code class="literal">CREATE TABLE</code>. The
            original options supplied when <code class="literal">CREATE
            TABLE</code> is called are retained and the options
            reported here may differ from the active table settings and
            options.
          </p></li><li><p>
            <code class="literal">Comment</code>
          </p><p>
            The comment used when creating the table (or information as
            to why MySQL could not access the table information).
          </p></li></ul></div><p>
        In the table comment, <code class="literal">InnoDB</code> tables report
        the free space of the tablespace to which the table belongs. For
        a table located in the shared tablespace, this is the free space
        of the shared tablespace. If you are using multiple tablespaces
        and the table has its own tablespace, the free space is for only
        that table. Free space means the number of completely free 1MB
        extents minus a safety margin. Even if free space displays as 0,
        it may be possible to insert rows as long as new extents need
        not be allocated.
      </p><p>
        For <code class="literal">MEMORY</code> tables, the
        <code class="literal">Data_length</code>,
        <code class="literal">Max_data_length</code>, and
        <code class="literal">Index_length</code> values approximate the actual
        amount of allocated memory. The allocation algorithm reserves
        memory in large amounts to reduce the number of allocation
        operations.
      </p><p>
        For <code class="literal">NDBCLUSTER</code> tables, the output of this
        statement shows appropriate values for the
        <code class="literal">Avg_row_length</code> and
        <code class="literal">Data_length</code> columns, with the exception that
        <code class="literal">BLOB</code> columns are not taken into account. In
        addition, the number of replicas is shown in the
        <code class="literal">Comment</code> column (as
        <code class="literal">number_of_replicas</code>).
      </p><p>
        For views, all the fields displayed by <code class="literal">SHOW TABLE
        STATUS</code> are <code class="literal">NULL</code> except that
        <code class="literal">Name</code> indicates the view name and
        <code class="literal">Comment</code> says <code class="literal">view</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-tables"></a>12.5.5.34. <code class="literal">SHOW TABLES</code> Syntax</h4></div></div></div><a class="indexterm" name="id2242533"></a><a class="indexterm" name="id2242553"></a><pre class="programlisting">SHOW [FULL] TABLES [FROM <em class="replaceable"><code>db_name</code></em>]
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        <code class="literal">SHOW TABLES</code> lists the
        non-<code class="literal">TEMPORARY</code> tables in a given database. You
        can also get this list using the <span><strong class="command">mysqlshow
        <em class="replaceable"><code>db_name</code></em></strong></span> command. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present,
        indicates which table names to match. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="27.27. Extensions to SHOW Statements">Section 27.27, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><p>
        This statement also lists any views in the database. The
        <code class="literal">FULL</code> modifier is supported such that
        <code class="literal">SHOW FULL TABLES</code> displays a second output
        column. Values for the second column are <code class="literal">BASE
        TABLE</code> for a table and <code class="literal">VIEW</code> for a
        view.
      </p><p>
        If you have no privileges for a base table or view, it does not
        show up in the output from <code class="literal">SHOW TABLES</code> or
        <span><strong class="command">mysqlshow db_name</strong></span>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-triggers"></a>12.5.5.35. <code class="literal">SHOW TRIGGERS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2242706"></a><a class="indexterm" name="id2242715"></a><a class="indexterm" name="id2242724"></a><pre class="programlisting">SHOW TRIGGERS [FROM <em class="replaceable"><code>db_name</code></em>]
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        <code class="literal">SHOW TRIGGERS</code> lists the triggers currently
        defined for tables in a database (the default database unless a
        <code class="literal">FROM</code> clause is given). This statement
        requires the <code class="literal">TRIGGER</code> privilege (prior to
        MySQL 5.1.22, it requires the <code class="literal">SUPER</code>
        privilege). The <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause,
        if present, indicates which table names to match and causes the
        statement to display triggers for those tables. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="27.27. Extensions to SHOW Statements">Section 27.27, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><p>
        For the trigger <code class="literal">ins_sum</code> as defined in
        <a href="triggers.html#using-triggers" title="24.3. Using Triggers">Section 24.3, “Using Triggers”</a>, the output of this statement
        is as shown here:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW TRIGGERS LIKE 'acc%'\G</code></strong>
*************************** 1. row ***************************
             Trigger: ins_sum
               Event: INSERT
               Table: account
           Statement: SET @sum = @sum + NEW.amount
              Timing: BEFORE
             Created: NULL
            sql_mode:
             Definer: myname@localhost
character_set_client: latin1
collation_connection: latin1_swedish_ci
  Database Collation: latin1_swedish_ci
</pre><p>
        <code class="literal">character_set_client</code> is the session value of
        the <code class="literal">character_set_client</code> system variable when
        the trigger was created. <code class="literal">collation_connection</code>
        is the session value of the
        <code class="literal">collation_connection</code> system variable when the
        trigger was created. <code class="literal">Database Collation</code> is
        the collation of the database with which the trigger is
        associated. These columns were added in MySQL 5.1.21.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          When using a <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause
          with <code class="literal">SHOW TRIGGERS</code>, the expression to be
          matched (<em class="replaceable"><code>expr</code></em>) is compared with the
          name of the table on which the trigger is declared, and not
          with the name of the trigger:
        </p></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW TRIGGERS LIKE 'ins%';</code></strong>
Empty set (0.01 sec)
</pre><p>
        A brief explanation of the columns in the output of this
        statement is shown here:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Trigger</code>
          </p><p>
            The name of the trigger.
          </p></li><li><p>
            <code class="literal">Event</code>
          </p><p>
            The event that causes trigger activation: one of
            <code class="literal">'INSERT'</code>, <code class="literal">'UPDATE'</code>, or
            <code class="literal">'DELETE'</code>.
          </p></li><li><p>
            <code class="literal">Table</code>
          </p><p>
            The table for which the trigger is defined.
          </p></li><li><p>
            <code class="literal">Statement</code>
          </p><p>
            The statement to be executed when the trigger is activated.
            This is the same as the text shown in the
            <code class="literal">ACTION_STATEMENT</code> column of
            <code class="literal">INFORMATION_SCHEMA.TRIGGERS</code>.
          </p></li><li><p>
            <code class="literal">Timing</code>
          </p><p>
            One of the two values <code class="literal">'BEFORE'</code> or
            <code class="literal">'AFTER'</code>.
          </p></li><li><p>
            <code class="literal">Created</code>
          </p><p>
            Currently, the value of this column is always
            <code class="literal">NULL</code>.
          </p></li><li><p>
            <code class="literal">sql_mode</code>
          </p><p>
            The SQL mode in effect when the trigger executes.
          </p></li><li><p>
            <code class="literal">Definer</code>
          </p><p>
            The account that created the trigger.
          </p></li></ul></div><p>
        See also <a href="information-schema.html#triggers-table" title="27.16. The INFORMATION_SCHEMA TRIGGERS Table">Section 27.16, “The <code class="literal">INFORMATION_SCHEMA TRIGGERS</code> Table”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-variables"></a>12.5.5.36. <code class="literal">SHOW VARIABLES</code> Syntax</h4></div></div></div><a class="indexterm" name="id2243131"></a><a class="indexterm" name="id2243140"></a><a class="indexterm" name="id2243149"></a><a class="indexterm" name="id2243161"></a><pre class="programlisting">SHOW [GLOBAL | SESSION] VARIABLES
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><a class="indexterm" name="id2243204"></a><p>
        <code class="literal">SHOW VARIABLES</code> shows the values of MySQL
        system variables. This information also can be obtained using
        the <span><strong class="command">mysqladmin variables</strong></span> command. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present,
        indicates which variable names to match. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="27.27. Extensions to SHOW Statements">Section 27.27, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><p>
        With the <code class="literal">GLOBAL</code> modifier, <code class="literal">SHOW
        VARIABLES</code> displays the values that are used for new
        connections to MySQL. With <code class="literal">SESSION</code>, it
        displays the values that are in effect for the current
        connection. If no modifier is present, the default is
        <code class="literal">SESSION</code>. <code class="literal">LOCAL</code> is a
        synonym for <code class="literal">SESSION</code>.
      </p><p>
        If the default system variable values are unsuitable, you can
        set them using command options when <span><strong class="command">mysqld</strong></span>
        starts, and most can be changed at runtime with the
        <code class="literal">SET</code> statement. See
        <a href="server-administration.html#using-system-variables" title="5.1.5. Using System Variables">Section 5.1.5, “Using System Variables”</a>, and
        <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax">Section 12.5.4, “<code class="literal">SET</code> Syntax”</a>.
      </p><p>
        Partial output is shown here. The list of names and values may
        be different for your server.
        <a href="server-administration.html#server-system-variables" title="5.1.3. System Variables">Section 5.1.3, “System Variables”</a>, describes the meaning
        of each variable, and <a href="optimization.html#server-parameters" title="7.5.2. Tuning Server Parameters">Section 7.5.2, “Tuning Server Parameters”</a>,
        provides information about tuning them.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW VARIABLES;</code></strong>
+---------------------------------+---------------------------+
| Variable_name                   | Value                     |
+---------------------------------+---------------------------+
| auto_increment_increment        | 1                         |
| auto_increment_offset           | 1                         |
| automatic_sp_privileges         | ON                        |
| back_log                        | 50                        |
| basedir                         | /home/jon/bin/mysql-5.1/  |
| binlog_cache_size               | 32768                     |
| bulk_insert_buffer_size         | 8388608                   |
| character_set_client            | latin1                    |
| character_set_connection        | latin1                    |
...
| max_user_connections            | 0                         |
| max_write_lock_count            | 4294967295                |
| multi_range_count               | 256                       |
| myisam_data_pointer_size        | 6                         |
| myisam_max_sort_file_size       | 2147483647                |
| myisam_recover_options          | OFF                       |
| myisam_repair_threads           | 1                         |
| myisam_sort_buffer_size         | 8388608                   |
| ndb_autoincrement_prefetch_sz   | 32                        |
| ndb_cache_check_time            | 0                         |
| ndb_force_send                  | ON                        |
...
| time_zone                       | SYSTEM                    |
| timed_mutexes                   | OFF                       |
| tmp_table_size                  | 33554432                  |
| tmpdir                          |                           |
| transaction_alloc_block_size    | 8192                      |
| transaction_prealloc_size       | 4096                      |
| tx_isolation                    | REPEATABLE-READ           |
| updatable_views_with_limit      | YES                       |
| version                         | 5.1.6-alpha-log           |
| version_comment                 | Source distribution       |
| version_compile_machine         | i686                      |
| version_compile_os              | suse-linux                |
| wait_timeout                    | 28800                     |
+---------------------------------+---------------------------+
</pre><p>
        With a <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, the
        statement displays only rows for those variables with names that
        match the pattern. To obtain the row for a specific variable,
        use a <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause as shown:
      </p><pre class="programlisting">SHOW VARIABLES LIKE 'max_join_size';
SHOW SESSION VARIABLES LIKE 'max_join_size';
</pre><p>
        To get a list of variables whose name match a pattern, use the
        “<span class="quote"><code class="literal">%</code></span>” wildcard character in a
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause:
      </p><pre class="programlisting">SHOW VARIABLES LIKE '%size%';
SHOW GLOBAL VARIABLES LIKE '%size%';
</pre><p>
        Wildcard characters can be used in any position within the
        pattern to be matched. Strictly speaking, because
        “<span class="quote"><code class="literal">_</code></span>” is a wildcard that matches
        any single character, you should escape it as
        “<span class="quote"><code class="literal">\_</code></span>” to match it literally. In
        practice, this is rarely necessary.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-warnings"></a>12.5.5.37. <code class="literal">SHOW WARNINGS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2243471"></a><pre class="programlisting">SHOW WARNINGS [LIMIT [<em class="replaceable"><code>offset</code></em>,] <em class="replaceable"><code>row_count</code></em>]
SHOW COUNT(*) WARNINGS
</pre><p>
        <code class="literal">SHOW WARNINGS</code> shows the error, warning, and
        note messages that resulted from the last statement that
        generated messages. It shows nothing if the last statement used
        a table and generated no messages. (That is, a statement that
        uses a table but generates no messages clears the message list.)
        Statements that do not use tables and do not generate messages
        have no effect on the message list.
      </p><p>
        A related statement, <code class="literal">SHOW ERRORS</code>, shows only
        the errors. See <a href="sql-syntax.html#show-errors" title="12.5.5.17. SHOW ERRORS Syntax">Section 12.5.5.17, “<code class="literal">SHOW ERRORS</code> Syntax”</a>.
      </p><p>
        The <code class="literal">SHOW COUNT(*) WARNINGS</code> statement displays
        the total number of errors, warnings, and notes. You can also
        retrieve this number from the <code class="literal">warning_count</code>
        variable:
      </p><pre class="programlisting">SHOW COUNT(*) WARNINGS;
SELECT @@warning_count;
</pre><p>
        The value of <code class="literal">warning_count</code> might be greater
        than the number of messages displayed by <code class="literal">SHOW
        WARNINGS</code> if the <code class="literal">max_error_count</code>
        system variable is set so low that not all messages are stored.
        An example shown later in this section demonstrates how this can
        happen.
      </p><p>
        The <code class="literal">LIMIT</code> clause has the same syntax as for
        the <code class="literal">SELECT</code> statement. See
        <a href="sql-syntax.html#select" title="12.2.7. SELECT Syntax">Section 12.2.7, “<code class="literal">SELECT</code> Syntax”</a>.
      </p><p>
        The MySQL server sends back the total number of errors,
        warnings, and notes resulting from the last statement. If you
        are using the C API, this value can be obtained by calling
        <a href="apis.html#mysql-warning-count" title="29.2.3.72. mysql_warning_count()"><code class="literal">mysql_warning_count()</code></a>. See
        <a href="apis.html#mysql-warning-count" title="29.2.3.72. mysql_warning_count()">Section 29.2.3.72, “<code class="literal">mysql_warning_count()</code>”</a>.
      </p><p>
        Warnings are generated for statements such as <code class="literal">LOAD DATA
        INFILE</code> and DML statements such as
        <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>,
        <code class="literal">CREATE TABLE</code>, and <code class="literal">ALTER
        TABLE</code>.
      </p><p>
        The following <code class="literal">DROP TABLE</code> statement results in
        a note:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>DROP TABLE IF EXISTS no_such_table;</code></strong>
mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+-------+------+-------------------------------+
| Level | Code | Message                       |
+-------+------+-------------------------------+
| Note  | 1051 | Unknown table 'no_such_table' |
+-------+------+-------------------------------+
</pre><p>
        Here is a simple example that shows a syntax warning for
        <code class="literal">CREATE TABLE</code> and conversion warnings for
        <code class="literal">INSERT</code>:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (a TINYINT NOT NULL, b CHAR(4)) TYPE=MyISAM;</code></strong>
Query OK, 0 rows affected, 1 warning (0.00 sec)
mysql&gt; <strong class="userinput"><code>SHOW WARNINGS\G</code></strong>
*************************** 1. row ***************************
  Level: Warning
   Code: 1287
Message: 'TYPE=storage_engine' is deprecated, use
         'ENGINE=storage_engine' instead
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO t1 VALUES(10,'mysql'),(NULL,'test'),</code></strong>
    -&gt; <strong class="userinput"><code>(300,'Open Source');</code></strong>
Query OK, 3 rows affected, 4 warnings (0.01 sec)
Records: 3  Duplicates: 0  Warnings: 4

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS\G</code></strong>
*************************** 1. row ***************************
  Level: Warning
   Code: 1265
Message: Data truncated for column 'b' at row 1
*************************** 2. row ***************************
  Level: Warning
   Code: 1263
Message: Data truncated, NULL supplied to NOT NULL column 'a' at row 2
*************************** 3. row ***************************
  Level: Warning
   Code: 1264
Message: Data truncated, out of range for column 'a' at row 3
*************************** 4. row ***************************
  Level: Warning
   Code: 1265
Message: Data truncated for column 'b' at row 3
4 rows in set (0.00 sec)
</pre><p>
        The maximum number of error, warning, and note messages to store
        is controlled by the <code class="literal">max_error_count</code> system
        variable. By default, its value is 64. To change the number of
        messages you want stored, change the value of
        <code class="literal">max_error_count</code>. In the following example,
        the <code class="literal">ALTER TABLE</code> statement produces three
        warning messages, but only one is stored because
        <code class="literal">max_error_count</code> has been set to 1:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'max_error_count';</code></strong>
+-----------------+-------+
| Variable_name   | Value |
+-----------------+-------+
| max_error_count | 64    |
+-----------------+-------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SET max_error_count=1;</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>ALTER TABLE t1 MODIFY b CHAR;</code></strong>
Query OK, 3 rows affected, 3 warnings (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 3

mysql&gt; <strong class="userinput"><code>SELECT @@warning_count;</code></strong>
+-----------------+
| @@warning_count |
+-----------------+
|               3 |
+-----------------+
1 row in set (0.01 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+---------+------+----------------------------------------+
| Level   | Code | Message                                |
+---------+------+----------------------------------------+
| Warning | 1263 | Data truncated for column 'b' at row 1 |
+---------+------+----------------------------------------+
1 row in set (0.00 sec)
</pre><p>
        To disable warnings, set <code class="literal">max_error_count</code> to
        0. In this case, <code class="literal">warning_count</code> still
        indicates how many warnings have occurred, but none of the
        messages are stored.
      </p><p>
        You can set the <code class="literal">SQL_NOTES</code> session variable to
        0 to cause <code class="literal">Note</code>-level warnings not to be
        recorded.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="other-administrative-sql"></a>12.5.6. Other Administrative Statements</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#cache-index">12.5.6.1. <code class="literal">CACHE INDEX</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#flush">12.5.6.2. <code class="literal">FLUSH</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#kill">12.5.6.3. <code class="literal">KILL</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#load-index">12.5.6.4. <code class="literal">LOAD INDEX INTO CACHE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#reset">12.5.6.5. <code class="literal">RESET</code> Syntax</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cache-index"></a>12.5.6.1. <code class="literal">CACHE INDEX</code> Syntax</h4></div></div></div><a class="indexterm" name="id2243887"></a><a class="indexterm" name="id2243896"></a><a class="indexterm" name="id2243908"></a><pre class="programlisting">CACHE INDEX
  <em class="replaceable"><code>tbl_index_list</code></em> [, <em class="replaceable"><code>tbl_index_list</code></em>] ...
  IN <em class="replaceable"><code>key_cache_name</code></em>

<em class="replaceable"><code>tbl_index_list</code></em>:
  <em class="replaceable"><code>tbl_name</code></em> [[INDEX|KEY] (<em class="replaceable"><code>index_name</code></em>[, <em class="replaceable"><code>index_name</code></em>] ...)]
</pre><p>
        The <code class="literal">CACHE INDEX</code> statement assigns table
        indexes to a specific key cache. It is used only for
        <code class="literal">MyISAM</code> tables.
      </p><p>
        The following statement assigns indexes from the tables
        <code class="literal">t1</code>, <code class="literal">t2</code>, and
        <code class="literal">t3</code> to the key cache named
        <code class="literal">hot_cache</code>:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CACHE INDEX t1, t2, t3 IN hot_cache;</code></strong>
+---------+--------------------+----------+----------+
| Table   | Op                 | Msg_type | Msg_text |
+---------+--------------------+----------+----------+
| test.t1 | assign_to_keycache | status   | OK       |
| test.t2 | assign_to_keycache | status   | OK       |
| test.t3 | assign_to_keycache | status   | OK       |
+---------+--------------------+----------+----------+
</pre><p>
        The syntax of <code class="literal">CACHE INDEX</code> enables you to
        specify that only particular indexes from a table should be
        assigned to the cache. The current implementation assigns all
        the table's indexes to the cache, so there is no reason to
        specify anything other than the table name.
      </p><p>
        The key cache referred to in a <code class="literal">CACHE INDEX</code>
        statement can be created by setting its size with a parameter
        setting statement or in the server parameter settings. For
        example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET GLOBAL keycache1.key_buffer_size=128*1024;</code></strong>
</pre><p>
        Key cache parameters can be accessed as members of a structured
        system variable. See
        <a href="server-administration.html#structured-system-variables" title="5.1.5.1. Structured System Variables">Section 5.1.5.1, “Structured System Variables”</a>.
      </p><p>
        A key cache must exist before you can assign indexes to it:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CACHE INDEX t1 IN non_existent_cache;</code></strong>
ERROR 1284 (HY000): Unknown key cache 'non_existent_cache'
</pre><p>
        By default, table indexes are assigned to the main (default) key
        cache created at the server startup. When a key cache is
        destroyed, all indexes assigned to it become assigned to the
        default key cache again.
      </p><p>
        Index assignment affects the server globally: If one client
        assigns an index to a given cache, this cache is used for all
        queries involving the index, no matter which client issues the
        queries.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="flush"></a>12.5.6.2. <code class="literal">FLUSH</code> Syntax</h4></div></div></div><a class="indexterm" name="id2244119"></a><a class="indexterm" name="id2244128"></a><a class="indexterm" name="id2244137"></a><a class="indexterm" name="id2244150"></a><pre class="programlisting">FLUSH [LOCAL | NO_WRITE_TO_BINLOG]
    <em class="replaceable"><code>flush_option</code></em> [, <em class="replaceable"><code>flush_option</code></em>] ...
</pre><p>
        The <code class="literal">FLUSH</code> statement clears or reloads various
        internal caches used by MySQL. To execute
        <code class="literal">FLUSH</code>, you must have the
        <code class="literal">RELOAD</code> privilege.
      </p><p>
        The <code class="literal">RESET</code> statement is similar to
        <code class="literal">FLUSH</code>. See <a href="sql-syntax.html#reset" title="12.5.6.5. RESET Syntax">Section 12.5.6.5, “<code class="literal">RESET</code> Syntax”</a>.
      </p><p>
        <em class="replaceable"><code>flush_option</code></em> can be any of the
        following:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">DES_KEY_FILE</code>
          </p><p>
            Reloads the DES keys from the file that was specified with
            the <code class="option">--des-key-file</code> option at server startup
            time.
          </p></li><li><p>
            <code class="literal">HOSTS</code>
          </p><p>
            Empties the host cache tables. You should flush the host
            tables if some of your hosts change IP number or if you get
            the error message <code class="literal">Host
            '<em class="replaceable"><code>host_name</code></em>' is blocked</code>.
            When more than <code class="literal">max_connect_errors</code> errors
            occur successively for a given host while connecting to the
            MySQL server, MySQL assumes that something is wrong and
            blocks the host from further connection requests. Flushing
            the host tables enables further connection attempts from the
            host. See <a href="error-handling.html#blocked-host" title="B.1.2.6. Host 'host_name' is
          blocked">Section B.1.2.6, “<code class="literal">Host '<em class="replaceable"><code>host_name</code></em>' is
          blocked</code>”</a>. You can start
            <span><strong class="command">mysqld</strong></span> with
            <code class="option">--max_connect_errors=999999999</code> to avoid
            this error message.
          </p></li><li><p>
            <code class="literal">LOGS</code>
          </p><p>
            Closes and reopens all log files. If binary logging is
            enabled, the sequence number of the binary log file is
            incremented by one relative to the previous file. On Unix,
            this is the same thing as sending a
            <code class="literal">SIGHUP</code> signal to the
            <span><strong class="command">mysqld</strong></span> server (except on some Mac OS X
            10.3 versions where <span><strong class="command">mysqld</strong></span> ignores
            <code class="literal">SIGHUP</code> and <code class="literal">SIGQUIT</code>).
          </p><p>
            If the server is writing error output to a named file (for
            example, if it was started with the
            <code class="option">--log-error</code> option), <code class="literal">FLUSH
            LOGS</code> causes it to rename the current error log
            file with a suffix of <code class="literal">-old</code> and create a
            new empty log file. No renaming occurs if the server is not
            writing to a named file (for example, if it is writing
            errors to the console).
          </p></li><li><p>
            <code class="literal">MASTER</code> (<span class="emphasis"><em>DEPRECATED</em></span>).
            Deletes all binary logs, resets the binary log index file
            and creates a new binary log. <code class="literal">FLUSH
            MASTER</code> is deprecated in favor of <code class="literal">RESET
            MASTER</code>, and is supported for backward
            compatibility only. See <a href="sql-syntax.html#reset-master" title="12.6.1.2. RESET MASTER Syntax">Section 12.6.1.2, “<code class="literal">RESET MASTER</code> Syntax”</a>.
          </p></li><li><p>
            <code class="literal">PRIVILEGES</code>
          </p><p>
            Reloads the privileges from the grant tables in the
            <code class="literal">mysql</code> database. On Unix, this also occurs
            if the server receives a <code class="literal">SIGHUP</code> signal.
          </p><p>
            The server caches information in memory as a result of
            <code class="literal">GRANT</code>, <code class="literal">CREATE USER</code>,
            <code class="literal">CREATE SERVER</code>, and <code class="literal">INSTALL
            PLUGIN</code> statements. This memory is not released by
            the corresponding <code class="literal">REVOKE</code>, <code class="literal">DROP
            USER</code>, <code class="literal">DROP SERVER</code>, and
            <code class="literal">UNINSTALL PLUGIN</code> statements, so for a
            server that executes many instances of the statements that
            cause caching, there will be an increase in memory use. This
            cached memory can be freed with <code class="literal">FLUSH
            PRIVILEGES</code>.
          </p></li><li><p>
            <code class="literal">QUERY CACHE</code>
          </p><p>
            Defragment the query cache to better utilize its memory.
            <code class="literal">FLUSH QUERY CACHE</code> does not remove any
            queries from the cache, unlike <code class="literal">FLUSH
            TABLES</code> or <code class="literal">RESET QUERY CACHE</code>.
          </p></li><li><p>
            <code class="literal">SLAVE</code> (<span class="emphasis"><em>DEPRECATED</em></span>).
            Resets all replication slave parameters, including relay log
            files and replication position in the master's binary logs.
            <code class="literal">FLUSH SLAVE</code> is deprecated in favor of
            <code class="literal">RESET SLAVE</code>, and is supported for
            backward compatibility only. See
            <a href="sql-syntax.html#reset-slave" title="12.6.2.5. RESET SLAVE Syntax">Section 12.6.2.5, “<code class="literal">RESET SLAVE</code> Syntax”</a>.
          </p></li><li><p>
            <code class="literal">STATUS</code>
          </p><p>
            This option adds the current thread's session status
            variable values to the global values and resets the session
            values to zero. It also resets the counters for key caches
            (default and named) to zero and sets
            <code class="literal">Max_used_conections</code> to the current number
            of open connections. This is something you should use only
            when debugging a query. See <a href="introduction.html#bug-reports" title="1.7. How to Report Bugs or Problems">Section 1.7, “How to Report Bugs or Problems”</a>.
          </p></li><li><p>
            <code class="literal">{TABLE | TABLES}
            [<em class="replaceable"><code>tbl_name</code></em> [,
            <em class="replaceable"><code>tbl_name</code></em>] ...]</code>
          </p><p>
            When no tables are named, closes all open tables, forces all
            tables in use to be closed, and flushes the query cache.
            With one or more table names, flushes only the given tables.
            <code class="literal">FLUSH TABLES</code> also removes all query
            results from the query cache, like the <code class="literal">RESET QUERY
            CACHE</code> statement.
          </p></li><li><p>
            <code class="literal">TABLES WITH READ LOCK</code>
          </p><p>
            Closes all open tables and locks all tables for all
            databases with a read lock until you explicitly release the
            lock by executing <code class="literal">UNLOCK TABLES</code>. This is
            very convenient way to get backups if you have a filesystem
            such as Veritas that can take snapshots in time.
          </p><p>
            <code class="literal">FLUSH TABLES WITH READ LOCK</code> acquires a
            global read lock and not table locks, so it is not subject
            to the same behavior as <code class="literal">LOCK TABLES</code> and
            <code class="literal">UNLOCK TABLES</code> with respect to table
            locking and implicit commits:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <code class="literal">UNLOCK TABLES</code> implicitly commits any
                active transaction only if any tables currently have
                been locked with <code class="literal">LOCK TABLES</code>. The
                commit does not occur for <code class="literal">UNLOCK
                TABLES</code> following <code class="literal">FLUSH TABLES WITH
                READ LOCK</code> because the latter statement does
                not acquire table locks.
              </p></li><li><p>
                Beginning a transaction causes table locks acquired with
                <code class="literal">LOCK TABLES</code> to be released, as though
                you had executed <code class="literal">UNLOCK TABLES</code>.
                Beginning a transaction does not release a global read
                lock acquired with <code class="literal">FLUSH TABLES WITH READ
                LOCK</code>.
              </p></li></ul></div></li><li><p>
            <code class="literal">USER_RESOURCES</code>
          </p><p>
            Resets all per-hour user resources to zero. This enables
            clients that have reached their hourly connection, query, or
            update limits to resume activity immediately. <code class="literal">FLUSH
            USER_RESOURCES</code> does not apply to the limit on
            maximum simultaneous connections. See
            <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
          </p></li></ul></div><p>
        By default, <code class="literal">FLUSH</code> statements are written to
        the binary log. Such statements used on a MySQL server acting as
        a replication master will be replicated to replication slaves.
        Logging can be suppressed with the optional
        <code class="literal">NO_WRITE_TO_BINLOG</code> keyword or its alias
        <code class="literal">LOCAL</code>.
      </p><p>
        See also <a href="sql-syntax.html#reset" title="12.5.6.5. RESET Syntax">Section 12.5.6.5, “<code class="literal">RESET</code> Syntax”</a>, for information about how the
        <code class="literal">RESET</code> statement is used with replication.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <code class="literal">FLUSH LOGS</code>, <code class="literal">FLUSH
          MASTER</code>, <code class="literal">FLUSH SLAVE</code>, and
          <code class="literal">FLUSH TABLES WITH READ LOCK</code> are not written
          to the binary log in any case because they would cause
          problems if replicated to a slave.
        </p></div><p>
        The <span><strong class="command">mysqladmin</strong></span> utility provides a
        command-line interface to some flush operations, via the
        <code class="literal">flush-hosts</code>, <code class="literal">flush-logs</code>,
        <code class="literal">flush-privileges</code>,
        <code class="literal">flush-status</code>, and
        <code class="literal">flush-tables</code> commands.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          It is not possible in MySQL 5.1 to issue
          <code class="literal">FLUSH</code> statements within stored functions or
          triggers. However, you may use <code class="literal">FLUSH</code> in
          stored procedures, so long as these are not called from stored
          functions or triggers. See
          <a href="restrictions.html#routine-restrictions" title="D.1. Restrictions on Stored Routines, Triggers, and Events">Section D.1, “Restrictions on Stored Routines, Triggers, and Events”</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="kill"></a>12.5.6.3. <code class="literal">KILL</code> Syntax</h4></div></div></div><a class="indexterm" name="id2244945"></a><a class="indexterm" name="id2244954"></a><pre class="programlisting">KILL [CONNECTION | QUERY] <em class="replaceable"><code>thread_id</code></em>
</pre><p>
        Each connection to <span><strong class="command">mysqld</strong></span> runs in a separate
        thread. You can see which threads are running with the
        <code class="literal">SHOW PROCESSLIST</code> statement and kill a thread
        with the <code class="literal">KILL
        <em class="replaceable"><code>thread_id</code></em></code> statement.
      </p><p>
        <code class="literal">KILL</code> allows the optional
        <code class="literal">CONNECTION</code> or <code class="literal">QUERY</code>
        modifier:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">KILL CONNECTION</code> is the same as
            <code class="literal">KILL</code> with no modifier: It terminates the
            connection associated with the given
            <em class="replaceable"><code>thread_id</code></em>.
          </p></li><li><p>
            <code class="literal">KILL QUERY</code> terminates the statement that
            the connection is currently executing, but leaves the
            connection itself intact.
          </p></li></ul></div><p>
        If you have the <code class="literal">PROCESS</code> privilege, you can
        see all threads. If you have the <code class="literal">SUPER</code>
        privilege, you can kill all threads and statements. Otherwise,
        you can see and kill only your own threads and statements.
      </p><p>
        You can also use the <span><strong class="command">mysqladmin processlist</strong></span>
        and <span><strong class="command">mysqladmin kill</strong></span> commands to examine and
        kill threads.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          You cannot use <code class="literal">KILL</code> with the Embedded MySQL
          Server library, because the embedded server merely runs inside
          the threads of the host application. It does not create any
          connection threads of its own.
        </p></div><p>
        When you use <code class="literal">KILL</code>, a thread-specific kill
        flag is set for the thread. In most cases, it might take some
        time for the thread to die, because the kill flag is checked
        only at specific intervals:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            In <code class="literal">SELECT</code>, <code class="literal">ORDER BY</code>
            and <code class="literal">GROUP BY</code> loops, the flag is checked
            after reading a block of rows. If the kill flag is set, the
            statement is aborted.
          </p></li><li><p>
            During <code class="literal">ALTER TABLE</code>, the kill flag is
            checked before each block of rows are read from the original
            table. If the kill flag was set, the statement is aborted
            and the temporary table is deleted.
          </p></li><li><p>
            During <code class="literal">UPDATE</code> or
            <code class="literal">DELETE</code> operations, the kill flag is
            checked after each block read and after each updated or
            deleted row. If the kill flag is set, the statement is
            aborted. Note that if you are not using transactions, the
            changes are not rolled back.
          </p></li><li><p>
            <a href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a> aborts and
            returns <code class="literal">NULL</code>.
          </p></li><li><p>
            An <code class="literal">INSERT DELAYED</code> thread quickly flushes
            (inserts) all rows it has in memory and then terminates.
          </p></li><li><p>
            If the thread is in the table lock handler (state:
            <code class="literal">Locked</code>), the table lock is quickly
            aborted.
          </p></li><li><p>
            If the thread is waiting for free disk space in a write
            call, the write is aborted with a “<span class="quote">disk full</span>”
            error message.
          </p></li><li><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
              Killing a <code class="literal">REPAIR TABLE</code> or
              <code class="literal">OPTIMIZE TABLE</code> operation on a
              <code class="literal">MyISAM</code> table results in a table that is
              corrupted and unusable. Any reads or writes to such a
              table fail until you optimize or repair it again (without
              interruption).
            </p></div></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="load-index"></a>12.5.6.4. <code class="literal">LOAD INDEX INTO CACHE</code> Syntax</h4></div></div></div><pre class="programlisting">LOAD INDEX INTO CACHE
  <em class="replaceable"><code>tbl_index_list</code></em> [, <em class="replaceable"><code>tbl_index_list</code></em>] ...

<em class="replaceable"><code>tbl_index_list</code></em>:
  <em class="replaceable"><code>tbl_name</code></em>
    [[INDEX|KEY] (<em class="replaceable"><code>index_name</code></em>[, <em class="replaceable"><code>index_name</code></em>] ...)]
    [IGNORE LEAVES]
</pre><p>
        The <code class="literal">LOAD INDEX INTO CACHE</code> statement preloads
        a table index into the key cache to which it has been assigned
        by an explicit <code class="literal">CACHE INDEX</code> statement, or into
        the default key cache otherwise. <code class="literal">LOAD INDEX INTO
        CACHE</code> is used only for <code class="literal">MyISAM</code>
        tables. It is not supported for tables having user-defined
        partitioning (see <a href="partitioning.html#partitioning-limitations" title="21.5. Restrictions and Limitations on Partitioning">Section 21.5, “Restrictions and Limitations on Partitioning”</a>.)
      </p><p>
        The <code class="literal">IGNORE LEAVES</code> modifier causes only blocks
        for the non-leaf nodes of the index to be preloaded.
      </p><p>
        The following statement preloads nodes (index blocks) of indexes
        for the tables <code class="literal">t1</code> and <code class="literal">t2</code>:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>LOAD INDEX INTO CACHE t1, t2 IGNORE LEAVES;</code></strong>
+---------+--------------+----------+----------+
| Table   | Op           | Msg_type | Msg_text |
+---------+--------------+----------+----------+
| test.t1 | preload_keys | status   | OK       |
| test.t2 | preload_keys | status   | OK       |
+---------+--------------+----------+----------+
</pre><p>
        This statement preloads all index blocks from
        <code class="literal">t1</code>. It preloads only blocks for the non-leaf
        nodes from <code class="literal">t2</code>.
      </p><p>
        The syntax of <code class="literal">LOAD INDEX INTO CACHE</code> enables
        you to specify that only particular indexes from a table should
        be preloaded. The current implementation preloads all the
        table's indexes into the cache, so there is no reason to specify
        anything other than the table name.
      </p><p>
        <code class="literal">LOAD INDEX INTO CACHE ... IGNORE LEAVES</code> fails
        unless all indexes in a table have the same block size. (Prior
        to MySQL 5.1.19, it fails even without <code class="literal">IGNORE
        LEAVES</code>.) You can determine index block sizes for a
        table by using <span><strong class="command">myisamchk -dv</strong></span> and checking the
        <code class="literal">Blocksize</code> column.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="reset"></a>12.5.6.5. <code class="literal">RESET</code> Syntax</h4></div></div></div><pre class="programlisting">RESET <em class="replaceable"><code>reset_option</code></em> [, <em class="replaceable"><code>reset_option</code></em>] ...
</pre><p>
        The <code class="literal">RESET</code> statement is used to clear the
        state of various server operations. You must have the
        <code class="literal">RELOAD</code> privilege to execute
        <code class="literal">RESET</code>.
      </p><p>
        <code class="literal">RESET</code> acts as a stronger version of the
        <code class="literal">FLUSH</code> statement. See <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax">Section 12.5.6.2, “<code class="literal">FLUSH</code> Syntax”</a>.
      </p><p>
        <em class="replaceable"><code>reset_option</code></em> can be any of the
        following:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">MASTER</code>
          </p><p>
            Deletes all binary logs listed in the index file, resets the
            binary log index file to be empty, and creates a new binary
            log file.
          </p></li><li><p>
            <code class="literal">QUERY CACHE</code>
          </p><p>
            Removes all query results from the query cache.
          </p></li><li><p>
            <code class="literal">SLAVE</code>
          </p><p>
            Makes the slave forget its replication position in the
            master binary logs. Also resets the relay log by deleting
            any existing relay log files and beginning a new one.
          </p></li></ul></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql-syntax-replication"></a>12.6. Replication Statements</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#replication-master-sql">12.6.1. SQL Statements for Controlling Master Servers</a></span></dt><dt><span class="section"><a href="sql-syntax.html#replication-slave-sql">12.6.2. SQL Statements for Controlling Slave Servers</a></span></dt></dl></div><p>
    This section describes SQL statements related to replication. One
    group of statements is used for controlling master servers. The
    other is used for controlling slave servers.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="replication-master-sql"></a>12.6.1. SQL Statements for Controlling Master Servers</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#purge-master-logs">12.6.1.1. <code class="literal">PURGE MASTER LOGS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#reset-master">12.6.1.2. <code class="literal">RESET MASTER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#set-sql-log-bin">12.6.1.3. <code class="literal">SET SQL_LOG_BIN</code> Syntax</a></span></dt></dl></div><a class="indexterm" name="id2245672"></a><a class="indexterm" name="id2245684"></a><a class="indexterm" name="id2245697"></a><p>
      Replication can be controlled through the SQL interface. This
      section discusses statements for managing master replication
      servers. <a href="sql-syntax.html#replication-slave-sql" title="12.6.2. SQL Statements for Controlling Slave Servers">Section 12.6.2, “SQL Statements for Controlling Slave Servers”</a>, discusses
      statements for managing slave servers.
    </p><p>
      The following <code class="literal">SHOW</code> statements are used with
      master servers in replication:

      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">SHOW BINARY LOGS</code>
          </p></li><li><p>
            <code class="literal">SHOW BINLOG EVENTS</code>
          </p></li><li><p>
            <code class="literal">SHOW MASTER STATUS</code>
          </p></li><li><p>
            <code class="literal">SHOW SLAVE HOSTS</code>
          </p></li></ul></div><p>

      For information about these statements, see
      <a href="sql-syntax.html#show" title="12.5.5. SHOW Syntax">Section 12.5.5, “<code class="literal">SHOW</code> Syntax”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="purge-master-logs"></a>12.6.1.1. <code class="literal">PURGE MASTER LOGS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2245798"></a><pre class="programlisting">PURGE {MASTER | BINARY} LOGS TO '<em class="replaceable"><code>log_name</code></em>'
PURGE {MASTER | BINARY} LOGS BEFORE '<em class="replaceable"><code>date</code></em>'
</pre><p>
        Deletes all the binary logs listed in the log index prior to the
        specified log or date. The logs also are removed from the list
        recorded in the log index file, so that the given log becomes
        the first.
      </p><p>
        This statement has no effect if the <code class="option">--log-bin</code>
        option has not been enabled.
      </p><p>
        Example:
      </p><pre class="programlisting">PURGE MASTER LOGS TO 'mysql-bin.010';
PURGE MASTER LOGS BEFORE '2003-04-02 22:46:26';
</pre><p>
        The <code class="literal">BEFORE</code> variant's
        <em class="replaceable"><code>date</code></em> argument can be in
        <code class="literal">'YYYY-MM-DD hh:mm:ss'</code> format.
        <code class="literal">MASTER</code> and <code class="literal">BINARY</code> are
        synonyms.
      </p><p>
        This statement is safe to run while slaves are replicating. You
        do not need to stop them. If you have an active slave that
        currently is reading one of the logs you are trying to delete,
        this statement does nothing and fails with an error. However, if
        a slave is dormant and you happen to purge one of the logs it
        has yet to read, the slave will be unable to replicate after it
        comes up.
      </p><p>
        To safely purge logs, follow this procedure:
      </p><div class="orderedlist"><ol type="1"><li><p>
            On each slave server, use <code class="literal">SHOW SLAVE
            STATUS</code> to check which log it is reading.
          </p></li><li><p>
            Obtain a listing of the binary logs on the master server
            with <code class="literal">SHOW BINARY LOGS</code>.
          </p></li><li><p>
            Determine the earliest log among all the slaves. This is the
            target log. If all the slaves are up to date, this is the
            last log on the list.
          </p></li><li><p>
            Make a backup of all the logs you are about to delete. (This
            step is optional, but always advisable.)
          </p></li><li><p>
            Purge all logs up to but not including the target log.
          </p></li></ol></div><p>
        You can also set the <code class="literal">expire_logs_days</code> system
        variable to expire binary log files automatically after a given
        number of days (see <a href="server-administration.html#server-system-variables" title="5.1.3. System Variables">Section 5.1.3, “System Variables”</a>).
        If you are using replication, you should set the variable no
        lower than the maximum number of days your slaves might lag
        behind the master.
      </p><p>
        Prior to MySQL 5.1.24, <code class="literal">PURGE BINARY LOGS TO</code>
        and <code class="literal">PURGE BINARY LOGS BEFORE</code> did not behave
        in the same way (and neither one behaved correctly) when binary
        log files listed in the <code class="filename">.index</code> file had
        been removed from the system by some other means (such as using
        rm on Linux). Beginning with MySQL 5.1.24, both variants of the
        statement fail with an error in such cases. (<a href="http://bugs.mysql.com/18199" target="_top">Bug#18199</a>, <a href="http://bugs.mysql.com/18453" target="_top">Bug#18453</a>) You can handle such errors by editing the
        <code class="filename">.index</code> file (which is a simple text file)
        manually and insuring that it lists only the binlog files that
        are actually present, then running again the <code class="literal">PURGE
        BINARY LOGS</code> statement that failed.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="reset-master"></a>12.6.1.2. <code class="literal">RESET MASTER</code> Syntax</h4></div></div></div><a class="indexterm" name="id2246053"></a><pre class="programlisting">RESET MASTER
</pre><p>
        Deletes all binary logs listed in the index file, resets the
        binary log index file to be empty, and creates a new binary log
        file.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="set-sql-log-bin"></a>12.6.1.3. <code class="literal">SET SQL_LOG_BIN</code> Syntax</h4></div></div></div><a class="indexterm" name="id2246112"></a><pre class="programlisting">SET SQL_LOG_BIN = {0|1}
</pre><p>
        Disables or enables binary logging for the current connection
        (<code class="literal">SQL_LOG_BIN</code> is a session variable) if the
        client has the <code class="literal">SUPER</code> privilege. The statement
        is refused with an error if the client does not have that
        privilege.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="replication-slave-sql"></a>12.6.2. SQL Statements for Controlling Slave Servers</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#change-master-to">12.6.2.1. <code class="literal">CHANGE MASTER TO</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#load-data-from-master">12.6.2.2. <code class="literal">LOAD DATA FROM MASTER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#load-table-from-master">12.6.2.3. <code class="literal">LOAD TABLE <em class="replaceable"><code>tbl_name</code></em> FROM
        MASTER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#master-pos-wait">12.6.2.4. <code class="literal">MASTER_POS_WAIT()</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#reset-slave">12.6.2.5. <code class="literal">RESET SLAVE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#set-global-sql-slave-skip-counter">12.6.2.6. <code class="literal">SET GLOBAL SQL_SLAVE_SKIP_COUNTER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#start-slave">12.6.2.7. <code class="literal">START SLAVE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#stop-slave">12.6.2.8. <code class="literal">STOP SLAVE</code> Syntax</a></span></dt></dl></div><a class="indexterm" name="id2246180"></a><a class="indexterm" name="id2246192"></a><a class="indexterm" name="id2246204"></a><p>
      Replication can be controlled through the SQL interface. This
      section discusses statements for managing slave replication
      servers. <a href="sql-syntax.html#replication-master-sql" title="12.6.1. SQL Statements for Controlling Master Servers">Section 12.6.1, “SQL Statements for Controlling Master Servers”</a>, discusses
      statements for managing master servers.
    </p><p>
      <code class="literal">SHOW SLAVE STATUS</code> is also used with replication
      slaves. For information about this statement, see
      <a href="sql-syntax.html#show-slave-status" title="12.5.5.31. SHOW SLAVE STATUS Syntax">Section 12.5.5.31, “<code class="literal">SHOW SLAVE STATUS</code> Syntax”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="change-master-to"></a>12.6.2.1. <code class="literal">CHANGE MASTER TO</code> Syntax</h4></div></div></div><a class="indexterm" name="id2246253"></a><pre class="programlisting">CHANGE MASTER TO <em class="replaceable"><code>master_def</code></em> [, <em class="replaceable"><code>master_def</code></em>] ...

<em class="replaceable"><code>master_def</code></em>:
    MASTER_BIND = '<em class="replaceable"><code>interface_name</code></em>'
  | MASTER_HOST = '<em class="replaceable"><code>host_name</code></em>'
  | MASTER_USER = '<em class="replaceable"><code>user_name</code></em>'
  | MASTER_PASSWORD = '<em class="replaceable"><code>password</code></em>'
  | MASTER_PORT = <em class="replaceable"><code>port_num</code></em>
  | MASTER_CONNECT_RETRY = <em class="replaceable"><code>interval</code></em>
  | MASTER_HEARTBEAT_PERIOD = <em class="replaceable"><code>interval</code></em>
  | MASTER_LOG_FILE = '<em class="replaceable"><code>master_log_name</code></em>'
  | MASTER_LOG_POS = <em class="replaceable"><code>master_log_pos</code></em>
  | RELAY_LOG_FILE = '<em class="replaceable"><code>relay_log_name</code></em>'
  | RELAY_LOG_POS = <em class="replaceable"><code>relay_log_pos</code></em>
  | MASTER_SSL = {0|1}
  | MASTER_SSL_CA = '<em class="replaceable"><code>ca_file_name</code></em>'
  | MASTER_SSL_CAPATH = '<em class="replaceable"><code>ca_directory_name</code></em>'
  | MASTER_SSL_CERT = '<em class="replaceable"><code>cert_file_name</code></em>'
  | MASTER_SSL_KEY = '<em class="replaceable"><code>key_file_name</code></em>'
  | MASTER_SSL_CIPHER = '<em class="replaceable"><code>cipher_list</code></em>'
  | MASTER_SSL_VERIFY_SERVER_CERT = {0|1}
</pre><p>
        <code class="literal">CHANGE MASTER TO</code> changes the parameters that
        the slave server uses for connecting to and communicating with
        the master server. It also updates the contents of the
        <code class="filename">master.info</code> and
        <code class="filename">relay-log.info</code> files.
      </p><p>
        <code class="literal">MASTER_USER</code>,
        <code class="literal">MASTER_PASSWORD</code>,
        <code class="literal">MASTER_SSL</code>, <code class="literal">MASTER_SSL_CA</code>,
        <code class="literal">MASTER_SSL_CAPATH</code>,
        <code class="literal">MASTER_SSL_CERT</code>,
        <code class="literal">MASTER_SSL_KEY</code>,
        <code class="literal">MASTER_SSL_CIPHER</code>, and
        <code class="literal">MASTER_SSL_VERIFY_SERVER_CERT</code> provide
        information to the slave about how to connect to its master.
        <code class="literal">MASTER_SSL_VERIFY_SERVER_CERT</code> was added in
        MySQL 5.1.18. It is used as described for the
        <code class="option">--ssl-verify-server-cert</code> option in
        <a href="server-administration.html#ssl-options" title="5.5.7.3. SSL Command Options">Section 5.5.7.3, “SSL Command Options”</a>.
      </p><p>
        <code class="literal">MASTER_CONNECT_RETRY</code> specifies how many
        seconds to wait between connect retries. The default is 60. The
        <span class="emphasis"><em>number</em></span> of reconnection attempts is limited
        by the <code class="option">--master-retry-count</code> server option; for
        more information, see <a href="replication.html#replication-options" title="19.1.3. Replication Options and Variables">Section 19.1.3, “Replication Options and Variables”</a>.
      </p><p>
        The SSL options (<code class="literal">MASTER_SSL</code>,
        <code class="literal">MASTER_SSL_CA</code>,
        <code class="literal">MASTER_SSL_CAPATH</code>,
        <code class="literal">MASTER_SSL_CERT</code>,
        <code class="literal">MASTER_SSL_KEY</code>,
        <code class="literal">MASTER_SSL_CIPHER</code>), and
        <code class="literal">MASTER_SSL_VERIFY_SERVER_CERT</code> can be changed
        even on slaves that are compiled without SSL support. They are
        saved to the <code class="filename">master.info</code> file, but are
        ignored unless you use a server that has SSL support enabled.
      </p><p>
        If you don't specify a given parameter, it keeps its old value,
        except as indicated in the following discussion. For example, if
        the password to connect to your MySQL master has changed, you
        just need to issue these statements to tell the slave about the
        new password:
      </p><pre class="programlisting">STOP SLAVE; -- if replication was running
CHANGE MASTER TO MASTER_PASSWORD='new3cret';
START SLAVE; -- if you want to restart replication
</pre><p>
        There is no need to specify the parameters that do not change
        (host, port, user, and so forth).
      </p><p>
        <code class="literal">MASTER_HOST</code> and
        <code class="literal">MASTER_PORT</code> are the hostname (or IP address)
        of the master host and its TCP/IP port. Note that if
        <code class="literal">MASTER_HOST</code> is equal to
        <code class="literal">localhost</code>, then, like in other parts of
        MySQL, the port number might be ignored.
      </p><p>
        <code class="literal">MASTER_BIND</code> is for use on replication slaves
        having multiple network interfaces, and determines which of the
        slave's network interfaces is chosen for connecting to the
        master. It is also possible to determine which network interface
        is to be used in such cases by starting the slave mysqld process
        with the <code class="option">--master-bind</code> option.
      </p><p>
        The ability to bind a replication slave to specific network
        interface was added in MySQL Cluster NDB 6.3.4.
      </p><p>
        <code class="literal">MASTER_HEARTBEAT_PERIOD</code> is used to set the
        interval in seconds between replication heartbeats. Whenever the
        master's binlog is updated with an event, the waiting period for
        the next heartbeat is reset. <em class="replaceable"><code>interval</code></em>
        is a decimal value having the range 0 to 4294967 seconds and a
        resolution to hundredths of a second; the smallest nonzero value
        is 0.001. Heartbeats are sent by the master only if there are no
        unsent events in the binlog file for a period longer than
        <em class="replaceable"><code>interval</code></em>.
      </p><p>
        Setting <em class="replaceable"><code>interval</code></em> to 0 disables
        heartbeats altogether. The default value for
        <em class="replaceable"><code>interval</code></em> is equal to the value of
        <code class="literal">slave_net_timeout</code> divided by 2.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Setting <code class="literal">@@global.slave_net_timeout</code> to a
          value less than that of the current heartbeat interval results
          in a warning being issued.
        </p></div><p>
        Issuing <code class="literal">RESET SLAVE</code> resets the hearbeat
        interval to the default.
      </p><p>
        <code class="literal">MASTER_HEARTBEAT_PERIOD</code> was added in MySQL
        Cluster NDB 6.3.4.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Replication cannot use Unix socket files. You must be able to
          connect to the master MySQL server using TCP/IP.
        </p></div><p>
        If you specify <code class="literal">MASTER_HOST</code> or
        <code class="literal">MASTER_PORT</code>, the slave assumes that the
        master server is different from before (even if you specify a
        host or port value that is the same as the current value.) In
        this case, the old values for the master binary log name and
        position are considered no longer applicable, so if you do not
        specify <code class="literal">MASTER_LOG_FILE</code> and
        <code class="literal">MASTER_LOG_POS</code> in the statement,
        <code class="literal">MASTER_LOG_FILE=''</code> and
        <code class="literal">MASTER_LOG_POS=4</code> are silently appended to it.
      </p><p>
        <code class="literal">MASTER_LOG_FILE</code> and
        <code class="literal">MASTER_LOG_POS</code> are the coordinates at which
        the slave I/O thread should begin reading from the master the
        next time the thread starts. If you specify either of them, you
        cannot specify <code class="literal">RELAY_LOG_FILE</code> or
        <code class="literal">RELAY_LOG_POS</code>. If neither of
        <code class="literal">MASTER_LOG_FILE</code> or
        <code class="literal">MASTER_LOG_POS</code> are specified, the slave uses
        the last coordinates of the <span class="emphasis"><em>slave SQL
        thread</em></span> before <code class="literal">CHANGE MASTER</code> was
        issued. This ensures that there is no discontinuity in
        replication, even if the slave SQL thread was late compared to
        the slave I/O thread, when you merely want to change, say, the
        password to use.
      </p><p>
        <code class="literal">CHANGE MASTER</code> <span class="emphasis"><em>deletes all relay log
        files</em></span> and starts a new one, unless you specify
        <code class="literal">RELAY_LOG_FILE</code> or
        <code class="literal">RELAY_LOG_POS</code>. In that case, relay logs are
        kept; the <code class="literal">relay_log_purge</code> global variable is
        set silently to 0.
      </p><p>
        <code class="literal">CHANGE MASTER</code> is useful for setting up a
        slave when you have the snapshot of the master and have recorded
        the log and the offset corresponding to it. After loading the
        snapshot into the slave, you can run <code class="literal">CHANGE MASTER TO
        MASTER_LOG_FILE='<em class="replaceable"><code>log_name_on_master</code></em>',
        MASTER_LOG_POS=<em class="replaceable"><code>log_offset_on_master</code></em></code>
        on the slave.
      </p><p>
        The following example changes the master and master's binary log
        coordinates. This is used when you want to set up the slave to
        replicate the master:
      </p><pre class="programlisting">CHANGE MASTER TO
  MASTER_HOST='master2.mycompany.com',
  MASTER_USER='replication',
  MASTER_PASSWORD='bigs3cret',
  MASTER_PORT=3306,
  MASTER_LOG_FILE='master2-bin.001',
  MASTER_LOG_POS=4,
  MASTER_CONNECT_RETRY=10;
</pre><p>
        The next example shows an operation that is less frequently
        employed. It is used when the slave has relay logs that you want
        it to execute again for some reason. To do this, the master need
        not be reachable. You need only use <code class="literal">CHANGE MASTER
        TO</code> and start the SQL thread (<code class="literal">START SLAVE
        SQL_THREAD</code>):
      </p><pre class="programlisting">CHANGE MASTER TO
  RELAY_LOG_FILE='slave-relay-bin.006',
  RELAY_LOG_POS=4025;
</pre><p>
        You can even use the second operation in a non-replication setup
        with a standalone, non-slave server for recovery following a
        crash. Suppose that your server has crashed and you have
        restored a backup. You want to replay the server's own binary
        logs (not relay logs, but regular binary logs), named (for
        example) <code class="filename">myhost-bin.*</code>. First, make a backup
        copy of these binary logs in some safe place, in case you don't
        exactly follow the procedure below and accidentally have the
        server purge the binary logs. Use <code class="literal">SET GLOBAL
        relay_log_purge=0</code> for additional safety. Then start
        the server without the <code class="option">--log-bin</code> option,
        Instead, use the <code class="option">--replicate-same-server-id</code>,
        <code class="option">--relay-log=myhost-bin</code> (to make the server
        believe that these regular binary logs are relay logs) and
        <code class="option">--skip-slave-start</code> options. After the server
        starts, issue these statements:
      </p><pre class="programlisting">CHANGE MASTER TO
  RELAY_LOG_FILE='myhost-bin.153',
  RELAY_LOG_POS=410,
  MASTER_HOST='some_dummy_string';
START SLAVE SQL_THREAD;
</pre><p>
        The server reads and executes its own binary logs, thus
        achieving crash recovery. Once the recovery is finished, run
        <code class="literal">STOP SLAVE</code>, shut down the server, delete the
        <code class="filename">master.info</code> and
        <code class="filename">relay-log.info</code> files, and restart the
        server with its original options.
      </p><p>
        Specifying the <code class="literal">MASTER_HOST</code> option (even with
        a dummy value) is required to make the server think it is a
        slave.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="load-data-from-master"></a>12.6.2.2. <code class="literal">LOAD DATA FROM MASTER</code> Syntax</h4></div></div></div><a class="indexterm" name="id2246962"></a><pre class="programlisting">LOAD DATA FROM MASTER
</pre><p class="deprecated"><span class="bold"><strong>This feature is deprecated. We recommend not using it anymore. It is subject to removal in a future version of MySQL.</strong></span></p><p>
        Since the current implementation of <code class="literal">LOAD DATA FROM
        MASTER</code> and <code class="literal">LOAD TABLE FROM MASTER</code>
        is very limited, these statements are deprecated in versions 4.1
        of MySQL and above. We will introduce a more advanced technique
        (called “<span class="quote">online backup</span>”) in a future version. That
        technique will have the additional advantage of working with
        more storage engines.
      </p><p>
        For MySQL 5.1 and earlier, the recommended alternative solution
        to using <code class="literal">LOAD DATA FROM MASTER</code> or
        <code class="literal">LOAD TABLE FROM MASTER</code> is using
        <span><strong class="command">mysqldump</strong></span> or <span><strong class="command">mysqlhotcopy</strong></span>.
        The latter requires Perl and two Perl modules
        (<code class="literal">DBI</code> and <code class="literal">DBD:mysql</code>) and
        works for <code class="literal">MyISAM</code> and
        <code class="literal">ARCHIVE</code> tables only. With
        <span><strong class="command">mysqldump</strong></span>, you can create SQL dumps on the
        master and pipe (or copy) these to a <span><strong class="command">mysql</strong></span>
        client on the slave. This has the advantage of working for all
        storage engines, but can be quite slow, since it works using
        <code class="literal">SELECT</code>.
      </p><p>
        This statement takes a snapshot of the master and copies it to
        the slave. It updates the values of
        <code class="literal">MASTER_LOG_FILE</code> and
        <code class="literal">MASTER_LOG_POS</code> so that the slave starts
        replicating from the correct position. Any table and database
        exclusion rules specified with the
        <code class="option">--replicate-*-do-*</code> and
        <code class="option">--replicate-*-ignore-*</code> options are honored.
        <code class="option">--replicate-rewrite-db</code> is
        <span class="emphasis"><em>not</em></span> taken into account because a user could
        use this option to set up a non-unique mapping such as
        <code class="option">--replicate-rewrite-db="db1-&gt;db3"</code>
        and
        <code class="option">--replicate-rewrite-db="db2-&gt;db3"</code>,
        which would confuse the slave when loading tables from the
        master.
      </p><p>
        Use of this statement is subject to the following conditions:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            It works only for <code class="literal">MyISAM</code> tables.
            Attempting to load a non-<code class="literal">MyISAM</code> table
            results in the following error:
          </p><pre class="programlisting">ERROR 1189 (08S01): Net error reading from master
</pre></li><li><p>
            It acquires a global read lock on the master while taking
            the snapshot, which prevents updates on the master during
            the load operation.
          </p></li></ul></div><p>
        If you are loading large tables, you might have to increase the
        values of <code class="literal">net_read_timeout</code> and
        <code class="literal">net_write_timeout</code> on both the master and
        slave servers. See <a href="server-administration.html#server-system-variables" title="5.1.3. System Variables">Section 5.1.3, “System Variables”</a>.
      </p><p>
        Note that <code class="literal">LOAD DATA FROM MASTER</code> does
        <span class="emphasis"><em>not</em></span> copy any tables from the
        <code class="literal">mysql</code> database. This makes it easy to have
        different users and privileges on the master and the slave.
      </p><p>
        To use <code class="literal">LOAD DATA FROM MASTER</code>, the replication
        account that is used to connect to the master must have the
        <code class="literal">RELOAD</code> and <code class="literal">SUPER</code>
        privileges on the master and the <code class="literal">SELECT</code>
        privilege for all master tables you want to load. All master
        tables for which the user does not have the
        <code class="literal">SELECT</code> privilege are ignored by <code class="literal">LOAD
        DATA FROM MASTER</code>. This is because the master hides
        them from the user: <code class="literal">LOAD DATA FROM MASTER</code>
        calls <code class="literal">SHOW DATABASES</code> to know the master
        databases to load, but <code class="literal">SHOW DATABASES</code> returns
        only databases for which the user has some privilege. See
        <a href="sql-syntax.html#show-databases" title="12.5.5.14. SHOW DATABASES Syntax">Section 12.5.5.14, “<code class="literal">SHOW DATABASES</code> Syntax”</a>. On the slave side, the user
        that issues <code class="literal">LOAD DATA FROM MASTER</code> must have
        privileges for dropping and creating the databases and tables
        that are copied.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="load-table-from-master"></a>12.6.2.3. <code class="literal">LOAD TABLE <em class="replaceable"><code>tbl_name</code></em> FROM
        MASTER</code> Syntax</h4></div></div></div><a class="indexterm" name="id2247320"></a><pre class="programlisting">LOAD TABLE <em class="replaceable"><code>tbl_name</code></em> FROM MASTER
</pre><p class="deprecated"><span class="bold"><strong>This feature is deprecated. We recommend not using it anymore. It is subject to removal in a future version of MySQL.</strong></span></p><p>
        Since the current implementation of <code class="literal">LOAD DATA FROM
        MASTER</code> and <code class="literal">LOAD TABLE FROM MASTER</code>
        is very limited, these statements are deprecated in versions 4.1
        of MySQL and above. We will introduce a more advanced technique
        (called “<span class="quote">online backup</span>”) in a future version. That
        technique will have the additional advantage of working with
        more storage engines.
      </p><p>
        For MySQL 5.1 and earlier, the recommended alternative solution
        to using <code class="literal">LOAD DATA FROM MASTER</code> or
        <code class="literal">LOAD TABLE FROM MASTER</code> is using
        <span><strong class="command">mysqldump</strong></span> or <span><strong class="command">mysqlhotcopy</strong></span>.
        The latter requires Perl and two Perl modules
        (<code class="literal">DBI</code> and <code class="literal">DBD:mysql</code>) and
        works for <code class="literal">MyISAM</code> and
        <code class="literal">ARCHIVE</code> tables only. With
        <span><strong class="command">mysqldump</strong></span>, you can create SQL dumps on the
        master and pipe (or copy) these to a <span><strong class="command">mysql</strong></span>
        client on the slave. This has the advantage of working for all
        storage engines, but can be quite slow, since it works using
        <code class="literal">SELECT</code>.
      </p><p>
        Transfers a copy of the table from the master to the slave. This
        statement is implemented mainly debugging <code class="literal">LOAD DATA
        FROM MASTER</code> operations. To use <code class="literal">LOAD
        TABLE</code>, the account used for connecting to the master
        server must have the <code class="literal">RELOAD</code> and
        <code class="literal">SUPER</code> privileges on the master and the
        <code class="literal">SELECT</code> privilege for the master table to
        load. On the slave side, the user that issues <code class="literal">LOAD
        TABLE FROM MASTER</code> must have privileges for dropping
        and creating the table.
      </p><p>
        The conditions for <code class="literal">LOAD DATA FROM MASTER</code>
        apply here as well. For example, <code class="literal">LOAD TABLE FROM
        MASTER</code> works only for <code class="literal">MyISAM</code>
        tables. The timeout notes for <code class="literal">LOAD DATA FROM
        MASTER</code> apply as well.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="master-pos-wait"></a>12.6.2.4. <a href="functions.html#function_master-pos-wait"><code class="literal">MASTER_POS_WAIT()</code></a> Syntax</h4></div></div></div><a class="indexterm" name="id2247554"></a><pre class="programlisting">SELECT MASTER_POS_WAIT('<em class="replaceable"><code>master_log_file</code></em>', <em class="replaceable"><code>master_log_pos</code></em> [, <em class="replaceable"><code>timeout</code></em>])
</pre><p>
        This is actually a function, not a statement. It is used to
        ensure that the slave has read and executed events up to a given
        position in the master's binary log. See
        <a href="functions.html#miscellaneous-functions" title="11.11.4. Miscellaneous Functions">Section 11.11.4, “Miscellaneous Functions”</a>, for a full
        description.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="reset-slave"></a>12.6.2.5. <code class="literal">RESET SLAVE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2247603"></a><pre class="programlisting">RESET SLAVE
</pre><p>
        <code class="literal">RESET SLAVE</code> makes the slave forget its
        replication position in the master's binary logs. This statement
        is meant to be used for a clean start: It deletes the
        <code class="filename">master.info</code> and
        <code class="filename">relay-log.info</code> files, all the relay logs,
        and starts a new relay log.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          All relay logs are deleted, even if they have not been
          completely executed by the slave SQL thread. (This is a
          condition likely to exist on a replication slave if you have
          issued a <code class="literal">STOP SLAVE</code> statement or if the
          slave is highly loaded.)
        </p></div><p>
        Connection information stored in the
        <code class="filename">master.info</code> file is immediately reset using
        any values specified in the corresponding startup options. This
        information includes values such as master host, master port,
        master user, and master password. If the slave SQL thread was in
        the middle of replicating temporary tables when it was stopped,
        and <code class="literal">RESET SLAVE</code> is issued, these replicated
        temporary tables are deleted on the slave.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="set-global-sql-slave-skip-counter"></a>12.6.2.6. <code class="literal">SET GLOBAL SQL_SLAVE_SKIP_COUNTER</code> Syntax</h4></div></div></div><a class="indexterm" name="id2247714"></a><pre class="programlisting">SET GLOBAL SQL_SLAVE_SKIP_COUNTER = <em class="replaceable"><code>N</code></em>
</pre><p>
        This statement skips the next <em class="replaceable"><code>N</code></em>
        events from the master. This is useful for recovering from
        replication stops caused by a statement.
      </p><p>
        This statement is valid only when the slave thread is not
        running. Otherwise, it produces an error.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="start-slave"></a>12.6.2.7. <code class="literal">START SLAVE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2247784"></a><pre class="programlisting">START SLAVE [<em class="replaceable"><code>thread_type</code></em> [, <em class="replaceable"><code>thread_type</code></em>] ... ]
START SLAVE [SQL_THREAD] UNTIL
    MASTER_LOG_FILE = '<em class="replaceable"><code>log_name</code></em>', MASTER_LOG_POS = <em class="replaceable"><code>log_pos</code></em>
START SLAVE [SQL_THREAD] UNTIL
    RELAY_LOG_FILE = '<em class="replaceable"><code>log_name</code></em>', RELAY_LOG_POS = <em class="replaceable"><code>log_pos</code></em>

<em class="replaceable"><code>thread_type</code></em>: IO_THREAD | SQL_THREAD
</pre><p>
        <code class="literal">START SLAVE</code> with no
        <em class="replaceable"><code>thread_type</code></em> options starts both of
        the slave threads. The I/O thread reads queries from the master
        server and stores them in the relay log. The SQL thread reads
        the relay log and executes the queries. <code class="literal">START
        SLAVE</code> requires the <code class="literal">SUPER</code> privilege.
      </p><p>
        If <code class="literal">START SLAVE</code> succeeds in starting the slave
        threads, it returns without any error. However, even in that
        case, it might be that the slave threads start and then later
        stop (for example, because they do not manage to connect to the
        master or read its binary logs, or some other problem).
        <code class="literal">START SLAVE</code> does not warn you about this. You
        must check the slave's error log for error messages generated by
        the slave threads, or check that they are running satisfactorily
        with <code class="literal">SHOW SLAVE STATUS</code>.
      </p><p>
        <code class="literal">START SLAVE</code> sends an acknowledgement to the
        user after both the IO thread and the SQL thread have started.
        However, the IO thread may not yet have connected. For this
        reason, a successful <code class="literal">START SLAVE</code> causes
        <code class="literal">SHOW SLAVE STATUS</code> to show
        <code class="literal">Slave_SQL_Running=Yes</code>, but this does not
        guarantee that <code class="literal">Slave_IO_Running=Yes</code> (because
        <code class="literal">Slave_IO_Running=Yes</code> only if the IO thread is
        running <span class="emphasis"><em>and connected</em></span>). For more
        information, see <a href="sql-syntax.html#show-slave-status" title="12.5.5.31. SHOW SLAVE STATUS Syntax">Section 12.5.5.31, “<code class="literal">SHOW SLAVE STATUS</code> Syntax”</a>, and
        <a href="replication.html#replication-administration-status" title="19.1.4.1. Checking Replication Status">Section 19.1.4.1, “Checking Replication Status”</a>.
      </p><p>
        You can add <code class="literal">IO_THREAD</code> and
        <code class="literal">SQL_THREAD</code> options to the statement to name
        which of the threads to start.
      </p><p>
        An <code class="literal">UNTIL</code> clause may be added to specify that
        the slave should start and run until the SQL thread reaches a
        given point in the master binary logs or in the slave relay
        logs. When the SQL thread reaches that point, it stops. If the
        <code class="literal">SQL_THREAD</code> option is specified in the
        statement, it starts only the SQL thread. Otherwise, it starts
        both slave threads. If the SQL thread is running, the
        <code class="literal">UNTIL</code> clause is ignored and a warning is
        issued.
      </p><p>
        For an <code class="literal">UNTIL</code> clause, you must specify both a
        log filename and position. Do not mix master and relay log
        options.
      </p><p>
        Any <code class="literal">UNTIL</code> condition is reset by a subsequent
        <code class="literal">STOP SLAVE</code> statement, a <code class="literal">START
        SLAVE</code> statement that includes no
        <code class="literal">UNTIL</code> clause, or a server restart.
      </p><p>
        The <code class="literal">UNTIL</code> clause can be useful for debugging
        replication, or to cause replication to proceed until just
        before the point where you want to avoid having the slave
        replicate a statement. For example, if an unwise <code class="literal">DROP
        TABLE</code> statement was executed on the master, you can
        use <code class="literal">UNTIL</code> to tell the slave to execute up to
        that point but no farther. To find what the event is, use
        <span><strong class="command">mysqlbinlog</strong></span> with the master logs or slave
        relay logs, or by using a <code class="literal">SHOW BINLOG EVENTS</code>
        statement.
      </p><p>
        If you are using <code class="literal">UNTIL</code> to have the slave
        process replicated queries in sections, it is recommended that
        you start the slave with the <code class="option">--skip-slave-start</code>
        option to prevent the SQL thread from running when the slave
        server starts. It is probably best to use this option in an
        option file rather than on the command line, so that an
        unexpected server restart does not cause it to be forgotten.
      </p><p>
        The <code class="literal">SHOW SLAVE STATUS</code> statement includes
        output fields that display the current values of the
        <code class="literal">UNTIL</code> condition.
      </p><p>
        In old versions of MySQL (before 4.0.5), this statement was
        called <code class="literal">SLAVE START</code>. This usage is still
        accepted in MySQL 5.1 for backward compatibility,
        but is deprecated.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="stop-slave"></a>12.6.2.8. <code class="literal">STOP SLAVE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2248131"></a><pre class="programlisting">STOP SLAVE [<em class="replaceable"><code>thread_type</code></em> [, <em class="replaceable"><code>thread_type</code></em>] ... ]

<em class="replaceable"><code>thread_type</code></em>: IO_THREAD | SQL_THREAD
</pre><p>
        Stops the slave threads. <code class="literal">STOP SLAVE</code> requires
        the <code class="literal">SUPER</code> privilege.
      </p><p>
        Like <code class="literal">START SLAVE</code>, this statement may be used
        with the <code class="literal">IO_THREAD</code> and
        <code class="literal">SQL_THREAD</code> options to name the thread or
        threads to be stopped.
      </p><p>
        In old versions of MySQL (before 4.0.5), this statement was
        called <code class="literal">SLAVE STOP</code>. This usage is still
        accepted in MySQL 5.1 for backward compatibility,
        but is deprecated.
      </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql-syntax-prepared-statements"></a>12.7. SQL Syntax for Prepared Statements</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#statement-repreparation">12.7.1. Automatic Prepared Statement Repreparation</a></span></dt></dl></div><a class="indexterm" name="id2248256"></a><a class="indexterm" name="id2248264"></a><a class="indexterm" name="id2248273"></a><a class="indexterm" name="id2248282"></a><p>
    MySQL 5.1 provides support for server-side prepared
    statements. This support takes advantage of the efficient
    client/server binary protocol implemented in MySQL 4.1, provided
    that you use an appropriate client programming interface. Candidate
    interfaces include the MySQL C API client library (for C programs),
    MySQL Connector/J (for Java programs), and MySQL Connector/NET. For
    example, the C API provides a set of function calls that make up its
    prepared statement API. See
    <a href="apis.html#c-api-prepared-statements" title="29.2.4. C API Prepared Statements">Section 29.2.4, “C API Prepared Statements”</a>. Other language
    interfaces can provide support for prepared statements that use the
    binary protocol by linking in the C client library, one example
    being the
    <a href="http://php.net/mysqli" target="_top"><code class="literal">mysqli</code>
    extension</a>, available in PHP 5.0 and later.
  </p><p>
    An alternative SQL interface to prepared statements is available.
    This interface is not as efficient as using the binary protocol
    through a prepared statement API, but requires no programming
    because it is available directly at the SQL level:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        You can use it when no programming interface is available to
        you.
      </p></li><li><p>
        You can use it from any program that allows you to send SQL
        statements to the server to be executed, such as the
        <span><strong class="command">mysql</strong></span> client program.
      </p></li><li><p>
        You can use it even if the client is using an old version of the
        client library. The only requirement is that you be able to
        connect to a server that is recent enough to support SQL syntax
        for prepared statements.
      </p></li></ul></div><p>
    SQL syntax for prepared statements is intended to be used for
    situations such as these:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        You want to test how prepared statements work in your
        application before coding it.
      </p></li><li><p>
        An application has problems executing prepared statements and
        you want to determine interactively what the problem is.
      </p></li><li><p>
        You want to create a test case that describes a problem you are
        having with prepared statements, so that you can file a bug
        report.
      </p></li><li><p>
        You need to use prepared statements but do not have access to a
        programming API that supports them.
      </p></li></ul></div><p>
    SQL syntax for prepared statements is based on three SQL statements:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        <a class="indexterm" name="id2248427"></a>

        <code class="literal">PREPARE <em class="replaceable"><code>stmt_name</code></em> FROM
        <em class="replaceable"><code>preparable_stmt</code></em></code>
      </p><p>
        The <code class="literal">PREPARE</code> statement prepares a statement
        and assigns it a name, <em class="replaceable"><code>stmt_name</code></em>, by
        which to refer to the statement later. Statement names are not
        case sensitive. <em class="replaceable"><code>preparable_stmt</code></em> is
        either a string literal or a user variable that contains the
        text of the statement. The text must represent a single SQL
        statement, not multiple statements. Within the statement,
        “<span class="quote"><code class="literal">?</code></span>” characters can be used as
        parameter markers to indicate where data values are to be bound
        to the query later when you execute it. The
        “<span class="quote"><code class="literal">?</code></span>” characters should not be
        enclosed within quotes, even if you intend to bind them to
        string values. Parameter markers can be used only where data
        values should appear, not for SQL keywords, identifiers, and so
        forth.
      </p><p>
        If a prepared statement with the given name already exists, it
        is deallocated implicitly before the new statement is prepared.
        This means that if the new statement contains an error and
        cannot be prepared, an error is returned and no statement with
        the given name exists.
      </p><p>
        The scope of a prepared statement is the client session within
        which it is created. Other clients cannot see it.
      </p></li><li><p>
        <a class="indexterm" name="id2248531"></a>

        <code class="literal">EXECUTE <em class="replaceable"><code>stmt_name</code></em> [USING
        @<em class="replaceable"><code>var_name</code></em> [,
        @<em class="replaceable"><code>var_name</code></em>] ...]</code>
      </p><p>
        After preparing a statement, you execute it with an
        <code class="literal">EXECUTE</code> statement that refers to the prepared
        statement name. If the prepared statement contains any parameter
        markers, you must supply a <code class="literal">USING</code> clause that
        lists user variables containing the values to be bound to the
        parameters. Parameter values can be supplied only by user
        variables, and the <code class="literal">USING</code> clause must name
        exactly as many variables as the number of parameter markers in
        the statement.
      </p><p>
        You can execute a given prepared statement multiple times,
        passing different variables to it or setting the variables to
        different values before each execution.
      </p></li><li><p>
        <a class="indexterm" name="id2248624"></a>

        <a class="indexterm" name="id2248632"></a>

        <code class="literal">{DEALLOCATE | DROP} PREPARE
        <em class="replaceable"><code>stmt_name</code></em></code>
      </p><p>
        To deallocate a prepared statement, use the <code class="literal">DEALLOCATE
        PREPARE</code> statement. Attempting to execute a prepared
        statement after deallocating it results in an error.
      </p></li></ul></div><p>
    A prepared statement is specific to the connection in which it was
    created. If you terminate a client session without deallocating a
    previously prepared statement, the server deallocates it
    automatically.
  </p><p>
    A prepared statement is also global to the connection. If you create
    a prepared statement within a stored routine, it is not deallocated
    when the stored routine ends.
  </p><p>
    To guard against too many prepared statements being created
    simultaneously, the <code class="literal">max_prepared_stmt_count</code>
    system variable can be set.
  </p><p>
    The following SQL statements can be used in prepared statements:
    <code class="literal">ALTER TABLE</code>, <code class="literal">COMMIT</code>,
    <code class="literal">CREATE INDEX</code>, <code class="literal">CREATE TABLE</code>,
    <code class="literal">DELETE</code>, <code class="literal">DO</code>, <code class="literal">DROP
    INDEX</code>, <code class="literal">DROP TABLE</code>,
    <code class="literal">INSERT</code>, <code class="literal">RENAME TABLE</code>,
    <code class="literal">REPLACE</code>, <code class="literal">SELECT</code>,
    <code class="literal">SET</code>, <code class="literal">UPDATE</code>, and most
    <code class="literal">SHOW</code> statements.
  </p><p>
    As of MySQL 5.1.10, the following additional statements are
    supported:
  </p><pre class="programlisting">ANALYZE TABLE
OPTIMIZE TABLE
REPAIR TABLE
</pre><p>
    As of MySQL 5.1.12, the following additional statements are
    supported:
  </p><pre class="programlisting">CACHE INDEX
CHANGE MASTER
CHECKSUM {TABLE | TABLES}
{CREATE | DROP} DATABASE
{CREATE | RENAME | DROP} USER
FLUSH {TABLE | TABLES | TABLES WITH READ LOCK | HOSTS | PRIVILEGES
  | LOGS | STATUS | MASTER | SLAVE | DES_KEY_FILE | USER_RESOURCES}
GRANT
REVOKE
KILL
LOAD INDEX INTO CACHE
RESET {MASTER | SLAVE | QUERY CACHE}
SHOW BINLOG EVENTS
SHOW CREATE {PROCEDURE | FUNCTION | EVENT | TABLE | VIEW}
SHOW {AUTHORS | CONTRIBUTORS | WARNINGS | ERRORS}
SHOW {MASTER | BINARY} LOGS
SHOW {MASTER | SLAVE} STATUS
SLAVE {START | STOP}
INSTALL PLUGIN
UNINSTALL PLUGIN
</pre><p>
    Other statements are not yet supported.
  </p><p>
    Statements not allowed in SQL prepared statements are generally also
    not permitted in stored routines. Any exceptions to this rule are
    noted in <a href="stored-procedures.html" title="Chapter 23. Stored Procedures and Functions">Chapter 23, <i>Stored Procedures and Functions</i></a>.
  </p><p>
    The following examples show two equivalent ways of preparing a
    statement that computes the hypotenuse of a triangle given the
    lengths of the two sides.
  </p><p>
    The first example shows how to create a prepared statement by using
    a string literal to supply the text of the statement:
  </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>PREPARE stmt1 FROM 'SELECT SQRT(POW(?,2) + POW(?,2)) AS hypotenuse';</code></strong>
mysql&gt; <strong class="userinput"><code>SET @a = 3;</code></strong>
mysql&gt; <strong class="userinput"><code>SET @b = 4;</code></strong>
mysql&gt; <strong class="userinput"><code>EXECUTE stmt1 USING @a, @b;</code></strong>
+------------+
| hypotenuse |
+------------+
|          5 |
+------------+
mysql&gt; <strong class="userinput"><code>DEALLOCATE PREPARE stmt1;</code></strong>
</pre><p>
    The second example is similar, but supplies the text of the
    statement as a user variable:
  </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @s = 'SELECT SQRT(POW(?,2) + POW(?,2)) AS hypotenuse';</code></strong>
mysql&gt; <strong class="userinput"><code>PREPARE stmt2 FROM @s;</code></strong>
mysql&gt; <strong class="userinput"><code>SET @a = 6;</code></strong>
mysql&gt; <strong class="userinput"><code>SET @b = 8;</code></strong>
mysql&gt; <strong class="userinput"><code>EXECUTE stmt2 USING @a, @b;</code></strong>
+------------+
| hypotenuse |
+------------+
|         10 |
+------------+
mysql&gt; <strong class="userinput"><code>DEALLOCATE PREPARE stmt2;</code></strong>
</pre><p>
    Here is an additional example which demonstrates how to choose the
    table on which to perform a query at run time, by storing the name
    of the table as a user variable:
  </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>USE test;</code></strong>
mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (a INT NOT NULL);</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO t1 VALUES (4), (8), (11), (32), (80);</code></strong>

mysql&gt; <strong class="userinput"><code>SET @table = 't1';</code></strong>
mysql&gt; <strong class="userinput"><code>SET @s = CONCAT('SELECT * FROM ', @table);</code></strong>

mysql&gt; <strong class="userinput"><code>PREPARE stmt3 FROM @s;</code></strong>
mysql&gt; <strong class="userinput"><code>EXECUTE stmt3;</code></strong>
+----+
| a  |
+----+
|  4 |
|  8 |
| 11 |
| 32 |
| 80 |
+----+

mysql&gt; <strong class="userinput"><code>DEALLOCATE PREPARE stmt3;</code></strong>
</pre><p>
    Placeholders can be used for the arguments of the
    <code class="literal">LIMIT</code> clause when using prepared statements. See
    <a href="sql-syntax.html#select" title="12.2.7. SELECT Syntax">Section 12.2.7, “<code class="literal">SELECT</code> Syntax”</a>.
  </p><p>
    SQL syntax for prepared statements cannot be used in nested fashion.
    That is, a statement passed to <code class="literal">PREPARE</code> cannot
    itself be a <code class="literal">PREPARE</code>, <code class="literal">EXECUTE</code>,
    or <code class="literal">DEALLOCATE PREPARE</code> statement.
  </p><p>
    SQL syntax for prepared statements is distinct from using prepared
    statement API calls. For example, you cannot use the
    <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> C API function
    to prepare a <code class="literal">PREPARE</code>, <code class="literal">EXECUTE</code>,
    or <code class="literal">DEALLOCATE PREPARE</code> statement.
  </p><p>
    SQL syntax for prepared statements can be used within stored
    procedures, but not in stored functions or triggers. However, a
    cursor cannot be used for a dynamic statement that is prepared and
    executed with <code class="literal">PREPARE</code> and
    <code class="literal">EXECUTE</code>. The statement for a cursor is checked at
    cursor creation time, so the statement cannot be dynamic.
  </p><p>
    SQL syntax for prepared statements does not support multi-statements
    (that is, multiple statements within a single string separated by
    “<span class="quote"><code class="literal">;</code></span>” characters).
  </p><p>
    Before MySQL 5.1.17, prepared statements do not use the query cache.
    As of 5.1.17, prepared statements use the query cache under the
    conditions described in <a href="optimization.html#query-cache-how" title="7.5.4.1. How the Query Cache Operates">Section 7.5.4.1, “How the Query Cache Operates”</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="statement-repreparation"></a>12.7.1. Automatic Prepared Statement Repreparation</h3></div></div></div><a class="indexterm" name="id2249099"></a><p>
      As of MySQL 5.1.25, metadata changes to tables or views referred
      to by prepared statements are detected and cause automatic
      repreparation of the statement when it is next executed. This
      applies to prepared statements processed at the SQL level (using
      the <code class="literal">PREPARE</code> statement) and those processed
      using the binary client-server protocol (using the
      <a href="apis.html#mysql-stmt-prepare" title="29.2.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> C API
      function).
    </p><p>
      Metadata changes occur for DDL statements such as those that
      create, drop, alter, rename, or truncate tables, or that analyze,
      optimize, or repair tables. Repreparation also occurs after
      referenced tables or views are flushed from the table definition
      cache, either implicitly to make room for new entries in the
      cache, or explicitly due to <code class="literal">FLUSH TABLES</code>.
    </p><p>
      Repreparation is automatic, but to the extent that it occurs,
      performance of prepared statements is diminished.
    </p><p>
      When a statement is reprepared, the default database and SQL mode
      that were in effect for the original preparation are used.
    </p><p>
      Table content changes (for example, with <code class="literal">INSERT</code>
      or <code class="literal">UPDATE</code>) do not cause repreparation, nor do
      <code class="literal">SELECT</code> statements.
    </p><p>
      An incompatibility with previous versions of MySQL is that a
      prepared statement may return a different set of columns or
      different column types from one execution to the next. For
      example, if the prepared statement is <code class="literal">SELECT * FROM
      t1</code>, altering <code class="literal">t1</code> to contain a
      different number of columns causes the next execution to return a
      number of columns different from the previous execution.
    </p><p>
      Older versions of the client library cannot handle this change in
      behavior. For applications that use prepared statements with a
      server that performs automatic repreparation, an upgrade to the
      new client library is strongly recommended.
    </p><p>
      The <code class="literal">Com_stmt_reprepare</code> status variable tracks
      the number of repreparations.
    </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="functions.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="storage-engines.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 11. Functions and Operators </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 13. Storage Engines</td></tr></table></div></body></html>
